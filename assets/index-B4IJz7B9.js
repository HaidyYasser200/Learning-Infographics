var nk=t=>{throw TypeError(t)};var z9=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var px=(t,e,n)=>e.has(t)||nk("Cannot "+n);var oe=(t,e,n)=>(px(t,e,"read from private field"),n?n.call(t):e.get(t)),rt=(t,e,n)=>e.has(t)?nk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ve=(t,e,n,r)=>(px(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),er=(t,e,n)=>(px(t,e,"access private method"),n);var lv=(t,e,n,r)=>({set _(i){Ve(t,e,i,n)},get _(){return oe(t,e,r)}});var T3e=z9((L3e,C9)=>{function H9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d4={exports:{}},nb={},p4={exports:{}},Je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=Symbol.for("react.element"),q9=Symbol.for("react.portal"),G9=Symbol.for("react.fragment"),K9=Symbol.for("react.strict_mode"),X9=Symbol.for("react.profiler"),Y9=Symbol.for("react.provider"),J9=Symbol.for("react.context"),Q9=Symbol.for("react.forward_ref"),Z9=Symbol.for("react.suspense"),eq=Symbol.for("react.memo"),tq=Symbol.for("react.lazy"),rk=Symbol.iterator;function nq(t){return t===null||typeof t!="object"?null:(t=rk&&t[rk]||t["@@iterator"],typeof t=="function"?t:null)}var m4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v4=Object.assign,g4={};function ah(t,e,n){this.props=t,this.context=e,this.refs=g4,this.updater=n||m4}ah.prototype.isReactComponent={};ah.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ah.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function y4(){}y4.prototype=ah.prototype;function hC(t,e,n){this.props=t,this.context=e,this.refs=g4,this.updater=n||m4}var dC=hC.prototype=new y4;dC.constructor=hC;v4(dC,ah.prototype);dC.isPureReactComponent=!0;var ik=Array.isArray,b4=Object.prototype.hasOwnProperty,pC={current:null},w4={key:!0,ref:!0,__self:!0,__source:!0};function x4(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)b4.call(e,r)&&!w4.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:xm,type:t,key:o,ref:a,props:i,_owner:pC.current}}function rq(t,e){return{$$typeof:xm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mC(t){return typeof t=="object"&&t!==null&&t.$$typeof===xm}function iq(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ok=/\/+/g;function mx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iq(""+t.key):e.toString(36)}function bg(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case xm:case q9:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+mx(a,0):r,ik(i)?(n="",t!=null&&(n=t.replace(ok,"$&/")+"/"),bg(i,e,n,"",function(l){return l})):i!=null&&(mC(i)&&(i=rq(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ok,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",ik(t))for(var s=0;s<t.length;s++){o=t[s];var u=r+mx(o,s);a+=bg(o,e,n,u,i)}else if(u=nq(t),typeof u=="function")for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=r+mx(o,s++),a+=bg(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function fv(t,e,n){if(t==null)return t;var r=[],i=0;return bg(t,r,"","",function(o){return e.call(n,o,i++)}),r}function oq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cr={current:null},wg={transition:null},aq={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:wg,ReactCurrentOwner:pC};function _4(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:fv,forEach:function(t,e,n){fv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fv(t,function(){e++}),e},toArray:function(t){return fv(t,function(e){return e})||[]},only:function(t){if(!mC(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=ah;Je.Fragment=G9;Je.Profiler=X9;Je.PureComponent=hC;Je.StrictMode=K9;Je.Suspense=Z9;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aq;Je.act=_4;Je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=v4({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=pC.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)b4.call(e,u)&&!w4.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:xm,type:t.type,key:i,ref:o,props:r,_owner:a}};Je.createContext=function(t){return t={$$typeof:J9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Y9,_context:t},t.Consumer=t};Je.createElement=x4;Je.createFactory=function(t){var e=x4.bind(null,t);return e.type=t,e};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:Q9,render:t}};Je.isValidElement=mC;Je.lazy=function(t){return{$$typeof:tq,_payload:{_status:-1,_result:t},_init:oq}};Je.memo=function(t,e){return{$$typeof:eq,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=wg.transition;wg.transition={};try{t()}finally{wg.transition=e}};Je.unstable_act=_4;Je.useCallback=function(t,e){return Cr.current.useCallback(t,e)};Je.useContext=function(t){return Cr.current.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t){return Cr.current.useDeferredValue(t)};Je.useEffect=function(t,e){return Cr.current.useEffect(t,e)};Je.useId=function(){return Cr.current.useId()};Je.useImperativeHandle=function(t,e,n){return Cr.current.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return Cr.current.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return Cr.current.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return Cr.current.useMemo(t,e)};Je.useReducer=function(t,e,n){return Cr.current.useReducer(t,e,n)};Je.useRef=function(t){return Cr.current.useRef(t)};Je.useState=function(t){return Cr.current.useState(t)};Je.useSyncExternalStore=function(t,e,n){return Cr.current.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return Cr.current.useTransition()};Je.version="18.3.1";p4.exports=Je;var R=p4.exports;const W=pt(R),S4=H9({__proto__:null,default:W},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sq=R,uq=Symbol.for("react.element"),lq=Symbol.for("react.fragment"),cq=Object.prototype.hasOwnProperty,fq=sq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hq={key:!0,ref:!0,__self:!0,__source:!0};function E4(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)cq.call(e,r)&&!hq.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:uq,type:t,key:o,ref:a,props:i,_owner:fq.current}}nb.Fragment=lq;nb.jsx=E4;nb.jsxs=E4;d4.exports=nb;var D=d4.exports,C4={exports:{}},mi={},A4={exports:{}},T4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,F){var H=M.length;M.push(F);e:for(;0<H;){var X=H-1>>>1,K=M[X];if(0<i(K,F))M[X]=F,M[H]=K,H=X;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var F=M[0],H=M.pop();if(H!==F){M[0]=H;e:for(var X=0,K=M.length,Q=K>>>1;X<Q;){var ae=2*(X+1)-1,le=M[ae],ve=ae+1,de=M[ve];if(0>i(le,H))ve<K&&0>i(de,le)?(M[X]=de,M[ve]=H,X=ve):(M[X]=le,M[ae]=H,X=ae);else if(ve<K&&0>i(de,H))M[X]=de,M[ve]=H,X=ve;else break e}}return F}function i(M,F){var H=M.sortIndex-F.sortIndex;return H!==0?H:M.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,f=null,h=3,d=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(M){for(var F=n(l);F!==null;){if(F.callback===null)r(l);else if(F.startTime<=M)r(l),F.sortIndex=F.expirationTime,e(u,F);else break;F=n(l)}}function _(M){if(m=!1,b(M),!p)if(n(u)!==null)p=!0,z(x);else{var F=n(l);F!==null&&U(_,F.startTime-M)}}function x(M,F){p=!1,m&&(m=!1,g(C),C=-1),d=!0;var H=h;try{for(b(F),f=n(u);f!==null&&(!(f.expirationTime>F)||M&&!P());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var K=X(f.expirationTime<=F);F=t.unstable_now(),typeof K=="function"?f.callback=K:f===n(u)&&r(u),b(F)}else r(u);f=n(u)}if(f!==null)var Q=!0;else{var ae=n(l);ae!==null&&U(_,ae.startTime-F),Q=!1}return Q}finally{f=null,h=H,d=!1}}var S=!1,E=null,C=-1,A=5,T=-1;function P(){return!(t.unstable_now()-T<A)}function k(){if(E!==null){var M=t.unstable_now();T=M;var F=!0;try{F=E(!0,M)}finally{F?I():(S=!1,E=null)}}else S=!1}var I;if(typeof y=="function")I=function(){y(k)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,B=$.port2;$.port1.onmessage=k,I=function(){B.postMessage(null)}}else I=function(){v(k,0)};function z(M){E=M,S||(S=!0,I())}function U(M,F){C=v(function(){M(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,z(x))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var H=h;h=F;try{return M()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,F){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var H=h;h=M;try{return F()}finally{h=H}},t.unstable_scheduleCallback=function(M,F,H){var X=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,M){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,M={id:c++,callback:F,priorityLevel:M,startTime:H,expirationTime:K,sortIndex:-1},H>X?(M.sortIndex=H,e(l,M),n(u)===null&&M===n(l)&&(m?(g(C),C=-1):m=!0,U(_,H-X))):(M.sortIndex=K,e(u,M),p||d||(p=!0,z(x))),M},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(M){var F=h;return function(){var H=h;h=F;try{return M.apply(this,arguments)}finally{h=H}}}})(T4);A4.exports=T4;var dq=A4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pq=R,pi=dq;function ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P4=new Set,Qd={};function Ml(t,e){xf(t,e),xf(t+"Capture",e)}function xf(t,e){for(Qd[t]=e,t=0;t<e.length;t++)P4.add(e[t])}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E_=Object.prototype.hasOwnProperty,mq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ak={},sk={};function vq(t){return E_.call(sk,t)?!0:E_.call(ak,t)?!1:mq.test(t)?sk[t]=!0:(ak[t]=!0,!1)}function gq(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yq(t,e,n,r){if(e===null||typeof e>"u"||gq(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ar(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jn[t]=new Ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jn[e]=new Ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jn[t]=new Ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jn[t]=new Ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jn[t]=new Ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jn[t]=new Ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jn[t]=new Ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jn[t]=new Ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jn[t]=new Ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var vC=/[\-:]([a-z])/g;function gC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vC,gC);Jn[e]=new Ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vC,gC);Jn[e]=new Ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vC,gC);Jn[e]=new Ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jn[t]=new Ar(t,1,!1,t.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new Ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jn[t]=new Ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function yC(t,e,n,r){var i=Jn.hasOwnProperty(e)?Jn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yq(e,n,i,r)&&(n=null),r||i===null?vq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var za=pq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hv=Symbol.for("react.element"),gc=Symbol.for("react.portal"),yc=Symbol.for("react.fragment"),bC=Symbol.for("react.strict_mode"),C_=Symbol.for("react.profiler"),O4=Symbol.for("react.provider"),k4=Symbol.for("react.context"),wC=Symbol.for("react.forward_ref"),A_=Symbol.for("react.suspense"),T_=Symbol.for("react.suspense_list"),xC=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),I4=Symbol.for("react.offscreen"),uk=Symbol.iterator;function zh(t){return t===null||typeof t!="object"?null:(t=uk&&t[uk]||t["@@iterator"],typeof t=="function"?t:null)}var Gt=Object.assign,vx;function vd(t){if(vx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vx=e&&e[1]||""}return`
`+vx+t}var gx=!1;function yx(t,e){if(!t||gx)return"";gx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{gx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vd(t):""}function bq(t){switch(t.tag){case 5:return vd(t.type);case 16:return vd("Lazy");case 13:return vd("Suspense");case 19:return vd("SuspenseList");case 0:case 2:case 15:return t=yx(t.type,!1),t;case 11:return t=yx(t.type.render,!1),t;case 1:return t=yx(t.type,!0),t;default:return""}}function P_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yc:return"Fragment";case gc:return"Portal";case C_:return"Profiler";case bC:return"StrictMode";case A_:return"Suspense";case T_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case k4:return(t.displayName||"Context")+".Consumer";case O4:return(t._context.displayName||"Context")+".Provider";case wC:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xC:return e=t.displayName||null,e!==null?e:P_(t.type)||"Memo";case gs:e=t._payload,t=t._init;try{return P_(t(e))}catch{}}return null}function wq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P_(e);case 8:return e===bC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function R4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xq(t){var e=R4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dv(t){t._valueTracker||(t._valueTracker=xq(t))}function N4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=R4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Vg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function O_(t,e){var n=e.checked;return Gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D4(t,e){e=e.checked,e!=null&&yC(t,"checked",e,!1)}function k_(t,e){D4(t,e);var n=Js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?I_(t,e.type,n):e.hasOwnProperty("defaultValue")&&I_(t,e.type,Js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ck(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function I_(t,e,n){(e!=="number"||Vg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gd=Array.isArray;function Fc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Js(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function R_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return Gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ue(92));if(gd(n)){if(1<n.length)throw Error(ue(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Js(n)}}function M4(t,e){var n=Js(e.value),r=Js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pv,j4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pv=pv||document.createElement("div"),pv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ed={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_q=["Webkit","ms","Moz","O"];Object.keys(Ed).forEach(function(t){_q.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ed[e]=Ed[t]})});function L4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ed.hasOwnProperty(t)&&Ed[t]?(""+e).trim():e+"px"}function F4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=L4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Sq=Gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function D_(t,e){if(e){if(Sq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function M_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $_=null;function _C(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var j_=null,Bc=null,Uc=null;function dk(t){if(t=Em(t)){if(typeof j_!="function")throw Error(ue(280));var e=t.stateNode;e&&(e=sb(e),j_(t.stateNode,t.type,e))}}function B4(t){Bc?Uc?Uc.push(t):Uc=[t]:Bc=t}function U4(){if(Bc){var t=Bc,e=Uc;if(Uc=Bc=null,dk(t),e)for(t=0;t<e.length;t++)dk(e[t])}}function V4(t,e){return t(e)}function W4(){}var bx=!1;function z4(t,e,n){if(bx)return t(e,n);bx=!0;try{return V4(t,e,n)}finally{bx=!1,(Bc!==null||Uc!==null)&&(W4(),U4())}}function ep(t,e){var n=t.stateNode;if(n===null)return null;var r=sb(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ue(231,e,typeof n));return n}var L_=!1;if(Ra)try{var Hh={};Object.defineProperty(Hh,"passive",{get:function(){L_=!0}}),window.addEventListener("test",Hh,Hh),window.removeEventListener("test",Hh,Hh)}catch{L_=!1}function Eq(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Cd=!1,Wg=null,zg=!1,F_=null,Cq={onError:function(t){Cd=!0,Wg=t}};function Aq(t,e,n,r,i,o,a,s,u){Cd=!1,Wg=null,Eq.apply(Cq,arguments)}function Tq(t,e,n,r,i,o,a,s,u){if(Aq.apply(this,arguments),Cd){if(Cd){var l=Wg;Cd=!1,Wg=null}else throw Error(ue(198));zg||(zg=!0,F_=l)}}function $l(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function H4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pk(t){if($l(t)!==t)throw Error(ue(188))}function Pq(t){var e=t.alternate;if(!e){if(e=$l(t),e===null)throw Error(ue(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return pk(i),t;if(o===r)return pk(i),e;o=o.sibling}throw Error(ue(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(ue(189))}}if(n.alternate!==r)throw Error(ue(190))}if(n.tag!==3)throw Error(ue(188));return n.stateNode.current===n?t:e}function q4(t){return t=Pq(t),t!==null?G4(t):null}function G4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G4(t);if(e!==null)return e;t=t.sibling}return null}var K4=pi.unstable_scheduleCallback,mk=pi.unstable_cancelCallback,Oq=pi.unstable_shouldYield,kq=pi.unstable_requestPaint,nn=pi.unstable_now,Iq=pi.unstable_getCurrentPriorityLevel,SC=pi.unstable_ImmediatePriority,X4=pi.unstable_UserBlockingPriority,Hg=pi.unstable_NormalPriority,Rq=pi.unstable_LowPriority,Y4=pi.unstable_IdlePriority,rb=null,Ho=null;function Nq(t){if(Ho&&typeof Ho.onCommitFiberRoot=="function")try{Ho.onCommitFiberRoot(rb,t,void 0,(t.current.flags&128)===128)}catch{}}var fo=Math.clz32?Math.clz32:$q,Dq=Math.log,Mq=Math.LN2;function $q(t){return t>>>=0,t===0?32:31-(Dq(t)/Mq|0)|0}var mv=64,vv=4194304;function yd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=yd(s):(o&=a,o!==0&&(r=yd(o)))}else a=n&~i,a!==0?r=yd(a):o!==0&&(r=yd(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fo(e),i=1<<n,r|=t[n],e&=~i;return r}function jq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-fo(o),s=1<<a,u=i[a];u===-1?(!(s&n)||s&r)&&(i[a]=jq(s,e)):u<=e&&(t.expiredLanes|=s),o&=~s}}function B_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function J4(){var t=mv;return mv<<=1,!(mv&4194240)&&(mv=64),t}function wx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _m(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fo(e),t[e]=n}function Fq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-fo(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function EC(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fo(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var dt=0;function Q4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Z4,CC,eF,tF,nF,U_=!1,gv=[],js=null,Ls=null,Fs=null,tp=new Map,np=new Map,_s=[],Bq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vk(t,e){switch(t){case"focusin":case"focusout":js=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":tp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":np.delete(e.pointerId)}}function qh(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Em(e),e!==null&&CC(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Uq(t,e,n,r,i){switch(e){case"focusin":return js=qh(js,t,e,n,r,i),!0;case"dragenter":return Ls=qh(Ls,t,e,n,r,i),!0;case"mouseover":return Fs=qh(Fs,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return tp.set(o,qh(tp.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,np.set(o,qh(np.get(o)||null,t,e,n,r,i)),!0}return!1}function rF(t){var e=Ku(t.target);if(e!==null){var n=$l(e);if(n!==null){if(e=n.tag,e===13){if(e=H4(n),e!==null){t.blockedOn=e,nF(t.priority,function(){eF(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=V_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$_=r,n.target.dispatchEvent(r),$_=null}else return e=Em(n),e!==null&&CC(e),t.blockedOn=n,!1;e.shift()}return!0}function gk(t,e,n){xg(t)&&n.delete(e)}function Vq(){U_=!1,js!==null&&xg(js)&&(js=null),Ls!==null&&xg(Ls)&&(Ls=null),Fs!==null&&xg(Fs)&&(Fs=null),tp.forEach(gk),np.forEach(gk)}function Gh(t,e){t.blockedOn===e&&(t.blockedOn=null,U_||(U_=!0,pi.unstable_scheduleCallback(pi.unstable_NormalPriority,Vq)))}function rp(t){function e(i){return Gh(i,t)}if(0<gv.length){Gh(gv[0],t);for(var n=1;n<gv.length;n++){var r=gv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(js!==null&&Gh(js,t),Ls!==null&&Gh(Ls,t),Fs!==null&&Gh(Fs,t),tp.forEach(e),np.forEach(e),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)rF(n),n.blockedOn===null&&_s.shift()}var Vc=za.ReactCurrentBatchConfig,Gg=!0;function Wq(t,e,n,r){var i=dt,o=Vc.transition;Vc.transition=null;try{dt=1,AC(t,e,n,r)}finally{dt=i,Vc.transition=o}}function zq(t,e,n,r){var i=dt,o=Vc.transition;Vc.transition=null;try{dt=4,AC(t,e,n,r)}finally{dt=i,Vc.transition=o}}function AC(t,e,n,r){if(Gg){var i=V_(t,e,n,r);if(i===null)kx(t,e,r,Kg,n),vk(t,r);else if(Uq(i,t,e,n,r))r.stopPropagation();else if(vk(t,r),e&4&&-1<Bq.indexOf(t)){for(;i!==null;){var o=Em(i);if(o!==null&&Z4(o),o=V_(t,e,n,r),o===null&&kx(t,e,r,Kg,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else kx(t,e,r,null,n)}}var Kg=null;function V_(t,e,n,r){if(Kg=null,t=_C(r),t=Ku(t),t!==null)if(e=$l(t),e===null)t=null;else if(n=e.tag,n===13){if(t=H4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kg=t,null}function iF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Iq()){case SC:return 1;case X4:return 4;case Hg:case Rq:return 16;case Y4:return 536870912;default:return 16}default:return 16}}var ks=null,TC=null,_g=null;function oF(){if(_g)return _g;var t,e=TC,n=e.length,r,i="value"in ks?ks.value:ks.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return _g=i.slice(t,1<r?1-r:void 0)}function Sg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yv(){return!0}function yk(){return!1}function vi(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yv:yk,this.isPropagationStopped=yk,this}return Gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yv)},persist:function(){},isPersistent:yv}),e}var sh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PC=vi(sh),Sm=Gt({},sh,{view:0,detail:0}),Hq=vi(Sm),xx,_x,Kh,ib=Gt({},Sm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:OC,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kh&&(Kh&&t.type==="mousemove"?(xx=t.screenX-Kh.screenX,_x=t.screenY-Kh.screenY):_x=xx=0,Kh=t),xx)},movementY:function(t){return"movementY"in t?t.movementY:_x}}),bk=vi(ib),qq=Gt({},ib,{dataTransfer:0}),Gq=vi(qq),Kq=Gt({},Sm,{relatedTarget:0}),Sx=vi(Kq),Xq=Gt({},sh,{animationName:0,elapsedTime:0,pseudoElement:0}),Yq=vi(Xq),Jq=Gt({},sh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qq=vi(Jq),Zq=Gt({},sh,{data:0}),wk=vi(Zq),eG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rG(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nG[t])?!!e[t]:!1}function OC(){return rG}var iG=Gt({},Sm,{key:function(t){if(t.key){var e=eG[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:OC,charCode:function(t){return t.type==="keypress"?Sg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oG=vi(iG),aG=Gt({},ib,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xk=vi(aG),sG=Gt({},Sm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:OC}),uG=vi(sG),lG=Gt({},sh,{propertyName:0,elapsedTime:0,pseudoElement:0}),cG=vi(lG),fG=Gt({},ib,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hG=vi(fG),dG=[9,13,27,32],kC=Ra&&"CompositionEvent"in window,Ad=null;Ra&&"documentMode"in document&&(Ad=document.documentMode);var pG=Ra&&"TextEvent"in window&&!Ad,aF=Ra&&(!kC||Ad&&8<Ad&&11>=Ad),_k=" ",Sk=!1;function sF(t,e){switch(t){case"keyup":return dG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uF(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bc=!1;function mG(t,e){switch(t){case"compositionend":return uF(e);case"keypress":return e.which!==32?null:(Sk=!0,_k);case"textInput":return t=e.data,t===_k&&Sk?null:t;default:return null}}function vG(t,e){if(bc)return t==="compositionend"||!kC&&sF(t,e)?(t=oF(),_g=TC=ks=null,bc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aF&&e.locale!=="ko"?null:e.data;default:return null}}var gG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ek(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gG[t.type]:e==="textarea"}function lF(t,e,n,r){B4(r),e=Xg(e,"onChange"),0<e.length&&(n=new PC("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Td=null,ip=null;function yG(t){wF(t,0)}function ob(t){var e=_c(t);if(N4(e))return t}function bG(t,e){if(t==="change")return e}var cF=!1;if(Ra){var Ex;if(Ra){var Cx="oninput"in document;if(!Cx){var Ck=document.createElement("div");Ck.setAttribute("oninput","return;"),Cx=typeof Ck.oninput=="function"}Ex=Cx}else Ex=!1;cF=Ex&&(!document.documentMode||9<document.documentMode)}function Ak(){Td&&(Td.detachEvent("onpropertychange",fF),ip=Td=null)}function fF(t){if(t.propertyName==="value"&&ob(ip)){var e=[];lF(e,ip,t,_C(t)),z4(yG,e)}}function wG(t,e,n){t==="focusin"?(Ak(),Td=e,ip=n,Td.attachEvent("onpropertychange",fF)):t==="focusout"&&Ak()}function xG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ob(ip)}function _G(t,e){if(t==="click")return ob(e)}function SG(t,e){if(t==="input"||t==="change")return ob(e)}function EG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mo=typeof Object.is=="function"?Object.is:EG;function op(t,e){if(mo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!E_.call(e,i)||!mo(t[i],e[i]))return!1}return!0}function Tk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pk(t,e){var n=Tk(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tk(n)}}function hF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dF(){for(var t=window,e=Vg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Vg(t.document)}return e}function IC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CG(t){var e=dF(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hF(n.ownerDocument.documentElement,n)){if(r!==null&&IC(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Pk(n,o);var a=Pk(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AG=Ra&&"documentMode"in document&&11>=document.documentMode,wc=null,W_=null,Pd=null,z_=!1;function Ok(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;z_||wc==null||wc!==Vg(r)||(r=wc,"selectionStart"in r&&IC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pd&&op(Pd,r)||(Pd=r,r=Xg(W_,"onSelect"),0<r.length&&(e=new PC("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wc)))}function bv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xc={animationend:bv("Animation","AnimationEnd"),animationiteration:bv("Animation","AnimationIteration"),animationstart:bv("Animation","AnimationStart"),transitionend:bv("Transition","TransitionEnd")},Ax={},pF={};Ra&&(pF=document.createElement("div").style,"AnimationEvent"in window||(delete xc.animationend.animation,delete xc.animationiteration.animation,delete xc.animationstart.animation),"TransitionEvent"in window||delete xc.transitionend.transition);function ab(t){if(Ax[t])return Ax[t];if(!xc[t])return t;var e=xc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pF)return Ax[t]=e[n];return t}var mF=ab("animationend"),vF=ab("animationiteration"),gF=ab("animationstart"),yF=ab("transitionend"),bF=new Map,kk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lu(t,e){bF.set(t,e),Ml(e,[t])}for(var Tx=0;Tx<kk.length;Tx++){var Px=kk[Tx],TG=Px.toLowerCase(),PG=Px[0].toUpperCase()+Px.slice(1);lu(TG,"on"+PG)}lu(mF,"onAnimationEnd");lu(vF,"onAnimationIteration");lu(gF,"onAnimationStart");lu("dblclick","onDoubleClick");lu("focusin","onFocus");lu("focusout","onBlur");lu(yF,"onTransitionEnd");xf("onMouseEnter",["mouseout","mouseover"]);xf("onMouseLeave",["mouseout","mouseover"]);xf("onPointerEnter",["pointerout","pointerover"]);xf("onPointerLeave",["pointerout","pointerover"]);Ml("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ml("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ml("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ml("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ml("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ml("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OG=new Set("cancel close invalid load scroll toggle".split(" ").concat(bd));function Ik(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Tq(r,e,void 0,t),t.currentTarget=null}function wF(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Ik(i,s,l),o=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Ik(i,s,l),o=u}}}if(zg)throw t=F_,zg=!1,F_=null,t}function It(t,e){var n=e[X_];n===void 0&&(n=e[X_]=new Set);var r=t+"__bubble";n.has(r)||(xF(e,t,2,!1),n.add(r))}function Ox(t,e,n){var r=0;e&&(r|=4),xF(n,t,r,e)}var wv="_reactListening"+Math.random().toString(36).slice(2);function ap(t){if(!t[wv]){t[wv]=!0,P4.forEach(function(n){n!=="selectionchange"&&(OG.has(n)||Ox(n,!1,t),Ox(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wv]||(e[wv]=!0,Ox("selectionchange",!1,e))}}function xF(t,e,n,r){switch(iF(e)){case 1:var i=Wq;break;case 4:i=zq;break;default:i=AC}n=i.bind(null,e,n,t),i=void 0,!L_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function kx(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Ku(s),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}s=s.parentNode}}r=r.return}z4(function(){var l=o,c=_C(n),f=[];e:{var h=bF.get(t);if(h!==void 0){var d=PC,p=t;switch(t){case"keypress":if(Sg(n)===0)break e;case"keydown":case"keyup":d=oG;break;case"focusin":p="focus",d=Sx;break;case"focusout":p="blur",d=Sx;break;case"beforeblur":case"afterblur":d=Sx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=bk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Gq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=uG;break;case mF:case vF:case gF:d=Yq;break;case yF:d=cG;break;case"scroll":d=Hq;break;case"wheel":d=hG;break;case"copy":case"cut":case"paste":d=Qq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=xk}var m=(e&4)!==0,v=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var y=l,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,g!==null&&(_=ep(y,g),_!=null&&m.push(sp(y,_,b)))),v)break;y=y.return}0<m.length&&(h=new d(h,p,null,n,c),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==$_&&(p=n.relatedTarget||n.fromElement)&&(Ku(p)||p[Na]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=l,p=p?Ku(p):null,p!==null&&(v=$l(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=l),d!==p)){if(m=bk,_="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=xk,_="onPointerLeave",g="onPointerEnter",y="pointer"),v=d==null?h:_c(d),b=p==null?h:_c(p),h=new m(_,y+"leave",d,n,c),h.target=v,h.relatedTarget=b,_=null,Ku(c)===l&&(m=new m(g,y+"enter",p,n,c),m.target=b,m.relatedTarget=v,_=m),v=_,d&&p)t:{for(m=d,g=p,y=0,b=m;b;b=Yl(b))y++;for(b=0,_=g;_;_=Yl(_))b++;for(;0<y-b;)m=Yl(m),y--;for(;0<b-y;)g=Yl(g),b--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=Yl(m),g=Yl(g)}m=null}else m=null;d!==null&&Rk(f,h,d,m,!1),p!==null&&v!==null&&Rk(f,v,p,m,!0)}}e:{if(h=l?_c(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var x=bG;else if(Ek(h))if(cF)x=SG;else{x=xG;var S=wG}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=_G);if(x&&(x=x(t,l))){lF(f,x,n,c);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&I_(h,"number",h.value)}switch(S=l?_c(l):window,t){case"focusin":(Ek(S)||S.contentEditable==="true")&&(wc=S,W_=l,Pd=null);break;case"focusout":Pd=W_=wc=null;break;case"mousedown":z_=!0;break;case"contextmenu":case"mouseup":case"dragend":z_=!1,Ok(f,n,c);break;case"selectionchange":if(AG)break;case"keydown":case"keyup":Ok(f,n,c)}var E;if(kC)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else bc?sF(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(aF&&n.locale!=="ko"&&(bc||C!=="onCompositionStart"?C==="onCompositionEnd"&&bc&&(E=oF()):(ks=c,TC="value"in ks?ks.value:ks.textContent,bc=!0)),S=Xg(l,C),0<S.length&&(C=new wk(C,t,null,n,c),f.push({event:C,listeners:S}),E?C.data=E:(E=uF(n),E!==null&&(C.data=E)))),(E=pG?mG(t,n):vG(t,n))&&(l=Xg(l,"onBeforeInput"),0<l.length&&(c=new wk("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=E))}wF(f,e)})}function sp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ep(t,n),o!=null&&r.unshift(sp(t,o,i)),o=ep(t,e),o!=null&&r.push(sp(t,o,i))),t=t.return}return r}function Yl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rk(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=ep(n,o),u!=null&&a.unshift(sp(n,u,s))):i||(u=ep(n,o),u!=null&&a.push(sp(n,u,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var kG=/\r\n?/g,IG=/\u0000|\uFFFD/g;function Nk(t){return(typeof t=="string"?t:""+t).replace(kG,`
`).replace(IG,"")}function xv(t,e,n){if(e=Nk(e),Nk(t)!==e&&n)throw Error(ue(425))}function Yg(){}var H_=null,q_=null;function G_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var K_=typeof setTimeout=="function"?setTimeout:void 0,RG=typeof clearTimeout=="function"?clearTimeout:void 0,Dk=typeof Promise=="function"?Promise:void 0,NG=typeof queueMicrotask=="function"?queueMicrotask:typeof Dk<"u"?function(t){return Dk.resolve(null).then(t).catch(DG)}:K_;function DG(t){setTimeout(function(){throw t})}function Ix(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),rp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);rp(e)}function Bs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var uh=Math.random().toString(36).slice(2),Lo="__reactFiber$"+uh,up="__reactProps$"+uh,Na="__reactContainer$"+uh,X_="__reactEvents$"+uh,MG="__reactListeners$"+uh,$G="__reactHandles$"+uh;function Ku(t){var e=t[Lo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Na]||n[Lo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mk(t);t!==null;){if(n=t[Lo])return n;t=Mk(t)}return e}t=n,n=t.parentNode}return null}function Em(t){return t=t[Lo]||t[Na],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _c(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function sb(t){return t[up]||null}var Y_=[],Sc=-1;function cu(t){return{current:t}}function Mt(t){0>Sc||(t.current=Y_[Sc],Y_[Sc]=null,Sc--)}function At(t,e){Sc++,Y_[Sc]=t.current,t.current=e}var Qs={},pr=cu(Qs),$r=cu(!1),xl=Qs;function _f(t,e){var n=t.type.contextTypes;if(!n)return Qs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jr(t){return t=t.childContextTypes,t!=null}function Jg(){Mt($r),Mt(pr)}function $k(t,e,n){if(pr.current!==Qs)throw Error(ue(168));At(pr,e),At($r,n)}function _F(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ue(108,wq(t)||"Unknown",i));return Gt({},n,r)}function Qg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qs,xl=pr.current,At(pr,t),At($r,$r.current),!0}function jk(t,e,n){var r=t.stateNode;if(!r)throw Error(ue(169));n?(t=_F(t,e,xl),r.__reactInternalMemoizedMergedChildContext=t,Mt($r),Mt(pr),At(pr,t)):Mt($r),At($r,n)}var ba=null,ub=!1,Rx=!1;function SF(t){ba===null?ba=[t]:ba.push(t)}function jG(t){ub=!0,SF(t)}function fu(){if(!Rx&&ba!==null){Rx=!0;var t=0,e=dt;try{var n=ba;for(dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ba=null,ub=!1}catch(i){throw ba!==null&&(ba=ba.slice(t+1)),K4(SC,fu),i}finally{dt=e,Rx=!1}}return null}var Ec=[],Cc=0,Zg=null,ey=0,Ei=[],Ci=0,_l=null,Sa=1,Ea="";function Du(t,e){Ec[Cc++]=ey,Ec[Cc++]=Zg,Zg=t,ey=e}function EF(t,e,n){Ei[Ci++]=Sa,Ei[Ci++]=Ea,Ei[Ci++]=_l,_l=t;var r=Sa;t=Ea;var i=32-fo(r)-1;r&=~(1<<i),n+=1;var o=32-fo(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Sa=1<<32-fo(e)+i|n<<i|r,Ea=o+t}else Sa=1<<o|n<<i|r,Ea=t}function RC(t){t.return!==null&&(Du(t,1),EF(t,1,0))}function NC(t){for(;t===Zg;)Zg=Ec[--Cc],Ec[Cc]=null,ey=Ec[--Cc],Ec[Cc]=null;for(;t===_l;)_l=Ei[--Ci],Ei[Ci]=null,Ea=Ei[--Ci],Ei[Ci]=null,Sa=Ei[--Ci],Ei[Ci]=null}var ci=null,ai=null,Lt=!1,oo=null;function CF(t,e){var n=Oi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ci=t,ai=Bs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ci=t,ai=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_l!==null?{id:Sa,overflow:Ea}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Oi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ci=t,ai=null,!0):!1;default:return!1}}function J_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Q_(t){if(Lt){var e=ai;if(e){var n=e;if(!Lk(t,e)){if(J_(t))throw Error(ue(418));e=Bs(n.nextSibling);var r=ci;e&&Lk(t,e)?CF(r,n):(t.flags=t.flags&-4097|2,Lt=!1,ci=t)}}else{if(J_(t))throw Error(ue(418));t.flags=t.flags&-4097|2,Lt=!1,ci=t}}}function Fk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ci=t}function _v(t){if(t!==ci)return!1;if(!Lt)return Fk(t),Lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!G_(t.type,t.memoizedProps)),e&&(e=ai)){if(J_(t))throw AF(),Error(ue(418));for(;e;)CF(t,e),e=Bs(e.nextSibling)}if(Fk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ai=Bs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ai=null}}else ai=ci?Bs(t.stateNode.nextSibling):null;return!0}function AF(){for(var t=ai;t;)t=Bs(t.nextSibling)}function Sf(){ai=ci=null,Lt=!1}function DC(t){oo===null?oo=[t]:oo.push(t)}var LG=za.ReactCurrentBatchConfig;function Xh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ue(309));var r=n.stateNode}if(!r)throw Error(ue(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ue(284));if(!n._owner)throw Error(ue(290,t))}return t}function Sv(t,e){throw t=Object.prototype.toString.call(e),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bk(t){var e=t._init;return e(t._payload)}function TF(t){function e(g,y){if(t){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=zs(g,y),g.index=0,g.sibling=null,g}function o(g,y,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,y,b,_){return y===null||y.tag!==6?(y=Fx(b,g.mode,_),y.return=g,y):(y=i(y,b),y.return=g,y)}function u(g,y,b,_){var x=b.type;return x===yc?c(g,y,b.props.children,_,b.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===gs&&Bk(x)===y.type)?(_=i(y,b.props),_.ref=Xh(g,y,b),_.return=g,_):(_=kg(b.type,b.key,b.props,null,g.mode,_),_.ref=Xh(g,y,b),_.return=g,_)}function l(g,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Bx(b,g.mode,_),y.return=g,y):(y=i(y,b.children||[]),y.return=g,y)}function c(g,y,b,_,x){return y===null||y.tag!==7?(y=pl(b,g.mode,_,x),y.return=g,y):(y=i(y,b),y.return=g,y)}function f(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Fx(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hv:return b=kg(y.type,y.key,y.props,null,g.mode,b),b.ref=Xh(g,null,y),b.return=g,b;case gc:return y=Bx(y,g.mode,b),y.return=g,y;case gs:var _=y._init;return f(g,_(y._payload),b)}if(gd(y)||zh(y))return y=pl(y,g.mode,b,null),y.return=g,y;Sv(g,y)}return null}function h(g,y,b,_){var x=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:s(g,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case hv:return b.key===x?u(g,y,b,_):null;case gc:return b.key===x?l(g,y,b,_):null;case gs:return x=b._init,h(g,y,x(b._payload),_)}if(gd(b)||zh(b))return x!==null?null:c(g,y,b,_,null);Sv(g,b)}return null}function d(g,y,b,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(b)||null,s(y,g,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hv:return g=g.get(_.key===null?b:_.key)||null,u(y,g,_,x);case gc:return g=g.get(_.key===null?b:_.key)||null,l(y,g,_,x);case gs:var S=_._init;return d(g,y,b,S(_._payload),x)}if(gd(_)||zh(_))return g=g.get(b)||null,c(y,g,_,x,null);Sv(y,_)}return null}function p(g,y,b,_){for(var x=null,S=null,E=y,C=y=0,A=null;E!==null&&C<b.length;C++){E.index>C?(A=E,E=null):A=E.sibling;var T=h(g,E,b[C],_);if(T===null){E===null&&(E=A);break}t&&E&&T.alternate===null&&e(g,E),y=o(T,y,C),S===null?x=T:S.sibling=T,S=T,E=A}if(C===b.length)return n(g,E),Lt&&Du(g,C),x;if(E===null){for(;C<b.length;C++)E=f(g,b[C],_),E!==null&&(y=o(E,y,C),S===null?x=E:S.sibling=E,S=E);return Lt&&Du(g,C),x}for(E=r(g,E);C<b.length;C++)A=d(E,g,C,b[C],_),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?C:A.key),y=o(A,y,C),S===null?x=A:S.sibling=A,S=A);return t&&E.forEach(function(P){return e(g,P)}),Lt&&Du(g,C),x}function m(g,y,b,_){var x=zh(b);if(typeof x!="function")throw Error(ue(150));if(b=x.call(b),b==null)throw Error(ue(151));for(var S=x=null,E=y,C=y=0,A=null,T=b.next();E!==null&&!T.done;C++,T=b.next()){E.index>C?(A=E,E=null):A=E.sibling;var P=h(g,E,T.value,_);if(P===null){E===null&&(E=A);break}t&&E&&P.alternate===null&&e(g,E),y=o(P,y,C),S===null?x=P:S.sibling=P,S=P,E=A}if(T.done)return n(g,E),Lt&&Du(g,C),x;if(E===null){for(;!T.done;C++,T=b.next())T=f(g,T.value,_),T!==null&&(y=o(T,y,C),S===null?x=T:S.sibling=T,S=T);return Lt&&Du(g,C),x}for(E=r(g,E);!T.done;C++,T=b.next())T=d(E,g,C,T.value,_),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?C:T.key),y=o(T,y,C),S===null?x=T:S.sibling=T,S=T);return t&&E.forEach(function(k){return e(g,k)}),Lt&&Du(g,C),x}function v(g,y,b,_){if(typeof b=="object"&&b!==null&&b.type===yc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case hv:e:{for(var x=b.key,S=y;S!==null;){if(S.key===x){if(x=b.type,x===yc){if(S.tag===7){n(g,S.sibling),y=i(S,b.props.children),y.return=g,g=y;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===gs&&Bk(x)===S.type){n(g,S.sibling),y=i(S,b.props),y.ref=Xh(g,S,b),y.return=g,g=y;break e}n(g,S);break}else e(g,S);S=S.sibling}b.type===yc?(y=pl(b.props.children,g.mode,_,b.key),y.return=g,g=y):(_=kg(b.type,b.key,b.props,null,g.mode,_),_.ref=Xh(g,y,b),_.return=g,g=_)}return a(g);case gc:e:{for(S=b.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(g,y.sibling),y=i(y,b.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=Bx(b,g.mode,_),y.return=g,g=y}return a(g);case gs:return S=b._init,v(g,y,S(b._payload),_)}if(gd(b))return p(g,y,b,_);if(zh(b))return m(g,y,b,_);Sv(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,b),y.return=g,g=y):(n(g,y),y=Fx(b,g.mode,_),y.return=g,g=y),a(g)):n(g,y)}return v}var Ef=TF(!0),PF=TF(!1),ty=cu(null),ny=null,Ac=null,MC=null;function $C(){MC=Ac=ny=null}function jC(t){var e=ty.current;Mt(ty),t._currentValue=e}function Z_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wc(t,e){ny=t,MC=Ac=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nr=!0),t.firstContext=null)}function $i(t){var e=t._currentValue;if(MC!==t)if(t={context:t,memoizedValue:e,next:null},Ac===null){if(ny===null)throw Error(ue(308));Ac=t,ny.dependencies={lanes:0,firstContext:t}}else Ac=Ac.next=t;return e}var Xu=null;function LC(t){Xu===null?Xu=[t]:Xu.push(t)}function OF(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,LC(e)):(n.next=i.next,i.next=n),e.interleaved=n,Da(t,r)}function Da(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ys=!1;function FC(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Us(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,nt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Da(t,n)}return i=r.interleaved,i===null?(e.next=e,LC(r)):(e.next=i.next,i.next=e),r.interleaved=e,Da(t,n)}function Eg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,EC(t,n)}}function Uk(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ry(t,e,n,r){var i=t.updateQueue;ys=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;a=0,c=l=u=null,s=o;do{var h=s.lane,d=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,m=s;switch(h=e,d=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=Gt({},f,h);break e;case 2:ys=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);El|=a,t.lanes=a,t.memoizedState=f}}function Vk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ue(191,i));i.call(r)}}}var Cm={},qo=cu(Cm),lp=cu(Cm),cp=cu(Cm);function Yu(t){if(t===Cm)throw Error(ue(174));return t}function BC(t,e){switch(At(cp,e),At(lp,t),At(qo,Cm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:N_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=N_(e,t)}Mt(qo),At(qo,e)}function Cf(){Mt(qo),Mt(lp),Mt(cp)}function IF(t){Yu(cp.current);var e=Yu(qo.current),n=N_(e,t.type);e!==n&&(At(lp,t),At(qo,n))}function UC(t){lp.current===t&&(Mt(qo),Mt(lp))}var Vt=cu(0);function iy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nx=[];function VC(){for(var t=0;t<Nx.length;t++)Nx[t]._workInProgressVersionPrimary=null;Nx.length=0}var Cg=za.ReactCurrentDispatcher,Dx=za.ReactCurrentBatchConfig,Sl=0,qt=null,xn=null,Mn=null,oy=!1,Od=!1,fp=0,FG=0;function tr(){throw Error(ue(321))}function WC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mo(t[n],e[n]))return!1;return!0}function zC(t,e,n,r,i,o){if(Sl=o,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cg.current=t===null||t.memoizedState===null?WG:zG,t=n(r,i),Od){o=0;do{if(Od=!1,fp=0,25<=o)throw Error(ue(301));o+=1,Mn=xn=null,e.updateQueue=null,Cg.current=HG,t=n(r,i)}while(Od)}if(Cg.current=ay,e=xn!==null&&xn.next!==null,Sl=0,Mn=xn=qt=null,oy=!1,e)throw Error(ue(300));return t}function HC(){var t=fp!==0;return fp=0,t}function Oo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?qt.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function ji(){if(xn===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=xn.next;var e=Mn===null?qt.memoizedState:Mn.next;if(e!==null)Mn=e,xn=t;else{if(t===null)throw Error(ue(310));xn=t,t={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Mn===null?qt.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function hp(t,e){return typeof e=="function"?e(t):e}function Mx(t){var e=ji(),n=e.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=t;var r=xn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,u=null,l=o;do{var c=l.lane;if((Sl&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,a=r):u=u.next=f,qt.lanes|=c,El|=c}l=l.next}while(l!==null&&l!==o);u===null?a=r:u.next=s,mo(r,e.memoizedState)||(Nr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,qt.lanes|=o,El|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $x(t){var e=ji(),n=e.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);mo(o,e.memoizedState)||(Nr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function RF(){}function NF(t,e){var n=qt,r=ji(),i=e(),o=!mo(r.memoizedState,i);if(o&&(r.memoizedState=i,Nr=!0),r=r.queue,qC($F.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Mn!==null&&Mn.memoizedState.tag&1){if(n.flags|=2048,dp(9,MF.bind(null,n,r,i,e),void 0,null),Ln===null)throw Error(ue(349));Sl&30||DF(n,e,i)}return i}function DF(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function MF(t,e,n,r){e.value=n,e.getSnapshot=r,jF(e)&&LF(t)}function $F(t,e,n){return n(function(){jF(e)&&LF(t)})}function jF(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mo(t,n)}catch{return!0}}function LF(t){var e=Da(t,1);e!==null&&ho(e,t,1,-1)}function Wk(t){var e=Oo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:t},e.queue=t,t=t.dispatch=VG.bind(null,qt,t),[e.memoizedState,t]}function dp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function FF(){return ji().memoizedState}function Ag(t,e,n,r){var i=Oo();qt.flags|=t,i.memoizedState=dp(1|e,n,void 0,r===void 0?null:r)}function lb(t,e,n,r){var i=ji();r=r===void 0?null:r;var o=void 0;if(xn!==null){var a=xn.memoizedState;if(o=a.destroy,r!==null&&WC(r,a.deps)){i.memoizedState=dp(e,n,o,r);return}}qt.flags|=t,i.memoizedState=dp(1|e,n,o,r)}function zk(t,e){return Ag(8390656,8,t,e)}function qC(t,e){return lb(2048,8,t,e)}function BF(t,e){return lb(4,2,t,e)}function UF(t,e){return lb(4,4,t,e)}function VF(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WF(t,e,n){return n=n!=null?n.concat([t]):null,lb(4,4,VF.bind(null,e,t),n)}function GC(){}function zF(t,e){var n=ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&WC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HF(t,e){var n=ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&WC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qF(t,e,n){return Sl&21?(mo(n,e)||(n=J4(),qt.lanes|=n,El|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nr=!0),t.memoizedState=n)}function BG(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var r=Dx.transition;Dx.transition={};try{t(!1),e()}finally{dt=n,Dx.transition=r}}function GF(){return ji().memoizedState}function UG(t,e,n){var r=Ws(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KF(t))XF(e,n);else if(n=OF(t,e,n,r),n!==null){var i=Er();ho(n,t,r,i),YF(n,e,r)}}function VG(t,e,n){var r=Ws(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KF(t))XF(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,mo(s,a)){var u=e.interleaved;u===null?(i.next=i,LC(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=OF(t,e,i,r),n!==null&&(i=Er(),ho(n,t,r,i),YF(n,e,r))}}function KF(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function XF(t,e){Od=oy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YF(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,EC(t,n)}}var ay={readContext:$i,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},WG={readContext:$i,useCallback:function(t,e){return Oo().memoizedState=[t,e===void 0?null:e],t},useContext:$i,useEffect:zk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ag(4194308,4,VF.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ag(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ag(4,2,t,e)},useMemo:function(t,e){var n=Oo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Oo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=UG.bind(null,qt,t),[r.memoizedState,t]},useRef:function(t){var e=Oo();return t={current:t},e.memoizedState=t},useState:Wk,useDebugValue:GC,useDeferredValue:function(t){return Oo().memoizedState=t},useTransition:function(){var t=Wk(!1),e=t[0];return t=BG.bind(null,t[1]),Oo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qt,i=Oo();if(Lt){if(n===void 0)throw Error(ue(407));n=n()}else{if(n=e(),Ln===null)throw Error(ue(349));Sl&30||DF(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,zk($F.bind(null,r,o,t),[t]),r.flags|=2048,dp(9,MF.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Oo(),e=Ln.identifierPrefix;if(Lt){var n=Ea,r=Sa;n=(r&~(1<<32-fo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FG++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zG={readContext:$i,useCallback:zF,useContext:$i,useEffect:qC,useImperativeHandle:WF,useInsertionEffect:BF,useLayoutEffect:UF,useMemo:HF,useReducer:Mx,useRef:FF,useState:function(){return Mx(hp)},useDebugValue:GC,useDeferredValue:function(t){var e=ji();return qF(e,xn.memoizedState,t)},useTransition:function(){var t=Mx(hp)[0],e=ji().memoizedState;return[t,e]},useMutableSource:RF,useSyncExternalStore:NF,useId:GF,unstable_isNewReconciler:!1},HG={readContext:$i,useCallback:zF,useContext:$i,useEffect:qC,useImperativeHandle:WF,useInsertionEffect:BF,useLayoutEffect:UF,useMemo:HF,useReducer:$x,useRef:FF,useState:function(){return $x(hp)},useDebugValue:GC,useDeferredValue:function(t){var e=ji();return xn===null?e.memoizedState=t:qF(e,xn.memoizedState,t)},useTransition:function(){var t=$x(hp)[0],e=ji().memoizedState;return[t,e]},useMutableSource:RF,useSyncExternalStore:NF,useId:GF,unstable_isNewReconciler:!1};function Ji(t,e){if(t&&t.defaultProps){e=Gt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function eS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Gt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cb={isMounted:function(t){return(t=t._reactInternals)?$l(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Er(),i=Ws(t),o=Ta(r,i);o.payload=e,n!=null&&(o.callback=n),e=Us(t,o,i),e!==null&&(ho(e,t,i,r),Eg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Er(),i=Ws(t),o=Ta(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Us(t,o,i),e!==null&&(ho(e,t,i,r),Eg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Er(),r=Ws(t),i=Ta(n,r);i.tag=2,e!=null&&(i.callback=e),e=Us(t,i,r),e!==null&&(ho(e,t,r,n),Eg(e,t,r))}};function Hk(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!op(n,r)||!op(i,o):!0}function JF(t,e,n){var r=!1,i=Qs,o=e.contextType;return typeof o=="object"&&o!==null?o=$i(o):(i=jr(e)?xl:pr.current,r=e.contextTypes,o=(r=r!=null)?_f(t,i):Qs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cb,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function qk(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cb.enqueueReplaceState(e,e.state,null)}function tS(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},FC(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=$i(o):(o=jr(e)?xl:pr.current,i.context=_f(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(eS(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cb.enqueueReplaceState(i,i.state,null),ry(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Af(t,e){try{var n="",r=e;do n+=bq(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function jx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function nS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qG=typeof WeakMap=="function"?WeakMap:Map;function QF(t,e,n){n=Ta(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){uy||(uy=!0,hS=r),nS(t,e)},n}function ZF(t,e,n){n=Ta(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){nS(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){nS(t,e),typeof r!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Gk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qG;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aK.bind(null,t,e,n),e.then(t,t))}function Kk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Xk(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ta(-1,1),e.tag=2,Us(n,e,1))),n.lanes|=1),t)}var GG=za.ReactCurrentOwner,Nr=!1;function gr(t,e,n,r){e.child=t===null?PF(e,null,n,r):Ef(e,t.child,n,r)}function Yk(t,e,n,r,i){n=n.render;var o=e.ref;return Wc(e,i),r=zC(t,e,n,r,o,i),n=HC(),t!==null&&!Nr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ma(t,e,i)):(Lt&&n&&RC(e),e.flags|=1,gr(t,e,r,i),e.child)}function Jk(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!tA(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,e3(t,e,o,r,i)):(t=kg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:op,n(a,r)&&t.ref===e.ref)return Ma(t,e,i)}return e.flags|=1,t=zs(o,r),t.ref=e.ref,t.return=e,e.child=t}function e3(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(op(o,r)&&t.ref===e.ref)if(Nr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Nr=!0);else return e.lanes=t.lanes,Ma(t,e,i)}return rS(t,e,n,r,i)}function t3(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Pc,Qr),Qr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(Pc,Qr),Qr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,At(Pc,Qr),Qr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,At(Pc,Qr),Qr|=r;return gr(t,e,i,n),e.child}function n3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function rS(t,e,n,r,i){var o=jr(n)?xl:pr.current;return o=_f(e,o),Wc(e,i),n=zC(t,e,n,r,o,i),r=HC(),t!==null&&!Nr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ma(t,e,i)):(Lt&&r&&RC(e),e.flags|=1,gr(t,e,n,i),e.child)}function Qk(t,e,n,r,i){if(jr(n)){var o=!0;Qg(e)}else o=!1;if(Wc(e,i),e.stateNode===null)Tg(t,e),JF(e,n,r),tS(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=$i(l):(l=jr(n)?xl:pr.current,l=_f(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&qk(e,a,r,l),ys=!1;var h=e.memoizedState;a.state=h,ry(e,r,a,i),u=e.memoizedState,s!==r||h!==u||$r.current||ys?(typeof c=="function"&&(eS(e,n,c,r),u=e.memoizedState),(s=ys||Hk(e,n,s,r,h,u,l))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,kF(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Ji(e.type,s),a.props=l,f=e.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=$i(u):(u=jr(n)?xl:pr.current,u=_f(e,u));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==u)&&qk(e,a,r,u),ys=!1,h=e.memoizedState,a.state=h,ry(e,r,a,i);var p=e.memoizedState;s!==f||h!==p||$r.current||ys?(typeof d=="function"&&(eS(e,n,d,r),p=e.memoizedState),(l=ys||Hk(e,n,l,r,h,p,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return iS(t,e,n,r,o,i)}function iS(t,e,n,r,i,o){n3(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&jk(e,n,!1),Ma(t,e,o);r=e.stateNode,GG.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ef(e,t.child,null,o),e.child=Ef(e,null,s,o)):gr(t,e,s,o),e.memoizedState=r.state,i&&jk(e,n,!0),e.child}function r3(t){var e=t.stateNode;e.pendingContext?$k(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$k(t,e.context,!1),BC(t,e.containerInfo)}function Zk(t,e,n,r,i){return Sf(),DC(i),e.flags|=256,gr(t,e,n,r),e.child}var oS={dehydrated:null,treeContext:null,retryLane:0};function aS(t){return{baseLanes:t,cachePool:null,transitions:null}}function i3(t,e,n){var r=e.pendingProps,i=Vt.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),At(Vt,i&1),t===null)return Q_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=db(a,r,0,null),t=pl(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=aS(n),e.memoizedState=oS,t):KC(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return KG(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=zs(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=zs(s,o):(o=pl(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?aS(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=oS,r}return o=t.child,t=o.sibling,r=zs(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function KC(t,e){return e=db({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ev(t,e,n,r){return r!==null&&DC(r),Ef(e,t.child,null,n),t=KC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KG(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=jx(Error(ue(422))),Ev(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=db({mode:"visible",children:r.children},i,0,null),o=pl(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ef(e,t.child,null,a),e.child.memoizedState=aS(a),e.memoizedState=oS,o);if(!(e.mode&1))return Ev(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(ue(419)),r=jx(o,r,void 0),Ev(t,e,a,r)}if(s=(a&t.childLanes)!==0,Nr||s){if(r=Ln,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Da(t,i),ho(r,t,i,-1))}return eA(),r=jx(Error(ue(421))),Ev(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sK.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ai=Bs(i.nextSibling),ci=e,Lt=!0,oo=null,t!==null&&(Ei[Ci++]=Sa,Ei[Ci++]=Ea,Ei[Ci++]=_l,Sa=t.id,Ea=t.overflow,_l=e),e=KC(e,r.children),e.flags|=4096,e)}function eI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Z_(t.return,e,n)}function Lx(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function o3(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(gr(t,e,r.children,n),r=Vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eI(t,n,e);else if(t.tag===19)eI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(At(Vt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&iy(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Lx(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&iy(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Lx(e,!0,n,null,o);break;case"together":Lx(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ma(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),El|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ue(153));if(e.child!==null){for(t=e.child,n=zs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function XG(t,e,n){switch(e.tag){case 3:r3(e),Sf();break;case 5:IF(e);break;case 1:jr(e.type)&&Qg(e);break;case 4:BC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;At(ty,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(At(Vt,Vt.current&1),e.flags|=128,null):n&e.child.childLanes?i3(t,e,n):(At(Vt,Vt.current&1),t=Ma(t,e,n),t!==null?t.sibling:null);At(Vt,Vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return o3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),At(Vt,Vt.current),r)break;return null;case 22:case 23:return e.lanes=0,t3(t,e,n)}return Ma(t,e,n)}var a3,sS,s3,u3;a3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sS=function(){};s3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yu(qo.current);var o=null;switch(n){case"input":i=O_(t,i),r=O_(t,r),o=[];break;case"select":i=Gt({},i,{value:void 0}),r=Gt({},r,{value:void 0}),o=[];break;case"textarea":i=R_(t,i),r=R_(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yg)}D_(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Qd.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Qd.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&It("scroll",t),o||s===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};u3=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yh(t,e){if(!Lt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function YG(t,e,n){var r=e.pendingProps;switch(NC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(e),null;case 1:return jr(e.type)&&Jg(),nr(e),null;case 3:return r=e.stateNode,Cf(),Mt($r),Mt(pr),VC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_v(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oo!==null&&(mS(oo),oo=null))),sS(t,e),nr(e),null;case 5:UC(e);var i=Yu(cp.current);if(n=e.type,t!==null&&e.stateNode!=null)s3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ue(166));return nr(e),null}if(t=Yu(qo.current),_v(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Lo]=e,r[up]=o,t=(e.mode&1)!==0,n){case"dialog":It("cancel",r),It("close",r);break;case"iframe":case"object":case"embed":It("load",r);break;case"video":case"audio":for(i=0;i<bd.length;i++)It(bd[i],r);break;case"source":It("error",r);break;case"img":case"image":case"link":It("error",r),It("load",r);break;case"details":It("toggle",r);break;case"input":lk(r,o),It("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},It("invalid",r);break;case"textarea":fk(r,o),It("invalid",r)}D_(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&xv(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&xv(r.textContent,s,t),i=["children",""+s]):Qd.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&It("scroll",r)}switch(n){case"input":dv(r),ck(r,o,!0);break;case"textarea":dv(r),hk(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Yg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Lo]=e,t[up]=r,a3(t,e,!1,!1),e.stateNode=t;e:{switch(a=M_(n,r),n){case"dialog":It("cancel",t),It("close",t),i=r;break;case"iframe":case"object":case"embed":It("load",t),i=r;break;case"video":case"audio":for(i=0;i<bd.length;i++)It(bd[i],t);i=r;break;case"source":It("error",t),i=r;break;case"img":case"image":case"link":It("error",t),It("load",t),i=r;break;case"details":It("toggle",t),i=r;break;case"input":lk(t,r),i=O_(t,r),It("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Gt({},r,{value:void 0}),It("invalid",t);break;case"textarea":fk(t,r),i=R_(t,r),It("invalid",t);break;default:i=r}D_(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?F4(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&j4(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Zd(t,u):typeof u=="number"&&Zd(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Qd.hasOwnProperty(o)?u!=null&&o==="onScroll"&&It("scroll",t):u!=null&&yC(t,o,u,a))}switch(n){case"input":dv(t),ck(t,r,!1);break;case"textarea":dv(t),hk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Js(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Fc(t,!!r.multiple,o,!1):r.defaultValue!=null&&Fc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nr(e),null;case 6:if(t&&e.stateNode!=null)u3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ue(166));if(n=Yu(cp.current),Yu(qo.current),_v(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lo]=e,(o=r.nodeValue!==n)&&(t=ci,t!==null))switch(t.tag){case 3:xv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xv(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lo]=e,e.stateNode=r}return nr(e),null;case 13:if(Mt(Vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&ai!==null&&e.mode&1&&!(e.flags&128))AF(),Sf(),e.flags|=98560,o=!1;else if(o=_v(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ue(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ue(317));o[Lo]=e}else Sf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nr(e),o=!1}else oo!==null&&(mS(oo),oo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?Sn===0&&(Sn=3):eA())),e.updateQueue!==null&&(e.flags|=4),nr(e),null);case 4:return Cf(),sS(t,e),t===null&&ap(e.stateNode.containerInfo),nr(e),null;case 10:return jC(e.type._context),nr(e),null;case 17:return jr(e.type)&&Jg(),nr(e),null;case 19:if(Mt(Vt),o=e.memoizedState,o===null)return nr(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Yh(o,!1);else{if(Sn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=iy(t),a!==null){for(e.flags|=128,Yh(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return At(Vt,Vt.current&1|2),e.child}t=t.sibling}o.tail!==null&&nn()>Tf&&(e.flags|=128,r=!0,Yh(o,!1),e.lanes=4194304)}else{if(!r)if(t=iy(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yh(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Lt)return nr(e),null}else 2*nn()-o.renderingStartTime>Tf&&n!==1073741824&&(e.flags|=128,r=!0,Yh(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nn(),e.sibling=null,n=Vt.current,At(Vt,r?n&1|2:n&1),e):(nr(e),null);case 22:case 23:return ZC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qr&1073741824&&(nr(e),e.subtreeFlags&6&&(e.flags|=8192)):nr(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function JG(t,e){switch(NC(e),e.tag){case 1:return jr(e.type)&&Jg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Cf(),Mt($r),Mt(pr),VC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return UC(e),null;case 13:if(Mt(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));Sf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(Vt),null;case 4:return Cf(),null;case 10:return jC(e.type._context),null;case 22:case 23:return ZC(),null;case 24:return null;default:return null}}var Cv=!1,ar=!1,QG=typeof WeakSet=="function"?WeakSet:Set,be=null;function Tc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qt(t,e,r)}else n.current=null}function uS(t,e,n){try{n()}catch(r){Qt(t,e,r)}}var tI=!1;function ZG(t,e){if(H_=Gg,t=dF(),IC(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,u=-1,l=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++l===i&&(s=a),h===o&&++c===r&&(u=a),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(q_={focusedElem:t,selectionRange:n},Gg=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ji(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(_){Qt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return p=tI,tI=!1,p}function kd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&uS(e,n,o)}i=i.next}while(i!==r)}}function fb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l3(t){var e=t.alternate;e!==null&&(t.alternate=null,l3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lo],delete e[up],delete e[X_],delete e[MG],delete e[$G])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function c3(t){return t.tag===5||t.tag===3||t.tag===4}function nI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yg));else if(r!==4&&(t=t.child,t!==null))for(cS(t,e,n),t=t.sibling;t!==null;)cS(t,e,n),t=t.sibling}function fS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fS(t,e,n),t=t.sibling;t!==null;)fS(t,e,n),t=t.sibling}var Hn=null,no=!1;function cs(t,e,n){for(n=n.child;n!==null;)f3(t,e,n),n=n.sibling}function f3(t,e,n){if(Ho&&typeof Ho.onCommitFiberUnmount=="function")try{Ho.onCommitFiberUnmount(rb,n)}catch{}switch(n.tag){case 5:ar||Tc(n,e);case 6:var r=Hn,i=no;Hn=null,cs(t,e,n),Hn=r,no=i,Hn!==null&&(no?(t=Hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Hn.removeChild(n.stateNode));break;case 18:Hn!==null&&(no?(t=Hn,n=n.stateNode,t.nodeType===8?Ix(t.parentNode,n):t.nodeType===1&&Ix(t,n),rp(t)):Ix(Hn,n.stateNode));break;case 4:r=Hn,i=no,Hn=n.stateNode.containerInfo,no=!0,cs(t,e,n),Hn=r,no=i;break;case 0:case 11:case 14:case 15:if(!ar&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&uS(n,e,a),i=i.next}while(i!==r)}cs(t,e,n);break;case 1:if(!ar&&(Tc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Qt(n,e,s)}cs(t,e,n);break;case 21:cs(t,e,n);break;case 22:n.mode&1?(ar=(r=ar)||n.memoizedState!==null,cs(t,e,n),ar=r):cs(t,e,n);break;default:cs(t,e,n)}}function rI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QG),e.forEach(function(r){var i=uK.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:Hn=s.stateNode,no=!1;break e;case 3:Hn=s.stateNode.containerInfo,no=!0;break e;case 4:Hn=s.stateNode.containerInfo,no=!0;break e}s=s.return}if(Hn===null)throw Error(ue(160));f3(o,a,i),Hn=null,no=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Qt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h3(e,t),e=e.sibling}function h3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hi(e,t),To(t),r&4){try{kd(3,t,t.return),fb(3,t)}catch(m){Qt(t,t.return,m)}try{kd(5,t,t.return)}catch(m){Qt(t,t.return,m)}}break;case 1:Hi(e,t),To(t),r&512&&n!==null&&Tc(n,n.return);break;case 5:if(Hi(e,t),To(t),r&512&&n!==null&&Tc(n,n.return),t.flags&32){var i=t.stateNode;try{Zd(i,"")}catch(m){Qt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&D4(i,o),M_(s,a);var l=M_(s,o);for(a=0;a<u.length;a+=2){var c=u[a],f=u[a+1];c==="style"?F4(i,f):c==="dangerouslySetInnerHTML"?j4(i,f):c==="children"?Zd(i,f):yC(i,c,f,l)}switch(s){case"input":k_(i,o);break;case"textarea":M4(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?Fc(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?Fc(i,!!o.multiple,o.defaultValue,!0):Fc(i,!!o.multiple,o.multiple?[]:"",!1))}i[up]=o}catch(m){Qt(t,t.return,m)}}break;case 6:if(Hi(e,t),To(t),r&4){if(t.stateNode===null)throw Error(ue(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){Qt(t,t.return,m)}}break;case 3:if(Hi(e,t),To(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{rp(e.containerInfo)}catch(m){Qt(t,t.return,m)}break;case 4:Hi(e,t),To(t);break;case 13:Hi(e,t),To(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(JC=nn())),r&4&&rI(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ar=(l=ar)||c,Hi(e,t),ar=l):Hi(e,t),To(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(be=t,c=t.child;c!==null;){for(f=be=c;be!==null;){switch(h=be,d=h.child,h.tag){case 0:case 11:case 14:case 15:kd(4,h,h.return);break;case 1:Tc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Qt(r,n,m)}}break;case 5:Tc(h,h.return);break;case 22:if(h.memoizedState!==null){oI(f);continue}}d!==null?(d.return=h,be=d):oI(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=L4("display",a))}catch(m){Qt(t,t.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Qt(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Hi(e,t),To(t),r&4&&rI(t);break;case 21:break;default:Hi(e,t),To(t)}}function To(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(c3(n)){var r=n;break e}n=n.return}throw Error(ue(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zd(i,""),r.flags&=-33);var o=nI(t);fS(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=nI(t);cS(t,s,a);break;default:throw Error(ue(161))}}catch(u){Qt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function eK(t,e,n){be=t,d3(t)}function d3(t,e,n){for(var r=(t.mode&1)!==0;be!==null;){var i=be,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Cv;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||ar;s=Cv;var l=ar;if(Cv=a,(ar=u)&&!l)for(be=i;be!==null;)a=be,u=a.child,a.tag===22&&a.memoizedState!==null?aI(i):u!==null?(u.return=a,be=u):aI(i);for(;o!==null;)be=o,d3(o),o=o.sibling;be=i,Cv=s,ar=l}iI(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,be=o):iI(t)}}function iI(t){for(;be!==null;){var e=be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ar||fb(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ar)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ji(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Vk(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vk(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&rp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}ar||e.flags&512&&lS(e)}catch(h){Qt(e,e.return,h)}}if(e===t){be=null;break}if(n=e.sibling,n!==null){n.return=e.return,be=n;break}be=e.return}}function oI(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,be=n;break}be=e.return}}function aI(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fb(4,e)}catch(u){Qt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Qt(e,i,u)}}var o=e.return;try{lS(e)}catch(u){Qt(e,o,u)}break;case 5:var a=e.return;try{lS(e)}catch(u){Qt(e,a,u)}}}catch(u){Qt(e,e.return,u)}if(e===t){be=null;break}var s=e.sibling;if(s!==null){s.return=e.return,be=s;break}be=e.return}}var tK=Math.ceil,sy=za.ReactCurrentDispatcher,XC=za.ReactCurrentOwner,Ni=za.ReactCurrentBatchConfig,nt=0,Ln=null,ln=null,Yn=0,Qr=0,Pc=cu(0),Sn=0,pp=null,El=0,hb=0,YC=0,Id=null,Or=null,JC=0,Tf=1/0,va=null,uy=!1,hS=null,Vs=null,Av=!1,Is=null,ly=0,Rd=0,dS=null,Pg=-1,Og=0;function Er(){return nt&6?nn():Pg!==-1?Pg:Pg=nn()}function Ws(t){return t.mode&1?nt&2&&Yn!==0?Yn&-Yn:LG.transition!==null?(Og===0&&(Og=J4()),Og):(t=dt,t!==0||(t=window.event,t=t===void 0?16:iF(t.type)),t):1}function ho(t,e,n,r){if(50<Rd)throw Rd=0,dS=null,Error(ue(185));_m(t,n,r),(!(nt&2)||t!==Ln)&&(t===Ln&&(!(nt&2)&&(hb|=n),Sn===4&&Ss(t,Yn)),Lr(t,r),n===1&&nt===0&&!(e.mode&1)&&(Tf=nn()+500,ub&&fu()))}function Lr(t,e){var n=t.callbackNode;Lq(t,e);var r=qg(t,t===Ln?Yn:0);if(r===0)n!==null&&mk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mk(n),e===1)t.tag===0?jG(sI.bind(null,t)):SF(sI.bind(null,t)),NG(function(){!(nt&6)&&fu()}),n=null;else{switch(Q4(r)){case 1:n=SC;break;case 4:n=X4;break;case 16:n=Hg;break;case 536870912:n=Y4;break;default:n=Hg}n=x3(n,p3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p3(t,e){if(Pg=-1,Og=0,nt&6)throw Error(ue(327));var n=t.callbackNode;if(zc()&&t.callbackNode!==n)return null;var r=qg(t,t===Ln?Yn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cy(t,r);else{e=r;var i=nt;nt|=2;var o=v3();(Ln!==t||Yn!==e)&&(va=null,Tf=nn()+500,dl(t,e));do try{iK();break}catch(s){m3(t,s)}while(!0);$C(),sy.current=o,nt=i,ln!==null?e=0:(Ln=null,Yn=0,e=Sn)}if(e!==0){if(e===2&&(i=B_(t),i!==0&&(r=i,e=pS(t,i))),e===1)throw n=pp,dl(t,0),Ss(t,r),Lr(t,nn()),n;if(e===6)Ss(t,r);else{if(i=t.current.alternate,!(r&30)&&!nK(i)&&(e=cy(t,r),e===2&&(o=B_(t),o!==0&&(r=o,e=pS(t,o))),e===1))throw n=pp,dl(t,0),Ss(t,r),Lr(t,nn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ue(345));case 2:Mu(t,Or,va);break;case 3:if(Ss(t,r),(r&130023424)===r&&(e=JC+500-nn(),10<e)){if(qg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Er(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=K_(Mu.bind(null,t,Or,va),e);break}Mu(t,Or,va);break;case 4:if(Ss(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-fo(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=nn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tK(r/1960))-r,10<r){t.timeoutHandle=K_(Mu.bind(null,t,Or,va),r);break}Mu(t,Or,va);break;case 5:Mu(t,Or,va);break;default:throw Error(ue(329))}}}return Lr(t,nn()),t.callbackNode===n?p3.bind(null,t):null}function pS(t,e){var n=Id;return t.current.memoizedState.isDehydrated&&(dl(t,e).flags|=256),t=cy(t,e),t!==2&&(e=Or,Or=n,e!==null&&mS(e)),t}function mS(t){Or===null?Or=t:Or.push.apply(Or,t)}function nK(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!mo(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ss(t,e){for(e&=~YC,e&=~hb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fo(e),r=1<<n;t[n]=-1,e&=~r}}function sI(t){if(nt&6)throw Error(ue(327));zc();var e=qg(t,0);if(!(e&1))return Lr(t,nn()),null;var n=cy(t,e);if(t.tag!==0&&n===2){var r=B_(t);r!==0&&(e=r,n=pS(t,r))}if(n===1)throw n=pp,dl(t,0),Ss(t,e),Lr(t,nn()),n;if(n===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mu(t,Or,va),Lr(t,nn()),null}function QC(t,e){var n=nt;nt|=1;try{return t(e)}finally{nt=n,nt===0&&(Tf=nn()+500,ub&&fu())}}function Cl(t){Is!==null&&Is.tag===0&&!(nt&6)&&zc();var e=nt;nt|=1;var n=Ni.transition,r=dt;try{if(Ni.transition=null,dt=1,t)return t()}finally{dt=r,Ni.transition=n,nt=e,!(nt&6)&&fu()}}function ZC(){Qr=Pc.current,Mt(Pc)}function dl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RG(n)),ln!==null)for(n=ln.return;n!==null;){var r=n;switch(NC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jg();break;case 3:Cf(),Mt($r),Mt(pr),VC();break;case 5:UC(r);break;case 4:Cf();break;case 13:Mt(Vt);break;case 19:Mt(Vt);break;case 10:jC(r.type._context);break;case 22:case 23:ZC()}n=n.return}if(Ln=t,ln=t=zs(t.current,null),Yn=Qr=e,Sn=0,pp=null,YC=hb=El=0,Or=Id=null,Xu!==null){for(e=0;e<Xu.length;e++)if(n=Xu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Xu=null}return t}function m3(t,e){do{var n=ln;try{if($C(),Cg.current=ay,oy){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}oy=!1}if(Sl=0,Mn=xn=qt=null,Od=!1,fp=0,XC.current=null,n===null||n.return===null){Sn=1,pp=e,ln=null;break}e:{var o=t,a=n.return,s=n,u=e;if(e=Yn,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Kk(a);if(d!==null){d.flags&=-257,Xk(d,a,s,o,e),d.mode&1&&Gk(o,l,e),e=d,u=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(u),e.updateQueue=m}else p.add(u);break e}else{if(!(e&1)){Gk(o,l,e),eA();break e}u=Error(ue(426))}}else if(Lt&&s.mode&1){var v=Kk(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Xk(v,a,s,o,e),DC(Af(u,s));break e}}o=u=Af(u,s),Sn!==4&&(Sn=2),Id===null?Id=[o]:Id.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=QF(o,u,e);Uk(o,g);break e;case 1:s=u;var y=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vs===null||!Vs.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var _=ZF(o,s,e);Uk(o,_);break e}}o=o.return}while(o!==null)}y3(n)}catch(x){e=x,ln===n&&n!==null&&(ln=n=n.return);continue}break}while(!0)}function v3(){var t=sy.current;return sy.current=ay,t===null?ay:t}function eA(){(Sn===0||Sn===3||Sn===2)&&(Sn=4),Ln===null||!(El&268435455)&&!(hb&268435455)||Ss(Ln,Yn)}function cy(t,e){var n=nt;nt|=2;var r=v3();(Ln!==t||Yn!==e)&&(va=null,dl(t,e));do try{rK();break}catch(i){m3(t,i)}while(!0);if($C(),nt=n,sy.current=r,ln!==null)throw Error(ue(261));return Ln=null,Yn=0,Sn}function rK(){for(;ln!==null;)g3(ln)}function iK(){for(;ln!==null&&!Oq();)g3(ln)}function g3(t){var e=w3(t.alternate,t,Qr);t.memoizedProps=t.pendingProps,e===null?y3(t):ln=e,XC.current=null}function y3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JG(n,e),n!==null){n.flags&=32767,ln=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Sn=6,ln=null;return}}else if(n=YG(n,e,Qr),n!==null){ln=n;return}if(e=e.sibling,e!==null){ln=e;return}ln=e=t}while(e!==null);Sn===0&&(Sn=5)}function Mu(t,e,n){var r=dt,i=Ni.transition;try{Ni.transition=null,dt=1,oK(t,e,n,r)}finally{Ni.transition=i,dt=r}return null}function oK(t,e,n,r){do zc();while(Is!==null);if(nt&6)throw Error(ue(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Fq(t,o),t===Ln&&(ln=Ln=null,Yn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Av||(Av=!0,x3(Hg,function(){return zc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ni.transition,Ni.transition=null;var a=dt;dt=1;var s=nt;nt|=4,XC.current=null,ZG(t,n),h3(n,t),CG(q_),Gg=!!H_,q_=H_=null,t.current=n,eK(n),kq(),nt=s,dt=a,Ni.transition=o}else t.current=n;if(Av&&(Av=!1,Is=t,ly=i),o=t.pendingLanes,o===0&&(Vs=null),Nq(n.stateNode),Lr(t,nn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uy)throw uy=!1,t=hS,hS=null,t;return ly&1&&t.tag!==0&&zc(),o=t.pendingLanes,o&1?t===dS?Rd++:(Rd=0,dS=t):Rd=0,fu(),null}function zc(){if(Is!==null){var t=Q4(ly),e=Ni.transition,n=dt;try{if(Ni.transition=null,dt=16>t?16:t,Is===null)var r=!1;else{if(t=Is,Is=null,ly=0,nt&6)throw Error(ue(331));var i=nt;for(nt|=4,be=t.current;be!==null;){var o=be,a=o.child;if(be.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(be=l;be!==null;){var c=be;switch(c.tag){case 0:case 11:case 15:kd(8,c,o)}var f=c.child;if(f!==null)f.return=c,be=f;else for(;be!==null;){c=be;var h=c.sibling,d=c.return;if(l3(c),c===l){be=null;break}if(h!==null){h.return=d,be=h;break}be=d}}}var p=o.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}be=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,be=a;else e:for(;be!==null;){if(o=be,o.flags&2048)switch(o.tag){case 0:case 11:case 15:kd(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,be=g;break e}be=o.return}}var y=t.current;for(be=y;be!==null;){a=be;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,be=b;else e:for(a=y;be!==null;){if(s=be,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:fb(9,s)}}catch(x){Qt(s,s.return,x)}if(s===a){be=null;break e}var _=s.sibling;if(_!==null){_.return=s.return,be=_;break e}be=s.return}}if(nt=i,fu(),Ho&&typeof Ho.onPostCommitFiberRoot=="function")try{Ho.onPostCommitFiberRoot(rb,t)}catch{}r=!0}return r}finally{dt=n,Ni.transition=e}}return!1}function uI(t,e,n){e=Af(n,e),e=QF(t,e,1),t=Us(t,e,1),e=Er(),t!==null&&(_m(t,1,e),Lr(t,e))}function Qt(t,e,n){if(t.tag===3)uI(t,t,n);else for(;e!==null;){if(e.tag===3){uI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vs===null||!Vs.has(r))){t=Af(n,t),t=ZF(e,t,1),e=Us(e,t,1),t=Er(),e!==null&&(_m(e,1,t),Lr(e,t));break}}e=e.return}}function aK(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Er(),t.pingedLanes|=t.suspendedLanes&n,Ln===t&&(Yn&n)===n&&(Sn===4||Sn===3&&(Yn&130023424)===Yn&&500>nn()-JC?dl(t,0):YC|=n),Lr(t,e)}function b3(t,e){e===0&&(t.mode&1?(e=vv,vv<<=1,!(vv&130023424)&&(vv=4194304)):e=1);var n=Er();t=Da(t,e),t!==null&&(_m(t,e,n),Lr(t,n))}function sK(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),b3(t,n)}function uK(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ue(314))}r!==null&&r.delete(e),b3(t,n)}var w3;w3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$r.current)Nr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nr=!1,XG(t,e,n);Nr=!!(t.flags&131072)}else Nr=!1,Lt&&e.flags&1048576&&EF(e,ey,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tg(t,e),t=e.pendingProps;var i=_f(e,pr.current);Wc(e,n),i=zC(null,e,r,t,i,n);var o=HC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jr(r)?(o=!0,Qg(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,FC(e),i.updater=cb,e.stateNode=i,i._reactInternals=e,tS(e,r,t,n),e=iS(null,e,r,!0,o,n)):(e.tag=0,Lt&&o&&RC(e),gr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cK(r),t=Ji(r,t),i){case 0:e=rS(null,e,r,t,n);break e;case 1:e=Qk(null,e,r,t,n);break e;case 11:e=Yk(null,e,r,t,n);break e;case 14:e=Jk(null,e,r,Ji(r.type,t),n);break e}throw Error(ue(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),rS(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),Qk(t,e,r,i,n);case 3:e:{if(r3(e),t===null)throw Error(ue(387));r=e.pendingProps,o=e.memoizedState,i=o.element,kF(t,e),ry(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Af(Error(ue(423)),e),e=Zk(t,e,r,n,i);break e}else if(r!==i){i=Af(Error(ue(424)),e),e=Zk(t,e,r,n,i);break e}else for(ai=Bs(e.stateNode.containerInfo.firstChild),ci=e,Lt=!0,oo=null,n=PF(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sf(),r===i){e=Ma(t,e,n);break e}gr(t,e,r,n)}e=e.child}return e;case 5:return IF(e),t===null&&Q_(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,G_(r,i)?a=null:o!==null&&G_(r,o)&&(e.flags|=32),n3(t,e),gr(t,e,a,n),e.child;case 6:return t===null&&Q_(e),null;case 13:return i3(t,e,n);case 4:return BC(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ef(e,null,r,n):gr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),Yk(t,e,r,i,n);case 7:return gr(t,e,e.pendingProps,n),e.child;case 8:return gr(t,e,e.pendingProps.children,n),e.child;case 12:return gr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,At(ty,r._currentValue),r._currentValue=a,o!==null)if(mo(o.value,a)){if(o.children===i.children&&!$r.current){e=Ma(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Ta(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Z_(o.return,n,e),s.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ue(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Z_(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}gr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Wc(e,n),i=$i(i),r=r(i),e.flags|=1,gr(t,e,r,n),e.child;case 14:return r=e.type,i=Ji(r,e.pendingProps),i=Ji(r.type,i),Jk(t,e,r,i,n);case 15:return e3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),Tg(t,e),e.tag=1,jr(r)?(t=!0,Qg(e)):t=!1,Wc(e,n),JF(e,r,i),tS(e,r,i,n),iS(null,e,r,!0,t,n);case 19:return o3(t,e,n);case 22:return t3(t,e,n)}throw Error(ue(156,e.tag))};function x3(t,e){return K4(t,e)}function lK(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(t,e,n,r){return new lK(t,e,n,r)}function tA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cK(t){if(typeof t=="function")return tA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wC)return 11;if(t===xC)return 14}return 2}function zs(t,e){var n=t.alternate;return n===null?(n=Oi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kg(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")tA(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case yc:return pl(n.children,i,o,e);case bC:a=8,i|=8;break;case C_:return t=Oi(12,n,e,i|2),t.elementType=C_,t.lanes=o,t;case A_:return t=Oi(13,n,e,i),t.elementType=A_,t.lanes=o,t;case T_:return t=Oi(19,n,e,i),t.elementType=T_,t.lanes=o,t;case I4:return db(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case O4:a=10;break e;case k4:a=9;break e;case wC:a=11;break e;case xC:a=14;break e;case gs:a=16,r=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return e=Oi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function pl(t,e,n,r){return t=Oi(7,t,r,e),t.lanes=n,t}function db(t,e,n,r){return t=Oi(22,t,r,e),t.elementType=I4,t.lanes=n,t.stateNode={isHidden:!1},t}function Fx(t,e,n){return t=Oi(6,t,null,e),t.lanes=n,t}function Bx(t,e,n){return e=Oi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fK(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wx(0),this.expirationTimes=wx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nA(t,e,n,r,i,o,a,s,u){return t=new fK(t,e,n,s,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Oi(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},FC(o),t}function hK(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _3(t){if(!t)return Qs;t=t._reactInternals;e:{if($l(t)!==t||t.tag!==1)throw Error(ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(t.tag===1){var n=t.type;if(jr(n))return _F(t,n,e)}return e}function S3(t,e,n,r,i,o,a,s,u){return t=nA(n,r,!0,t,i,o,a,s,u),t.context=_3(null),n=t.current,r=Er(),i=Ws(n),o=Ta(r,i),o.callback=e??null,Us(n,o,i),t.current.lanes=i,_m(t,i,r),Lr(t,r),t}function pb(t,e,n,r){var i=e.current,o=Er(),a=Ws(i);return n=_3(n),e.context===null?e.context=n:e.pendingContext=n,e=Ta(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Us(i,e,a),t!==null&&(ho(t,i,a,o),Eg(t,i,a)),a}function fy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rA(t,e){lI(t,e),(t=t.alternate)&&lI(t,e)}function dK(){return null}var E3=typeof reportError=="function"?reportError:function(t){console.error(t)};function iA(t){this._internalRoot=t}mb.prototype.render=iA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ue(409));pb(t,e,null,null)};mb.prototype.unmount=iA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cl(function(){pb(null,t,null,null)}),e[Na]=null}};function mb(t){this._internalRoot=t}mb.prototype.unstable_scheduleHydration=function(t){if(t){var e=tF();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_s.length&&e!==0&&e<_s[n].priority;n++);_s.splice(n,0,t),n===0&&rF(t)}};function oA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cI(){}function pK(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=fy(a);o.call(l)}}var a=S3(e,r,t,0,null,!1,!1,"",cI);return t._reactRootContainer=a,t[Na]=a.current,ap(t.nodeType===8?t.parentNode:t),Cl(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=fy(u);s.call(l)}}var u=nA(t,0,!1,null,null,!1,!1,"",cI);return t._reactRootContainer=u,t[Na]=u.current,ap(t.nodeType===8?t.parentNode:t),Cl(function(){pb(e,u,n,r)}),u}function gb(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=fy(a);s.call(u)}}pb(e,a,t,i)}else a=pK(n,e,t,i,r);return fy(a)}Z4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yd(e.pendingLanes);n!==0&&(EC(e,n|1),Lr(e,nn()),!(nt&6)&&(Tf=nn()+500,fu()))}break;case 13:Cl(function(){var r=Da(t,1);if(r!==null){var i=Er();ho(r,t,1,i)}}),rA(t,1)}};CC=function(t){if(t.tag===13){var e=Da(t,134217728);if(e!==null){var n=Er();ho(e,t,134217728,n)}rA(t,134217728)}};eF=function(t){if(t.tag===13){var e=Ws(t),n=Da(t,e);if(n!==null){var r=Er();ho(n,t,e,r)}rA(t,e)}};tF=function(){return dt};nF=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};j_=function(t,e,n){switch(e){case"input":if(k_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sb(r);if(!i)throw Error(ue(90));N4(r),k_(r,i)}}}break;case"textarea":M4(t,n);break;case"select":e=n.value,e!=null&&Fc(t,!!n.multiple,e,!1)}};V4=QC;W4=Cl;var mK={usingClientEntryPoint:!1,Events:[Em,_c,sb,B4,U4,QC]},Jh={findFiberByHostInstance:Ku,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vK={bundleType:Jh.bundleType,version:Jh.version,rendererPackageName:Jh.rendererPackageName,rendererConfig:Jh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:za.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q4(t),t===null?null:t.stateNode},findFiberByHostInstance:Jh.findFiberByHostInstance||dK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tv.isDisabled&&Tv.supportsFiber)try{rb=Tv.inject(vK),Ho=Tv}catch{}}mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mK;mi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oA(e))throw Error(ue(200));return hK(t,e,null,n)};mi.createRoot=function(t,e){if(!oA(t))throw Error(ue(299));var n=!1,r="",i=E3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nA(t,1,!1,null,null,n,!1,r,i),t[Na]=e.current,ap(t.nodeType===8?t.parentNode:t),new iA(e)};mi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=q4(e),t=t===null?null:t.stateNode,t};mi.flushSync=function(t){return Cl(t)};mi.hydrate=function(t,e,n){if(!vb(e))throw Error(ue(200));return gb(null,t,e,!0,n)};mi.hydrateRoot=function(t,e,n){if(!oA(t))throw Error(ue(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=E3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=S3(e,null,t,1,n??null,i,!1,o,a),t[Na]=e.current,ap(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mb(e)};mi.render=function(t,e,n){if(!vb(e))throw Error(ue(200));return gb(null,t,e,!1,n)};mi.unmountComponentAtNode=function(t){if(!vb(t))throw Error(ue(40));return t._reactRootContainer?(Cl(function(){gb(null,null,t,!1,function(){t._reactRootContainer=null,t[Na]=null})}),!0):!1};mi.unstable_batchedUpdates=QC;mi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vb(n))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return gb(t,e,n,!1,r)};mi.version="18.3.1-next-f1338f8080-20240426";function C3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C3)}catch(t){console.error(t)}}C3(),C4.exports=mi;var Am=C4.exports;const A3=pt(Am);var T3,fI=Am;T3=fI.createRoot,fI.hydrateRoot;const gK=1,yK=1e6;let Ux=0;function bK(){return Ux=(Ux+1)%Number.MAX_SAFE_INTEGER,Ux.toString()}const Vx=new Map,hI=t=>{if(Vx.has(t))return;const e=setTimeout(()=>{Vx.delete(t),Nd({type:"REMOVE_TOAST",toastId:t})},yK);Vx.set(t,e)},wK=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,gK)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?hI(n):t.toasts.forEach(r=>{hI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Ig=[];let Rg={toasts:[]};function Nd(t){Rg=wK(Rg,t),Ig.forEach(e=>{e(Rg)})}function xK({...t}){const e=bK(),n=i=>Nd({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Nd({type:"DISMISS_TOAST",toastId:e});return Nd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function aA(){const[t,e]=R.useState(Rg);return R.useEffect(()=>(Ig.push(e),()=>{const n=Ig.indexOf(e);n>-1&&Ig.splice(n,1)}),[t]),{...t,toast:xK,dismiss:n=>Nd({type:"DISMISS_TOAST",toastId:n})}}function _n(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function dI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function P3(...t){return e=>{let n=!1;const r=t.map(i=>{const o=dI(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():dI(t[i],null)}}}}function vo(...t){return R.useCallback(P3(...t),t)}function yb(t,e=[]){let n=[];function r(o,a){const s=R.createContext(a),u=n.length;n=[...n,a];const l=f=>{var g;const{scope:h,children:d,...p}=f,m=((g=h==null?void 0:h[t])==null?void 0:g[u])||s,v=R.useMemo(()=>p,Object.values(p));return D.jsx(m.Provider,{value:v,children:d})};l.displayName=o+"Provider";function c(f,h){var m;const d=((m=h==null?void 0:h[t])==null?void 0:m[u])||s,p=R.useContext(d);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[l,c]}const i=()=>{const o=n.map(a=>R.createContext(a));return function(s){const u=(s==null?void 0:s[t])||o;return R.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return i.scopeName=t,[r,_K(i,...e)]}function _K(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:u,scopeName:l})=>{const f=u(o)[`__scope${l}`];return{...s,...f}},{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function hy(t){const e=EK(t),n=R.forwardRef((r,i)=>{const{children:o,...a}=r,s=R.Children.toArray(o),u=s.find(AK);if(u){const l=u.props.children,c=s.map(f=>f===u?R.Children.count(l)>1?R.Children.only(null):R.isValidElement(l)?l.props.children:null:f);return D.jsx(e,{...a,ref:i,children:R.isValidElement(l)?R.cloneElement(l,void 0,c):null})}return D.jsx(e,{...a,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}var SK=hy("Slot");function EK(t){const e=R.forwardRef((n,r)=>{const{children:i,...o}=n;if(R.isValidElement(i)){const a=PK(i),s=TK(o,i.props);return i.type!==R.Fragment&&(s.ref=r?P3(r,a):a),R.cloneElement(i,s)}return R.Children.count(i)>1?R.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var O3=Symbol("radix.slottable");function CK(t){const e=({children:n})=>D.jsx(D.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=O3,e}function AK(t){return R.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===O3}function TK(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...s)=>{const u=o(...s);return i(...s),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function PK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function OK(t){const e=t+"CollectionProvider",[n,r]=yb(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:v,children:g}=m,y=W.useRef(null),b=W.useRef(new Map).current;return D.jsx(i,{scope:v,itemMap:b,collectionRef:y,children:g})};a.displayName=e;const s=t+"CollectionSlot",u=hy(s),l=W.forwardRef((m,v)=>{const{scope:g,children:y}=m,b=o(s,g),_=vo(v,b.collectionRef);return D.jsx(u,{ref:_,children:y})});l.displayName=s;const c=t+"CollectionItemSlot",f="data-radix-collection-item",h=hy(c),d=W.forwardRef((m,v)=>{const{scope:g,children:y,...b}=m,_=W.useRef(null),x=vo(v,_),S=o(c,g);return W.useEffect(()=>(S.itemMap.set(_,{ref:_,...b}),()=>void S.itemMap.delete(_))),D.jsx(h,{[f]:"",ref:x,children:y})});d.displayName=c;function p(m){const v=o(t+"CollectionConsumer",m);return W.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((S,E)=>b.indexOf(S.ref.current)-b.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:l,ItemSlot:d},p,r]}var kK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Wr=kK.reduce((t,e)=>{const n=hy(`Primitive.${e}`),r=R.forwardRef((i,o)=>{const{asChild:a,...s}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(u,{...s,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function k3(t,e){t&&Am.flushSync(()=>t.dispatchEvent(e))}function Zs(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function IK(t,e=globalThis==null?void 0:globalThis.document){const n=Zs(t);R.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var RK="DismissableLayer",vS="dismissableLayer.update",NK="dismissableLayer.pointerDownOutside",DK="dismissableLayer.focusOutside",pI,I3=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sA=R.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...u}=t,l=R.useContext(I3),[c,f]=R.useState(null),h=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,d]=R.useState({}),p=vo(e,E=>f(E)),m=Array.from(l.layers),[v]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),g=m.indexOf(v),y=c?m.indexOf(c):-1,b=l.layersWithOutsidePointerEventsDisabled.size>0,_=y>=g,x=$K(E=>{const C=E.target,A=[...l.branches].some(T=>T.contains(C));!_||A||(i==null||i(E),a==null||a(E),E.defaultPrevented||s==null||s())},h),S=jK(E=>{const C=E.target;[...l.branches].some(T=>T.contains(C))||(o==null||o(E),a==null||a(E),E.defaultPrevented||s==null||s())},h);return IK(E=>{y===l.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&s&&(E.preventDefault(),s()))},h),R.useEffect(()=>{if(c)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(pI=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(c)),l.layers.add(c),mI(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=pI)}},[c,h,n,l]),R.useEffect(()=>()=>{c&&(l.layers.delete(c),l.layersWithOutsidePointerEventsDisabled.delete(c),mI())},[c,l]),R.useEffect(()=>{const E=()=>d({});return document.addEventListener(vS,E),()=>document.removeEventListener(vS,E)},[]),D.jsx(Wr.div,{...u,ref:p,style:{pointerEvents:b?_?"auto":"none":void 0,...t.style},onFocusCapture:_n(t.onFocusCapture,S.onFocusCapture),onBlurCapture:_n(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:_n(t.onPointerDownCapture,x.onPointerDownCapture)})});sA.displayName=RK;var MK="DismissableLayerBranch",R3=R.forwardRef((t,e)=>{const n=R.useContext(I3),r=R.useRef(null),i=vo(e,r);return R.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),D.jsx(Wr.div,{...t,ref:i})});R3.displayName=MK;function $K(t,e=globalThis==null?void 0:globalThis.document){const n=Zs(t),r=R.useRef(!1),i=R.useRef(()=>{});return R.useEffect(()=>{const o=s=>{if(s.target&&!r.current){let u=function(){N3(NK,n,l,{discrete:!0})};const l={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function jK(t,e=globalThis==null?void 0:globalThis.document){const n=Zs(t),r=R.useRef(!1);return R.useEffect(()=>{const i=o=>{o.target&&!r.current&&N3(DK,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function mI(){const t=new CustomEvent(vS);document.dispatchEvent(t)}function N3(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?k3(i,o):i.dispatchEvent(o)}var LK=sA,FK=R3,eu=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},BK="Portal",D3=R.forwardRef((t,e)=>{var s;const{container:n,...r}=t,[i,o]=R.useState(!1);eu(()=>o(!0),[]);const a=n||i&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return a?A3.createPortal(D.jsx(Wr.div,{...r,ref:e}),a):null});D3.displayName=BK;function UK(t,e){return R.useReducer((n,r)=>e[n][r]??n,t)}var uA=t=>{const{present:e,children:n}=t,r=VK(e),i=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),o=vo(r.ref,WK(i));return typeof n=="function"||r.isPresent?R.cloneElement(i,{ref:o}):null};uA.displayName="Presence";function VK(t){const[e,n]=R.useState(),r=R.useRef(null),i=R.useRef(t),o=R.useRef("none"),a=t?"mounted":"unmounted",[s,u]=UK(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const l=Pv(r.current);o.current=s==="mounted"?l:"none"},[s]),eu(()=>{const l=r.current,c=i.current;if(c!==t){const h=o.current,d=Pv(l);t?u("MOUNT"):d==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&h!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),eu(()=>{if(e){let l;const c=e.ownerDocument.defaultView??window,f=d=>{const m=Pv(r.current).includes(d.animationName);if(d.target===e&&m&&(u("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",l=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},h=d=>{d.target===e&&(o.current=Pv(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{c.clearTimeout(l),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:R.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function Pv(t){return(t==null?void 0:t.animationName)||"none"}function WK(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var zK=S4[" useInsertionEffect ".trim().toString()]||eu;function HK({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,o,a]=qK({defaultProp:e,onChange:n}),s=t!==void 0,u=s?t:i;{const c=R.useRef(t!==void 0);R.useEffect(()=>{const f=c.current;f!==s&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=s},[s,r])}const l=R.useCallback(c=>{var f;if(s){const h=GK(c)?c(t):c;h!==t&&((f=a.current)==null||f.call(a,h))}else o(c)},[s,t,o,a]);return[u,l]}function qK({defaultProp:t,onChange:e}){const[n,r]=R.useState(t),i=R.useRef(n),o=R.useRef(e);return zK(()=>{o.current=e},[e]),R.useEffect(()=>{var a;i.current!==n&&((a=o.current)==null||a.call(o,n),i.current=n)},[n,i]),[n,r,o]}function GK(t){return typeof t=="function"}var KK=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XK="VisuallyHidden",bb=R.forwardRef((t,e)=>D.jsx(Wr.span,{...t,ref:e,style:{...KK,...t.style}}));bb.displayName=XK;var YK=bb,lA="ToastProvider",[cA,JK,QK]=OK("Toast"),[M3,O3e]=yb("Toast",[QK]),[ZK,wb]=M3(lA),$3=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=t,[s,u]=R.useState(null),[l,c]=R.useState(0),f=R.useRef(!1),h=R.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${lA}\`. Expected non-empty \`string\`.`),D.jsx(cA.Provider,{scope:e,children:D.jsx(ZK,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:l,viewport:s,onViewportChange:u,onToastAdd:R.useCallback(()=>c(d=>d+1),[]),onToastRemove:R.useCallback(()=>c(d=>d-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:a})})};$3.displayName=lA;var j3="ToastViewport",e7=["F8"],gS="toast.viewportPause",yS="toast.viewportResume",L3=R.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=e7,label:i="Notifications ({hotkey})",...o}=t,a=wb(j3,n),s=JK(n),u=R.useRef(null),l=R.useRef(null),c=R.useRef(null),f=R.useRef(null),h=vo(e,f,a.onViewportChange),d=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=a.toastCount>0;R.useEffect(()=>{const v=g=>{var b;r.length!==0&&r.every(_=>g[_]||g.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),R.useEffect(()=>{const v=u.current,g=f.current;if(p&&v&&g){const y=()=>{if(!a.isClosePausedRef.current){const S=new CustomEvent(gS);g.dispatchEvent(S),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const S=new CustomEvent(yS);g.dispatchEvent(S),a.isClosePausedRef.current=!1}},_=S=>{!v.contains(S.relatedTarget)&&b()},x=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",y),v.addEventListener("focusout",_),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",x),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",x),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[p,a.isClosePausedRef]);const m=R.useCallback(({tabbingDirection:v})=>{const y=s().map(b=>{const _=b.ref.current,x=[_,...d7(_)];return v==="forwards"?x:x.reverse()});return(v==="forwards"?y.reverse():y).flat()},[s]);return R.useEffect(()=>{const v=f.current;if(v){const g=y=>{var x,S,E;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const C=document.activeElement,A=y.shiftKey;if(y.target===v&&A){(x=l.current)==null||x.focus();return}const k=m({tabbingDirection:A?"backwards":"forwards"}),I=k.findIndex($=>$===C);Wx(k.slice(I+1))?y.preventDefault():A?(S=l.current)==null||S.focus():(E=c.current)==null||E.focus()}};return v.addEventListener("keydown",g),()=>v.removeEventListener("keydown",g)}},[s,m]),D.jsxs(FK,{ref:u,role:"region","aria-label":i.replace("{hotkey}",d),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&D.jsx(bS,{ref:l,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"forwards"});Wx(v)}}),D.jsx(cA.Slot,{scope:n,children:D.jsx(Wr.ol,{tabIndex:-1,...o,ref:h})}),p&&D.jsx(bS,{ref:c,onFocusFromOutsideViewport:()=>{const v=m({tabbingDirection:"backwards"});Wx(v)}})]})});L3.displayName=j3;var F3="ToastFocusProxy",bS=R.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,o=wb(F3,n);return D.jsx(bb,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var l;const s=a.relatedTarget;!((l=o.viewport)!=null&&l.contains(s))&&r()}})});bS.displayName=F3;var Tm="Toast",t7="toast.swipeStart",n7="toast.swipeMove",r7="toast.swipeCancel",i7="toast.swipeEnd",B3=R.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...a}=t,[s,u]=HK({prop:r,defaultProp:i??!0,onChange:o,caller:Tm});return D.jsx(uA,{present:n||s,children:D.jsx(s7,{open:s,...a,ref:e,onClose:()=>u(!1),onPause:Zs(t.onPause),onResume:Zs(t.onResume),onSwipeStart:_n(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_n(t.onSwipeMove,l=>{const{x:c,y:f}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:_n(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_n(t.onSwipeEnd,l=>{const{x:c,y:f}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),u(!1)})})})});B3.displayName=Tm;var[o7,a7]=M3(Tm,{onClose(){}}),s7=R.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:u,onResume:l,onSwipeStart:c,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:d,...p}=t,m=wb(Tm,n),[v,g]=R.useState(null),y=vo(e,$=>g($)),b=R.useRef(null),_=R.useRef(null),x=i||m.duration,S=R.useRef(0),E=R.useRef(x),C=R.useRef(0),{onToastAdd:A,onToastRemove:T}=m,P=Zs(()=>{var B;(v==null?void 0:v.contains(document.activeElement))&&((B=m.viewport)==null||B.focus()),a()}),k=R.useCallback($=>{!$||$===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(P,$))},[P]);R.useEffect(()=>{const $=m.viewport;if($){const B=()=>{k(E.current),l==null||l()},z=()=>{const U=new Date().getTime()-S.current;E.current=E.current-U,window.clearTimeout(C.current),u==null||u()};return $.addEventListener(gS,z),$.addEventListener(yS,B),()=>{$.removeEventListener(gS,z),$.removeEventListener(yS,B)}}},[m.viewport,x,u,l,k]),R.useEffect(()=>{o&&!m.isClosePausedRef.current&&k(x)},[o,x,m.isClosePausedRef,k]),R.useEffect(()=>(A(),()=>T()),[A,T]);const I=R.useMemo(()=>v?G3(v):null,[v]);return m.viewport?D.jsxs(D.Fragment,{children:[I&&D.jsx(u7,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),D.jsx(o7,{scope:n,onClose:P,children:Am.createPortal(D.jsx(cA.ItemSlot,{scope:n,children:D.jsx(LK,{asChild:!0,onEscapeKeyDown:_n(s,()=>{m.isFocusedToastEscapeKeyDownRef.current||P(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:D.jsx(Wr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:_n(t.onKeyDown,$=>{$.key==="Escape"&&(s==null||s($.nativeEvent),$.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:_n(t.onPointerDown,$=>{$.button===0&&(b.current={x:$.clientX,y:$.clientY})}),onPointerMove:_n(t.onPointerMove,$=>{if(!b.current)return;const B=$.clientX-b.current.x,z=$.clientY-b.current.y,U=!!_.current,M=["left","right"].includes(m.swipeDirection),F=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,H=M?F(0,B):0,X=M?0:F(0,z),K=$.pointerType==="touch"?10:2,Q={x:H,y:X},ae={originalEvent:$,delta:Q};U?(_.current=Q,Ov(n7,f,ae,{discrete:!1})):vI(Q,m.swipeDirection,K)?(_.current=Q,Ov(t7,c,ae,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(B)>K||Math.abs(z)>K)&&(b.current=null)}),onPointerUp:_n(t.onPointerUp,$=>{const B=_.current,z=$.target;if(z.hasPointerCapture($.pointerId)&&z.releasePointerCapture($.pointerId),_.current=null,b.current=null,B){const U=$.currentTarget,M={originalEvent:$,delta:B};vI(B,m.swipeDirection,m.swipeThreshold)?Ov(i7,d,M,{discrete:!0}):Ov(r7,h,M,{discrete:!0}),U.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),u7=t=>{const{__scopeToast:e,children:n,...r}=t,i=wb(Tm,e),[o,a]=R.useState(!1),[s,u]=R.useState(!1);return f7(()=>a(!0)),R.useEffect(()=>{const l=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(l)},[]),s?null:D.jsx(D3,{asChild:!0,children:D.jsx(bb,{...r,children:o&&D.jsxs(D.Fragment,{children:[i.label," ",n]})})})},l7="ToastTitle",U3=R.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return D.jsx(Wr.div,{...r,ref:e})});U3.displayName=l7;var c7="ToastDescription",V3=R.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return D.jsx(Wr.div,{...r,ref:e})});V3.displayName=c7;var W3="ToastAction",z3=R.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?D.jsx(q3,{altText:n,asChild:!0,children:D.jsx(fA,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${W3}\`. Expected non-empty \`string\`.`),null)});z3.displayName=W3;var H3="ToastClose",fA=R.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=a7(H3,n);return D.jsx(q3,{asChild:!0,children:D.jsx(Wr.button,{type:"button",...r,ref:e,onClick:_n(t.onClick,i.onClose)})})});fA.displayName=H3;var q3=R.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return D.jsx(Wr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function G3(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),h7(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...G3(r))}}),e}function Ov(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?k3(i,o):i.dispatchEvent(o)}var vI=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),o=r>i;return e==="left"||e==="right"?o&&r>n:!o&&i>n};function f7(t=()=>{}){const e=Zs(t);eu(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function h7(t){return t.nodeType===t.ELEMENT_NODE}function d7(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Wx(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var p7=$3,K3=L3,X3=B3,Y3=U3,J3=V3,Q3=z3,Z3=fA;function eB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=eB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=eB(t))&&(r&&(r+=" "),r+=e);return r}const gI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,yI=qe,tB=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return yI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,a=Object.keys(i).map(l=>{const c=n==null?void 0:n[l],f=o==null?void 0:o[l];if(c===null)return null;const h=gI(c)||gI(f);return i[l][h]}),s=n&&Object.entries(n).reduce((l,c)=>{let[f,h]=c;return h===void 0||(l[f]=h),l},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((l,c)=>{let{class:f,className:h,...d}=c;return Object.entries(d).every(p=>{let[m,v]=p;return Array.isArray(v)?v.includes({...o,...s}[m]):{...o,...s}[m]===v})?[...l,f,h]:l},[]);return yI(t,a,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nB=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=R.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...s},u)=>R.createElement("svg",{ref:u,...v7,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nB("lucide",i),...s},[...a.map(([l,c])=>R.createElement(l,c)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=(t,e)=>{const n=R.forwardRef(({className:r,...i},o)=>R.createElement(g7,{ref:o,iconNode:e,className:nB(`lucide-${m7(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=rB("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=rB("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),hA="-",w7=t=>{const e=_7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const s=a.split(hA);return s[0]===""&&s.length!==1&&s.shift(),iB(s,e)||x7(a)},getConflictingClassGroupIds:(a,s)=>{const u=n[a]||[];return s&&r[a]?[...u,...r[a]]:u}}},iB=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?iB(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(hA);return(a=e.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId},bI=/^\[(.+)\]$/,x7=t=>{if(bI.test(t)){const e=bI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},_7=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return E7(Object.entries(t.classGroups),n).forEach(([o,a])=>{wS(a,r,o,e)}),r},wS=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:wI(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(S7(i)){wS(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,a])=>{wS(a,wI(e,o),n,r)})})},wI=(t,e)=>{let n=t;return e.split(hA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},S7=t=>t.isThemeGetter,E7=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[e+a,s])):o);return[n,i]}):t,C7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set(o,a){n.has(o)?n.set(o,a):i(o,a)}}},oB="!",A7=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,a=s=>{const u=[];let l=0,c=0,f;for(let v=0;v<s.length;v++){let g=s[v];if(l===0){if(g===i&&(r||s.slice(v,v+o)===e)){u.push(s.slice(c,v)),c=v+o;continue}if(g==="/"){f=v;continue}}g==="["?l++:g==="]"&&l--}const h=u.length===0?s:s.substring(c),d=h.startsWith(oB),p=d?h.substring(1):h,m=f&&f>c?f-c:void 0;return{modifiers:u,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:m}};return n?s=>n({className:s,parseClassName:a}):a},T7=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},P7=t=>({cache:C7(t.cacheSize),parseClassName:A7(t),...w7(t)}),O7=/\s+/,k7=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],a=t.trim().split(O7);let s="";for(let u=a.length-1;u>=0;u-=1){const l=a[u],{modifiers:c,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:d}=n(l);let p=!!d,m=r(p?h.substring(0,d):h);if(!m){if(!p){s=l+(s.length>0?" "+s:s);continue}if(m=r(h),!m){s=l+(s.length>0?" "+s:s);continue}p=!1}const v=T7(c).join(":"),g=f?v+oB:v,y=g+m;if(o.includes(y))continue;o.push(y);const b=i(m,p);for(let _=0;_<b.length;++_){const x=b[_];o.push(g+x)}s=l+(s.length>0?" "+s:s)}return s};function I7(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=aB(e))&&(r&&(r+=" "),r+=n);return r}const aB=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=aB(t[r]))&&(n&&(n+=" "),n+=e);return n};function R7(t,...e){let n,r,i,o=a;function a(u){const l=e.reduce((c,f)=>f(c),t());return n=P7(l),r=n.cache.get,i=n.cache.set,o=s,s(u)}function s(u){const l=r(u);if(l)return l;const c=k7(u,n);return i(u,c),c}return function(){return o(I7.apply(null,arguments))}}const kt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},sB=/^\[(?:([a-z-]+):)?(.+)\]$/i,N7=/^\d+\/\d+$/,D7=new Set(["px","full","screen"]),M7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,j7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,L7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,F7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fa=t=>Hc(t)||D7.has(t)||N7.test(t),fs=t=>lh(t,"length",G7),Hc=t=>!!t&&!Number.isNaN(Number(t)),zx=t=>lh(t,"number",Hc),Qh=t=>!!t&&Number.isInteger(Number(t)),B7=t=>t.endsWith("%")&&Hc(t.slice(0,-1)),ze=t=>sB.test(t),hs=t=>M7.test(t),U7=new Set(["length","size","percentage"]),V7=t=>lh(t,U7,uB),W7=t=>lh(t,"position",uB),z7=new Set(["image","url"]),H7=t=>lh(t,z7,X7),q7=t=>lh(t,"",K7),Zh=()=>!0,lh=(t,e,n)=>{const r=sB.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},G7=t=>$7.test(t)&&!j7.test(t),uB=()=>!1,K7=t=>L7.test(t),X7=t=>F7.test(t),Y7=()=>{const t=kt("colors"),e=kt("spacing"),n=kt("blur"),r=kt("brightness"),i=kt("borderColor"),o=kt("borderRadius"),a=kt("borderSpacing"),s=kt("borderWidth"),u=kt("contrast"),l=kt("grayscale"),c=kt("hueRotate"),f=kt("invert"),h=kt("gap"),d=kt("gradientColorStops"),p=kt("gradientColorStopPositions"),m=kt("inset"),v=kt("margin"),g=kt("opacity"),y=kt("padding"),b=kt("saturate"),_=kt("scale"),x=kt("sepia"),S=kt("skew"),E=kt("space"),C=kt("translate"),A=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",ze,e],k=()=>[ze,e],I=()=>["",fa,fs],$=()=>["auto",Hc,ze],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",ze],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[Hc,ze];return{cacheSize:500,separator:":",theme:{colors:[Zh],spacing:[fa,fs],blur:["none","",hs,ze],brightness:X(),borderColor:[t],borderRadius:["none","","full",hs,ze],borderSpacing:k(),borderWidth:I(),contrast:X(),grayscale:F(),hueRotate:X(),invert:F(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[B7,fs],inset:P(),margin:P(),opacity:X(),padding:k(),saturate:X(),scale:X(),sepia:F(),skew:X(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",ze]}],container:["container"],columns:[{columns:[hs]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),ze]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qh,ze]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ze]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Qh,ze]}],"grid-cols":[{"grid-cols":[Zh]}],"col-start-end":[{col:["auto",{span:["full",Qh,ze]},ze]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Zh]}],"row-start-end":[{row:["auto",{span:[Qh,ze]},ze]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ze]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ze]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ze,e]}],"min-w":[{"min-w":[ze,e,"min","max","fit"]}],"max-w":[{"max-w":[ze,e,"none","full","min","max","fit","prose",{screen:[hs]},hs]}],h:[{h:[ze,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ze,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ze,e,"auto","min","max","fit"]}],"font-size":[{text:["base",hs,fs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zx]}],"font-family":[{font:[Zh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ze]}],"line-clamp":[{"line-clamp":["none",Hc,zx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fa,ze]}],"list-image":[{"list-image":["none",ze]}],"list-style-type":[{list:["none","disc","decimal",ze]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fa,fs]}],"underline-offset":[{"underline-offset":["auto",fa,ze]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ze]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ze]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),W7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",V7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},H7]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[fa,ze]}],"outline-w":[{outline:[fa,fs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[fa,fs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",hs,q7]}],"shadow-color":[{shadow:[Zh]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",hs,ze]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ze]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",ze]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",ze]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Qh,ze]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ze]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ze]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ze]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[fa,fs,zx]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},J7=R7(Y7);function Ft(...t){return J7(qe(t))}const Q7=p7,lB=R.forwardRef(({className:t,...e},n)=>D.jsx(K3,{ref:n,className:Ft("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));lB.displayName=K3.displayName;const Z7=tB("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cB=R.forwardRef(({className:t,variant:e,...n},r)=>D.jsx(X3,{ref:r,className:Ft(Z7({variant:e}),t),...n}));cB.displayName=X3.displayName;const eX=R.forwardRef(({className:t,...e},n)=>D.jsx(Q3,{ref:n,className:Ft("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));eX.displayName=Q3.displayName;const fB=R.forwardRef(({className:t,...e},n)=>D.jsx(Z3,{ref:n,className:Ft("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:D.jsx(b7,{className:"h-4 w-4"})}));fB.displayName=Z3.displayName;const hB=R.forwardRef(({className:t,...e},n)=>D.jsx(Y3,{ref:n,className:Ft("text-sm font-semibold",t),...e}));hB.displayName=Y3.displayName;const dB=R.forwardRef(({className:t,...e},n)=>D.jsx(J3,{ref:n,className:Ft("text-sm opacity-90",t),...e}));dB.displayName=J3.displayName;function tX(){const{toasts:t}=aA();return D.jsxs(Q7,{children:[t.map(function({id:e,title:n,description:r,action:i,...o}){return D.jsxs(cB,{...o,children:[D.jsxs("div",{className:"grid gap-1",children:[n&&D.jsx(hB,{children:n}),r&&D.jsx(dB,{children:r})]}),i,D.jsx(fB,{})]},e)}),D.jsx(lB,{})]})}var xI=["light","dark"],nX="(prefers-color-scheme: dark)",rX=R.createContext(void 0),iX={setTheme:t=>{},themes:[]},oX=()=>{var t;return(t=R.useContext(rX))!=null?t:iX};R.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:a,attrs:s,nonce:u})=>{let l=o==="system",c=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${s.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=i?xI.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(p,m=!1,v=!0)=>{let g=a?a[p]:p,y=m?p+"|| ''":`'${g}'`,b="";return i&&v&&!m&&xI.includes(p)&&(b+=`d.style.colorScheme = '${p}';`),n==="class"?m||g?b+=`c.add(${y})`:b+="null":g&&(b+=`d[s](n,${y})`),b},d=t?`!function(){${c}${h(t)}}()`:r?`!function(){try{${c}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${nX}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}${l?"":"else{"+h(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${c}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${f}}catch(t){}}();`;return R.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:d}})});var aX=t=>{switch(t){case"success":return lX;case"info":return fX;case"warning":return cX;case"error":return hX;default:return null}},sX=Array(12).fill(0),uX=({visible:t,className:e})=>W.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},W.createElement("div",{className:"sonner-spinner"},sX.map((n,r)=>W.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),lX=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),cX=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fX=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hX=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),dX=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},W.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),W.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pX=()=>{let[t,e]=W.useState(document.hidden);return W.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},xS=1,mX=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:xS++,a=this.toasts.find(u=>u.id===o),s=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(u=>u.id===o?(this.publish({...u,...e,id:o,title:r}),{...u,...e,id:o,dismissible:s,title:r}):u):this.addToast({title:r,...i,dismissible:s,id:o}),o},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),o=r!==void 0,a,s=i.then(async l=>{if(a=["resolve",l],W.isValidElement(l))o=!1,this.create({id:r,type:"default",message:l});else if(gX(l)&&!l.ok){o=!1;let c=typeof n.error=="function"?await n.error(`HTTP error! status: ${l.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${l.status}`):n.description;this.create({id:r,type:"error",message:c,description:f})}else if(n.success!==void 0){o=!1;let c=typeof n.success=="function"?await n.success(l):n.success,f=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"success",message:c,description:f})}}).catch(async l=>{if(a=["reject",l],n.error!==void 0){o=!1;let c=typeof n.error=="function"?await n.error(l):n.error,f=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"error",message:c,description:f})}}).finally(()=>{var l;o&&(this.dismiss(r),r=void 0),(l=n.finally)==null||l.call(n)}),u=()=>new Promise((l,c)=>s.then(()=>a[0]==="reject"?c(a[1]):l(a[1])).catch(c));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||xS++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Pr=new mX,vX=(t,e)=>{let n=(e==null?void 0:e.id)||xS++;return Pr.addToast({title:t,...e,id:n}),n},gX=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",yX=vX,bX=()=>Pr.toasts,wX=()=>Pr.getActiveToasts();Object.assign(yX,{success:Pr.success,info:Pr.info,warning:Pr.warning,error:Pr.error,custom:Pr.custom,message:Pr.message,promise:Pr.promise,dismiss:Pr.dismiss,loading:Pr.loading},{getHistory:bX,getToasts:wX});function xX(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}xX(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function kv(t){return t.label!==void 0}var _X=3,SX="32px",EX="16px",_I=4e3,CX=356,AX=14,TX=20,PX=200;function qi(...t){return t.filter(Boolean).join(" ")}function OX(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var kX=t=>{var e,n,r,i,o,a,s,u,l,c,f;let{invert:h,toast:d,unstyled:p,interacting:m,setHeights:v,visibleToasts:g,heights:y,index:b,toasts:_,expanded:x,removeToast:S,defaultRichColors:E,closeButton:C,style:A,cancelButtonStyle:T,actionButtonStyle:P,className:k="",descriptionClassName:I="",duration:$,position:B,gap:z,loadingIcon:U,expandByDefault:M,classNames:F,icons:H,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:K}=t,[Q,ae]=W.useState(null),[le,ve]=W.useState(null),[de,Ce]=W.useState(!1),[ie,me]=W.useState(!1),[ce,te]=W.useState(!1),[ye,xe]=W.useState(!1),[De,Ie]=W.useState(!1),[et,vt]=W.useState(0),[Be,ut]=W.useState(0),gt=W.useRef(d.duration||$||_I),en=W.useRef(null),jt=W.useRef(null),Hr=b===0,on=b+1<=g,dn=d.type,Qn=d.dismissible!==!1,Zn=d.className||"",xu=d.descriptionClassName||"",ns=W.useMemo(()=>y.findIndex(Me=>Me.toastId===d.id)||0,[y,d.id]),ql=W.useMemo(()=>{var Me;return(Me=d.closeButton)!=null?Me:C},[d.closeButton,C]),Gl=W.useMemo(()=>d.duration||$||_I,[d.duration,$]),qr=W.useRef(0),Tr=W.useRef(0),So=W.useRef(0),Gr=W.useRef(null),[Zm,Ih]=B.split("-"),Rh=W.useMemo(()=>y.reduce((Me,lt,_t)=>_t>=ns?Me:Me+lt.height,0),[y,ns]),rs=pX(),ev=d.invert||h,pn=dn==="loading";Tr.current=W.useMemo(()=>ns*z+Rh,[ns,Rh]),W.useEffect(()=>{gt.current=Gl},[Gl]),W.useEffect(()=>{Ce(!0)},[]),W.useEffect(()=>{let Me=jt.current;if(Me){let lt=Me.getBoundingClientRect().height;return ut(lt),v(_t=>[{toastId:d.id,height:lt,position:d.position},..._t]),()=>v(_t=>_t.filter(In=>In.toastId!==d.id))}},[v,d.id]),W.useLayoutEffect(()=>{if(!de)return;let Me=jt.current,lt=Me.style.height;Me.style.height="auto";let _t=Me.getBoundingClientRect().height;Me.style.height=lt,ut(_t),v(In=>In.find(Kr=>Kr.toastId===d.id)?In.map(Kr=>Kr.toastId===d.id?{...Kr,height:_t}:Kr):[{toastId:d.id,height:_t,position:d.position},...In])},[de,d.title,d.description,v,d.id]);let Vi=W.useCallback(()=>{me(!0),vt(Tr.current),v(Me=>Me.filter(lt=>lt.toastId!==d.id)),setTimeout(()=>{S(d)},PX)},[d,S,v,Tr]);W.useEffect(()=>{if(d.promise&&dn==="loading"||d.duration===1/0||d.type==="loading")return;let Me;return x||m||K&&rs?(()=>{if(So.current<qr.current){let lt=new Date().getTime()-qr.current;gt.current=gt.current-lt}So.current=new Date().getTime()})():gt.current!==1/0&&(qr.current=new Date().getTime(),Me=setTimeout(()=>{var lt;(lt=d.onAutoClose)==null||lt.call(d,d),Vi()},gt.current)),()=>clearTimeout(Me)},[x,m,d,dn,K,rs,Vi]),W.useEffect(()=>{d.delete&&Vi()},[Vi,d.delete]);function _u(){var Me,lt,_t;return H!=null&&H.loading?W.createElement("div",{className:qi(F==null?void 0:F.loader,(Me=d==null?void 0:d.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":dn==="loading"},H.loading):U?W.createElement("div",{className:qi(F==null?void 0:F.loader,(lt=d==null?void 0:d.classNames)==null?void 0:lt.loader,"sonner-loader"),"data-visible":dn==="loading"},U):W.createElement(uX,{className:qi(F==null?void 0:F.loader,(_t=d==null?void 0:d.classNames)==null?void 0:_t.loader),visible:dn==="loading"})}return W.createElement("li",{tabIndex:0,ref:jt,className:qi(k,Zn,F==null?void 0:F.toast,(e=d==null?void 0:d.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[dn],(n=d==null?void 0:d.classNames)==null?void 0:n[dn]),"data-sonner-toast":"","data-rich-colors":(r=d.richColors)!=null?r:E,"data-styled":!(d.jsx||d.unstyled||p),"data-mounted":de,"data-promise":!!d.promise,"data-swiped":De,"data-removed":ie,"data-visible":on,"data-y-position":Zm,"data-x-position":Ih,"data-index":b,"data-front":Hr,"data-swiping":ce,"data-dismissible":Qn,"data-type":dn,"data-invert":ev,"data-swipe-out":ye,"data-swipe-direction":le,"data-expanded":!!(x||M&&de),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${ie?et:Tr.current}px`,"--initial-height":M?"auto":`${Be}px`,...A,...d.style},onDragEnd:()=>{te(!1),ae(null),Gr.current=null},onPointerDown:Me=>{pn||!Qn||(en.current=new Date,vt(Tr.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(te(!0),Gr.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,lt,_t,In;if(ye||!Qn)return;Gr.current=null;let Kr=Number(((Me=jt.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Eo=Number(((lt=jt.current)==null?void 0:lt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Wi=new Date().getTime()-((_t=en.current)==null?void 0:_t.getTime()),Xr=Q==="x"?Kr:Eo,zi=Math.abs(Xr)/Wi;if(Math.abs(Xr)>=TX||zi>.11){vt(Tr.current),(In=d.onDismiss)==null||In.call(d,d),ve(Q==="x"?Kr>0?"right":"left":Eo>0?"down":"up"),Vi(),xe(!0),Ie(!1);return}te(!1),ae(null)},onPointerMove:Me=>{var lt,_t,In,Kr;if(!Gr.current||!Qn||((lt=window.getSelection())==null?void 0:lt.toString().length)>0)return;let Eo=Me.clientY-Gr.current.y,Wi=Me.clientX-Gr.current.x,Xr=(_t=t.swipeDirections)!=null?_t:OX(B);!Q&&(Math.abs(Wi)>1||Math.abs(Eo)>1)&&ae(Math.abs(Wi)>Math.abs(Eo)?"x":"y");let zi={x:0,y:0};Q==="y"?(Xr.includes("top")||Xr.includes("bottom"))&&(Xr.includes("top")&&Eo<0||Xr.includes("bottom")&&Eo>0)&&(zi.y=Eo):Q==="x"&&(Xr.includes("left")||Xr.includes("right"))&&(Xr.includes("left")&&Wi<0||Xr.includes("right")&&Wi>0)&&(zi.x=Wi),(Math.abs(zi.x)>0||Math.abs(zi.y)>0)&&Ie(!0),(In=jt.current)==null||In.style.setProperty("--swipe-amount-x",`${zi.x}px`),(Kr=jt.current)==null||Kr.style.setProperty("--swipe-amount-y",`${zi.y}px`)}},ql&&!d.jsx?W.createElement("button",{"aria-label":X,"data-disabled":pn,"data-close-button":!0,onClick:pn||!Qn?()=>{}:()=>{var Me;Vi(),(Me=d.onDismiss)==null||Me.call(d,d)},className:qi(F==null?void 0:F.closeButton,(i=d==null?void 0:d.classNames)==null?void 0:i.closeButton)},(o=H==null?void 0:H.close)!=null?o:dX):null,d.jsx||R.isValidElement(d.title)?d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title:W.createElement(W.Fragment,null,dn||d.icon||d.promise?W.createElement("div",{"data-icon":"",className:qi(F==null?void 0:F.icon,(a=d==null?void 0:d.classNames)==null?void 0:a.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||_u():null,d.type!=="loading"?d.icon||(H==null?void 0:H[dn])||aX(dn):null):null,W.createElement("div",{"data-content":"",className:qi(F==null?void 0:F.content,(s=d==null?void 0:d.classNames)==null?void 0:s.content)},W.createElement("div",{"data-title":"",className:qi(F==null?void 0:F.title,(u=d==null?void 0:d.classNames)==null?void 0:u.title)},typeof d.title=="function"?d.title():d.title),d.description?W.createElement("div",{"data-description":"",className:qi(I,xu,F==null?void 0:F.description,(l=d==null?void 0:d.classNames)==null?void 0:l.description)},typeof d.description=="function"?d.description():d.description):null),R.isValidElement(d.cancel)?d.cancel:d.cancel&&kv(d.cancel)?W.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||T,onClick:Me=>{var lt,_t;kv(d.cancel)&&Qn&&((_t=(lt=d.cancel).onClick)==null||_t.call(lt,Me),Vi())},className:qi(F==null?void 0:F.cancelButton,(c=d==null?void 0:d.classNames)==null?void 0:c.cancelButton)},d.cancel.label):null,R.isValidElement(d.action)?d.action:d.action&&kv(d.action)?W.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||P,onClick:Me=>{var lt,_t;kv(d.action)&&((_t=(lt=d.action).onClick)==null||_t.call(lt,Me),!Me.defaultPrevented&&Vi())},className:qi(F==null?void 0:F.actionButton,(f=d==null?void 0:d.classNames)==null?void 0:f.actionButton)},d.action.label):null))};function SI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function IX(t,e){let n={};return[t,e].forEach((r,i)=>{let o=i===1,a=o?"--mobile-offset":"--offset",s=o?EX:SX;function u(l){["top","right","bottom","left"].forEach(c=>{n[`${a}-${c}`]=typeof l=="number"?`${l}px`:l})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(l=>{r[l]===void 0?n[`${a}-${l}`]=s:n[`${a}-${l}`]=typeof r[l]=="number"?`${r[l]}px`:r[l]}):u(s)}),n}var RX=R.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:a,className:s,offset:u,mobileOffset:l,theme:c="light",richColors:f,duration:h,style:d,visibleToasts:p=_X,toastOptions:m,dir:v=SI(),gap:g=AX,loadingIcon:y,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:x}=t,[S,E]=W.useState([]),C=W.useMemo(()=>Array.from(new Set([r].concat(S.filter(K=>K.position).map(K=>K.position)))),[S,r]),[A,T]=W.useState([]),[P,k]=W.useState(!1),[I,$]=W.useState(!1),[B,z]=W.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=W.useRef(null),M=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=W.useRef(null),H=W.useRef(!1),X=W.useCallback(K=>{E(Q=>{var ae;return(ae=Q.find(le=>le.id===K.id))!=null&&ae.delete||Pr.dismiss(K.id),Q.filter(({id:le})=>le!==K.id)})},[]);return W.useEffect(()=>Pr.subscribe(K=>{if(K.dismiss){E(Q=>Q.map(ae=>ae.id===K.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{A3.flushSync(()=>{E(Q=>{let ae=Q.findIndex(le=>le.id===K.id);return ae!==-1?[...Q.slice(0,ae),{...Q[ae],...K},...Q.slice(ae+1)]:[K,...Q]})})})}),[]),W.useEffect(()=>{if(c!=="system"){z(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:Q})=>{z(Q?"dark":"light")})}catch{K.addListener(({matches:ae})=>{try{z(ae?"dark":"light")}catch(le){console.error(le)}})}},[c]),W.useEffect(()=>{S.length<=1&&k(!1)},[S]),W.useEffect(()=>{let K=Q=>{var ae,le;i.every(ve=>Q[ve]||Q.code===ve)&&(k(!0),(ae=U.current)==null||ae.focus()),Q.code==="Escape"&&(document.activeElement===U.current||(le=U.current)!=null&&le.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[i]),W.useEffect(()=>{if(U.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,H.current=!1)}},[U.current]),W.createElement("section",{ref:e,"aria-label":`${_} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((K,Q)=>{var ae;let[le,ve]=K.split("-");return S.length?W.createElement("ol",{key:K,dir:v==="auto"?SI():v,tabIndex:-1,ref:U,className:s,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":le,"data-lifted":P&&S.length>1&&!o,"data-x-position":ve,style:{"--front-toast-height":`${((ae=A[0])==null?void 0:ae.height)||0}px`,"--width":`${CX}px`,"--gap":`${g}px`,...d,...IX(u,l)},onBlur:de=>{H.current&&!de.currentTarget.contains(de.relatedTarget)&&(H.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||H.current||(H.current=!0,F.current=de.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{I||k(!1)},onDragEnd:()=>k(!1),onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},S.filter(de=>!de.position&&Q===0||de.position===K).map((de,Ce)=>{var ie,me;return W.createElement(kX,{key:de.id,icons:b,index:Ce,toast:de,defaultRichColors:f,duration:(ie=m==null?void 0:m.duration)!=null?ie:h,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:p,closeButton:(me=m==null?void 0:m.closeButton)!=null?me:a,interacting:I,position:K,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:X,toasts:S.filter(ce=>ce.position==de.position),heights:A.filter(ce=>ce.position==de.position),setHeights:T,expandByDefault:o,gap:g,loadingIcon:y,expanded:P,pauseWhenPageIsHidden:x,swipeDirections:t.swipeDirections})})):null}))});const NX=({...t})=>{const{theme:e="system"}=oX();return D.jsx(RX,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},DX=["top","right","bottom","left"],tu=Math.min,ni=Math.max,dy=Math.round,Iv=Math.floor,Go=t=>({x:t,y:t}),MX={left:"right",right:"left",bottom:"top",top:"bottom"},$X={start:"end",end:"start"};function _S(t,e,n){return ni(t,tu(e,n))}function $a(t,e){return typeof t=="function"?t(e):t}function ja(t){return t.split("-")[0]}function ch(t){return t.split("-")[1]}function dA(t){return t==="x"?"y":"x"}function pA(t){return t==="y"?"height":"width"}const jX=new Set(["top","bottom"]);function Uo(t){return jX.has(ja(t))?"y":"x"}function mA(t){return dA(Uo(t))}function LX(t,e,n){n===void 0&&(n=!1);const r=ch(t),i=mA(t),o=pA(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=py(a)),[a,py(a)]}function FX(t){const e=py(t);return[SS(t),e,SS(e)]}function SS(t){return t.replace(/start|end/g,e=>$X[e])}const EI=["left","right"],CI=["right","left"],BX=["top","bottom"],UX=["bottom","top"];function VX(t,e,n){switch(t){case"top":case"bottom":return n?e?CI:EI:e?EI:CI;case"left":case"right":return e?BX:UX;default:return[]}}function WX(t,e,n,r){const i=ch(t);let o=VX(ja(t),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(SS)))),o}function py(t){return t.replace(/left|right|bottom|top/g,e=>MX[e])}function zX(t){return{top:0,right:0,bottom:0,left:0,...t}}function pB(t){return typeof t!="number"?zX(t):{top:t,right:t,bottom:t,left:t}}function my(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function AI(t,e,n){let{reference:r,floating:i}=t;const o=Uo(e),a=mA(e),s=pA(a),u=ja(e),l=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[s]/2-i[s]/2;let d;switch(u){case"top":d={x:c,y:r.y-i.height};break;case"bottom":d={x:c,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:f};break;case"left":d={x:r.x-i.width,y:f};break;default:d={x:r.x,y:r.y}}switch(ch(e)){case"start":d[a]-=h*(n&&l?-1:1);break;case"end":d[a]+=h*(n&&l?-1:1);break}return d}const HX=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=AI(l,r,u),h=r,d={},p=0;for(let m=0;m<s.length;m++){const{name:v,fn:g}=s[m],{x:y,y:b,data:_,reset:x}=await g({x:c,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:d,rects:l,platform:a,elements:{reference:t,floating:e}});c=y??c,f=b??f,d={...d,[v]:{...d[v],..._}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(l=x.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):x.rects),{x:c,y:f}=AI(l,h,u)),m=-1)}return{x:c,y:f,placement:h,strategy:i,middlewareData:d}};async function mp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=$a(e,t),p=pB(d),v=s[h?f==="floating"?"reference":"floating":f],g=my(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:c,strategy:u})),y=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),_=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},x=my(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:b,strategy:u}):y);return{top:(g.top-x.top+p.top)/_.y,bottom:(x.bottom-g.bottom+p.bottom)/_.y,left:(g.left-x.left+p.left)/_.x,right:(x.right-g.right+p.right)/_.x}}const qX=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:u}=e,{element:l,padding:c=0}=$a(t,e)||{};if(l==null)return{};const f=pB(c),h={x:n,y:r},d=mA(i),p=pA(d),m=await a.getDimensions(l),v=d==="y",g=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",_=o.reference[p]+o.reference[d]-h[d]-o.floating[p],x=h[d]-o.reference[d],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let E=S?S[b]:0;(!E||!await(a.isElement==null?void 0:a.isElement(S)))&&(E=s.floating[b]||o.floating[p]);const C=_/2-x/2,A=E/2-m[p]/2-1,T=tu(f[g],A),P=tu(f[y],A),k=T,I=E-m[p]-P,$=E/2-m[p]/2+C,B=_S(k,$,I),z=!u.arrow&&ch(i)!=null&&$!==B&&o.reference[p]/2-($<k?T:P)-m[p]/2<0,U=z?$<k?$-k:$-I:0;return{[d]:h[d]+U,data:{[d]:B,centerOffset:$-B-U,...z&&{alignmentOffset:U}},reset:z}}}),GX=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:u,elements:l}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...v}=$a(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const g=ja(i),y=Uo(s),b=ja(s)===s,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),x=h||(b||!m?[py(s)]:FX(s)),S=p!=="none";!h&&S&&x.push(...WX(s,m,p,_));const E=[s,...x],C=await mp(e,v),A=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&A.push(C[g]),f){const $=LX(i,a,_);A.push(C[$[0]],C[$[1]])}if(T=[...T,{placement:i,overflows:A}],!A.every($=>$<=0)){var P,k;const $=(((P=o.flip)==null?void 0:P.index)||0)+1,B=E[$];if(B&&(!(f==="alignment"?y!==Uo(B):!1)||T.every(M=>M.overflows[0]>0&&Uo(M.placement)===y)))return{data:{index:$,overflows:T},reset:{placement:B}};let z=(k=T.filter(U=>U.overflows[0]<=0).sort((U,M)=>U.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!z)switch(d){case"bestFit":{var I;const U=(I=T.filter(M=>{if(S){const F=Uo(M.placement);return F===y||F==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(F=>F>0).reduce((F,H)=>F+H,0)]).sort((M,F)=>M[1]-F[1])[0])==null?void 0:I[0];U&&(z=U);break}case"initialPlacement":z=s;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function TI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function PI(t){return DX.some(e=>t[e]>=0)}const KX=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=$a(t,e);switch(r){case"referenceHidden":{const o=await mp(e,{...i,elementContext:"reference"}),a=TI(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:PI(a)}}}case"escaped":{const o=await mp(e,{...i,altBoundary:!0}),a=TI(o,n.floating);return{data:{escapedOffsets:a,escaped:PI(a)}}}default:return{}}}}},mB=new Set(["left","top"]);async function XX(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=ja(n),s=ch(n),u=Uo(n)==="y",l=mB.has(a)?-1:1,c=o&&u?-1:1,f=$a(e,t);let{mainAxis:h,crossAxis:d,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof p=="number"&&(d=s==="end"?p*-1:p),u?{x:d*c,y:h*l}:{x:h*l,y:d*c}}const YX=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=e,u=await XX(e,t);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:o+u.y,data:{...u,placement:a}}}}},JX=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...u}=$a(t,e),l={x:n,y:r},c=await mp(e,u),f=Uo(ja(i)),h=dA(f);let d=l[h],p=l[f];if(o){const v=h==="y"?"top":"left",g=h==="y"?"bottom":"right",y=d+c[v],b=d-c[g];d=_S(y,d,b)}if(a){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=p+c[v],b=p-c[g];p=_S(y,p,b)}const m=s.fn({...e,[h]:d,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:o,[f]:a}}}}}},QX=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:a}=e,{offset:s=0,mainAxis:u=!0,crossAxis:l=!0}=$a(t,e),c={x:n,y:r},f=Uo(i),h=dA(f);let d=c[h],p=c[f];const m=$a(s,e),v=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=h==="y"?"height":"width",_=o.reference[h]-o.floating[b]+v.mainAxis,x=o.reference[h]+o.reference[b]-v.mainAxis;d<_?d=_:d>x&&(d=x)}if(l){var g,y;const b=h==="y"?"width":"height",_=mB.has(ja(i)),x=o.reference[f]-o.floating[b]+(_&&((g=a.offset)==null?void 0:g[f])||0)+(_?0:v.crossAxis),S=o.reference[f]+o.reference[b]+(_?0:((y=a.offset)==null?void 0:y[f])||0)-(_?v.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[h]:d,[f]:p}}}},ZX=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:u=()=>{},...l}=$a(t,e),c=await mp(e,l),f=ja(i),h=ch(i),d=Uo(i)==="y",{width:p,height:m}=o.floating;let v,g;f==="top"||f==="bottom"?(v=f,g=h===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(g=f,v=h==="end"?"top":"bottom");const y=m-c.top-c.bottom,b=p-c.left-c.right,_=tu(m-c[v],y),x=tu(p-c[g],b),S=!e.middlewareData.shift;let E=_,C=x;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=y),S&&!h){const T=ni(c.left,0),P=ni(c.right,0),k=ni(c.top,0),I=ni(c.bottom,0);d?C=p-2*(T!==0||P!==0?T+P:ni(c.left,c.right)):E=m-2*(k!==0||I!==0?k+I:ni(c.top,c.bottom))}await u({...e,availableWidth:C,availableHeight:E});const A=await a.getDimensions(s.floating);return p!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function xb(){return typeof window<"u"}function fh(t){return vB(t)?(t.nodeName||"").toLowerCase():"#document"}function fi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function oa(t){var e;return(e=(vB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vB(t){return xb()?t instanceof Node||t instanceof fi(t).Node:!1}function go(t){return xb()?t instanceof Element||t instanceof fi(t).Element:!1}function ta(t){return xb()?t instanceof HTMLElement||t instanceof fi(t).HTMLElement:!1}function OI(t){return!xb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof fi(t).ShadowRoot}const eY=new Set(["inline","contents"]);function Pm(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=yo(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!eY.has(i)}const tY=new Set(["table","td","th"]);function nY(t){return tY.has(fh(t))}const rY=[":popover-open",":modal"];function _b(t){return rY.some(e=>{try{return t.matches(e)}catch{return!1}})}const iY=["transform","translate","scale","rotate","perspective"],oY=["transform","translate","scale","rotate","perspective","filter"],aY=["paint","layout","strict","content"];function vA(t){const e=gA(),n=go(t)?yo(t):t;return iY.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||oY.some(r=>(n.willChange||"").includes(r))||aY.some(r=>(n.contain||"").includes(r))}function sY(t){let e=nu(t);for(;ta(e)&&!Pf(e);){if(vA(e))return e;if(_b(e))return null;e=nu(e)}return null}function gA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uY=new Set(["html","body","#document"]);function Pf(t){return uY.has(fh(t))}function yo(t){return fi(t).getComputedStyle(t)}function Sb(t){return go(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function nu(t){if(fh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||OI(t)&&t.host||oa(t);return OI(e)?e.host:e}function gB(t){const e=nu(t);return Pf(e)?t.ownerDocument?t.ownerDocument.body:t.body:ta(e)&&Pm(e)?e:gB(e)}function vp(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=gB(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),a=fi(i);if(o){const s=ES(a);return e.concat(a,a.visualViewport||[],Pm(i)?i:[],s&&n?vp(s):[])}return e.concat(i,vp(i,[],n))}function ES(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yB(t){const e=yo(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ta(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=dy(n)!==o||dy(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function yA(t){return go(t)?t:t.contextElement}function qc(t){const e=yA(t);if(!ta(e))return Go(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=yB(e);let a=(o?dy(n.width):n.width)/r,s=(o?dy(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const lY=Go(0);function bB(t){const e=fi(t);return!gA()||!e.visualViewport?lY:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function cY(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==fi(t)?!1:e}function Al(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=yA(t);let a=Go(1);e&&(r?go(r)&&(a=qc(r)):a=qc(t));const s=cY(o,n,r)?bB(o):Go(0);let u=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,c=i.width/a.x,f=i.height/a.y;if(o){const h=fi(o),d=r&&go(r)?fi(r):r;let p=h,m=ES(p);for(;m&&r&&d!==p;){const v=qc(m),g=m.getBoundingClientRect(),y=yo(m),b=g.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,_=g.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;u*=v.x,l*=v.y,c*=v.x,f*=v.y,u+=b,l+=_,p=fi(m),m=ES(p)}}return my({width:c,height:f,x:u,y:l})}function bA(t,e){const n=Sb(t).scrollLeft;return e?e.left+n:Al(oa(t)).left+n}function wB(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:bA(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function fY(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",a=oa(r),s=e?_b(e.floating):!1;if(r===a||s&&o)return n;let u={scrollLeft:0,scrollTop:0},l=Go(1);const c=Go(0),f=ta(r);if((f||!f&&!o)&&((fh(r)!=="body"||Pm(a))&&(u=Sb(r)),ta(r))){const d=Al(r);l=qc(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}const h=a&&!f&&!o?wB(a,u,!0):Go(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x+h.x,y:n.y*l.y-u.scrollTop*l.y+c.y+h.y}}function hY(t){return Array.from(t.getClientRects())}function dY(t){const e=oa(t),n=Sb(t),r=t.ownerDocument.body,i=ni(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=ni(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+bA(t);const s=-n.scrollTop;return yo(r).direction==="rtl"&&(a+=ni(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}function pY(t,e){const n=fi(t),r=oa(t),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;const l=gA();(!l||l&&e==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s,y:u}}const mY=new Set(["absolute","fixed"]);function vY(t,e){const n=Al(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=ta(t)?qc(t):Go(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,u=i*o.x,l=r*o.y;return{width:a,height:s,x:u,y:l}}function kI(t,e,n){let r;if(e==="viewport")r=pY(t,n);else if(e==="document")r=dY(oa(t));else if(go(e))r=vY(e,n);else{const i=bB(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return my(r)}function xB(t,e){const n=nu(t);return n===e||!go(n)||Pf(n)?!1:yo(n).position==="fixed"||xB(n,e)}function gY(t,e){const n=e.get(t);if(n)return n;let r=vp(t,[],!1).filter(s=>go(s)&&fh(s)!=="body"),i=null;const o=yo(t).position==="fixed";let a=o?nu(t):t;for(;go(a)&&!Pf(a);){const s=yo(a),u=vA(a);!u&&s.position==="fixed"&&(i=null),(o?!u&&!i:!u&&s.position==="static"&&!!i&&mY.has(i.position)||Pm(a)&&!u&&xB(t,a))?r=r.filter(c=>c!==a):i=s,a=nu(a)}return e.set(t,r),r}function yY(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?_b(e)?[]:gY(e,this._c):[].concat(n),r],s=a[0],u=a.reduce((l,c)=>{const f=kI(e,c,i);return l.top=ni(f.top,l.top),l.right=tu(f.right,l.right),l.bottom=tu(f.bottom,l.bottom),l.left=ni(f.left,l.left),l},kI(e,s,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function bY(t){const{width:e,height:n}=yB(t);return{width:e,height:n}}function wY(t,e,n){const r=ta(e),i=oa(e),o=n==="fixed",a=Al(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const u=Go(0);function l(){u.x=bA(i)}if(r||!r&&!o)if((fh(e)!=="body"||Pm(i))&&(s=Sb(e)),r){const d=Al(e,!0,o,e);u.x=d.x+e.clientLeft,u.y=d.y+e.clientTop}else i&&l();o&&!r&&i&&l();const c=i&&!r&&!o?wB(i,s):Go(0),f=a.left+s.scrollLeft-u.x-c.x,h=a.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:a.width,height:a.height}}function Hx(t){return yo(t).position==="static"}function II(t,e){if(!ta(t)||yo(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return oa(t)===n&&(n=n.ownerDocument.body),n}function _B(t,e){const n=fi(t);if(_b(t))return n;if(!ta(t)){let i=nu(t);for(;i&&!Pf(i);){if(go(i)&&!Hx(i))return i;i=nu(i)}return n}let r=II(t,e);for(;r&&nY(r)&&Hx(r);)r=II(r,e);return r&&Pf(r)&&Hx(r)&&!vA(r)?n:r||sY(t)||n}const xY=async function(t){const e=this.getOffsetParent||_B,n=this.getDimensions,r=await n(t.floating);return{reference:wY(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function _Y(t){return yo(t).direction==="rtl"}const SY={convertOffsetParentRelativeRectToViewportRelativeRect:fY,getDocumentElement:oa,getClippingRect:yY,getOffsetParent:_B,getElementRects:xY,getClientRects:hY,getDimensions:bY,getScale:qc,isElement:go,isRTL:_Y};function SB(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function EY(t,e){let n=null,r;const i=oa(t);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),o();const l=t.getBoundingClientRect(),{left:c,top:f,width:h,height:d}=l;if(s||e(),!h||!d)return;const p=Iv(f),m=Iv(i.clientWidth-(c+h)),v=Iv(i.clientHeight-(f+d)),g=Iv(c),b={rootMargin:-p+"px "+-m+"px "+-v+"px "+-g+"px",threshold:ni(0,tu(1,u))||1};let _=!0;function x(S){const E=S[0].intersectionRatio;if(E!==u){if(!_)return a();E?a(!1,E):r=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!SB(l,t.getBoundingClientRect())&&a(),_=!1}try{n=new IntersectionObserver(x,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,b)}n.observe(t)}return a(!0),o}function CY(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=yA(t),c=i||o?[...l?vp(l):[],...vp(e)]:[];c.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),o&&g.addEventListener("resize",n)});const f=l&&s?EY(l,n):null;let h=-1,d=null;a&&(d=new ResizeObserver(g=>{let[y]=g;y&&y.target===l&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=d)==null||b.observe(e)})),n()}),l&&!u&&d.observe(l),d.observe(e));let p,m=u?Al(t):null;u&&v();function v(){const g=Al(t);m&&!SB(m,g)&&n(),m=g,p=requestAnimationFrame(v)}return n(),()=>{var g;c.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),f==null||f(),(g=d)==null||g.disconnect(),d=null,u&&cancelAnimationFrame(p)}}const AY=YX,TY=JX,PY=GX,OY=ZX,kY=KX,RI=qX,IY=QX,RY=(t,e,n)=>{const r=new Map,i={platform:SY,...n},o={...i.platform,_c:r};return HX(t,e,{...i,platform:o})};var NY=typeof document<"u",DY=function(){},Ng=NY?R.useLayoutEffect:DY;function vy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vy(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!vy(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function EB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function NI(t,e){const n=EB(t);return Math.round(e*n)/n}function qx(t){const e=R.useRef(t);return Ng(()=>{e.current=t}),e}function MY(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:u,open:l}=t,[c,f]=R.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,d]=R.useState(r);vy(h,r)||d(r);const[p,m]=R.useState(null),[v,g]=R.useState(null),y=R.useCallback(M=>{M!==S.current&&(S.current=M,m(M))},[]),b=R.useCallback(M=>{M!==E.current&&(E.current=M,g(M))},[]),_=o||p,x=a||v,S=R.useRef(null),E=R.useRef(null),C=R.useRef(c),A=u!=null,T=qx(u),P=qx(i),k=qx(l),I=R.useCallback(()=>{if(!S.current||!E.current)return;const M={placement:e,strategy:n,middleware:h};P.current&&(M.platform=P.current),RY(S.current,E.current,M).then(F=>{const H={...F,isPositioned:k.current!==!1};$.current&&!vy(C.current,H)&&(C.current=H,Am.flushSync(()=>{f(H)}))})},[h,e,n,P,k]);Ng(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[l]);const $=R.useRef(!1);Ng(()=>($.current=!0,()=>{$.current=!1}),[]),Ng(()=>{if(_&&(S.current=_),x&&(E.current=x),_&&x){if(T.current)return T.current(_,x,I);I()}},[_,x,I,T,A]);const B=R.useMemo(()=>({reference:S,floating:E,setReference:y,setFloating:b}),[y,b]),z=R.useMemo(()=>({reference:_,floating:x}),[_,x]),U=R.useMemo(()=>{const M={position:n,left:0,top:0};if(!z.floating)return M;const F=NI(z.floating,c.x),H=NI(z.floating,c.y);return s?{...M,transform:"translate("+F+"px, "+H+"px)",...EB(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:H}},[n,s,z.floating,c.x,c.y]);return R.useMemo(()=>({...c,update:I,refs:B,elements:z,floatingStyles:U}),[c,I,B,z,U])}const $Y=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?RI({element:r.current,padding:i}).fn(n):{}:r?RI({element:r,padding:i}).fn(n):{}}}},jY=(t,e)=>({...AY(t),options:[t,e]}),LY=(t,e)=>({...TY(t),options:[t,e]}),FY=(t,e)=>({...IY(t),options:[t,e]}),BY=(t,e)=>({...PY(t),options:[t,e]}),UY=(t,e)=>({...OY(t),options:[t,e]}),VY=(t,e)=>({...kY(t),options:[t,e]}),WY=(t,e)=>({...$Y(t),options:[t,e]});var zY="Arrow",CB=R.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return D.jsx(Wr.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:D.jsx("polygon",{points:"0,0 30,0 15,10"})})});CB.displayName=zY;var HY=CB;function qY(t){const[e,n]=R.useState(void 0);return eu(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const u=o.borderBoxSize,l=Array.isArray(u)?u[0]:u;a=l.inlineSize,s=l.blockSize}else a=t.offsetWidth,s=t.offsetHeight;n({width:a,height:s})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var AB="Popper",[TB,PB]=yb(AB),[I3e,OB]=TB(AB),kB="PopperAnchor",IB=R.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=OB(kB,n),a=R.useRef(null),s=vo(e,a);return R.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:D.jsx(Wr.div,{...i,ref:s})});IB.displayName=kB;var wA="PopperContent",[GY,KY]=TB(wA),RB=R.forwardRef((t,e)=>{var de,Ce,ie,me,ce,te;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:l=[],collisionPadding:c=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:d="optimized",onPlaced:p,...m}=t,v=OB(wA,n),[g,y]=R.useState(null),b=vo(e,ye=>y(ye)),[_,x]=R.useState(null),S=qY(_),E=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,A=r+(o!=="center"?"-"+o:""),T=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},P=Array.isArray(l)?l:[l],k=P.length>0,I={padding:T,boundary:P.filter(YY),altBoundary:k},{refs:$,floatingStyles:B,placement:z,isPositioned:U,middlewareData:M}=MY({strategy:"fixed",placement:A,whileElementsMounted:(...ye)=>CY(...ye,{animationFrame:d==="always"}),elements:{reference:v.anchor},middleware:[jY({mainAxis:i+C,alignmentAxis:a}),u&&LY({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?FY():void 0,...I}),u&&BY({...I}),UY({...I,apply:({elements:ye,rects:xe,availableWidth:De,availableHeight:Ie})=>{const{width:et,height:vt}=xe.reference,Be=ye.floating.style;Be.setProperty("--radix-popper-available-width",`${De}px`),Be.setProperty("--radix-popper-available-height",`${Ie}px`),Be.setProperty("--radix-popper-anchor-width",`${et}px`),Be.setProperty("--radix-popper-anchor-height",`${vt}px`)}}),_&&WY({element:_,padding:s}),JY({arrowWidth:E,arrowHeight:C}),h&&VY({strategy:"referenceHidden",...I})]}),[F,H]=MB(z),X=Zs(p);eu(()=>{U&&(X==null||X())},[U,X]);const K=(de=M.arrow)==null?void 0:de.x,Q=(Ce=M.arrow)==null?void 0:Ce.y,ae=((ie=M.arrow)==null?void 0:ie.centerOffset)!==0,[le,ve]=R.useState();return eu(()=>{g&&ve(window.getComputedStyle(g).zIndex)},[g]),D.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:U?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(me=M.transformOrigin)==null?void 0:me.x,(ce=M.transformOrigin)==null?void 0:ce.y].join(" "),...((te=M.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:D.jsx(GY,{scope:n,placedSide:F,onArrowChange:x,arrowX:K,arrowY:Q,shouldHideArrow:ae,children:D.jsx(Wr.div,{"data-side":F,"data-align":H,...m,ref:b,style:{...m.style,animation:U?void 0:"none"}})})})});RB.displayName=wA;var NB="PopperArrow",XY={top:"bottom",right:"left",bottom:"top",left:"right"},DB=R.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=KY(NB,r),a=XY[o.placedSide];return D.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:D.jsx(HY,{...i,ref:n,style:{...i.style,display:"block"}})})});DB.displayName=NB;function YY(t){return t!==null}var JY=t=>({name:"transformOrigin",options:t,fn(e){var v,g,y;const{placement:n,rects:r,middlewareData:i}=e,a=((v=i.arrow)==null?void 0:v.centerOffset)!==0,s=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[l,c]=MB(n),f={start:"0%",center:"50%",end:"100%"}[c],h=(((g=i.arrow)==null?void 0:g.x)??0)+s/2,d=(((y=i.arrow)==null?void 0:y.y)??0)+u/2;let p="",m="";return l==="bottom"?(p=a?f:`${h}px`,m=`${-u}px`):l==="top"?(p=a?f:`${h}px`,m=`${r.floating.height+u}px`):l==="right"?(p=`${-u}px`,m=a?f:`${d}px`):l==="left"&&(p=`${r.floating.width+u}px`,m=a?f:`${d}px`),{data:{x:p,y:m}}}});function MB(t){const[e,n="center"]=t.split("-");return[e,n]}var QY=IB,ZY=RB,eJ=DB,[Eb,R3e]=yb("Tooltip",[PB]),xA=PB(),$B="TooltipProvider",tJ=700,DI="tooltip.open",[nJ,jB]=Eb($B),LB=t=>{const{__scopeTooltip:e,delayDuration:n=tJ,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=t,a=R.useRef(!0),s=R.useRef(!1),u=R.useRef(0);return R.useEffect(()=>{const l=u.current;return()=>window.clearTimeout(l)},[]),D.jsx(nJ,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:R.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:R.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:R.useCallback(l=>{s.current=l},[]),disableHoverableContent:i,children:o})};LB.displayName=$B;var FB="Tooltip",[N3e,Cb]=Eb(FB),CS="TooltipTrigger",rJ=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Cb(CS,n),o=jB(CS,n),a=xA(n),s=R.useRef(null),u=vo(e,s,i.onTriggerChange),l=R.useRef(!1),c=R.useRef(!1),f=R.useCallback(()=>l.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),D.jsx(QY,{asChild:!0,...a,children:D.jsx(Wr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:u,onPointerMove:_n(t.onPointerMove,h=>{h.pointerType!=="touch"&&!c.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:_n(t.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:_n(t.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:_n(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:_n(t.onBlur,i.onClose),onClick:_n(t.onClick,i.onClose)})})});rJ.displayName=CS;var iJ="TooltipPortal",[D3e,oJ]=Eb(iJ,{forceMount:void 0}),Of="TooltipContent",BB=R.forwardRef((t,e)=>{const n=oJ(Of,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,a=Cb(Of,t.__scopeTooltip);return D.jsx(uA,{present:r||a.open,children:a.disableHoverableContent?D.jsx(UB,{side:i,...o,ref:e}):D.jsx(aJ,{side:i,...o,ref:e})})}),aJ=R.forwardRef((t,e)=>{const n=Cb(Of,t.__scopeTooltip),r=jB(Of,t.__scopeTooltip),i=R.useRef(null),o=vo(e,i),[a,s]=R.useState(null),{trigger:u,onClose:l}=n,c=i.current,{onPointerInTransitChange:f}=r,h=R.useCallback(()=>{s(null),f(!1)},[f]),d=R.useCallback((p,m)=>{const v=p.currentTarget,g={x:p.clientX,y:p.clientY},y=fJ(g,v.getBoundingClientRect()),b=hJ(g,y),_=dJ(m.getBoundingClientRect()),x=mJ([...b,..._]);s(x),f(!0)},[f]);return R.useEffect(()=>()=>h(),[h]),R.useEffect(()=>{if(u&&c){const p=v=>d(v,c),m=v=>d(v,u);return u.addEventListener("pointerleave",p),c.addEventListener("pointerleave",m),()=>{u.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",m)}}},[u,c,d,h]),R.useEffect(()=>{if(a){const p=m=>{const v=m.target,g={x:m.clientX,y:m.clientY},y=(u==null?void 0:u.contains(v))||(c==null?void 0:c.contains(v)),b=!pJ(g,a);y?h():b&&(h(),l())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[u,c,a,l,h]),D.jsx(UB,{...t,ref:o})}),[sJ,uJ]=Eb(FB,{isInside:!1}),lJ=CK("TooltipContent"),UB=R.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=t,u=Cb(Of,n),l=xA(n),{onClose:c}=u;return R.useEffect(()=>(document.addEventListener(DI,c),()=>document.removeEventListener(DI,c)),[c]),R.useEffect(()=>{if(u.trigger){const f=h=>{const d=h.target;d!=null&&d.contains(u.trigger)&&c()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[u.trigger,c]),D.jsx(sA,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:c,children:D.jsxs(ZY,{"data-state":u.stateAttribute,...l,...s,ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[D.jsx(lJ,{children:r}),D.jsx(sJ,{scope:n,isInside:!0,children:D.jsx(YK,{id:u.contentId,role:"tooltip",children:i||r})})]})})});BB.displayName=Of;var VB="TooltipArrow",cJ=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=xA(n);return uJ(VB,n).isInside?null:D.jsx(eJ,{...i,...r,ref:e})});cJ.displayName=VB;function fJ(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function hJ(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function dJ(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function pJ(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const s=e[o],u=e[a],l=s.x,c=s.y,f=u.x,h=u.y;c>r!=h>r&&n<(f-l)*(r-c)/(h-c)+l&&(i=!i)}return i}function mJ(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),vJ(e)}function vJ(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var gJ=LB,WB=BB;const yJ=gJ,bJ=R.forwardRef(({className:t,sideOffset:e=4,...n},r)=>D.jsx(WB,{ref:r,sideOffset:e,className:Ft("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));bJ.displayName=WB.displayName;var Ab=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Tb=typeof window>"u"||"Deno"in globalThis;function Qi(){}function wJ(t,e){return typeof t=="function"?t(e):t}function xJ(t){return typeof t=="number"&&t>=0&&t!==1/0}function _J(t,e){return Math.max(t+(e||0)-Date.now(),0)}function AS(t,e){return typeof t=="function"?t(e):t}function SJ(t,e){return typeof t=="function"?t(e):t}function MI(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:a,stale:s}=t;if(a){if(r){if(e.queryHash!==_A(a,e.options))return!1}else if(!yp(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof s=="boolean"&&e.isStale()!==s||i&&i!==e.state.fetchStatus||o&&!o(e))}function $I(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(gp(e.options.mutationKey)!==gp(o))return!1}else if(!yp(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function _A(t,e){return((e==null?void 0:e.queryKeyHashFn)||gp)(t)}function gp(t){return JSON.stringify(t,(e,n)=>TS(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function yp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>yp(t[n],e[n])):!1}function zB(t,e){if(t===e)return t;const n=jI(t)&&jI(e);if(n||TS(t)&&TS(e)){const r=n?t:Object.keys(t),i=r.length,o=n?e:Object.keys(e),a=o.length,s=n?[]:{},u=new Set(r);let l=0;for(let c=0;c<a;c++){const f=n?c:o[c];(!n&&u.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(s[f]=void 0,l++):(s[f]=zB(t[f],e[f]),s[f]===t[f]&&t[f]!==void 0&&l++)}return i===a&&l===i?t:s}return e}function jI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function TS(t){if(!LI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!LI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function LI(t){return Object.prototype.toString.call(t)==="[object Object]"}function EJ(t){return new Promise(e=>{setTimeout(e,t)})}function CJ(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?zB(t,e):e}function AJ(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function TJ(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var SA=Symbol();function HB(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===SA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var sl,Cs,df,o4,PJ=(o4=class extends Ab{constructor(){super();rt(this,sl);rt(this,Cs);rt(this,df);Ve(this,df,e=>{if(!Tb&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){oe(this,Cs)||this.setEventListener(oe(this,df))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,Cs))==null||e.call(this),Ve(this,Cs,void 0))}setEventListener(e){var n;Ve(this,df,e),(n=oe(this,Cs))==null||n.call(this),Ve(this,Cs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){oe(this,sl)!==e&&(Ve(this,sl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof oe(this,sl)=="boolean"?oe(this,sl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},sl=new WeakMap,Cs=new WeakMap,df=new WeakMap,o4),qB=new PJ,pf,As,mf,a4,OJ=(a4=class extends Ab{constructor(){super();rt(this,pf,!0);rt(this,As);rt(this,mf);Ve(this,mf,e=>{if(!Tb&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){oe(this,As)||this.setEventListener(oe(this,mf))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,As))==null||e.call(this),Ve(this,As,void 0))}setEventListener(e){var n;Ve(this,mf,e),(n=oe(this,As))==null||n.call(this),Ve(this,As,e(this.setOnline.bind(this)))}setOnline(e){oe(this,pf)!==e&&(Ve(this,pf,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return oe(this,pf)}},pf=new WeakMap,As=new WeakMap,mf=new WeakMap,a4),gy=new OJ;function kJ(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function IJ(t){return Math.min(1e3*2**t,3e4)}function GB(t){return(t??"online")==="online"?gy.isOnline():!0}var KB=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Gx(t){return t instanceof KB}function XB(t){let e=!1,n=0,r=!1,i;const o=kJ(),a=m=>{var v;r||(h(new KB(m)),(v=t.abort)==null||v.call(t))},s=()=>{e=!0},u=()=>{e=!1},l=()=>qB.isFocused()&&(t.networkMode==="always"||gy.isOnline())&&t.canRun(),c=()=>GB(t.networkMode)&&t.canRun(),f=m=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,m),i==null||i(),o.resolve(m))},h=m=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,m),i==null||i(),o.reject(m))},d=()=>new Promise(m=>{var v;i=g=>{(r||l())&&m(g)},(v=t.onPause)==null||v.call(t)}).then(()=>{var m;i=void 0,r||(m=t.onContinue)==null||m.call(t)}),p=()=>{if(r)return;let m;const v=n===0?t.initialPromise:void 0;try{m=v??t.fn()}catch(g){m=Promise.reject(g)}Promise.resolve(m).then(f).catch(g=>{var S;if(r)return;const y=t.retry??(Tb?0:3),b=t.retryDelay??IJ,_=typeof b=="function"?b(n,g):b,x=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(e||!x){h(g);return}n++,(S=t.onFail)==null||S.call(t,n,g),EJ(_).then(()=>l()?void 0:d()).then(()=>{e?h(g):p()})})};return{promise:o,cancel:a,continue:()=>(i==null||i(),o),cancelRetry:s,continueRetry:u,canStart:c,start:()=>(c()?p():d().then(p),o)}}var RJ=t=>setTimeout(t,0);function NJ(){let t=[],e=0,n=s=>{s()},r=s=>{s()},i=RJ;const o=s=>{e?t.push(s):i(()=>{n(s)})},a=()=>{const s=t;t=[],s.length&&i(()=>{r(()=>{s.forEach(u=>{n(u)})})})};return{batch:s=>{let u;e++;try{u=s()}finally{e--,e||a()}return u},batchCalls:s=>(...u)=>{o(()=>{s(...u)})},schedule:o,setNotifyFunction:s=>{n=s},setBatchNotifyFunction:s=>{r=s},setScheduler:s=>{i=s}}}var yr=NJ(),ul,s4,YB=(s4=class{constructor(){rt(this,ul)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xJ(this.gcTime)&&Ve(this,ul,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Tb?1/0:5*60*1e3))}clearGcTimeout(){oe(this,ul)&&(clearTimeout(oe(this,ul)),Ve(this,ul,void 0))}},ul=new WeakMap,s4),vf,ll,_i,cl,rr,bm,fl,eo,pa,u4,DJ=(u4=class extends YB{constructor(n){super();rt(this,eo);rt(this,vf);rt(this,ll);rt(this,_i);rt(this,cl);rt(this,rr);rt(this,bm);rt(this,fl);Ve(this,fl,!1),Ve(this,bm,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ve(this,cl,n.client),Ve(this,_i,oe(this,cl).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ve(this,vf,$J(this.options)),this.state=n.state??oe(this,vf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=oe(this,rr))==null?void 0:n.promise}setOptions(n){this.options={...oe(this,bm),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,_i).remove(this)}setData(n,r){const i=CJ(this.state.data,n,this.options);return er(this,eo,pa).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){er(this,eo,pa).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,o;const r=(i=oe(this,rr))==null?void 0:i.promise;return(o=oe(this,rr))==null||o.cancel(n),r?r.then(Qi).catch(Qi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,vf))}isActive(){return this.observers.some(n=>SJ(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===SA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>AS(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!_J(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=oe(this,rr))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=oe(this,rr))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),oe(this,_i).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(oe(this,rr)&&(oe(this,fl)?oe(this,rr).cancel({revert:!0}):oe(this,rr).cancelRetry()),this.scheduleGc()),oe(this,_i).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||er(this,eo,pa).call(this,{type:"invalidate"})}fetch(n,r){var c,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,rr))return oe(this,rr).continueRetry(),oe(this,rr).promise}if(n&&this.setOptions(n),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const i=new AbortController,o=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(Ve(this,fl,!0),i.signal)})},a=()=>{const d=HB(this.options,r),m=(()=>{const v={client:oe(this,cl),queryKey:this.queryKey,meta:this.meta};return o(v),v})();return Ve(this,fl,!1),this.options.persister?this.options.persister(d,m,this):d(m)},u=(()=>{const d={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:oe(this,cl),state:this.state,fetchFn:a};return o(d),d})();(c=this.options.behavior)==null||c.onFetch(u,this),Ve(this,ll,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=u.fetchOptions)==null?void 0:f.meta))&&er(this,eo,pa).call(this,{type:"fetch",meta:(h=u.fetchOptions)==null?void 0:h.meta});const l=d=>{var p,m,v,g;Gx(d)&&d.silent||er(this,eo,pa).call(this,{type:"error",error:d}),Gx(d)||((m=(p=oe(this,_i).config).onError)==null||m.call(p,d,this),(g=(v=oe(this,_i).config).onSettled)==null||g.call(v,this.state.data,d,this)),this.scheduleGc()};return Ve(this,rr,XB({initialPromise:r==null?void 0:r.initialPromise,fn:u.fetchFn,abort:i.abort.bind(i),onSuccess:d=>{var p,m,v,g;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){l(y);return}(m=(p=oe(this,_i).config).onSuccess)==null||m.call(p,d,this),(g=(v=oe(this,_i).config).onSettled)==null||g.call(v,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,p)=>{er(this,eo,pa).call(this,{type:"failed",failureCount:d,error:p})},onPause:()=>{er(this,eo,pa).call(this,{type:"pause"})},onContinue:()=>{er(this,eo,pa).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),oe(this,rr).start()}},vf=new WeakMap,ll=new WeakMap,_i=new WeakMap,cl=new WeakMap,rr=new WeakMap,bm=new WeakMap,fl=new WeakMap,eo=new WeakSet,pa=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...MJ(i.data,this.options),fetchMeta:n.meta??null};case"success":return Ve(this,ll,void 0),{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=n.error;return Gx(o)&&o.revert&&oe(this,ll)?{...oe(this,ll),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),yr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),oe(this,_i).notify({query:this,type:"updated",action:n})})},u4);function MJ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:GB(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function $J(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var No,l4,jJ=(l4=class extends Ab{constructor(e={}){super();rt(this,No);this.config=e,Ve(this,No,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??_A(i,n);let a=this.get(o);return a||(a=new DJ({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){oe(this,No).has(e.queryHash)||(oe(this,No).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=oe(this,No).get(e.queryHash);n&&(e.destroy(),n===e&&oe(this,No).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){yr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,No).get(e)}getAll(){return[...oe(this,No).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>MI(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>MI(e,r)):n}notify(e){yr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){yr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){yr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},No=new WeakMap,l4),Do,vr,hl,Mo,ms,c4,LJ=(c4=class extends YB{constructor(e){super();rt(this,Mo);rt(this,Do);rt(this,vr);rt(this,hl);this.mutationId=e.mutationId,Ve(this,vr,e.mutationCache),Ve(this,Do,[]),this.state=e.state||FJ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){oe(this,Do).includes(e)||(oe(this,Do).push(e),this.clearGcTimeout(),oe(this,vr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ve(this,Do,oe(this,Do).filter(n=>n!==e)),this.scheduleGc(),oe(this,vr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){oe(this,Do).length||(this.state.status==="pending"?this.scheduleGc():oe(this,vr).remove(this))}continue(){var e;return((e=oe(this,hl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,s,u,l,c,f,h,d,p,m,v,g,y,b,_,x,S,E,C;const n=()=>{er(this,Mo,ms).call(this,{type:"continue"})};Ve(this,hl,XB({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,T)=>{er(this,Mo,ms).call(this,{type:"failed",failureCount:A,error:T})},onPause:()=>{er(this,Mo,ms).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,vr).canRun(this)}));const r=this.state.status==="pending",i=!oe(this,hl).canStart();try{if(r)n();else{er(this,Mo,ms).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=oe(this,vr).config).onMutate)==null?void 0:a.call(o,e,this));const T=await((u=(s=this.options).onMutate)==null?void 0:u.call(s,e));T!==this.state.context&&er(this,Mo,ms).call(this,{type:"pending",context:T,variables:e,isPaused:i})}const A=await oe(this,hl).start();return await((c=(l=oe(this,vr).config).onSuccess)==null?void 0:c.call(l,A,e,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,A,e,this.state.context)),await((p=(d=oe(this,vr).config).onSettled)==null?void 0:p.call(d,A,null,this.state.variables,this.state.context,this)),await((v=(m=this.options).onSettled)==null?void 0:v.call(m,A,null,e,this.state.context)),er(this,Mo,ms).call(this,{type:"success",data:A}),A}catch(A){try{throw await((y=(g=oe(this,vr).config).onError)==null?void 0:y.call(g,A,e,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,A,e,this.state.context)),await((S=(x=oe(this,vr).config).onSettled)==null?void 0:S.call(x,void 0,A,this.state.variables,this.state.context,this)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,A,e,this.state.context)),A}finally{er(this,Mo,ms).call(this,{type:"error",error:A})}}finally{oe(this,vr).runNext(this)}}},Do=new WeakMap,vr=new WeakMap,hl=new WeakMap,Mo=new WeakSet,ms=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),yr.batch(()=>{oe(this,Do).forEach(r=>{r.onMutationUpdate(e)}),oe(this,vr).notify({mutation:this,type:"updated",action:e})})},c4);function FJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wa,to,wm,f4,BJ=(f4=class extends Ab{constructor(e={}){super();rt(this,wa);rt(this,to);rt(this,wm);this.config=e,Ve(this,wa,new Set),Ve(this,to,new Map),Ve(this,wm,0)}build(e,n,r){const i=new LJ({mutationCache:this,mutationId:++lv(this,wm)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){oe(this,wa).add(e);const n=Rv(e);if(typeof n=="string"){const r=oe(this,to).get(n);r?r.push(e):oe(this,to).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(oe(this,wa).delete(e)){const n=Rv(e);if(typeof n=="string"){const r=oe(this,to).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&oe(this,to).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Rv(e);if(typeof n=="string"){const r=oe(this,to).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Rv(e);if(typeof n=="string"){const i=(r=oe(this,to).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yr.batch(()=>{oe(this,wa).forEach(e=>{this.notify({type:"removed",mutation:e})}),oe(this,wa).clear(),oe(this,to).clear()})}getAll(){return Array.from(oe(this,wa))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>$I(n,r))}findAll(e={}){return this.getAll().filter(n=>$I(e,n))}notify(e){yr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return yr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Qi))))}},wa=new WeakMap,to=new WeakMap,wm=new WeakMap,f4);function Rv(t){var e;return(e=t.options.scope)==null?void 0:e.id}function FI(t){return{onFetch:(e,n)=>{var c,f,h,d,p;const r=e.options,i=(h=(f=(c=e.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,o=((d=e.state.data)==null?void 0:d.pages)||[],a=((p=e.state.data)==null?void 0:p.pageParams)||[];let s={pages:[],pageParams:[]},u=0;const l=async()=>{let m=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?m=!0:e.signal.addEventListener("abort",()=>{m=!0}),e.signal)})},g=HB(e.options,e.fetchOptions),y=async(b,_,x)=>{if(m)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:_,direction:x?"backward":"forward",meta:e.options.meta};return v(P),P})(),C=await g(E),{maxPages:A}=e.options,T=x?TJ:AJ;return{pages:T(b.pages,C,A),pageParams:T(b.pageParams,_,A)}};if(i&&o.length){const b=i==="backward",_=b?UJ:BI,x={pages:o,pageParams:a},S=_(r,x);s=await y(x,S,b)}else{const b=t??o.length;do{const _=u===0?a[0]??r.initialPageParam:BI(r,s);if(u>0&&_==null)break;s=await y(s,_),u++}while(u<b)}return s};e.options.persister?e.fetchFn=()=>{var m,v;return(v=(m=e.options).persister)==null?void 0:v.call(m,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function BI(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function UJ(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Yt,Ts,Ps,gf,yf,Os,bf,wf,h4,VJ=(h4=class{constructor(t={}){rt(this,Yt);rt(this,Ts);rt(this,Ps);rt(this,gf);rt(this,yf);rt(this,Os);rt(this,bf);rt(this,wf);Ve(this,Yt,t.queryCache||new jJ),Ve(this,Ts,t.mutationCache||new BJ),Ve(this,Ps,t.defaultOptions||{}),Ve(this,gf,new Map),Ve(this,yf,new Map),Ve(this,Os,0)}mount(){lv(this,Os)._++,oe(this,Os)===1&&(Ve(this,bf,qB.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,Yt).onFocus())})),Ve(this,wf,gy.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,Yt).onOnline())})))}unmount(){var t,e;lv(this,Os)._--,oe(this,Os)===0&&((t=oe(this,bf))==null||t.call(this),Ve(this,bf,void 0),(e=oe(this,wf))==null||e.call(this),Ve(this,wf,void 0))}isFetching(t){return oe(this,Yt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return oe(this,Ts).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=oe(this,Yt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=oe(this,Yt).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(AS(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return oe(this,Yt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=oe(this,Yt).get(r.queryHash),o=i==null?void 0:i.state.data,a=wJ(e,o);if(a!==void 0)return oe(this,Yt).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return yr.batch(()=>oe(this,Yt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=oe(this,Yt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=oe(this,Yt);yr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=oe(this,Yt);return yr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yr.batch(()=>oe(this,Yt).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Qi).catch(Qi)}invalidateQueries(t,e={}){return yr.batch(()=>(oe(this,Yt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yr.batch(()=>oe(this,Yt).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(Qi)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Qi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=oe(this,Yt).build(this,e);return n.isStaleByTime(AS(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Qi).catch(Qi)}fetchInfiniteQuery(t){return t.behavior=FI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Qi).catch(Qi)}ensureInfiniteQueryData(t){return t.behavior=FI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return gy.isOnline()?oe(this,Ts).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,Yt)}getMutationCache(){return oe(this,Ts)}getDefaultOptions(){return oe(this,Ps)}setDefaultOptions(t){Ve(this,Ps,t)}setQueryDefaults(t,e){oe(this,gf).set(gp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...oe(this,gf).values()],n={};return e.forEach(r=>{yp(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){oe(this,yf).set(gp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...oe(this,yf).values()],n={};return e.forEach(r=>{yp(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...oe(this,Ps).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=_A(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===SA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...oe(this,Ps).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){oe(this,Yt).clear(),oe(this,Ts).clear()}},Yt=new WeakMap,Ts=new WeakMap,Ps=new WeakMap,gf=new WeakMap,yf=new WeakMap,Os=new WeakMap,bf=new WeakMap,wf=new WeakMap,h4),WJ=R.createContext(void 0),zJ=({client:t,children:e})=>(R.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),D.jsx(WJ.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yy.apply(this,arguments)}var Rs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rs||(Rs={}));const UI="popstate";function HJ(t){t===void 0&&(t={});function e(i,o){let{pathname:a="/",search:s="",hash:u=""}=Om(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),PS("",{pathname:a,search:s,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let a=i.document.querySelector("base"),s="";if(a&&a.getAttribute("href")){let u=i.location.href,l=u.indexOf("#");s=l===-1?u:u.slice(0,l)}return s+"#"+(typeof o=="string"?o:JB(o))}function r(i,o){EA(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return GJ(e,n,r,t)}function Br(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function EA(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qJ(){return Math.random().toString(36).substr(2,8)}function VI(t,e){return{usr:t.state,key:t.key,idx:e}}function PS(t,e,n,r){return n===void 0&&(n=null),yy({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Om(e):e,{state:n,key:e&&e.key||r||qJ()})}function JB(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Om(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GJ(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Rs.Pop,u=null,l=c();l==null&&(l=0,a.replaceState(yy({},a.state,{idx:l}),""));function c(){return(a.state||{idx:null}).idx}function f(){s=Rs.Pop;let v=c(),g=v==null?null:v-l;l=v,u&&u({action:s,location:m.location,delta:g})}function h(v,g){s=Rs.Push;let y=PS(m.location,v,g);n&&n(y,v),l=c()+1;let b=VI(y,l),_=m.createHref(y);try{a.pushState(b,"",_)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(_)}o&&u&&u({action:s,location:m.location,delta:1})}function d(v,g){s=Rs.Replace;let y=PS(m.location,v,g);n&&n(y,v),l=c();let b=VI(y,l),_=m.createHref(y);a.replaceState(b,"",_),o&&u&&u({action:s,location:m.location,delta:0})}function p(v){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof v=="string"?v:JB(v);return y=y.replace(/ $/,"%20"),Br(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let m={get action(){return s},get location(){return t(i,a)},listen(v){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(UI,f),u=v,()=>{i.removeEventListener(UI,f),u=null}},createHref(v){return e(i,v)},createURL:p,encodeLocation(v){let g=p(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:d,go(v){return a.go(v)}};return m}var WI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(WI||(WI={}));function KJ(t,e,n){return n===void 0&&(n="/"),XJ(t,e,n,!1)}function XJ(t,e,n,r){let i=typeof e=="string"?Om(e):e,o=eU(i.pathname||"/",n);if(o==null)return null;let a=QB(t);YJ(a);let s=null;for(let u=0;s==null&&u<a.length;++u){let l=sQ(o);s=oQ(a[u],l,r)}return s}function QB(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let u={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Br(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Gc([r,u.relativePath]),c=n.concat(u);o.children&&o.children.length>0&&(Br(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),QB(o.children,e,c,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:rQ(l,o.index),routesMeta:c})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let u of ZB(o.path))i(o,a,u)}),e}function ZB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=ZB(r.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&s.push(...a),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function YJ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iQ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const JJ=/^:[\w-]+$/,QJ=3,ZJ=2,eQ=1,tQ=10,nQ=-2,zI=t=>t==="*";function rQ(t,e){let n=t.split("/"),r=n.length;return n.some(zI)&&(r+=nQ),e&&(r+=ZJ),n.filter(i=>!zI(i)).reduce((i,o)=>i+(JJ.test(o)?QJ:o===""?eQ:tQ),r)}function iQ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function oQ(t,e,n){let{routesMeta:r}=t,i={},o="/",a=[];for(let s=0;s<r.length;++s){let u=r[s],l=s===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",f=HI({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),h=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=HI({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Gc([o,f.pathname]),pathnameBase:uQ(Gc([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=Gc([o,f.pathnameBase]))}return a}function HI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aQ(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:h,isOptional:d}=c;if(h==="*"){let m=s[f]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const p=s[f];return d&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:t}}function aQ(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),EA(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sQ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return EA(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function eU(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Gc=t=>t.join("/").replace(/\/\/+/g,"/"),uQ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function lQ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tU=["post","put","patch","delete"];new Set(tU);const cQ=["get",...tU];new Set(cQ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function by(){return by=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},by.apply(this,arguments)}const fQ=R.createContext(null),hQ=R.createContext(null),nU=R.createContext(null),Pb=R.createContext(null),Ob=R.createContext({outlet:null,matches:[],isDataRoute:!1}),rU=R.createContext(null);function CA(){return R.useContext(Pb)!=null}function iU(){return CA()||Br(!1),R.useContext(Pb).location}function dQ(t,e){return pQ(t,e)}function pQ(t,e,n,r){CA()||Br(!1);let{navigator:i}=R.useContext(nU),{matches:o}=R.useContext(Ob),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let l=iU(),c;if(e){var f;let v=typeof e=="string"?Om(e):e;u==="/"||(f=v.pathname)!=null&&f.startsWith(u)||Br(!1),c=v}else c=l;let h=c.pathname||"/",d=h;if(u!=="/"){let v=u.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=KJ(t,{pathname:d}),m=bQ(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},s,v.params),pathname:Gc([u,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:Gc([u,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&m?R.createElement(Pb.Provider,{value:{location:by({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Rs.Pop}},m):m}function mQ(){let t=SQ(),e=lQ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:i},n):null,null)}const vQ=R.createElement(mQ,null);class gQ extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(Ob.Provider,{value:this.props.routeContext},R.createElement(rU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yQ(t){let{routeContext:e,match:n,children:r}=t,i=R.useContext(fQ);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Ob.Provider,{value:e},r)}function bQ(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let c=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);c>=0||Br(!1),a=a.slice(0,Math.min(a.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:h,errors:d}=n,p=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,f,h)=>{let d,p=!1,m=null,v=null;n&&(d=s&&f.route.id?s[f.route.id]:void 0,m=f.route.errorElement||vQ,u&&(l<0&&h===0?(p=!0,v=null):l===h&&(p=!0,v=f.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,h+1)),y=()=>{let b;return d?b=m:p?b=v:f.route.Component?b=R.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,R.createElement(yQ,{match:f,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?R.createElement(gQ,{location:n.location,revalidation:n.revalidation,component:m,error:d,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var OS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(OS||{});function wQ(t){let e=R.useContext(hQ);return e||Br(!1),e}function xQ(t){let e=R.useContext(Ob);return e||Br(!1),e}function _Q(t){let e=xQ(),n=e.matches[e.matches.length-1];return n.route.id||Br(!1),n.route.id}function SQ(){var t;let e=R.useContext(rU),n=wQ(OS.UseRouteError),r=_Q(OS.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function EQ(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function kS(t){Br(!1)}function CQ(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Rs.Pop,navigator:o,static:a=!1,future:s}=t;CA()&&Br(!1);let u=e.replace(/^\/*/,"/"),l=R.useMemo(()=>({basename:u,navigator:o,static:a,future:by({v7_relativeSplatPath:!1},s)}),[u,s,o,a]);typeof r=="string"&&(r=Om(r));let{pathname:c="/",search:f="",hash:h="",state:d=null,key:p="default"}=r,m=R.useMemo(()=>{let v=eU(c,u);return v==null?null:{location:{pathname:v,search:f,hash:h,state:d,key:p},navigationType:i}},[u,c,f,h,d,p,i]);return m==null?null:R.createElement(nU.Provider,{value:l},R.createElement(Pb.Provider,{children:n,value:m}))}function AQ(t){let{children:e,location:n}=t;return dQ(IS(e),n)}new Promise(()=>{});function IS(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,i)=>{if(!R.isValidElement(r))return;let o=[...e,i];if(r.type===R.Fragment){n.push.apply(n,IS(r.props.children,o));return}r.type!==kS&&Br(!1),!r.props.index||!r.props.children||Br(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=IS(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const TQ="6";try{window.__reactRouterVersion=TQ}catch{}const PQ="startTransition",qI=S4[PQ];function OQ(t){let{basename:e,children:n,future:r,window:i}=t,o=R.useRef();o.current==null&&(o.current=HJ({window:i,v5Compat:!0}));let a=o.current,[s,u]=R.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},c=R.useCallback(f=>{l&&qI?qI(()=>u(f)):u(f)},[u,l]);return R.useLayoutEffect(()=>a.listen(c),[a,c]),R.useEffect(()=>EQ(r),[r]),R.createElement(CQ,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}var GI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(GI||(GI={}));var KI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(KI||(KI={}));const AA=R.createContext({});function TA(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const oU=typeof window<"u",aU=oU?R.useLayoutEffect:R.useEffect,kb=R.createContext(null);function PA(t,e){t.indexOf(e)===-1&&t.push(e)}function OA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const na=(t,e,n)=>n>e?e:n<t?t:n;let Ib=()=>{},kf=()=>{};const La={},sU=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function uU(t){return typeof t=="object"&&t!==null}const lU=t=>/^0[^.\s]+$/u.test(t);function kA(t){let e;return()=>(e===void 0&&(e=t()),e)}const Di=t=>t,kQ=(t,e)=>n=>e(t(n)),km=(...t)=>t.reduce(kQ),bp=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class IA{constructor(){this.subscriptions=[]}add(e){return PA(this.subscriptions,e),()=>OA(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ko=t=>t*1e3,ki=t=>t/1e3;function cU(t,e){return e?t*(1e3/e):0}const fU=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,IQ=1e-7,RQ=12;function NQ(t,e,n,r,i){let o,a,s=0;do a=e+(n-e)/2,o=fU(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>IQ&&++s<RQ);return a}function Im(t,e,n,r){if(t===e&&n===r)return Di;const i=o=>NQ(o,0,1,t,n);return o=>o===0||o===1?o:fU(i(o),e,r)}const hU=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,dU=t=>e=>1-t(1-e),pU=Im(.33,1.53,.69,.99),RA=dU(pU),mU=hU(RA),vU=t=>(t*=2)<1?.5*RA(t):.5*(2-Math.pow(2,-10*(t-1))),NA=t=>1-Math.sin(Math.acos(t)),gU=dU(NA),yU=hU(NA),DQ=Im(.42,0,1,1),MQ=Im(0,0,.58,1),bU=Im(.42,0,.58,1),$Q=t=>Array.isArray(t)&&typeof t[0]!="number",wU=t=>Array.isArray(t)&&typeof t[0]=="number",XI={linear:Di,easeIn:DQ,easeInOut:bU,easeOut:MQ,circIn:NA,circInOut:yU,circOut:gU,backIn:RA,backInOut:mU,backOut:pU,anticipate:vU},jQ=t=>typeof t=="string",YI=t=>{if(wU(t)){kf(t.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,i]=t;return Im(e,n,r,i)}else if(jQ(t))return kf(XI[t]!==void 0,`Invalid easing type '${t}'`,"invalid-easing-type"),XI[t];return t},Nv=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],JI={value:null,addProjectionMetrics:null};function LQ(t,e){let n=new Set,r=new Set,i=!1,o=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},u=0;function l(f){a.has(f)&&(c.schedule(f),t()),u++,f(s)}const c={schedule:(f,h=!1,d=!1)=>{const m=d&&i?n:r;return h&&a.add(f),m.has(f)||m.add(f),f},cancel:f=>{r.delete(f),a.delete(f)},process:f=>{if(s=f,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),e&&JI.value&&JI.value.frameloop[e].push(u),u=0,n.clear(),i=!1,o&&(o=!1,c.process(f))}};return c}const FQ=40;function xU(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Nv.reduce((b,_)=>(b[_]=LQ(o,e?_:void 0),b),{}),{setup:s,read:u,resolveKeyframes:l,preUpdate:c,update:f,preRender:h,render:d,postRender:p}=a,m=()=>{const b=La.useManualTiming?i.timestamp:performance.now();n=!1,La.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,FQ),1)),i.timestamp=b,i.isProcessing=!0,s.process(i),u.process(i),l.process(i),c.process(i),f.process(i),h.process(i),d.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},v=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:Nv.reduce((b,_)=>{const x=a[_];return b[_]=(S,E=!1,C=!1)=>(n||v(),x.schedule(S,E,C)),b},{}),cancel:b=>{for(let _=0;_<Nv.length;_++)a[Nv[_]].cancel(b)},state:i,steps:a}}const{schedule:$t,cancel:ru,state:qn,steps:Kx}=xU(typeof requestAnimationFrame<"u"?requestAnimationFrame:Di,!0);let Dg;function BQ(){Dg=void 0}const br={now:()=>(Dg===void 0&&br.set(qn.isProcessing||La.useManualTiming?qn.timestamp:performance.now()),Dg),set:t=>{Dg=t,queueMicrotask(BQ)}},_U=t=>e=>typeof e=="string"&&e.startsWith(t),SU=_U("--"),UQ=_U("var(--"),DA=t=>UQ(t)?VQ.test(t.split("/*")[0].trim()):!1,VQ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function QI(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const hh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},wp={...hh,transform:t=>na(0,1,t)},Dv={...hh,default:1},Dd=t=>Math.round(t*1e5)/1e5,MA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WQ(t){return t==null}const zQ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$A=(t,e)=>n=>!!(typeof n=="string"&&zQ.test(n)&&n.startsWith(t)||e&&!WQ(n)&&Object.prototype.hasOwnProperty.call(n,e)),EU=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,s]=r.match(MA);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},HQ=t=>na(0,255,t),Xx={...hh,transform:t=>Math.round(HQ(t))},Ju={test:$A("rgb","red"),parse:EU("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Xx.transform(t)+", "+Xx.transform(e)+", "+Xx.transform(n)+", "+Dd(wp.transform(r))+")"};function qQ(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const RS={test:$A("#"),parse:qQ,transform:Ju.transform},Rm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),vs=Rm("deg"),Xo=Rm("%"),_e=Rm("px"),GQ=Rm("vh"),KQ=Rm("vw"),ZI={...Xo,parse:t=>Xo.parse(t)/100,transform:t=>Xo.transform(t*100)},Oc={test:$A("hsl","hue"),parse:EU("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Xo.transform(Dd(e))+", "+Xo.transform(Dd(n))+", "+Dd(wp.transform(r))+")"},un={test:t=>Ju.test(t)||RS.test(t)||Oc.test(t),parse:t=>Ju.test(t)?Ju.parse(t):Oc.test(t)?Oc.parse(t):RS.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ju.transform(t):Oc.transform(t),getAnimatableNone:t=>{const e=un.parse(t);return e.alpha=0,un.transform(e)}},XQ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YQ(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(MA))==null?void 0:e.length)||0)+(((n=t.match(XQ))==null?void 0:n.length)||0)>0}const CU="number",AU="color",JQ="var",QQ="var(",eR="${}",ZQ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xp(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=e.replace(ZQ,u=>(un.test(u)?(r.color.push(o),i.push(AU),n.push(un.parse(u))):u.startsWith(QQ)?(r.var.push(o),i.push(JQ),n.push(u)):(r.number.push(o),i.push(CU),n.push(parseFloat(u))),++o,eR)).split(eR);return{values:n,split:s,indexes:r,types:i}}function TU(t){return xp(t).values}function PU(t){const{split:e,types:n}=xp(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const s=n[a];s===CU?o+=Dd(i[a]):s===AU?o+=un.transform(i[a]):o+=i[a]}return o}}const eZ=t=>typeof t=="number"?0:un.test(t)?un.getAnimatableNone(t):t;function tZ(t){const e=TU(t);return PU(t)(e.map(eZ))}const iu={test:YQ,parse:TU,createTransformer:PU,getAnimatableNone:tZ};function Yx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function nZ({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;i=Yx(u,s,t+1/3),o=Yx(u,s,t),a=Yx(u,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function wy(t,e){return n=>n>0?e:t}const zt=(t,e,n)=>t+(e-t)*n,Jx=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},rZ=[RS,Ju,Oc],iZ=t=>rZ.find(e=>e.test(t));function tR(t){const e=iZ(t);if(Ib(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let n=e.parse(t);return e===Oc&&(n=nZ(n)),n}const nR=(t,e)=>{const n=tR(t),r=tR(e);if(!n||!r)return wy(t,e);const i={...n};return o=>(i.red=Jx(n.red,r.red,o),i.green=Jx(n.green,r.green,o),i.blue=Jx(n.blue,r.blue,o),i.alpha=zt(n.alpha,r.alpha,o),Ju.transform(i))},NS=new Set(["none","hidden"]);function oZ(t,e){return NS.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function aZ(t,e){return n=>zt(t,e,n)}function jA(t){return typeof t=="number"?aZ:typeof t=="string"?DA(t)?wy:un.test(t)?nR:lZ:Array.isArray(t)?OU:typeof t=="object"?un.test(t)?nR:sZ:wy}function OU(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>jA(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function sZ(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=jA(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function uZ(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][r[o]],s=t.values[a]??0;n[i]=s,r[o]++}return n}const lZ=(t,e)=>{const n=iu.createTransformer(e),r=xp(t),i=xp(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?NS.has(t)&&!i.values.length||NS.has(e)&&!r.values.length?oZ(t,e):km(OU(uZ(r,i),i.values),n):(Ib(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),wy(t,e))};function kU(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?zt(t,e,n):jA(t)(t,e)}const cZ=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>$t.update(e,n),stop:()=>ru(e),now:()=>qn.isProcessing?qn.timestamp:br.now()}},IU=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},xy=2e4;function LA(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<xy;)e+=n,r=t.next(e);return e>=xy?1/0:e}function fZ(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(LA(r),xy);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:ki(i)}}const hZ=5;function RU(t,e,n){const r=Math.max(e-hZ,0);return cU(n-t(r),e-r)}const Ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qx=.001;function dZ({duration:t=Ut.duration,bounce:e=Ut.bounce,velocity:n=Ut.velocity,mass:r=Ut.mass}){let i,o;Ib(t<=Ko(Ut.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-e;a=na(Ut.minDamping,Ut.maxDamping,a),t=na(Ut.minDuration,Ut.maxDuration,ki(t)),a<1?(i=l=>{const c=l*a,f=c*t,h=c-n,d=DS(l,a),p=Math.exp(-f);return Qx-h/d*p},o=l=>{const f=l*a*t,h=f*n+n,d=Math.pow(a,2)*Math.pow(l,2)*t,p=Math.exp(-f),m=DS(Math.pow(l,2),a);return(-i(l)+Qx>0?-1:1)*((h-d)*p)/m}):(i=l=>{const c=Math.exp(-l*t),f=(l-n)*t+1;return-Qx+c*f},o=l=>{const c=Math.exp(-l*t),f=(n-l)*(t*t);return c*f});const s=5/t,u=mZ(i,o,s);if(t=Ko(t),isNaN(u))return{stiffness:Ut.stiffness,damping:Ut.damping,duration:t};{const l=Math.pow(u,2)*r;return{stiffness:l,damping:a*2*Math.sqrt(r*l),duration:t}}}const pZ=12;function mZ(t,e,n){let r=n;for(let i=1;i<pZ;i++)r=r-t(r)/e(r);return r}function DS(t,e){return t*Math.sqrt(1-e*e)}const vZ=["duration","bounce"],gZ=["stiffness","damping","mass"];function rR(t,e){return e.some(n=>t[n]!==void 0)}function yZ(t){let e={velocity:Ut.velocity,stiffness:Ut.stiffness,damping:Ut.damping,mass:Ut.mass,isResolvedFromDuration:!1,...t};if(!rR(t,gZ)&&rR(t,vZ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*na(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ut.mass,stiffness:i,damping:o}}else{const n=dZ(t);e={...e,...n,mass:Ut.mass},e.isResolvedFromDuration=!0}return e}function _y(t=Ut.visualDuration,e=Ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:u,damping:l,mass:c,duration:f,velocity:h,isResolvedFromDuration:d}=yZ({...n,velocity:-ki(n.velocity||0)}),p=h||0,m=l/(2*Math.sqrt(u*c)),v=a-o,g=ki(Math.sqrt(u/c)),y=Math.abs(v)<5;r||(r=y?Ut.restSpeed.granular:Ut.restSpeed.default),i||(i=y?Ut.restDelta.granular:Ut.restDelta.default);let b;if(m<1){const x=DS(g,m);b=S=>{const E=Math.exp(-m*g*S);return a-E*((p+m*g*v)/x*Math.sin(x*S)+v*Math.cos(x*S))}}else if(m===1)b=x=>a-Math.exp(-g*x)*(v+(p+g*v)*x);else{const x=g*Math.sqrt(m*m-1);b=S=>{const E=Math.exp(-m*g*S),C=Math.min(x*S,300);return a-E*((p+m*g*v)*Math.sinh(C)+x*v*Math.cosh(C))/x}}const _={calculatedDuration:d&&f||null,next:x=>{const S=b(x);if(d)s.done=x>=f;else{let E=x===0?p:0;m<1&&(E=x===0?Ko(p):RU(b,x,S));const C=Math.abs(E)<=r,A=Math.abs(a-S)<=i;s.done=C&&A}return s.value=s.done?a:S,s},toString:()=>{const x=Math.min(LA(_),xy),S=IU(E=>_.next(x*E).value,x,30);return x+"ms "+S},toTransition:()=>{}};return _}_y.applyToOptions=t=>{const e=fZ(t,100,_y);return t.ease=e.ease,t.duration=Ko(e.duration),t.type="keyframes",t};function MS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:u,restDelta:l=.5,restSpeed:c}){const f=t[0],h={done:!1,value:f},d=C=>s!==void 0&&C<s||u!==void 0&&C>u,p=C=>s===void 0?u:u===void 0||Math.abs(s-C)<Math.abs(u-C)?s:u;let m=n*e;const v=f+m,g=a===void 0?v:a(v);g!==v&&(m=g-f);const y=C=>-m*Math.exp(-C/r),b=C=>g+y(C),_=C=>{const A=y(C),T=b(C);h.done=Math.abs(A)<=l,h.value=h.done?g:T};let x,S;const E=C=>{d(h.value)&&(x=C,S=_y({keyframes:[h.value,p(h.value)],velocity:RU(b,C,h.value),damping:i,stiffness:o,restDelta:l,restSpeed:c}))};return E(0),{calculatedDuration:null,next:C=>{let A=!1;return!S&&x===void 0&&(A=!0,_(C),E(C)),x!==void 0&&C>=x?S.next(C-x):(!A&&_(C),h)}}}function bZ(t,e,n){const r=[],i=n||La.mix||kU,o=t.length-1;for(let a=0;a<o;a++){let s=i(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||Di:e;s=km(u,s)}r.push(s)}return r}function wZ(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(kf(o===e.length,"Both input and output ranges must be the same length","range-length"),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=bZ(e,r,i),u=s.length,l=c=>{if(a&&c<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const h=bp(t[f],t[f+1],c);return s[f](h)};return n?c=>l(na(t[0],t[o-1],c)):l}function xZ(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=bp(0,e,r);t.push(zt(n,1,i))}}function _Z(t){const e=[0];return xZ(e,t.length-1),e}function SZ(t,e){return t.map(n=>n*e)}function EZ(t,e){return t.map(()=>e||bU).splice(0,t.length-1)}function Md({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=$Q(r)?r.map(YI):YI(r),o={done:!1,value:e[0]},a=SZ(n&&n.length===e.length?n:_Z(e),t),s=wZ(a,e,{ease:Array.isArray(i)?i:EZ(e,i)});return{calculatedDuration:t,next:u=>(o.value=s(u),o.done=u>=t,o)}}const CZ=t=>t!==null;function FA(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(CZ),s=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!s||r===void 0?o[s]:r}const AZ={decay:MS,inertia:MS,tween:Md,keyframes:Md,spring:_y};function NU(t){typeof t.type=="string"&&(t.type=AZ[t.type])}class BA{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const TZ=t=>t/100;class UA extends BA{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==br.now()&&this.tick(br.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;NU(e);const{type:n=Md,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=e;let{keyframes:s}=e;const u=n||Md;u!==Md&&typeof s[0]!="number"&&(this.mixKeyframes=km(TZ,kU(s[0],s[1])),s=[0,100]);const l=u({...e,keyframes:s});o==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...s].reverse(),velocity:-a})),l.calculatedDuration===null&&(l.calculatedDuration=LA(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=l}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:s,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:l=0,keyframes:c,repeat:f,repeatType:h,repeatDelay:d,type:p,onUpdate:m,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let b=this.currentTime,_=r;if(f){const C=Math.min(this.currentTime,i)/s;let A=Math.floor(C),T=C%1;!T&&C>=1&&(T=1),T===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(h==="reverse"?(T=1-T,d&&(T-=d/s)):h==="mirror"&&(_=a)),b=na(0,1,T)*s}const x=y?{done:!1,value:c[0]}:_.next(b);o&&(x.value=o(x.value));let{done:S}=x;!y&&u!==null&&(S=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&p!==MS&&(x.value=FA(c,this.options,v,this.speed)),m&&m(x.value),E&&this.finish(),x}then(e,n){return this.finished.then(e,n)}get duration(){return ki(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ki(e)}get time(){return ki(this.currentTime)}set time(e){var n;e=Ko(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(br.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ki(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=cZ,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(br.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function PZ(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Qu=t=>t*180/Math.PI,$S=t=>{const e=Qu(Math.atan2(t[1],t[0]));return jS(e)},OZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:$S,rotateZ:$S,skewX:t=>Qu(Math.atan(t[1])),skewY:t=>Qu(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},jS=t=>(t=t%360,t<0&&(t+=360),t),iR=$S,oR=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),aR=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),kZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oR,scaleY:aR,scale:t=>(oR(t)+aR(t))/2,rotateX:t=>jS(Qu(Math.atan2(t[6],t[5]))),rotateY:t=>jS(Qu(Math.atan2(-t[2],t[0]))),rotateZ:iR,rotate:iR,skewX:t=>Qu(Math.atan(t[4])),skewY:t=>Qu(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function LS(t){return t.includes("scale")?1:0}function FS(t,e){if(!t||t==="none")return LS(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=kZ,i=n;else{const s=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=OZ,i=s}if(!i)return LS(e);const o=r[e],a=i[1].split(",").map(RZ);return typeof o=="function"?o(a):a[o]}const IZ=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return FS(n,e)};function RZ(t){return parseFloat(t.trim())}const dh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ph=new Set(dh),sR=t=>t===hh||t===_e,NZ=new Set(["x","y","z"]),DZ=dh.filter(t=>!NZ.has(t));function MZ(t){const e=[];return DZ.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ns={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>FS(e,"x"),y:(t,{transform:e})=>FS(e,"y")};Ns.translateX=Ns.x;Ns.translateY=Ns.y;const ml=new Set;let BS=!1,US=!1,VS=!1;function DU(){if(US){const t=Array.from(ml).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=MZ(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var s;(s=r.getValue(o))==null||s.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}US=!1,BS=!1,ml.forEach(t=>t.complete(VS)),ml.clear()}function MU(){ml.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(US=!0)})}function $Z(){VS=!0,MU(),DU(),VS=!1}class VA{constructor(e,n,r,i,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(ml.add(this),BS||(BS=!0,$t.read(MU),$t.resolveKeyframes(DU))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const s=r.readValue(n,a);s!=null&&(e[0]=s)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}PZ(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ml.delete(this)}cancel(){this.state==="scheduled"&&(ml.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const jZ=t=>t.startsWith("--");function LZ(t,e,n){jZ(e)?t.style.setProperty(e,n):t.style[e]=n}const FZ=kA(()=>window.ScrollTimeline!==void 0),BZ={};function UZ(t,e){const n=kA(t);return()=>BZ[e]??n()}const $U=UZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,uR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wd([0,.65,.55,1]),circOut:wd([.55,0,1,.45]),backIn:wd([.31,.01,.66,-.59]),backOut:wd([.33,1.53,.69,.99])};function jU(t,e){if(t)return typeof t=="function"?$U()?IU(t,e):"ease-out":wU(t)?wd(t):Array.isArray(t)?t.map(n=>jU(n,e)||uR.easeOut):uR[t]}function VZ(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeOut",times:u}={},l=void 0){const c={[e]:n};u&&(c.offset=u);const f=jU(s,i);Array.isArray(f)&&(c.easing=f);const h={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return l&&(h.pseudoElement=l),t.animate(c,h)}function LU(t){return typeof t=="function"&&"applyToOptions"in t}function WZ({type:t,...e}){return LU(t)&&$U()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class zZ extends BA{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:s,onComplete:u}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,kf(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const l=WZ(e);this.animation=VZ(n,r,i,l,o),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const c=FA(i,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(c):LZ(n,r,c),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return ki(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ki(e)}get time(){return ki(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ko(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&FZ()?(this.animation.timeline=e,Di):n(this)}}const FU={anticipate:vU,backInOut:mU,circInOut:yU};function HZ(t){return t in FU}function qZ(t){typeof t.ease=="string"&&HZ(t.ease)&&(t.ease=FU[t.ease])}const Zx=10;class GZ extends zZ{constructor(e){qZ(e),NU(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const s=new UA({...a,autoplay:!1}),u=Math.max(Zx,br.now()-this.startTime),l=na(0,Zx,u-Zx);n.setWithVelocity(s.sample(Math.max(0,u-l)).value,s.sample(u).value,l),s.stop()}}const lR=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(iu.test(t)||t==="0")&&!t.startsWith("url("));function KZ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function XZ(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=lR(i,e),s=lR(o,e);return Ib(a===s,`You are trying to animate ${e} from "${i}" to "${o}". "${a?o:i}" is not an animatable value.`,"value-not-animatable"),!a||!s?!1:KZ(t)||(n==="spring"||LU(n))&&r}function WS(t){t.duration=0,t.type="keyframes"}const YZ=new Set(["opacity","clipPath","filter","transform"]),JZ=kA(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function QZ(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:l}=e.owner.getProps();return JZ()&&n&&YZ.has(n)&&(n!=="transform"||!l)&&!u&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}const ZZ=40;class eee extends BA{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",keyframes:s,name:u,motionValue:l,element:c,...f}){var p;super(),this.stop=()=>{var m,v;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(v=this.keyframeResolver)==null||v.cancel()},this.createdAt=br.now();const h={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,name:u,motionValue:l,element:c,...f},d=(c==null?void 0:c.KeyframeResolver)||VA;this.keyframeResolver=new d(s,(m,v,g)=>this.onKeyframesResolved(m,v,h,!g),u,l,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,i){var v,g;this.keyframeResolver=void 0;const{name:o,type:a,velocity:s,delay:u,isHandoff:l,onUpdate:c}=r;this.resolvedAt=br.now(),XZ(e,o,a,s)||((La.instantAnimations||!u)&&(c==null||c(FA(e,r,n))),e[0]=e[e.length-1],WS(r),r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>ZZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},d=!l&&QZ(h),p=(g=(v=h.motionValue)==null?void 0:v.owner)==null?void 0:g.current,m=d?new GZ({...h,element:p}):new UA(h);m.finished.then(()=>{this.notifyFinished()}).catch(Di),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),$Z()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function BU(t,e,n,r=0,i=1){const o=Array.from(t).sort((l,c)=>l.sortNodePosition(c)).indexOf(e),a=t.size,s=(a-1)*r;return typeof n=="function"?n(o,a):i===1?o*r:s-o*r}const tee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function nee(t){const e=tee.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}const ree=4;function UU(t,e,n=1){kf(n<=ree,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,i]=nee(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return sU(a)?parseFloat(a):a}return DA(i)?UU(i,e,n+1):i}const iee={type:"spring",stiffness:500,damping:25,restSpeed:10},oee=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),aee={type:"keyframes",duration:.8},see={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uee=(t,{keyframes:e})=>e.length>2?aee:ph.has(t)?t.startsWith("scale")?oee(e[1]):iee:see,lee=t=>t!==null;function cee(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(lee),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}function WA(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}function fee({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:u,elapsed:l,...c}){return!!Object.keys(c).length}const zA=(t,e,n,r={},i,o)=>a=>{const s=WA(r,t)||{},u=s.delay||r.delay||0;let{elapsed:l=0}=r;l=l-Ko(u);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-l,onUpdate:h=>{e.set(h),s.onUpdate&&s.onUpdate(h)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:o?void 0:i};fee(s)||Object.assign(c,uee(t,c)),c.duration&&(c.duration=Ko(c.duration)),c.repeatDelay&&(c.repeatDelay=Ko(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(WS(c),c.delay===0&&(f=!0)),(La.instantAnimations||La.skipAnimations)&&(f=!0,WS(c),c.delay=0),c.allowFlatten=!s.type&&!s.ease,f&&!o&&e.get()!==void 0){const h=cee(c.keyframes,s);if(h!==void 0){$t.update(()=>{c.onUpdate(h),c.onComplete()});return}}return s.isSync?new UA(c):new eee(c)};function cR(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function HA(t,e,n,r){if(typeof e=="function"){const[i,o]=cR(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=cR(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function Kc(t,e,n){const r=t.getProps();return HA(r,e,n!==void 0?n:r.custom,t)}const VU=new Set(["width","height","top","left","right","bottom",...dh]),fR=30,hee=t=>!isNaN(parseFloat(t));class dee{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=br.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=br.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hee(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new IA);const r=this.events[e].add(n);return e==="change"?()=>{r(),$t.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=br.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,fR);return cU(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function If(t,e){return new dee(t,e)}const zS=t=>Array.isArray(t);function pee(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,If(n))}function mee(t){return zS(t)?t[t.length-1]||0:t}function vee(t,e){const n=Kc(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const s=mee(o[a]);pee(t,a,s)}}const hr=t=>!!(t&&t.getVelocity);function gee(t){return!!(hr(t)&&t.add)}function HS(t,e){const n=t.getValue("willChange");if(gee(n))return n.add(e);if(!n&&La.WillChange){const r=new La.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function qA(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const yee="framerAppearId",WU="data-"+qA(yee);function zU(t){return t.props[WU]}function bee({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function HU(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...s}=e;const u=o==null?void 0:o.reduceMotion;r&&(o=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const f in s){const h=t.getValue(f,t.latestValues[f]??null),d=s[f];if(d===void 0||c&&bee(c,f))continue;const p={delay:n,...WA(o||{},f)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(d)&&d===m&&!p.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const b=zU(t);if(b){const _=window.MotionHandoffAnimation(b,f,$t);_!==null&&(p.startTime=_,v=!0)}}HS(t,f);const g=u??t.shouldReduceMotion;h.start(zA(f,h,d,g&&VU.has(f)?{type:!1}:p,t,v));const y=h.animation;y&&l.push(y)}return a&&Promise.all(l).then(()=>{$t.update(()=>{a&&vee(t,a)})}),l}function qS(t,e,n={}){var u;const r=Kc(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(HU(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=i;return wee(t,e,l,c,f,h,n)}:()=>Promise.resolve(),{when:s}=i;if(s){const[l,c]=s==="beforeChildren"?[o,a]:[a,o];return l().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function wee(t,e,n=0,r=0,i=0,o=1,a){const s=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),s.push(qS(u,e,{...a,delay:n+(typeof r=="function"?0:r)+BU(t.variantChildren,u,r,i,o)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(s)}function xee(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>qS(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=qS(t,e,n);else{const i=typeof e=="function"?Kc(t,e,n.custom):e;r=Promise.all(HU(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const _ee={test:t=>t==="auto",parse:t=>t},qU=t=>e=>e.test(t),GU=[hh,_e,Xo,vs,KQ,GQ,_ee],hR=t=>GU.find(qU(t));function See(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lU(t):!0}const Eee=new Set(["brightness","contrast","saturate","opacity"]);function Cee(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(MA)||[];if(!r)return t;const i=n.replace(r,"");let o=Eee.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const Aee=/\b([a-z-]*)\(.*?\)/gu,GS={...iu,getAnimatableNone:t=>{const e=t.match(Aee);return e?e.map(Cee).join(" "):t}},dR={...hh,transform:Math.round},Tee={rotate:vs,rotateX:vs,rotateY:vs,rotateZ:vs,scale:Dv,scaleX:Dv,scaleY:Dv,scaleZ:Dv,skew:vs,skewX:vs,skewY:vs,distance:_e,translateX:_e,translateY:_e,translateZ:_e,x:_e,y:_e,z:_e,perspective:_e,transformPerspective:_e,opacity:wp,originX:ZI,originY:ZI,originZ:_e},GA={borderWidth:_e,borderTopWidth:_e,borderRightWidth:_e,borderBottomWidth:_e,borderLeftWidth:_e,borderRadius:_e,borderTopLeftRadius:_e,borderTopRightRadius:_e,borderBottomRightRadius:_e,borderBottomLeftRadius:_e,width:_e,maxWidth:_e,height:_e,maxHeight:_e,top:_e,right:_e,bottom:_e,left:_e,inset:_e,insetBlock:_e,insetBlockStart:_e,insetBlockEnd:_e,insetInline:_e,insetInlineStart:_e,insetInlineEnd:_e,padding:_e,paddingTop:_e,paddingRight:_e,paddingBottom:_e,paddingLeft:_e,paddingBlock:_e,paddingBlockStart:_e,paddingBlockEnd:_e,paddingInline:_e,paddingInlineStart:_e,paddingInlineEnd:_e,margin:_e,marginTop:_e,marginRight:_e,marginBottom:_e,marginLeft:_e,marginBlock:_e,marginBlockStart:_e,marginBlockEnd:_e,marginInline:_e,marginInlineStart:_e,marginInlineEnd:_e,fontSize:_e,backgroundPositionX:_e,backgroundPositionY:_e,...Tee,zIndex:dR,fillOpacity:wp,strokeOpacity:wp,numOctaves:dR},Pee={...GA,color:un,backgroundColor:un,outlineColor:un,fill:un,stroke:un,borderColor:un,borderTopColor:un,borderRightColor:un,borderBottomColor:un,borderLeftColor:un,filter:GS,WebkitFilter:GS},KU=t=>Pee[t];function XU(t,e){let n=KU(t);return n!==GS&&(n=iu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Oee=new Set(["auto","none","0"]);function kee(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!Oee.has(o)&&xp(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=XU(n,i)}class Iee extends VA{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),DA(f))){const h=UU(f,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!VU.has(r)||e.length!==2)return;const[i,o]=e,a=hR(i),s=hR(o),u=QI(i),l=QI(o);if(u!==l&&Ns[r]){this.needsMeasurement=!0;return}if(a!==s)if(sR(a)&&sR(s))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else Ns[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||See(e[i]))&&r.push(i);r.length&&kee(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ns[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var s;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Ns[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(s=this.removedTransforms)!=null&&s.length&&this.removedTransforms.forEach(([u,l])=>{e.getValue(u).set(l)}),this.resolveNoneKeyframes()}}function Ree(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){const i=document.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const YU=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function KS(t){return uU(t)&&"offsetHeight"in t}const{schedule:KA,cancel:$3e}=xU(queueMicrotask,!1),Yi={x:!1,y:!1};function JU(){return Yi.x||Yi.y}function Nee(t){return t==="x"||t==="y"?Yi[t]?null:(Yi[t]=!0,()=>{Yi[t]=!1}):Yi.x||Yi.y?null:(Yi.x=Yi.y=!0,()=>{Yi.x=Yi.y=!1})}function QU(t,e){const n=Ree(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function pR(t){return!(t.pointerType==="touch"||JU())}function Dee(t,e,n={}){const[r,i,o]=QU(t,n),a=s=>{if(!pR(s))return;const{target:u}=s,l=e(u,s);if(typeof l!="function"||!u)return;const c=f=>{pR(f)&&(l(f),u.removeEventListener("pointerleave",c))};u.addEventListener("pointerleave",c,i)};return r.forEach(s=>{s.addEventListener("pointerenter",a,i)}),o}const ZU=(t,e)=>e?t===e?!0:ZU(t,e.parentElement):!1,XA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Mee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function e5(t){return Mee.has(t.tagName)||t.isContentEditable===!0}const Mg=new WeakSet;function mR(t){return e=>{e.key==="Enter"&&t(e)}}function e1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $ee=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=mR(()=>{if(Mg.has(n))return;e1(n,"down");const i=mR(()=>{e1(n,"up")}),o=()=>e1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function vR(t){return XA(t)&&!JU()}function jee(t,e,n={}){const[r,i,o]=QU(t,n),a=s=>{const u=s.currentTarget;if(!vR(s))return;Mg.add(u);const l=e(u,s),c=(d,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Mg.has(u)&&Mg.delete(u),vR(d)&&typeof l=="function"&&l(d,{success:p})},f=d=>{c(d,u===window||u===document||n.useGlobalTarget||ZU(u,d.target))},h=d=>{c(d,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(s=>{(n.useGlobalTarget?window:s).addEventListener("pointerdown",a,i),KS(s)&&(s.addEventListener("focus",l=>$ee(l,i)),!e5(s)&&!s.hasAttribute("tabindex")&&(s.tabIndex=0))}),o}function t5(t){return uU(t)&&"ownerSVGElement"in t}function Lee(t){return t5(t)&&t.tagName==="svg"}const Fee=[...GU,un,iu],Bee=t=>Fee.find(qU(t)),gR=()=>({translate:0,scale:1,origin:0,originPoint:0}),kc=()=>({x:gR(),y:gR()}),yR=()=>({min:0,max:0}),wn=()=>({x:yR(),y:yR()}),XS={current:null},n5={current:!1},Uee=typeof window<"u";function Vee(){if(n5.current=!0,!!Uee)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>XS.current=t.matches;t.addEventListener("change",e),e()}else XS.current=!1}const Wee=new WeakMap;function Rb(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function _p(t){return typeof t=="string"||Array.isArray(t)}const YA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],JA=["initial",...YA];function Nb(t){return Rb(t.animate)||JA.some(e=>_p(t[e]))}function r5(t){return!!(Nb(t)||t.variants)}function zee(t,e,n){for(const r in e){const i=e[r],o=n[r];if(hr(i))t.addValue(r,i);else if(hr(o))t.addValue(r,If(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,If(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const bR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Sy={};function i5(t){Sy=t}function Hee(){return Sy}class qee{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=VA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=br.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,$t.render(this.render,!1,!0))};const{latestValues:u,renderState:l}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!o,this.isControllingVariants=Nb(n),this.isVariantNode=r5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const d=f[h];u[h]!==void 0&&hr(d)&&d.set(u[h])}}mount(e){var n;this.current=e,Wee.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(n5.current||Vee(),this.shouldReduceMotion=XS.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ru(this.notifyUpdate),ru(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ph.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&$t.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Sy){const n=Sy[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<bR.length;r++){const i=bR[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=zee(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=If(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(sU(r)||lU(r))?r=parseFloat(r):!Bee(r)&&iu.test(n)&&(r=XU(e,n)),this.setBaseTarget(e,hr(r)?r.get():r)),hr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=HA(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!hr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new IA),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){KA.render(this.render)}}class o5 extends qee{constructor(){super(...arguments),this.KeyframeResolver=Iee}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class hu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function a5({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Gee({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Kee(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function t1(t){return t===void 0||t===1}function YS({scale:t,scaleX:e,scaleY:n}){return!t1(t)||!t1(e)||!t1(n)}function $u(t){return YS(t)||s5(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function s5(t){return wR(t.x)||wR(t.y)}function wR(t){return t&&t!=="0%"}function Ey(t,e,n){const r=t-n,i=e*r;return n+i}function xR(t,e,n,r,i){return i!==void 0&&(t=Ey(t,i,r)),Ey(t,n,r)+e}function JS(t,e=0,n=1,r,i){t.min=xR(t.min,e,n,r,i),t.max=xR(t.max,e,n,r,i)}function u5(t,{x:e,y:n}){JS(t.x,e.translate,e.scale,e.originPoint),JS(t.y,n.translate,n.scale,n.originPoint)}const _R=.999999999999,SR=1.0000000000001;function Xee(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Rc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,u5(t,a)),r&&$u(o.latestValues)&&Rc(t,o.latestValues))}e.x<SR&&e.x>_R&&(e.x=1),e.y<SR&&e.y>_R&&(e.y=1)}function Ic(t,e){t.min=t.min+e,t.max=t.max+e}function ER(t,e,n,r,i=.5){const o=zt(t.min,t.max,i);JS(t,e,n,o,r)}function Rc(t,e){ER(t.x,e.x,e.scaleX,e.scale,e.originX),ER(t.y,e.y,e.scaleY,e.scale,e.originY)}function l5(t,e){return a5(Kee(t.getBoundingClientRect(),e))}function Yee(t,e,n){const r=l5(t,n),{scroll:i}=e;return i&&(Ic(r.x,i.offset.x),Ic(r.y,i.offset.y)),r}const Jee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Qee=dh.length;function Zee(t,e,n){let r="",i=!0;for(let o=0;o<Qee;o++){const a=dh[o],s=t[a];if(s===void 0)continue;let u=!0;if(typeof s=="number")u=s===(a.startsWith("scale")?1:0);else{const l=parseFloat(s);u=a.startsWith("scale")?l===1:l===0}if(!u||n){const l=YU(s,GA[a]);if(!u){i=!1;const c=Jee[a]||a;r+=`${c}(${l}) `}n&&(e[a]=l)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function QA(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,s=!1;for(const u in e){const l=e[u];if(ph.has(u)){a=!0;continue}else if(SU(u)){i[u]=l;continue}else{const c=YU(l,GA[u]);u.startsWith("origin")?(s=!0,o[u]=c):r[u]=c}}if(e.transform||(a||n?r.transform=Zee(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:u="50%",originY:l="50%",originZ:c=0}=o;r.transformOrigin=`${u} ${l} ${c}`}}function c5(t,{style:e,vars:n},r,i){const o=t.style;let a;for(a in e)o[a]=e[a];i==null||i.applyProjectionStyles(o,r);for(a in n)o.setProperty(a,n[a])}function CR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ed={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(_e.test(t))t=parseFloat(t);else return t;const n=CR(t,e.target.x),r=CR(t,e.target.y);return`${n}% ${r}%`}},ete={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=iu.parse(t);if(i.length>5)return r;const o=iu.createTransformer(t),a=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,u=n.y.scale*e.y;i[0+a]/=s,i[1+a]/=u;const l=zt(s,u,.5);return typeof i[2+a]=="number"&&(i[2+a]/=l),typeof i[3+a]=="number"&&(i[3+a]/=l),o(i)}},QS={borderRadius:{...ed,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ed,borderTopRightRadius:ed,borderBottomLeftRadius:ed,borderBottomRightRadius:ed,boxShadow:ete};function f5(t,{layout:e,layoutId:n}){return ph.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!QS[t]||t==="opacity")}function ZA(t,e,n){var a;const r=t.style,i=e==null?void 0:e.style,o={};if(!r)return o;for(const s in r)(hr(r[s])||i&&hr(i[s])||f5(s,t)||((a=n==null?void 0:n.getValue(s))==null?void 0:a.liveStyle)!==void 0)&&(o[s]=r[s]);return o}function tte(t){return window.getComputedStyle(t)}class nte extends o5{constructor(){super(...arguments),this.type="html",this.renderInstance=c5}readValueFromInstance(e,n){var r;if(ph.has(n))return(r=this.projection)!=null&&r.isProjecting?LS(n):IZ(e,n);{const i=tte(e),o=(SU(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return l5(e,n)}build(e,n,r){QA(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ZA(e,n,r)}}const rte={offset:"stroke-dashoffset",array:"stroke-dasharray"},ite={offset:"strokeDashoffset",array:"strokeDasharray"};function ote(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?rte:ite;t[o.offset]=`${-r}`,t[o.array]=`${e} ${n}`}const ate=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function h5(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:a=0,...s},u,l,c){if(QA(t,s,l),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h}=t;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox);for(const d of ate)f[d]!==void 0&&(h[d]=f[d],delete f[d]);e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&ote(f,i,o,a,!1)}const d5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),p5=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ste(t,e,n,r){c5(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(d5.has(i)?i:qA(i),e.attrs[i])}function m5(t,e,n){const r=ZA(t,e,n);for(const i in t)if(hr(t[i])||hr(e[i])){const o=dh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}class ute extends o5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ph.has(n)){const r=KU(n);return r&&r.default||0}return n=d5.has(n)?n:qA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return m5(e,n,r)}build(e,n,r){h5(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){ste(e,n,r,i)}mount(e){this.isSVGTag=p5(e.tagName),super.mount(e)}}const lte=JA.length;function v5(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?v5(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lte;n++){const r=JA[n],i=t.props[r];(_p(i)||i===!1)&&(e[r]=i)}return e}function g5(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const cte=[...YA].reverse(),fte=YA.length;function hte(t){return e=>Promise.all(e.map(({animation:n,options:r})=>xee(t,n,r)))}function dte(t){let e=hte(t),n=AR(),r=!0;const i=u=>(l,c)=>{var h;const f=Kc(t,c,u==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:d,transitionEnd:p,...m}=f;l={...l,...m,...p}}return l};function o(u){e=u(t)}function a(u){const{props:l}=t,c=v5(t.parent)||{},f=[],h=new Set;let d={},p=1/0;for(let v=0;v<fte;v++){const g=cte[v],y=n[g],b=l[g]!==void 0?l[g]:c[g],_=_p(b),x=g===u?y.isActive:null;x===!1&&(p=v);let S=b===c[g]&&b!==l[g]&&_;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...d},!y.isActive&&x===null||!b&&!y.prevProp||Rb(b)||typeof b=="boolean")continue;const E=pte(y.prevProp,b);let C=E||g===u&&y.isActive&&!S&&_||v>p&&_,A=!1;const T=Array.isArray(b)?b:[b];let P=T.reduce(i(g),{});x===!1&&(P={});const{prevResolvedValues:k={}}=y,I={...k,...P},$=U=>{C=!0,h.has(U)&&(A=!0,h.delete(U)),y.needsAnimating[U]=!0;const M=t.getValue(U);M&&(M.liveStyle=!1)};for(const U in I){const M=P[U],F=k[U];if(d.hasOwnProperty(U))continue;let H=!1;zS(M)&&zS(F)?H=!g5(M,F):H=M!==F,H?M!=null?$(U):h.add(U):M!==void 0&&h.has(U)?$(U):y.protectedKeys[U]=!0}y.prevProp=b,y.prevResolvedValues=P,y.isActive&&(d={...d,...P}),r&&t.blockInitialAnimation&&(C=!1);const B=S&&E;C&&(!B||A)&&f.push(...T.map(U=>{const M={type:g};if(typeof U=="string"&&r&&!B&&t.manuallyAnimateOnMount&&t.parent){const{parent:F}=t,H=Kc(F,U);if(F.enteringChildren&&H){const{delayChildren:X}=H.transition||{};M.delay=BU(F.enteringChildren,t,X)}}return{animation:U,options:M}}))}if(h.size){const v={};if(typeof l.initial!="boolean"){const g=Kc(t,Array.isArray(l.initial)?l.initial[0]:l.initial);g&&g.transition&&(v.transition=g.transition)}h.forEach(g=>{const y=t.getBaseTarget(g),b=t.getValue(g);b&&(b.liveStyle=!0),v[g]=y??null}),f.push({animation:v})}let m=!!f.length;return r&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function s(u,l){var f;if(n[u].isActive===l)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(h=>{var d;return(d=h.animationState)==null?void 0:d.setActive(u,l)}),n[u].isActive=l;const c=a(u);for(const h in n)n[h].protectedKeys={};return c}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>n,reset:()=>{n=AR()}}}function pte(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!g5(e,t):!1}function Tu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function AR(){return{animate:Tu(!0),whileInView:Tu(),whileHover:Tu(),whileTap:Tu(),whileDrag:Tu(),whileFocus:Tu(),exit:Tu()}}function TR(t,e){t.min=e.min,t.max=e.max}function Gi(t,e){TR(t.x,e.x),TR(t.y,e.y)}function PR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const y5=1e-4,mte=1-y5,vte=1+y5,b5=.01,gte=0-b5,yte=0+b5;function wr(t){return t.max-t.min}function bte(t,e,n){return Math.abs(t-e)<=n}function OR(t,e,n,r=.5){t.origin=r,t.originPoint=zt(e.min,e.max,t.origin),t.scale=wr(n)/wr(e),t.translate=zt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=mte&&t.scale<=vte||isNaN(t.scale))&&(t.scale=1),(t.translate>=gte&&t.translate<=yte||isNaN(t.translate))&&(t.translate=0)}function $d(t,e,n,r){OR(t.x,e.x,n.x,r?r.originX:void 0),OR(t.y,e.y,n.y,r?r.originY:void 0)}function kR(t,e,n){t.min=n.min+e.min,t.max=t.min+wr(e)}function wte(t,e,n){kR(t.x,e.x,n.x),kR(t.y,e.y,n.y)}function IR(t,e,n){t.min=e.min-n.min,t.max=t.min+wr(e)}function Cy(t,e,n){IR(t.x,e.x,n.x),IR(t.y,e.y,n.y)}function RR(t,e,n,r,i){return t-=e,t=Ey(t,1/n,r),i!==void 0&&(t=Ey(t,1/i,r)),t}function xte(t,e=0,n=1,r=.5,i,o=t,a=t){if(Xo.test(e)&&(e=parseFloat(e),e=zt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let s=zt(o.min,o.max,r);t===o&&(s-=e),t.min=RR(t.min,e,n,s,i),t.max=RR(t.max,e,n,s,i)}function NR(t,e,[n,r,i],o,a){xte(t,e[n],e[r],e[i],e.scale,o,a)}const _te=["x","scaleX","originX"],Ste=["y","scaleY","originY"];function DR(t,e,n,r){NR(t.x,e,_te,n?n.x:void 0,r?r.x:void 0),NR(t.y,e,Ste,n?n.y:void 0,r?r.y:void 0)}function MR(t){return t.translate===0&&t.scale===1}function w5(t){return MR(t.x)&&MR(t.y)}function $R(t,e){return t.min===e.min&&t.max===e.max}function Ete(t,e){return $R(t.x,e.x)&&$R(t.y,e.y)}function jR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function x5(t,e){return jR(t.x,e.x)&&jR(t.y,e.y)}function LR(t){return wr(t.x)/wr(t.y)}function FR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function xi(t){return[t("x"),t("y")]}function Cte(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:l,rotate:c,rotateX:f,rotateY:h,skewX:d,skewY:p}=n;l&&(r=`perspective(${l}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),d&&(r+=`skewX(${d}deg) `),p&&(r+=`skewY(${p}deg) `)}const s=t.x.scale*e.x,u=t.y.scale*e.y;return(s!==1||u!==1)&&(r+=`scale(${s}, ${u})`),r||"none"}const _5=["TopLeft","TopRight","BottomLeft","BottomRight"],Ate=_5.length,BR=t=>typeof t=="string"?parseFloat(t):t,UR=t=>typeof t=="number"||_e.test(t);function Tte(t,e,n,r,i,o){i?(t.opacity=zt(0,n.opacity??1,Pte(r)),t.opacityExit=zt(e.opacity??1,0,Ote(r))):o&&(t.opacity=zt(e.opacity??1,n.opacity??1,r));for(let a=0;a<Ate;a++){const s=`border${_5[a]}Radius`;let u=VR(e,s),l=VR(n,s);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||UR(u)===UR(l)?(t[s]=Math.max(zt(BR(u),BR(l),r),0),(Xo.test(l)||Xo.test(u))&&(t[s]+="%")):t[s]=l}(e.rotate||n.rotate)&&(t.rotate=zt(e.rotate||0,n.rotate||0,r))}function VR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Pte=S5(0,.5,gU),Ote=S5(.5,.95,Di);function S5(t,e,n){return r=>r<t?0:r>e?1:n(bp(t,e,r))}function kte(t,e,n){const r=hr(t)?t:If(t);return r.start(zA("",r,e,n)),r.animation}function Sp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Ite=(t,e)=>t.depth-e.depth;class Rte{constructor(){this.children=[],this.isDirty=!1}add(e){PA(this.children,e),this.isDirty=!0}remove(e){OA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ite),this.isDirty=!1,this.children.forEach(e)}}function Nte(t,e){const n=br.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(ru(r),t(o-e))};return $t.setup(r,!0),()=>ru(r)}function $g(t){return hr(t)?t.get():t}class Dte{constructor(){this.members=[]}add(e){PA(this.members,e),e.scheduleRender()}remove(e){if(OA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,o=e.options.layoutDependency;i!==void 0&&o!==void 0&&i===o||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const jg={hasAnimatedSinceResize:!0,hasEverUpdated:!1},n1=["","X","Y","Z"],Mte=1e3;let $te=0;function r1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function E5(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=zU(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",$t,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&E5(r)}function C5({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=e==null?void 0:e()){this.id=$te++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Fte),this.nodes.forEach(Wte),this.nodes.forEach(zte),this.nodes.forEach(Bte)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Rte)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new IA),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const u=this.eventHandlers.get(a);u&&u.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=t5(a)&&!Lee(a),this.instance=a;const{layoutId:s,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||s)&&(this.isLayoutDirty=!0),t){let c,f=0;const h=()=>this.root.updateBlockedByResize=!1;$t.read(()=>{f=window.innerWidth}),t(a,()=>{const d=window.innerWidth;d!==f&&(f=d,this.root.updateBlockedByResize=!0,c&&c(),c=Nte(h,250),jg.hasAnimatedSinceResize&&(jg.hasAnimatedSinceResize=!1,this.nodes.forEach(HR)))})}s&&this.root.registerSharedNode(s,this),this.options.animate!==!1&&l&&(s||u)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||l.getDefaultTransition()||Xte,{onLayoutAnimationStart:m,onLayoutAnimationComplete:v}=l.getProps(),g=!this.targetLayout||!x5(this.targetLayout,d),y=!f&&h;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...WA(p,"layout"),onPlay:m,onComplete:v};(l.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(c,y)}else f||HR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ru(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hte),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&E5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:u}=this.options;if(s===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(zR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Vte),this.nodes.forEach(jte),this.nodes.forEach(Lte)):this.nodes.forEach(zR),this.clearAllSnapshots();const s=br.now();qn.delta=na(0,1e3/60,s-qn.timestamp),qn.timestamp=s,qn.isProcessing=!0,Kx.update.process(qn),Kx.preRender.process(qn),Kx.render.process(qn),qn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,KA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ute),this.sharedNodes.forEach(qte)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wr(this.snapshot.measuredBox.x)&&!wr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!w5(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;a&&this.instance&&(s||$u(this.latestValues)||c)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let u=this.removeElementScroll(s);return a&&(u=this.removeTransform(u)),Yte(u),{animationId:this.root.animationId,measuredBox:s,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:a}=this.options;if(!a)return wn();const s=a.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(Jte))){const{scroll:c}=this.root;c&&(Ic(s.x,c.offset.x),Ic(s.y,c.offset.y))}return s}removeElementScroll(a){var u;const s=wn();if(Gi(s,a),(u=this.scroll)!=null&&u.wasRoot)return s;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Gi(s,a),Ic(s.x,f.offset.x),Ic(s.y,f.offset.y))}return s}applyTransform(a,s=!1){const u=wn();Gi(u,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];!s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Rc(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),$u(c.latestValues)&&Rc(u,c.latestValues)}return $u(this.latestValues)&&Rc(u,this.latestValues),u}removeTransform(a){const s=wn();Gi(s,a);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!$u(l.latestValues))continue;YS(l.latestValues)&&l.updateSnapshot();const c=wn(),f=l.measurePageBox();Gi(c,f),DR(s,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return $u(this.latestValues)&&DR(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var d;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==s;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!this.layout||!(c||f))return;this.resolvedRelativeTargetAt=qn.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wte(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gi(this.target,this.layout.layoutBox),u5(this.target,this.targetDelta)):Gi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||YS(this.parent.latestValues)||s5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,s,u){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Cy(this.relativeTargetOrigin,s,u),Gi(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var p;const a=this.getLead(),s=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(u=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===qn.timestamp&&(u=!1),u)return;const{layout:l,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||c))return;Gi(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;Xee(this.layoutCorrected,this.treeScale,this.path,s),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wn());const{target:d}=a;if(!d){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(PR(this.prevProjectionDelta.x,this.projectionDelta.x),PR(this.prevProjectionDelta.y,this.projectionDelta.y)),$d(this.projectionDelta,this.layoutCorrected,d,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!FR(this.projectionDelta.x,this.prevProjectionDelta.x)||!FR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)==null||s.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=kc(),this.projectionDelta=kc(),this.projectionDeltaWithTransform=kc()}setAnimationOrigin(a,s=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},f=kc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=wn(),d=u?u.source:void 0,p=this.layout?this.layout.source:void 0,m=d!==p,v=this.getStack(),g=!v||v.members.length<=1,y=!!(m&&!g&&this.options.crossfade===!0&&!this.path.some(Kte));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const x=_/1e3;qR(f.x,a.x,x),qR(f.y,a.y,x),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gte(this.relativeTarget,this.relativeTargetOrigin,h,x),b&&Ete(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=wn()),Gi(b,this.relativeTarget)),m&&(this.animationValues=c,Tte(c,l,this.latestValues,x,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var s,u,l;this.notifyListeners("animationStart"),(s=this.currentAnimation)==null||s.stop(),(l=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||l.stop(),this.pendingAnimation&&(ru(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$t.update(()=>{jg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=If(0)),this.currentAnimation=kte(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Mte),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:u,layout:l,latestValues:c}=a;if(!(!s||!u||!l)){if(this!==a&&this.layout&&l&&A5(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||wn();const f=wr(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+f;const h=wr(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+h}Gi(s,u),Rc(s,c),$d(this.projectionDeltaWithTransform,this.layoutCorrected,s,c)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Dte),this.sharedNodes.get(a).add(s);const l=s.options.initialPromotionConfig;s.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())==null?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())==null?void 0:s.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(s=!0),!s)return;const l={};u.z&&r1("z",a,l,this.animationValues);for(let c=0;c<n1.length;c++)r1(`rotate${n1[c]}`,a,l,this.animationValues),r1(`skew${n1[c]}`,a,l,this.animationValues);a.render();for(const c in l)a.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);a.scheduleRender()}applyProjectionStyles(a,s){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=$g(s==null?void 0:s.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=$g(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!$u(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const c=l.animationValues||l.latestValues;this.applyTransformsToTarget();let f=Cte(this.projectionDeltaWithTransform,this.treeScale,c);u&&(f=u(c,f)),a.transform=f;const{x:h,y:d}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,l.animationValues?a.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:a.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in QS){if(c[p]===void 0)continue;const{correct:m,applyTo:v,isCSSVariable:g}=QS[p],y=f==="none"?c[p]:m(c[p],l);if(v){const b=v.length;for(let _=0;_<b;_++)a[v[_]]=y}else g?this.options.visualElement.renderState.vars[p]=y:a[p]=y}this.options.layoutId&&(a.pointerEvents=l===this?$g(s==null?void 0:s.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)==null?void 0:s.stop()}),this.root.nodes.forEach(WR),this.root.sharedNodes.clear()}}}function jte(t){t.updateLayout()}function Lte(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=e.source!==t.layout.source;o==="size"?xi(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],d=wr(h);h.min=r[f].min,h.max=h.min+d}):A5(o,e.layoutBox,r)&&xi(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],d=wr(r[f]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+d)});const s=kc();$d(s,r,e.layoutBox);const u=kc();a?$d(u,t.applyTransform(i,!0),e.measuredBox):$d(u,r,e.layoutBox);const l=!w5(s);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:d}=f;if(h&&d){const p=wn();Cy(p,e.layoutBox,h.layoutBox);const m=wn();Cy(m,r,d.layoutBox),x5(p,m)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Fte(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Bte(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Ute(t){t.clearSnapshot()}function WR(t){t.clearMeasurements()}function zR(t){t.isLayoutDirty=!1}function Vte(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function HR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Wte(t){t.resolveTargetDelta()}function zte(t){t.calcProjection()}function Hte(t){t.resetSkewAndRotation()}function qte(t){t.removeLeadSnapshot()}function qR(t,e,n){t.translate=zt(e.translate,0,n),t.scale=zt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function GR(t,e,n,r){t.min=zt(e.min,n.min,r),t.max=zt(e.max,n.max,r)}function Gte(t,e,n,r){GR(t.x,e.x,n.x,r),GR(t.y,e.y,n.y,r)}function Kte(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Xte={duration:.45,ease:[.4,0,.1,1]},KR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),XR=KR("applewebkit/")&&!KR("chrome/")?Math.round:Di;function YR(t){t.min=XR(t.min),t.max=XR(t.max)}function Yte(t){YR(t.x),YR(t.y)}function A5(t,e,n){return t==="position"||t==="preserve-aspect"&&!bte(LR(e),LR(n),.2)}function Jte(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Qte=C5({attachResizeListener:(t,e)=>Sp(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),i1={current:void 0},T5=C5({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!i1.current){const t=new Qte({});t.mount(window),t.setOptions({layoutScroll:!0}),i1.current=t}return i1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),eT=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function JR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Zte(...t){return e=>{let n=!1;const r=t.map(i=>{const o=JR(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():JR(t[i],null)}}}}function ene(...t){return R.useCallback(Zte(...t),t)}class tne extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=KS(r)&&r.offsetWidth||0,o=KS(r)&&r.offsetHeight||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left,a.bottom=o-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function nne({children:t,isPresent:e,anchorX:n,anchorY:r,root:i}){var f;const o=R.useId(),a=R.useRef(null),s=R.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=R.useContext(eT),l=((f=t.props)==null?void 0:f.ref)??(t==null?void 0:t.ref),c=ene(a,l);return R.useInsertionEffect(()=>{const{width:h,height:d,top:p,left:m,right:v,bottom:g}=s.current;if(e||!a.current||!h||!d)return;const y=n==="left"?`left: ${m}`:`right: ${v}`,b=r==="bottom"?`bottom: ${g}`:`top: ${p}`;a.current.dataset.motionPopId=o;const _=document.createElement("style");u&&(_.nonce=u);const x=i??document.head;return x.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${d}px !important;
            ${y}px !important;
            ${b}px !important;
          }
        `),()=>{x.contains(_)&&x.removeChild(_)}},[e]),D.jsx(tne,{isPresent:e,childRef:a,sizeRef:s,children:R.cloneElement(t,{ref:c})})}const rne=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:s,anchorY:u,root:l})=>{const c=TA(ine),f=R.useId();let h=!0,d=R.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:p=>{c.set(p,!0);for(const m of c.values())if(!m)return;r&&r()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,r]);return o&&h&&(d={...d}),R.useMemo(()=>{c.forEach((p,m)=>c.set(m,!1))},[n]),R.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),a==="popLayout"&&(t=D.jsx(nne,{isPresent:n,anchorX:s,anchorY:u,root:l,children:t})),D.jsx(kb.Provider,{value:d,children:t})};function ine(){return new Map}function P5(t=!0){const e=R.useContext(kb);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=R.useId();R.useEffect(()=>{if(t)return i(o)},[t]);const a=R.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,a]:[!0]}const Mv=t=>t.key||"";function QR(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const mh=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:s="left",anchorY:u="top",root:l})=>{const[c,f]=P5(a),h=R.useMemo(()=>QR(t),[t]),d=a&&!c?[]:h.map(Mv),p=R.useRef(!0),m=R.useRef(h),v=TA(()=>new Map),g=R.useRef(new Set),[y,b]=R.useState(h),[_,x]=R.useState(h);aU(()=>{p.current=!1,m.current=h;for(let C=0;C<_.length;C++){const A=Mv(_[C]);d.includes(A)?(v.delete(A),g.current.delete(A)):v.get(A)!==!0&&v.set(A,!1)}},[_,d.length,d.join("-")]);const S=[];if(h!==y){let C=[...h];for(let A=0;A<_.length;A++){const T=_[A],P=Mv(T);d.includes(P)||(C.splice(A,0,T),S.push(T))}return o==="wait"&&S.length&&(C=S),x(QR(C)),b(h),null}const{forceRender:E}=R.useContext(AA);return D.jsx(D.Fragment,{children:_.map(C=>{const A=Mv(C),T=a&&!c?!1:h===_||d.includes(A),P=()=>{if(g.current.has(A))return;if(g.current.add(A),v.has(A))v.set(A,!0);else return;let k=!0;v.forEach(I=>{I||(k=!1)}),k&&(E==null||E(),x(m.current),a&&(f==null||f()),r&&r())};return D.jsx(rne,{isPresent:T,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:l,onExitComplete:T?void 0:P,anchorX:s,anchorY:u,children:C},A)})})},O5=R.createContext({strict:!1}),ZR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let eN=!1;function one(){if(eN)return;const t={};for(const e in ZR)t[e]={isEnabled:n=>ZR[e].some(r=>!!n[r])};i5(t),eN=!0}function k5(){return one(),Hee()}function ane(t){const e=k5();for(const n in t)e[n]={...e[n],...t[n]};i5(e)}const sne=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ay(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||sne.has(t)}let I5=t=>!Ay(t);function une(t){typeof t=="function"&&(I5=e=>e.startsWith("on")?!Ay(e):t(e))}try{une(require("@emotion/is-prop-valid").default)}catch{}function lne(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(I5(i)||n===!0&&Ay(i)||!e&&!Ay(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Db=R.createContext({});function cne(t,e){if(Nb(t)){const{initial:n,animate:r}=t;return{initial:n===!1||_p(n)?n:void 0,animate:_p(r)?r:void 0}}return t.inherit!==!1?e:{}}function fne(t){const{initial:e,animate:n}=cne(t,R.useContext(Db));return R.useMemo(()=>({initial:e,animate:n}),[tN(e),tN(n)])}function tN(t){return Array.isArray(t)?t.join(" "):t}const tT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function R5(t,e,n){for(const r in e)!hr(e[r])&&!f5(r,n)&&(t[r]=e[r])}function hne({transformTemplate:t},e){return R.useMemo(()=>{const n=tT();return QA(n,e,t),Object.assign({},n.vars,n.style)},[e])}function dne(t,e){const n=t.style||{},r={};return R5(r,n,t),Object.assign(r,hne(t,e)),r}function pne(t,e){const n={},r=dne(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const N5=()=>({...tT(),attrs:{}});function mne(t,e,n,r){const i=R.useMemo(()=>{const o=N5();return h5(o,e,p5(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};R5(o,t.style,t),i.style={...o,...i.style}}return i}const vne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nT(t){return typeof t!="string"||t.includes("-")?!1:!!(vne.indexOf(t)>-1||/[A-Z]/u.test(t))}function gne(t,e,n,{latestValues:r},i,o=!1,a){const u=(a??nT(t)?mne:pne)(e,r,i,t),l=lne(e,typeof t=="string",o),c=t!==R.Fragment?{...l,...u,ref:n}:{},{children:f}=e,h=R.useMemo(()=>hr(f)?f.get():f,[f]);return R.createElement(t,{...c,children:h})}function yne({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:bne(n,r,i,t),renderState:e()}}function bne(t,e,n,r){const i={},o=r(t,{});for(const h in o)i[h]=$g(o[h]);let{initial:a,animate:s}=t;const u=Nb(t),l=r5(t);e&&l&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),s===void 0&&(s=e.animate));let c=n?n.initial===!1:!1;c=c||a===!1;const f=c?s:a;if(f&&typeof f!="boolean"&&!Rb(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const p=HA(t,h[d]);if(p){const{transitionEnd:m,transition:v,...g}=p;for(const y in g){let b=g[y];if(Array.isArray(b)){const _=c?b.length-1:0;b=b[_]}b!==null&&(i[y]=b)}for(const y in m)i[y]=m[y]}}}return i}const D5=t=>(e,n)=>{const r=R.useContext(Db),i=R.useContext(kb),o=()=>yne(t,e,r,i);return n?o():TA(o)},wne=D5({scrapeMotionValuesFromProps:ZA,createRenderState:tT}),xne=D5({scrapeMotionValuesFromProps:m5,createRenderState:N5}),_ne=Symbol.for("motionComponentSymbol");function Sne(t,e,n){const r=R.useRef(n);R.useInsertionEffect(()=>{r.current=n});const i=R.useRef(null);return R.useCallback(o=>{var s;o&&((s=t.onMount)==null||s.call(t,o)),e&&(o?e.mount(o):e.unmount());const a=r.current;if(typeof a=="function")if(o){const u=a(o);typeof u=="function"&&(i.current=u)}else i.current?(i.current(),i.current=null):a(o);else a&&(a.current=o)},[e])}const M5=R.createContext({});function xd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ene(t,e,n,r,i,o){var g,y;const{visualElement:a}=R.useContext(Db),s=R.useContext(O5),u=R.useContext(kb),l=R.useContext(eT).reducedMotion,c=R.useRef(null),f=R.useRef(!1);r=r||s.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:l,isSVG:o}),f.current&&c.current&&(c.current.manuallyAnimateOnMount=!0));const h=c.current,d=R.useContext(M5);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Cne(c.current,n,i,d);const p=R.useRef(!1);R.useInsertionEffect(()=>{h&&p.current&&h.update(n,u)});const m=n[WU],v=R.useRef(!!m&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,m))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,m)));return aU(()=>{f.current=!0,h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),v.current&&h.animationState&&h.animationState.animateChanges())}),R.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,m)}),v.current=!1),h.enteringChildren=void 0)}),h}function Cne(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:u,layoutRoot:l,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$5(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||s&&xd(s),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:u,layoutRoot:l})}function $5(t){if(t)return t.options.allowProjection!==!1?t.projection:$5(t.parent)}function o1(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&ane(r);const o=n?n==="svg":nT(t),a=o?xne:wne;function s(l,c){let f;const h={...R.useContext(eT),...l,layoutId:Ane(l)},{isStatic:d}=h,p=fne(l),m=a(l,d);if(!d&&oU){Tne();const v=Pne(h);f=v.MeasureLayout,p.visualElement=Ene(t,m,h,i,v.ProjectionNode,o)}return D.jsxs(Db.Provider,{value:p,children:[f&&p.visualElement?D.jsx(f,{visualElement:p.visualElement,...h}):null,gne(t,l,Sne(m,p.visualElement,c),m,d,e,o)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=R.forwardRef(s);return u[_ne]=t,u}function Ane({layoutId:t}){const e=R.useContext(AA).id;return e&&t!==void 0?e+"-"+t:t}function Tne(t,e){R.useContext(O5).strict}function Pne(t){const e=k5(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function One(t,e){if(typeof Proxy>"u")return o1;const n=new Map,r=(o,a)=>o1(o,a,t,e),i=(o,a)=>r(o,a);return new Proxy(i,{get:(o,a)=>a==="create"?r:(n.has(a)||n.set(a,o1(a,void 0,t,e)),n.get(a))})}const kne=(t,e)=>e.isSVG??nT(t)?new ute(e):new nte(e,{allowProjection:t!==R.Fragment});class Ine extends hu{constructor(e){super(e),e.animationState||(e.animationState=dte(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rb(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Rne=0;class Nne extends hu{constructor(){super(...arguments),this.id=Rne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Dne={animation:{Feature:Ine},exit:{Feature:Nne}};function Nm(t){return{point:{x:t.pageX,y:t.pageY}}}const Mne=t=>e=>XA(e)&&t(e,Nm(e));function jd(t,e,n,r){return Sp(t,e,Mne(n),r)}const j5=({current:t})=>t?t.ownerDocument.defaultView:null,nN=(t,e)=>Math.abs(t-e);function $ne(t,e){const n=nN(t.x,e.x),r=nN(t.y,e.y);return Math.sqrt(n**2+r**2)}const rN=new Set(["auto","scroll"]);class L5{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3,element:s}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=d=>{this.handleScroll(d.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=s1(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=$ne(d.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:v}=d,{timestamp:g}=qn;this.history.push({...v,timestamp:g});const{onStart:y,onMove:b}=this.handlers;p||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=a1(p,this.transformPagePoint),$t.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:g}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=s1(d.type==="pointercancel"?this.lastMoveEventInfo:a1(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,y),v&&v(d,y)},!XA(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const u=Nm(e),l=a1(u,this.transformPagePoint),{point:c}=l,{timestamp:f}=qn;this.history=[{...c,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,s1(l,this.history)),this.removeListeners=km(jd(this.contextWindow,"pointermove",this.handlePointerMove),jd(this.contextWindow,"pointerup",this.handlePointerUp),jd(this.contextWindow,"pointercancel",this.handlePointerUp)),s&&this.startScrollTracking(s)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(rN.has(r.overflowX)||rN.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:i.x-n.x,y:i.y-n.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,i),$t.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ru(this.updatePoint)}}function a1(t,e){return e?{point:e(t.point)}:t}function iN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function s1({point:t},e){return{point:t,delta:iN(t,F5(e)),offset:iN(t,jne(e)),velocity:Lne(e,.1)}}function jne(t){return t[0]}function F5(t){return t[t.length-1]}function Lne(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=F5(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ko(e)));)n--;if(!r)return{x:0,y:0};const o=ki(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Fne(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?zt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?zt(n,t,r.max):Math.min(t,n)),t}function oN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Bne(t,{top:e,left:n,bottom:r,right:i}){return{x:oN(t.x,n,i),y:oN(t.y,e,r)}}function aN(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Une(t,e){return{x:aN(t.x,e.x),y:aN(t.y,e.y)}}function Vne(t,e){let n=.5;const r=wr(t),i=wr(e);return i>r?n=bp(e.min,e.max-r,t.min):r>i&&(n=bp(t.min,t.max-i,e.min)),na(0,1,n)}function Wne(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ZS=.35;function zne(t=ZS){return t===!1?t=0:t===!0&&(t=ZS),{x:sN(t,"left","right"),y:sN(t,"top","bottom")}}function sN(t,e,n){return{min:uN(t,e),max:uN(t,n)}}function uN(t,e){return typeof t=="number"?t:t[e]||0}const Hne=new WeakMap;class qne{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=f=>{n?(this.stopAnimation(),this.snapToCursor(Nm(f).point)):this.pauseAnimation()},a=(f,h)=>{this.stopAnimation();const{drag:d,dragPropagation:p,onDragStart:m}=this.getProps();if(d&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Nee(d),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xi(g=>{let y=this.getAxisMotionValue(g).get()||0;if(Xo.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const _=b.layout.layoutBox[g];_&&(y=wr(_)*(parseFloat(y)/100))}}this.originPoint[g]=y}),m&&$t.postRender(()=>m(f,h)),HS(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},s=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:d,dragDirectionLock:p,onDirectionLock:m,onDrag:v}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:g}=h;if(p&&this.currentDirection===null){this.currentDirection=Gne(g),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),v&&v(f,h)},u=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>xi(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new L5(e,{onSessionStart:o,onStart:a,onMove:s,onSessionEnd:u,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:j5(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:s}=this.getProps();s&&$t.postRender(()=>s(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!$v(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Fne(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&xd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Bne(r.layoutBox,e):this.constraints=!1,this.elastic=zne(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&xi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Wne(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!xd(e))return!1;const r=e.current;kf(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Yee(r,i.root,this.visualElement.getTransformPagePoint());let a=Une(i.layout.layoutBox,o);if(n){const s=n(Gee(a));this.hasMutatedConstraints=!!s,s&&(a=a5(s))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),u=this.constraints||{},l=xi(c=>{if(!$v(c,n,this.currentDirection))return;let f=u&&u[c]||{};a&&(f={min:0,max:0});const h=i?200:1e6,d=i?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(l).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return HS(this.visualElement,e),r.start(zA(e,r,0,n,this.visualElement,!1))}stopAnimation(){xi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){xi(n=>{const{drag:r}=this.getProps();if(!$v(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[n],u=o.get()||0;o.set(e[n]-zt(a,s,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!xd(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};xi(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const u=s.get();i[a]=Vne({min:u,max:u},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),xi(a=>{if(!$v(a,e,null))return;const s=this.getAxisMotionValue(a),{min:u,max:l}=this.constraints[a];s.set(zt(u,l,i[a]))})}addListeners(){if(!this.visualElement.current)return;Hne.set(this.visualElement,this);const e=this.visualElement.current,n=jd(e,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps(),f=u.target,h=f!==e&&e5(f);l&&c&&!h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();xd(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),$t.read(r);const a=Sp(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(xi(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=u[c].translate,f.set(f.get()+u[c].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=ZS,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function $v(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Gne(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Kne extends hu{constructor(e){super(e),this.removeGroupControls=Di,this.removeListeners=Di,this.controls=new qne(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Di}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const lN=t=>(e,n)=>{t&&$t.postRender(()=>t(e,n))};class Xne extends hu{constructor(){super(...arguments),this.removePointerDownListener=Di}onPointerDown(e){this.session=new L5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:j5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:lN(e),onStart:lN(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&$t.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=jd(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let u1=!1;class Yne extends R.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),u1&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),jg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,e.layoutDependency!==n&&a.setOptions({...a.options,layoutDependency:n}),u1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||$t.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),KA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;u1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function B5(t){const[e,n]=P5(),r=R.useContext(AA);return D.jsx(Yne,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(M5),isPresent:e,safeToRemove:n})}const Jne={pan:{Feature:Xne},drag:{Feature:Kne,ProjectionNode:T5,MeasureLayout:B5}};function cN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&$t.postRender(()=>o(e,Nm(e)))}class Qne extends hu{mount(){const{current:e}=this.node;e&&(this.unmount=Dee(e,(n,r)=>(cN(this.node,r,"Start"),i=>cN(this.node,i,"End"))))}unmount(){}}class Zne extends hu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=km(Sp(this.node.current,"focus",()=>this.onFocus()),Sp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fN(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&$t.postRender(()=>o(e,Nm(e)))}class ere extends hu{mount(){const{current:e}=this.node;e&&(this.unmount=jee(e,(n,r)=>(fN(this.node,r,"Start"),(i,{success:o})=>fN(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const eE=new WeakMap,l1=new WeakMap,tre=t=>{const e=eE.get(t.target);e&&e(t)},nre=t=>{t.forEach(tre)};function rre({root:t,...e}){const n=t||document;l1.has(n)||l1.set(n,{});const r=l1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(nre,{root:t,...e})),r[i]}function ire(t,e,n){const r=rre(e);return eE.set(t,n),r.observe(t),()=>{eE.delete(t),r.unobserve(t)}}const ore={some:0,all:1};class are extends hu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:ore[i]},s=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,o&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=l?c:f;h&&h(u)};return ire(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(sre(e,n))&&this.startObserver()}unmount(){}}function sre({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ure={inView:{Feature:are},tap:{Feature:ere},focus:{Feature:Zne},hover:{Feature:Qne}},lre={layout:{ProjectionNode:T5,MeasureLayout:B5}},cre={...Dne,...ure,...Jne,...lre},tt=One(cre,kne);function Mb(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fre(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(f){a(f)}}function u(c){try{l(r.throw(c))}catch(f){a(f)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,e||[])).next())})}const hre=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class rT extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class dre extends rT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hN extends rT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class dN extends rT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tE;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(tE||(tE={}));class pre{constructor(e,{headers:n={},customFetch:r,region:i=tE.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=hre(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return fre(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:s,method:u,body:l,signal:c,timeout:f}=r;let h={},{region:d}=r;d||(d=this.region);const p=new URL(`${this.url}/${n}`);d&&d!=="any"&&(h["x-region"]=d,p.searchParams.set("forceFunctionRegion",d));let m;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(h["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(h["Content-Type"]="application/json",m=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?m=JSON.stringify(l):m=l;let v=c;f&&(a=new AbortController,o=setTimeout(()=>a.abort(),f),c?(v=a.signal,c.addEventListener("abort",()=>a.abort())):v=a.signal);const g=yield this.fetch(p.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:m,signal:v}).catch(x=>{throw new dre(x)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new hN(g);if(!g.ok)throw new dN(g);let b=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield g.json():b==="application/octet-stream"||b==="application/pdf"?_=yield g.blob():b==="text/event-stream"?_=g:b==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof dN||s instanceof hN?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var mre=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},vre=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,u=null,l=o.status,c=o.statusText;if(o.ok){var f,h;if(n.method!=="HEAD"){var d;const g=await o.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((d=n.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?s=g:s=JSON.parse(g))}const m=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),v=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");m&&v&&v.length>1&&(u=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,u=null,l=406,c="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var p;const m=await o.text();try{a=JSON.parse(m),Array.isArray(a)&&o.status===404&&(s=[],a=null,l=200,c="OK")}catch{o.status===404&&m===""?(l=204,c="No Content"):a={message:m}}if(a&&n.isMaybeSingle&&(!(a==null||(p=a.details)===null||p===void 0)&&p.includes("0 rows"))&&(a=null,l=200,c="OK"),a&&n.shouldThrowOnError)throw new mre(a)}return{error:a,data:s,count:u,status:l,statusText:c}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let s="";const u=o==null?void 0:o.cause;if(u){var l,c,f,h;const p=(l=u==null?void 0:u.message)!==null&&l!==void 0?l:"",m=(c=u==null?void 0:u.code)!==null&&c!==void 0?c:"";s=`${(f=o==null?void 0:o.name)!==null&&f!==void 0?f:"FetchError"}: ${o==null?void 0:o.message}`,s+=`

Caused by: ${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"Error"}: ${p}`,m&&(s+=` (${m})`),u!=null&&u.stack&&(s+=`
${u.stack}`)}else{var d;s=(d=o==null?void 0:o.stack)!==null&&d!==void 0?d:""}return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},gre=class extends vre{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const s=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const pN=new RegExp("[,()]");var lc=class extends gre{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&pN.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&pN.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},yre=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join(""),{url:s,headers:u}=this.cloneRequestState();return s.searchParams.set("select",a),r&&u.append("Prefer",`count=${r}`),new lc({method:i,url:s,headers:u,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),n||a.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((u,l)=>u.concat(Object.keys(l)),[]);if(s.length>0){const u=[...new Set(s)].map(l=>`"${l}"`);o.searchParams.set("columns",u.join(","))}}return new lc({method:i,url:o,headers:a,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST",{url:s,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&s.searchParams.set("on_conflict",e),r&&u.append("Prefer",`count=${r}`),i||u.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(l.length>0){const c=[...new Set(l)].map(f=>`"${f}"`);s.searchParams.set("columns",c.join(","))}}return new lc({method:a,url:s,headers:u,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new lc({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new lc({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},bre=class U5{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new yre(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new U5(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var a;let s;const u=new URL(`${this.url}/rpc/${e}`);let l;const c=d=>d!==null&&typeof d=="object"&&(!Array.isArray(d)||d.some(c)),f=r&&Object.values(n).some(c);f?(s="POST",l=n):r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{u.searchParams.append(d,p)})):(s="POST",l=n);const h=new Headers(this.headers);return f?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new lc({method:s,url:u,headers:h,schema:this.schemaName,body:l,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class wre{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const xre="2.93.3",_re=`realtime-js/${xre}`,Sre="1.0.0",V5="2.0.0",mN=V5,nE=1e4,Ere=1e3,Cre=100;var bs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bs||(bs={}));var yn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(yn||(yn={}));var ro;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ro||(ro={}));var rE;(function(t){t.websocket="websocket"})(rE||(rE={}));var Wu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Wu||(Wu={}));class Are{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",u=(o=e.join_ref)!==null&&o!==void 0?o:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(c).length===0?"":JSON.stringify(c);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+s.length+a.length+l.length+f.length,d=new ArrayBuffer(this.HEADER_LENGTH+h);let p=new DataView(d),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,u.length),p.setUint8(m++,s.length),p.setUint8(m++,a.length),p.setUint8(m++,l.length),p.setUint8(m++,f.length),p.setUint8(m++,n),Array.from(u,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(s,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(a,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(l,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(f,g=>p.setUint8(m++,g.charCodeAt(0)));var v=new Uint8Array(d.byteLength+r.byteLength);return v.set(new Uint8Array(d),0),v.set(new Uint8Array(r),d.byteLength),v.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,a,s,u]=r;return n({join_ref:i,ref:o,topic:a,event:s,payload:u})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),s=n.getUint8(4);let u=this.HEADER_LENGTH+4;const l=r.decode(e.slice(u,u+i));u=u+i;const c=r.decode(e.slice(u,u+o));u=u+o;const f=r.decode(e.slice(u,u+a));u=u+a;const h=e.slice(u,e.byteLength),d=s===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:c,payload:d};return a>0&&(p.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class W5{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var St;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(St||(St={}));const vN=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=Tre(a,t,e,i),o),{}):{}},Tre=(t,e,n,r)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=n[t];return o&&!r.includes(o)?z5(o,a):iE(a)},z5=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Ire(e,n)}switch(t){case St.bool:return Pre(e);case St.float4:case St.float8:case St.int2:case St.int4:case St.int8:case St.numeric:case St.oid:return Ore(e);case St.json:case St.jsonb:return kre(e);case St.timestamp:return Rre(e);case St.abstime:case St.date:case St.daterange:case St.int4range:case St.int8range:case St.money:case St.reltime:case St.text:case St.time:case St.timestamptz:case St.timetz:case St.tsrange:case St.tstzrange:return iE(e);default:return iE(e)}},iE=t=>t,Pre=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ore=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},kre=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Ire=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>z5(e,s))}return t},Rre=t=>typeof t=="string"?t.replace(" ","T"):t,H5=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class c1{constructor(e,n,r={},i=nE){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gN;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(gN||(gN={}));class Ld{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ld.syncState(this.state,i,o,a),this.pendingDiffs.forEach(u=>{this.state=Ld.syncDiff(this.state,u,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ld.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),s={},u={};return this.map(o,(l,c)=>{a[l]||(u[l]=c)}),this.map(a,(l,c)=>{const f=o[l];if(f){const h=c.map(v=>v.presence_ref),d=f.map(v=>v.presence_ref),p=c.filter(v=>d.indexOf(v.presence_ref)<0),m=f.filter(v=>h.indexOf(v.presence_ref)<0);p.length>0&&(s[l]=p),m.length>0&&(u[l]=m)}else s[l]=c}),this.syncDiff(o,{joins:s,leaves:u},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(s,u)=>{var l;const c=(l=e[s])!==null&&l!==void 0?l:[];if(e[s]=this.cloneDeep(u),c.length>0){const f=e[s].map(d=>d.presence_ref),h=c.filter(d=>f.indexOf(d.presence_ref)<0);e[s].unshift(...h)}r(s,c,u)}),this.map(a,(s,u)=>{let l=e[s];if(!l)return;const c=u.map(f=>f.presence_ref);l=l.filter(f=>c.indexOf(f.presence_ref)<0),e[s]=l,i(s,l,u),l.length===0&&delete e[s]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yN;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(yN||(yN={}));var Fd;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fd||(Fd={}));var ga;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ga||(ga={}));class Nc{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=yn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new c1(this,ro.join,this.params,this.timeout),this.rejoinTimer=new W5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ro.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Ld(this),this.broadcastEndpointURL=H5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==yn.closed){const{config:{broadcast:a,presence:s,private:u}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Fd.PRESENCE]&&this.bindings[Fd.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:l,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(d=>e==null?void 0:e(ga.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ga.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),d===void 0){e==null||e(ga.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,v=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,g=[];for(let y=0;y<v;y++){const b=m[y],{filter:{event:_,schema:x,table:S,filter:E}}=b,C=d&&d[y];if(C&&C.event===_&&Nc.isFilterValueEqual(C.schema,x)&&Nc.isFilterValueEqual(C.table,S)&&Nc.isFilterValueEqual(C.filter,E))g.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),this.state=yn.errored,e==null||e(ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(ga.SUBSCRIBED);return}}).receive("error",d=>{this.state=yn.errored,e==null||e(ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===yn.joined&&e===Fd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let u=s.statusText;try{const l=await s.json();u=l.error||l.message||u}catch{}return Promise.reject(new Error(u))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,u;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ro.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new c1(this,ro.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new c1(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Cre){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:u,leave:l,join:c}=ro;if(r&&[s,u,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(d=>{var p,m,v;return((p=d.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(m=d.filter)===null||m===void 0?void 0:m.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(d=>d.callback(h,r)):(o=this.bindings[a])===null||o===void 0||o.filter(d=>{var p,m,v,g,y,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in d){const _=d.id,x=(p=d.filter)===null||p===void 0?void 0:p.event;return _&&((m=n.ids)===null||m===void 0?void 0:m.includes(_))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(y=(g=d==null?void 0:d.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===a}).map(d=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:m,table:v,commit_timestamp:g,type:y,errors:b}=p;h=Object.assign(Object.assign({},{schema:m,table:v,commit_timestamp:g,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(p))}d.callback(h,r)})}_isClosed(){return this.state===yn.closed}_isJoined(){return this.state===yn.joined}_isJoining(){return this.state===yn.joining}_isLeaving(){return this.state===yn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Nc.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ro.close,{},e)}_onError(e){this._on(ro.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=vN(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=vN(e.columns,e.old_record)),n}}const f1=()=>{},jv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Nre=[1e3,2e3,5e3,1e4],Dre=1e4,Mre=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $re{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nE,this.transport=null,this.heartbeatIntervalMs=jv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=f1,this.ref=0,this.reconnectTimer=null,this.vsn=mN,this.logger=f1,this.conn=null,this.sendBuffer=[],this.serializer=new Are,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${rE.websocket}`,this.httpEndpoint=H5(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=wre.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bs.connecting:return Wu.Connecting;case bs.open:return Wu.Open;case bs.closing:return Wu.Closing;default:return Wu.Closed}}isConnected(){return this.connectionState()===Wu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Nc(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var u;(u=this.conn)===null||u===void 0||u.send(s)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ere,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},jv.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",l)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:a}=n,s=a?`(${a})`:"",u=o.status||"";this.log("receive",`${u} ${r} ${i} ${s}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===bs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bs.open||this.conn.readyState===bs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ro.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Mre],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:_re};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ro.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new W5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},jv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,s,u,l,c,f,h,d;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:nE,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:jv.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:f1,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:mN,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:p=>Nre[p-1]||Dre,this.vsn){case Sre:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(p,m)=>m(JSON.stringify(p)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(p,m)=>m(JSON.parse(p));break;case V5:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Ep=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function jre(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function Lre(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Fre(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const s=jre(t.baseUrl,r,i),u=await Lre(t.auth),l=await e(s,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...u,...a},body:o?JSON.stringify(o):void 0}),c=await l.text(),f=(l.headers.get("content-type")||"").includes("application/json"),h=f&&c?JSON.parse(c):c;if(!l.ok){const d=f?h:void 0,p=d==null?void 0:d.error;throw new Ep((p==null?void 0:p.message)??`Request failed with status ${l.status}`,{status:l.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:d})}return{status:l.status,headers:l.headers,data:h}}}}function Lv(t){return t.join("")}var Bre=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Lv(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Lv(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Lv(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Lv(t.namespace)}`}),!0}catch(e){if(e instanceof Ep&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Ep&&n.status===409)return;throw n}}};function Jl(t){return t.join("")}var Ure=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Jl(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jl(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jl(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jl(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Ep&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Ep&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Vre=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Fre({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Bre(this.client,e),this.tableOps=new Ure(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},$b=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function jb(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Fv=class extends $b{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},q5=class extends $b{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const Wre=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),zre=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},oE=t=>{if(Array.isArray(t))return t.map(n=>oE(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=oE(r)}),e},Hre=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Cp(t){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(t)}function qre(t,e){if(Cp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gre(t){var e=qre(t,"string");return Cp(e)=="symbol"?e:e+""}function Kre(t,e,n){return(e=Gre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bN(Object(n),!0).forEach(function(r){Kre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const wN=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Xre=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t,o=i.status||500;if(typeof i.json=="function")i.json().then(a=>{const s=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||o+"";e(new Fv(wN(a),o,s,r))}).catch(()=>{if(r==="vectors"){const a=o+"";e(new Fv(i.statusText||`HTTP ${o} error`,o,a,r))}else{const a=o+"";e(new Fv(i.statusText||`HTTP ${o} error`,o,a,r))}});else{const a=o+"";e(new Fv(i.statusText||`HTTP ${o} error`,o,a,r))}}else e(new q5(wN(t),t,r))},Yre=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?$e($e({},i),n):(zre(r)?(i.headers=$e({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),$e($e({},i),n))};async function td(t,e,n,r,i,o,a){return new Promise((s,u)=>{t(n,Yre(e,r,i,o)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;if(a==="vectors"){const c=l.headers.get("content-type");if(l.headers.get("content-length")==="0"||l.status===204)return{};if(!c||!c.includes("application/json"))return{}}return l.json()}).then(l=>s(l)).catch(l=>Xre(l,u,r,a))})}function G5(t="storage"){return{get:async(e,n,r,i)=>td(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,o)=>td(e,"POST",n,i,o,r,t),put:async(e,n,r,i,o)=>td(e,"PUT",n,i,o,r,t),head:async(e,n,r,i)=>td(e,"HEAD",n,$e($e({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,o)=>td(e,"DELETE",n,i,o,r,t)}}const Jre=G5("storage"),{get:Ap,post:Zi,put:aE,head:Qre,remove:iT}=Jre,ii=G5("vectors");var vh=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=Wre(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(jb(n))return{data:null,error:n};throw n}}},Zre=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jb(e))return{data:null,error:e};throw e}}};let K5;K5=Symbol.toStringTag;var eie=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[K5]="BlobDownloadBuilder",this.promise=null}asStream(){return new Zre(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(jb(e))return{data:null,error:e};throw e}}};const tie={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var nie=class extends vh{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let o;const a=$e($e({},xN),r);let s=$e($e({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),u&&o.append("metadata",i.encodeMetadata(u)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),u&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(u))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,u&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(s=$e($e({},s),r.headers));const l=i._removeEmptyFolders(e),c=i._getFinalPath(l),f=await(t=="PUT"?aE:Zi)(i.fetch,`${i.url}/object/${c}`,o,$e({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:l,id:f.Id,fullPath:f.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),a=i._getFinalPath(o),s=new URL(i.url+`/object/upload/sign/${a}`);return s.searchParams.set("token",e),i.handleOperation(async()=>{let u;const l=$e({upsert:xN.upsert},r),c=$e($e({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",l.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",l.cacheControl)):(u=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType),{path:o,fullPath:(await aE(i.fetch,s.toString(),u,{headers:c})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=$e({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await Zi(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+o.url),s=a.searchParams.get("token");if(!s)throw new $b("No token returned by API");return{signedUrl:a.toString(),path:t,token:s}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await Zi(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await Zi(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),o=await Zi(r.fetch,`${r.url}/object/sign/${i}`,$e({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${a}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await Zi(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(a=>$e($e({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${o}`):null}))})}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),a=()=>Ap(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new eie(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>oE(await Ap(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await Qre(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(jb(r)&&r instanceof q5){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let s=r.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await iT(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=$e($e($e({},tie),e),{},{prefix:t||""});return await Zi(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=$e({},t);return await Zi(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const rie="2.93.3",Dm={"X-Client-Info":`storage-js/${rie}`};var iie=class extends vh{constructor(t,e={},n,r){const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const o=i.href.replace(/\/$/,""),a=$e($e({},Dm),e);super(o,a,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Ap(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Ap(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await Zi(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await aE(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await Zi(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await iT(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},oie=class extends vh{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=$e($e({},Dm),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Zi(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Ap(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await iT(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!Hre(t))throw new $b("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Vre({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(i,s),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}}}})}},aie=class extends vh{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=$e($e({},Dm),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await ii.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await ii.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},sie=class extends vh{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=$e($e({},Dm),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},uie=class extends vh{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=$e($e({},Dm),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await ii.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},lie=class extends uie{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new cie(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},cie=class extends aie{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new fie(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},fie=class extends sie{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},hie=class extends iie{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new nie(this.url,this.headers,t,this.fetch)}get vectors(){return new lie(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new oie(this.url+"/iceberg",this.headers,this.fetch)}};const X5="2.93.3",cc=30*1e3,sE=3,h1=sE*cc,die="http://localhost:9999",pie="supabase.auth.token",mie={"X-Client-Info":`gotrue-js/${X5}`},uE="X-Supabase-Api-Version",Y5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vie=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gie=10*60*1e3;class Tp extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class yie extends Tp{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function bie(t){return ke(t)&&t.name==="AuthApiError"}class zu extends Tp{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ha extends Tp{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Yr extends Ha{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function d1(t){return ke(t)&&t.name==="AuthSessionMissingError"}class Ql extends Ha{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bv extends Ha{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Uv extends Ha{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function wie(t){return ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class _N extends Ha{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xie extends Ha{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class lE extends Ha{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function p1(t){return ke(t)&&t.name==="AuthRetryableFetchError"}class SN extends Ha{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class cE extends Ha{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ty="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),EN=` 	
\r=`.split(""),_ie=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<EN.length;e+=1)t[EN[e].charCodeAt(0)]=-2;for(let e=0;e<Ty.length;e+=1)t[Ty[e].charCodeAt(0)]=e;return t})();function CN(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ty[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ty[r]),e.queuedBits-=6}}function J5(t,e,n){const r=_ie[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function AN(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{Cie(a,r,n)};for(let a=0;a<t.length;a+=1)J5(t.charCodeAt(a),i,o);return e.join("")}function Sie(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Eie(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Sie(r,e)}}function Cie(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Xc(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)J5(t.charCodeAt(i),n,r);return new Uint8Array(e)}function Aie(t){const e=[];return Eie(t,n=>e.push(n)),new Uint8Array(e)}function Zu(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>CN(i,n,r)),CN(null,n,r),e.join("")}function Tie(t){return Math.round(Date.now()/1e3)+t}function Pie(){return Symbol("auth-callback")}const Wn=()=>typeof window<"u"&&typeof document<"u",Pu={tested:!1,writable:!1},Q5=()=>{if(!Wn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pu.tested)return Pu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pu.tested=!0,Pu.writable=!0}catch{Pu.tested=!0,Pu.writable=!1}return Pu.writable};function Oie(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Z5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),kie=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",fc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ou=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Vn=async(t,e)=>{await t.removeItem(e)};class Lb{constructor(){this.promise=new Lb.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Lb.promiseConstructor=Promise;function Vv(t){const e=t.split(".");if(e.length!==3)throw new cE("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!vie.test(e[r]))throw new cE("JWT not in base64url format");return{header:JSON.parse(AN(e[0])),payload:JSON.parse(AN(e[1])),signature:Xc(e[2]),raw:{header:e[0],payload:e[1]}}}async function Iie(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Rie(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function Nie(t){return("0"+t.toString(16)).substr(-2)}function Die(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Nie).join("")}async function Mie(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function $ie(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Mie(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zl(t,e,n=!1){const r=Die();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await fc(t,`${e}-code-verifier`,i);const o=await $ie(r);return[o,r===o?"plain":"s256"]}const jie=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Lie(t){const e=t.headers.get(uE);if(!e||!e.match(jie))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Fie(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Bie(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Uie=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ec(t){if(!Uie.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function m1(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Vie(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function TN(t){return JSON.parse(JSON.stringify(t))}const ju=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Wie=[502,503,504];async function PN(t){var e;if(!kie(t))throw new lE(ju(t),0);if(Wie.includes(t.status))throw new lE(ju(t),t.status);let n;try{n=await t.json()}catch(o){throw new zu(ju(o),o)}let r;const i=Lie(t);if(i&&i.getTime()>=Y5["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new SN(ju(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Yr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new SN(ju(n),t.status,n.weak_password.reasons);throw new yie(ju(n),t.status||500,r)}const zie=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ne(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[uE]||(o[uE]=Y5["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await Hie(t,e,n+s,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Hie(t,e,n,r,i,o){const a=zie(e,r,i,o);let s;try{s=await t(n,Object.assign({},a))}catch(u){throw console.error(u),new lE(ju(u),0)}if(s.ok||await PN(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(u){await PN(u)}}function Xi(t){var e;let n=null;Kie(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Tie(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ON(t){const e=Xi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Es(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function qie(t){return{data:t,error:null}}function Gie(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=Mb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},u=Object.assign({},a);return{data:{properties:s,user:u},error:null}}function kN(t){return t}function Kie(t){return t.access_token&&t.refresh_token&&t.expires_in}const v1=["global","local","others"];class Xie{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Z5(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=v1[0]){if(v1.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${v1.join(", ")}`);try{return await Ne(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ke(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Es})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Mb(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Gie,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Es})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,s,u;try{const l={nextPage:null,lastPage:0,total:0},c=await Ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:kN});if(c.error)throw c.error;const f=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(u=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return d.length>0&&(d.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);l[`${v}Page`]=m}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(ke(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ec(e);try{return await Ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Es})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ec(e);try{return await Ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Es})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ec(e);try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Es})}catch(r){if(ke(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ec(e.userId);try{const{data:n,error:r}=await Ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ec(e.userId),ec(e.id);try{return{data:await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,s,u;try{const l={nextPage:null,lastPage:0,total:0},c=await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:kN});if(c.error)throw c.error;const f=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(u=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return d.length>0&&(d.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);l[`${v}Page`]=m}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(ke(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ke(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}}function IN(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const tc={debug:!!(globalThis&&Q5()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eV extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Yie extends eV{}async function Jie(t,e,n){tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),tc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw tc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Yie(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(tc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Qie(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function tV(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Zie(t){return parseInt(t,16)}function eoe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function toe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:u,resources:l,scheme:c,uri:f,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const d=tV(t.address),p=c?`${c}://${r}`:r,m=t.statement?`${t.statement}
`:"",v=`${p} wants you to sign in with your Ethereum account:
${d}

${m}`;let g=`URI: ${f}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),s&&(g+=`
Not Before: ${s.toISOString()}`),u&&(g+=`
Request ID: ${u}`),l){let y=`
Resources:`;for(const b of l){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);y+=`
- ${b}`}g+=y}return`${v}
${g}`}class sn extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Py extends sn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function noe({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new sn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(nV(a)){if(o.rp.id!==a)return new sn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function roe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new sn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(nV(r)){if(n.rpId!==r)return new sn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class ioe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ooe=new ioe;function aoe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Mb(t,["challenge","user","excludeCredentials"]),o=Xc(e).buffer,a=Object.assign(Object.assign({},n),{id:Xc(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const l=r[u];s.excludeCredentials[u]=Object.assign(Object.assign({},l),{id:Xc(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function soe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Mb(t,["challenge","allowCredentials"]),i=Xc(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const s=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:Xc(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function uoe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Zu(new Uint8Array(t.response.attestationObject)),clientDataJSON:Zu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function loe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Zu(new Uint8Array(i.authenticatorData)),clientDataJSON:Zu(new Uint8Array(i.clientDataJSON)),signature:Zu(new Uint8Array(i.signature)),userHandle:i.userHandle?Zu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function nV(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function RN(){var t,e;return!!(Wn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function coe(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Py("Browser returned unexpected credential type",e)}:{data:null,error:new Py("Empty credential response",e)}}catch(e){return{data:null,error:noe({error:e,options:t})}}}async function foe(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Py("Browser returned unexpected credential type",e)}:{data:null,error:new Py("Empty credential response",e)}}catch(e){return{data:null,error:roe({error:e,options:t})}}}const hoe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},doe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Oy(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const s=r[o];e(s)?r[o]=Oy(s,a):r[o]=Oy(a)}else r[o]=a}return r}function poe(t,e){return Oy(hoe,t,e||{})}function moe(t,e){return Oy(doe,t,e||{})}class voe{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){var a;try{const{data:s,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!s)return{data:null,error:u};const l=i??ooe.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:c}=s.webauthn.credential_options.publicKey;if(!c.name){const f=r;if(f)c.name=`${c.id}:${f}`;else{const d=(await this.client.getUser()).data.user,p=((a=d==null?void 0:d.user_metadata)===null||a===void 0?void 0:a.name)||(d==null?void 0:d.email)||(d==null?void 0:d.id)||"User";c.name=`${c.id}:${p}`}}c.displayName||(c.displayName=c.name)}switch(s.webauthn.type){case"create":{const c=poe(s.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:f,error:h}=await coe({publicKey:c,signal:l});return f?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}case"request":{const c=moe(s.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:f,error:h}=await foe(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:c,signal:l}));return f?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}}}catch(s){return ke(s)?{data:null,error:s}:{data:null,error:new zu("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Tp("rpId is required for WebAuthn authentication")};try{if(!RN())return{data:null,error:new zu("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(a){return ke(a)?{data:null,error:a}:{data:null,error:new zu("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Tp("rpId is required for WebAuthn registration")};try{if(!RN())return{data:null,error:new zu("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:s};const{data:u,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:l}}catch(a){return ke(a)?{data:null,error:a}:{data:null,error:new zu("Unexpected error in register",a)}}}}Qie();const goe={url:die,storageKey:pie,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mie,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function NN(t,e,n){return await n()}const nc={};class Pp{get jwks(){var e,n;return(n=(e=nc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){nc[this.storageKey]=Object.assign(Object.assign({},nc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=nc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){nc[this.storageKey]=Object.assign(Object.assign({},nc[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},goe),e);if(this.storageKey=o.storageKey,this.instanceID=(n=Pp.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Pp.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Wn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Xie({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Z5(o.fetch),this.lock=o.lock||NN,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Wn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Jie:this.lock=NN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new voe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Q5()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=IN(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=IN(this.memoryStorage)),Wn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(s){this._debug("#broadcastChannel","error",s)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${X5}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Wn()&&(n=Oie(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Wn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),wie(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ke(n)?this._returnResult({error:n}):this._returnResult({error:new zu("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Xi}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(o){if(ke(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:c,password:f,options:h}=e;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await Zl(this.storage,this.storageKey)),o=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:d,code_challenge_method:p},xform:Xi})}else if("phone"in e){const{phone:c,password:f,options:h}=e;o=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Xi})}else throw new Bv("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await Vn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(o){if(await Vn(this.storage,`${this.storageKey}-code-verifier`),ke(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:s}=e;n=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ON})}else if("phone"in e){const{phone:o,password:a,options:s}=e;n=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ON})}else throw new Bv("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new Ql;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,s,u,l,c,f,h;let d,p;if("message"in e)d=e.message,p=e.signature;else{const{chain:m,wallet:v,statement:g,options:y}=e;let b;if(Wn())if(typeof v=="object")b=v;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")b=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const _=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),x=await b.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=tV(x[0]);let E=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const A=await b.request({method:"eth_chainId"});E=Zie(A)}const C={domain:_.host,address:S,statement:g,uri:_.href,version:"1",chainId:E,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=y==null?void 0:y.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};d=toe(C),p=await b.request({method:"personal_sign",params:[eoe(d),S]})}try{const{data:m,error:v}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:p},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Xi});if(v)throw v;if(!m||!m.session||!m.user){const g=new Ql;return this._returnResult({data:{user:null,session:null},error:g})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:v})}catch(m){if(ke(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(e){var n,r,i,o,a,s,u,l,c,f,h,d;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:v,wallet:g,statement:y,options:b}=e;let _;if(Wn())if(typeof g=="object")_=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const x=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),y?{statement:y}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(c=b==null?void 0:b.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=S}}try{const{data:v,error:g}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Zu(m)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Xi});if(g)throw g;if(!v||!v.session||!v.user){const y=new Ql;return this._returnResult({data:{user:null,session:null},error:y})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:g})}catch(v){if(ke(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const n=await Ou(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new xie;const{data:o,error:a}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Xi});if(await Vn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new Ql;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await Vn(this.storage,`${this.storageKey}-code-verifier`),ke(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,s=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xi}),{data:u,error:l}=s;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){const c=new Ql;return this._returnResult({data:{user:null,session:null},error:c})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:s,options:u}=e;let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Zl(this.storage,this.storageKey));const{error:f}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:l,code_challenge_method:c},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:s,options:u}=e,{data:l,error:c}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(o=u==null?void 0:u.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new Bv("You must provide either an email or phone number.")}catch(s){if(await Vn(this.storage,`${this.storageKey}-code-verifier`),ke(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:s}=await Ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Xi});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,l=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(i){if(ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,a;try{let s=null,u=null;this.flowType==="pkce"&&([s,u]=await Zl(this.storage,this.storageKey));const l=await Ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:u}),headers:this.headers,xform:qie});return!((o=l.data)===null||o===void 0)&&o.url&&Wn()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(s){if(await Vn(this.storage,`${this.storageKey}-code-verifier`),ke(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Yr;const{error:i}=await Ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ke(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await Ne(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:s}=await Ne(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new Bv("You must provide either an email or phone number and a type")}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ou(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<h1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Ou(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=m1()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=Vie(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Es}):await this._useSession(async n=>{var r,i,o;const{data:a,error:s}=n;if(s)throw s;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yr}:await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Es})})}catch(n){if(ke(n))return d1(n)&&(await this._removeSession(),await Vn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Yr;const a=i.session;let s=null,u=null;this.flowType==="pkce"&&e.email!=null&&([s,u]=await Zl(this.storage,this.storageKey));const{data:l,error:c}=await Ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:u}),jwt:a.access_token,xform:Es});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await Vn(this.storage,`${this.storageKey}-code-verifier`),ke(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yr;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=Vv(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:s,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:u}=await this._getUser(e.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(ke(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:s}=n;if(s)throw s;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Yr;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Wn())throw new Uv("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Uv(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _N("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uv("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _N("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:u,token_type:l}=e;if(!o||!s||!a||!l)throw new Uv("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(s);let h=c+f;u&&(h=parseInt(u));const d=h-c;d*1e3<=cc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${f}s`);const p=h-f;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,c);const{data:m,error:v}=await this._getUser(o);if(v)throw v;const g={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:h,refresh_token:a,token_type:l,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(ke(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ou(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o&&!d1(o))return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(bie(s)&&(s.status===404||s.status===401||s.status===403)||d1(s)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await Vn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Pie(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Zl(this.storage,this.storageKey,!0));try{return await Ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Vn(this.storage,`${this.storageKey}-code-verifier`),ke(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,s,u,l,c;const{data:f,error:h}=o;if(h)throw h;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Ne(this.fetch,"GET",d,{headers:this.headers,jwt:(c=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return Wn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ke(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:s,token:u,access_token:l,nonce:c}=e,f=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:u,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xi}),{data:h,error:d}=f;return d?this._returnResult({data:{user:null,session:null},error:d}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new Ql}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:d}))}catch(i){if(await Vn(this.storage,`${this.storageKey}-code-verifier`),ke(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await Ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Rie(async i=>(i>0&&await Iie(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xi})),(i,o)=>{const a=200*Math.pow(2,i);return o&&p1(o)&&Date.now()+a-r<cc})}catch(r){if(this._debug(n,"error",r),ke(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Wn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ou(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Ou(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await fc(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:m1()}else if(i&&!i.user&&!i.user){const a=await Ou(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Vn(this.storage,this.storageKey+"-user"),await fc(this.storage,this.storageKey,i)):i.user=m1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<h1;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${h1}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),p1(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Yr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Lb;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Yr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),ke(o)){const a={data:null,error:o};return p1(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,n)}catch(u){o.push(u)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Vn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await fc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=TN(i);await fc(this.storage,this.storageKey,o)}else{const i=TN(n);await fc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Vn(this.storage,this.storageKey),await Vn(this.storage,this.storageKey+"-code-verifier"),await Vn(this.storage,this.storageKey+"-user"),this.userStorage&&await Vn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),cc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/cc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${cc}ms, refresh threshold is ${sE} ticks`),i<=sE&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof eV)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await Zl(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await Ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:l}=await Ne(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?uoe(e.webauthn.credential_response):loe(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:u}=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:u}))})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:aoe(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:soe(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,o;if(e)try{const{payload:d}=Vv(e);let p=null;d.aal&&(p=d.aal);let m=p;const{data:{user:v},error:g}=await this.getUser(e);if(g)return this._returnResult({data:null,error:g});((r=(n=v==null?void 0:v.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(m="aal2");const b=d.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:b},error:null}}catch(d){if(ke(d))return this._returnResult({data:null,error:d});throw d}const{data:{session:a},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Vv(a.access_token);let l=null;u.aal&&(l=u.aal);let c=l;((o=(i=a.user.factors)===null||i===void 0?void 0:i.filter(d=>d.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(c="aal2");const h=u.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Yr})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Yr});const a=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Wn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Yr});const a=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&Wn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Ne(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Yr})})}catch(e){if(ke(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Ne(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Yr})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(s=>s.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===e),r&&this.jwks_cached_at+gie>i)return r;const{data:o,error:a}=await Ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(s=>s.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:d,error:p}=await this.getSession();if(p||!d.session)return this._returnResult({data:null,error:p});r=d.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:u}}=Vv(r);n!=null&&n.allowExpired||Fie(o.exp);const l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!l){const{error:d}=await this.getUser(r);if(d)throw d;return{data:{claims:o,header:i,signature:a},error:null}}const c=Bie(i.alg),f=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,a,Aie(`${s}.${u}`)))throw new cE("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(ke(r))return this._returnResult({data:null,error:r});throw r}}}Pp.nextInstanceID={};const yoe=Pp,boe="2.93.3";let _d="";typeof Deno<"u"?_d="deno":typeof document<"u"?_d="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_d="react-native":_d="node";const woe={"X-Client-Info":`supabase-js-${_d}/${boe}`},xoe={headers:woe},_oe={schema:"public"},Soe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Eoe={};function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function Coe(t,e){if(Op(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aoe(t){var e=Coe(t,"string");return Op(e)=="symbol"?e:e+""}function Toe(t,e,n){return(e=Aoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DN(Object(n),!0).forEach(function(r){Toe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Poe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ooe=()=>Headers,koe=(t,e,n)=>{const r=Poe(n),i=Ooe();return async(o,a)=>{var s;const u=(s=await e())!==null&&s!==void 0?s:t;let l=new i(a==null?void 0:a.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${u}`),r(o,Jt(Jt({},a),{},{headers:l}))}};function Ioe(t){return t.endsWith("/")?t:t+"/"}function Roe(t,e){var n,r;const{db:i,auth:o,realtime:a,global:s}=t,{db:u,auth:l,realtime:c,global:f}=e,h={db:Jt(Jt({},u),i),auth:Jt(Jt({},l),o),realtime:Jt(Jt({},c),a),storage:{},global:Jt(Jt(Jt({},f),s),{},{headers:Jt(Jt({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function Noe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ioe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Doe=class extends yoe{constructor(t){super(t)}},Moe=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=Noe(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:_oe,realtime:Eoe,auth:Jt(Jt({},Soe),{},{storageKey:a}),global:xoe},u=Roe(n??{},s);if(this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(c,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch)}this.fetch=koe(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Jt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new bre(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new hie(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new pre(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:a,lock:s,debug:u,throwOnError:l},c,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Doe({url:this.authUrl.href,headers:Jt(Jt({},h),c),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:s,debug:u,throwOnError:l,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(d=>d.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new $re(this.realtimeUrl.href,Jt(Jt({},t),{},{params:Jt(Jt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const $oe=(t,e,n)=>new Moe(t,e,n);function joe(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}joe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Loe="https://imnsqhyrckrwqxlaxdiy.supabase.co",Foe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbnNxaHlyY2tyd3F4bGF4ZGl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5OTQ0MTQsImV4cCI6MjA4NTU3MDQxNH0.pTjCHAMzI79jzECsSsov0wdveIwauwaqpv-6NnL8mPI",Si=$oe(Loe,Foe,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),rV=R.createContext(void 0),Boe=({children:t})=>{const[e,n]=R.useState(null),[r,i]=R.useState(null),[o,a]=R.useState(!0);R.useEffect(()=>{const{data:{subscription:c}}=Si.auth.onAuthStateChange((f,h)=>{i(h),n((h==null?void 0:h.user)??null),a(!1)});return Si.auth.getSession().then(({data:{session:f}})=>{i(f),n((f==null?void 0:f.user)??null),a(!1)}),()=>c.unsubscribe()},[]);const s=async(c,f,h)=>{const{error:d}=await Si.auth.signUp({email:c,password:f,options:{data:{username:h},emailRedirectTo:window.location.origin}});return{error:d}},u=async(c,f)=>{const{error:h}=await Si.auth.signInWithPassword({email:c,password:f});return{error:h}},l=async()=>{await Si.auth.signOut()};return D.jsx(rV.Provider,{value:{user:e,session:r,loading:o,signUp:s,signIn:u,signOut:l},children:t})},oT=()=>{const t=R.useContext(rV);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Uoe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],s=t[n++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Voe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,f=(o&3)<<4|s>>4;let h=(s&15)<<2|l>>6,d=l&63;u||(d=64,a||(h=64)),r.push(n[c],n[f],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iV(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Uoe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||s==null||l==null||f==null)throw new Woe;const h=o<<2|s>>4;if(r.push(h),l!==64){const d=s<<4&240|l>>2;if(r.push(d),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Woe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zoe=function(t){const e=iV(t);return Voe.encodeByteArray(e,!0)},oV=function(t){return zoe(t).replace(/\./g,"")};function Hoe(){try{return typeof indexedDB=="object"}catch{return!1}}function qoe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Goe="FirebaseError";class gh extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Goe,Object.setPrototypeOf(this,gh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aV.prototype.create)}}class aV{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?Koe(o,r):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new gh(i,s,r)}}function Koe(t,e){return t.replace(Xoe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Xoe=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yoe(t){return t&&t._delegate?t._delegate:t}class ky{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wt||(wt={}));const Joe={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},Qoe=wt.INFO,Zoe={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},eae=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Zoe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sV{constructor(e){this.name=e,this._logLevel=Qoe,this._logHandler=eae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Joe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const tae=(t,e)=>e.some(n=>t instanceof n);let MN,$N;function nae(){return MN||(MN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rae(){return $N||($N=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uV=new WeakMap,fE=new WeakMap,lV=new WeakMap,g1=new WeakMap,aT=new WeakMap;function iae(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Hs(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&uV.set(n,t)}).catch(()=>{}),aT.set(e,t),e}function oae(t){if(fE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});fE.set(t,e)}let hE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||lV.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aae(t){hE=t(hE)}function sae(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(y1(this),e,...n);return lV.set(r,e.sort?e.sort():[e]),Hs(r)}:rae().includes(t)?function(...e){return t.apply(y1(this),e),Hs(uV.get(this))}:function(...e){return Hs(t.apply(y1(this),e))}}function uae(t){return typeof t=="function"?sae(t):(t instanceof IDBTransaction&&oae(t),tae(t,nae())?new Proxy(t,hE):t)}function Hs(t){if(t instanceof IDBRequest)return iae(t);if(g1.has(t))return g1.get(t);const e=uae(t);return e!==t&&(g1.set(t,e),aT.set(e,t)),e}const y1=t=>aT.get(t);function lae(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=Hs(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Hs(a.result),u.oldVersion,u.newVersion,Hs(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),s.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}const cae=["get","getKey","getAll","getAllKeys","count"],fae=["put","add","delete","clear"],b1=new Map;function jN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(b1.get(e))return b1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cae.includes(n)))return;const o=async function(a,...s){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(s.shift())),(await Promise.all([l[n](...s),i&&u.done]))[0]};return b1.set(e,o),o}aae(t=>({...t,get:(e,n,r)=>jN(e,n)||t.get(e,n,r),has:(e,n)=>!!jN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dae(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dae(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dE="@firebase/app",LN="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=new sV("@firebase/app"),pae="@firebase/app-compat",mae="@firebase/analytics-compat",vae="@firebase/analytics",gae="@firebase/app-check-compat",yae="@firebase/app-check",bae="@firebase/auth",wae="@firebase/auth-compat",xae="@firebase/database",_ae="@firebase/data-connect",Sae="@firebase/database-compat",Eae="@firebase/functions",Cae="@firebase/functions-compat",Aae="@firebase/installations",Tae="@firebase/installations-compat",Pae="@firebase/messaging",Oae="@firebase/messaging-compat",kae="@firebase/performance",Iae="@firebase/performance-compat",Rae="@firebase/remote-config",Nae="@firebase/remote-config-compat",Dae="@firebase/storage",Mae="@firebase/storage-compat",$ae="@firebase/firestore",jae="@firebase/ai",Lae="@firebase/firestore-compat",Fae="firebase",Bae="12.8.0",Uae={[dE]:"fire-core",[pae]:"fire-core-compat",[vae]:"fire-analytics",[mae]:"fire-analytics-compat",[yae]:"fire-app-check",[gae]:"fire-app-check-compat",[bae]:"fire-auth",[wae]:"fire-auth-compat",[xae]:"fire-rtdb",[_ae]:"fire-data-connect",[Sae]:"fire-rtdb-compat",[Eae]:"fire-fn",[Cae]:"fire-fn-compat",[Aae]:"fire-iid",[Tae]:"fire-iid-compat",[Pae]:"fire-fcm",[Oae]:"fire-fcm-compat",[kae]:"fire-perf",[Iae]:"fire-perf-compat",[Rae]:"fire-rc",[Nae]:"fire-rc-compat",[Dae]:"fire-gcs",[Mae]:"fire-gcs-compat",[$ae]:"fire-fst",[Lae]:"fire-fst-compat",[jae]:"fire-vertex","fire-js":"fire-js",[Fae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vae=new Map,Wae=new Map,FN=new Map;function BN(t,e){try{t.container.addComponent(e)}catch(n){Fa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Iy(t){const e=t.name;if(FN.has(e))return Fa.debug(`There were multiple attempts to register component ${e}.`),!1;FN.set(e,t);for(const n of Vae.values())BN(n,t);for(const n of Wae.values())BN(n,t);return!0}function zae(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sT=new aV("app","Firebase",Hae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qae=Bae;function Yc(t,e,n){let r=Uae[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fa.warn(a.join(" "));return}Iy(new ky(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gae="firebase-heartbeat-database",Kae=1,kp="firebase-heartbeat-store";let w1=null;function cV(){return w1||(w1=lae(Gae,Kae,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kp)}catch(n){console.warn(n)}}}}).catch(t=>{throw sT.create("idb-open",{originalErrorMessage:t.message})})),w1}async function Xae(t){try{const n=(await cV()).transaction(kp),r=await n.objectStore(kp).get(fV(t));return await n.done,r}catch(e){if(e instanceof gh)Fa.warn(e.message);else{const n=sT.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fa.warn(n.message)}}}async function UN(t,e){try{const r=(await cV()).transaction(kp,"readwrite");await r.objectStore(kp).put(e,fV(t)),await r.done}catch(n){if(n instanceof gh)Fa.warn(n.message);else{const r=sT.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fa.warn(r.message)}}}function fV(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yae=1024,Jae=30;class Qae{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ese(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=VN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Jae){const a=tse(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Fa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=VN(),{heartbeatsToSend:r,unsentEntries:i}=Zae(this._heartbeatsCache.heartbeats),o=oV(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Fa.warn(n),""}}}function VN(){return new Date().toISOString().substring(0,10)}function Zae(t,e=Yae){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),WN(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ese{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hoe()?qoe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Xae(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function WN(t){return oV(JSON.stringify({version:2,heartbeats:t})).length}function tse(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nse(t){Iy(new ky("platform-logger",e=>new hae(e),"PRIVATE")),Iy(new ky("heartbeat",e=>new Qae(e),"PRIVATE")),Yc(dE,LN,t),Yc(dE,LN,"esm2020"),Yc("fire-js","")}nse("");var rse="firebase",ise="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yc(rse,ise,"app");var zN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,C){function A(){}A.prototype=C.prototype,E.F=C.prototype,E.prototype=new A,E.prototype.constructor=E,E.D=function(T,P,k){for(var I=Array(arguments.length-2),$=2;$<arguments.length;$++)I[$-2]=arguments[$];return C.prototype[P].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,C,A){A||(A=0);const T=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)T[P]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(P=0;P<16;++P)T[P]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=E.g[0],A=E.g[1],P=E.g[2];let k=E.g[3],I;I=C+(k^A&(P^k))+T[0]+3614090360&4294967295,C=A+(I<<7&4294967295|I>>>25),I=k+(P^C&(A^P))+T[1]+3905402710&4294967295,k=C+(I<<12&4294967295|I>>>20),I=P+(A^k&(C^A))+T[2]+606105819&4294967295,P=k+(I<<17&4294967295|I>>>15),I=A+(C^P&(k^C))+T[3]+3250441966&4294967295,A=P+(I<<22&4294967295|I>>>10),I=C+(k^A&(P^k))+T[4]+4118548399&4294967295,C=A+(I<<7&4294967295|I>>>25),I=k+(P^C&(A^P))+T[5]+1200080426&4294967295,k=C+(I<<12&4294967295|I>>>20),I=P+(A^k&(C^A))+T[6]+2821735955&4294967295,P=k+(I<<17&4294967295|I>>>15),I=A+(C^P&(k^C))+T[7]+4249261313&4294967295,A=P+(I<<22&4294967295|I>>>10),I=C+(k^A&(P^k))+T[8]+1770035416&4294967295,C=A+(I<<7&4294967295|I>>>25),I=k+(P^C&(A^P))+T[9]+2336552879&4294967295,k=C+(I<<12&4294967295|I>>>20),I=P+(A^k&(C^A))+T[10]+4294925233&4294967295,P=k+(I<<17&4294967295|I>>>15),I=A+(C^P&(k^C))+T[11]+2304563134&4294967295,A=P+(I<<22&4294967295|I>>>10),I=C+(k^A&(P^k))+T[12]+1804603682&4294967295,C=A+(I<<7&4294967295|I>>>25),I=k+(P^C&(A^P))+T[13]+4254626195&4294967295,k=C+(I<<12&4294967295|I>>>20),I=P+(A^k&(C^A))+T[14]+2792965006&4294967295,P=k+(I<<17&4294967295|I>>>15),I=A+(C^P&(k^C))+T[15]+1236535329&4294967295,A=P+(I<<22&4294967295|I>>>10),I=C+(P^k&(A^P))+T[1]+4129170786&4294967295,C=A+(I<<5&4294967295|I>>>27),I=k+(A^P&(C^A))+T[6]+3225465664&4294967295,k=C+(I<<9&4294967295|I>>>23),I=P+(C^A&(k^C))+T[11]+643717713&4294967295,P=k+(I<<14&4294967295|I>>>18),I=A+(k^C&(P^k))+T[0]+3921069994&4294967295,A=P+(I<<20&4294967295|I>>>12),I=C+(P^k&(A^P))+T[5]+3593408605&4294967295,C=A+(I<<5&4294967295|I>>>27),I=k+(A^P&(C^A))+T[10]+38016083&4294967295,k=C+(I<<9&4294967295|I>>>23),I=P+(C^A&(k^C))+T[15]+3634488961&4294967295,P=k+(I<<14&4294967295|I>>>18),I=A+(k^C&(P^k))+T[4]+3889429448&4294967295,A=P+(I<<20&4294967295|I>>>12),I=C+(P^k&(A^P))+T[9]+568446438&4294967295,C=A+(I<<5&4294967295|I>>>27),I=k+(A^P&(C^A))+T[14]+3275163606&4294967295,k=C+(I<<9&4294967295|I>>>23),I=P+(C^A&(k^C))+T[3]+4107603335&4294967295,P=k+(I<<14&4294967295|I>>>18),I=A+(k^C&(P^k))+T[8]+1163531501&4294967295,A=P+(I<<20&4294967295|I>>>12),I=C+(P^k&(A^P))+T[13]+2850285829&4294967295,C=A+(I<<5&4294967295|I>>>27),I=k+(A^P&(C^A))+T[2]+4243563512&4294967295,k=C+(I<<9&4294967295|I>>>23),I=P+(C^A&(k^C))+T[7]+1735328473&4294967295,P=k+(I<<14&4294967295|I>>>18),I=A+(k^C&(P^k))+T[12]+2368359562&4294967295,A=P+(I<<20&4294967295|I>>>12),I=C+(A^P^k)+T[5]+4294588738&4294967295,C=A+(I<<4&4294967295|I>>>28),I=k+(C^A^P)+T[8]+2272392833&4294967295,k=C+(I<<11&4294967295|I>>>21),I=P+(k^C^A)+T[11]+1839030562&4294967295,P=k+(I<<16&4294967295|I>>>16),I=A+(P^k^C)+T[14]+4259657740&4294967295,A=P+(I<<23&4294967295|I>>>9),I=C+(A^P^k)+T[1]+2763975236&4294967295,C=A+(I<<4&4294967295|I>>>28),I=k+(C^A^P)+T[4]+1272893353&4294967295,k=C+(I<<11&4294967295|I>>>21),I=P+(k^C^A)+T[7]+4139469664&4294967295,P=k+(I<<16&4294967295|I>>>16),I=A+(P^k^C)+T[10]+3200236656&4294967295,A=P+(I<<23&4294967295|I>>>9),I=C+(A^P^k)+T[13]+681279174&4294967295,C=A+(I<<4&4294967295|I>>>28),I=k+(C^A^P)+T[0]+3936430074&4294967295,k=C+(I<<11&4294967295|I>>>21),I=P+(k^C^A)+T[3]+3572445317&4294967295,P=k+(I<<16&4294967295|I>>>16),I=A+(P^k^C)+T[6]+76029189&4294967295,A=P+(I<<23&4294967295|I>>>9),I=C+(A^P^k)+T[9]+3654602809&4294967295,C=A+(I<<4&4294967295|I>>>28),I=k+(C^A^P)+T[12]+3873151461&4294967295,k=C+(I<<11&4294967295|I>>>21),I=P+(k^C^A)+T[15]+530742520&4294967295,P=k+(I<<16&4294967295|I>>>16),I=A+(P^k^C)+T[2]+3299628645&4294967295,A=P+(I<<23&4294967295|I>>>9),I=C+(P^(A|~k))+T[0]+4096336452&4294967295,C=A+(I<<6&4294967295|I>>>26),I=k+(A^(C|~P))+T[7]+1126891415&4294967295,k=C+(I<<10&4294967295|I>>>22),I=P+(C^(k|~A))+T[14]+2878612391&4294967295,P=k+(I<<15&4294967295|I>>>17),I=A+(k^(P|~C))+T[5]+4237533241&4294967295,A=P+(I<<21&4294967295|I>>>11),I=C+(P^(A|~k))+T[12]+1700485571&4294967295,C=A+(I<<6&4294967295|I>>>26),I=k+(A^(C|~P))+T[3]+2399980690&4294967295,k=C+(I<<10&4294967295|I>>>22),I=P+(C^(k|~A))+T[10]+4293915773&4294967295,P=k+(I<<15&4294967295|I>>>17),I=A+(k^(P|~C))+T[1]+2240044497&4294967295,A=P+(I<<21&4294967295|I>>>11),I=C+(P^(A|~k))+T[8]+1873313359&4294967295,C=A+(I<<6&4294967295|I>>>26),I=k+(A^(C|~P))+T[15]+4264355552&4294967295,k=C+(I<<10&4294967295|I>>>22),I=P+(C^(k|~A))+T[6]+2734768916&4294967295,P=k+(I<<15&4294967295|I>>>17),I=A+(k^(P|~C))+T[13]+1309151649&4294967295,A=P+(I<<21&4294967295|I>>>11),I=C+(P^(A|~k))+T[4]+4149444226&4294967295,C=A+(I<<6&4294967295|I>>>26),I=k+(A^(C|~P))+T[11]+3174756917&4294967295,k=C+(I<<10&4294967295|I>>>22),I=P+(C^(k|~A))+T[2]+718787259&4294967295,P=k+(I<<15&4294967295|I>>>17),I=A+(k^(P|~C))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+C&4294967295,E.g[1]=E.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+k&4294967295}r.prototype.v=function(E,C){C===void 0&&(C=E.length);const A=C-this.blockSize,T=this.C;let P=this.h,k=0;for(;k<C;){if(P==0)for(;k<=A;)i(this,E,k),k+=this.blockSize;if(typeof E=="string"){for(;k<C;)if(T[P++]=E.charCodeAt(k++),P==this.blockSize){i(this,T),P=0;break}}else for(;k<C;)if(T[P++]=E[k++],P==this.blockSize){i(this,T),P=0;break}}this.h=P,this.o+=C},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var C=1;C<E.length-8;++C)E[C]=0;C=this.o*8;for(var A=E.length-8;A<E.length;++A)E[A]=C&255,C/=256;for(this.v(E),E=Array(16),C=0,A=0;A<4;++A)for(let T=0;T<32;T+=8)E[C++]=this.g[A]>>>T&255;return E};function o(E,C){var A=s;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=C(E)}function a(E,C){this.h=C;const A=[];let T=!0;for(let P=E.length-1;P>=0;P--){const k=E[P]|0;T&&k==C||(A[P]=k,T=!1)}this.g=A}var s={};function u(E){return-128<=E&&E<128?o(E,function(C){return new a([C|0],C<0?-1:0)}):new a([E|0],E<0?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return v(l(-E));const C=[];let A=1;for(let T=0;E>=A;T++)C[T]=E/A|0,A*=4294967296;return new a(C,0)}function c(E,C){if(E.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(E.charAt(0)=="-")return v(c(E.substring(1),C));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=l(Math.pow(C,8));let T=f;for(let k=0;k<E.length;k+=8){var P=Math.min(8,E.length-k);const I=parseInt(E.substring(k,k+P),C);P<8?(P=l(Math.pow(C,P)),T=T.j(P).add(l(I))):(T=T.j(A),T=T.add(l(I)))}return T}var f=u(0),h=u(1),d=u(16777216);t=a.prototype,t.m=function(){if(m(this))return-v(this).m();let E=0,C=1;for(let A=0;A<this.g.length;A++){const T=this.i(A);E+=(T>=0?T:4294967296+T)*C,C*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(p(this))return"0";if(m(this))return"-"+v(this).toString(E);const C=l(Math.pow(E,6));var A=this;let T="";for(;;){const P=_(A,C).g;A=g(A,P.j(C));let k=((A.g.length>0?A.g[0]:A.h)>>>0).toString(E);if(A=P,p(A))return k+T;for(;k.length<6;)k="0"+k;T=k+T}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function p(E){if(E.h!=0)return!1;for(let C=0;C<E.g.length;C++)if(E.g[C]!=0)return!1;return!0}function m(E){return E.h==-1}t.l=function(E){return E=g(this,E),m(E)?-1:p(E)?0:1};function v(E){const C=E.g.length,A=[];for(let T=0;T<C;T++)A[T]=~E.g[T];return new a(A,~E.h).add(h)}t.abs=function(){return m(this)?v(this):this},t.add=function(E){const C=Math.max(this.g.length,E.g.length),A=[];let T=0;for(let P=0;P<=C;P++){let k=T+(this.i(P)&65535)+(E.i(P)&65535),I=(k>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);T=I>>>16,k&=65535,I&=65535,A[P]=I<<16|k}return new a(A,A[A.length-1]&-2147483648?-1:0)};function g(E,C){return E.add(v(C))}t.j=function(E){if(p(this)||p(E))return f;if(m(this))return m(E)?v(this).j(v(E)):v(v(this).j(E));if(m(E))return v(this.j(v(E)));if(this.l(d)<0&&E.l(d)<0)return l(this.m()*E.m());const C=this.g.length+E.g.length,A=[];for(var T=0;T<2*C;T++)A[T]=0;for(T=0;T<this.g.length;T++)for(let P=0;P<E.g.length;P++){const k=this.i(T)>>>16,I=this.i(T)&65535,$=E.i(P)>>>16,B=E.i(P)&65535;A[2*T+2*P]+=I*B,y(A,2*T+2*P),A[2*T+2*P+1]+=k*B,y(A,2*T+2*P+1),A[2*T+2*P+1]+=I*$,y(A,2*T+2*P+1),A[2*T+2*P+2]+=k*$,y(A,2*T+2*P+2)}for(E=0;E<C;E++)A[E]=A[2*E+1]<<16|A[2*E];for(E=C;E<2*C;E++)A[E]=0;return new a(A,0)};function y(E,C){for(;(E[C]&65535)!=E[C];)E[C+1]+=E[C]>>>16,E[C]&=65535,C++}function b(E,C){this.g=E,this.h=C}function _(E,C){if(p(C))throw Error("division by zero");if(p(E))return new b(f,f);if(m(E))return C=_(v(E),C),new b(v(C.g),v(C.h));if(m(C))return C=_(E,v(C)),new b(v(C.g),C.h);if(E.g.length>30){if(m(E)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=h,T=C;T.l(E)<=0;)A=x(A),T=x(T);var P=S(A,1),k=S(T,1);for(T=S(T,2),A=S(A,2);!p(T);){var I=k.add(T);I.l(E)<=0&&(P=P.add(A),k=I),T=S(T,1),A=S(A,1)}return C=g(E,P.j(C)),new b(P,C)}for(P=f;E.l(C)>=0;){for(A=Math.max(1,Math.floor(E.m()/C.m())),T=Math.ceil(Math.log(A)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),k=l(A),I=k.j(C);m(I)||I.l(E)>0;)A-=T,k=l(A),I=k.j(C);p(k)&&(k=h),P=P.add(k),E=g(E,I)}return new b(P,E)}t.B=function(E){return _(this,E).h},t.and=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let T=0;T<C;T++)A[T]=this.i(T)&E.i(T);return new a(A,this.h&E.h)},t.or=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let T=0;T<C;T++)A[T]=this.i(T)|E.i(T);return new a(A,this.h|E.h)},t.xor=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let T=0;T<C;T++)A[T]=this.i(T)^E.i(T);return new a(A,this.h^E.h)};function x(E){const C=E.g.length+1,A=[];for(let T=0;T<C;T++)A[T]=E.i(T)<<1|E.i(T-1)>>>31;return new a(A,E.h)}function S(E,C){const A=C>>5;C%=32;const T=E.g.length-A,P=[];for(let k=0;k<T;k++)P[k]=C>0?E.i(k+A)>>>C|E.i(k+A+1)<<32-C:E.i(k+A);return new a(P,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=c,uT=a}).apply(typeof zN<"u"?zN:typeof self<"u"?self:typeof window<"u"?window:{});var Wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wv=="object"&&Wv];for(var O=0;O<w.length;++O){var N=w[O];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function i(w,O){if(O)e:{var N=r;w=w.split(".");for(var L=0;L<w.length-1;L++){var Y=w[L];if(!(Y in N))break e;N=N[Y]}w=w[w.length-1],L=N[w],O=O(L),O!=L&&O!=null&&e(N,w,{configurable:!0,writable:!0,value:O})}}i("Symbol.dispose",function(w){return w||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(w){return w||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(w){return w||function(O){var N=[],L;for(L in O)Object.prototype.hasOwnProperty.call(O,L)&&N.push([L,O[L]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function s(w){var O=typeof w;return O=="object"&&w!=null||O=="function"}function u(w,O,N){return w.call.apply(w.bind,arguments)}function l(w,O,N){return l=u,l.apply(null,arguments)}function c(w,O){var N=Array.prototype.slice.call(arguments,1);return function(){var L=N.slice();return L.push.apply(L,arguments),w.apply(this,L)}}function f(w,O){function N(){}N.prototype=O.prototype,w.Z=O.prototype,w.prototype=new N,w.prototype.constructor=w,w.Ob=function(L,Y,Z){for(var fe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)fe[Ge-2]=arguments[Ge];return O.prototype[Y].apply(L,fe)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?w=>w&&AsyncContext.Snapshot.wrap(w):w=>w;function d(w){const O=w.length;if(O>0){const N=Array(O);for(let L=0;L<O;L++)N[L]=w[L];return N}return[]}function p(w,O){for(let L=1;L<arguments.length;L++){const Y=arguments[L];var N=typeof Y;if(N=N!="object"?N:Y?Array.isArray(Y)?"array":N:"null",N=="array"||N=="object"&&typeof Y.length=="number"){N=w.length||0;const Z=Y.length||0;w.length=N+Z;for(let fe=0;fe<Z;fe++)w[N+fe]=Y[fe]}else w.push(Y)}}class m{constructor(O,N){this.i=O,this.j=N,this.h=0,this.g=null}get(){let O;return this.h>0?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}function v(w){a.setTimeout(()=>{throw w},0)}function g(){var w=E;let O=null;return w.g&&(O=w.g,w.g=w.g.next,w.g||(w.h=null),O.next=null),O}class y{constructor(){this.h=this.g=null}add(O,N){const L=b.get();L.set(O,N),this.h?this.h.next=L:this.g=L,this.h=L}}var b=new m(()=>new _,w=>w.reset());class _{constructor(){this.next=this.g=this.h=null}set(O,N){this.h=O,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,E=new y,C=()=>{const w=Promise.resolve(void 0);x=()=>{w.then(A)}};function A(){for(var w;w=g();){try{w.h.call(w.g)}catch(N){v(N)}var O=b;O.j(w),O.h<100&&(O.h++,w.next=O.g,O.g=w)}S=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(w,O){this.type=w,this.g=this.target=O,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var w=!1,O=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const N=()=>{};a.addEventListener("test",N,O),a.removeEventListener("test",N,O)}catch{}return w}();function I(w){return/^[\s\xa0]*$/.test(w)}function $(w,O){P.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w&&this.init(w,O)}f($,P),$.prototype.init=function(w,O){const N=this.type=w.type,L=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;this.target=w.target||w.srcElement,this.g=O,O=w.relatedTarget,O||(N=="mouseover"?O=w.fromElement:N=="mouseout"&&(O=w.toElement)),this.relatedTarget=O,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=w.pointerType,this.state=w.state,this.i=w,w.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),z=0;function U(w,O,N,L,Y){this.listener=w,this.proxy=null,this.src=O,this.type=N,this.capture=!!L,this.ha=Y,this.key=++z,this.da=this.fa=!1}function M(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function F(w,O,N){for(const L in w)O.call(N,w[L],L,w)}function H(w,O){for(const N in w)O.call(void 0,w[N],N,w)}function X(w){const O={};for(const N in w)O[N]=w[N];return O}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(w,O){let N,L;for(let Y=1;Y<arguments.length;Y++){L=arguments[Y];for(N in L)w[N]=L[N];for(let Z=0;Z<K.length;Z++)N=K[Z],Object.prototype.hasOwnProperty.call(L,N)&&(w[N]=L[N])}}function ae(w){this.src=w,this.g={},this.h=0}ae.prototype.add=function(w,O,N,L,Y){const Z=w.toString();w=this.g[Z],w||(w=this.g[Z]=[],this.h++);const fe=ve(w,O,L,Y);return fe>-1?(O=w[fe],N||(O.fa=!1)):(O=new U(O,this.src,Z,!!L,Y),O.fa=N,w.push(O)),O};function le(w,O){const N=O.type;if(N in w.g){var L=w.g[N],Y=Array.prototype.indexOf.call(L,O,void 0),Z;(Z=Y>=0)&&Array.prototype.splice.call(L,Y,1),Z&&(M(O),w.g[N].length==0&&(delete w.g[N],w.h--))}}function ve(w,O,N,L){for(let Y=0;Y<w.length;++Y){const Z=w[Y];if(!Z.da&&Z.listener==O&&Z.capture==!!N&&Z.ha==L)return Y}return-1}var de="closure_lm_"+(Math.random()*1e6|0),Ce={};function ie(w,O,N,L,Y){if(Array.isArray(O)){for(let Z=0;Z<O.length;Z++)ie(w,O[Z],N,L,Y);return null}return N=vt(N),w&&w[B]?w.J(O,N,s(L)?!!L.capture:!!L,Y):me(w,O,N,!1,L,Y)}function me(w,O,N,L,Y,Z){if(!O)throw Error("Invalid event type");const fe=s(Y)?!!Y.capture:!!Y;let Ge=Ie(w);if(Ge||(w[de]=Ge=new ae(w)),N=Ge.add(O,N,L,fe,Z),N.proxy)return N;if(L=ce(),N.proxy=L,L.src=w,L.listener=N,w.addEventListener)k||(Y=fe),Y===void 0&&(Y=!1),w.addEventListener(O.toString(),L,Y);else if(w.attachEvent)w.attachEvent(xe(O.toString()),L);else if(w.addListener&&w.removeListener)w.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return N}function ce(){function w(N){return O.call(w.src,w.listener,N)}const O=De;return w}function te(w,O,N,L,Y){if(Array.isArray(O))for(var Z=0;Z<O.length;Z++)te(w,O[Z],N,L,Y);else L=s(L)?!!L.capture:!!L,N=vt(N),w&&w[B]?(w=w.i,Z=String(O).toString(),Z in w.g&&(O=w.g[Z],N=ve(O,N,L,Y),N>-1&&(M(O[N]),Array.prototype.splice.call(O,N,1),O.length==0&&(delete w.g[Z],w.h--)))):w&&(w=Ie(w))&&(O=w.g[O.toString()],w=-1,O&&(w=ve(O,N,L,Y)),(N=w>-1?O[w]:null)&&ye(N))}function ye(w){if(typeof w!="number"&&w&&!w.da){var O=w.src;if(O&&O[B])le(O.i,w);else{var N=w.type,L=w.proxy;O.removeEventListener?O.removeEventListener(N,L,w.capture):O.detachEvent?O.detachEvent(xe(N),L):O.addListener&&O.removeListener&&O.removeListener(L),(N=Ie(O))?(le(N,w),N.h==0&&(N.src=null,O[de]=null)):M(w)}}}function xe(w){return w in Ce?Ce[w]:Ce[w]="on"+w}function De(w,O){if(w.da)w=!0;else{O=new $(O,this);const N=w.listener,L=w.ha||w.src;w.fa&&ye(w),w=N.call(L,O)}return w}function Ie(w){return w=w[de],w instanceof ae?w:null}var et="__closure_events_fn_"+(Math.random()*1e9>>>0);function vt(w){return typeof w=="function"?w:(w[et]||(w[et]=function(O){return w.handleEvent(O)}),w[et])}function Be(){T.call(this),this.i=new ae(this),this.M=this,this.G=null}f(Be,T),Be.prototype[B]=!0,Be.prototype.removeEventListener=function(w,O,N,L){te(this,w,O,N,L)};function ut(w,O){var N,L=w.G;if(L)for(N=[];L;L=L.G)N.push(L);if(w=w.M,L=O.type||O,typeof O=="string")O=new P(O,w);else if(O instanceof P)O.target=O.target||w;else{var Y=O;O=new P(L,w),Q(O,Y)}Y=!0;let Z,fe;if(N)for(fe=N.length-1;fe>=0;fe--)Z=O.g=N[fe],Y=gt(Z,L,!0,O)&&Y;if(Z=O.g=w,Y=gt(Z,L,!0,O)&&Y,Y=gt(Z,L,!1,O)&&Y,N)for(fe=0;fe<N.length;fe++)Z=O.g=N[fe],Y=gt(Z,L,!1,O)&&Y}Be.prototype.N=function(){if(Be.Z.N.call(this),this.i){var w=this.i;for(const O in w.g){const N=w.g[O];for(let L=0;L<N.length;L++)M(N[L]);delete w.g[O],w.h--}}this.G=null},Be.prototype.J=function(w,O,N,L){return this.i.add(String(w),O,!1,N,L)},Be.prototype.K=function(w,O,N,L){return this.i.add(String(w),O,!0,N,L)};function gt(w,O,N,L){if(O=w.i.g[String(O)],!O)return!0;O=O.concat();let Y=!0;for(let Z=0;Z<O.length;++Z){const fe=O[Z];if(fe&&!fe.da&&fe.capture==N){const Ge=fe.listener,mn=fe.ha||fe.src;fe.fa&&le(w.i,fe),Y=Ge.call(mn,L)!==!1&&Y}}return Y&&!L.defaultPrevented}function en(w,O){if(typeof w!="function")if(w&&typeof w.handleEvent=="function")w=l(w.handleEvent,w);else throw Error("Invalid listener argument");return Number(O)>2147483647?-1:a.setTimeout(w,O||0)}function jt(w){w.g=en(()=>{w.g=null,w.i&&(w.i=!1,jt(w))},w.l);const O=w.h;w.h=null,w.m.apply(null,O)}class Hr extends T{constructor(O,N){super(),this.m=O,this.l=N,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:jt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function on(w){T.call(this),this.h=w,this.g={}}f(on,T);var dn=[];function Qn(w){F(w.g,function(O,N){this.g.hasOwnProperty(N)&&ye(O)},w),w.g={}}on.prototype.N=function(){on.Z.N.call(this),Qn(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zn=a.JSON.stringify,xu=a.JSON.parse,ns=class{stringify(w){return a.JSON.stringify(w,void 0)}parse(w){return a.JSON.parse(w,void 0)}};function ql(){}function Gl(){}var qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tr(){P.call(this,"d")}f(Tr,P);function So(){P.call(this,"c")}f(So,P);var Gr={},Zm=null;function Ih(){return Zm=Zm||new Be}Gr.Ia="serverreachability";function Rh(w){P.call(this,Gr.Ia,w)}f(Rh,P);function rs(w){const O=Ih();ut(O,new Rh(O))}Gr.STAT_EVENT="statevent";function ev(w,O){P.call(this,Gr.STAT_EVENT,w),this.stat=O}f(ev,P);function pn(w){const O=Ih();ut(O,new ev(O,w))}Gr.Ja="timingevent";function Vi(w,O){P.call(this,Gr.Ja,w),this.size=O}f(Vi,P);function _u(w,O){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){w()},O)}function Me(){this.g=!0}Me.prototype.ua=function(){this.g=!1};function lt(w,O,N,L,Y,Z){w.info(function(){if(w.g)if(Z){var fe="",Ge=Z.split("&");for(let bt=0;bt<Ge.length;bt++){var mn=Ge[bt].split("=");if(mn.length>1){const Rn=mn[0];mn=mn[1];const Ao=Rn.split("_");fe=Ao.length>=2&&Ao[1]=="type"?fe+(Rn+"="+mn+"&"):fe+(Rn+"=redacted&")}}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+L+") [attempt "+Y+"]: "+O+`
`+N+`
`+fe})}function _t(w,O,N,L,Y,Z,fe){w.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+Y+"]: "+O+`
`+N+`
`+Z+" "+fe})}function In(w,O,N,L){w.info(function(){return"XMLHTTP TEXT ("+O+"): "+Eo(w,N)+(L?" "+L:"")})}function Kr(w,O){w.info(function(){return"TIMEOUT: "+O})}Me.prototype.info=function(){};function Eo(w,O){if(!w.g)return O;if(!O)return null;try{const Z=JSON.parse(O);if(Z){for(w=0;w<Z.length;w++)if(Array.isArray(Z[w])){var N=Z[w];if(!(N.length<2)){var L=N[1];if(Array.isArray(L)&&!(L.length<1)){var Y=L[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let fe=1;fe<L.length;fe++)L[fe]=""}}}}return Zn(Z)}catch{return O}}var Wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},zi;function ex(){}f(ex,ql),ex.prototype.g=function(){return new XMLHttpRequest},zi=new ex;function Nh(w){return encodeURIComponent(String(w))}function A9(w){var O=1;w=w.split(":");const N=[];for(;O>0&&w.length;)N.push(w.shift()),O--;return w.length&&N.push(w.join(":")),N}function is(w,O,N,L){this.j=w,this.i=O,this.l=N,this.S=L||1,this.V=new on(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bO}function bO(){this.i=null,this.g="",this.h=!1}var wO={},tx={};function nx(w,O,N){w.M=1,w.A=nv(Co(O)),w.u=N,w.R=!0,xO(w,null)}function xO(w,O){w.F=Date.now(),tv(w),w.B=Co(w.A);var N=w.B,L=w.S;Array.isArray(L)||(L=[String(L)]),DO(N.i,"t",L),w.C=0,N=w.j.L,w.h=new bO,w.g=QO(w.j,N?O:null,!w.u),w.P>0&&(w.O=new Hr(l(w.Y,w,w.g),w.P)),O=w.V,N=w.g,L=w.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(dn[0]=Y.toString()),Y=dn);for(let Z=0;Z<Y.length;Z++){const fe=ie(N,Y[Z],L||O.handleEvent,!1,O.h||O);if(!fe)break;O.g[fe.key]=fe}O=w.J?X(w.J):{},w.u?(w.v||(w.v="POST"),O["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.B,w.v,w.u,O)):(w.v="GET",w.g.ea(w.B,w.v,null,O)),rs(),lt(w.i,w.v,w.B,w.l,w.S,w.u)}is.prototype.ba=function(w){w=w.target;const O=this.O;O&&ss(w)==3?O.j():this.Y(w)},is.prototype.Y=function(w){try{if(w==this.g)e:{const Ge=ss(this.g),mn=this.g.ya(),bt=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||UO(this.g)))){this.K||Ge!=4||mn==7||(mn==8||bt<=0?rs(3):rs(2)),rx(this);var O=this.g.ca();this.X=O;var N=T9(this);if(this.o=O==200,_t(this.i,this.v,this.B,this.l,this.S,Ge,O),this.o){if(this.U&&!this.L){t:{if(this.g){var L,Y=this.g;if((L=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(L)){var Z=L;break t}}Z=null}if(w=Z)In(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ix(this,w);else{this.o=!1,this.m=3,pn(12),Su(this),Dh(this);break e}}if(this.R){w=!0;let Rn;for(;!this.K&&this.C<N.length;)if(Rn=P9(this,N),Rn==tx){Ge==4&&(this.m=4,pn(14),w=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==wO){this.m=4,pn(15),In(this.i,this.l,N,"[Invalid Chunk]"),w=!1;break}else In(this.i,this.l,Rn,null),ix(this,Rn);if(_O(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||N.length!=0||this.h.h||(this.m=1,pn(16),w=!1),this.o=this.o&&w,!w)In(this.i,this.l,N,"[Invalid Chunked Response]"),Su(this),Dh(this);else if(N.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),hx(fe),fe.P=!0,pn(11))}}else In(this.i,this.l,N,null),ix(this,N);Ge==4&&Su(this),this.o&&!this.K&&(Ge==4?KO(this.j,this):(this.o=!1,tv(this)))}else V9(this.g),O==400&&N.indexOf("Unknown SID")>0?(this.m=3,pn(12)):(this.m=0,pn(13)),Su(this),Dh(this)}}}catch{}finally{}};function T9(w){if(!_O(w))return w.g.la();const O=UO(w.g);if(O==="")return"";let N="";const L=O.length,Y=ss(w.g)==4;if(!w.h.i){if(typeof TextDecoder>"u")return Su(w),Dh(w),"";w.h.i=new a.TextDecoder}for(let Z=0;Z<L;Z++)w.h.h=!0,N+=w.h.i.decode(O[Z],{stream:!(Y&&Z==L-1)});return O.length=0,w.h.g+=N,w.C=0,w.h.g}function _O(w){return w.g?w.v=="GET"&&w.M!=2&&w.j.Aa:!1}function P9(w,O){var N=w.C,L=O.indexOf(`
`,N);return L==-1?tx:(N=Number(O.substring(N,L)),isNaN(N)?wO:(L+=1,L+N>O.length?tx:(O=O.slice(L,L+N),w.C=L+N,O)))}is.prototype.cancel=function(){this.K=!0,Su(this)};function tv(w){w.T=Date.now()+w.H,SO(w,w.H)}function SO(w,O){if(w.D!=null)throw Error("WatchDog timer not null");w.D=_u(l(w.aa,w),O)}function rx(w){w.D&&(a.clearTimeout(w.D),w.D=null)}is.prototype.aa=function(){this.D=null;const w=Date.now();w-this.T>=0?(Kr(this.i,this.B),this.M!=2&&(rs(),pn(17)),Su(this),this.m=2,Dh(this)):SO(this,this.T-w)};function Dh(w){w.j.I==0||w.K||KO(w.j,w)}function Su(w){rx(w);var O=w.O;O&&typeof O.dispose=="function"&&O.dispose(),w.O=null,Qn(w.V),w.g&&(O=w.g,w.g=null,O.abort(),O.dispose())}function ix(w,O){try{var N=w.j;if(N.I!=0&&(N.g==w||ox(N.h,w))){if(!w.L&&ox(N.h,w)&&N.I==3){try{var L=N.Ba.g.parse(O)}catch{L=null}if(Array.isArray(L)&&L.length==3){var Y=L;if(Y[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<w.F)sv(N),ov(N);else break e;fx(N),pn(18)}}else N.xa=Y[1],0<N.xa-N.K&&Y[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=_u(l(N.Va,N),6e3));AO(N.h)<=1&&N.ta&&(N.ta=void 0)}else Cu(N,11)}else if((w.L||N.g==w)&&sv(N),!I(O))for(Y=N.Ba.g.parse(O),O=0;O<Y.length;O++){let bt=Y[O];const Rn=bt[0];if(!(Rn<=N.K))if(N.K=Rn,bt=bt[1],N.I==2)if(bt[0]=="c"){N.M=bt[1],N.ba=bt[2];const Ao=bt[3];Ao!=null&&(N.ka=Ao,N.j.info("VER="+N.ka));const Au=bt[4];Au!=null&&(N.za=Au,N.j.info("SVER="+N.za));const us=bt[5];us!=null&&typeof us=="number"&&us>0&&(L=1.5*us,N.O=L,N.j.info("backChannelRequestTimeoutMs_="+L)),L=N;const ls=w.g;if(ls){const uv=ls.g?ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uv){var Z=L.h;Z.g||uv.indexOf("spdy")==-1&&uv.indexOf("quic")==-1&&uv.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ax(Z,Z.h),Z.h=null))}if(L.G){const dx=ls.g?ls.g.getResponseHeader("X-HTTP-Session-Id"):null;dx&&(L.wa=dx,Ot(L.J,L.G,dx))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-w.F,N.j.info("Handshake RTT: "+N.T+"ms")),L=N;var fe=w;if(L.na=JO(L,L.L?L.ba:null,L.W),fe.L){TO(L.h,fe);var Ge=fe,mn=L.O;mn&&(Ge.H=mn),Ge.D&&(rx(Ge),tv(Ge)),L.g=fe}else qO(L);N.i.length>0&&av(N)}else bt[0]!="stop"&&bt[0]!="close"||Cu(N,7);else N.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Cu(N,7):cx(N):bt[0]!="noop"&&N.l&&N.l.qa(bt),N.A=0)}}rs(4)}catch{}}var O9=class{constructor(w,O){this.g=w,this.map=O}};function EO(w){this.l=w||10,a.PerformanceNavigationTiming?(w=a.performance.getEntriesByType("navigation"),w=w.length>0&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function CO(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function AO(w){return w.h?1:w.g?w.g.size:0}function ox(w,O){return w.h?w.h==O:w.g?w.g.has(O):!1}function ax(w,O){w.g?w.g.add(O):w.h=O}function TO(w,O){w.h&&w.h==O?w.h=null:w.g&&w.g.has(O)&&w.g.delete(O)}EO.prototype.cancel=function(){if(this.i=PO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function PO(w){if(w.h!=null)return w.i.concat(w.h.G);if(w.g!=null&&w.g.size!==0){let O=w.i;for(const N of w.g.values())O=O.concat(N.G);return O}return d(w.i)}var OO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k9(w,O){if(w){w=w.split("&");for(let N=0;N<w.length;N++){const L=w[N].indexOf("=");let Y,Z=null;L>=0?(Y=w[N].substring(0,L),Z=w[N].substring(L+1)):Y=w[N],O(Y,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function os(w){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let O;w instanceof os?(this.l=w.l,Mh(this,w.j),this.o=w.o,this.g=w.g,$h(this,w.u),this.h=w.h,sx(this,MO(w.i)),this.m=w.m):w&&(O=String(w).match(OO))?(this.l=!1,Mh(this,O[1]||"",!0),this.o=jh(O[2]||""),this.g=jh(O[3]||"",!0),$h(this,O[4]),this.h=jh(O[5]||"",!0),sx(this,O[6]||"",!0),this.m=jh(O[7]||"")):(this.l=!1,this.i=new Fh(null,this.l))}os.prototype.toString=function(){const w=[];var O=this.j;O&&w.push(Lh(O,kO,!0),":");var N=this.g;return(N||O=="file")&&(w.push("//"),(O=this.o)&&w.push(Lh(O,kO,!0),"@"),w.push(Nh(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&w.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&w.push("/"),w.push(Lh(N,N.charAt(0)=="/"?N9:R9,!0))),(N=this.i.toString())&&w.push("?",N),(N=this.m)&&w.push("#",Lh(N,M9)),w.join("")},os.prototype.resolve=function(w){const O=Co(this);let N=!!w.j;N?Mh(O,w.j):N=!!w.o,N?O.o=w.o:N=!!w.g,N?O.g=w.g:N=w.u!=null;var L=w.h;if(N)$h(O,w.u);else if(N=!!w.h){if(L.charAt(0)!="/")if(this.g&&!this.h)L="/"+L;else{var Y=O.h.lastIndexOf("/");Y!=-1&&(L=O.h.slice(0,Y+1)+L)}if(Y=L,Y==".."||Y==".")L="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){L=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const Z=[];for(let fe=0;fe<Y.length;){const Ge=Y[fe++];Ge=="."?L&&fe==Y.length&&Z.push(""):Ge==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),L&&fe==Y.length&&Z.push("")):(Z.push(Ge),L=!0)}L=Z.join("/")}else L=Y}return N?O.h=L:N=w.i.toString()!=="",N?sx(O,MO(w.i)):N=!!w.m,N&&(O.m=w.m),O};function Co(w){return new os(w)}function Mh(w,O,N){w.j=N?jh(O,!0):O,w.j&&(w.j=w.j.replace(/:$/,""))}function $h(w,O){if(O){if(O=Number(O),isNaN(O)||O<0)throw Error("Bad port number "+O);w.u=O}else w.u=null}function sx(w,O,N){O instanceof Fh?(w.i=O,$9(w.i,w.l)):(N||(O=Lh(O,D9)),w.i=new Fh(O,w.l))}function Ot(w,O,N){w.i.set(O,N)}function nv(w){return Ot(w,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),w}function jh(w,O){return w?O?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function Lh(w,O,N){return typeof w=="string"?(w=encodeURI(w).replace(O,I9),N&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function I9(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var kO=/[#\/\?@]/g,R9=/[#\?:]/g,N9=/[#\?]/g,D9=/[#\?@]/g,M9=/#/g;function Fh(w,O){this.h=this.g=null,this.i=w||null,this.j=!!O}function Eu(w){w.g||(w.g=new Map,w.h=0,w.i&&k9(w.i,function(O,N){w.add(decodeURIComponent(O.replace(/\+/g," ")),N)}))}t=Fh.prototype,t.add=function(w,O){Eu(this),this.i=null,w=Kl(this,w);let N=this.g.get(w);return N||this.g.set(w,N=[]),N.push(O),this.h+=1,this};function IO(w,O){Eu(w),O=Kl(w,O),w.g.has(O)&&(w.i=null,w.h-=w.g.get(O).length,w.g.delete(O))}function RO(w,O){return Eu(w),O=Kl(w,O),w.g.has(O)}t.forEach=function(w,O){Eu(this),this.g.forEach(function(N,L){N.forEach(function(Y){w.call(O,Y,L,this)},this)},this)};function NO(w,O){Eu(w);let N=[];if(typeof O=="string")RO(w,O)&&(N=N.concat(w.g.get(Kl(w,O))));else for(w=Array.from(w.g.values()),O=0;O<w.length;O++)N=N.concat(w[O]);return N}t.set=function(w,O){return Eu(this),this.i=null,w=Kl(this,w),RO(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[O]),this.h+=1,this},t.get=function(w,O){return w?(w=NO(this,w),w.length>0?String(w[0]):O):O};function DO(w,O,N){IO(w,O),N.length>0&&(w.i=null,w.g.set(Kl(w,O),d(N)),w.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],O=Array.from(this.g.keys());for(let L=0;L<O.length;L++){var N=O[L];const Y=Nh(N);N=NO(this,N);for(let Z=0;Z<N.length;Z++){let fe=Y;N[Z]!==""&&(fe+="="+Nh(N[Z])),w.push(fe)}}return this.i=w.join("&")};function MO(w){const O=new Fh;return O.i=w.i,w.g&&(O.g=new Map(w.g),O.h=w.h),O}function Kl(w,O){return O=String(O),w.j&&(O=O.toLowerCase()),O}function $9(w,O){O&&!w.j&&(Eu(w),w.i=null,w.g.forEach(function(N,L){const Y=L.toLowerCase();L!=Y&&(IO(this,L),DO(this,Y,N))},w)),w.j=O}function j9(w,O){const N=new Me;if(a.Image){const L=new Image;L.onload=c(as,N,"TestLoadImage: loaded",!0,O,L),L.onerror=c(as,N,"TestLoadImage: error",!1,O,L),L.onabort=c(as,N,"TestLoadImage: abort",!1,O,L),L.ontimeout=c(as,N,"TestLoadImage: timeout",!1,O,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=w}else O(!1)}function L9(w,O){const N=new Me,L=new AbortController,Y=setTimeout(()=>{L.abort(),as(N,"TestPingServer: timeout",!1,O)},1e4);fetch(w,{signal:L.signal}).then(Z=>{clearTimeout(Y),Z.ok?as(N,"TestPingServer: ok",!0,O):as(N,"TestPingServer: server error",!1,O)}).catch(()=>{clearTimeout(Y),as(N,"TestPingServer: error",!1,O)})}function as(w,O,N,L,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),L(N)}catch{}}function F9(){this.g=new ns}function ux(w){this.i=w.Sb||null,this.h=w.ab||!1}f(ux,ql),ux.prototype.g=function(){return new rv(this.i,this.h)};function rv(w,O){Be.call(this),this.H=w,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(rv,Be),t=rv.prototype,t.open=function(w,O){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=w,this.D=O,this.readyState=1,Uh(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const O={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};w&&(O.body=w),(this.H||a).fetch(new Request(this.D,O)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bh(this)),this.readyState=0},t.Pa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,Uh(this)),this.g&&(this.readyState=3,Uh(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$O(this)}else w.text().then(this.Oa.bind(this),this.ga.bind(this))};function $O(w){w.j.read().then(w.Ma.bind(w)).catch(w.ga.bind(w))}t.Ma=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var O=w.value?w.value:new Uint8Array(0);(O=this.B.decode(O,{stream:!w.done}))&&(this.response=this.responseText+=O)}w.done?Bh(this):Uh(this),this.readyState==3&&$O(this)}},t.Oa=function(w){this.g&&(this.response=this.responseText=w,Bh(this))},t.Na=function(w){this.g&&(this.response=w,Bh(this))},t.ga=function(){this.g&&Bh(this)};function Bh(w){w.readyState=4,w.l=null,w.j=null,w.B=null,Uh(w)}t.setRequestHeader=function(w,O){this.A.append(w,O)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],O=this.h.entries();for(var N=O.next();!N.done;)N=N.value,w.push(N[0]+": "+N[1]),N=O.next();return w.join(`\r
`)};function Uh(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(rv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function jO(w){let O="";return F(w,function(N,L){O+=L,O+=":",O+=N,O+=`\r
`}),O}function lx(w,O,N){e:{for(L in N){var L=!1;break e}L=!0}L||(N=jO(N),typeof w=="string"?N!=null&&Nh(N):Ot(w,O,N))}function tn(w){Be.call(this),this.headers=new Map,this.L=w||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(tn,Be);var B9=/^https?$/i,U9=["POST","PUT"];t=tn.prototype,t.Fa=function(w){this.H=w},t.ea=function(w,O,N,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);O=O?O.toUpperCase():"GET",this.D=w,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():zi.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(O,String(w),!0),this.B=!1}catch(Z){LO(this,Z);return}if(w=N||"",N=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var Y in L)N.set(Y,L[Y]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const Z of L.keys())N.set(Z,L.get(Z));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(N.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=a.FormData&&w instanceof a.FormData,!(Array.prototype.indexOf.call(U9,O,void 0)>=0)||L||Y||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of N)this.g.setRequestHeader(Z,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(w),this.v=!1}catch(Z){LO(this,Z)}};function LO(w,O){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=O,w.o=5,FO(w),iv(w)}function FO(w){w.A||(w.A=!0,ut(w,"complete"),ut(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=w||7,ut(this,"complete"),ut(this,"abort"),iv(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),iv(this,!0)),tn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?BO(this):this.Xa())},t.Xa=function(){BO(this)};function BO(w){if(w.h&&typeof o<"u"){if(w.v&&ss(w)==4)setTimeout(w.Ca.bind(w),0);else if(ut(w,"readystatechange"),ss(w)==4){w.h=!1;try{const Z=w.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var N;if(!(N=O)){var L;if(L=Z===0){let fe=String(w.D).match(OO)[1]||null;!fe&&a.self&&a.self.location&&(fe=a.self.location.protocol.slice(0,-1)),L=!B9.test(fe?fe.toLowerCase():"")}N=L}if(N)ut(w,"complete"),ut(w,"success");else{w.o=6;try{var Y=ss(w)>2?w.g.statusText:""}catch{Y=""}w.l=Y+" ["+w.ca()+"]",FO(w)}}finally{iv(w)}}}}function iv(w,O){if(w.g){w.m&&(clearTimeout(w.m),w.m=null);const N=w.g;w.g=null,O||ut(w,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ss(w){return w.g?w.g.readyState:0}t.ca=function(){try{return ss(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(w){if(this.g){var O=this.g.responseText;return w&&O.indexOf(w)==0&&(O=O.substring(w.length)),xu(O)}};function UO(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.F){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function V9(w){const O={};w=(w.g&&ss(w)>=2&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<w.length;L++){if(I(w[L]))continue;var N=A9(w[L]);const Y=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const Z=O[Y]||[];O[Y]=Z,Z.push(N)}H(O,function(L){return L.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vh(w,O,N){return N&&N.internalChannelParams&&N.internalChannelParams[w]||O}function VO(w){this.za=0,this.i=[],this.j=new Me,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vh("failFast",!1,w),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vh("baseRetryDelayMs",5e3,w),this.Za=Vh("retryDelaySeedMs",1e4,w),this.Ta=Vh("forwardChannelMaxRetries",2,w),this.va=Vh("forwardChannelRequestTimeoutMs",2e4,w),this.ma=w&&w.xmlHttpFactory||void 0,this.Ua=w&&w.Rb||void 0,this.Aa=w&&w.useFetchStreams||!1,this.O=void 0,this.L=w&&w.supportsCrossDomainXhr||!1,this.M="",this.h=new EO(w&&w.concurrentRequestLimit),this.Ba=new F9,this.S=w&&w.fastHandshake||!1,this.R=w&&w.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=w&&w.Pb||!1,w&&w.ua&&this.j.ua(),w&&w.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&w&&w.detectBufferingProxy||!1,this.ia=void 0,w&&w.longPollingTimeout&&w.longPollingTimeout>0&&(this.ia=w.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=VO.prototype,t.ka=8,t.I=1,t.connect=function(w,O,N,L){pn(0),this.W=w,this.H=O||{},N&&L!==void 0&&(this.H.OSID=N,this.H.OAID=L),this.F=this.X,this.J=JO(this,null,this.W),av(this)};function cx(w){if(WO(w),w.I==3){var O=w.V++,N=Co(w.J);if(Ot(N,"SID",w.M),Ot(N,"RID",O),Ot(N,"TYPE","terminate"),Wh(w,N),O=new is(w,w.j,O),O.M=2,O.A=nv(Co(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(O.A.toString(),"")}catch{}!N&&a.Image&&(new Image().src=O.A,N=!0),N||(O.g=QO(O.j,null),O.g.ea(O.A)),O.F=Date.now(),tv(O)}YO(w)}function ov(w){w.g&&(hx(w),w.g.cancel(),w.g=null)}function WO(w){ov(w),w.v&&(a.clearTimeout(w.v),w.v=null),sv(w),w.h.cancel(),w.m&&(typeof w.m=="number"&&a.clearTimeout(w.m),w.m=null)}function av(w){if(!CO(w.h)&&!w.m){w.m=!0;var O=w.Ea;x||C(),S||(x(),S=!0),E.add(O,w),w.D=0}}function W9(w,O){return AO(w.h)>=w.h.j-(w.m?1:0)?!1:w.m?(w.i=O.G.concat(w.i),!0):w.I==1||w.I==2||w.D>=(w.Sa?0:w.Ta)?!1:(w.m=_u(l(w.Ea,w,O),XO(w,w.D)),w.D++,!0)}t.Ea=function(w){if(this.m)if(this.m=null,this.I==1){if(!w){this.V=Math.floor(Math.random()*1e5),w=this.V++;const Y=new is(this,this.j,w);let Z=this.o;if(this.U&&(Z?(Z=X(Z),Q(Z,this.U)):Z=this.U),this.u!==null||this.R||(Y.J=Z,Z=null),this.S)e:{for(var O=0,N=0;N<this.i.length;N++){t:{var L=this.i[N];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(O+=L,O>4096){O=N;break e}if(O===4096||N===this.i.length-1){O=N+1;break e}}O=1e3}else O=1e3;O=HO(this,Y,O),N=Co(this.J),Ot(N,"RID",w),Ot(N,"CVER",22),this.G&&Ot(N,"X-HTTP-Session-Id",this.G),Wh(this,N),Z&&(this.R?O="headers="+Nh(jO(Z))+"&"+O:this.u&&lx(N,this.u,Z)),ax(this.h,Y),this.Ra&&Ot(N,"TYPE","init"),this.S?(Ot(N,"$req",O),Ot(N,"SID","null"),Y.U=!0,nx(Y,N,null)):nx(Y,N,O),this.I=2}}else this.I==3&&(w?zO(this,w):this.i.length==0||CO(this.h)||zO(this))};function zO(w,O){var N;O?N=O.l:N=w.V++;const L=Co(w.J);Ot(L,"SID",w.M),Ot(L,"RID",N),Ot(L,"AID",w.K),Wh(w,L),w.u&&w.o&&lx(L,w.u,w.o),N=new is(w,w.j,N,w.D+1),w.u===null&&(N.J=w.o),O&&(w.i=O.G.concat(w.i)),O=HO(w,N,1e3),N.H=Math.round(w.va*.5)+Math.round(w.va*.5*Math.random()),ax(w.h,N),nx(N,L,O)}function Wh(w,O){w.H&&F(w.H,function(N,L){Ot(O,L,N)}),w.l&&F({},function(N,L){Ot(O,L,N)})}function HO(w,O,N){N=Math.min(w.i.length,N);const L=w.l?l(w.l.Ka,w.l,w):null;e:{var Y=w.i;let Ge=-1;for(;;){const mn=["count="+N];Ge==-1?N>0?(Ge=Y[0].g,mn.push("ofs="+Ge)):Ge=0:mn.push("ofs="+Ge);let bt=!0;for(let Rn=0;Rn<N;Rn++){var Z=Y[Rn].g;const Ao=Y[Rn].map;if(Z-=Ge,Z<0)Ge=Math.max(0,Y[Rn].g-100),bt=!1;else try{Z="req"+Z+"_"||"";try{var fe=Ao instanceof Map?Ao:Object.entries(Ao);for(const[Au,us]of fe){let ls=us;s(us)&&(ls=Zn(us)),mn.push(Z+Au+"="+encodeURIComponent(ls))}}catch(Au){throw mn.push(Z+"type="+encodeURIComponent("_badmap")),Au}}catch{L&&L(Ao)}}if(bt){fe=mn.join("&");break e}}fe=void 0}return w=w.i.splice(0,N),O.G=w,fe}function qO(w){if(!w.g&&!w.v){w.Y=1;var O=w.Da;x||C(),S||(x(),S=!0),E.add(O,w),w.A=0}}function fx(w){return w.g||w.v||w.A>=3?!1:(w.Y++,w.v=_u(l(w.Da,w),XO(w,w.A)),w.A++,!0)}t.Da=function(){if(this.v=null,GO(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var w=4*this.T;this.j.info("BP detection timer enabled: "+w),this.B=_u(l(this.Wa,this),w)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pn(10),ov(this),GO(this))};function hx(w){w.B!=null&&(a.clearTimeout(w.B),w.B=null)}function GO(w){w.g=new is(w,w.j,"rpc",w.Y),w.u===null&&(w.g.J=w.o),w.g.P=0;var O=Co(w.na);Ot(O,"RID","rpc"),Ot(O,"SID",w.M),Ot(O,"AID",w.K),Ot(O,"CI",w.F?"0":"1"),!w.F&&w.ia&&Ot(O,"TO",w.ia),Ot(O,"TYPE","xmlhttp"),Wh(w,O),w.u&&w.o&&lx(O,w.u,w.o),w.O&&(w.g.H=w.O);var N=w.g;w=w.ba,N.M=1,N.A=nv(Co(O)),N.u=null,N.R=!0,xO(N,w)}t.Va=function(){this.C!=null&&(this.C=null,ov(this),fx(this),pn(19))};function sv(w){w.C!=null&&(a.clearTimeout(w.C),w.C=null)}function KO(w,O){var N=null;if(w.g==O){sv(w),hx(w),w.g=null;var L=2}else if(ox(w.h,O))N=O.G,TO(w.h,O),L=1;else return;if(w.I!=0){if(O.o)if(L==1){N=O.u?O.u.length:0,O=Date.now()-O.F;var Y=w.D;L=Ih(),ut(L,new Vi(L,N)),av(w)}else qO(w);else if(Y=O.m,Y==3||Y==0&&O.X>0||!(L==1&&W9(w,O)||L==2&&fx(w)))switch(N&&N.length>0&&(O=w.h,O.i=O.i.concat(N)),Y){case 1:Cu(w,5);break;case 4:Cu(w,10);break;case 3:Cu(w,6);break;default:Cu(w,2)}}}function XO(w,O){let N=w.Qa+Math.floor(Math.random()*w.Za);return w.isActive()||(N*=2),N*O}function Cu(w,O){if(w.j.info("Error code "+O),O==2){var N=l(w.bb,w),L=w.Ua;const Y=!L;L=new os(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Mh(L,"https"),nv(L),Y?j9(L.toString(),N):L9(L.toString(),N)}else pn(2);w.I=0,w.l&&w.l.pa(O),YO(w),WO(w)}t.bb=function(w){w?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function YO(w){if(w.I=0,w.ja=[],w.l){const O=PO(w.h);(O.length!=0||w.i.length!=0)&&(p(w.ja,O),p(w.ja,w.i),w.h.i.length=0,d(w.i),w.i.length=0),w.l.oa()}}function JO(w,O,N){var L=N instanceof os?Co(N):new os(N);if(L.g!="")O&&(L.g=O+"."+L.g),$h(L,L.u);else{var Y=a.location;L=Y.protocol,O=O?O+"."+Y.hostname:Y.hostname,Y=+Y.port;const Z=new os(null);L&&Mh(Z,L),O&&(Z.g=O),Y&&$h(Z,Y),N&&(Z.h=N),L=Z}return N=w.G,O=w.wa,N&&O&&Ot(L,N,O),Ot(L,"VER",w.ka),Wh(w,L),L}function QO(w,O,N){if(O&&!w.L)throw Error("Can't create secondary domain capable XhrIo object.");return O=w.Aa&&!w.ma?new tn(new ux({ab:N})):new tn(w.ma),O.Fa(w.L),O}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZO(){}t=ZO.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function gi(w,O){Be.call(this),this.g=new VO(O),this.l=w,this.h=O&&O.messageUrlParams||null,w=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(w?w["X-WebChannel-Content-Type"]=O.messageContentType:w={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.sa&&(w?w["X-WebChannel-Client-Profile"]=O.sa:w={"X-WebChannel-Client-Profile":O.sa}),this.g.U=w,(w=O&&O.Qb)&&!I(w)&&(this.g.u=w),this.A=O&&O.supportsCrossDomainXhr||!1,this.v=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!I(O)&&(this.g.G=O,w=this.h,w!==null&&O in w&&(w=this.h,O in w&&delete w[O])),this.j=new Xl(this)}f(gi,Be),gi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gi.prototype.close=function(){cx(this.g)},gi.prototype.o=function(w){var O=this.g;if(typeof w=="string"){var N={};N.__data__=w,w=N}else this.v&&(N={},N.__data__=Zn(w),w=N);O.i.push(new O9(O.Ya++,w)),O.I==3&&av(O)},gi.prototype.N=function(){this.g.l=null,delete this.j,cx(this.g),delete this.g,gi.Z.N.call(this)};function ek(w){Tr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var O=w.__sm__;if(O){e:{for(const N in O){w=N;break e}w=void 0}(this.i=w)&&(w=this.i,O=O!==null&&w in O?O[w]:void 0),this.data=O}else this.data=w}f(ek,Tr);function tk(){So.call(this),this.status=1}f(tk,So);function Xl(w){this.g=w}f(Xl,ZO),Xl.prototype.ra=function(){ut(this.g,"a")},Xl.prototype.qa=function(w){ut(this.g,new ek(w))},Xl.prototype.pa=function(w){ut(this.g,new tk)},Xl.prototype.oa=function(){ut(this.g,"b")},gi.prototype.send=gi.prototype.o,gi.prototype.open=gi.prototype.m,gi.prototype.close=gi.prototype.close,Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,Xr.COMPLETE="complete",Gl.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",Be.prototype.listen=Be.prototype.J,tn.prototype.listenOnce=tn.prototype.K,tn.prototype.getLastError=tn.prototype.Ha,tn.prototype.getLastErrorCode=tn.prototype.ya,tn.prototype.getStatus=tn.prototype.ca,tn.prototype.getResponseJson=tn.prototype.La,tn.prototype.getResponseText=tn.prototype.la,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Fa}).apply(typeof Wv<"u"?Wv:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fb="12.8.0";function ose(t){Fb=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=new sV("@firebase/firestore");function lo(t,...e){if(Ry.logLevel<=wt.DEBUG){const n=e.map(dV);Ry.debug(`Firestore (${Fb}): ${t}`,...n)}}function hV(t,...e){if(Ry.logLevel<=wt.ERROR){const n=e.map(dV);Ry.error(`Firestore (${Fb}): ${t}`,...n)}}function dV(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,pV(t,r,n)}function pV(t,e,n){let r=`FIRESTORE (${Fb}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw hV(r),new Error(r)}function Bd(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||pV(e,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class at extends gh{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ase{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zr.UNAUTHENTICATED))}shutdown(){}}class use{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Bd(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Ud;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ud,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},s=u=>{lo("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>s(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?s(u):(lo("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ud)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(lo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bd(typeof r.accessToken=="string",31837,{l:r}),new ase(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bd(e===null||typeof e=="string",2055,{h:e}),new Zr(e)}}class lse{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class cse{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new lse(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fse{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zae(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Bd(this.o===void 0,3512);const r=o=>{o.error!=null&&lo("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,lo("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{lo("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):lo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new HN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Bd(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new HN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hse(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dse{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=hse(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function ou(t,e){return t<e?-1:t>e?1:0}function pse(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return x1(i)===x1(o)?ou(i,o):x1(i)?1:-1}return ou(t.length,e.length)}const mse=55296,vse=57343;function x1(t){const e=t.charCodeAt(0);return e>=mse&&e<=vse}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="__name__";class Io{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ny(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ny(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Io.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Io?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Io.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ou(e.length,n.length)}static compareSegments(e,n){const r=Io.isNumericId(e),i=Io.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Io.extractNumericId(e).compare(Io.extractNumericId(n)):pse(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return uT.fromString(e.substring(4,e.length-2))}}class ao extends Io{construct(e,n,r){return new ao(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new at(ot.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ao(n)}static emptyPath(){return new ao([])}}const gse=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hu extends Io{construct(e,n,r){return new Hu(e,n,r)}static isValidIdentifier(e){return gse.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qN}static keyField(){return new Hu([qN])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new at(ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new at(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new at(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new at(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hu(n)}static emptyPath(){return new Hu([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.path=e}static fromPath(e){return new el(ao.fromString(e))}static fromName(e){return new el(ao.fromString(e).popFirst(5))}static empty(){return new el(ao.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ao.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ao.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new el(new ao(e.slice()))}}function yse(t,e,n,r){if(e===!0&&r===!0)throw new at(ot.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bse(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Mm(t,e){if(!bse(t))throw new at(ot.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new at(ot.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=-62135596800,KN=1e6;class $o{static now(){return $o.fromMillis(Date.now())}static fromDate(e){return $o.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*KN);return new $o(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new at(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new at(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<GN)throw new at(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new at(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/KN}_compareTo(e){return this.seconds===e.seconds?ou(this.nanoseconds,e.nanoseconds):ou(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$o._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mm(e,$o._jsonSchema))return new $o(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-GN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$o._jsonSchemaVersion="firestore/timestamp/1.0",$o._jsonSchema={type:fn("string",$o._jsonSchemaVersion),seconds:fn("number"),nanoseconds:fn("number")};function wse(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xse extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xse("Invalid base64 string: "+o):o}}(e);return new Tl(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new Tl(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ou(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tl.EMPTY_BYTE_STRING=new Tl("");const XN="(default)";class Dy{constructor(e,n){this.projectId=e,this.database=n||XN}static empty(){return new Dy("","")}get isDefaultDatabase(){return this.database===XN}isEqual(e){return e instanceof Dy&&e.projectId===this.projectId&&e.database===this.database}}function _se(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new at(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dy(t.options.projectId,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sse{constructor(e,n=null,r=[],i=[],o=null,a="F",s=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Ese(t){return new Sse(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YN,Qe;(Qe=YN||(YN={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new uT([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cse=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ase=1048576;function _1(){return typeof document<"u"?document:null}class Tse{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&lo("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ud,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,s=new lT(e,n,a,i,o);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new at(ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var JN,QN;(QN=JN||(JN={})).Ma="default",QN.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pse(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ose="ComponentProvider",ZN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kse="firestore.googleapis.com",eD=!0;class tD{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new at(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kse,this.ssl=eD}else this.host=e.host,this.ssl=e.ssl??eD;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cse;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ase)throw new at(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yse("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pse(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new at(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new at(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new at(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ise{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tD({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new at(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new at(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tD(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sse;switch(r.type){case"firstParty":return new cse(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new at(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ZN.get(n);r&&(lo(Ose,"Removing Datastore"),ZN.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cT(this.firestore,e,this._query)}}class Vo{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fT(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vo(this.firestore,e,this._key)}toJSON(){return{type:Vo._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Mm(n,Vo._jsonSchema))return new Vo(e,r||null,new el(ao.fromString(n.referencePath)))}}Vo._jsonSchemaVersion="firestore/documentReference/1.0",Vo._jsonSchema={type:fn("string",Vo._jsonSchemaVersion),referencePath:fn("string")};class fT extends cT{constructor(e,n,r){super(e,n,Ese(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vo(this.firestore,null,new el(e))}withConverter(e){return new fT(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="AsyncQueue";class rD{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Tse(this,"async_queue_retry"),this._c=()=>{const r=_1();r&&lo(nD,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ud;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!wse(e))throw e;lo(nD,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,hV("INTERNAL UNHANDLED ERROR: ",iD(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=lT.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Ny(47125,{Pc:iD(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function iD(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Rse extends Ise{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new rD,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rD(e),this._firestoreClient=void 0,await e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xa(Tl.fromBase64String(e))}catch(n){throw new at(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xa(Tl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:xa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mm(e,xa._jsonSchema))return xa.fromBase64String(e.bytes)}}xa._jsonSchemaVersion="firestore/bytes/1.0",xa._jsonSchema={type:fn("string",xa._jsonSchemaVersion),bytes:fn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new at(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hu(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new at(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new at(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ou(this._lat,e._lat)||ou(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vl._jsonSchemaVersion}}static fromJSON(e){if(Mm(e,vl._jsonSchema))return new vl(e.latitude,e.longitude)}}vl._jsonSchemaVersion="firestore/geoPoint/1.0",vl._jsonSchema={type:fn("string",vl._jsonSchemaVersion),latitude:fn("number"),longitude:fn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mm(e,gl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gl(e.vectorValues);throw new at(ot.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gl._jsonSchemaVersion="firestore/vectorValue/1.0",gl._jsonSchema={type:fn("string",gl._jsonSchemaVersion),vectorValues:fn("object")};function vV(t,e,n){if((e=Yoe(e))instanceof mV)return e._internalPath;if(typeof e=="string")return Dse(t,e);throw pE("Field path arguments must be of type string or ",t)}const Nse=new RegExp("[~\\*/\\[\\]]");function Dse(t,e,n){if(e.search(Nse)>=0)throw pE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new mV(...e.split("."))._internalPath}catch{throw pE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function pE(t,e,n,r,i){let o=`Function ${e}() called with invalid data`;o+=". ";let a="";return new at(ot.INVALID_ARGUMENT,o+t+a)}const oD="@firebase/firestore",aD="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Vo(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mse(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(vV("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Mse extends gV{data(){return super.data()}}class zv{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jc extends gV{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vV("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new at(ot.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Jc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Jc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jc._jsonSchema={type:fn("string",Jc._jsonSchemaVersion),bundleSource:fn("string","DocumentSnapshot"),bundleName:fn("string"),bundle:fn("string")};class Lg extends Jc{data(e={}){return super.data(e)}}class Vd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new zv(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lg(this._firestore,this._userDataWriter,r.key,r,new zv(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new at(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const u=new Lg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new zv(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const u=new Lg(i._firestore,i._userDataWriter,s.doc.key,s.doc,new zv(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return s.type!==0&&(l=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),c=a.indexOf(s.doc.key)),{type:$se(s.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new at(ot.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dse.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $se(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ny(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vd._jsonSchemaVersion="firestore/querySnapshot/1.0",Vd._jsonSchema={type:fn("string",Vd._jsonSchemaVersion),bundleSource:fn("string","QuerySnapshot"),bundleName:fn("string"),bundle:fn("string")};(function(e,n=!0){ose(qae),Iy(new ky("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),s=new Rse(new use(r.getProvider("auth-internal")),new fse(a,r.getProvider("app-check-internal")),_se(a,i),a);return o={useFetchStreams:n,...o},s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),Yc(oD,aD,e),Yc(oD,aD,"esm2020")})();const jse=()=>(console.log("Firebase config not provided, using Lovable Cloud only"),!1),Lse=async t=>null,Fse=async t=>null,hT=()=>{const{user:t}=oT(),[e,n]=R.useState(!1),r=R.useCallback(async l=>{if(!t)return{error:"Not authenticated"};n(!0);try{const{error:c}=await Si.from("student_progress").insert({user_id:t.id,level_number:l.levelNumber,game_type:l.gameType,score:l.score,is_completed:l.isCompleted,time_spent_seconds:l.timeSpentSeconds,attempts:l.attempts,completed_at:l.isCompleted?new Date().toISOString():null});if(c)throw c;return await Fse({userId:t.id,levelNumber:l.levelNumber,gameType:l.gameType,score:l.score,isCompleted:l.isCompleted,timeSpentSeconds:l.timeSpentSeconds,attempts:l.attempts,completedAt:l.isCompleted?new Date:void 0}),{error:null}}catch(c){return console.error("Error saving progress:",c),{error:c}}finally{n(!1)}},[t]),i=R.useCallback(async(l,c,f)=>{if(!t)return console.log("Cannot log emotion: user not authenticated"),{error:"Not authenticated"};try{let h=f;if(!h){const{data:v}=await Si.from("profiles").select("username").eq("user_id",t.id).single();h=(v==null?void 0:v.username)||t.email||"Unknown"}const d=t.email||"";console.log("Saving emotion to database:",{levelNumber:l,emotion:c.emotion,confidence:c.confidence,username:h,email:d});const{error:p,data:m}=await Si.from("emotion_logs").insert({user_id:t.id,level_number:l,emotion:c.emotion,confidence:c.confidence,username:h,email:d}).select();if(p)throw console.error("Supabase error saving emotion:",p),p;return console.log("Emotion saved successfully to Supabase:",m),await Lse({userId:t.id,levelNumber:l,emotion:c.emotion,confidence:c.confidence}),{error:null,data:m}}catch(h){return console.error("Error logging emotion:",h),{error:h}}},[t]),o=R.useCallback(async()=>{if(!t)return{data:null,error:"Not authenticated"};try{const{data:l,error:c}=await Si.from("student_progress").select("*").eq("user_id",t.id).order("started_at",{ascending:!1});if(c)throw c;return{data:l,error:null}}catch(l){return console.error("Error getting progress:",l),{data:null,error:l}}},[t]),a=R.useCallback(async()=>{if(!t)return{data:null,error:"Not authenticated"};try{const{data:l,error:c}=await Si.from("emotion_logs").select("*").eq("user_id",t.id).order("captured_at",{ascending:!1});if(c)throw c;return{data:l,error:null}}catch(l){return console.error("Error getting emotion logs:",l),{data:null,error:l}}},[t]),s=R.useCallback(async l=>{if(!t)return{error:"Not authenticated"};try{const{error:c}=await Si.from("profiles").update({current_level:l}).eq("user_id",t.id);if(c)throw c;return{error:null}}catch(c){return console.error("Error updating level:",c),{error:c}}},[t]),u=R.useCallback(async()=>{if(!t)return{data:null,error:"Not authenticated"};try{const{data:l,error:c}=await Si.from("profiles").select("*").eq("user_id",t.id).single();if(c)throw c;return{data:l,error:null}}catch(l){return console.error("Error getting profile:",l),{data:null,error:l}}},[t]);return{loading:e,saveProgress:r,logEmotion:i,getProgress:o,getEmotionLogs:a,updateCurrentLevel:s,getProfile:u}},yV=R.createContext(void 0),Bse={ar:{"app.title":" ","app.loading":" ...","app.reports":" ","app.logout":" ","auth.login":"  ","auth.signup":"  ","auth.username":" ","auth.email":" ","auth.password":" ","auth.loginBtn":"  ","auth.signupBtn":"  ","auth.loading":"  ...","auth.noAccount":"     ","auth.hasAccount":"   ","auth.loginError":"   ","auth.loginErrorDesc":"      ","auth.welcome":" !","auth.loginSuccess":"   ","auth.usernameError":"","auth.usernameErrorDesc":"   ","auth.signupError":"   ","auth.signupSuccess":"  !","auth.signupSuccessDesc":"      ","auth.unexpectedError":"   ","stages.title":"  ","stages.current":"","stages.completed":"","stages.locked":"","game.matching":" ","game.mcq":"  ","game.fillblank":" ","game.dragdrop":" ","game.back":"  ","game.stageNotFound":"  ","game.goBack":"","game.stage":"","game.startGame":"  !","game.keyPoints":" :","game.cameraEnabled":"  ","game.cameraDesc":"    ","game.cameraFailed":"  ","game.cameraFailedDesc":"   ","game.wellDone":"!","game.completedStage":" ","game.dominantEmotion":" :","game.emotionRecorded":"    ","matching.title":"  ","matching.desc":"      ","matching.concepts":" ","matching.answers":" ","matching.complete":"   ","mcq.title":"   ","mcq.question":"","mcq.of":"","mcq.correct":" ! ","mcq.wrong":" ","mcq.correctAnswer":" :","mcq.next":"  ","mcq.finish":" ","mcq.score":":","mcq.optionA":"","mcq.optionB":"","mcq.optionC":"","mcq.optionD":"","fill.title":"  ","fill.question":"","fill.of":"","drag.title":"  ","drag.desc":"         ","drag.selected":"    -     ","drag.swapHint":"  ","drag.check":"   ","drag.score":":","drag.excellent":"!  ","drag.retry":"   ","drag.continue":" ","dash.loading":"  ...","dash.backToGame":"  ","dash.title":" ","dash.currentLevel":" :","dash.of10":" 10","dash.completedStages":" ","dash.attempts":"","dash.minutesPlayed":" ","dash.emotionAnalysis":" ","dash.stageResults":" ","dash.emotionDist":" ","dash.noEmotionData":"    ","dash.activityLog":" ","dash.noActivity":"   ","dash.chartScore":"","dash.chartRequired":"","dash.gameType":" ","dash.scoreLabel":":","emotion.loading":" ...","emotion.analyzing":" ...","emotion.happy":"","emotion.neutral":"","emotion.sad":"","emotion.angry":"","emotion.surprised":"","emotion.fearful":"","emotion.disgusted":""},en:{"app.title":"Learn Infographics","app.loading":"Loading...","app.reports":" Reports","app.logout":" Logout","auth.login":"Sign in to continue","auth.signup":"Create your account","auth.username":"Username","auth.email":"Email","auth.password":"Password","auth.loginBtn":" Sign In","auth.signupBtn":" Create Account","auth.loading":" Loading...","auth.noAccount":"Don't have an account? Create one","auth.hasAccount":"Already have an account? Sign in","auth.loginError":"Login Error","auth.loginErrorDesc":"Invalid email or password","auth.welcome":"Welcome!","auth.loginSuccess":"Logged in successfully","auth.usernameError":"Error","auth.usernameErrorDesc":"Please enter a username","auth.signupError":"Signup Error","auth.signupSuccess":"Account Created!","auth.signupSuccessDesc":"Please check your email to verify your account","auth.unexpectedError":"An unexpected error occurred","stages.title":" Learning Journey","stages.current":"Current","stages.completed":"Completed","stages.locked":"Locked","game.matching":"Matching Game","game.mcq":"Multiple Choice","game.fillblank":"Fill in the Blank","game.dragdrop":"Sort Items","game.back":" Back to Menu","game.stageNotFound":"Stage not found","game.goBack":"Go Back","game.stage":"Stage","game.startGame":"Start Game!","game.keyPoints":"Key Points:","game.cameraEnabled":"Camera Enabled","game.cameraDesc":"Your expressions will be analyzed during play","game.cameraFailed":"Camera Failed","game.cameraFailedDesc":"Please allow camera access","game.wellDone":"Well Done!","game.completedStage":"Completed Stage","game.dominantEmotion":"Dominant Emotion:","game.emotionRecorded":"Your emotion was recorded for stage","matching.title":" Matching Game","matching.desc":"Select a concept then match it with the correct answer","matching.concepts":" Concepts","matching.answers":" Answers","matching.complete":"All matches completed successfully!","mcq.title":" Multiple Choice","mcq.question":"Question","mcq.of":"of","mcq.correct":"Correct! ","mcq.wrong":"Wrong answer","mcq.correctAnswer":"Correct answer:","mcq.next":"Next Question ","mcq.finish":"Finish ","mcq.score":"Score:","mcq.optionA":"A","mcq.optionB":"B","mcq.optionC":"C","mcq.optionD":"D","fill.title":" Fill in the Blank","fill.question":"Question","fill.of":"of","drag.title":" Sort the Items","drag.desc":"Tap an item then tap another to swap their positions","drag.selected":" Item selected - tap another to swap","drag.swapHint":"Select item to swap","drag.check":" Check Order","drag.score":"Score:","drag.excellent":"Excellent! Continue ","drag.retry":" Try Again","drag.continue":"Continue ","dash.loading":"Loading data...","dash.backToGame":" Back to Game","dash.title":"Progress Dashboard","dash.currentLevel":"Current Level:","dash.of10":"of 10","dash.completedStages":"Completed Stages","dash.attempts":"Attempts","dash.minutesPlayed":"Minutes Played","dash.emotionAnalysis":"Emotion Analysis","dash.stageResults":"Stage Results","dash.emotionDist":"Emotion Analysis","dash.noEmotionData":"No emotion data yet","dash.activityLog":"Activity Log","dash.noActivity":"No activity yet","dash.chartScore":"Score","dash.chartRequired":"Required","dash.gameType":"Game Type","dash.scoreLabel":"Score:","emotion.loading":"Loading...","emotion.analyzing":"Analyzing...","emotion.happy":"Happy","emotion.neutral":"Neutral","emotion.sad":"Sad","emotion.angry":"Angry","emotion.surprised":"Surprised","emotion.fearful":"Fearful","emotion.disgusted":"Bored"}},Use=({children:t})=>{const[e,n]=R.useState(()=>{const s=localStorage.getItem("app-language");return s==="en"||s==="ar"?s:"ar"}),r=R.useCallback(s=>{n(s),localStorage.setItem("app-language",s),document.documentElement.dir=s==="ar"?"rtl":"ltr",document.documentElement.lang=s},[]),i=R.useCallback(()=>{r(e==="ar"?"en":"ar")},[e,r]),o=R.useCallback(s=>Bse[e][s]||s,[e]),a=e==="ar";return D.jsx(yV.Provider,{value:{language:e,setLanguage:r,toggleLanguage:i,t:o,isRTL:a},children:t})},bo=()=>{const t=R.useContext(yV);if(!t)throw new Error("useLanguage must be used within LanguageProvider");return t},Vse=tB("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),jn=R.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const a=r?SK:"button";return D.jsx(a,{className:Ft(Vse({variant:e,size:n,className:t})),ref:o,...i})});jn.displayName="Button";const Fg=R.forwardRef(({className:t,type:e,...n},r)=>D.jsx("input",{type:e,className:Ft("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Fg.displayName="Input";const ur=R.forwardRef(({className:t,...e},n)=>D.jsx("div",{ref:n,className:Ft("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ur.displayName="Card";const Qc=R.forwardRef(({className:t,...e},n)=>D.jsx("div",{ref:n,className:Ft("flex flex-col space-y-1.5 p-6",t),...e}));Qc.displayName="CardHeader";const Zc=R.forwardRef(({className:t,...e},n)=>D.jsx("h3",{ref:n,className:Ft("text-2xl font-semibold leading-none tracking-tight",t),...e}));Zc.displayName="CardTitle";const bV=R.forwardRef(({className:t,...e},n)=>D.jsx("p",{ref:n,className:Ft("text-sm text-muted-foreground",t),...e}));bV.displayName="CardDescription";const Ir=R.forwardRef(({className:t,...e},n)=>D.jsx("div",{ref:n,className:Ft("p-6 pt-0",t),...e}));Ir.displayName="CardContent";const Wse=R.forwardRef(({className:t,...e},n)=>D.jsx("div",{ref:n,className:Ft("flex items-center p-6 pt-0",t),...e}));Wse.displayName="CardFooter";const zse=()=>{const[t,e]=R.useState(!0),[n,r]=R.useState(""),[i,o]=R.useState(""),[a,s]=R.useState(""),[u,l]=R.useState(!1),{signIn:c,signUp:f}=oT(),{t:h,language:d,toggleLanguage:p}=bo(),{toast:m}=aA(),v=async g=>{g.preventDefault(),l(!0);try{if(t){const{error:y}=await c(n,i);m(y?{title:h("auth.loginError"),description:h("auth.loginErrorDesc"),variant:"destructive"}:{title:h("auth.welcome"),description:h("auth.loginSuccess")})}else{if(!a.trim()){m({title:h("auth.usernameError"),description:h("auth.usernameErrorDesc"),variant:"destructive"}),l(!1);return}const{error:y}=await f(n,i,a);m(y?{title:h("auth.signupError"),description:y.message,variant:"destructive"}:{title:h("auth.signupSuccess"),description:h("auth.signupSuccessDesc")})}}catch{m({title:h("auth.usernameError"),description:h("auth.unexpectedError"),variant:"destructive"})}finally{l(!1)}};return D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:D.jsxs(ur,{className:"border-2 shadow-xl",children:[D.jsxs(Qc,{className:"text-center space-y-2",children:[D.jsx("div",{className:"flex justify-end",children:D.jsx(jn,{variant:"ghost",size:"sm",onClick:p,className:"font-bold",children:d==="ar"?"EN":""})}),D.jsx(tt.div,{initial:{scale:0},animate:{scale:1},className:"text-6xl mb-4",children:""}),D.jsx(Zc,{className:"text-3xl font-bold text-gradient",children:h("app.title")}),D.jsx(bV,{className:"text-lg",children:h(t?"auth.login":"auth.signup")})]}),D.jsxs(Ir,{children:[D.jsxs("form",{onSubmit:v,className:"space-y-4",children:[!t&&D.jsx(tt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:D.jsx(Fg,{type:"text",placeholder:h("auth.username"),value:a,onChange:g=>s(g.target.value),className:"text-lg py-6",required:!t})}),D.jsx(Fg,{type:"email",placeholder:h("auth.email"),value:n,onChange:g=>r(g.target.value),className:"text-lg py-6",required:!0}),D.jsx(Fg,{type:"password",placeholder:h("auth.password"),value:i,onChange:g=>o(g.target.value),className:"text-lg py-6",required:!0}),D.jsx(jn,{type:"submit",className:"w-full btn-game gradient-primary text-xl py-6",disabled:u,children:h(u?"auth.loading":t?"auth.loginBtn":"auth.signupBtn")})]}),D.jsx("div",{className:"mt-6 text-center",children:D.jsx("button",{type:"button",onClick:()=>e(!t),className:"text-primary hover:underline text-lg font-medium",children:h(t?"auth.noAccount":"auth.hasAccount")})})]})]})})},Hse=[{id:1,title:"What is Infographic?",icon:"",color:"from-purple-500 to-pink-500",lesson:{title:"What is Infographic?",description:"An infographic is a visual representation of information and data. It combines text, images, and graphics to communicate information clearly and attractively.",keyPoints:["Transforms complex information into easy-to-understand content","Uses visual elements to attract attention","Helps remember information better","Widely used in education, marketing, and media"]},gameType:"matching",matchingItems:[{id:"1",concept:"Infographic",image:"Visual representation of information"},{id:"2",concept:"Visual Elements",image:"Attract attention"},{id:"3",concept:"Short Texts",image:"Prevent boredom"}],requiredScore:3},{id:2,title:"Types of Infographics",icon:"",color:"from-blue-500 to-cyan-500",lesson:{title:"Types of Infographics",description:"There are multiple types of infographics, each suited for a specific purpose.",keyPoints:["Statistical Infographic: for displaying numbers and statistics","Timeline Infographic: for showing chronological sequence of events","Comparison Infographic: for comparing different elements","Geographic Infographic: for displaying data on maps"]},gameType:"mcq",mcqQuestions:[{question:"Which type of infographic is used to display numbers?",options:["Timeline Infographic","Statistical Infographic","Geographic Infographic","Comparison Infographic"],correctIndex:1},{question:"What infographic type is suitable for showing a company's history?",options:["Timeline Infographic","Statistical Infographic","Comparison Infographic","Educational Infographic"],correctIndex:0},{question:"Which type is best for displaying country data on a map?",options:["Educational Infographic","Timeline Infographic","Geographic Infographic","Comparison Infographic"],correctIndex:2}],requiredScore:2},{id:3,title:"Visual Hierarchy",icon:"",color:"from-green-500 to-teal-500",lesson:{title:"Visual Hierarchy",description:"Visual hierarchy is arranging elements by importance to guide the reader's eye.",keyPoints:["Larger elements attract attention first","Bright colors stand out more","Top position means greater importance","Contrast helps highlight important elements"]},gameType:"dragdrop",dragDropItems:[{id:"1",content:"Main Title",correctOrder:1},{id:"2",content:"Subtitle",correctOrder:2},{id:"3",content:"Main Content",correctOrder:3},{id:"4",content:"Additional Details",correctOrder:4}],requiredScore:4},{id:4,title:"Colors & Fonts",icon:"",color:"from-orange-500 to-red-500",lesson:{title:"Colors & Fonts",description:"Choosing the right colors and fonts is essential for a successful infographic.",keyPoints:["Use only 2-4 harmonious colors","Warm colors express energy and enthusiasm","Cool colors express calm and trust","Choose clear and easy-to-read fonts"]},gameType:"fillblank",fillBlankQuestions:[{sentence:"It's preferred to use ___ harmonious colors in design",blank:"2-4",options:["10-15","2-4","Only 1","20 or more"],correctIndex:1},{sentence:"___ colors express energy and enthusiasm",blank:"Warm",options:["Cool","Warm","Gray","Black"],correctIndex:1},{sentence:"Fonts should be ___ and easy to read",blank:"clear",options:["Complex","Very small","Clear","Decorative"],correctIndex:2}],requiredScore:2},{id:5,title:"Icons & Symbols",icon:"",color:"from-yellow-500 to-amber-500",lesson:{title:"Icons & Symbols",description:"Icons help convey meaning quickly and make the design more attractive.",keyPoints:["Choose simple and clear icons","Maintain a consistent icon style","Use universally understood symbols","Don't overuse icons in a single design"]},gameType:"matching",matchingItems:[{id:"1",concept:"Simple Icons",image:"Make understanding easier"},{id:"2",concept:"Consistent Style",image:"Gives an organized look"},{id:"3",concept:"Too Many Icons",image:"Causes distraction"}],requiredScore:3},{id:6,title:"Design Rules",icon:"",color:"from-indigo-500 to-purple-500",lesson:{title:"Design Rules",description:"There are fundamental rules that make design balanced and comfortable for the eye.",keyPoints:["Rule of Thirds: divide the design into 3 parts","Balance: distribute elements equally","Alignment: arrange elements on imaginary lines","Repetition: use similar elements for consistency"]},gameType:"mcq",mcqQuestions:[{question:"What is the Rule of Thirds in design?",options:["Using 3 colors","Dividing design into 3 parts","Using 3 fonts","Adding 3 images"],correctIndex:1},{question:"What does balance mean in design?",options:["Using similar colors","Distributing elements equally","Using one font","Adding many images"],correctIndex:1},{question:"What is the benefit of repetition in design?",options:["Making design boring","Achieving consistency","Increasing complexity","Reducing elements"],correctIndex:1}],requiredScore:2},{id:7,title:"Data Presentation",icon:"",color:"from-teal-500 to-green-500",lesson:{title:"Data Presentation",description:"Choosing the right way to present data is essential for delivering the message.",keyPoints:["Pie Chart: for percentages","Bar Chart: for comparisons","Line Chart: for changes over time","Tables: for detailed data"]},gameType:"dragdrop",dragDropItems:[{id:"1",content:"Collect Data",correctOrder:1},{id:"2",content:"Analyze Data",correctOrder:2},{id:"3",content:"Choose Chart Type",correctOrder:3},{id:"4",content:"Design Visual Representation",correctOrder:4}],requiredScore:4},{id:8,title:"Common Mistakes",icon:"",color:"from-red-500 to-pink-500",lesson:{title:"Common Infographic Mistakes",description:"Learn about common mistakes to avoid them in your designs.",keyPoints:["Too much text and information","Using too many clashing colors","Lack of clear hierarchy","Using low-quality images"]},gameType:"fillblank",fillBlankQuestions:[{sentence:"A common mistake is having ___ text and information",blank:"too much",options:["Too little","Too much","Organized","Arranged"],correctIndex:1},{sentence:"Avoid using ___ and clashing colors",blank:"too many",options:["Few","Harmonious","Too many","Calm"],correctIndex:2},{sentence:"Images should be of ___ quality",blank:"high",options:["Low","High","Medium","Poor"],correctIndex:1}],requiredScore:2},{id:9,title:"Analyzing Real Examples",icon:"",color:"from-cyan-500 to-blue-500",lesson:{title:"Analyzing Real Examples",description:"Learn from analyzing successful infographics and understanding their success factors.",keyPoints:["Observe the visual hierarchy","Identify the colors used and why they were chosen","Pay attention to how data is presented","Evaluate the clarity of the main message"]},gameType:"mcq",mcqQuestions:[{question:"What's the first thing to notice when analyzing an infographic?",options:["Number of colors","Visual hierarchy","Font size","Number of images"],correctIndex:1},{question:"Why do we analyze real examples?",options:["To copy them exactly","To learn from their success","Just to criticize","To compare prices"],correctIndex:1},{question:"What is the most important criterion for a successful infographic?",options:["Many colors","Clear message","Long text","Many pages"],correctIndex:1}],requiredScore:2},{id:10,title:"Final Challenge",icon:"",color:"from-amber-500 to-orange-500",lesson:{title:"Final Challenge",description:"Time to test everything you've learned! Prove you've become an infographic pro.",keyPoints:["Review all previous concepts","Apply the rules in your choices","Think like a professional designer","Trust what you've learned!"]},gameType:"dragdrop",dragDropItems:[{id:"1",content:"Define Goal & Audience",correctOrder:1},{id:"2",content:"Collect & Analyze Data",correctOrder:2},{id:"3",content:"Choose Appropriate Type",correctOrder:3},{id:"4",content:"Design Initial Layout",correctOrder:4},{id:"5",content:"Add Visual Elements",correctOrder:5},{id:"6",content:"Review & Improve",correctOrder:6}],requiredScore:6}],qse=[{id:1,title:"  ",icon:"",color:"from-purple-500 to-pink-500",lesson:{title:"  ",description:"     .          .",keyPoints:["      ","    ","     ","    "]},gameType:"matching",matchingItems:[{id:"1",concept:"",image:"  "},{id:"2",concept:" ",image:" "},{id:"3",concept:" ",image:" "}],requiredScore:3},{id:2,title:" ",icon:"",color:"from-blue-500 to-cyan-500",lesson:{title:" ",description:"         .",keyPoints:[" :   "," :    "," :    "," :    "]},gameType:"mcq",mcqQuestions:[{question:"      ",options:[" "," "," "," "],correctIndex:1},{question:"      ",options:[" "," "," "," "],correctIndex:0},{question:"       ",options:[" "," "," "," "],correctIndex:2}],requiredScore:2},{id:3,title:" ",icon:"",color:"from-green-500 to-teal-500",lesson:{title:" ",description:"         .",keyPoints:["    ","   ","     ","     "]},gameType:"dragdrop",dragDropItems:[{id:"1",content:" ",correctOrder:1},{id:"2",content:" ",correctOrder:2},{id:"3",content:" ",correctOrder:3},{id:"4",content:" ",correctOrder:4}],requiredScore:4},{id:4,title:" ",icon:"",color:"from-orange-500 to-red-500",lesson:{title:" ",description:"      .",keyPoints:[" 2-4   ","     ","     ","    "]},gameType:"fillblank",fillBlankQuestions:[{sentence:"  ___    ",blank:"2-4",options:["10-15","2-4","1 ","20  "],correctIndex:1},{sentence:" ___    ",blank:"",options:["","","",""],correctIndex:1},{sentence:"    ___  ",blank:"",options:[""," ","",""],correctIndex:2}],requiredScore:2},{id:5,title:" ",icon:"",color:"from-yellow-500 to-amber-500",lesson:{title:" ",description:"         .",keyPoints:["   ","    ","   ","      "]},gameType:"matching",matchingItems:[{id:"1",concept:" ",image:" "},{id:"2",concept:" ",image:"  "},{id:"3",concept:" ",image:" "}],requiredScore:3},{id:6,title:" ",icon:"",color:"from-indigo-500 to-purple-500",lesson:{title:" ",description:"       .",keyPoints:[" :    3 ",":    ",":     ",":    "]},gameType:"mcq",mcqQuestions:[{question:"     ",options:[" 3 ","   3 "," 3 "," 3 "],correctIndex:1},{question:"    ",options:["  ","   ","  ","   "],correctIndex:1},{question:"    ",options:["  "," "," "," "],correctIndex:1}],requiredScore:2},{id:7,title:" ",icon:"",color:"from-teal-500 to-green-500",lesson:{title:" ",description:"        .",keyPoints:["  :  ","  : ","  :   ",":  "]},gameType:"dragdrop",dragDropItems:[{id:"1",content:" ",correctOrder:1},{id:"2",content:" ",correctOrder:2},{id:"3",content:"  ",correctOrder:3},{id:"4",content:"  ",correctOrder:4}],requiredScore:4},{id:8,title:" ",icon:"",color:"from-red-500 to-pink-500",lesson:{title:"   ",description:"      .",keyPoints:["  ","   ","   ","    "]},gameType:"fillblank",fillBlankQuestions:[{sentence:"   ___  ",blank:"",options:["","","",""],correctIndex:1},{sentence:"    ___ ",blank:"",options:["","","",""],correctIndex:2},{sentence:"      ___",blank:"",options:["","","",""],correctIndex:1}],requiredScore:2},{id:9,title:"  ",icon:"",color:"from-cyan-500 to-blue-500",lesson:{title:"  ",description:"       .",keyPoints:["  ","    ","   ","   "]},gameType:"mcq",mcqQuestions:[{question:"       ",options:[" "," "," "," "],correctIndex:1},{question:"   ",options:[" ","  "," "," "],correctIndex:1},{question:"    ",options:[" "," "," "," "],correctIndex:1}],requiredScore:2},{id:10,title:" ",icon:"",color:"from-amber-500 to-orange-500",lesson:{title:" ",description:"     !      .",keyPoints:["   ","   ","  ","  !"]},gameType:"dragdrop",dragDropItems:[{id:"1",content:"  ",correctOrder:1},{id:"2",content:"  ",correctOrder:2},{id:"3",content:"  ",correctOrder:3},{id:"4",content:"  ",correctOrder:4},{id:"5",content:"  ",correctOrder:5},{id:"6",content:" ",correctOrder:6}],requiredScore:6}],Gse=t=>({matching:"",mcq:"",fillblank:"",dragdrop:""})[t],Bb=t=>t==="en"?Hse:qse,wV=(t,e)=>({ar:{matching:" ",mcq:"  ",fillblank:" ",dragdrop:" "},en:{matching:"Matching",mcq:"Multiple Choice",fillblank:"Fill Blank",dragdrop:"Sort Items"}})[e][t],Kse=({currentLevel:t,completedLevels:e,onSelectStage:n})=>{const{t:r,language:i}=bo(),o=Bb(i);return D.jsxs("div",{className:"max-w-4xl mx-auto",children:[D.jsx("div",{className:"text-center mb-8",children:D.jsx("h1",{className:"text-4xl font-bold text-gradient mb-2",children:r("stages.title")})}),D.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:o.map((a,s)=>{const u=e.includes(a.id),l=a.id>t&&!u,c=a.id===t;return D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.05},whileHover:{scale:l?1:1.05},whileTap:{scale:l?1:.95},children:D.jsxs(ur,{className:`cursor-pointer transition-all border-2 relative overflow-hidden ${l?"opacity-50 cursor-not-allowed bg-muted":u?"bg-success/10 border-success":c?"border-primary animate-pulse-glow":"hover:border-primary/50"}`,onClick:()=>!l&&n(a.id),children:[D.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${a.color} opacity-10`}),D.jsxs(Ir,{className:"p-4 text-center relative",children:[D.jsx("div",{className:"text-4xl mb-2",children:a.icon}),D.jsx("p",{className:"font-bold text-sm mb-1 line-clamp-2",children:a.title}),D.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[D.jsx("span",{children:Gse(a.gameType)}),D.jsx("span",{children:wV(a.gameType,i)})]}),D.jsx("div",{className:"mt-2",children:l?D.jsx("span",{className:"text-lg",children:""}):u?D.jsx("span",{className:"text-lg",children:""}):c?D.jsx("span",{className:"inline-block px-2 py-1 bg-primary text-primary-foreground text-xs rounded-full",children:r("stages.current")}):null})]})]})},a.id)})}),D.jsxs("div",{className:"mt-8 flex justify-center gap-6 text-sm text-muted-foreground",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{children:""}),D.jsx("span",{children:r("stages.completed")})]}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"w-3 h-3 rounded-full bg-primary animate-pulse"}),D.jsx("span",{children:r("stages.current")})]}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{children:""}),D.jsx("span",{children:r("stages.locked")})]})]})]})},Xse=({lesson:t,stageNumber:e,stageIcon:n,onStartGame:r})=>{const{t:i}=bo();return D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:D.jsxs(ur,{className:"border-2 shadow-xl overflow-hidden",children:[D.jsxs(Qc,{className:"gradient-primary text-primary-foreground pb-8",children:[D.jsxs("div",{className:"flex items-center justify-between",children:[D.jsx("span",{className:"text-5xl",children:n}),D.jsxs("span",{className:"bg-white/20 px-4 py-2 rounded-full text-lg font-bold",children:[i("game.stage")," ",e]})]}),D.jsx(Zc,{className:"text-3xl font-bold mt-4",children:t.title})]}),D.jsxs(Ir,{className:"p-6 space-y-6",children:[D.jsx("p",{className:"text-xl leading-relaxed text-muted-foreground",children:t.description}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[D.jsx("span",{children:""}),i("game.keyPoints")]}),D.jsx("ul",{className:"space-y-3",children:t.keyPoints.map((o,a)=>D.jsxs(tt.li,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:a*.1},className:"flex items-start gap-3 bg-muted/50 p-4 rounded-xl",children:[D.jsx("span",{className:"text-2xl",children:""}),D.jsx("span",{className:"text-lg",children:o})]},a))})]}),D.jsx(tt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:D.jsxs(jn,{onClick:r,className:"w-full btn-game gradient-secondary text-xl py-8",children:[D.jsx("span",{className:"text-2xl ml-2",children:""}),i("game.startGame")]})})]})]})})},Yse=({items:t,onComplete:e})=>{const{t:n}=bo(),[r,i]=R.useState(null),[o,a]=R.useState([]),[s,u]=R.useState(null),l=[...t].sort(()=>Math.random()-.5),c=h=>{o.includes(h)||(i(h),u(null))},f=R.useCallback(h=>{if(!(!r||o.includes(h)))if(r===h){const d=[...o,h];a(d),i(null),d.length===t.length&&setTimeout(()=>e(t.length),500)}else u(h),setTimeout(()=>u(null),500)},[r,o,t,e]);return D.jsxs("div",{className:"max-w-4xl mx-auto",children:[D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("h2",{className:"text-2xl font-bold mb-2",children:n("matching.title")}),D.jsx("p",{className:"text-muted-foreground text-lg",children:n("matching.desc")}),D.jsx("div",{className:"mt-4 flex justify-center gap-2",children:t.map((h,d)=>D.jsx("div",{className:`w-4 h-4 rounded-full transition-all ${d<o.length?"bg-success":"bg-muted"}`},d))})]}),D.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[D.jsxs("div",{className:"space-y-4",children:[D.jsx("h3",{className:"text-xl font-bold text-center mb-4",children:n("matching.concepts")}),t.map(h=>D.jsx(tt.div,{whileHover:{scale:o.includes(h.id)?1:1.02},whileTap:{scale:.98},children:D.jsx(ur,{className:`cursor-pointer transition-all border-2 ${o.includes(h.id)?"bg-success/20 border-success opacity-50":r===h.id?"border-primary shadow-lg animate-pulse-glow":"hover:border-primary/50"}`,onClick:()=>c(h.id),children:D.jsx(Ir,{className:"p-4 text-center",children:D.jsx("span",{className:"text-lg font-medium",children:h.concept})})})},h.id))]}),D.jsxs("div",{className:"space-y-4",children:[D.jsx("h3",{className:"text-xl font-bold text-center mb-4",children:n("matching.answers")}),l.map(h=>D.jsx(tt.div,{whileHover:{scale:o.includes(h.id)?1:1.02},whileTap:{scale:.98},animate:s===h.id?{x:[0,-10,10,-10,10,0]}:{},children:D.jsx(ur,{className:`cursor-pointer transition-all border-2 ${o.includes(h.id)?"bg-success/20 border-success opacity-50":s===h.id?"border-destructive bg-destructive/10":"hover:border-secondary/50"}`,onClick:()=>f(h.id),children:D.jsx(Ir,{className:"p-4 text-center",children:D.jsx("span",{className:"text-lg font-medium",children:h.image})})})},h.id))]})]}),D.jsx(mh,{children:o.length===t.length&&D.jsx(tt.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm z-50",children:D.jsxs(ur,{className:"p-8 text-center",children:[D.jsx("div",{className:"text-6xl mb-4",children:""}),D.jsx("h2",{className:"text-3xl font-bold mb-2",children:n("game.wellDone")}),D.jsx("p",{className:"text-xl text-muted-foreground",children:n("matching.complete")})]})})})]})},Jse=({questions:t,onComplete:e})=>{const{t:n}=bo(),[r,i]=R.useState(0),[o,a]=R.useState(0),[s,u]=R.useState(null),[l,c]=R.useState(!1),[f,h]=R.useState(!1),d=t[r],p=[n("mcq.optionA"),n("mcq.optionB"),n("mcq.optionC"),n("mcq.optionD")],m=g=>{if(l)return;u(g);const y=g===d.correctIndex;h(y),c(!0),y&&a(b=>b+1)},v=()=>{r<t.length-1?(i(g=>g+1),u(null),c(!1)):e(o)};return D.jsxs("div",{className:"max-w-2xl mx-auto",children:[D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("h2",{className:"text-2xl font-bold mb-2",children:n("mcq.title")}),D.jsxs("p",{className:"text-muted-foreground text-lg",children:[n("mcq.question")," ",r+1," ",n("mcq.of")," ",t.length]}),D.jsx("div",{className:"mt-4 flex justify-center gap-2",children:t.map((g,y)=>D.jsx("div",{className:`w-4 h-4 rounded-full transition-all ${y<r?"bg-success":y===r?"bg-primary":"bg-muted"}`},y))})]}),D.jsx(mh,{mode:"wait",children:D.jsx(tt.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:D.jsx(ur,{className:"border-2 shadow-xl",children:D.jsxs(Ir,{className:"p-6",children:[D.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:d.question}),D.jsx("div",{className:"space-y-3",children:d.options.map((g,y)=>D.jsx(tt.div,{whileHover:{scale:l?1:1.02},whileTap:{scale:.98},children:D.jsxs(jn,{variant:"outline",className:`w-full py-6 text-lg justify-start transition-all ${l?y===d.correctIndex?"bg-success/20 border-success text-success-foreground":s===y?"bg-destructive/20 border-destructive":"":s===y?"border-primary bg-primary/10":""}`,onClick:()=>m(y),disabled:l,children:[D.jsx("span",{className:"ml-3 text-xl",children:p[y]}),g]})},y))}),l&&D.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center",children:[D.jsx("div",{className:`text-4xl mb-2 ${f?"animate-bounce-in":"animate-wiggle"}`,children:f?"":""}),D.jsx("p",{className:`text-xl font-bold ${f?"text-success":"text-destructive"}`,children:n(f?"mcq.correct":"mcq.wrong")}),!f&&D.jsxs("p",{className:"text-muted-foreground mt-2",children:[n("mcq.correctAnswer")," ",d.options[d.correctIndex]]}),D.jsx(jn,{onClick:v,className:"mt-4 btn-game gradient-primary",children:r<t.length-1?n("mcq.next"):n("mcq.finish")})]})]})})},r)}),D.jsx("div",{className:"mt-6 text-center",children:D.jsxs("p",{className:"text-xl font-bold",children:[n("mcq.score")," ",D.jsx("span",{className:"text-success",children:o})," / ",t.length]})})]})},Qse=({questions:t,onComplete:e})=>{const{t:n}=bo(),[r,i]=R.useState(0),[o,a]=R.useState(0),[s,u]=R.useState(null),[l,c]=R.useState(!1),[f,h]=R.useState(!1),d=t[r],p=d.sentence.split("___"),m=g=>{if(l)return;u(g);const y=g===d.correctIndex;h(y),c(!0),y&&a(b=>b+1)},v=()=>{r<t.length-1?(i(g=>g+1),u(null),c(!1)):e(o)};return D.jsxs("div",{className:"max-w-2xl mx-auto",children:[D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("h2",{className:"text-2xl font-bold mb-2",children:n("fill.title")}),D.jsxs("p",{className:"text-muted-foreground text-lg",children:[n("fill.question")," ",r+1," ",n("fill.of")," ",t.length]}),D.jsx("div",{className:"mt-4 flex justify-center gap-2",children:t.map((g,y)=>D.jsx("div",{className:`w-4 h-4 rounded-full transition-all ${y<r?"bg-success":y===r?"bg-primary":"bg-muted"}`},y))})]}),D.jsx(mh,{mode:"wait",children:D.jsx(tt.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:D.jsx(ur,{className:"border-2 shadow-xl",children:D.jsxs(Ir,{className:"p-6",children:[D.jsxs("div",{className:"text-xl font-medium mb-8 text-center leading-relaxed bg-muted/50 p-6 rounded-xl",children:[p[0],D.jsx("span",{className:`mx-2 px-4 py-1 rounded-lg font-bold ${l?f?"bg-success text-success-foreground":"bg-destructive text-destructive-foreground":"bg-primary/20 text-primary border-2 border-dashed border-primary"}`,children:l?d.options[d.correctIndex]:""}),p[1]]}),D.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.options.map((g,y)=>D.jsx(tt.div,{whileHover:{scale:l?1:1.02},whileTap:{scale:.98},children:D.jsx(jn,{variant:"outline",className:`w-full py-6 text-lg transition-all ${l?y===d.correctIndex?"bg-success/20 border-success":s===y?"bg-destructive/20 border-destructive":"":s===y?"border-primary bg-primary/10":""}`,onClick:()=>m(y),disabled:l,children:g})},y))}),l&&D.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center",children:[D.jsx("div",{className:`text-4xl mb-2 ${f?"animate-bounce-in":"animate-wiggle"}`,children:f?"":""}),D.jsx("p",{className:`text-xl font-bold ${f?"text-success":"text-destructive"}`,children:n(f?"mcq.correct":"mcq.wrong")}),D.jsx(jn,{onClick:v,className:"mt-4 btn-game gradient-primary",children:r<t.length-1?n("mcq.next"):n("mcq.finish")})]})]})})},r)}),D.jsx("div",{className:"mt-6 text-center",children:D.jsxs("p",{className:"text-xl font-bold",children:[n("mcq.score")," ",D.jsx("span",{className:"text-success",children:o})," / ",t.length]})})]})},Zse=({id:t,content:e,index:n,isSelected:r,isCorrect:i,showResult:o,swapHint:a,onTap:s})=>D.jsx(tt.div,{className:"cursor-pointer",whileHover:{scale:1.02},whileTap:{scale:.98},layout:!0,onClick:()=>s(n),children:D.jsx(ur,{className:`border-2 transition-all ${o?i?"bg-success/20 border-success":"bg-destructive/20 border-destructive":r?"shadow-xl border-primary bg-primary/10 ring-2 ring-primary ring-offset-2":"hover:border-primary/50"}`,children:D.jsxs(Ir,{className:"p-4 flex items-center gap-4",children:[D.jsx("span",{className:`text-2xl transition-transform ${r?"scale-125":""}`,children:r?"":""}),D.jsx("span",{className:"text-lg font-medium flex-1",children:e}),o&&D.jsx("span",{className:"text-2xl",children:i?"":""}),r&&!o&&D.jsx("span",{className:"text-sm text-primary font-medium animate-pulse",children:a})]})})}),eue=({items:t,onComplete:e})=>{const{t:n}=bo(),[r,i]=R.useState(()=>[...t].sort(()=>Math.random()-.5)),[o,a]=R.useState(null),[s,u]=R.useState(!1),[l,c]=R.useState(0),f=R.useCallback(v=>{s||(o===null?a(v):(o===v||i(g=>{const y=[...g],b=y[o];return y[o]=y[v],y[v]=b,y}),a(null)))},[o,s]),h=()=>{let v=0;r.forEach((g,y)=>{g.correctOrder===y+1&&v++}),c(v),u(!0)},d=()=>e(l),p=()=>{i([...t].sort(()=>Math.random()-.5)),u(!1),c(0),a(null)},m=(v,g)=>v.correctOrder===g+1;return D.jsxs("div",{className:"max-w-2xl mx-auto",children:[D.jsxs("div",{className:"text-center mb-8",children:[D.jsx("h2",{className:"text-2xl font-bold mb-2",children:n("drag.title")}),D.jsx("p",{className:"text-muted-foreground text-lg",children:n("drag.desc")}),o!==null&&D.jsx(tt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-primary font-medium mt-2",children:n("drag.selected")})]}),D.jsx("div",{className:"space-y-3",children:D.jsx(mh,{mode:"popLayout",children:r.map((v,g)=>D.jsx(Zse,{id:v.id,content:v.content,index:g,isSelected:o===g,isCorrect:m(v,g),showResult:s,swapHint:n("drag.swapHint"),onTap:f},v.id))})}),D.jsx("div",{className:"mt-8 text-center space-y-4",children:s?D.jsxs(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[D.jsx("div",{className:`text-4xl mb-4 ${l===t.length?"animate-bounce-in":""}`,children:l===t.length?"":""}),D.jsxs("p",{className:"text-2xl font-bold mb-4",children:[n("drag.score")," ",D.jsx("span",{className:"text-success",children:l})," / ",t.length]}),l===t.length?D.jsx(jn,{onClick:d,className:"btn-game gradient-success text-xl",children:n("drag.excellent")}):D.jsxs("div",{className:"space-x-4 space-x-reverse",children:[D.jsx(jn,{onClick:p,variant:"outline",className:"btn-game",children:n("drag.retry")}),D.jsx(jn,{onClick:d,className:"btn-game gradient-primary",children:n("drag.continue")})]})]}):D.jsx(jn,{onClick:h,className:"btn-game gradient-primary text-xl",children:n("drag.check")})})]})},tue=({videoRef:t,currentEmotion:e,isActive:n,isLoading:r=!1,emotionsCount:i=0})=>{const{t:o}=bo();return D.jsx(tt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed bottom-4 left-4 z-40",children:D.jsxs(ur,{className:"overflow-hidden shadow-xl border-2 border-primary/20",children:[D.jsxs("div",{className:"relative",children:[D.jsx("video",{ref:t,className:"w-32 h-24 object-cover",style:{transform:"scaleX(-1)"},autoPlay:!0,muted:!0,playsInline:!0}),r&&D.jsxs("div",{className:"absolute inset-0 bg-background/80 flex flex-col items-center justify-center",children:[D.jsx(y7,{className:"w-6 h-6 animate-spin text-primary"}),D.jsx("span",{className:"text-xs mt-1",children:o("emotion.loading")})]}),!n&&!r&&D.jsx("div",{className:"absolute inset-0 bg-background/80 flex items-center justify-center",children:D.jsx("span",{className:"text-2xl",children:""})}),i>0&&D.jsx("div",{className:"absolute top-1 right-1 bg-primary text-primary-foreground text-xs px-1.5 py-0.5 rounded-full",children:i})]}),D.jsx(mh,{mode:"wait",children:e?D.jsxs(tt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-2 bg-card text-center",children:[D.jsx("span",{className:"text-2xl",children:e.emoji}),D.jsx("p",{className:"text-sm font-medium",children:e.arabicLabel}),D.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(e.confidence*100),"%"]})]},e.emotion):n?D.jsxs(tt.div,{initial:{opacity:0},animate:{opacity:1},className:"p-2 bg-card text-center",children:[D.jsx("span",{className:"text-lg",children:""}),D.jsx("p",{className:"text-xs text-muted-foreground",children:o("emotion.analyzing")})]}):null})]})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var xV=function(t,e){return(xV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};function wo(t,e){function n(){this.constructor=t}xV(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Se(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,[])).next())})}function Ee(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(f){c=[6,f],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var nue=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var i=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+i+"."),this.set(e,i)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,i=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return rue(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var a=o.split(":"),s=a[0],u=a[1];e.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},t}();function rue(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function ne(){return _V}var _V=null,My=new Map,mE=new Map;function SV(t,e){var n=CV(t,e);return My.get(n)}function iue(t){return mE.get(t)}function sD(t){for(var e=My.entries(),n=[];;){var r=e.next(),i=r.done,o=r.value;if(i)break;var a=o[0],s=o[1];a.split("_")[0]===t&&n.push(s)}return n}function EV(t){var e=t.kernelName,n=t.backendName,r=CV(e,n);if(My.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");My.set(r,t)}function oue(t){var e=t.kernelName;mE.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),mE.set(e,t)}function CV(t,e){return e+"_"+t}function vE(t,e,n){return Math.max(t,Math.min(e,n))}function AV(t){return t%2==0?t:t+1}function aue(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function V(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function ft(t,e,n){n===void 0&&(n=""),V(Fn(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function yh(t){V(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Rf(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||Yo(t)&&!n)for(var r=0;r<t.length;++r)Rf(t[r],e,n);else e.push(t);return e}function Ae(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function Fn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function rn(t){return t%1==0}function sue(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function gE(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function ef(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function uD(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,i){var o=0,a=function(){if(t())r();else{o++;var s=e(o);n!=null&&o>=n?i():setTimeout(a,s)}};a()})}function uue(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var o=t.slice();return o[r]=e/n,o}function On(t,e){var n=e.length;return V((t=t==null?e.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),V(t.every(function(r){return rn(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function qu(t,e){for(var n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||i?null:On(e,t).sort(),a=0,s=0;s<t.length;++s){if(o!=null){if(o[a]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(o[a]==null||o[a]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),o[a]<=s&&a++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function Ip(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function $y(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function lue(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function cue(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function fue(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function Yo(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function TV(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function hue(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=n.length}),e}function dT(t){return typeof t=="string"||t instanceof String}function due(t){return typeof t=="boolean"}function pue(t){return typeof t=="number"}function $m(t){return Array.isArray(t)?$m(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":pue(t)?"float32":dT(t)?"string":due(t)?"bool":"float32"}function yE(t){return!!(t&&t.constructor&&t.call&&t.apply)}function bE(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function Jo(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function PV(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Rf(t)),n&&lue(t,e),function(o,a){return o instanceof Float32Array&&a==="float32"||o instanceof Int32Array&&a==="int32"||o instanceof Uint8Array&&a==="bool"}(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function lD(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,i){return r*i});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function r(i,o,a){var s=new Array;if(o.length===1)for(var u=o[0],l=0;l<u;l++)s[l]=a[i+l];else{u=o[0];var c=o.slice(1),f=c.reduce(function(h,d){return h*d});for(l=0;l<u;l++)s[l]=r(i+l*f,c,a)}return s}(0,t,e)}function OV(t,e){for(var n=jm(t,e),r=0;r<n.length;r++)n[r]=1;return n}function jm(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function jo(){return ne().platform.now()}function kV(t){t.forEach(function(e){V(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function mue(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ne().platform.encode(t,e)}function jy(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",ne().platform.decode(t,e)}function cD(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function vue(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}var gue=function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new yue)}return t.prototype.profileKernel=function(e,n,r){var i,o=this,a=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,c,f){if(c!=="float32")return!1;for(var h=0;h<l.length;h++){var d=l[h];if(isNaN(d)||!isFinite(d))return console.warn("Found "+d+" in the result of '"+f+"'"),!0}})(u,s.dtype,e),a.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),o.logger.logKernelProfile(e,s,u,l.kernelMs,n,c)})})}),i},t}(),yue=function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,i,o,a){var s=typeof i=="number"?ef(i+"ms",9):i.error,u=ef(e,25),l=n.rank,c=n.size,f=ef(n.shape.toString(),14),h="";for(var d in o){var p=o[d].shape||n.shape,m=p.length;h+=d+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+c+"	%c"+h+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),fD=20,nd=3,S1=7;function bue(t,e,n,r){var i=Jo(e),o=function(l,c,f,h){var d=Ae(c),p=h[h.length-1],m=new Array(p).fill(0),v=c.length,g=f==="complex64"?id(l):l;if(v>1)for(var y=0;y<d/p;y++)for(var b=y*p,_=0;_<p;_++)m[_]=Math.max(m[_],rd(g[b+_],0,f).length);return m}(t,e,n,i),a=e.length,s=function l(c,f,h,d,p,m){m===void 0&&(m=!0);var v=h==="complex64"?2:1,g=f[0],y=f.length;if(y===0)return h==="complex64"?[rd(id(c)[0],0,h)]:h==="bool"?[IV(c[0])]:[c[0].toString()];if(y===1){if(g>fD){var b=nd*v,_=Array.from(c.slice(0,b)),x=Array.from(c.slice((g-nd)*v,g*v));return h==="complex64"&&(_=id(_),x=id(x)),["["+_.map(function(B,z){return rd(B,p[z],h)}).join(", ")+", ..., "+x.map(function(B,z){return rd(B,p[g-nd+z],h)}).join(", ")+"]"]}return["["+(h==="complex64"?id(c):Array.from(c)).map(function(B,z){return rd(B,p[z],h)}).join(", ")+"]"]}var S=f.slice(1),E=d.slice(1),C=d[0]*v,A=[];if(g>fD){for(var T=0;T<nd;T++){var P=(k=T*C)+C;A.push.apply(A,l(c.slice(k,P),S,h,E,p,!1))}for(A.push("..."),T=g-nd;T<g;T++)P=(k=T*C)+C,A.push.apply(A,l(c.slice(k,P),S,h,E,p,T===g-1))}else for(T=0;T<g;T++){var k;P=(k=T*C)+C,A.push.apply(A,l(c.slice(k,P),S,h,E,p,T===g-1))}var I=y===2?",":"";for(A[0]="["+A[0]+I,T=1;T<A.length-1;T++)A[T]=" "+A[T]+I;var $=`,
`;for(T=2;T<y;T++)$+=`
`;return A[A.length-1]=" "+A[A.length-1]+"]"+(m?"":$),A}(t,e,n,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function rd(t,e,n){return ef(Array.isArray(t)?parseFloat(t[0].toFixed(S1))+" + "+parseFloat(t[1].toFixed(S1))+"j":dT(t)?"'"+t+"'":n==="bool"?IV(t):parseFloat(t.toFixed(S1)).toString(),e)}function IV(t){return t===0?"false":"true"}function id(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Rp=function(){function t(e,n,r){var i=this;if(this.dtype=n,this.shape=e.slice(),this.size=Ae(e),r!=null){var o=r.length;V(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||$y(n,this.size),this.strides=Jo(e)}return t.prototype.set=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),V(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var o=this.locToIndex(r);this.values[o]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,i=0,o=e;i<o.length;i++){var a=o[i];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Fo().makeTensor(this.values,this.shape,this.dtype)},t}(),Fo=null,ee=null,RV=null,Wt=function(){function t(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Ae(e),this.strides=Jo(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),V(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,i){return this.throwIfDisposed(),this.reshape([e,n,r,i])},t.prototype.as5D=function(e,n,r,i,o){return this.throwIfDisposed(),this.reshape([e,n,r,i,o])},t.prototype.asType=function(e){return this.throwIfDisposed(),ee.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Se(this,void 0,void 0,function(){var e;return Ee(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,ee.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return ee.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Se(this,void 0,void 0,function(){var e;return Ee(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,lD(this.shape,e)]}})})},t.prototype.arraySync=function(){return lD(this.shape,this.dataSync())},t.prototype.data=function(){return Se(this,void 0,void 0,function(){var e,n;return Ee(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Fo().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map(function(i){return jy(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var e=Fo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(n){return jy(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return Se(this,void 0,void 0,function(){var e;return Ee(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Fo().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Fo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),ee.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),ee.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),ee.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),ee.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),ee.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),ee.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),ee.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),bue(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),ee.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),ee.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ee.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),ee.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),ee.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),ee.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),ee.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),ee.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),ee.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),ee.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),ee.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),ee.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,i,o){return r===void 0&&(r=.001),RV("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,o,i,r)},t.prototype.batchNorm=function(e,n,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),ee.batchNorm(this,e,n,r,i,o)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ee.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ee.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ee.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ee.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ee.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ee.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ee.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),ee.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ee.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),ee.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),ee.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),ee.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),ee.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),ee.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),ee.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),ee.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),ee.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),ee.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),ee.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),ee.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),ee.div(this,e)},t.prototype.divNoNan=function(e){return this.throwIfDisposed(),ee.divNoNan(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),ee.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),ee.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),ee.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),ee.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),ee.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),ee.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),ee.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),ee.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),ee.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),ee.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),ee.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),ee.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),ee.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),ee.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),ee.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),ee.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),ee.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),ee.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),ee.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),ee.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),ee.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),ee.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),ee.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),ee.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),ee.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),ee.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),ee.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),ee.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),ee.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),ee.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),ee.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),ee.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),ee.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),ee.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),ee.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),ee.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),ee.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),ee.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),ee.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),ee.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),ee.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),ee.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),ee.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),ee.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),ee.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),ee.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),ee.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),ee.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),ee.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),ee.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),ee.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),ee.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),ee.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),ee.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),ee.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),ee.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),ee.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),ee.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),ee.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),ee.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),ee.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),ee.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),ee.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),ee.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),ee.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),ee.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),ee.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),ee.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),ee.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),ee.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ee.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),ee.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),ee.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),ee.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,i,o,a){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),ee.conv1d(this,e,n,r,i,o,a)},t.prototype.conv2d=function(e,n,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ee.conv2d(this,e,n,r,i,o,a)},t.prototype.conv2dTranspose=function(e,n,r,i,o){return this.throwIfDisposed(),ee.conv2dTranspose(this,e,n,r,i,o)},t.prototype.depthwiseConv2D=function(e,n,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ee.depthwiseConv2d(this,e,n,r,i,o,a)},t.prototype.separableConv2d=function(e,n,r,i,o,a){return o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),ee.separableConv2d(this,e,n,r,i,o,a)},t.prototype.avgPool=function(e,n,r,i){return this.throwIfDisposed(),ee.avgPool(this,e,n,r,i)},t.prototype.maxPool=function(e,n,r,i){return this.throwIfDisposed(),ee.maxPool(this,e,n,r,i)},t.prototype.localResponseNormalization=function(e,n,r,i){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5),ee.localResponseNormalization(this,e,n,r,i)},t.prototype.pool=function(e,n,r,i,o){return this.throwIfDisposed(),ee.pool(this,e,n,r,i,o)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Fo().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),ee.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),ee.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),ee.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),ee.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,i,o,a,s,u){return i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),ee.stridedSlice(this,e,n,r,i,o,a,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),ee.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),ee.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),ee.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),ee.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),ee.spectral.irfft(this)},t}();Object.defineProperty(Wt,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var hD,wE,xE,_E,SE,Nf=function(t){function e(n,r,i,o){var a=t.call(this,n.shape,n.dtype,n.dataId,o)||this;return a.trainable=r,a.name=i,a}return wo(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Fn(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Fo().disposeTensor(this),this.dataId=n.dataId,Fo().incRef(this,null)},e.prototype.dispose=function(){Fo().disposeVariable(this),this.isDisposedInternal=!0},e}(Wt);Object.defineProperty(Nf,Symbol.hasInstance,{value:function(t){return t instanceof Wt&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(hD||(hD={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(wE||(wE={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(xE||(xE={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(_E||(_E={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(SE||(SE={}));var wue={float32:_E,int32:wE,bool:xE,complex64:SE};function Kn(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return wue[t][e]}function E1(t){return Kn(t,"int32")}function Kt(t,e){if(t.dtype===e.dtype)return[t,e];var n=Kn(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function xue(t,e){V(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function NV(t){var e=[];return function n(r,i,o){if(r!=null){if(r instanceof Wt)return void i.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var u in s){var l=s[u];o.has(l)||(o.add(l),n(l,i,o))}}}}(t,e,new Set),e}var C1,dD=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),_ue=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new dD}return t.prototype.ready=function(){return Se(this,void 0,void 0,function(){var e,n,r;return Ee(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,i.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return Se(this,void 0,void 0,function(){var n,r,i;return Ee(this,function(o){switch(o.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new gue(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this;sD(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var n=this;sD(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])})},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,a=i.then(function(s){return!(o<n.pendingBackendInitId)&&(n.registry[e]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(o<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],i=this.initializeBackend(r),o=i.success,a=i.asyncInit;if(a||o)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),i=r.backend,o=this.readSync(n);i.disposeData(n),r.backend=e,e.move(n,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,i=this,o=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var i=r();return n(),i}catch(o){throw n(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],function(i){return{x:function(){return i.toFloat()}}},[]),n},t.prototype.runKernel=function(e,n,r,i,o){return this.runKernelFunc(null,n,null,e,r,i,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(u){o+=u.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-o-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,i,o,a,s){var u,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var c=[],f=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var h,d=function(y){f&&(c=y.map(function(b){return l.keep(l.clone(b))}))},p=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var v,g=SV(i,this.backendName);return h=g!=null?function(){var y=l.backend.numDataIds();v=g.kernelFunc({inputs:n,attrs:o,backend:l.backend});var b=Array.isArray(v)?v:[v];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,y,b);var _=b.map(function(S){var E=S.dataId,C=S.shape,A=S.dtype;return l.makeTensorFromDataId(E,C,A)}),x=_.filter(function(S,E){return s[E]});return d((a||[]).slice().concat(x)),_}:function(){var y=l.backend.numDataIds();v=l.tidy(function(){return e(l.backend,d)});var b=Array.isArray(v)?v:[v];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,y,b),b},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,n,function(){return h()}):h()}),f&&this.addTapeNode(i,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(y){return n[y].shape}),outputShapes:u.map(function(y){return y.shape})}),Array.isArray(v)?u:u[0]},t.prototype.makeTensor=function(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var o=e;r==="string"&&dT(e[0])&&(o=e.map(function(c){return mue(c)}));var a=i.write(o,n,r),s=new Wt(n,r,a,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(a),l=hue(o);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(e,n,r,i){var o=new Wt(n,r=r||"float32",e,this.nextTensorId());return this.incRef(o,i),o},t.prototype.makeVariable=function(e,n,r,i){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.asType(i));var o=new Nf(e,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*TV(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Nf||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return Se(this,void 0,void 0,function(){var n,r;return Ee(this,function(i){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,i,o){var a=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:o},u=iue(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=function(l){return l=l.map(function(c,f){if(c==null){var h=r[f],d=jm(h.size,h.dtype);return a.makeTensor(d,h.shape,h.dtype)}return c}),i(l.length>1?l:l[0],o)}),this.state.activeTape.push(s)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=NV(e),i=new Set(r.map(function(u){return u.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||i.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},t.prototype.gradients=function(e,n,r,i){var o=this;if(i===void 0&&(i=!1),V(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",e)});V(a instanceof Wt,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var f={},h={},d=0;d<l.length;d++)f[l[d].id]=!0;for(d=0;d<u.length;d++){var p=(S=u[d]).inputs;for(var m in p){for(var v=p[m],g=!1,y=0;y<l.length;y++)if(f[v.id]){S.outputs.forEach(function(T){return f[T.id]=!0}),g=!0,h[S.id]=!0;break}if(g)break}}var b={};b[c.id]=!0;var _={};for(d=u.length-1;d>=0;d--)for(p=(S=u[d]).inputs,y=0;y<S.outputs.length;y++)if(b[S.outputs[y].id]){for(var m in p)b[p[m].id]=!0,_[S.id]=!0;break}var x=[];for(d=0;d<u.length;d++){var S;if(h[(S=u[d]).id]&&_[S.id]){var E={};for(var m in S.inputs){var C=S.inputs[m];f[C.id]&&(E[m]=C)}var A=Object.assign({},S);A.inputs=E,A.outputs=S.outputs,x.push(A)}}return x}(this.state.activeTape,n,a);if(!i&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[a.id]=r??(u=a.shape,l=OV(Ae(u),"float32"),G.makeTensor(l,u,"float32")),function(h,d,p){for(var m=function(g){var y=d[g],b=[];if(y.outputs.forEach(function(E){var C=h[E.id];C!=null?b.push(C):b.push(null)}),y.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+y.kernelName+".");var _=y.gradient(b),x=function(E){if(!(E in _))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(_)+".");var C=p(function(){return _[E]()});if(C.dtype!=="float32")throw new Error("Error in gradient for op "+y.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+C.dtype+"'");var A=y.inputs[E];if(!Fn(C.shape,A.shape))throw new Error("Error in gradient for op "+y.kernelName+". The gradient of input '"+E+"' has shape '"+C.shape+"', which does not match the shape of the input '"+A.shape+"'");if(h[A.id]==null)h[A.id]=C;else{var T=h[A.id];h[A.id]=T.add(C),T.dispose()}};for(var S in y.inputs)x(S)},v=d.length-1;v>=0;v--)m(v)}(c,s,function(h){return o.tidy(h)});var f=n.map(function(h){return c[h.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(h){for(var d=0,p=h.saved;d<p.length;d++)p[d].dispose()}),o.state.activeTape=null),{value:a,grads:f}})},t.prototype.customGrad=function(e){var n=this;return V(yE(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];V(i.every(function(s){return s instanceof Wt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return i.forEach(function(s,u){a[u]=s}),n.runKernelFunc(function(s,u){return V((r=e.apply(void 0,i.concat([u]))).value instanceof Wt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),V(yE(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];V(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),V(c.every(function(h){return h instanceof Wt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return c.forEach(function(h,d){f[d]=function(){return h}}),f})}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return Se(this,void 0,void 0,function(){var n,r;return Ee(this,function(i){switch(i.label){case 0:return n=jo(),[4,this.backend.time(e)];case 1:return(r=i.sent()).wallMs=jo()-n,[2,r]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new dD,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),G=function(){var t=function(){if(C1==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}C1=n}return C1}();if(t._tfengine==null){var e=new nue(t);t._tfengine=new _ue(e)}return function(n){_V=n}(t._tfengine.ENV),Fo=function(){return t._tfengine},t._tfengine}();function DV(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ha=ne();ha.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),ha.registerFlag("IS_BROWSER",function(){return DV()}),ha.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),ha.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),ha.registerFlag("PROD",function(){return!1}),ha.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return ha.getBool("DEBUG")}),ha.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),ha.registerFlag("IS_TEST",function(){return!1});var Np,si,ri,Lu={},A1={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Sue(t,e){Lu[t]=e}function aa(t){t in Lu||(Lu[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete Lu[n]},!1),n===1?r.getContext("webgl",A1)||r.getContext("experimental-webgl",A1):r.getContext("webgl2",A1)}(t));var e=Lu[t];return e.isContextLost()?(delete Lu[t],aa(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Lu[t])}function Ub(t,e){return[e,t]}function Wd(t){var e=Ae(t);return gE(Math.ceil(e/4))}function Lm(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function pT(t,e){var n,r,i,o,a,s,u,l,c,f=t;return ne().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,i=f.RGBA16F,o=f.RGBA32F,a=f.RED,s=4,u=1,l=f.HALF_FLOAT,c=f.FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,o=f.RGBA,a=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function Te(t,e,n){var r=n();return e&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+Tue(i,o))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Np||(Np={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(si||(si={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(ri||(ri={}));var Eue=596e-10,Cue=65504;function Aue(t){return!!(ne().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Eue<Math.abs(t)&&Math.abs(t)<Cue)}function Tue(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Hv(t,e,n){return qa(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function Pue(t,e,n){var r=qa(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Te(t,e,function(){return t.shaderSource(r,n)}),Te(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Oue(t,e,n){var r=qa(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Te(t,e,function(){return t.shaderSource(r,n)}),Te(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,o){var a=kue.exec(o);if(a==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var s=+a[1],u=i.split(`
`),l=u.length.toString().length+2,c=u.map(function(v,g){return ef((g+1).toString(),l)+v}),f=0,h=0;h<c.length;h++)f=Math.max(c[h].length,f);var d=c.slice(0,s-1),p=c.slice(s-1,s),m=c.slice(s);console.log(d.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+ef(p[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var T1,P1,kue=/ERROR: [0-9]+:([0-9]+):/g;function Iue(t,e){return qa(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function Rue(t,e,n){if(Te(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function O1(t,e,n){if(Te(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Nue(t,e,n){var r=qa(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Te(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Te(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Due(t,e,n){var r=qa(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Te(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Te(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Mue(t,e){return qa(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function $ue(t,e){var n=ne().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function jue(t,e){return qa(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function pD(t,e,n,r,i,o,a,s){var u=t.getAttribLocation(n,r);return u!==-1&&(Te(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Te(t,e,function(){return t.vertexAttribPointer(u,o,t.FLOAT,!1,a,s)}),Te(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function Lue(t,e,n,r){Wue(t,r),Te(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function Fue(t,e,n,r){return qa(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function Bue(t,e,n){return t.getUniformLocation(e,n)}function Uue(t,e,n,r,i,o){Te(t,e,function(){return Lue(t,e,r,o)}),Te(t,e,function(){return t.uniform1i(i,o)})}function k1(t,e,n,r){Te(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Te(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function mD(t,e,n){Te(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Te(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function qv(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Vue(t,e))}function Vue(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function qa(t,e,n,r){var i=Te(t,e,function(){return n()});if(i==null)throw new Error(r);return i}function Wue(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function Ly(t,e){return e===void 0&&(e=2),Ae(t.slice(0,t.length-e))}function Fy(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function I1(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Ly(t)].concat(Fy(t))),e}function zue(t,e){var n;e===void 0&&(e=!1);var r=ne().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?AV(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=qu(t);t=i.newShape}var o=Ae(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var a=Ly(t),s=2,u=2;return t.length&&(s=(n=Fy(t))[0],u=n[1]),gE(o=a*(s/2)*(u/2)).map(function(l){return 2*l})}return gE(o)}function Gv(t){return t%2==0}function Kv(t,e){if(Fn(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||Gv(n)&&Gv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Gv(t[0])&&Gv(e[0])}function Hue(t){if(T1==null){var e=aa(t);T1=e.getParameter(e.MAX_TEXTURE_SIZE)}return T1}function que(t){if(P1==null){var e=aa(t);P1=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,P1)}function Gue(t){if(t===0)return 0;var e=aa(t);return Ii(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Ii(e,"EXT_disjoint_timer_query")?1:0}function Ii(t,e){return t.getExtension(e)!=null}function vD(t){try{if(aa(t)!=null)return!0}catch{return!1}return!1}function Kue(t){if(t===0)return!1;var e=aa(t);if(t===1){if(!Ii(e,"OES_texture_float"))return!1}else if(!Ii(e,"EXT_color_buffer_float"))return!1;return EE(e)}function Xue(t){if(t===0)return!1;var e=aa(t);if(t!==1){if(Ii(e,"EXT_color_buffer_float"))return EE(e);if(Ii(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=pT(r,i),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),u}(e,n)}return!1}return!!Ii(e,"OES_texture_float")&&!!Ii(e,"WEBGL_color_buffer_float")&&EE(e)}function EE(t){var e=pT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function Yue(t){return t===2&&aa(t).fenceSync!=null}var je=ne();function MV(t){ne().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function ge(t,e){return G.tidy(t,e)}function Fr(t){NV(t).forEach(function(e){return e.dispose()})}function Jue(t){return G.keep(t)}function By(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ne().getBool("IS_TEST")||console.warn.apply(console,t)}function du(t,e){var n=t;if(Yo(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||Yo(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ne().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,a,s){if(s=s||[],!Array.isArray(o)&&!Yo(o))return void V(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});V(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),V(o.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+o.length+" elements"});for(var u=a.slice(1),l=0;l<o.length;++l)i(o[l],u,s.concat(l))}(t,r,[]),r}function gD(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function j(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof Wt)return gD(r,t.dtype,e,n),t;var i=$m(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),gD(r,i,e,n),t==null||!Yo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=du(t,i);Yo(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?PV(t,i,ne().getBool("DEBUG")):Rf(t,[],!0);return G.makeTensor(s,a,i)}function Uy(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,o){return j(i,e+"["+o+"]",n)},r)}function $V(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Que(t,e,n){for(var r=t.length+e.length,i=[],o=0,a=0,s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[o++]):i.push(e[a++]);return i}function or(t,e){for(var n=[],r=t.length,i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);return[n,e.map(function(o){return t[o]})]}function Ur(t,e){return Que(t,e.map(function(n){return 1}),e)}function ti(t,e,n){V($V(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function sa(t,e){if($V(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(i){return n.push(i)}),n}function mT(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function ua(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function Zue(t,e){var n=t[0].length;t.forEach(function(i,o){V(i.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+n+")"})}),V(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(i,o){for(var a=0;a<n;a++)V(a===e||i[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Df(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function q(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];G.startScope(n);try{var s=r.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),G.endScope(s),s}catch(u){throw G.endScope(null),u}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}je.registerFlag("HAS_WEBGL",function(){return je.getNumber("WEBGL_VERSION")>0}),je.registerFlag("WEBGL_VERSION",function(){return vD(2)?2:vD(1)?1:0}),je.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return je.get("WEBGL_VERSION")===2}),je.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),je.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),je.registerFlag("WEBGL_PACK",function(){return je.getBool("HAS_WEBGL")}),je.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_CLIP",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),je.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_PACK_REDUCE",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_LAZILY_UNPACK",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_CONV_IM2COL",function(){return je.getBool("WEBGL_PACK")}),je.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Hue(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return que(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=je.getNumber("WEBGL_VERSION");return t===0?0:Gue(t)}),je.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return je.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),je.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Kue(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!je.getBool("WEBGL_FORCE_F16_TEXTURES")&&je.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),je.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Xue(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Yue(je.getNumber("WEBGL_VERSION"))}),je.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return je.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),RV=MV;var Gn=q({complex_:function(t,e){var n=j(t,"real","complex"),r=j(e,"imag","complex");return ft(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),G.runKernelFunc(function(i){return i.complex(n,r)},{$real:n,$imag:r})}}),Ti=q({real_:function(t){var e=j(t,"input","real");return G.runKernelFunc(function(n){return n.real(e)},{$input:e})}}),Bo=q({imag_:function(t){var e=j(t,"input","imag");return G.runKernelFunc(function(n){return n.imag(e)},{$input:e})}});function Xn(t,e,n){return pu(t,e,du(t,n),n)}function pu(t,e,n,r){if(r==null&&(r=$m(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Yo(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){kV(e);var i=Ae(e),o=Ae(n);V(i===o,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+o});for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==Ae(e.slice(a));V(n[a]===e[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return Yo(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?PV(t,r,ne().getBool("DEBUG")):Rf(t,[],!0),G.makeTensor(t,e,r)}function pe(t,e){if((Yo(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Yo(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return pu(t,[],[],e)}function cn(t,e){yh(t);var n=du(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return pu(t,null,n,e)}function qs(t,e,n){if(yh(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=du(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return pu(t,e,r,n)}function vT(t,e,n){if(yh(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=du(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return pu(t,e,r,n)}function kr(t,e,n){if(yh(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=du(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return pu(t,e,r,n)}function ele(t,e,n){if(yh(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=du(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return pu(t,e,r,n)}function tle(t,e,n){if(yh(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=du(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return pu(t,e=e||r,r,n)}function nle(t,e,n,r){return e===void 0&&(e=!0),G.makeVariable(t,e,n,r)}function bh(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=bh(t,"float32"),r=Nt(t,"float32");return Gn(n,r)}var i=OV(Ae(t),e);return G.makeTensor(i,t,e)}function Nt(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Nt(t,"float32"),r=Nt(t,"float32");return Gn(n,r)}var i=jm(Ae(t),e);return G.makeTensor(i,t,e)}function Qo(t,e,n){return G.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function rle(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return G.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function Vy(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return Nt([0],r);var i=jm(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return cn(i,r)}var jV=q({onesLike_:function(t){var e=j(t,"x","onesLike");if(e.dtype==="complex64"){var n=jV(Ti(e)),r=Ze(Bo(e));return Gn(n,r)}return G.runKernelFunc(function(i){return i.onesLike(e)},{$x:e},function(i,o){return{$x:function(){return Ze(i)}}})}}),Ze=q({zerosLike_:function(t){var e=j(t,"x","zerosLike");return G.runKernelFunc(function(n){return n.zerosLike(e)},{$x:e},function(n,r){return{$x:function(){return Ze(n)}}})}}),Cn=q({concat_:function(t,e){e===void 0&&(e=0),V(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=Uy(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),e=On(e,n[0].shape)[0];var r=Df(n.map(function(s){return s.shape}),e);if(Ae(r)===0)return Xn([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var i=n.map(function(s){return s.shape});Zue(i,e);var o=n,a={axis:e};return G.runKernelFunc(function(s){return s.concat(n,e)},o,function(s){var u=i.map(function(l){return l[e]});return gT(s,u,e).map(function(l){return function(){return l}})},"Concat",a)}}),ile=q({concat1d_:function(t){return Cn(t,0)}}),ole=q({concat2d_:function(t,e){return Cn(t,e)}}),ale=q({concat3d_:function(t,e){return Cn(t,e)}}),sle=q({concat4d_:function(t,e){return Cn(t,e)}}),gT=q({split_:function(t,e,n){n===void 0&&(n=0);var r,i=j(t,"x","split");return n=On(n,i.shape)[0],typeof e=="number"?(V(i.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[n]/e)):(V(i.shape[n]===e.reduce(function(o,a){return o+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),G.runKernelFunc(function(o){return o.split(i,r,n)},{$x:i},function(o){return{$x:function(){return Cn(o,n)}}})}});function jl(t,e){return t(e={exports:{}},e.exports),e.exports}var ule=jl(function(t){(function(e,n,r){function i(s){var u,l=this,c=(u=4022871197,function(f){f=f.toString();for(var h=0;h<f.length;h++){var d=.02519603282416938*(u+=f.charCodeAt(h));d-=u=d>>>0,u=(d*=u)>>>0,u+=4294967296*(d-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function o(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function a(s,u){var l=new i(s),c=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.alea=a})(0,t)}),lle=jl(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.xor128=a})(0,t)}),cle=jl(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.xorwow=a})(0,t)}),fle=jl(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.x,h=u.i;return l=f[h],c=(l^=l>>>7)^l<<24,c^=(l=f[h+1&7])^l>>>10,c^=(l=f[h+3&7])^l>>>3,c^=(l=f[h+4&7])^l<<7,l=f[h+7&7],c^=(l^=l<<13)^l<<9,f[h]=c,u.i=h+1&7,c},function(l,c){var f,h=[];if(c===(0|c))h[0]=c;else for(c=""+c,f=0;f<c.length;++f)h[7&f]=h[7&f]<<15^c.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],l.x=h,l.i=0,f=256;f>0;--f)l.next()}(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.x&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.xorshift7=a})(0,t)}),hle=jl(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.w,h=u.X,d=u.i;return u.w=f=f+1640531527|0,c=h[d+34&127],l=h[d=d+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=h[d]=c^l,u.i=d,c+(f^f>>>16)|0},function(l,c){var f,h,d,p,m,v=[],g=128;for(c===(0|c)?(h=c,c=null):(c+="\0",h=0,g=Math.max(g,c.length)),d=0,p=-32;p<g;++p)c&&(h^=c.charCodeAt((p+32)%c.length)),p===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(m=m+1640531527|0,d=(f=v[127&p]^=h+m)==0?d+1:0);for(d>=128&&(v[127&(c&&c.length||0)]=-1),d=127,p=512;p>0;--p)h=v[d+34&127],f=v[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[d]=h^f;l.w=m,l.X=v,l.i=d}(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.X&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.xor4096=a})(0,t)}),dle=jl(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,h=u.c,d=u.d,p=u.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^h,u.c=h=h-d|0,u.d=d<<16^h>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.tychei=a})(0,t)}),Fu=jl(function(t){(function(e,n){var r,i=this,o=256,a=6,s="random",u=n.pow(o,a),l=n.pow(2,52),c=2*l,f=o-1;function h(g,y,b){var _=[],x=m(function C(A,T){var P,k=[],I=typeof A;if(T&&I=="object")for(P in A)try{k.push(C(A[P],T-1))}catch{}return k.length?k:I=="string"?A:A+"\0"}((y=y==1?{entropy:!0}:y||{}).entropy?[g,v(e)]:g??function(){try{var C;return r&&(C=r.randomBytes)?C=C(o):(C=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(C)),v(C)}catch{var A=i.navigator,T=A&&A.plugins;return[+new Date,i,T,i.screen,v(e)]}}(),3),_),S=new d(_),E=function(){for(var C=S.g(a),A=u,T=0;C<l;)C=(C+T)*o,A*=o,T=S.g(1);for(;C>=c;)C/=2,A/=2,T>>>=1;return(C+T)/A};return E.int32=function(){return 0|S.g(4)},E.quick=function(){return S.g(4)/4294967296},E.double=E,m(v(S.S),e),(y.pass||b||function(C,A,T,P){return P&&(P.S&&p(P,S),C.state=function(){return p(S,{})}),T?(n[s]=C,A):C})(E,x,"global"in y?y.global:this==n,y.state)}function d(g){var y,b=g.length,_=this,x=0,S=_.i=_.j=0,E=_.S=[];for(b||(g=[b++]);x<o;)E[x]=x++;for(x=0;x<o;x++)E[x]=E[S=f&S+g[x%b]+(y=E[x])],E[S]=y;(_.g=function(C){for(var A,T=0,P=_.i,k=_.j,I=_.S;C--;)A=I[P=f&P+1],T=T*o+I[f&(I[P]=I[k=f&k+A])+(I[k]=A)];return _.i=P,_.j=k,T})(o)}function p(g,y){return y.i=g.i,y.j=g.j,y.S=g.S.slice(),y}function m(g,y){for(var b,_=g+"",x=0;x<_.length;)y[f&x]=f&(b^=19*y[f&x])+_.charCodeAt(x++);return v(y)}function v(g){return String.fromCharCode.apply(0,g)}if(n["seed"+s]=h,m(n.random(),e),t.exports){t.exports=h;try{r=require("crypto")}catch{}}})([],Math)});Fu.alea=ule,Fu.xor128=lle,Fu.xorwow=cle,Fu.xorshift7=fle,Fu.xor4096=hle,Fu.tychei=dle;var Vb=Fu.alea,yT=function(){function t(e,n,r,i,o){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=Vb(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,i=!1;!i;){var o=void 0,a=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*a*u,this.truncated&&!this.isValidTruncated(n)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),ple=function(){function t(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;var o=i||Math.random();this.randu=Vb(o.toString()),this.randn=new yT(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,i,o,a;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,n=1-.331*(e=i*i)*e,r=.5*e+this.d*(1-a+Math.log(a)),(o=this.randu())<n||Math.log(o)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),mle=function(){function t(e,n,r,i){var o=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=Vb(i)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Ue(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",kV(t),new Rp(t,e,n)}function vle(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var LV=q({batchToSpaceND_:function(t,e,n){var r=j(t,"x","batchToSpaceND"),i=e.reduce(function(o,a){return o*a});return V(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),V(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),V(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),G.runKernelFunc(function(o){return o.batchToSpaceND(r,e,n)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(e,n)}}})}}),gle=q({broadcastTo_:function(t,e){var n=j(t,"broadcastTo","x"),r=n.shape;if(e.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var i=n.shape.slice();i.length<e.length;)i.unshift(1);n=n.reshape(i)}for(var o=Array.from(e),a=e.length-1;a>=0;a--)if(n.shape[a]===e[a])o[a]=1;else if(n.shape[a]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var s=o.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():G.runKernelFunc(function(u){return u.tile(n,o)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),yle=q({cast_:function(t,e){var n=j(t,"x","cast");if(!cue(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return G.runKernelFunc(function(i){return i.cast(n,e)},{x:n},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),ble=q({clone_:function(t){var e=j(t,"x","clone",null);return G.runKernelFunc(function(){return G.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}}),wle=q({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var i=j(t,"x","cumsum"),o=sa([e|=0],i.rank),a=i;o!=null&&(a=i.transpose(o));var s=ua(1,i.rank)[0],u=G.runKernelFunc(function(l){return l.cumsum(a,s,n,r)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return o!=null&&(u=u.transpose(o)),u}}),xle=q({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=j(t,"x","depthToSpace"),i=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];return V(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),V(o*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+` for depthToSpace with input shape
          `+r.shape}),V(a%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+a+" for depthToSpace with input shape "+r.shape}),G.runKernelFunc(function(s){return s.depthToSpace(r,e,n)},{$x:r})}}),Ai=q({expandDims_:function(t,e){e===void 0&&(e=0);var n=j(t,"x","expandDims",null);V(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(V(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),co(n,r)}}),FV=q({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var i=Ue([t,e],r),o=t<=e?t:e,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return tf(Ai(s,0),[n[0],1,1]);if(n.length===2)return tf(Ai(Ai(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return tf(Ai(Ai(Ai(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),_le=q({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var i=j(t,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=a===1?i.as2D(1,-1):i,u=G.runKernelFunc(function(l){return l.multinomial(s,r,e,n)},{logits2D:s});return a===1?u.as1D():u}}),CE=q({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=j(t,"indices","oneHot","int32"),o=i.shape.concat([e]);return i=i.flatten(),G.runKernelFunc(function(a){return a.oneHot(i,e,n,r)},{$indices:i},function(a){return{$indices:function(){return Nt(i.shape,"float32")}}}).reshape(o)}}),Ll=q({pad_:function(t,e,n){n===void 0&&(n=0);var r=j(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:e,constantValue:n};return G.runKernelFunc(function(o){return o.pad(r,e,n)},{x:r},function(o){var a=e.map(function(s){return s[0]});return{x:function(){return o.slice(a,r.shape)}}},"PadV2",i)}}),Sle=q({pad1d_:function(t,e,n){return n===void 0&&(n=0),V(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Ll(t,[e],n)}}),Ele=q({pad2d_:function(t,e,n){return n===void 0&&(n=0),V(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ll(t,e,n)}}),Cle=q({pad3d_:function(t,e,n){return n===void 0&&(n=0),V(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ll(t,e,n)}}),Ale=q({pad4d_:function(t,e,n){return n===void 0&&(n=0),V(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ll(t,e,n)}}),Tle=q({rand_:function(t,e,n){var r=Ae(t),i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=e();return G.makeTensor(i,t,n)}}),Ple=q({randomNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new yT(e,n,r,!1,i),a=Ue(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Ole=q({randomGamma_:function(t,e,n,r,i){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new ple(e,n,r,i),a=Ue(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),BV=q({randomUniform_:function(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var o=Ue(t,r),a=new mle(e,n,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),co=q({reshape_:function(t,e){var n=j(t,"x","reshape",null);e=uue(e,n.size),V(n.size===Ae(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return G.runKernelFunc(function(i){return i.reshape(n,e)},{x:n},function(i){return{x:function(){return i.reshape(n.shape)}}},"Reshape",r)}}),UV=q({spaceToBatchND_:function(t,e,n){var r=j(t,"x","spaceToBatchND");return V(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),V(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),V(r.shape.reduce(function(i,o,a){return a>0&&a<=e.length?i&&(o+n[a-1][0]+n[a-1][1])%e[a-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),G.runKernelFunc(function(i){return i.spaceToBatchND(r,e,n)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(e,n)}}})}}),VV=q({squeeze_:function(t,e){var n=j(t,"x","squeeze");return co(n,qu(n.shape,e).newShape)}}),hi=q({stack_:function(t,e){e===void 0&&(e=0);var n=Uy(t,"tensors","stack");if(V(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,i=n[0].shape,o=n[0].dtype;V(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){ft(i,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){V(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=n.map(function(s){return s.expandDims(e)});return Cn(a,e)}}),tf=q({tile_:function(t,e){var n=j(t,"x","tile",null);V(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],i={reps:e};return G.runKernelFunc(function(o,a){var s=o.tile(n,e);return a([n]),s},{x:n},function(o,a){var s=a[0];return{x:function(){var u=Ze(s);if(s.rank===1)for(var l=0;l<e[0];++l)u=u.add(o.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<e[0];++l)for(var c=0;c<e[1];++c)u=u.add(o.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(var f=0;f<e[2];++f)u=u.add(o.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(f=0;f<e[2];++f)for(var h=0;h<e[3];++h)u=u.add(o.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",i,r)}}),kle=q({truncatedNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new yT(e,n,r,!0,i),a=Ue(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),An=q({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=j(t,"x","unstack");V(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return G.runKernelFunc(function(i){return i.unstack(n,e)},{x:n},function(i){return{x:function(){return hi(i,e)}}},"Unpack",r)}}),Ile=function(t,e){return Se(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c,f;return Ee(this,function(h){switch(h.label){case 0:return n=j(t,"x","setdiff1d"),r=j(e,"y","setdiff1d"),V(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),V(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),V(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(o=h.sent(),a=new Set(o),s=0,c=0;c<i.length;c++)a.has(i[c])||s++;for(u=new Rp([s],n.dtype),l=new Rp([s],"int32"),c=0,f=0;c<i.length;c++)a.has(i[c])||(u.values[f]=i[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}})})};function Wy(t,e,n,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=e.length,a=0;a<o;++a)i=i.concat([t[a+1]/e[a],e[a]]);i=i.concat(t.slice(o+1))}return i}function zy(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var o=[],a=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?a.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function Hy(t,e,n,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(var o=1;o<t.length;++o)o<=e.length?r?i.push(e[o-1]*t[o]):i.push(t[o]/e[o-1]):i.push(t[o]);return i}function WV(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function zV(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function HV(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,o=0;o<n.length-1;++o)i*=n[o];var a=t.shape,s=n.slice();s.pop();var u=1;for(o=r;o<t.rank;++o)u*=a[o],s.push(a[o]);var l=Jo(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,i,u,l]}var qV=30;function R1(t){return t<=qV?t:bE(t,Math.floor(Math.sqrt(t)))}function Rle(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(o+" update.rank < "+i+". ");if(t.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(o+" update.rank != "+(i+t.length-r));for(var a=0;a<i;++a)if(n.shape[a]!==e.shape[a])throw new Error(o+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+e.shape[a]+").");for(a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+r])throw new Error(o+" updates.shape["+(a+i)+"] ("+n.shape[a+i]+") != shape["+(a+i)+"] ("+t[a+i]+")")}function Nle(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}Rle(n,e,t)}function qy(t,e,n){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,o=n.length,a=1,s=i;s<o;++s)a*=n[s];var u=i<1?1:i;return{sliceRank:i,numUpdates:Ae(e.shape)/u,sliceSize:a,strides:Jo(n.slice(0,i)).concat([1]),outputSize:Ae(n)}}function Dle(t,e,n){V(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),V(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){V(e[o]+n[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(e[o]+n[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},i=0;i<t.rank;++i)r(i)}function yD(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function bT(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Mle(t,e,n,r,i){var o=e[i],a=n[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=vE(0,o,s-1)}function $le(t,e,n,r,i){var o=e[i],a=n[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=a>0?vE(0,o,s):vE(-1,o,s-1)}function GV(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function KV(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function jle(t,e){V(yE(t),function(){return"The f passed in variableGrads(f) must be a function"}),V(e==null||Array.isArray(e)&&e.every(function(c){return c instanceof Nf}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=e!=null;if(!n)for(var r in e=[],G.registeredVariables)e.push(G.registeredVariables[r]);var i=n?e.filter(function(c){return!c.trainable}):null,o=e.length;V((e=e.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var a=G.gradients(t,e,null,!0),s=a.value,u=a.grads;V(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),V(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return e.forEach(function(c,f){u[f]!=null&&(l[c.name]=u[f])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function Wb(t){return G.customGrad(t)}var Ga=q({softmax_:function(t,e){e===void 0&&(e=-1);var n=j(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return G.runKernelFunc(function(r,i){var o=r.softmax(n,e);return i([o]),o},{logits:n},function(r,i){var o=i[0],a=r.mul(o);return{logits:function(){return a.sub(a.sum([e],!0).mul(o))}}},"Softmax",{dim:e},[],[!0])}}),Lle=q({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=j(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return Wb(function(r,i){var o=r.max(e,!0),a=r.sub(o),s=a.toFloat().sub(a.exp().sum(e,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(e,!0).mul(c))}}})(n)}}),XV=function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),YV=function(){function t(){}return t.prototype.time=function(e){return J("time")},t.prototype.read=function(e){return J("read")},t.prototype.readSync=function(e){return J("readSync")},t.prototype.numDataIds=function(){return J("numDataIds")},t.prototype.disposeData=function(e){return J("disposeData")},t.prototype.write=function(e,n,r){return J("write")},t.prototype.move=function(e,n,r,i){return J("move")},t.prototype.memory=function(){return J("memory")},t.prototype.floatPrecision=function(){return J("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,i){return J("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,J("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return J("slice")},t.prototype.stridedSlice=function(e,n,r,i){return J("stridedSlice")},t.prototype.unstack=function(e,n){return J("unstack")},t.prototype.reverse=function(e,n){return J("reverse")},t.prototype.concat=function(e,n){return J("concat")},t.prototype.neg=function(e){return J("neg")},t.prototype.add=function(e,n){return J("add")},t.prototype.addN=function(e){return J("addN")},t.prototype.subtract=function(e,n){return J("subtract")},t.prototype.multiply=function(e,n){return J("multiply")},t.prototype.realDivide=function(e,n){return J("realDivide")},t.prototype.floorDiv=function(e,n){return J("floorDiv")},t.prototype.sum=function(e,n){return J("sum")},t.prototype.prod=function(e,n){return J("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return J("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return J("argMin")},t.prototype.argMax=function(e,n){return J("argMax")},t.prototype.equal=function(e,n){return J("equal")},t.prototype.notEqual=function(e,n){return J("notEqual")},t.prototype.less=function(e,n){return J("less")},t.prototype.lessEqual=function(e,n){return J("lessEqual")},t.prototype.greater=function(e,n){return J("greater")},t.prototype.greaterEqual=function(e,n){return J("greaterEqual")},t.prototype.logicalNot=function(e){return J("logicalNot")},t.prototype.logicalAnd=function(e,n){return J("logicalAnd")},t.prototype.logicalOr=function(e,n){return J("logicalOr")},t.prototype.where=function(e){return J("where")},t.prototype.select=function(e,n,r){return J("select")},t.prototype.topk=function(e,n,r){return J("topk")},t.prototype.min=function(e,n){return J("min")},t.prototype.minimum=function(e,n){return J("minimum")},t.prototype.mod=function(e,n){return J("mod")},t.prototype.max=function(e,n){return J("max")},t.prototype.maximum=function(e,n){return J("maximum")},t.prototype.all=function(e,n){return J("all")},t.prototype.any=function(e,n){return J("any")},t.prototype.squaredDifference=function(e,n){return J("squaredDifference")},t.prototype.ceil=function(e){return J("ceil")},t.prototype.floor=function(e){return J("floor")},t.prototype.round=function(e){return J("round")},t.prototype.sign=function(e){return J("sign")},t.prototype.isNaN=function(e){return J("isNaN")},t.prototype.isInf=function(e){return J("isInf")},t.prototype.isFinite=function(e){return J("isFinite")},t.prototype.pow=function(e,n){return J("pow")},t.prototype.exp=function(e){return J("exp")},t.prototype.expm1=function(e){return J("expm1")},t.prototype.softmax=function(e,n){return J("softmax")},t.prototype.log=function(e){return J("log")},t.prototype.log1p=function(e){return J("log1p")},t.prototype.sqrt=function(e){return J("sqrt")},t.prototype.rsqrt=function(e){return J("rsqrt")},t.prototype.square=function(e){return J("square")},t.prototype.reciprocal=function(e){return J("reciprocal")},t.prototype.relu=function(e){return J("relu")},t.prototype.relu6=function(e){return J("relu6")},t.prototype.prelu=function(e,n){return J("prelu")},t.prototype.elu=function(e){return J("elu")},t.prototype.eluDer=function(e,n){return J("eluDer")},t.prototype.selu=function(e){return J("selu")},t.prototype.int=function(e){return J("int")},t.prototype.clip=function(e,n,r){return J("clip")},t.prototype.abs=function(e){return J("abs")},t.prototype.complexAbs=function(e){return J("complexAbs")},t.prototype.sigmoid=function(e){return J("sigmoid")},t.prototype.softplus=function(e){return J("softplus")},t.prototype.sin=function(e){return J("sin")},t.prototype.cos=function(e){return J("cos")},t.prototype.tan=function(e){return J("tan")},t.prototype.asin=function(e){return J("asin")},t.prototype.acos=function(e){return J("acos")},t.prototype.atan=function(e){return J("atan")},t.prototype.atan2=function(e,n){return J("atan2")},t.prototype.sinh=function(e){return J("sinh")},t.prototype.cosh=function(e){return J("cosh")},t.prototype.tanh=function(e){return J("tanh")},t.prototype.asinh=function(e){return J("asinh")},t.prototype.acosh=function(e){return J("acosh")},t.prototype.atanh=function(e){return J("atanh")},t.prototype.erf=function(e){return J("erf")},t.prototype.step=function(e,n){return J("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,J("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return J("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return J("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return J("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,J("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return J("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return J("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return J("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return J("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return J("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return J("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return J("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,i){return J("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return J("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return J("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return J("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return J("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return J("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,i){return J("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return J("reshape")},t.prototype.cast=function(e,n){return J("cast")},t.prototype.tile=function(e,n){return J("tile")},t.prototype.pad=function(e,n,r){return J("pad")},t.prototype.transpose=function(e,n){return J("transpose")},t.prototype.gather=function(e,n,r){return J("gather")},t.prototype.gatherND=function(e,n){return J("gatherND")},t.prototype.scatterND=function(e,n,r){return J("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return J("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return J("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,i){return J("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return J("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,i){return J("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return J("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,i,o,a){return J("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,i,o){return J("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,i,o,a,s){return J("LRNGrad")},t.prototype.multinomial=function(e,n,r,i){return J("multinomial")},t.prototype.oneHot=function(e,n,r,i){return J("oneHot")},t.prototype.cumsum=function(e,n,r,i){return J("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,i,o){return J("nonMaxSuppression")},t.prototype.fft=function(e){return J("fft")},t.prototype.ifft=function(e){return J("ifft")},t.prototype.complex=function(e,n){return J("complex")},t.prototype.real=function(e){return J("real")},t.prototype.imag=function(e){return J("imag")},t.prototype.cropAndResize=function(e,n,r,i,o,a){return J("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return J("depthToSpace")},t.prototype.split=function(e,n,r){return J("split")},t.prototype.sparseToDense=function(e,n,r,i){return J("sparseToDense")},t.prototype.diag=function(e){return J("diag")},t.prototype.fill=function(e,n,r){return J("fill")},t.prototype.onesLike=function(e){return J("onesLike")},t.prototype.zerosLike=function(e){return J("zerosLike")},t.prototype.linspace=function(e,n,r){return J("linspace")},t.prototype.dispose=function(){return J("dispose")},t}();function J(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Ds(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var o=n-1-i,a=t[o]||1;(e[e.length-1-i]||1)>1&&a===1&&r.unshift(o)}return r}function Tn(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],o=e.length-r-1,a=e[o];(i==null||i===1&&a>1)&&n.unshift(o)}return n}function Ye(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var o=t[t.length-i-1];o==null&&(o=1);var a=e[e.length-i-1];if(a==null&&(a=1),o===1)n.unshift(a);else if(a===1)n.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(o)}}return n}function Dp(t,e,n,r,i,o,a){a===void 0&&(a="channelsLast");var s,u=Xy(e),l=u[0],c=u[1];if(a==="channelsLast")s=[l,c,t[3],t[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,c,t[1],t[1]]}return Fl(t,s,n,r,i,o,!1,a)}function Gy(t,e,n,r,i,o,a){a===void 0&&(a="NDHWC");var s,u,l=AE(e),c=l[0],f=l[1],h=l[2];if(a==="NDHWC")u="channelsLast",s=[c,f,h,t[4],t[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[c,f,h,t[1],t[1]]}return Ky(t,s,n,r,i,!1,u,o)}function Fl(t,e,n,r,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3];if(s==="channelsLast")l=t[0],c=t[1],f=t[2],h=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],h=t[1],c=t[2],f=t[3]}var d,p=e[0],m=e[1],v=e[3],g=Xy(n),y=g[0],b=g[1],_=Xy(r),x=_[0],S=_[1],E=nf(p,x),C=nf(m,S),A=function($,B,z,U,M,F,H,X){var K,Q,ae;if(typeof $=="number"){K={top:$,bottom:$,left:$,right:$,type:$===0?"VALID":"NUMBER"};var le=function(ce,te,ye,xe,De){xe==null&&(xe=JV(ce,te,ye));var Ie=ce[0],et=ce[1],vt=zd((Ie-te+2*xe)/ye+1,De);V(rn(vt),function(){return"The output # of rows ("+vt+") must be an integer. Change the stride and/or zero pad parameters"});var Be=zd((et-te+2*xe)/ye+1,De);return V(rn(Be),function(){return"The output # of columns ("+Be+") must be an integer. Change the stride and/or zero pad parameters"}),[vt,Be]}([B,z],F,U,$,X);Q=le[0],ae=le[1]}else if($==="same"){Q=Math.ceil(B/U),ae=Math.ceil(z/M);var ve=Math.max(0,(Q-1)*U+F-B),de=Math.max(0,(ae-1)*M+H-z),Ce=Math.floor(ve/2),ie=ve-Ce,me=Math.floor(de/2);K={top:Ce,bottom:ie,left:me,right:de-me,type:"SAME"}}else{if($!=="valid")throw Error("Unknown padding parameter: "+$);K={top:0,bottom:0,left:0,right:0,type:"VALID"},Q=Math.ceil((B-F+1)/U),ae=Math.ceil((z-H+1)/M)}return{padInfo:K,outHeight:Q,outWidth:ae}}(i,c,f,y,b,E,C,o),T=A.padInfo,P=A.outHeight,k=A.outWidth,I=a?v*h:v;return s==="channelsFirst"?d=[l,I,P,k]:s==="channelsLast"&&(d=[l,P,k,I]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:h,outHeight:P,outWidth:k,outChannels:I,padInfo:T,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:C,dilationHeight:x,dilationWidth:S,inShape:t,outShape:d,filterShape:e}}function Ky(t,e,n,r,i,o,a,s){o===void 0&&(o=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3],d=u[4];if(a==="channelsLast")l=t[0],c=t[1],f=t[2],h=t[3],d=t[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],d=t[1],c=t[2],f=t[3],h=t[4]}var p,m=e[0],v=e[1],g=e[2],y=e[4],b=AE(n),_=b[0],x=b[1],S=b[2],E=AE(r),C=E[0],A=E[1],T=E[2],P=nf(m,C),k=nf(v,A),I=nf(g,T),$=function(H,X,K,Q,ae,le,ve,de,Ce,ie,me){var ce,te,ye,xe;if(typeof H=="number"){ce={top:H,bottom:H,left:H,right:H,front:H,back:H,type:H===0?"VALID":"NUMBER"};var De=function(Hr,on,dn,Qn,Zn,xu){Zn==null&&(Zn=JV(Hr,on,Qn));var ns=Hr[0],ql=Hr[1],Gl=Hr[2],qr=zd((ns-on+2*Zn)/Qn+1,xu);V(rn(qr),function(){return"The output # of depths ("+qr+") must be an integer. Change the stride and/or zero pad parameters"});var Tr=zd((ql-on+2*Zn)/Qn+1,xu);V(rn(Tr),function(){return"The output # of rows ("+Tr+") must be an integer. Change the stride and/or zero pad parameters"});var So=zd((Gl-on+2*Zn)/Qn+1,xu);return V(rn(So),function(){return"The output # of columns ("+So+") must be an integer. Change the stride and/or zero pad parameters"}),[qr,Tr,So,dn]}([X,K,Q,1],de,1,ae,H,me);te=De[0],ye=De[1],xe=De[2]}else if(H==="same"){te=Math.ceil(X/ae),ye=Math.ceil(K/le),xe=Math.ceil(Q/ve);var Ie=(te-1)*ae+de-X,et=(ye-1)*le+Ce-K,vt=(xe-1)*ve+ie-Q,Be=Math.floor(Ie/2),ut=Ie-Be,gt=Math.floor(et/2),en=et-gt,jt=Math.floor(vt/2);ce={top:gt,bottom:en,left:jt,right:vt-jt,front:Be,back:ut,type:"SAME"}}else{if(H!=="valid")throw Error("Unknown padding parameter: "+H);ce={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},te=Math.ceil((X-de+1)/ae),ye=Math.ceil((K-Ce+1)/le),xe=Math.ceil((Q-ie+1)/ve)}return{padInfo:ce,outDepth:te,outHeight:ye,outWidth:xe}}(i,c,f,h,_,x,S,P,k,I,s),B=$.padInfo,z=$.outDepth,U=$.outHeight,M=$.outWidth,F=o?y*d:y;return a==="channelsFirst"?p=[l,F,z,U,M]:a==="channelsLast"&&(p=[l,z,U,M,F]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:f,inWidth:h,inChannels:d,outDepth:z,outHeight:U,outWidth:M,outChannels:F,padInfo:B,strideDepth:_,strideHeight:x,strideWidth:S,filterDepth:m,filterHeight:v,filterWidth:g,effectiveFilterDepth:P,effectiveFilterHeight:k,effectiveFilterWidth:I,dilationDepth:C,dilationHeight:A,dilationWidth:T,inShape:t,outShape:p,filterShape:e}}function JV(t,e,n,r){r===void 0&&(r=1);var i=nf(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function Xy(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function AE(t){return typeof t=="number"?[t,t,t]:t}function nf(t,e){return e<=1?t:t+(t-1)*(e-1)}function zd(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Mf(t){var e=Xy(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function Vr(t,e){return Mf(t)||Mf(e)}function wT(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function QV(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=Nt(t.shape),i=t.toFloat(),o=n.complex(i,r);return r.dispose(),i.dispose(),o}if(!fue(t.dtype,e))return G.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var a=n.real(t);return o=a.cast(e),a.dispose(),o}if(e==="int32")return n.int(t);if(e==="bool"){var s=pe(0,t.dtype);return o=n.notEqual(t,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function TE(t,e){return G.makeTensorFromDataId(t.dataId,e,t.dtype)}function ZV(t,e,n){var r=(e-t)/(n-1),i=jm(n,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return cn(i,"float32")}function PE(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function bD(t,e){return{real:t[2*e],imag:t[2*e+1]}}function Fle(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Ble(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function Ule(t,e,n){var r=function(o,a,s){return function(u,l,c){for(var f=0,h=u.length,d=0,p=!1;f<h;){var m=c(l,u[d=f+(h-f>>>1)]);m>0?f=d+1:(h=d,p=!m)}return p?f:-f-1}(o,a,s||Vle)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function Vle(t,e){return t>e?1:t<e?-1:0}function xT(t,e,n,r,i){return eW(t,e,n,r,i,0).selectedIndices}function _T(t,e,n,r,i,o){var a=eW(t,e,n,r,i,o);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function eW(t,e,n,r,i,o,a,s){s===void 0&&(s=!1);for(var u=Array.from(e).map(function(_,x){return{score:_,boxIndex:x,suppressBeginIndex:0}}).filter(function(_){return _.score>i}).sort(wD),l=o>0?-.5/o:0,c=[],f=[];c.length<n&&u.length>0;){var h=u.pop(),d=h.score,p=h.boxIndex,m=h.suppressBeginIndex;if(d<i)break;for(var v=!1,g=c.length-1;g>=m;--g){var y=Wle(t,p,c[g]);if(y>=r){v=!0;break}if(h.score=h.score*zle(r,l,y),h.score<=i)break}h.suppressBeginIndex=c.length,v||(h.score===d?(c.push(p),f.push(h.score)):h.score>i&&Ule(u,h,wD))}var b=c.length;return s&&(c.fill(0,b),f.fill(0,b)),{selectedIndices:cn(c,"int32"),selectedScores:cn(f,"float32"),numValidOutputs:pe(b,"int32")}}function Wle(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),d=(s-o)*(u-a),p=(f-l)*(h-c);if(d<=0||p<=0)return 0;var m=Math.max(o,l),v=Math.max(a,c),g=Math.min(s,f),y=Math.min(u,h),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(d+p-b)}function zle(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function wD(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function tW(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(o){i[n]=o;var a=t.slice(r,i);return r[n]+=o,a})}function nW(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=Ue(n,t.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(t.rank),s=0;s<a.length;s++)a[s]=o[s]%t.shape[s];var u=t.locToIndex(a);i.values[r]=t.values[u]}return i.toTensor()}function rW(t,e,n,r,i){for(var o=e[e.length-1],a=[t.length/o,o],s=a[0],u=a[1],l=Ip(n,s*r),c=Ip("int32",s*r),f=0;f<s;f++){for(var h=f*u,d=t.subarray(h,h+u),p=[],m=0;m<d.length;m++)p.push({value:d[m],index:m});p.sort(function(_,x){return x.value-_.value});var v=f*r,g=l.subarray(v,v+r),y=c.subarray(v,v+r);for(m=0;m<r;m++)g[m]=p[m].value,y[m]=p[m].index}var b=e.slice();return b[b.length-1]=r,[Xn(l,b,n),Xn(c,b,"int32")]}function ST(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=Ue(t,"int32"),o=Ue([n.length,t.length],"int32");for(r=0;r<n.length;r++){var a=i.indexToLoc(n[r]),s=r*t.length;o.values.set(a,s)}return o.toTensor()}var Hle=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(i,o){return"T"+o});var n=[];this.variableNames.forEach(function(i){n.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},qle=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(i,o){return"T"+o});var n=[];this.variableNames.forEach(function(i){n.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},Gle=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.inSize,a=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function iW(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function Rr(t,e){return e===1?[t]:iW(t,e)}function lr(){var t,e,n,r,i,o,a,s,u,l;return ne().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function tl(t,e,n){n===void 0&&(n="index");var r=Jo(e);return r.map(function(i,o){return"int "+t[o]+" = "+n+" / "+i+"; "+(o===r.length-1?"int "+t[o+1]+" = "+n+" - "+t[o]+" * "+i:"index -= "+t[o]+" * "+i)+";"}).join("")}function ET(t){var e=Jo(t).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var oW=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function Kle(t,e,n,r){var i=[];t.forEach(function(d){var p=Ae(d.shapeInfo.logicalShape);d.shapeInfo.isUniform?i.push("uniform float "+d.name+(p>1?"["+p+"]":"")+";"):(i.push("uniform sampler2D "+d.name+";"),i.push("uniform int offset"+d.name+";"))});var o,a,s=i.join(`
`),u=t.map(function(d){return function(p,m,v){v===void 0&&(v=!1);var g="";g+=v?aW(p):hc(p);var y=p.shapeInfo.logicalShape,b=m.logicalShape;return y.length<=b.length&&(g+=v?function(_,x){var S,E=_.name,C=E.charAt(0).toUpperCase()+E.slice(1),A="get"+C+"AtOutCoords",T=_.shapeInfo.logicalShape.length,P=x.logicalShape.length,k=Ds(_.shapeInfo.logicalShape,x.logicalShape),I=Pt(P),$=P-T,B=["x","y","z","w","u","v"];S=T===0?"":P<2&&k.length>=1?"coords = 0;":k.map(function(K){return"coords."+B[K+$]+" = 0;"}).join(`
`);var z="";z=P<2&&T>0?"coords":_.shapeInfo.logicalShape.map(function(K,Q){return"coords."+B[Q+$]}).join(", ");var U="return outputValue;",M=Ae(_.shapeInfo.logicalShape)===1,F=Ae(x.logicalShape)===1;if(T!==1||M||F){if(M&&!F)U=P===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(k.length){var H=T-2,X=T-1;k.indexOf(H)>-1&&k.indexOf(X)>-1?U="return vec4(outputValue.x);":k.indexOf(H)>-1?U="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":k.indexOf(X)>-1&&(U="return vec4(outputValue.xx, outputValue.zz);")}}else U=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+A+`() {
      `+I+` coords = getOutputCoords();
      `+S+`
      vec4 outputValue = get`+C+"("+z+`);
      `+U+`
    }
  `}(p,m):function(_,x){var S=_.name,E=S.charAt(0).toUpperCase()+S.slice(1),C="get"+E+"AtOutCoords",A=x.texShape,T=_.shapeInfo.texShape,P=_.shapeInfo.logicalShape.length,k=x.logicalShape.length;if(!_.shapeInfo.isUniform&&P===k&&_.shapeInfo.flatOffset==null&&Fn(T,A))return`
      float `+C+`() {
        return sampleTexture(`+S+`, resultUV);
      }
    `;var I,$=Pt(k),B=Ds(_.shapeInfo.logicalShape,x.logicalShape),z=k-P,U=["x","y","z","w","u","v"];I=P===0?"":k<2&&B.length>=1?"coords = 0;":B.map(function(F){return"coords."+U[F+z]+" = 0;"}).join(`
`);var M="";return M=k<2&&P>0?"coords":_.shapeInfo.logicalShape.map(function(F,H){return"coords."+U[H+z]}).join(", "),`
    float `+C+`() {
      `+$+` coords = getOutputCoords();
      `+I+`
      return get`+E+"("+M+`);
    }
  `}(p,m)),g}(d,e,r)}).join(`
`),l=e.texShape,c=lr(),f=function(d){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+d.texture2D+`(textureSampler, uv).r;
    }
  `}(c),h=function(d){return d.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+d.varyingFs+` vec2 resultUV;
    `+d.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+d.defineSpecialNaN+`
    `+d.defineSpecialInf+`
    `+d.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Xle+`
    `+Yle+`
    `+Jle+`
  `}(c);return e.isPacked?(o=function(d,p){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(_,x){var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];return S[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return 2 * (resTexRC.x * `+S[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(_,x){var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];if(Fn(_,x))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `;var E=Math.ceil(_[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(d,p);case 3:return m=d,v=p,g=[Math.ceil(v[0]/2),Math.ceil(v[1]/2)],y=Math.ceil(m[2]/2),b=y*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+y+`);
      int c = imod(index, `+y+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(_,x){for(var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)],E=Math.ceil(_[_.length-1]/2),C=E*Math.ceil(_[_.length-2]/2),A=C,T="",P="b, r, c",k=2;k<_.length-1;k++)A*=_[_.length-k-1],T=`
      int b`+k+" = index / "+A+`;
      index -= b`+k+" * "+A+`;
    `+T,P="b"+k+", "+P;return`
    ivec`+_.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+T+`

      int b = index / `+C+`;
      index -= b * `+C+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+_.length+"("+P+`);
    }
  `}(d,p)}var m,v,g,y,b}(e.logicalShape,l),a=function(d){return`
    void setOutput(vec4 val) {
      `+d.output+` = val;
    }
  `}(c)):(o=function(d,p){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(g,y){return y[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+y[1]+`.0);
      }
    `:y[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+y[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      return resTexRC.x * `+y[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(g,y){return Fn(g,y)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+y[0]+", "+y[1]+`));
      }
    `:g[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:g[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      int r = index / `+g[1]+`;
      int c = index - r * `+g[1]+`;
      return ivec2(r, c);
    }
  `}(d,p);case 3:return m=p,v=tl(["r","c","d"],d),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+v+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(g,y){var b=tl(["r","c","d","d2"],g);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      `+b+`
      return ivec4(r, c, d, d2);
    }
  `}(d,p);case 5:return function(g,y){var b=tl(["r","c","d","d2","d3"],g);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+y[0]+`,
                             `+y[1]+`));

      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+b+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(d,p);case 6:return function(g,y){var b=tl(["r","c","d","d2","d3","d4"],g);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+b+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(d,p);default:throw new Error(d.length+"-D output sampling is not yet supported")}var m,v}(e.logicalShape,l),a=function(d){return`
    void setOutput(float val) {
      `+d.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(h+=Qle),[h,f,a,s,o,u,n].join(`
`)}function hc(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=n.shapeInfo.texShape,a=o[0],s=o[1];if(a===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],f=ku(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+rc(n)+`
      }
    `;var o=n.shapeInfo.texShape,a=o[0],s=o[1];if(s===1&&a===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=ku(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=n.shapeInfo.texShape;if(a!=null&&Fn(r,a)){var s=a[0],u=a[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=qu(r),c=l.newShape,f=l.keptDims,h=c;if(h.length<r.length){var d=dc(n,h);return`
      `+hc(d)+`
      float `+o+`(int row, int col) {
        return `+o+"("+pc(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+rc(n)+`
      }
    `;var p=a[0],m=a[1],v=ku(i);return m===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+v+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:p===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+v+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+v+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(t);case 3:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[1]*r[2],s=r[2],u=qu(r),l=u.newShape,c=u.keptDims,f=l;if(f.length<r.length){var h=dc(n,f);return`
        `+hc(h)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+pc(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+rc(n)+`
      }
    `;var d=n.shapeInfo.texShape,p=d[0],m=d[1],v=n.shapeInfo.flatOffset;if(m===a&&v==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(m===s&&v==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var g=ku(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+g+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(t);case 4:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[3],s=r[2]*a,u=r[1]*s,l=qu(r),c=l.newShape,f=l.keptDims;if(c.length<r.length){var h=dc(n,c);return`
      `+hc(h)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+pc(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+a+`, 1)));
        `+rc(n)+`
      }
    `;var d=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,m=p[0],v=p[1];if(v===u&&d==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(v===a&&d==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var g=ku(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+v+", index + "+g+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 5:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[4],s=r[3]*a,u=r[2]*s,l=r[1]*u,c=qu(r),f=c.newShape,h=c.keptDims;if(f.length<r.length){var d=dc(n,f);return`
      `+hc(d)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+pc(["row","col","depth","depth2","depth3"],h)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+a+`)) +
          depth3;
        `+rc(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,v=m[0],g=m[1];if(g===l&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===a&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=ku(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+y+`;
      vec2 uv = uvFromFlat(`+v+", "+g+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 6:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=qu(r),s=a.newShape,u=a.keptDims;if(s.length<r.length){var l=dc(n,s);return`
      `+hc(l)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+pc(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],f=r[4]*c,h=r[3]*f,d=r[2]*h,p=r[1]*d;if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+d+", "+h+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+rc(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,g=v[0],y=v[1];if(y===p&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+d+", "+h+", "+f+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(y===c&&m==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var b=ku(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+d+" + depth * "+h+` +
          depth2 * `+f+" + depth3 * "+c+" + depth4 + "+b+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function aW(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=lr(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=lr();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+o+`, uv);
    }
  `}(t);case 2:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],f=lr();if(u!=null&&Fn(o,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+f.texture2D+"("+a+`, uv);
      }
    `;var h=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],d=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+d+", "+h[0]+", "+h[1]+`, row, col);
      return `+f.texture2D+"("+a+`, uv);
    }
  `}(t);case 3:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(o[0]===1){var c=o.slice(1),f=dc(i,c);return`
        `+aW(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+pc(["b","row","col"],[1,2])+`);
        }
      `}var h=l[0],d=l[1],p=Math.ceil(o[2]/2),m=p*Math.ceil(o[1]/2),v=lr();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+h+", "+d+", "+m+", "+p+`, b, row, col);
      return `+v.texture2D+"("+a+`, uv);
    }
  `}(t);default:return function(i){for(var o=i.shapeInfo.logicalShape,a=o.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=c[0],h=c[1],d=Math.ceil(o[a-1]/2),p=d*Math.ceil(o[a-2]/2),m="int b, int row, int col",v="b * "+p+" + (row / 2) * "+d+" + (col / 2)",g=2;g<a-1;g++)m="int b"+g+", "+m,p*=o[a-g-1],v="b"+g+" * "+p+" + "+v;var y=lr();return`
    vec4 `+u+"("+m+`) {
      int index = `+v+`;
      int texR = index / `+h+`;
      int texC = index - texR * `+h+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+h+", "+f+`);
      return `+y.texture2D+"("+s+`, uv);
    }
  `}(t)}}var Xle=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Yle=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Jle=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Qle=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function ku(t){return"offset"+t}function rc(t){var e=t.name,n=Ae(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Pt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function dc(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function pc(t,e){return e.map(function(n){return t[n]}).join(", ")}var Zle=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,V(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],o=Math.ceil(i/e);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,l=u.length,c=Pt(l),f=Rr("coords",l);if(o===1){var h=Pt(s=l+1);a=`
        `+h+" sourceLocR = "+h+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+h+" sourceLocG = "+h+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+h+" sourceLocA = "+h+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+h+" sourceLocB = "+h+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,a=`
        `+c+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+f[l-2]+";";var d=["x","y","z","w","u","v"].slice(0,s),p="."+d[s-1],m=d.map(function(C){return"int "+C}),v=Rr("sourceLocR",s-1).concat("inIdx.r"),g=Rr("sourceLocG",s-1).concat("inIdx.g"),y=Rr("sourceLocB",s-1).concat("inIdx.b"),b=Rr("sourceLocA",s-1).concat("inIdx.a"),_=n==="max"?"greaterThan":"lessThan",x=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+b.join()+")));",S=`vec4(
            getAChannel(`+v.join()+`),
            hasNextCol ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+b.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+d.join()+`),
                                          vec2(`+d.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+d.join()+`),
                               vec2(`+d.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+S+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+x+`
          vec4 candidate = `+S+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+_+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},ece=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,c=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},tce=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=c-1-t.padInfo.front,p=f-1-t.padInfo.top,m=h-1-t.padInfo.left,v=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+p+", "+m+`);
      const float avgMultiplier = float(`+v+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},nce=function(t,e,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Ye(t,e),Ye(t,n);var a="0.0";r!=null&&(Ye(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";i!=null&&(Ye(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},rce=function(t,e,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ye(t,e),Ye(t,n);var a="vec4(0.0)";r!=null&&(Ye(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(Ye(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},ice="return areal * breal - aimag * bimag;",oce="return areal * bimag + aimag * breal;",xD=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ye(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},N1="return a + b;",D1="return a - b;",_D="return a * b;",sW="return (a < 0.) ? b * a : a;",Xt=function(t,e,n){this.variableNames=["A","B"],this.outputShape=Ye(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},uW=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,ma=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ye(e,n);var i=this.outputShape.length,o="";if(r)if(i===0||Ae(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Pt(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=Rr("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+a[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+a[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},ace=function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),sce=function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),uce=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},lce=function(t){this.outputShape=[],this.outputShape=Df(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var i=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var o=e.length,a=e[e.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},cce=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Df(t,e);var n=this.outputShape,r=n.length,i=Pt(r),o=Rr("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(v,g){return"T"+g});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=a[e],c=a.slice(-2),f=a.join(),h="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var d=s[u-1];h+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+Xv(a,l,d)+`),
            vec2(`+Xv(c,l,d)+`));
        }`}var p=s.length,m=s[s.length-1];h+=`
        return getChannel(
          getT`+p+"("+Xv(a,l,m)+`),
          vec2(`+Xv(c,l,m)+"));",this.userCode=`
      float getValue(`+a.map(function(v){return"int "+v})+`) {
        `+h+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+n[r-2]+` &&
            `+o[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function Xv(t,e,n){var r=t.indexOf(e);return t.map(function(i,o){return o===r?i+" - "+n:i}).join()}var fce=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},hce=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dataFormat==="channelsLast",a=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},dce=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},pce=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},mce=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},vce=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=e-1-t.padInfo.top,a=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},SD=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),d=t.inChannels%4,p=t.dataFormat==="channelsLast",m=p?1:2,v=p?2:3,g=p?3:1,y="",b="";n&&(y=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,b="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+y+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+g+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+v+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+h+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(d===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+h+`) *
                    getW(wR, wC, `+h+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+h+`, xR, xC) *
                    getW(wR, wC, `+h+`, d2);
              }

            } else if (`+(d===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(d===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2),
                getW(wR, wC, `+h+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1),
                  getX(batch, xR, xC, `+h+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC),
                  getX(batch, `+h+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+_+`
        `+b+`
        setOutput(result);
      }
    `},gce=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,f=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+d+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+d+`) *
                  getW(wF, wR, wC, `+d+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1),
                  getX(batch, xF, xR, xC, `+d+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2),
                  getW(wF, wR, wC, `+d+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},ED=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=t.outChannels/t.inChannels,m="",v="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,v="result = activation(result);");var g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+g+`
        `+v+`
        setOutput(result);
      }
    `},CD=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=d,m="int xR; int xC; int xCOffset;",v=0;v<h;v++)for(var g=0;g<d;g++)m+=`
          vec4 xTexelR`+v+"C"+2*g+` = vec4(0.);
          vec4 wR`+v+"C"+g+` = vec4(0.);
          vec4 xR`+v+"C"+g+" = vec4(0.);";for(v=0;v<h;v++)for(var y=0;y<p;y++){if(m+=`
          xR = xRCorner + `+v*c+`;
          xC = xCCorner + `+(g=2*y)*f+`;
        `,l===1){if(g<d&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+v+"C"+g+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+v+"C"+g+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+v+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+v+"C"+g+" = vec4(previous.zw, xTexelR"+v+"C"+g+`.xy);
                } else {
                  xR`+v+"C"+g+" = vec4(0, 0, xTexelR"+v+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+v+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+v+"C"+g+` = vec4(0.);
                }

                xR`+v+"C"+g+" = xTexelR"+v+"C"+g+`;
              `,g+1<d)){var b=s%2==0?AV(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+b+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+v+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+v+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+v+"C"+g+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+v+"C"+(g+1)+` = vec4(
                    xTexelR`+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+v+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+v+"C"+(g+1)+" = xTexelR"+v+"C"+(g+2)+`;
                `}}else g<d&&(m+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+v+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+v+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+v+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+v+"C"+(g+2)+` = vec4(0.);
                }

                xR`+v+"C"+g+` = vec4(
                  xTexelR`+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+`.zw);
              `,g+1<d&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+v+"C"+(g+1)+" = vec4(xTexelR"+v+"C"+(g+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+v+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+v+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+v+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+v+"C"+(g+2)+` = vec4(0.);
                }

                xR`+v+"C"+g+` = vec4(
                  xTexelR`+v+"C"+g+".xy, xTexelR"+v+"C"+(g+2)+`.xy);
              `,g+1<d&&(m+=`
                  xR`+v+"C"+(g+1)+` = vec4(
                    xTexelR`+v+"C"+g+".zw, xTexelR"+v+"C"+(g+2)+`.zw);
                `)),m+="}");g<d&&(m+=`
            vec4 wTexelR`+v+"C"+g+" = getW("+v+", "+g+`, d1, q);
            wR`+v+"C"+g+" = vec4(wTexelR"+v+"C"+g+".xz, wTexelR"+v+"C"+g+`.xz);
          `,g+1<d&&(m+=`
              vec4 wTexelR`+v+"C"+(g+1)+" = getW("+v+", "+(g+1)+`, d1, q);
              wR`+v+"C"+(g+1)+` =
                vec4(wTexelR`+v+"C"+(g+1)+".xz, wTexelR"+v+"C"+(g+1)+".xz);"))}for(v=0;v<h;v++)for(g=0;g<d;g++)m+="dotProd += xR"+v+"C"+g+" * wR"+v+"C"+g+";";var _="",x="";n&&(_=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,x="result = activation(result);");var S=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+S+`
        `+x+`
        setOutput(result);
      }
    `},yce=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],a=t[1],s=t[2],u=t[3],l=e[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var h=r==="bilinear"?1:0,d=[a-1+".0",s-1+".0"],p=d[0],m=d[1],v=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=v[0],y=v[1],b=v[2],_=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=_[0],S=_[1],E=_[2];this.userCode=`
      const float height_ratio = float(`+g+`);
      const float width_ratio = float(`+x+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+y+`;
        float width_scale = `+S+`;

        float in_y = `+b+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+h+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},bce=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Pt(r)+` coords = getOutputCoords();
        int end = `+AD(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+AD(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function AD(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var wce=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Np.DENSE;var e=Wd(t),n=lr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+tl(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},xce=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Np.DENSE;var e=Wd(t),n=lr();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+tl(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},_ce=function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),Sce=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Ece=function(t){this.variableNames=["A"],this.outTexUsage=si.DOWNLOAD;var e=lr();this.outputShape=t,this.userCode=`
      `+oW+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},Cce=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=si.DOWNLOAD;var e=lr();this.outputShape=t,this.userCode=`
      `+oW+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},Ace=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=lr(),i=e[0],o=e[1];this.outputShape=t;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+ET(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},Tce=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=lr(),i=e[0],o=e[1];this.outputShape=t;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+ET(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `},Pce="return real * expR - imag * expI;",Oce="return real * expI + imag * expR;",TD=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},kce=function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(n.valueLoc,e)}},t}(),Ice=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=Pt(this.rank),o=function(a,s){var u=a.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],f=0;f<a.length;f++)f===s?c.push("int(getIndices("+l[f]+"))"):c.push(""+l[f]);return c.join()}(t,n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},Rce=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Pt(e.length),i=Pt(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Nce(t,e){var n=lr();return Pue(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Dce(t,e){return Nue(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Mce(t,e){return Due(t,e,new Uint16Array([0,1,2,2,1,3]))}function Fm(t,e,n,r,i,o,a){$ue(n,r);var s=Mue(t,e),u=t.TEXTURE_2D;return Te(t,e,function(){return t.bindTexture(u,s)}),Te(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Te(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Te(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Te(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Te(t,e,function(){return t.texImage2D(u,0,i,n,r,0,o,a,null)}),Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function $ce(t,e,n,r,i){var o=Ub(n,r);return Fm(t,e,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function jce(t,e,n,r,i){var o=Ub(n,r);return Fm(t,e,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function Lce(t,e,n,r,i){var o=Ub(n,r);return Fm(t,e,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function Fce(t,e,n,r,i){var o=Lm(n,r);return Fm(t,e,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function Bce(t,e,n,r,i){var o=Lm(n,r);return Fm(t,e,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function Uce(t,e,n,r){return Te(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),pD(t,e,n,"clipSpacePos",r,3,20,0)&&pD(t,e,n,"uv",r,2,20,12)}function Vce(t,e,n,r,i,o,a){var s,u,l;Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*i*4),u=t.FLOAT,l=a.internalFormatPackedFloat),s.set(o),Te(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,i,0,t.RGBA,u,s)}),Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function Wce(t,e,n,r){Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Te(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Te(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function zce(t,e,n,r,i){var o=t.createBuffer();Te(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var a=16*n*r;return Te(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)}),Te(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),Te(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function Hce(t,e,n){var r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function qce(t,e,n,r,i){var o=Ub(n,r),a=o[0],s=o[1],u=new Uint8Array(n*r*4);return Te(t,e,function(){return t.readPixels(0,0,a,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function Gce(t,e,n,r,i,o,a,s){var u=t,l=new Float32Array(function(c,f){var h=Lm(c,f);return h[0]*h[1]*4}(o,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function Kce(t,e,n,r){var i=new Float32Array(n*r*4);return Te(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)}),i}var Xce=function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=ne().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,Sue(n,e)):this.gl=aa(n);var r="WEBGL_color_buffer_float";if(ne().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Hv(this.gl,this.debug,"OES_texture_float"),Ii(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Hv(this.gl,this.debug,"OES_texture_half_float");else if(ne().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Ii(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Hv(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ne().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Ii(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Ii(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Dce(this.gl,this.debug),this.indexBuffer=Mce(this.gl,this.debug),this.framebuffer=jue(this.gl,this.debug),this.textureConfig=pT(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return ne().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Te(n,this.debug,function(){return n.finish()}),Te(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),Te(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),Te(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),Te(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),Te(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),$ce(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),jce(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),Lce(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),Wce(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,i){this.throwIfDisposed(),Vce(this.gl,this.debug,e,n,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),Bce(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),Fce(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(mD(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Te(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return qce(i.gl,i.debug,n,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,i,o,a){return Gce(this.gl,e,0,0,0,o,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return Hce(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var i=zce(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,i=this;if(ne().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=o.clientWaitSync(a,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},n=a}else ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(n,ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return Kce(i.gl,i.debug,n,r)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=Oue(n,this.debug,e),i=Nce(n,this.debug),o=Iue(n,this.debug);return Te(n,this.debug,function(){return n.attachShader(o,i)}),Te(n,this.debug,function(){return n.attachShader(o,r)}),Rue(n,this.debug,o),this.debug&&O1(n,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=Uce(n,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Te(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&O1(this.gl,this.debug,this.program),Te(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?Fue(this.gl,this.debug,e,n):Bue(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),Te(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Uue(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var i=Lm(n,r),o=i[0],a=i[1];this.setOutputMatrixTextureDriver(e,o,a)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&O1(this.gl,this.debug,this.program),qv(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Te(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Te(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Hv(this.gl,this.debug,ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return Se(this,void 0,void 0,function(){var n=this;return Ee(this,function(r){switch(r.label){case 0:return[4,uD(function(){return n.disposed||n.isQueryAvailable(e,ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||uD(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),k1(this.gl,this.debug,e,this.framebuffer),this.debug&&qv(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(k1(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&qv(this.gl)):mD(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var i=this.gl;k1(i,this.debug,e,this.framebuffer),this.debug&&qv(i),this.outputTexture=e,Te(i,this.debug,function(){return i.viewport(0,0,n,r)}),Te(i,this.debug,function(){return i.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,i){var o=this;this.throwIfDisposed(),Te(this.gl,this.debug,function(){return o.gl.scissor(e,n,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function PD(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var i=n.logicalShape,o=e[r],a=o.shape;if(!Fn(i,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+a+" must match");if(!n.isUniform||!o.isUniform){var s=n.texShape,u=o.isUniform?null:o.texData.texShape;if(!Fn(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var Yce=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,i=n.inChannels,o=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,f=n.dataFormat,h=s.left,d=s.top,p=i*r,m=lr(),v=f==="channelsLast",g=v?0:1,y=v?1:2,b="",_=0;_<=1;_++)for(var x=0;x<=1;x++)b+=`
          blockIndex = rc.y + `+x+`;
          pos = rc.x + `+_+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+a+" - "+d+`;
            d0 = offsetY + `+c+" * (pos / "+p+`);

            if(d0 < `+e[g]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+o+". - "+h+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+i+`.));

              if(d1 < `+e[y]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+v+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*_+x)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*_+x)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+b+`

        `+m.output+` = result;
      }
    `},Jce=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var o,a=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},Qce=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Zce=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,a=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},efe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=i-1-t.padInfo.top,s=o-1-t.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},tfe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=s-1-t.padInfo.front,f=u-1-t.padInfo.top,h=l-1-t.padInfo.left,d=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+f+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+d+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},M1=function(t,e,n,r,i,o,a){n===void 0&&(n=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",p="";o&&(d=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,p="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+d+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+h[0]+`);
          result += (`+f[1]+" * "+h[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},nfe=function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t}(),rfe=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},ife=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Rr("rc",e),r=Pt(e),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",f=s-2;f<s;f++)c+=l[f]+" >= "+u[f],f<s-1&&(c+="||");return c}(e,t,n),o=function(s,u,l,c){if(s===1)return"";var f=c.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(e,t[t.length-1],t[t.length-2],n),a=function(s,u){var l=s.length,c=function(f,h){for(var d=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var v=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),g=2;g<f;g++)v=h[h.length-1-g]+","+v;d.push(v)}return d}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},ofe=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,i=Pt(r),o=e.map(function(u){return u[0]}).join(","),a=e.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},afe=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(v,g){return v[0]+t[g]+v[1]});for(var r=t.length,i=Pt(r),o=e.map(function(v){return v[0]}).join(","),a=e.map(function(v,g){return v[0]+t[g]}).join(","),s=Rr("rc",r),u=Rr("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",p=0,m=r===1?2:4;p<m;p++)d+=`
        `+f[p]+`
        if (`+h+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+i+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;d+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+d+`
        setOutput(result);
      }
    `},$1=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var h=e==="avg",d="0.0";if(h||(d="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+c+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(p="avgValue / count");var m=4*Math.floor(r/4),v=r%4,g=`
      if (`+h+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+c+", "+f+`);
      const float initializationValue = `+d+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+d+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+g+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(v===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(v===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(v===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+g+`
          }
        }
        setOutput(`+p+`);
      }
    `}},j1=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,m=t.padInfo.left;this.outputShape=t.outShape;var v=e==="avg",g="0.0";if(v||(g="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+a+`);
        const ivec3 pads = ivec3(`+d+", "+p+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+h+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+h+` +
                      wR * `+h+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(y="avgValue / count");var b=4*Math.floor(r/4),_=r%4,x=`
      if (`+v+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+d+", "+p+", "+m+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+b+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+x+`
            }

            int xC = xCCorner + `+b+`;
            if (`+(_===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+x+`
            } else if (`+(_===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+x+`
            } else if (`+(_===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+x+`
            }
          }
          setOutput(`+y+`);
        }
      }
    `}},sfe=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/n);this.outputShape=[r,o];var a="0.0",s="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",s="min"):e==="max"&&(a="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,h="vec4";e==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");var d="";i%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===2)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===3)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},ufe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+tl(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+ET(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},lfe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?i-1:i,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],d=1/f,p=1/h,m=2*Math.ceil(d)+2,v=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+v+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},cfe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?o-1:o,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},ffe=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?o-1:o,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},hfe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?i-1:i,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],d=1/f,p=1/h,m=2*Math.ceil(d)+2,v=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+v+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},dfe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?o-1:o,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},pfe=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(o,a){return function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),i=Pt(n);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},mfe=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=Rr("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],a=Pt(n);function s(u){var l=t.map(function(c,f){return function(h,d){return e.indexOf(h)!==-1&&t[h]!==1?t[h]+" - "+d[h]+" - 1":""+d[h]}(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},OD=function(t,e,n,r,i,o,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Pt(i.length),u=Pt(o.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var h="getUpdates("+f+")",d=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+d+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+h+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},vfe=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";i%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var f="";i%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},gfe=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<e.length;u++)s.push(""+o[u]),u<t&&a.push(""+o[u]);r=a.join(),i=s.join()}var l=Pt(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},yfe=function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=Pt(this.rank),i="uniform int start["+this.rank+"];",o=function(a){if(a===1)return"sourceLoc";if(a<=6)return L1.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(a,s){return"sourceLoc."+L1[s]+" = start["+s+"] + coords."+L1[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+n+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),L1=["x","y","z","w","u","v"],bfe=function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=Pt(this.rank),r=Rr("coords",this.rank),i=Rr("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",a="getChannel(getSource("+i.join()+"), "+o+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+a+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(c,f){return"start["+f+"]"}).join()+");":e.map(function(c,f){return i[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),wfe=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=Pt(n.length),o=Pt(n.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=n.map(function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},xfe=function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var i,o=kD(n,r),a=ID(e,o,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),o===ri.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===ri.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===ri.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===ri.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===ri.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),i},t.prototype.releaseTexture=function(e,n,r,i){if(this.freeTextures!=null){var o=ID(n,kD(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],s=a.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(i){e.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function kD(t,e){if(t===si.UPLOAD)return ri.PACKED_2X2_FLOAT32;if(t===si.RENDER||t==null)return function(n){return ne().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?ri.PACKED_2X2_FLOAT32:ri.UNPACKED_FLOAT32:n?ri.PACKED_2X2_FLOAT16:ri.UNPACKED_FLOAT16}(e);if(t===si.DOWNLOAD||t===si.PIXELS)return ri.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function ID(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var _fe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=Pt(this.rank),o=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<a.length;c++)l.push("imod("+u[c]+", "+a[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},Sfe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=Pt(this.rank),o=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<a.length;c++)l[a[c]]=u[c];return l.join()}(e);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},Efe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Pt(this.rank),o=iW("rc",this.rank),a=new Array(this.rank);for(r=0;r<e.length;r++)a[e[r]]=o[r];var s="vec2("+a.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},CT=1.7580993408473768,AT=1.0507009873554805,He=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},xo="if (isnan(x)) return x;",Cfe="return x;",RD="return abs(x);",lW=xo+`
  return (x < 0.0) ? 0.0 : x;
`,cW=xo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,fW="return (x >= 0.0) ? x : (exp(x) - 1.0);",Afe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+CT+`;
  float scale = `+AT+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,ND="return -x;",DD="return ceil(x);",MD="return floor(x);",$D="return exp(x);",jD="return exp(x) - 1.0;",Tfe=xo+`
  return sin(x);
`,Pfe=xo+`
  return cos(x);
`,Ofe=xo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,kfe=xo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Ife=xo+`
  return atan(x);
`,Rfe=xo+"return log(x + sqrt(x * x + 1.0));",Nfe=xo+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Dfe=xo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Yv="return x;",Mfe="return x;",hW=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,dW=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,pW=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,od=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},$fe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=Rr("rc",e),r=Pt(e),i=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(e,n),o=n.slice(-2),a=e<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},Jv={};function Qv(t,e){if(e===void 0&&(e=!1),t==="linear")return e?Mfe:Cfe;if(t==="relu")return e?hW:lW;if(t==="elu")return e?pW:fW;if(t==="relu6")return e?dW:cW;if(t==="prelu")return e?uW:sW;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var jfe=600,Lfe=function(t){function e(n){var r,i=t.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!ne().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var o=aa(ne().getNumber("WEBGL_VERSION"));i.binaryCache=((r=ne().getNumber("WEBGL_VERSION"))in Jv||(Jv[r]={}),Jv[r]),i.gpgpu=new Xce(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=n,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=n.gl.canvas;return i.textureManager=new xfe(i.gpgpu),i.numMBBeforeWarning=ne().global.screen==null?1024:ne().global.screen.height*ne().global.screen.width*window.devicePixelRatio*jfe/1024/1024,i.texData=new XV(i,G),i}return wo(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,i){if(ne().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:n,usage:si.UPLOAD}),o},e.prototype.move=function(n,r,i,o){if(ne().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:o,values:r,usage:si.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),i=r.values,o=r.dtype,a=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new od(u,Yv):new He(u,Yv);var f=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:o}],o),h=this.readSync(f.dataId);return this.disposeData(f.dataId),h}if(i!=null)return this.convertAndCacheOnCPU(n);if(o==="string")return i;var d,p,m=this.activeTimers!=null;return m&&(d=jo()),o==="complex64"?p=PE(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=jo()-d),this.convertAndCacheOnCPU(n,p)},e.prototype.read=function(n){return Se(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,f,h,d,p,m,v,g,y,b,_,x,S,E,C;return Ee(this,function(A){switch(A.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(T){return r.push(T)})];if(i=this.texData.get(n),o=i.values,a=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,c=i.isPacked,s!=null)return f=void 0,f=c?new od(a,Yv):new He(a,Yv),h=this.runWebGLProgram(f,[{dataId:n,shape:a,dtype:u}],u),d=this.read(h.dataId),this.disposeData(h.dataId),[2,d];if(o!=null)return[2,this.convertAndCacheOnCPU(n)];if(!ne().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ne().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&ne().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),v=this.texData.get(m.dataId),p=(C=this.gpgpu).createBufferFromTexture.apply(C,[v.texture].concat(Wd(a)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:A.sent(),A.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return y=A.sent(),b=y[0],_=y[1],g=PE(b,_),[3,5];case 4:p==null?g=this.getValuesFromTexture(n):(x=Ae(a),g=this.gpgpu.downloadFloat32MatrixFromBuffer(p,x)),A.label=5;case 5:return m!=null&&this.disposeData(m.dataId),S=this.convertAndCacheOnCPU(n,g),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(T){return T(S)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,S]}})})},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var i=n[r];if(!Aue(i))throw ne().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,i=this.texData.get(n),o=i.shape,a=i.dtype,s=i.isPacked,u=Ae(o);if(ne().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(Wd(o))).subarray(0,u);return this.disposeData(l.dataId),f}var h=ne().getBool("WEBGL_PACK")&&s===!0,d=h?I1(o):o,p=h?new Cce(d):new Ece(d),m=this.runWebGLProgram(p,[{shape:d,dtype:a,dataId:n}],"float32"),v=this.texData.get(m.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),g},e.prototype.time=function(n){return Se(this,void 0,void 0,function(){var r,i,o,a,s,u,l;return Ee(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,n(),a=Rf(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=Rf(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return l=c.sent(),u.kernelMs=aue(l),u.getExtraProfileInfo=function(){return l.map(function(f,h){return{name:s[h],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:jo(),endMs:null}},e.prototype.endTimer=function(n){return ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=jo(),n)},e.prototype.getQueryTime=function(n){return Se(this,void 0,void 0,function(){var r;return Ee(this,function(i){return ne().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),i=r.texture,o=r.dtype,a=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(i,a,s,u)));var h=this.texData.get(n);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return ne().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=G.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(o){return i.texData.get(o.dataId).texture==null&&o.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var i=this.makeOutput(n.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:G.keep(n.clone()),imag:G.keep(r.clone())},i},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,i);if(Ae(i)===0)return Xn([],i,n.dtype);var o=this.texData.get(n.dataId).isPacked,a=GV(n.shape,r,i);if(o||!a){var s=ne().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bfe(i):new yfe(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,i)},e.prototype.shallowSlice=function(n,r,i){var o=this.texData.get(n.dataId),a=this.makeOutput(i,n.dtype),s=this.texData.get(a.dataId);Object.assign(s,o),s.shape=i,s.dtype=n.dtype;var u=KV(r,n.strides);o.slice&&(u+=o.slice.flatOffset),s.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},e.prototype.stridedSlice=function(n,r,i,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,i,o);var a=bT(r,i,o);if(a.some(function(u){return u===0}))return Xn([],a);var s=new wfe(r,o,a);return this.compileAndRun(s,[n])},e.prototype.reverse=function(n,r){var i=ne().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mfe(n.shape,r):new pfe(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var i=n.map(function(d){return Ti(d)}),o=n.map(function(d){return Bo(d)});return Gn(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>ne().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(n.length/2),s=this.concat(n.slice(0,a),r),u=this.concat(n.slice(a),r);return this.concat([s,u],r)}if(ne().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new cce(n.map(function(d){return d.shape}),r);return this.compileAndRun(l,n)}var c=Df(n.map(function(d){return d.shape}),r),f=n.map(function(d){return d.as2D(-1,Ae(d.shape.slice(r)))}),h=new lce(f.map(function(d){return d.shape}));return this.compileAndRun(h,f).reshape(c)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(ne().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,ND,n.dtype);var r=new He(n.shape,ND);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,i,o){var a=i?n.shape[2]:n.shape[1],s=o?r.shape[1]:r.shape[2],u=i?n.shape[1]:n.shape[2],l=n.shape[0];if((a===1||s===1)&&u>1e3){i&&(n=n.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),f=s===1?2:1,h=s===1?r.as3D(l,1,u):r;return this.multiply(c,h).sum(f,!0)}var d=Kn(n.dtype,r.dtype),p=new M1(n.shape,[l,a,s],i,o);return this.compileAndRun(p,[n,r],d)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,o=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=o?r.shape[2]:r.shape[1],f=a?i.shape[1]:i.shape[2],h=r.shape[0],d=Kn(r.dtype,i.dtype),p=s!=null,m=l!=null,v=u?Qv(u,!0):null,g=new M1(r.shape,[h,c,f],o,a,p,v,m),y=[r,i];return s&&y.push(s),l&&y.push(l),this.compileAndRun(g,y,d)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var i=this.texData.get(n.dataId),o=this.texData.get(r.dataId),a=new xD(ice,n.shape,r.shape),s=new xD(oce,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],l=this.compileAndRun(a,u),c=this.compileAndRun(s,u),f=this.complex(l,c);return l.dispose(),c.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,_D,n.dtype);var h=new Xt(_D,n.shape,r.shape);return this.compileAndRun(h,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,i,o,a,s){var u=[n,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(a!=null&&(c=a.shape,u.push(a)),ne().getBool("WEBGL_PACK_NORMALIZATION")){var f=new rce(n.shape,r.shape,i.shape,l,c,o);return this.compileAndRun(f,u)}var h=new nce(n.shape,r.shape,i.shape,l,c,o);return this.compileAndRun(h,u)},e.prototype.localResponseNormalization4D=function(n,r,i,o,a){var s=ne().getBool("WEBGL_PACK_NORMALIZATION")?new Zce(n.shape,r,i,o,a):new Jce(n.shape,r,i,o,a);return this.compileAndRun(s,[n])},e.prototype.LRNGrad=function(n,r,i,o,a,s,u){var l=new Qce(r.shape,o,a,s,u);return this.compileAndRun(l,[r,i,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var i=this.readSync(n.dataId).map(function(a){return jy(a)});return nW(Ue(n.shape,n.dtype,i),r)}var o=new _fe(n.shape,r);return this.compileAndRun(o,[n])},e.prototype.pad=function(n,r,i){var o=ne().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new afe(n.shape,r,i):new ofe(n.shape,r,i);return this.compileAndRun(o,[n])},e.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var i=ne().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Efe(n.shape,r):new Sfe(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.gather=function(n,r,i){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,i);var o=new Ice(n.shape,r.size,i);return this.compileAndRun(o,[n,r])},e.prototype.batchToSpaceND=function(n,r,i){V(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(f,h){return f*h}),a=Wy(n.shape,r,o),s=zy(a.length,r.length),u=Hy(n.shape,r,o),l=WV(i,r.length),c=zV(u,i,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){V(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(h,d){return h*d}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=Wy(u.shape,r,o,!1),c=zy(l.length,r.length,!1),f=Hy(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.reduce=function(n,r,i){var o=n.shape[0],a=n.shape[1],s=R1(a),u=new sfe({windowSize:s,inSize:a,batchSize:o},r),l=this.compileAndRun(u,[n],i);return l.shape[1]===1?l:this.reduce(l,r,i)},e.prototype.argReduce=function(n,r,i){i===void 0&&(i=null);var o=n.shape[0],a=n.shape[1];i!=null&&(o=i.shape[0],a=i.shape[1]);var s=R1(a),u=new Gle({windowSize:s,inSize:a,batchSize:o},r,i==null),l=[n];i!=null&&l.push(i);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},e.prototype.argReducePacked=function(n,r,i){i===void 0&&(i=null);var o=i!=null?i.shape:n.shape,a=R1(o[o.length-1]),s=new Zle(o,a,r,i==null),u=i==null?[n]:[n,i],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){ti("sum",r,n.rank);var i=or(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a),u=E1(n.dtype);return this.reduce(s,"sum",u).reshape(o)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var i=or(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a),u=E1(n.dtype);return this.reduce(s,"prod",u).reshape(o)},e.prototype.unsortedSegmentSum=function(n,r,i){var o=0,a=sa([o],n.rank),s=n;a!=null&&(s=n.transpose(a),o=ua(1,n.rank)[0]);var u=function(d,p,m){for(var v=[],g=d.length,y=0;y<g;y++)y!==p?v.push(d[y]):v.push(m);return v}(s.shape,o,i),l=Ae([s.shape[o]]),c=s.as2D(-1,l),f=E1(n.dtype),h=this.segOpCompute(c,"unsortedSegmentSum",r,f,i).reshape(u);return a!=null&&(h=h.transpose(mT(a))),h},e.prototype.segOpCompute=function(n,r,i,o,a){var s=n.shape[0],u=n.shape[1],l=function(h,d){var p,m=!1;for(h<=qV?(p=h,m=!0):p=bE(h,Math.floor(Math.sqrt(h)));!m;)p>d||p===h?m=!0:p=bE(h,p+1);return p}(u,a),c=new vfe({windowSize:l,inSize:u,batchSize:s,numSegments:a}),f=this.compileAndRun(c,[n,i],o);return f.shape[1]===a?f:(i=Vy(0,a).tile([u/l]),this.segOpCompute(f,r,i,o,a))},e.prototype.argMinMaxReduce=function(n,r,i){var o=[r];if(ti("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,n.rank),!ne().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var a=or(n.shape,o),s=a[0],u=Ae(a[1]),l=n.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(n,i)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,i,o){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var a=new bce(n.shape,i,o);return this.compileAndRun(a,[n])},e.prototype.equal=function(n,r){if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var i=new Xt("return float(a == b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new Xt("return float(a != b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new Xt("return float(a < b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new Xt("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new Xt("return float(a > b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new Xt("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new He(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new Xt("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new Xt("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.select=function(n,r,i){var o=new gfe(n.rank,r.shape,r.rank);return this.compileAndRun(o,[n,r,i],Kn(r.dtype,i.dtype))},e.prototype.where=function(n){By("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return ST(n.shape,r)},e.prototype.topk=function(n,r,i){return rW(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){ti("min",r,n.rank);var i=or(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(o)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var i=ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ma(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.mod=function(n,r){var i=ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ma(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Xt(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);ti("max",r,n.rank);var i=or(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(o)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var i=ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ma(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.all=function(n,r){ti("all",r,n.rank);var i=or(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(o)},e.prototype.any=function(n,r){ti("any",r,n.rank);var i=or(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(o)},e.prototype.realDivide=function(n,r){if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new Xt(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"float32")},e.prototype.floorDiv=function(n,r){if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new Xt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,N1);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var i=Kn(n.dtype,r.dtype);if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,N1,i);var o=new Xt(N1,n.shape,r.shape);return this.compileAndRun(o,[n,r],i)},e.prototype.packedUnaryOp=function(n,r,i){var o=new od(n.shape,r);return this.compileAndRun(o,[n],i)},e.prototype.packedBinaryOp=function(n,r,i,o,a){a===void 0&&(a=!1);var s=new ma(i,n.shape,r.shape,a);return this.compileAndRun(s,[n,r],o)},e.prototype.complexSeparableBinaryOp=function(n,r,i){var o=this,a=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(h){var d=h[0],p=h[1],m=o.makeComplexComponentTensorInfo(n,d),v=o.makeComplexComponentTensorInfo(r,p),g=new Xt(i,n.shape,r.shape);return o.compileAndRun(g,[m,v],Kn(d.dtype,p.dtype))}),l=u[0],c=u[1],f=this.complex(l,c);return l.dispose(),c.dispose(),f},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>ne().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),i=this.addN(n.slice(0,r)),o=this.addN(n.slice(r));return this.addN([i,o])}var a=n.map(function(l){return l.dtype}).reduce(function(l,c){return Kn(l,c)}),s=n.map(function(l){return l.shape}),u=ne().getBool("WEBGL_PACK")?new qle(n[0].shape,s):new Hle(n[0].shape,s);return this.compileAndRun(u,n,a)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,D1);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var i=Kn(n.dtype,r.dtype);if(ne().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,D1,n.dtype);var o=new Xt(D1,n.shape,r.shape);return this.compileAndRun(o,[n,r],i)},e.prototype.pow=function(n,r){var i=ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ma(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Xt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),o=Kn(n.dtype,r.dtype);return this.compileAndRun(i,[n,r],o)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(ne().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,DD,n.dtype);var r=new He(n.shape,DD);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(ne().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,MD,n.dtype);var r=new He(n.shape,MD);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new He(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new He(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new He(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new He(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new He(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(ne().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,$D,n.dtype);var r=new He(n.shape,$D);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(ne().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,jD,n.dtype);var r=new He(n.shape,jD);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var i=On([r],n.shape),o=this.max(n,i),a=Ur(o.shape,i),s=this.subtract(n,o.reshape(a)),u=this.exp(s),l=this.sum(u,i).reshape(a);return this.realDivide(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(ne().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new He(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new He(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new He(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new He(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new He(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=ne().getBool("WEBGL_PACK")?new od(n.shape,hW):new He(n.shape,lW),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=ne().getBool("WEBGL_PACK")?new od(n.shape,dW):new He(n.shape,cW),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var i=ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ma(uW,n.shape,r.shape):new Xt(sW,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.elu=function(n){if(ne().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,pW,n.dtype);var r=new He(n.shape,fW);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var i=ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ma(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new Xt("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.selu=function(n){var r=new He(n.shape,Afe);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new He(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,i){var o,a=(o=ne().getBool("WEBGL_PACK_CLIP")?new sce(n.shape):new ace(n.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[n],null,a)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(ne().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,RD,n.dtype);var r=new He(n.shape,RD);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),i=new uce(n.shape),o=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(i,o)},e.prototype.sigmoid=function(n){var r=new He(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new He(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new He(n.shape,Tfe);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new He(n.shape,Pfe);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new He(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new He(n.shape,Ofe);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new He(n.shape,kfe);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new He(n.shape,Ife);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var i=ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ma(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new Xt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.sinh=function(n){var r=new He(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new He(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new He(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new He(n.shape,Rfe);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new He(n.shape,Nfe);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new He(n.shape,Dfe);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new He(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var i=new He(n.shape,function(o){return o===void 0&&(o=0),xo+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(i,[n])},e.prototype.conv2dByMatMul=function(n,r,i,o,a,s){var u=n.shape,l=this.texData.get(n.dataId),c=i.inChannels,f=u[0]*u[1]*u[2],h=i.outChannels,d=i.dataFormat==="channelsLast",p=(f===1||h===1)&&c>1e3,m=u[2]%2!=0&&!!l.isPacked;if(p||!ne().getBool("WEBGL_LAZILY_UNPACK")||!ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var v=d?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],g=this.reshape(n,[1,v,i.inChannels]),y=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b:y,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),i.outShape)}var b=d?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),_={dataId:n.dataId,shape:[1,b,i.inChannels],dtype:n.dtype},x=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,V(Kv(l.shape,_.shape),function(){return"packed reshape "+l.shape+" to "+_.shape+" isn't free"});var S=this.reshape(r,[1,i.inChannels,i.outChannels]),E=this.fusedBatchMatMul({a:_,b:S,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),C=this.texData.get(E.dataId);return V(C.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=x,C.shape=i.outShape,G.makeTensorFromDataId(E.dataId,i.outShape,E.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,i,o,a,s){var u=i.filterWidth,l=i.filterHeight,c=i.inChannels,f=i.outWidth,h=i.outHeight,d=i.dataFormat==="channelsLast",p=u*l*c,m=h*f,v=[p,m],g=n.squeeze([0]),y=r.reshape([1,p,-1]),b=new Yce(v,g.shape,i),_=this.compileAndRun(b,[g]).reshape([1,v[0],v[1]]),x=o!=null,S=s!=null,E=a?Qv(a,!0):null,C=new M1(_.shape,[1,m,i.outChannels],!0,!1,x,E,S),A=[_,y];o&&A.push(o),S&&A.push(s);var T=this.compileAndRun(C,A);return d?T.reshape([1,h,f,i.outChannels]):T.reshape([1,i.outChannels,h,f])},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,o=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,o,a,s,u);if(ne().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,o,a,s,u);var l=a!=null,c=u!=null,f=s?Qv(s,!1):null,h=new SD(o,l,f,c),d=[r,i];return a&&d.push(a),u&&d.push(u),this.compileAndRun(h,d)},e.prototype.conv2d=function(n,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,i);if(ne().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,i);var o=new SD(i);return this.compileAndRun(o,[n,r])},e.prototype.conv2dDerInput=function(n,r,i){var o=new hce(i);return this.compileAndRun(o,[n,r])},e.prototype.conv2dDerFilter=function(n,r,i){var o=new fce(i);return this.compileAndRun(o,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,i=n.input,o=n.filter,a=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=ne().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,f=u?Qv(u,c):null,h=[i,o],d=s!=null,p=l!=null;return d&&h.push(s),p&&h.push(l),c?(r=new CD(a,d,f,p),this.compileAndRun(r,h)):(r=new ED(a,d,f,p),this.compileAndRun(r,h))},e.prototype.depthwiseConv2D=function(n,r,i){var o;return ne().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new CD(i),this.compileAndRun(o,[n,r])):(o=new ED(i),this.compileAndRun(o,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,i){var o=new vce(i);return this.compileAndRun(o,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){var o=new mce(i);return this.compileAndRun(o,[n,r])},e.prototype.conv3d=function(n,r,i){var o=new gce(i);return this.compileAndRun(o,[n,r])},e.prototype.conv3dDerInput=function(n,r,i){var o=new pce(i);return this.compileAndRun(o,[n,r])},e.prototype.conv3dDerFilter=function(n,r,i){var o=new dce(i);return this.compileAndRun(o,[n,r])},e.prototype.maxPool=function(n,r){var i=new $1(r,"max",!1);return this.compileAndRun(i,[n])},e.prototype.avgPool=function(n,r){var i=new $1(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,i,o){var a=new $1(o,"max",!0),s=this.compileAndRun(a,[r]),u=new efe(o),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,i){var o=new ece(i);return this.compileAndRun(o,[n],r.dtype)},e.prototype.cast=function(n,r){return QV(n,r,this)},e.prototype.unstack=function(n,r){for(var i=n.shape[r],o=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(o[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(o);return c},e.prototype.avgPool3d=function(n,r){var i=new j1(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,i){var o=new tce(i);return this.compileAndRun(o,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var i=new j1(r,"max",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,i,o){var a=new j1(o,"max",!0),s=this.compileAndRun(a,[r]),u=new tfe(o),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(n,r){var i=this.texData.get(n.dataId);if(i.isPacked&&!Kv(n.shape,r)&&(i.texture===null||!Kv(i.shape,r))){var o=this.packedReshape(n,r);return G.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return TE(n,r)},e.prototype.resizeBilinear=function(n,r,i,o){var a=ne().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ffe(n.shape,r,i,o):new cfe(n.shape,r,i,o);return this.compileAndRun(a,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,i){var o=new lfe(n,r,i);return this.compileAndRun(o,[n])},e.prototype.resizeNearestNeighbor=function(n,r,i,o){var a=new dfe(n.shape,r,i,o);return this.compileAndRun(a,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){var o=new hfe(n,r,i);return this.compileAndRun(o,[n])},e.prototype.multinomial=function(n,r,i,o){var a=r?n:Ga(n),s=a.shape[0],u=a.shape[1],l=new nfe(s,u,i),c=l.getCustomSetupFunc(o);return this.compileAndRun(l,[a],"int32",c)},e.prototype.oneHot=function(n,r,i,o){var a=new rfe(n.size,r,i,o);return this.compileAndRun(a,[n])},e.prototype.diag=function(n){var r=new Sce(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,i,o,a){return By("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),xT(n.dataSync(),r.dataSync(),i,o,a)},e.prototype.cropAndResize=function(n,r,i,o,a,s){var u=new yce(n.shape,r.shape,o,a,s);return this.compileAndRun(u,[n,r,i],"float32")},e.prototype.depthToSpace=function(n,r,i){V(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=n.shape[0],a=i==="NHWC"?n.shape[1]:n.shape[2],s=i==="NHWC"?n.shape[2]:n.shape[3],u=i==="NHWC"?n.shape[3]:n.shape[1],l=a*r,c=s*r,f=u/(r*r),h=new _ce(i==="NHWC"?[o,l,c,f]:[o,f,l,c],r,i);return this.compileAndRun(h,[n])},e.prototype.split=function(n,r,i){return tW(n,r,i)},e.prototype.scatterND=function(n,r,i){var o=qy(0,n,i),a=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,f=[c/u,u],h=n.reshape([s,a]),d=r.reshape([s,u]);if(c===0)return TE(Xn([]),i);var p=pe(0),m=new OD(s,a,h.rank,d.rank,l,f);return this.compileAndRun(m,[d,h,p]).reshape(i)},e.prototype.sparseToDense=function(n,r,i,o){var a=qy(0,n,i),s=a.sliceRank,u=a.numUpdates,l=a.strides,c=a.outputSize,f=new OD(u,s,n.rank,r.rank,l,[c,1]);return this.compileAndRun(f,[r,n,o]).reshape(i)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var i=this.texData.get(n.dataId),o=new TD(Pce,n.shape,r),a=new TD(Oce,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],u=this.compileAndRun(o,s),l=this.compileAndRun(a,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},e.prototype.gatherND=function(n,r){var i=r.shape,o=i[i.length-1],a=HV(n,r),s=a[0],u=a[1],l=a[2],c=a[3],f=r.reshape([u,o]),h=n.reshape([n.size/l,l]),d=new Rce(o,c,[u,l]);return this.compileAndRun(d,[h,f]).reshape(s)},e.prototype.fill=function(n,r,i){if((i=i||$m(r))==="string"){var o=$y(i,Ae(n));return o.fill(r),G.makeTensor(o,n,i,this)}var a=new kce(n,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],i,s)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,i){return ZV(n,r,i)},e.prototype.makeTensorInfo=function(n,r){var i=this.write(null,n,r);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var i=this.makeTensorInfo(n,r).dataId;return G.makeTensorFromDataId(i,n,r,this)},e.prototype.unpackTensor=function(n){var r=new $fe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new ife(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var i=[Ly(n.shape)].concat(Fy(n.shape)),o={dtype:n.dtype,shape:i,dataId:n.dataId},a=[Ly(r)].concat(Fy(r)),s=new ufe(a,i),u=this.runWebGLProgram(s,[o],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,i=this.texData.get(n),o=i.isPacked,a=i.shape,s=i.dtype,u=I1(a);return r=o?new xce(u):new wce(u),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,i,o,a){var s=this;a===void 0&&(a=!1);var u=this.makeTensorInfo(n.outputShape,i),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===Np.DENSE){var c=Wd(n.outputShape);l.texShape=c.map(function(b){return 2*b})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),Ae(u.shape)===0)return l.values=Ip(u.dtype,0),u;var f=[],h=r.map(function(b){if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var _=s.texData.get(b.dataId);if(_.texture==null){if(!n.packedInputs&&Ae(b.shape)<=ne().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:_.values};n.packedInputs&&(_.isPacked=!0,_.shape=b.shape)}else if(!!_.isPacked!=!!n.packedInputs)b=_.isPacked?s.unpackTensor(b):s.packTensor(b),f.push(b),_=s.texData.get(b.dataId);else if(_.isPacked&&!Kv(_.shape,b.shape)){var x=b,S=b.shape;b.shape=_.shape,b=s.packedReshape(b,S),f.push(b),_=s.texData.get(b.dataId),x.shape=S}return s.uploadToGPU(b.dataId),{shape:b.shape,texData:_,isUniform:!1}});this.uploadToGPU(u.dataId);var d,p={shape:u.shape,texData:l,isUniform:!1},m=function(b,_,x){var S="";_.concat(x).forEach(function(A){var T=A.texData!=null&&A.texData.slice!=null&&A.texData.slice.flatOffset>0,P=A.isUniform?"uniform":A.texData.texShape;S+=A.shape+"_"+P+"_"+T});var E=b.userCode,C=b.constructor.name;return C+="_"+S+"_"+E}(n,h,p),v=this.getAndSaveBinary(m,function(){return function(b,_,x,S){var E=_.userCode,C=x.map(function(M,F){var H={logicalShape:M.shape,texShape:M.isUniform?null:M.texData.texShape,isUniform:M.isUniform,isPacked:!M.isUniform&&M.texData.isPacked,flatOffset:null};return M.texData!=null&&M.texData.slice!=null&&M.texData.slice.flatOffset>0&&(H.flatOffset=M.texData.slice.flatOffset),{name:_.variableNames[F],shapeInfo:H}}),A=C.map(function(M){return M.shapeInfo}),T={logicalShape:S.shape,texShape:S.texData.texShape,isUniform:!1,isPacked:S.texData.isPacked,flatOffset:null},P=Kle(C,T,E,_.packedInputs),k=b.createProgram(P),I=null,$=b.getUniformLocation(k,"NAN",!1);ne().getNumber("WEBGL_VERSION")===1&&(I=b.getUniformLocation(k,"INFINITY",!1));for(var B={},z=0;z<_.variableNames.length;z++){var U=_.variableNames[z];B[U]=b.getUniformLocation(k,U,!1),B["offset"+U]=b.getUniformLocation(k,"offset"+U,!1)}return{program:_,source:P,webGLProgram:k,uniformLocations:B,inShapeInfos:A,outShapeInfo:T,infLoc:I,nanLoc:$}}(s.gpgpu,n,h,p)}),g=this.activeTimers!=null;if(g&&(d=this.startTimer()),function(b,_,x,S,E){PD(_.inShapeInfos,x),PD([_.outShapeInfo],[S]);var C=S.texData.texture,A=S.texData.texShape;S.texData.isPacked?b.setOutputPackedMatrixTexture(C,A[0],A[1]):b.setOutputMatrixTexture(C,A[0],A[1]),b.setProgram(_.webGLProgram),ne().getNumber("WEBGL_VERSION")===1&&_.infLoc!==null&&b.gl.uniform1f(_.infLoc,1/0),_.nanLoc!==null&&b.gl.uniform1f(_.nanLoc,NaN),x.forEach(function(T,P){var k=_.program.variableNames[P],I=_.uniformLocations[k],$=_.uniformLocations["offset"+k];if(I!=null)if(T.isUniform)if(Ae(T.shape)<2)b.gl.uniform1f(I,T.uniformValues[0]);else{var B=T.uniformValues;B instanceof Float32Array||(B=new Float32Array(B)),b.gl.uniform1fv(I,B)}else T.texData.slice!=null&&$!=null&&b.gl.uniform1i($,T.texData.slice.flatOffset),b.setInputMatrixTexture(T.texData.texture,I,P)}),E!=null&&E(b,_.webGLProgram),b.executeProgram()}(this.gpgpu,v,h,p,o),f.forEach(function(b){return s.disposeData(b.dataId)}),g&&(d=this.endTimer(d),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(d)})),!ne().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var y=this.unpackTensor(u);return this.disposeData(u.dataId),y}return u},e.prototype.compileAndRun=function(n,r,i,o,a){a===void 0&&(a=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(n,r,i,o,a);return G.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(ne().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ge(function(){if(!ne().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ne().getBool("DEBUG");ne().set("DEBUG",!1);var i=n.abs(pe(1e-8)).dataSync()[0];if(ne().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,i=this.texData.get(n),o=i.shape,a=i.dtype,s=i.values,u=i.texture,l=i.usage,c=i.isPacked;if(u==null){var f,h=this.activeTimers!=null;h&&(f=jo());var d=i.texShape;if(d==null&&(d=zue(o,c),i.texShape=d),s!=null){var p=I1(o),m=void 0,v=d[1],g=d[0],y=s instanceof Uint8Array;c?(v=(r=Lm(d[0],d[1]))[0],g=r[1],m=new Tce(p,[g,v],y)):m=new Ace(p,[g,v],y);var b=this.makeTensorInfo([g,v],a);this.texData.get(b.dataId).usage=y?si.PIXELS:si.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),v,g,s);var _=this.runWebGLProgram(m,[b],a,null,!0),x=this.texData.get(_.dataId);i.texture=x.texture,i.texShape=x.texShape,i.isPacked=x.isPacked,i.usage=x.usage,this.disposeData(b.dataId),this.texData.delete(_.dataId),i.values=null,h&&(this.uploadWaitMs+=jo()-f)}else{var S=this.acquireTexture(d,l,a,c);i.texture=S}}},e.prototype.convertAndCacheOnCPU=function(n,r){var i=this.texData.get(n),o=i.dtype;return this.releaseGPUData(n),r!=null&&(i.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<u.length;++l)u[l]=Math.round(a[l]);return u}throw new Error("Unknown dtype "+s)}(r,o)),i.values},e.prototype.acquireTexture=function(n,r,i,o){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,o)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*TV(r)},e}(YV);DV()&&G.registerBackend("webgl",function(){return new Lfe},2);var Ffe=q({square_:function(t){var e=j(t,"x","square"),n=[e];return G.runKernelFunc(function(r,i){return i([e]),r.square(e)},{x:e},null,"Square",{},n,[])}}),Mp="SquaredDifference",mW=q({squaredDifference_:function(t,e){var n,r=j(t,"a","squaredDifference"),i=j(e,"b","squaredDifference");n=Kt(r,i),r=n[0],i=n[1],Ye(r.shape,i.shape);var o={a:r,b:i},a=[r,i];return G.runKernelFunc(function(s,u){var l=s.squaredDifference(r,i);return u([r,i]),l},o,function(s,u){var l=u[0],c=u[1],f=pe(2);return{a:function(){return s.mul(l.sub(c).mul(f))},b:function(){return s.mul(c.sub(l).mul(f))}}},Mp,{},a,[])}}),Bfe=q({abs_:function(t){var e=j(t,"x","abs");return e.dtype==="complex64"?G.runKernelFunc(function(n){return n.complexAbs(e)},{$x:e}):G.runKernelFunc(function(n,r){var i=n.abs(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.toFloat().step(-1))}}},"Abs")}}),Ufe=q({acos_:function(t){var e=j(t,"x","acos");return G.runKernelFunc(function(n,r){var i=n.acos(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(pe(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),Vfe=q({acosh_:function(t){var e=j(t,"x","acosh");return G.runKernelFunc(function(n,r){var i=n.acosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),Wfe=q({asin_:function(t){var e=j(t,"x","asin");return G.runKernelFunc(function(n,r){var i=n.asin(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(pe(1).sub(i.toFloat().square()).sqrt())}}})}}),zfe=q({asinh_:function(t){var e=j(t,"x","asinh");return G.runKernelFunc(function(n,r){var i=n.asinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(pe(1).add(i.toFloat().square()).sqrt())}}})}}),Hfe=q({atan_:function(t){var e=j(t,"x","atan");return G.runKernelFunc(function(n,r){var i=n.atan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().square().add(1))}}})}}),qfe=q({atanh_:function(t){var e=j(t,"x","atanh");return G.runKernelFunc(function(n,r){var i=n.atanh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(pe(1).sub(i.toFloat().square()))}}})}}),Gfe=q({ceil_:function(t){var e=j(t,"x","ceil");return G.runKernelFunc(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return Ze(n)}}})}}),TT=q({clipByValue_:function(t,e,n){var r=j(t,"x","clipByValue");V(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var i=[r],o={min:e,max:n};return G.runKernelFunc(function(a,s){var u=a.clip(r,e,n);return s([r]),u},{x:r},function(a,s){var u=s[0];return{x:function(){return a.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),Ze(a))}}},"ClipByValue",o,i)}}),Kfe=q({cos_:function(t){var e=j(t,"x","cos"),n=[e];return G.runKernelFunc(function(r,i){var o=r.cos(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),Xfe=q({cosh_:function(t){var e=j(t,"x","cosh");return G.runKernelFunc(function(n,r){var i=n.cosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(n)}}})}}),Yfe=q({erf_:function(t){var e=j(t,"x","erf");return V(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),G.runKernelFunc(function(n,r){var i=n.erf(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),OE=q({exp_:function(t){var e=j(t,"x","exp");return G.runKernelFunc(function(n,r){var i=n.exp(e);return r([i]),i},{x:e},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),Jfe=q({expm1_:function(t){var e=j(t,"x","expm1");return G.runKernelFunc(function(n,r){var i=n.expm1(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.exp())}}})}}),Qfe=q({floor_:function(t){var e=j(t,"x","floor");return G.runKernelFunc(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return Ze(n)}}})}}),Zfe=q({log_:function(t){var e=j(t,"x","log"),n=[e];return G.runKernelFunc(function(r,i){var o=r.log(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},n)}}),ehe=q({log1p_:function(t){var e=j(t,"x","log1p");return G.runKernelFunc(function(n,r){var i=n.log1p(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.add(1))}}})}}),the=q({logSigmoid_:function(t){var e=j(t,"x","logSigmoid");return G.runKernelFunc(function(n,r){var i=n.softplus(e.neg()).neg();return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.neg().sigmoid())}}})}}),Yy=q({neg_:function(t){var e=j(t,"x","neg"),n=[e];return G.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),nhe=q({reciprocal_:function(t){var e=j(t,"x","reciprocal");return G.runKernelFunc(function(n,r){var i=n.reciprocal(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.square().neg())}}})}}),rhe=q({round_:function(t){var e=j(t,"x","round");return G.runKernelFunc(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return Ze(n)}}})}}),vW=q({rsqrt_:function(t){var e=j(t,"x","rsqrt"),n=[e];return G.runKernelFunc(function(r,i){var o=r.rsqrt(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),gW=q({sigmoid_:function(t){var e=j(t,"x","sigmoid");return G.runKernelFunc(function(n,r){var i=n.sigmoid(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.mul(pe(1).sub(i)))}}},"Sigmoid")}}),ihe=q({sign_:function(t){var e=j(t,"x","sign");return G.runKernelFunc(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return Ze(n)}}})}}),ohe=q({isNaN_:function(t){var e=j(t,"x","isNaN");return G.runKernelFunc(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return Ze(n)}}})}}),ahe=q({isInf_:function(t){var e=j(t,"x","isInf");return G.runKernelFunc(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return Ze(n)}}})}}),she=q({isFinite_:function(t){var e=j(t,"x","isFinite");return G.runKernelFunc(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return Ze(n)}}})}}),uhe=q({sin_:function(t){var e=j(t,"x","sin"),n=[e];return G.runKernelFunc(function(r,i){var o=r.sin(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},n)}}),lhe=q({sinh_:function(t){var e=j(t,"x","sinh");return G.runKernelFunc(function(n,r){var i=n.sinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(n)}}})}}),che=q({softplus_:function(t){var e=j(t,"x","softplus");return G.runKernelFunc(function(n,r){var i=n.softplus(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.sigmoid())}}})}}),fhe=q({sqrt_:function(t){var e=j(t,"x","sqrt");return G.runKernelFunc(function(n,r){var i=n.sqrt(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().sqrt().mul(2))}}})}}),hhe=q({step_:function(t,e){e===void 0&&(e=0);var n=j(t,"x","step");return G.runKernelFunc(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return Ze(r)}}})}}),dhe=q({tan_:function(t){var e=j(t,"x","tan");return G.runKernelFunc(function(n,r){var i=n.tan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.cos().square())}}})}}),phe=q({tanh_:function(t){var e=j(t,"x","tanh");return G.runKernelFunc(function(n,r){var i=n.tanh(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return pe(1).sub(i.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function yW(t,e,n,r,i,o){var a,s,u=j(t,"x","batchNorm"),l=j(e,"mean","batchNorm"),c=j(n,"variance","batchNorm");return i!=null&&(a=j(i,"scale","batchNorm")),r!=null&&(s=j(r,"offset","batchNorm")),V(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),V(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),V(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&V(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&V(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),Bm(u,l,c,s,a,o)}function bW(t,e,n,r,i,o){var a,s,u=j(t,"x","batchNorm"),l=j(e,"mean","batchNorm"),c=j(n,"variance","batchNorm");return i!=null&&(a=j(i,"scale","batchNorm")),r!=null&&(s=j(r,"offset","batchNorm")),V(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),V(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),V(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&V(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&V(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),Bm(u,l,c,s,a,o)}function wW(t,e,n,r,i,o){var a,s,u=j(t,"x","batchNorm"),l=j(e,"mean","batchNorm"),c=j(n,"variance","batchNorm");return i!=null&&(a=j(i,"scale","batchNorm")),r!=null&&(s=j(r,"offset","batchNorm")),V(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),V(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),V(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&V(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&V(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),Bm(u,l,c,s,a,o)}function Bm(t,e,n,r,i,o){o==null&&(o=.001);var a,s,u,l=j(t,"x","batchNorm"),c=j(e,"mean","batchNorm"),f=j(n,"variance","batchNorm");i!=null&&(a=j(i,"scale","batchNorm")),r!=null&&(s=j(r,"offset","batchNorm")),V(c.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),V(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),V(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,c,f,a];return G.runKernelFunc(function(d,p){var m=d.batchNormalization(u,Zv(c),Zv(f),o,Zv(a),Zv(s));return p([l,c,f,a]),m},{x:l,mean:c,variance:f,scale:a,offset:s},function(d,p){var m=p,v=m[0],g=m[1],y=m[2],b=m[3],_=b??pe(1),x=Tn(g.shape,u.shape),S=[];if(g.rank===1){for(var E=0;E<u.shape.length-1;++E)S.push(u.shape[E]);S.push(1)}var C=v.sub(g),A=d.mul(_),T=vW(y.add(pe(o))),P=T.mul(T).mul(T).mul(pe(-.5));return{x:function(){return g.rank===1?d.mul(tf(T.as4D(1,1,1,g.shape[0]),S)).mul(_).reshape(v.shape):d.mul(T).mul(_).reshape(v.shape)},mean:function(){var k=T.mul(pe(-1)).mul(A);return g.rank===1&&(k=k.sum(x)),k.reshape(g.shape)},variance:function(){var k=P.mul(C).mul(A);return g.rank===1&&(k=k.sum(x)),k.reshape(g.shape)},scale:function(){var k=C.mul(T),I=d.mul(k);return g.rank===1&&(I=I.sum(x)),I.reshape(g.shape)},offset:function(){var k=d;return g.rank===1&&(k=k.sum(x)),k.reshape(g.shape)}}},"BatchNormalization",{varianceEpsilon:o},h).reshape(l.shape)}function Zv(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function zb(){MV("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var mhe=q({batchNormalization2d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),zb(),yW(t,e,n,o,i,r)}}),vhe=q({batchNormalization3d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),zb(),bW(t,e,n,o,i,r)}}),ghe=q({batchNormalization4d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),zb(),wW(t,e,n,o,i,r)}}),yhe=q({batchNormalization_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),zb(),Bm(t,e,n,o,i,r)}}),xW=q({batchNorm_:Bm}),bhe=q({batchNorm2d_:yW}),whe=q({batchNorm3d_:bW}),xhe=q({batchNorm4d_:wW}),Hb=q({logicalAnd_:function(t,e){var n=j(t,"a","logicalAnd","bool"),r=j(e,"b","logicalAnd","bool");return Ye(n.shape,r.shape),G.runKernelFunc(function(i){return i.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),_he=q({logicalNot_:function(t){var e=j(t,"x","logicalNot","bool");return G.runKernelFunc(function(n){return n.logicalNot(e)},{$x:e})}}),_W=q({logicalOr_:function(t,e){var n=j(t,"a","logicalOr","bool"),r=j(e,"b","logicalOr","bool");return Ye(n.shape,r.shape),G.runKernelFunc(function(i){return i.logicalOr(n,r)},{$a:n,$b:r})}}),She=q({logicalXor_:function(t,e){var n=j(t,"a","logicalXor","bool"),r=j(e,"b","logicalXor","bool");return Ye(n.shape,r.shape),_W(t,e).logicalAnd(Hb(t,e).logicalNot())}}),Pl=q({where_:function(t,e,n){var r=j(e,"a","where"),i=j(n,"b","where"),o=j(t,"condition","where","bool");return ft(r.shape,i.shape,"Error in where: "),o.rank===1?V(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ft(o.shape,i.shape,"Error in where: "),G.runKernelFunc(function(a,s){var u=a.select(o,r,i);return s([o]),u},{$condition:o,$a:r,$b:i},function(a,s){var u=s[0];return{$condition:function(){return Ze(u).toFloat()},$a:function(){return a.mul(u.cast(a.dtype))},$b:function(){return a.mul(u.logicalNot().cast(a.dtype))}}})}}),SW=function(t){return Se(this,void 0,void 0,function(){var e,n,r;return Ee(this,function(i){switch(i.label){case 0:return[4,(e=j(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=ST(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},Ke=q({add_:function(t,e){var n,r=j(t,"a","add"),i=j(e,"b","add");n=Kt(r,i),r=n[0],i=n[1];var o=Ye(r.shape,i.shape);return G.runKernelFunc(function(a){return a.add(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,u=Tn(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Tn(i.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(i.shape)}}},"Add")}}),Ehe=q({addN_:function(t){V(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),V(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(i,o){return j(i,"tensors"+o,"addN")}),n=e[0];e.forEach(function(i){if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(i){if(!Fn(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return G.runKernelFunc(function(i){return i.addN(e)},r,function(i){var o={};return e.forEach(function(a,s){o[s]=function(){return i.clone()}}),o},"AddN")}}),Che=q({addStrict_:function(t,e){var n=j(t,"a","addStrict"),r=j(e,"b","addStrict");return ft(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Ahe=q({atan2_:function(t,e){var n,r=j(t,"a","atan2"),i=j(e,"b","atan2");n=Kt(r,i),r=n[0],i=n[1];var o=Ye(r.shape,i.shape);return G.runKernelFunc(function(a,s){var u=a.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Ke(u.square(),l.square()),f=a.mul(l.div(c)),h=Tn(u.shape,o);return h.length>0&&(f=f.sum(h)),f.reshape(u.shape)},$b:function(){var c=Ke(u.square(),l.square()),f=Yy(a.mul(u.div(c))),h=Tn(l.shape,o);return h.length>0&&(f=f.sum(h)),f.reshape(l.shape)}}})}}),so=q({div_:function(t,e){var n,r=j(t,"a","div"),i=j(e,"b","div");if(n=Kt(r,i),r=n[0],i=n[1],r.dtype==="int32"&&i.dtype==="int32")return EW(r,i);var o=Ye(r.shape,i.shape);return G.runKernelFunc(function(a,s){var u=a.realDivide(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),f=Tn(u.shape,o);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Tn(l.shape,o);f.length>0&&(c=c.sum(f).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"Div")}}),The=q({divNoNan_:function(t,e){var n,r=j(t,"a","div"),i=j(e,"b","div");r=(n=Kt(r,i))[0],i=n[1];var o=so(r,i),a=Ze(o),s=i.equal(a);return Pl(s,a,o)}}),Phe=q({divStrict_:function(t,e){var n=j(t,"a","div"),r=j(e,"b","div");return ft(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),EW=q({floorDiv_:function(t,e){var n,r=j(t,"a","floorDiv"),i=j(e,"b","floorDiv");n=Kt(r,i),r=n[0],i=n[1];var o=Ye(r.shape,i.shape);return G.runKernelFunc(function(a,s){var u=a.floorDiv(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),f=Tn(u.shape,o);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Tn(l.shape,o);f.length>0&&(c=c.sum(f).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"FloorDiv")}}),PT=q({maximum_:function(t,e){var n,r=j(t,"a","maximum"),i=j(e,"b","maximum");return n=Kt(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Ye(r.shape,i.shape),G.runKernelFunc(function(o,a){var s=o.maximum(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],u=a[1];return{a:function(){return o.mul(s.greaterEqual(u).toFloat())},b:function(){return o.mul(s.less(u).toFloat())}}},"Maximum")}}),Ohe=q({maximumStrict_:function(t,e){var n=j(t,"a","maximumStrict"),r=j(e,"b","maximumStrict");return ft(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),CW=q({minimum_:function(t,e){var n,r=j(t,"a","minimum"),i=j(e,"b","minimum");return n=Kt(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Ye(r.shape,i.shape),G.runKernelFunc(function(o,a){var s=o.minimum(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],u=a[1];return{a:function(){return o.mul(s.lessEqual(u).toFloat())},b:function(){return o.mul(s.greater(u).toFloat())}}},"Minimum")}}),khe=q({minimumStrict_:function(t,e){var n=j(t,"a","minimumStrict"),r=j(e,"b","minimumStrict");return ft(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Ihe=q({mod_:function(t,e){var n,r=j(t,"a","mod"),i=j(e,"b","mod");n=Kt(r,i),r=n[0],i=n[1];var o=Ye(r.shape,i.shape);return G.runKernelFunc(function(a,s){var u=a.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Tn(u.shape,o);return c.length>0?a.sum(c).reshape(u.shape):a},$b:function(){var c=a.mul(u.div(l).floor().neg()),f=Tn(l.shape,o);return f.length>0?c.sum(f).reshape(l.shape):c}}})}}),Rhe=q({modStrict_:function(t,e){var n=j(t,"a","modStrict"),r=j(e,"b","modStrict");return ft(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),dr=q({mul_:function(t,e){var n,r=j(t,"a","mul"),i=j(e,"b","mul");n=Kt(r,i),r=n[0],i=n[1];var o=Ye(r.shape,i.shape);return G.runKernelFunc(function(a,s){var u=a.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.mul(l.toFloat()),f=Tn(u.shape,o);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Tn(l.shape,o);return f.length>0?c.sum(f).reshape(l.shape):c}}},"Mul")}}),Nhe=q({mulStrict_:function(t,e){var n=j(t,"a","mul"),r=j(e,"b","mul");return ft(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Jy=q({pow_:function(t,e){var n,r=j(t,"base","pow"),i=j(e,"exp","pow");n=Kt(r,i),r=n[0],i=n[1];var o=Ye(r.shape,i.shape),a=[r,i];return G.runKernelFunc(function(s,u){var l=s.pow(r,i);return u([r,i,l]),l},{a:r,b:i},function(s,u){var l=u[0],c=u[1],f=u[2];return{a:function(){var h=c.toFloat(),d=s.mul(h.mul(l.pow(h.sub(pe(1))))),p=Tn(l.shape,o);return p.length>0&&(d=d.sum(p)),d.reshape(l.shape)},b:function(){var h=l.greater(0),d=l.log().where(h,Ze(l)),p=s.mul(f.mul(d)),m=Tn(c.shape,o);return m.length>0&&(p=p.sum(m)),p.reshape(c.shape)}}},"Pow",{},a,[!0])}}),Dhe=q({powStrict_:function(t,e){return ft(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Mhe=q({squaredDifferenceStrict_:function(t,e){var n=j(t,"a","squaredDifferenceStrict"),r=j(e,"b","squaredDifferenceStrict");return ft(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Pn=q({sub_:function(t,e){var n,r=j(t,"a","sub"),i=j(e,"b","sub");n=Kt(r,i),r=n[0],i=n[1];var o=Ye(r.shape,i.shape);return G.runKernelFunc(function(a){return a.subtract(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,u=Tn(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Tn(i.shape,o);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),$he=q({subStrict_:function(t,e){var n=j(t,"a","subStrict"),r=j(e,"b","subStrict");return ft(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),AW=q({equal_:function(t,e){var n,r=j(t,"a","equal"),i=j(e,"b","equal");return n=Kt(r,i),r=n[0],i=n[1],Ye(r.shape,i.shape),G.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),jhe=q({equalStrict_:function(t,e){var n=j(t,"a","equalStrict"),r=j(e,"b","equalStrict");return ft(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Lhe=q({greater_:function(t,e){var n,r=j(t,"a","greater"),i=j(e,"b","greater");return n=Kt(r,i),r=n[0],i=n[1],Ye(r.shape,i.shape),G.runKernelFunc(function(o){return o.greater(r,i)},{a:r,b:i},null,"Greater")}}),TW=q({greaterEqual_:function(t,e){var n,r=j(t,"a","greaterEqual"),i=j(e,"b","greaterEqual");return n=Kt(r,i),r=n[0],i=n[1],Ye(r.shape,i.shape),G.runKernelFunc(function(o,a){var s=o.greaterEqual(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],u=a[1];return{a:function(){return Ze(s)},b:function(){return Ze(u)}}},"GreaterEqual")}}),Fhe=q({greaterEqualStrict_:function(t,e){var n=j(t,"a","greaterEqualStrict"),r=j(e,"b","greaterEqualStrict");return ft(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Bhe=q({greaterStrict_:function(t,e){var n=j(t,"a","greaterStrict"),r=j(e,"b","greaterStrict");return ft(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Uhe=q({less_:function(t,e){var n,r=j(t,"a","less"),i=j(e,"b","less");return n=Kt(r,i),r=n[0],i=n[1],Ye(r.shape,i.shape),G.runKernelFunc(function(o){return o.less(r,i)},{a:r,b:i},null,"Less")}}),Vhe=q({lessEqual_:function(t,e){var n,r=j(t,"a","lessEqual"),i=j(e,"b","lessEqual");return n=Kt(r,i),r=n[0],i=n[1],Ye(r.shape,i.shape),G.runKernelFunc(function(o,a){var s=o.lessEqual(r,i);return a([r,i]),s},{a:r,b:i},null,"LessEqual")}}),Whe=q({lessEqualStrict_:function(t,e){var n=j(t,"a","lessEqualStrict"),r=j(e,"b","lessEqualStrict");return ft(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),zhe=q({lessStrict_:function(t,e){var n=j(t,"a","lessStrict"),r=j(e,"b","lessStrict");return ft(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Hhe=q({notEqual_:function(t,e){var n,r=j(t,"a","notEqual"),i=j(e,"b","notEqual");return n=Kt(r,i),r=n[0],i=n[1],Ye(r.shape,i.shape),G.runKernelFunc(function(o){return o.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),qhe=q({notEqualStrict_:function(t,e){var n=j(t,"a","notEqualStrict"),r=j(e,"b","notEqualStrict");return ft(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function LD(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function FD(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var OT=q({gather_:function(t,e,n){n===void 0&&(n=0);var r=j(t,"x","gather"),i=j(e,"indices","gather","int32");n=On(n,r.shape)[0];var o=function(a,s,u){for(var l=a.shape[u],c=[],f=1,h=1,d=0;d<u;d++)c.push(a.shape[d]),f*=a.shape[d];for(d=0;d<s.rank;d++)c.push(s.shape[d]);for(d=u+1;d<a.rank;d++)c.push(a.shape[d]),h*=a.shape[d];return{batchSize:f,sliceSize:h,dimSize:l,outputShape:c}}(r,i,n);return G.runKernelFunc(function(a,s){var u=a.gather(r,i.flatten(),n);return s([i]),u},{x:r,indices:i},function(a,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,f=l.slice(0,n),h=f.length,d=l.slice(n,l.length).slice(1),p=d.length,m=LD(0,h),v=LD(h+1,h+1+p),g=FD([f,[c],d]),y=a.reshape(g),b=u.reshape([c]),_=FD([[h],m,v]),x=y.transpose(_),S=PW(x,b,r.shape[n]),E=mT(_);return S=S.transpose(E)},indices:function(){return u}}},"Gather",{axis:n}).reshape(o.outputShape)}}),PW=q({unsortedSegmentSum_:function(t,e,n){var r=j(t,"x","unsortedSegmentSum"),i=j(e,"segmentIds","unsortedSegmentSum","int32");return V(rn(n),function(){return"numSegments must be of dtype int"}),G.runKernelFunc(function(o,a){var s=o.unsortedSegmentSum(r,i,n);return a([i]),s},{$x:r},function(o,a){var s=a[0];return{$x:function(){return function(u,l){for(var c=PT(l,Ze(l)),f=OT(u,c),h=TW(l,pe(0,"int32")),d=f.rank-h.rank,p=0;p<d;++p)h=Ai(h,p+1);h=Hb(h,bh(f.shape,"bool"));var m=Ze(f);return Pl(h,f,m)}(o,s)}}})}}),Ghe=function(t,e,n){return Se(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,f,h,d,p,m;return Ee(this,function(v){switch(v.label){case 0:for(r=j(t,"tensor","boolMask"),i=j(e,"mask","boolMask","bool"),o=n??0,a=i.rank,s=r.shape,V(a>0,function(){return"mask cannot be scalar"}),ft(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+a;l++)u*=s[l];return c=s.slice(0,o).concat([u],s.slice(o+a)),f=r.reshape(c),h=i.reshape([-1]),[4,SW(h)];case 1:return d=v.sent(),p=d.squeeze([1]),m=OT(f,p,o),t!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),f.dispose(),h.dispose(),d.dispose(),[2,m]}})})};function OW(t,e,n,r,i,o,a){o===void 0&&(o="NHWC"),V(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),V(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),V(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),V(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=o==="NHWC"?s[3]:s[1],f=o==="NHWC"?u.shape[3]:u.shape[1];V(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),V(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),a!=null&&V(rn(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var h=wT(o),d=Fl(s,n.shape,r,1,i,a,!1,h),p=G.runKernelFunc(function(m,v){var g=m.conv2dDerInput(u,n,d);return v([n,u]),g},{dy4D:u,filter:n},function(m,v){var g=v[0],y=v[1];return{dy4D:function(){return Fi(m,g,r,i,o,1,a)},filter:function(){return kT(m,y,g.shape,r,i,o,a)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function F1(t){var e=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function kW(t,e,n,r,i){V(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var o=t,a=e,s=!1;e.rank===4&&(s=!0,a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var u=o[4],l=a.shape[4];V(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),V(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),V(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),V(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),V(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=Ky(o,n.shape,r,1,i),f=G.runKernelFunc(function(h){return h.conv3dDerInput(a,n,c)},{dy5D:a});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var Khe=q({conv1d_:function(t,e,n,r,i,o,a){i===void 0&&(i="NWC"),o===void 0&&(o=1);var s=j(t,"x","conv1d"),u=j(e,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),V(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),V(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),a!=null&&V(rn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),V(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),V(Vr(n,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"}),V(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),d=Fi(h,f,[1,n],r,"NHWC",[1,o],a);return c?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Fi=q({conv2d_:function(t,e,n,r,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=j(t,"x","conv2d"),u=j(e,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),V(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),V(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),a!=null&&V(rn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var f=i==="NHWC"?l.shape[3]:l.shape[1];V(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),V(Vr(n,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"});var h=wT(i),d=Fl(l.shape,u.shape,n,o,r,a,!1,h),p=[u,l],m=G.runKernelFunc(function(v,g){var y=v.conv2d(l,u,d);return g([u,l]),y},{x:l,filter:u},function(v,g){var y=g,b=y[0],_=y[1];return V(Mf(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return IW(_.shape,v,b,n,r,i)},filter:function(){return kT(_,v,b.shape,n,r,i)}}},"Conv2D",d,p);return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Xhe=q({conv3d_:function(t,e,n,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var a=j(t,"x","conv3d"),s=j(e,"filter","conv3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),V(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),V(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),V(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),V(function(h,d){return F1(h)||F1(d)}(n,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),V(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=Ky(u.shape,s.shape,n,o,r),f=G.runKernelFunc(function(h,d){var p=h.conv3d(u,s,c);return d([u,s]),p},{x:u,$filter:s},function(h,d){V(F1(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var p=d[0],m=d[1];return{x:function(){return kW(p.shape,h,m,n,r)},$filter:function(){return function(v,g,y,b,_){var x=v;v.rank===4&&(x=v.as5D(1,v.shape[0],v.shape[1],v.shape[2],v.shape[3]));var S=g;S.rank===4&&(S=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),V(x.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+x.shape+"."}),V(S.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+S.shape+"."}),V(y.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+y+"."}),V(x.shape[4]===y[3],function(){return"Error in conv3dDerFilter: depth of input "+x.shape[4]+") must match input depth in filter ("+y[3]+"."}),V(S.shape[4]===y[4],function(){return"Error in conv3dDerFilter: depth of dy ("+S.shape[4]+") must match output depth for filter ("+y[4]+")."});var E=Ky(x.shape,y,b,1,_);return G.runKernelFunc(function(C){return C.conv3dDerFilter(x,S,E)},{x5D:x,dy5D:S})}(p,h,m.shape,n,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),kT=q({conv2dDerFilter_:function(t,e,n,r,i,o,a){o===void 0&&(o="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),V(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),V(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),V(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=o==="NHWC"?s.shape[3]:s.shape[1],c=o==="NHWC"?u.shape[3]:u.shape[1];V(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),V(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),a!=null&&V(rn(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var f=wT(o),h=Fl(s.shape,n,r,1,i,a,!1,f);return G.runKernelFunc(function(d){return d.conv2dDerFilter(s,u,h)},{x4D:s,dy4D:u})}}),IW=q({conv2dDerInput_:OW}),qb=q({depthwiseConv2d_:function(t,e,n,r,i,o,a){o===void 0&&(o=[1,1]);var s=j(t,"x","depthwiseConv2d"),u=j(e,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),V(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),V(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),V(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),o==null&&(o=[1,1]),V(Vr(n,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),a!=null&&V(rn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var f=Fl(l.shape,u.shape,n,o,r,a,!0),h=[l,u],d=G.runKernelFunc(function(p,m){var v=p.depthwiseConv2D(l,u,f);return m([l,u]),v},{x:l,filter:u},function(p,m){V(Mf(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var v=m[0],g=m[1];return{x:function(){return RW(v.shape,p,g,f)},filter:function(){return NW(v,p,g.shape,f)}}},"DepthwiseConv2dNative",f,h);return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),RW=q({depthwiseConv2dDerInput_:function(t,e,n,r){var i=e,o=!1;e.rank===3&&(o=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=G.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),NW=q({depthwiseConv2dDerFilter_:function(t,e,n,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=e;return o.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),G.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),IT=q({separableConv2d_:function(t,e,n,r,i,o,a){o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC");var s=j(t,"x","separableConv2d"),u=j(e,"depthwiseFilter","separableConv2d"),l=j(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(s.rank===3&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),V(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),V(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),V(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),V(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var h=u.shape[2],d=u.shape[3];V(l.shape[2]===h*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*d+", but got "+l.shape[2]+"."});var p=qb(c,u,r,i,a,o),m=Fi(p,l,1,"valid",a);return f?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),Yhe=q({conv2dTranspose_:function(t,e,n,r,i,o){return OW(n,j(t,"x","conv2dTranspose"),j(e,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),Jhe=q({conv3dTranspose_:function(t,e,n,r,i){return kW(n,j(t,"x","conv3dTranspose"),j(e,"filter","conv3dTranspose"),r,i)}}),Gb=q({matMul_:function(t,e,n,r){var i;n===void 0&&(n=!1),r===void 0&&(r=!1);var o=j(t,"a","matMul"),a=j(e,"b","matMul");i=Kt(o,a),o=i[0],a=i[1];var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],l=n?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],f=o.shape.slice(0,-2),h=a.shape.slice(0,-2),d=Ae(f),p=Ae(h);V(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),V(Fn(f,h),function(){return"Error in matMul: outer dimensions ("+f+") and ("+h+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),V(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=o.shape.slice(0,-2).concat([l,c]),v=n?o.as3D(d,s,l):o.as3D(d,l,s),g=r?a.as3D(p,c,u):a.as3D(p,u,c),y={transposeA:n,transposeB:r};return G.runKernelFunc(function(b,_){var x=b.batchMatMul(v,g,n,r);return _([v,g]),x},{a:v,b:g},function(b,_){var x=_,S=x[0],E=x[1];return n||r?!n&&r?{a:function(){return b.matMul(E,!1,!1)},b:function(){return b.matMul(S,!0,!1)}}:n&&!r?{a:function(){return E.matMul(b,!1,!0)},b:function(){return S.matMul(b,!1,!1)}}:{a:function(){return E.matMul(b,!0,!0)},b:function(){return b.matMul(S,!0,!0)}}:{a:function(){return b.matMul(E,!1,!0)},b:function(){return S.matMul(b,!0,!1)}}},"BatchMatMul",y).reshape(m)}}),Qhe=q({dot_:function(t,e){var n=j(t,"t1","dot"),r=j(e,"t2","dot");V(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];return V(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Zhe=q({outerProduct_:function(t,e){var n=j(t,"v1","outerProduct"),r=j(e,"v2","outerProduct");return V(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Um=q({reverse_:function(t,e){var n=j(t,"x","reverse");if(n.rank===0)return n.clone();var r=On(e,n.shape);return G.runKernelFunc(function(i){return i.reverse(n,r)},{$x:n},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(n)}}),ede=q({reverse1d_:function(t){var e=j(t,"x","reverse");return V(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),Um(e,0)}}),tde=q({reverse2d_:function(t,e){var n=j(t,"x","reverse");return V(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),Um(n,e)}}),nde=q({reverse3d_:function(t,e){var n=j(t,"x","reverse");return V(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),Um(n,e)}}),rde=q({reverse4d_:function(t,e){var n=j(t,"x","reverse");return V(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),Um(n,e)}});function DW(t,e,n,r,i,o){var a=j(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),V(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),V(Vr(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),o!=null&&V(rn(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Dp(s.shape,e,n,r,i,o);if(l.filterWidth===1&&l.filterHeight===1&&Fn(l.inShape,l.outShape))return a.clone();var c=[s],f=G.runKernelFunc(function(h,d){var p=h.maxPool(s,l);return d([s,p]),p},{x:s},function(h,d){var p=d[0],m=d[1];return{x:function(){return function(v,g,y,b,_,x,S,E){var C=j(v,"dy","maxPoolBackprop"),A=j(g,"input","maxPoolBackprop"),T=j(y,"output","maxPoolBackprop");V(A.rank===C.rank,function(){return"Rank of input ("+A.rank+") does not match rank of dy ("+C.rank+")"}),V(Vr(_,x),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+x+"'"}),V(C.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),V(A.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+A.rank+"."});var P=Dp(A.shape,b,_,x,S,E);return G.runKernelFunc(function(k){return k.maxPoolBackprop(C,A,T,P)},{$dy:C,$input:A})}(h,p,m,e,n,r,i)}}},"MaxPool",l,c);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function MW(t,e,n,r,i,o){var a=j(t,"x","avgPool","float32");V(Vr(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),V(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&V(rn(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Dp(s.shape,e,n,r,i,o);if(l.filterWidth===1&&l.filterHeight===1&&Fn(l.inShape,l.outShape))return a.clone();var c=G.runKernelFunc(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return function(h,d,p,m,v,g){var y=j(h,"dy","avgPoolBackprop"),b=j(d,"input","avgPoolBackprop");V(b.rank===y.rank,function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+y.rank+")"}),V(Vr(m,v),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+v+"'"});var _=b,x=y,S=!1;b.rank===3&&(S=!0,_=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),x=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),V(x.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+x.rank+"."}),V(_.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+_.rank+"."});var E=Dp(_.shape,p,m,v,g),C=G.runKernelFunc(function(A){return A.avgPoolBackprop(x,_,E)},{dy4D:x,input4D:_});return S?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}(f,s,e,n,r,i)}}},"AvgPool",l);return c=c.cast(a.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Nn=q({maxPool_:function(t,e,n,r,i){return DW(t,e,n,1,r,i)}}),Vm=q({avgPool_:function(t,e,n,r,i){return MW(t,e,n,1,r,i)}}),ide=q({pool_:function(t,e,n,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var a=j(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),V(Vr(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var l,c=Dp(s.shape,e,o,i,r),f=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(_,x){var S=_.map(function(A,T){return A+(A-1)*(x[T]-1)}).map(function(A){return A-1}),E=S.map(function(A){return Math.floor(A/2)}),C=S.map(function(A,T){return A-E[T]});return S.map(function(A,T){return[E[T],C[T]]})}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var h=f[0]===1&&f[1]===1,d=function(_,x,S){var E=S.map(function($){return $[0]}),C=S.map(function($){return $[1]}),A=_.concat(E,C),T=x.map(function($,B){return($-A[B]%$)%$}),P=C.map(function($,B){return $+T[B]}),k=x.map(function($,B){return[E[B],P[B]]}),I=x.map(function($,B){return[0,T[B]]});return[k,I]}([c.inHeight,c.inWidth],f,l),p=d[0],m=d[1],v=h?r:"valid",g=h?s:UV(s,f,p),y=(n==="avg"?function(){return MW(g,e,o,1,v)}:function(){return DW(g,e,o,1,v)})(),b=h?y:LV(y,f,m);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),ode=q({maxPool3d_:function(t,e,n,r,i,o,a){o===void 0&&(o="NDHWC");var s=j(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),V(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),V(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),V(Vr(n,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),i!=null&&V(rn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Gy(u.shape,e,n,a,r,i,o),f=G.runKernelFunc(function(h,d){var p=h.maxPool3d(u,c);return d([u,p]),p},{x:u},function(h,d){var p=d[0],m=d[1];return{x:function(){return function(v,g,y,b,_,x,S,E){var C=j(v,"dy","maxPool3dBackprop"),A=j(g,"input","maxPool3dBackprop"),T=j(y,"output","maxPool3dBackprop"),P=C,k=A,I=T,$=!1;A.rank===4&&($=!0,P=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),k=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),I=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),V(P.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),V(k.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+k.rank+"."}),V(I.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+I.rank+"."}),x==null&&(x=[1,1,1]),V(Vr(_,x),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+x+"'"}),E!=null&&V(rn(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+S+"."});var B=Gy(k.shape,b,_,x,S,E),z=G.runKernelFunc(function(U){return U.maxPool3dBackprop(P,k,I,B)},{dy5D:P,input5D:k});return $?z.as4D(z.shape[1],z.shape[2],z.shape[3],z.shape[4]):z}(h,p,m,e,n,a,r,i)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),ade=q({avgPool3d_:function(t,e,n,r,i,o,a){o===void 0&&(o="NDHWC");var s=j(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),V(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),V(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),V(Vr(n,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),i!=null&&V(rn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=Gy(u.shape,e,n,a,r,i,o),f=G.runKernelFunc(function(h){return h.avgPool3d(u,c)},{x:u},function(h){return{x:function(){return function(d,p,m,v,g,y,b){var _=j(d,"dy","avgPool3dBackprop"),x=j(p,"input","avgPool3dBackprop"),S=_,E=x,C=!1;x.rank===4&&(C=!0,S=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]),E=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3])),V(S.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+S.rank+"."}),V(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),g==null&&(g=[1,1,1]),V(Vr(v,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+g+"'"}),b!=null&&V(rn(y),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+y+"."});var A=Gy(E.shape,m,v,g,y,b),T=G.runKernelFunc(function(P){return P.avgPool3dBackprop(S,E,A)},{dy5D:S,input5D:E});return C?T.as4D(T.shape[1],T.shape[2],T.shape[3],T.shape[4]):T}(h,u,e,n,a,r,i)}}});return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),ra=q({slice_:function(t,e,n){var r,i,o=j(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(o.rank-1).fill(0)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(0)):e.slice()).forEach(function(u){V(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=n==null?new Array(o.rank).fill(-1):typeof n=="number"?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(V(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),o.shape[l]-r[l])}),Dle(o,r,i);var a=o.shape,s={begin:r,size:i};return G.runKernelFunc(function(u){return u.slice(o,r,i)},{x:o},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],a[c]-r[c]-i[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),sde=q({slice1d_:function(t,e,n){var r=j(t,"x","slice1d");return V(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),ra(r,[e],[n])}}),ude=q({slice2d_:function(t,e,n){var r=j(t,"x","slice2d");return V(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),ra(r,e,n)}}),$W=q({slice3d_:function(t,e,n){var r=j(t,"x","slice3d");return V(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),ra(r,e,n)}}),lde=q({slice4d_:function(t,e,n){var r=j(t,"x","slice4d");return V(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),ra(r,e,n)}});function jW(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(Ur(e.shape,r))),t.rank<n.rank&&(t=t.reshape(Ur(t.shape,r))),{x:function(){var o=t.mul(n.equal(e).cast(t.dtype));return i==null?o:o.transpose(i)}}}var cde=q({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","all","bool"),i=On(e,r.shape),o=i,a=sa(o,r.rank);a!=null&&(r=r.transpose(a),o=ua(o.length,r.rank));var s=G.runKernelFunc(function(l){return l.all(r,o)},{$x:r});if(n){var u=Ur(s.shape,i);return s.reshape(u)}return s}}),fde=q({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","any","bool"),i=On(e,r.shape),o=i,a=sa(o,r.rank);a!=null&&(r=r.transpose(a),o=ua(o.length,r.rank));var s=G.runKernelFunc(function(l){return l.any(r,o)},{$x:r});if(n){var u=Ur(s.shape,i);return s.reshape(u)}return s}}),hde=q({argMax_:function(t,e){e===void 0&&(e=0);var n=j(t,"x","argMax");e==null&&(e=0);var r=On(e,n.shape),i=sa(r,n.rank);i!=null&&(n=n.transpose(i),r=ua(r.length,n.rank));var o={axis:r[0]},a=[n];return G.runKernelFunc(function(s,u){var l=s.argMax(n,r[0]);return u([n]),l},{x:n},function(s,u){var l=u[0];return{x:function(){return Ze(l)}}},"ArgMax",o,a)}}),dde=q({argMin_:function(t,e){e===void 0&&(e=0);var n=j(t,"x","argMin");e==null&&(e=0);var r=On(e,n.shape),i=sa(r,n.rank);return i!=null&&(n=n.transpose(i),r=ua(r.length,n.rank)),G.runKernelFunc(function(o,a){var s=o.argMin(n,r[0]);return a([n]),s},{$x:n},function(o,a){var s=a[0];return{$x:function(){return Ze(s)}}})}}),pde=q({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","logSumExp"),i=On(e,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(n){var u=Ur(s.shape,i);return s.reshape(u)}return s}}),Kb=q({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","max"),i=r,o=On(e,r.shape),a=o,s=sa(a,r.rank);s!=null&&(r=r.transpose(s),a=ua(a.length,r.rank));var u=[r],l=G.runKernelFunc(function(f,h){var d=f.max(r,a);return h([i,d]),d},{x:r},function(f,h){return jW(f,h[1],h[0],o,s)},"Max",{axes:a},u,[!0]);if(n){var c=Ur(l.shape,o);l=l.reshape(c)}return l}}),mde=q({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","mean"),i=On(e,r.shape),o=Ae(or(r.shape,i)[1]);return Wb(function(a){var s=pe(o);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=a.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(bh(a.shape,"float32")).div(o)}}})(r)}}),vde=q({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","min"),i=r,o=On(e,r.shape),a=o,s=sa(a,r.rank);s!=null&&(r=r.transpose(s),a=ua(a.length,r.rank));var u=[r],l=G.runKernelFunc(function(f,h){var d=f.min(r,a);return h([i,d]),d},{x:r},function(f,h){return jW(f,h[1],h[0],o,s)},"Min",{axes:a},u,[!0]);if(n){var c=Ur(l.shape,o);l=l.reshape(c)}return l}}),gde=q({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=On(e,(t=j(t,"x","moments")).shape),i=t.mean(r,n),o=i.shape;n||(o=Ur(i.shape,r));var a=t.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(r,n)}}}),LW=q({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=On(e,r.shape);return Wb(function(o){var a=sa(i,o.rank),s=i,u=o;a!=null&&(u=o.transpose(a),s=ua(s.length,o.rank));var l=function(d){var p=o.shape.slice();return i.forEach(function(m){p[m]=1}),d.reshape(p).mul(bh(o.shape,"float32"))},c={axes:s},f=G.runKernelFunc(function(d){return d.sum(u,s)},{x:u},function(d){return{x:function(){return l(d)}}},"Sum",c);if(n){var h=Ur(f.shape,i);f=f.reshape(h)}return{value:f,gradFunc:l}})(r)}}),yde=q({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=On(e,r.shape),o=sa(i,r.rank),a=i,s=r;o!=null&&(s=r.transpose(o),a=ua(a.length,r.rank));var u=G.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(n){var l=Ur(u.shape,i);u=u.reshape(l)}return u}}),FW=q({elu_:function(t){var e=j(t,"x","elu");return G.runKernelFunc(function(n,r){var i=n.elu(e);return r([i]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return G.runKernelFunc(function(o){return o.eluDer(n,i)},{dy:n,y:i})}}})}}),bde=q({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=j(t,"x","leakyRelu");return PT(pe(e).mul(n),n)}}),BW=q({prelu_:function(t,e){var n=j(t,"x","prelu"),r=j(e,"alpha","prelu");return G.runKernelFunc(function(i,o){var a=i.prelu(n,r);return o([n,r]),a},{x:n,alpha:r},function(i,o){var a=o[0],s=o[1],u=a.greater(0);return{x:function(){return Pl(u,i,i.mul(s))},alpha:function(){var l=Pl(u,Ze(i),i.mul(a)),c=Tn(s.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),Ht=q({relu_:function(t){var e=j(t,"x","relu");return e.dtype==="bool"?e.toInt():G.runKernelFunc(function(n,r){var i=n.relu(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mulStrict(i.step().toFloat())}}},"Relu")}}),UW=q({relu6_:function(t){var e=j(t,"x","relu6");return e.dtype==="bool"?e.toInt():G.runKernelFunc(function(n,r){var i=n.relu6(e);return r([e]),i},{x:e},function(n,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return n.mulStrict(o.toFloat())}}},"Relu6")}}),wde=q({selu_:function(t){var e=j(t,"x","selu");return G.runKernelFunc(function(n,r){var i=n.selu(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){var o=i.greater(pe(0)),a=pe(CT),s=pe(AT),u=n.mul(s),l=n.mul(a).mul(i.toFloat().exp());return Pl(o,u,l)}}})}}),au=q({transpose_:function(t,e){var n=j(t,"x","transpose");if(e==null&&(e=n.shape.map(function(i,o){return o}).reverse()),V(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(i){V(i>=0&&i<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return G.runKernelFunc(function(i){return i.transpose(n,e)},{x:n},function(i){var o=mT(e);return{x:function(){return i.transpose(o)}}},"Transpose",r)}}),xde=q({localResponseNormalization_:function(t,e,n,r,i){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=j(t,"x","localResponseNormalization");V(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),V(rn(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var a=o,s=!1;o.rank===3&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=G.runKernelFunc(function(l,c){var f=l.localResponseNormalization4D(a,e,n,r,i);return c([a,f]),f},{x4D:a},function(l,c){var f=c[0],h=c[1];return{x4D:function(){return G.runKernelFunc(function(d){return d.LRNGrad(l,f,h,e,n,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),VW=q({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var i=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(pe(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=j(t,"x","norm"),e,n),o=i.shape;if(r){var a=On(n,t.shape);o=Ur(i.shape,a)}return i.reshape(o)}}),_de=q({basicLSTMCell_:function(t,e,n,r,i,o){var a=j(t,"forgetBias","basicLSTMCell"),s=j(e,"lstmKernel","basicLSTMCell"),u=j(n,"lstmBias","basicLSTMCell"),l=j(r,"data","basicLSTMCell"),c=j(i,"c","basicLSTMCell"),f=j(o,"h","basicLSTMCell"),h=l.concat(f,1).matMul(s).add(u),d=h.shape[0],p=h.shape[1]/4,m=[d,p],v=h.slice([0,0],m),g=h.slice([0,p],m),y=h.slice([0,2*p],m),b=h.slice([0,3*p],m),_=v.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(a.add(y).sigmoid())),x=_.tanh().mulStrict(b.sigmoid());return[_,x]}}),Sde=q({multiRNNCell_:function(t,e,n,r){for(var i=j(e,"data","multiRNNCell"),o=Uy(n,"c","multiRNNCell"),a=Uy(r,"h","multiRNNCell"),s=i,u=[],l=0;l<t.length;l++){var c=t[l](s,o[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],h=[];for(l=0;l<u.length;l+=2)f.push(u[l]),h.push(u[l+1]);return[f,h]}}),Ede=q({movingAverage_:function(t,e,n,r,i){i===void 0&&(i=!0);var o=j(t,"v","movingAverage"),a=j(e,"x","movingAverage"),s=j(n,"decay","movingAverage");xue(o,a),V(Fn(o.shape,a.shape),function(){return"Shape mismatch in v and x"});var u=pe(1),l=u.sub(s),c=a.sub(o).mul(l);if(i){V(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=j(r,"step","movingAverage");c=c.div(u.sub(Jy(s,f)))}return o.add(c)}}),Cde=q({stridedSlice_:function(t,e,n,r,i,o,a,s,u){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=j(t,"x","stridedSlice"),c=yD(s),f=l.shape.slice();c.forEach(function(v){e[v]=0,n[v]=1,f.splice(v,0,1)}),l=l.reshape(f);for(var h=0;h<l.rank;h++)e[h]=Mle(i,e,r,l.shape,h),n[h]=$le(o,n,r,l.shape,h),r[h]=r[h]||1;var d=yD(u);d.forEach(function(v){n[v]=e[v]+1,r[v]=1});var p=bT(e,n,r),m=p.filter(function(v,g){return d.indexOf(g)===-1});return r.every(function(v){return v===1})?ra(l,e,p).reshape(m):G.runKernelFunc(function(v){return v.stridedSlice(l,e,n,r)},{$x:l}).reshape(m)}}),Ade=q({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=j(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var o=G.runKernelFunc(function(a){return a.topk(r,e,n)},{$x:r});return{values:o[0],indices:o[1]}}}),Tde=q({scatterND_:function(t,e,n){var r=j(t,"indices","scatterND","int32"),i=j(e,"updates","scatterND");return Nle(i,r,n),G.runKernelFunc(function(o){return o.scatterND(r,i,n)},{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),RT=q({fft_:function(t){V(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return G.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),Qy=q({ifft_:function(t){V(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return G.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),NT=q({rfft_:function(t,e){V(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],i=t.size/r;if(e!=null&&e<r){var o=t.shape.map(function(g){return 0}),a=t.shape.map(function(g){return g});a[t.shape.length-1]=e,n=t.slice(o,a),r=e}else if(e!=null&&e>r){var s=t.shape.map(function(g){return g});s[t.shape.length-1]=e-r,n=t.concat(Nt(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=Gn(n,u).as2D(i,r),c=RT(l),f=Math.floor(r/2)+1,h=Ti(c),d=Bo(c),p=h.split([f,r-f],h.shape.length-1),m=d.split([f,r-f],d.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=f,Gn(p[0],m[0]).reshape(v)}}),WW=q({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=Qy(r);return Ti(i)}var o=[n,2*(e-1)],a=Ti(t).as2D(n,e),s=Bo(t).as2D(n,e),u=a.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(pe(-1)),c=a.concat(u,1),f=s.concat(l,1);return r=Gn(c,f).as2D(o[0],o[1]),i=Qy(r),Ti(i)}}),Pde=Object.freeze({fft:RT,ifft:Qy,rfft:NT,irfft:WW}),Ode=q({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var i=j(t,"sparseIndices","sparseToDense","int32"),o=j(e,"sparseValues","sparseToDense"),a=j(r,"defaultValue","sparseToDense",o.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,h=s.rank>1?s.shape[1]:1;if(l.length!==h)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+h+".");var d=u.size;if(u.rank!==0&&(u.rank!==1||d!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,a),G.runKernelFunc(function(s){return s.sparseToDense(i,o,n,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),kde=q({gatherND_:function(t,e){var n=j(e,"indices","gatherND","int32"),r=j(t,"x","gatherND");return G.runKernelFunc(function(i){return i.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),Ide=q({diag_:function(t){var e=j(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return G.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(n)}}),Rde=q({dropout_:function(t,e,n,r){var i=j(t,"x","dropout");if(V(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),V(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof Wt?i.clone():i;var o=function(u,l){if(l==null)return u.shape.slice();if(Fn(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?c.push(u.shape[f]):c.push(l[f]);return c}return l}(i,n),a=1-e,s=BV(o,0,1,"float32",r).add(a).floor().div(a);return i.mul(s)}});function zW(t,e,n){for(var r=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var a=2*Math.PI*o/(t+r-1);i[o]=e-n*Math.cos(a)}return cn(i,"float32")}var DT=q({hannWindow_:function(t){return zW(t,.5,.5)}}),HW=q({hammingWindow_:function(t){return zW(t,.54,.46)}}),MT=q({frame_:function(t,e,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,a=[];o+e<=t.size;)a.push(ra(t,o,e)),o+=n;if(r)for(;o<t.size;){var s=o+e-t.size,u=Cn([ra(t,o,e-s),Qo([s],i)]);a.push(u),o+=n}return a.length===0?qs([],[0,e]):Cn(a).as2D(a.length,e)}}),qW=q({stft_:function(t,e,n,r,i){var o;i===void 0&&(i=DT),r==null&&(o=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=MT(t,e,n),s=dr(a,i(e)),u=[],l=0;l<a.shape[0];l++)u.push(NT(s.slice([l,0],[1,e]),r));return Cn(u)}}),Nde=Object.freeze({hannWindow:DT,hammingWindow:HW,frame:MT,stft:qW}),cr,Dde=function(t,e,n){return n===void 0&&(n=1),Se(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,f,h,d,p,m,v;return Ee(this,function(g){switch(g.label){case 0:return r=j(t,"predictions","inTopK"),i=j(e,"targets","inTopK"),V(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),V(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),ft(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],V(n>0&&n<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n}),[4,r.data()];case 1:return a=g.sent(),[4,i.data()];case 2:for(s=g.sent(),u=[a.length/o,o],c=u[1],f=Ip("bool",l=u[0]),h=0;h<l;h++){for(d=h*c,p=a.subarray(d,d+c),m=[],v=0;v<p.length;v++)m.push({value:p[v],index:v});for(m.sort(function(y,b){return b.value-y.value}),f[h]=0,v=0;v<n;v++)if(m[v].index===s[h]){f[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),[2,Xn(f,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(cr||(cr={}));var Mde=q({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=cr.SUM_BY_NONZERO_WEIGHTS);var i=j(t,"labels","absoluteDifference"),o=j(e,"predictions","absoluteDifference"),a=null;n!=null&&(a=j(n,"weights","absoluteDifference")),ft(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return Ka(s,a,r)}}),Ka=q({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=cr.SUM_BY_NONZERO_WEIGHTS);var r=j(t,"losses","computeWeightedLoss"),i=null;e!=null&&(i=j(e,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(n===cr.NONE)return o;if(n===cr.SUM)return o.sum();if(n===cr.MEAN){if(i==null)return o.mean();var a=r.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(pe(a)):s}if(n===cr.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(pe(r.size));var u=i.mul(bh(r.shape)).notEqual(pe(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),$de=q({cosineDistance_:function(t,e,n,r,i){i===void 0&&(i=cr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"labels","cosineDistance"),a=j(e,"predictions","cosineDistance"),s=null;r!=null&&(s=j(r,"weights","cosineDistance")),ft(o.shape,a.shape,"Error in cosineDistance: ");var u=pe(1).sub(o.mul(a).sum(n,!0));return Ka(u,s,i)}}),jde=q({hingeLoss_:function(t,e,n,r){r===void 0&&(r=cr.SUM_BY_NONZERO_WEIGHTS);var i=j(t,"labels","hingeLoss"),o=j(e,"predictions","hingeLoss"),a=null;n!=null&&(a=j(n,"weights","hingeLoss")),ft(i.shape,o.shape,"Error in hingeLoss: ");var s=pe(1);i=pe(2).mul(i).sub(s);var u=s.sub(i.mul(o)).relu();return Ka(u,a,r)}}),Lde=q({huberLoss_:function(t,e,n,r,i){r===void 0&&(r=1),i===void 0&&(i=cr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"labels","huberLoss"),a=j(e,"predictions","huberLoss"),s=null;n!=null&&(s=j(n,"weights","huberLoss")),ft(o.shape,a.shape,"Error in huberLoss: ");var u=pe(r),l=a.sub(o).abs(),c=CW(l,u),f=l.sub(c),h=pe(.5).mul(c.square()).add(u.mul(f));return Ka(h,s,i)}}),Fde=q({logLoss_:function(t,e,n,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=cr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"labels","logLoss"),a=j(e,"predictions","logLoss"),s=null;n!=null&&(s=j(n,"weights","logLoss")),ft(o.shape,a.shape,"Error in logLoss: ");var u=pe(1),l=pe(r),c=o.mul(a.add(l).log()).neg().sub(u.sub(o).mul(u.sub(a).add(l).log()));return Ka(c,s,i)}}),Bde=q({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=cr.SUM_BY_NONZERO_WEIGHTS);var i=j(t,"labels","meanSquaredError"),o=j(e,"predictions","meanSquaredError"),a=null;n!=null&&(a=j(n,"weights","meanSquaredError")),ft(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return Ka(s,a,r)}}),Ude=q({sigmoidCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=cr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"multiClassLabels","sigmoidCrossEntropy"),a=j(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=j(n,"weights","sigmoidCrossEntropy")),ft(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=pe(r),l=pe(1),c=pe(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var f=function(h,d){var p=j(h,"labels","sigmoidCrossEntropyWithLogits"),m=j(d,"logits","sigmoidCrossEntropyWithLogits");ft(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var v=m.relu(),g=m.mul(p),y=m.abs().neg().exp().log1p();return v.sub(g).add(y)}(o,a);return Ka(f,s,i)}}),Vde=q({softmaxCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=cr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"onehotLabels","softmaxCrossEntropy"),a=j(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=j(n,"weights","softmaxCrossEntropy")),ft(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=pe(r),l=pe(1),c=pe(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var f=function(h,d,p){if(p===void 0&&(p=-1),p===-1&&(p=d.rank-1),p!==d.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+d.rank+" and dim was "+p);return Wb(function(m,v,g){var y=v.logSumExp([p],!0),b=v.toFloat().sub(y);return g([m,b]),{value:b.mul(m).neg().sum([p]),gradFunc:function(_,x){var S=x[0],E=x[1],C=Ur(_.shape,[p]);return[_.reshape(C).mul(S.toFloat().sub(E.exp())),_.reshape(C).mul(E.exp().sub(S.toFloat()))]}}})(h,d)}(o,a);return Ka(f,s,i)}}),Wde=Object.freeze({get Reduction(){return cr},absoluteDifference:Mde,computeWeightedLoss:Ka,cosineDistance:$de,hingeLoss:jde,huberLoss:Lde,logLoss:Fde,meanSquaredError:Bde,sigmoidCrossEntropy:Ude,softmaxCrossEntropy:Vde});function BD(t,e){return e===void 0&&(e=!1),G.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=FV(n),o=t.clone(),a=qs([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(f){var h,d=o,p=s,m=i;h=G.tidy(function(){var v=o.slice([f,f],[n-f,1]),g=v.norm(),y=o.slice([f,f],[1,1]),b=qs([[-1]]).where(y.greater(0),qs([[1]])),_=y.sub(b.mul(g)),x=v.div(_);s=x.shape[0]===1?a.clone():a.concat(x.slice([1,0],[x.shape[0]-1,x.shape[1]]),0);var S=b.matMul(_).div(g).neg(),E=o.slice([f,0],[n-f,r]),C=S.mul(s);if(f===0)o=E.sub(C.matMul(s.transpose().matMul(E)));else{var A=E.sub(C.matMul(s.transpose().matMul(E)));o=o.slice([0,0],[f,r]).concat(A,0)}var T=i.slice([0,f],[n,i.shape[1]-f]);if(f===0)i=T.sub(T.matMul(s).matMul(C.transpose()));else{var P=T.sub(T.matMul(s).matMul(C.transpose()));i=i.slice([0,0],[n,f]).concat(P,1)}return[s,o,i]}),s=h[0],o=h[1],i=h[2],Fr([d,p,m])},c=0;c<u;++c)l(c);return!e&&n>r&&(i=i.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[i,o]})}var zde=q({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=j(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),a=o[0],s=o[1];if(!(e<=a))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=a),n<0&&(n=s);var u=Vy(0,a,1,"int32").reshape([-1,1]),l=Vy(0,s,1,"int32"),c=Pn(u,l),f=Hb(c.lessEqual(pe(+e,"int32")),c.greaterEqual(pe(-n,"int32"))),h=Nt([a,s],r.dtype);return hi(An(r.reshape([-1,a,s])).map(function(d){return Pl(f,d,h)})).reshape(i)}}),Hde=q({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,V(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){V(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},i=1;i<t.length;++i)r(i)}else e=!0,t=gT(t,t.shape[0],0).map(function(u){return VV(u,[0])});V(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],a=t,s=function(u){o.push(G.tidy(function(){var l=a[u];if(u>0)for(var c=0;c<u;++c){var f=LW(o[c].mulStrict(l)).mul(o[c]);l=l.sub(f)}return l.div(VW(l,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return e?hi(o,0):o}}),qde=q({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return BD(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(a,s){return a*s}),r=An(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(function(a){var s=BD(a,e),u=s[0],l=s[1];i.push(u),o.push(l)}),[hi(i,0).reshape(t.shape),hi(o,0).reshape(t.shape)]}}),Gde=Object.freeze({bandPart:zde,gramSchmidt:Hde,qr:qde});function Xb(t,e,n,r,i,o){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);var a=t.shape[0];return n=Math.min(n,a),V(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),V(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),V(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),V(e.rank===1,function(){return"scores must be a 1D tensor"}),V(e.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+e.shape[0]}),V(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var Kde=q({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=j(t,"images","resizeBilinear");V(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),V(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=G.runKernelFunc(function(l,c){return c([i]),l.resizeBilinear(i,a,s,n)},{x:i},function(l,c){return{x:function(){return G.runKernelFunc(function(f){return f.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Xde=q({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=j(t,"images","resizeNearestNeighbor");V(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),V(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),V(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=G.runKernelFunc(function(l,c){return c([i]),l.resizeNearestNeighbor(i,a,s,n)},{batchImages:i},function(l,c){return{batchImages:function(){return G.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Yde=q({nonMaxSuppression_:function(t,e,n,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=j(t,"boxes","nonMaxSuppression"),a=j(e,"scores","nonMaxSuppression"),s=Xb(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return G.runKernelFunc(function(l){return l.nonMaxSuppression(o,a,n,r,i)},{boxes:o,scores:a},null,"NonMaxSuppressionV3",u)}}),Jde=function(t,e,n,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Se(this,void 0,void 0,function(){var o,a,s,u,l,c,f;return Ee(this,function(h){switch(h.label){case 0:return o=j(t,"boxes","nonMaxSuppressionAsync"),a=j(e,"scores","nonMaxSuppressionAsync"),s=Xb(o,a,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],f=xT(l,c,n,r,i),o!==t&&o.dispose(),a!==e&&a.dispose(),[2,f]}})})},Qde=q({nonMaxSuppressionWithScore_:function(t,e,n,r,i,o){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var a=j(t,"boxes","nonMaxSuppression"),s=j(e,"scores","nonMaxSuppression"),u=Xb(a,s,n,r,i,o),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},c=G.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),Zde=function(t,e,n,r,i,o){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),Se(this,void 0,void 0,function(){var a,s,u,l,c,f,h;return Ee(this,function(d){switch(d.label){case 0:return a=j(t,"boxes","nonMaxSuppressionAsync"),s=j(e,"scores","nonMaxSuppressionAsync"),u=Xb(a,s,n,r,i,o),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return l=d.sent(),c=l[0],f=l[1],h=_T(c,f,n,r,i,o),a!==t&&a.dispose(),s!==e&&s.dispose(),[2,h]}})})},epe=q({cropAndResize_:function(t,e,n,r,i,o){var a=j(t,"image","cropAndResize"),s=j(e,"boxes","cropAndResize","float32"),u=j(n,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var l=s.shape[0];return V(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),V(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),V(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),V(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),V(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),V(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),G.runKernelFunc(function(c,f){return c.cropAndResize(a,s,u,r,i,o)},{images:a,boxes:s,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),$T=Object.freeze({resizeBilinear:Kde,resizeNearestNeighbor:Xde,nonMaxSuppression:Yde,nonMaxSuppressionAsync:Jde,nonMaxSuppressionWithScore:Qde,nonMaxSuppressionWithScoreAsync:Zde,cropAndResize:epe}),jT=function(t,e){return!(t>0)||e==="linear"},LT=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},FT=function(t,e){var n=e,r=Tn(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},BT=function(t,e,n){if(e==="linear")return t;if(e==="relu")return Ht(t);if(e==="elu")return FW(t);if(e==="relu6")return UW(t);if(e==="prelu")return BW(t,n);throw new Error("Unknown fused activation "+e+".")},tpe=q({fusedMatMul_:function(t){var e,n=t.a,r=t.b,i=t.transposeA,o=i!==void 0&&i,a=t.transposeB,s=a!==void 0&&a,u=t.bias,l=t.activation,c=l===void 0?"linear":l,f=t.preluActivationWeights;if(jT(G.state.gradientDepth,c)===!1){var h=Gb(n,r,o,s);return u!=null&&(h=Ke(h,u)),BT(h,c,f)}var d=j(n,"a","fused matMul"),p=j(r,"b","fused matMul");e=Kt(d,p),d=e[0],p=e[1];var m=o?d.shape[d.rank-2]:d.shape[d.rank-1],v=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=o?d.shape[d.rank-1]:d.shape[d.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=d.shape.slice(0,-2),_=p.shape.slice(0,-2),x=Ae(b),S=Ae(_);V(d.rank>=2&&p.rank>=2&&d.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+p.rank+"."}),V(Fn(b,_),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+_+") of Tensors with shapes "+d.shape+" and "+p.shape+" must match."}),V(m===v,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+v+") of Tensors with shapes "+d.shape+" and "+p.shape+" and transposeA="+o+" and transposeB="+s+" must match."});var E,C,A=d.shape.slice(0,-2).concat([g,y]),T=o?d.as3D(x,m,g):d.as3D(x,g,m),P=s?p.as3D(S,y,v):p.as3D(S,v,y);u!=null&&Ye(A,(E=Kt(E=j(u,"bias","fused matMul"),d)[0]).shape),f!=null&&(C=j(f,"prelu weights","fused matMul"));var k={a:T,b:P};u!=null&&(k.bias=E),f!=null&&(k.preluActivationWeights=C);var I=[T,P];return G.runKernelFunc(function($,B){var z=$.fusedBatchMatMul({a:T,b:P,transposeA:o,transposeB:s,bias:E,activation:c,preluActivationWeights:C});return B([T,P,z]),z},k,function($,B){var z=B[0],U=B[1],M=B[2],F=LT($,M,c),H={};return u!=null&&(H={bias:function(){return FT(E,F)}}),Object.assign(o||s?!o&&s?{a:function(){return F.matMul(U,!1,!1)},b:function(){return F.matMul(z,!0,!1)}}:o&&!s?{a:function(){return U.matMul(F,!1,!0)},b:function(){return z.matMul(F,!1,!1)}}:{a:function(){return U.matMul(F,!0,!0)},b:function(){return F.matMul(z,!0,!0)}}:{a:function(){return F.matMul(U,!1,!0)},b:function(){return z.matMul(F,!0,!1)}},H)},"_FusedMatMul",{transposeA:o,transposeB:s,activation:c},I,[!0]).reshape(A)}}),npe=q({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,h=f===void 0?"linear":f,d=t.preluActivationWeights;if(h=h||"linear",jT(G.state.gradientDepth,h)===!1){var p=Fi(e,n,r,i,a,u,l);return c!=null&&(p=Ke(p,c)),BT(p,h,d)}var m=j(e,"x","conv2d"),v=j(n,"filter","conv2d"),g=m,y=!1;m.rank===3&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),V(g.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),V(v.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+v.rank+"."}),l!=null&&V(rn(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),V(g.shape[3]===v.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+v.shape[2]+"."}),V(Vr(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),V(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var b,_,x=Fl(g.shape,v.shape,r,u,i,l);c!=null&&(b=Kt(b=j(c,"bias","fused conv2d"),m)[0],Ye(x.outShape,b.shape)),d!=null&&(_=j(d,"prelu weights","fused conv2d"));var S={x:g,filter:v};c!=null&&(S.bias=b),d!=null&&(S.preluActivationWeights=_);var E=[v,g],C=G.runKernelFunc(function(A,T){var P=A.fusedConv2d({input:g,filter:v,convInfo:x,bias:b,activation:h,preluActivationWeights:_});return T([v,g,P]),P},S,function(A,T){var P=T,k=P[0],I=P[1],$=P[2],B=LT(A,$,h);V(Mf(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var z={};return c!=null&&(z={bias:function(){return FT(b,B)}}),Object.assign({x:function(){return IW(I.shape,B,k,r,i)},filter:function(){return kT(I,B,k.shape,r,i)}},z)},"FusedConv2D",{convInfo:x,activation:h},E,[!0]);return y?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),rpe=q({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,h=f===void 0?"linear":f,d=t.preluActivationWeights;if(jT(G.state.gradientDepth,h)===!1){var p=qb(e,n,r,i,a,u,l);return c!=null&&(p=Ke(p,c)),BT(p,h,d)}var m=j(e,"x","depthwiseConv2d"),v=j(n,"filter","depthwiseConv2d"),g=m,y=!1;m.rank===3&&(y=!0,g=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),V(g.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),V(v.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+v.rank+"."}),V(g.shape[3]===v.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+v.shape[2]+"."}),u==null&&(u=[1,1]),V(Vr(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&V(rn(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var b,_,x=Fl(g.shape,v.shape,r,u,i,l,!0);c!=null&&(b=Kt(b=j(c,"bias","fused conv2d"),m)[0],Ye(x.outShape,b.shape)),d!=null&&(_=j(d,"prelu weights","fused depthwiseConv2d"));var S={x:g,filter:v};c!=null&&(S.bias=b),d!=null&&(S.preluActivationWeights=_);var E=[v,g],C=G.runKernelFunc(function(A,T){var P=A.fusedDepthwiseConv2D({input:g,filter:v,convInfo:x,bias:b,activation:h,preluActivationWeights:_});return T([v,g,P]),P},S,function(A,T){V(Mf(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var P=T[0],k=T[1],I=T[2],$=LT(A,I,h),B={};return c!=null&&(B={bias:function(){return FT(b,$)}}),Object.assign({x:function(){return RW(k.shape,$,P,x)},filter:function(){return NW(k,$,P.shape,x)}},B)},"FusedDepthwiseConv2D",{convInfo:x,activation:h},E,[!0]);return y?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),ipe=Object.freeze({matMul:tpe,conv2d:npe,depthwiseConv2d:rpe}),ope=Object.freeze({image:$T,linalg:Gde,losses:Wde,spectral:Pde,fused:ipe,signal:Nde,square:Ffe,squaredDifference:mW,conv1d:Khe,conv2d:Fi,conv3d:Xhe,depthwiseConv2d:qb,separableConv2d:IT,conv2dTranspose:Yhe,conv3dTranspose:Jhe,op:q,batchNormalization2d:mhe,batchNormalization3d:vhe,batchNormalization4d:ghe,batchNormalization:yhe,batchNorm:xW,batchNorm2d:bhe,batchNorm3d:whe,batchNorm4d:xhe,booleanMaskAsync:Ghe,complex:Gn,real:Ti,imag:Bo,concat:Cn,concat1d:ile,concat2d:ole,concat3d:ale,concat4d:sle,split:gT,matMul:Gb,dot:Qhe,outerProduct:Zhe,reverse:Um,reverse1d:ede,reverse2d:tde,reverse3d:nde,reverse4d:rde,maxPool:Nn,avgPool:Vm,pool:ide,maxPool3d:ode,avgPool3d:ade,slice:ra,slice1d:sde,slice2d:ude,slice3d:$W,slice4d:lde,abs:Bfe,acos:Ufe,acosh:Vfe,asin:Wfe,asinh:zfe,atan:Hfe,atanh:qfe,ceil:Gfe,clipByValue:TT,cos:Kfe,cosh:Xfe,erf:Yfe,exp:OE,expm1:Jfe,floor:Qfe,log:Zfe,log1p:ehe,logSigmoid:the,neg:Yy,reciprocal:nhe,round:rhe,rsqrt:vW,sigmoid:gW,sign:ihe,isNaN:ohe,isInf:ahe,isFinite:she,sin:uhe,sinh:lhe,softplus:che,sqrt:fhe,step:hhe,tan:dhe,tanh:phe,all:cde,any:fde,argMax:hde,argMin:dde,logSumExp:pde,max:Kb,mean:mde,min:vde,moments:gde,sum:LW,prod:yde,equal:AW,equalStrict:jhe,greater:Lhe,greaterEqual:TW,greaterEqualStrict:Fhe,greaterStrict:Bhe,less:Uhe,lessEqual:Vhe,lessEqualStrict:Whe,lessStrict:zhe,notEqual:Hhe,notEqualStrict:qhe,add:Ke,addN:Ehe,addStrict:Che,atan2:Ahe,div:so,divNoNan:The,divStrict:Phe,floorDiv:EW,maximum:PT,maximumStrict:Ohe,minimum:CW,minimumStrict:khe,mod:Ihe,modStrict:Rhe,mul:dr,mulStrict:Nhe,pow:Jy,powStrict:Dhe,squaredDifferenceStrict:Mhe,sub:Pn,subStrict:$he,elu:FW,leakyRelu:bde,prelu:BW,relu:Ht,relu6:UW,selu:wde,logicalAnd:Hb,logicalNot:_he,logicalOr:_W,logicalXor:She,where:Pl,whereAsync:SW,buffer:Ue,print:vle,batchToSpaceND:LV,broadcastTo:gle,cast:yle,clone:ble,cumsum:wle,depthToSpace:xle,expandDims:Ai,eye:FV,multinomial:_le,oneHot:CE,pad:Ll,pad1d:Sle,pad2d:Ele,pad3d:Cle,pad4d:Ale,rand:Tle,randomNormal:Ple,randomGamma:Ole,randomUniform:BV,reshape:co,spaceToBatchND:UV,squeeze:VV,stack:hi,tile:tf,truncatedNormal:kle,unstack:An,setdiff1dAsync:Ile,fill:Qo,linspace:rle,ones:bh,range:Vy,scalar:pe,tensor:Xn,tensor1d:cn,tensor2d:qs,tensor3d:vT,tensor4d:kr,tensor5d:ele,tensor6d:tle,variable:nle,zeros:Nt,onesLike:jV,zerosLike:Ze,transpose:au,softmax:Ga,logSoftmax:Lle,localResponseNormalization:xde,norm:VW,gather:OT,unsortedSegmentSum:PW,basicLSTMCell:_de,multiRNNCell:Sde,movingAverage:Ede,stridedSlice:Cde,topk:Ade,scatterND:Tde,fft:RT,ifft:Qy,rfft:NT,irfft:WW,sparseToDense:Ode,gatherND:kde,diag:Ide,dropout:Rde,hannWindow:DT,hammingWindow:HW,frame:MT,stft:qW,inTopKAsync:Dde});function se(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(n){n!=null&&V(n.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function B1(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var ape=function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new XV(n,G),n}return wo(e,t),e.prototype.write=function(n,r,i){this.firstUse&&(this.firstUse=!1,ne().get("IS_NODE")&&By(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:n,dtype:i}),o},e.prototype.move=function(n,r,i,o){this.data.set(n,{values:r,dtype:o})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return Se(this,void 0,void 0,function(){return Ee(this,function(r){return[2,this.readSync(n)]})})},e.prototype.readSync=function(n){var r=this.data.get(n),i=r.dtype,o=r.complexTensors;return i==="complex64"?PE(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),i=r;if(n.dtype==="string")try{i=r.map(function(o){return jy(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ue(n.shape,n.dtype,i)},e.prototype.makeOutput=function(n,r,i){var o=this.write(n,r,i);return G.makeTensorFromDataId(o,r,i,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return Se(this,void 0,void 0,function(){var r;return Ee(this,function(i){return r=jo(),n(),[2,{kernelMs:jo()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var i=this.makeOutput(null,n.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:G.keep(n.clone()),imag:G.keep(r.clone())},i},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(se(n,"slice"),GV(n.shape,r,i)){var o=KV(r,n.strides),a=Ae(i);return Xn(this.readSync(n.dataId).subarray(o,o+a),i,n.dtype)}for(var s=Ue(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(f,h){return f+r[h]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},e.prototype.stridedSlice=function(n,r,i,o){se(n,"stridedSlice");var a=bT(r,i,o);if(a.some(function(d){return d===0}))return Xn([],a);for(var s=Ue(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),f=new Array(c.length),h=0;h<f.length;h++)f[h]=c[h]*o[h]+r[h];s.set.apply(s,[u.get.apply(u,f)].concat(c))}return s.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),i=Ue([n.size,n.size],n.dtype),o=i.values,a=0;a<r.length;a++)o[a*n.size+a]=r[a];return i.toTensor()},e.prototype.unstack=function(n,r){for(var i=n.shape[r],o=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(o[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(o);return c},e.prototype.reverse=function(n,r){se(n,"reverse");for(var i=Ue(n.shape,n.dtype),o=this.bufferSync(n),a=function(u){var l=i.indexToLoc(u),c=l.slice();r.forEach(function(f){return c[f]=n.shape[f]-1-c[f]}),i.set.apply(i,[o.get.apply(o,c)].concat(l))},s=0;s<i.size;s++)a(s);return i.toTensor()},e.prototype.concat=function(n,r){var i=this;if(n[0].dtype==="complex64"){var o=n.map(function(d){return Ti(d)}),a=n.map(function(d){return Bo(d)});return Gn(this.concat(o,r),this.concat(a,r))}var s=n.map(function(d){var p=Ae(d.shape.slice(r));return d.as2D(-1,p)}),u=Df(s.map(function(d){return d.shape}),1),l=Ue(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(d){l.set(i.readSync(d.dataId),c),c+=d.size})}else{var f=0;s.forEach(function(d){for(var p=i.readSync(d.dataId),m=0,v=0;v<d.shape[0];++v)for(var g=v*u[1]+f,y=0;y<d.shape[1];++y)l[g+y]=p[m++];f+=d.shape[1]})}var h=Df(n.map(function(d){return d.shape}),r);return Xn(l,h,n[0].dtype)},e.prototype.neg=function(n){return se(n,"neg"),this.multiply(pe(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i+a,imag:o+s}}):this.broadcastedBinaryOp(n,r,Kn(n.dtype,r.dtype),function(i,o){return i+o})},e.prototype.addN=function(n){var r=this;se(n,"addN");for(var i=n.map(function(c){return r.readSync(c.dataId)}),o=Ue(n[0].shape,n[0].dtype),a=o.values,s=0;s<n.length;s++)for(var u=i[s],l=0;l<a.length;l++)a[l]+=u[l];return o.toTensor()},e.prototype.softmax=function(n,r){var i=On([r],n.shape),o=this.max(n,i),a=Ur(o.shape,i),s=this.subtract(n,o.reshape(a)),u=this.exp(s),l=this.sum(u,i).reshape(a);return this.realDivide(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i-a,imag:o-s}}):this.broadcastedBinaryOp(n,r,Kn(n.dtype,r.dtype),function(i,o){return i-o})},e.prototype.pow=function(n,r){return se([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return Math.pow(i,o)})},e.prototype.batchMatMul=function(n,r,i,o){se([n,r],"matMul");for(var a=i?n.shape[1]:n.shape[2],s=i?n.shape[2]:n.shape[1],u=o?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),f=this.readSync(r.dataId),h=i?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],d=h[0],p=h[1],m=h[2],v=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],g=v[0],y=v[1],b=v[2],_=s*u,x=Ue([l,s,u],n.dtype),S=x.values,E=this.blockSize,C=0;C<l;C++)for(var A=0;A<s;A+=E)for(var T=0;T<u;T+=E)for(var P=0;P<a;P+=E)for(var k=Math.min(A+E,s),I=Math.min(T+E,u),$=Math.min(P+E,a),B=A;B<k;B++)for(var z=T;z<I;z++){for(var U=0,M=P;M<$;M++)U+=c[C*d+B*p+M*m]*f[M*g+z*y+C*b];S[C*_+(B*u+z)]+=U}return x.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,o=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,i,o,a);return s&&(c=this.add(c,s)),u&&(c=B1(this,c,u,l)),c},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i*a-o*s,imag:i*s+o*a}}):this.broadcastedBinaryOp(n,r,Kn(n.dtype,r.dtype),function(i,o){return i*o})},e.prototype.realDivide=function(n,r){return se([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(i,o){return i/o})},e.prototype.floorDiv=function(n,r){return se([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(i,o){return Math.floor(i/o)})},e.prototype.sum=function(n,r){se(n,"sum"),ti("sum",r,n.rank);for(var i=or(n.shape,r),o=i[0],a=i[1],s=Nt(o,Kn(n.dtype,"int32")),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=0,p=0;p<u;++p)d+=c[h+p];l[f]=d}return s},e.prototype.prod=function(n,r){se(n,"sum");for(var i=or(n.shape,r),o=i[0],a=i[1],s=Nt(o,Kn(n.dtype,"int32")),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=1,p=0;p<u;++p)d*=c[h+p];l[f]=d}return s},e.prototype.unsortedSegmentSum=function(n,r,i){se(n,"unsortedSegmentSum");for(var o=[],a=n.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=pe(s,"int32"),l=AW(u,r).asType("float32").mul(n).sum(0);o.push(l)}return hi(o)},e.prototype.argMin=function(n,r){se(n,"argMin");var i=[r];ti("argMin",i,n.rank);for(var o=or(n.shape,i),a=o[0],s=o[1],u=Nt(a,"int32"),l=Ae(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),h=0;h<c.length;++h){for(var d=h*l,p=f[d],m=0,v=0;v<l;++v){var g=f[d+v];g<p&&(p=g,m=v)}c[h]=m}return u},e.prototype.argMax=function(n,r){se(n,"argMax");var i=[r];ti("argMax",i,n.rank);for(var o=or(n.shape,i),a=o[0],s=o[1],u=Nt(a,"int32"),l=Ae(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),h=0;h<c.length;++h){for(var d=h*l,p=f[d],m=0,v=0;v<l;++v){var g=f[d+v];g>p&&(p=g,m=v)}c[h]=m}return u},e.prototype.cumsum=function(n,r,i,o){if(se(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var a=Kn(n.dtype,"int32"),s=Nt(n.shape,a),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],f=o?function(v,g){return v+c-g-1}:function(v,g){return v+g},h=0;h<l.length;h+=c)for(var d=0;d<c;d++){var p=f(h,d);if(d===0)u[p]=i?0:l[p];else{var m=f(h,d-1);u[p]=i?l[m]+u[m]:l[p]+u[m]}}return s},e.prototype.equal=function(n,r){return se([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i===o?1:0})},e.prototype.notEqual=function(n,r){return se([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i!==o?1:0})},e.prototype.less=function(n,r){return se([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i<o?1:0})},e.prototype.lessEqual=function(n,r){return se([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i<=o?1:0})},e.prototype.greater=function(n,r){return se([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i>o?1:0})},e.prototype.greaterEqual=function(n,r){return se([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i>=o?1:0})},e.prototype.logicalNot=function(n){se(n,"logicalNot");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return se([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i&&o})},e.prototype.logicalOr=function(n,r){return se([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i||o})},e.prototype.select=function(n,r,i){se([n,r,i],"select");for(var o=this.readSync(n.dataId),a=this.readSync(r.dataId),s=this.readSync(i.dataId),u=Nt(r.shape,Kn(r.dtype,i.dtype)),l=this.readSync(u.dataId),c=0,f=n.rank===0||n.rank>1||r.rank===1?1:Ae(r.shape.slice(1)),h=0;h<o.length;h++)for(var d=0;d<f;d++)o[h]===1?l[c++]=a[h]:l[c++]=s[h];return u},e.prototype.where=function(n){se([n],"where");var r=this.readSync(n.dataId);return ST(n.shape,r)},e.prototype.topk=function(n,r,i){return se(n,"topk"),rW(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){se(n,"min"),ti("min",r,n.rank);for(var i=or(n.shape,r),o=i[0],a=i[1],s=Nt(o,n.dtype),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],p=0;p<u;++p){var m=c[h+p];m<d&&(d=m)}l[f]=d}return s},e.prototype.minimum=function(n,r){return se([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return Math.min(i,o)})},e.prototype.mod=function(n,r){return se([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){var a=i%o;return i<0&&o<0||i>=0&&o>=0?a:(a+o)%o})},e.prototype.max=function(n,r){se(n,"max"),ti("max",r,n.rank);for(var i=or(n.shape,r),o=i[0],a=i[1],s=Nt(o,n.dtype),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],p=0;p<u;++p){var m=c[h+p];m>d&&(d=m)}l[f]=d}return s},e.prototype.maximum=function(n,r){return se([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return Math.max(i,o)})},e.prototype.all=function(n,r){se(n,"all"),ti("all",r,n.rank);for(var i=or(n.shape,r),o=i[0],a=i[1],s=Nt(o,n.dtype),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],p=0;p<u;++p){var m=c[h+p];d=d&&m}l[f]=d}return s},e.prototype.any=function(n,r){se(n,"any"),ti("any",r,n.rank);for(var i=or(n.shape,r),o=i[0],a=i[1],s=Nt(o,n.dtype),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],p=0;p<u;++p){var m=c[h+p];d=d||m}l[f]=d}return s},e.prototype.squaredDifference=function(n,r){return se([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){var a=i-o;return a*a})},e.prototype.ceil=function(n){se(n,"ceil");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,n.shape,"float32")},e.prototype.floor=function(n){se(n,"floor");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,n.shape,"float32")},e.prototype.sign=function(n){se(n,"x");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?i[o]=-1:r[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,n.shape,"float32")},e.prototype.isNaN=function(n){se(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isInf=function(n){se(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isFinite=function(n){se(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.round=function(n){se(n,"round");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=Math.floor(r[o]);r[o]-a<.5?i[o]=Math.floor(r[o]):r[o]-a>.5?i[o]=Math.ceil(r[o]):i[o]=a%2==0?a:a+1}return this.makeOutput(i,n.shape,"float32")},e.prototype.exp=function(n){se(n,"exp");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,n.shape,"float32")},e.prototype.expm1=function(n){se(n,"expm1");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,n.shape,"float32")},e.prototype.log=function(n){se(n,"log");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log(a)}return this.makeOutput(i,n.shape,"float32")},e.prototype.log1p=function(n){se(n,"log1p");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log1p(a)}return this.makeOutput(i,n.shape,"float32")},e.prototype.sqrt=function(n){se(n,"sqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.sqrt(a)}return this.makeOutput(i,n.shape,"float32")},e.prototype.rsqrt=function(n){se(n,"rsqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=1/Math.sqrt(a)}return this.makeOutput(i,n.shape,"float32")},e.prototype.reciprocal=function(n){se(n,"reciprocal");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){se(n,"relu");for(var r=Nt(n.shape,n.dtype),i=this.readSync(r.dataId),o=this.readSync(n.dataId),a=0;a<o.length;++a)i[a]=Math.max(0,o[a]);return r},e.prototype.relu6=function(n){se(n,"relu");for(var r=Nt(n.shape,n.dtype),i=this.readSync(r.dataId),o=this.readSync(n.dataId),a=0;a<o.length;++a)i[a]=Math.min(Math.max(0,o[a]),6);return r},e.prototype.prelu=function(n,r){return se([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return i<0?o*i:i})},e.prototype.elu=function(n){se(n,"elu");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var a=i[o];r[o]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){se([n,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),a=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];i[s]=u>=1?a[s]:a[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},e.prototype.selu=function(n){se(n,"selu");for(var r=CT,i=AT,o=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(o,n.shape,"float32")},e.prototype.clip=function(n,r,i){se(n,"clip");for(var o=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>i?i:u<r?r:u}return this.makeOutput(o,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<n.size;++o){var a=i[2*o],s=i[2*o+1];r[o]=Math.hypot(a,s)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){se(n,"int");for(var r=new Int32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){se(n,"sigmoid");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){se(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var s=o[a]>-r,u=o[a]<r,l=Math.exp(o[a]),c=void 0;c=u?l:s?o[a]:Math.log(1+l),i[a]=c}return this.makeOutput(i,n.shape,"float32")},e.prototype.sin=function(n){se(n,"sin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){se(n,"cos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){se(n,"tan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){se(n,"asin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){se(n,"acos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){se(n,"atan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return se([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return Math.atan2(i,o)})},e.prototype.sinh=function(n){se(n,"sinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){se(n,"cosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){se(n,"tanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=sue(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){se(n,"asinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){se(n,"acosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){se(n,"atanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){se(n,"erf");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var a=Math.sign(i[o]),s=Math.abs(i[o]),u=1/(1+.3275911*s);r[o]=a*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),se(n,"step");for(var i=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var s=o[a];isNaN(s)?i[a]=NaN:i[a]=s>0?1:r}return this.makeOutput(i,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,o=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,i,o);return a&&(l=this.add(l,a)),s&&(l=B1(this,l,s,u)),l},e.prototype.conv2d=function(n,r,i){se([n,r],"conv2d");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.dataFormat==="channelsLast",h=Ue(i.outShape,n.dtype),d=n.strides[0],p=f?n.strides[1]:n.strides[2],m=f?n.strides[2]:1,v=f?1:n.strides[1],g=h.strides[0],y=f?h.strides[1]:h.strides[2],b=f?h.strides[2]:1,_=f?1:h.strides[1],x=this.readSync(n.dataId),S=this.readSync(r.dataId),E=h.values,C=0;C<i.batchSize;++C)for(var A=C*d,T=C*g,P=0;P<i.outHeight;++P)for(var k=T+P*y,I=P*i.strideHeight-c,$=0;$<o;$++){var B=I+$*s;if(!(B<0||B>=i.inHeight))for(var z=$*r.strides[0],U=A+B*p,M=0;M<i.outWidth;++M)for(var F=k+M*b,H=M*i.strideWidth-l,X=0;X<a;X++){var K=H+X*u;if(!(K<0||K>=i.inWidth))for(var Q=U+K*m,ae=z+X*r.strides[1],le=0;le<i.inChannels;++le){for(var ve=x[Q+le*v],de=0;de<i.outChannels;++de)E[F+de*_]+=ve*S[ae+de];ae+=i.outChannels}}}return h.toTensor()},e.prototype.conv3d=function(n,r,i){for(var o=i.filterDepth,a=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,c=i.dilationWidth,f=i.padInfo.front,h=i.padInfo.left,d=i.padInfo.top,p=Ue(i.outShape,n.dtype),m=this.readSync(n.dataId),v=this.readSync(r.dataId),g=p.values,y=0;y<i.batchSize;++y)for(var b=y*n.strides[0],_=y*p.strides[0],x=0;x<i.outDepth;++x)for(var S=_+x*p.strides[1],E=x*i.strideDepth-f,C=0;C<o;C++){var A=E+C*u;if(!(A<0||A>=i.inDepth))for(var T=C*r.strides[0],P=b+A*n.strides[1],k=0;k<i.outHeight;++k)for(var I=S+k*p.strides[2],$=k*i.strideHeight-d,B=0;B<a;B++){var z=$+B*l;if(!(z<0||z>=i.inHeight))for(var U=T+B*r.strides[1],M=P+z*n.strides[2],F=0;F<i.outWidth;++F)for(var H=I+F*i.outChannels,X=F*i.strideWidth-h,K=0;K<s;K++){var Q=X+K*c;if(!(Q<0||Q>=i.inWidth))for(var ae=U+K*r.strides[2],le=M+Q*i.inChannels,ve=ae,de=0;de<i.inChannels;++de){for(var Ce=m[le+de],ie=0;ie<i.outChannels;++ie)g[H+ie]+=Ce*v[ve+ie];ve+=i.outChannels}}}}return p.toTensor()},e.prototype.conv2dDerInput=function(n,r,i){se([n,r],"conv2dDerInput");for(var o=Ue(i.inShape,"float32"),a=o.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],f=l[1],h=l[2],d=i.batchSize,p=i.filterHeight,m=i.filterWidth,v=i.inChannels,g=i.inHeight,y=i.inWidth,b=i.outChannels,_=i.outHeight,x=i.outWidth,S=i.strideHeight,E=i.strideWidth,C=i.dataFormat,A=p-1-i.padInfo.top,T=m-1-i.padInfo.left,P=C==="channelsLast",k=o.strides[0],I=P?o.strides[1]:o.strides[2],$=P?o.strides[2]:1,B=P?1:o.strides[1],z=n.strides[0],U=P?n.strides[1]:n.strides[2],M=P?n.strides[2]:1,F=P?1:n.strides[1],H=0;H<d;++H)for(var X=0;X<v;++X)for(var K=0;K<g;++K)for(var Q=K-A,ae=Math.max(0,Math.ceil(Q/S)),le=Math.min(_,(p+Q)/S),ve=0;ve<y;++ve){for(var de=ve-T,Ce=Math.max(0,Math.ceil(de/E)),ie=Math.min(x,(m+de)/E),me=0,ce=ae;ce<le;++ce)for(var te=ce*S-Q,ye=Ce;ye<ie;++ye)for(var xe=z*H+U*ce+M*ye,De=c*(p-1-te)+f*(m-1-(ye*E-de))+h*X,Ie=0;Ie<b;++Ie)me+=s[xe+F*Ie]*u[De+Ie];a[k*H+I*K+$*ve+B*X]=me}return o.toTensor()},e.prototype.conv3dDerInput=function(n,r,i){for(var o=Ue(i.inShape,"float32"),a=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],f=s[3],h=this.readSync(n.dataId),d=n.strides,p=d[0],m=d[1],v=d[2],g=d[3],y=this.readSync(r.dataId),b=r.strides,_=b[0],x=b[1],S=b[2],E=b[3],C=i.batchSize,A=i.filterDepth,T=i.filterHeight,P=i.filterWidth,k=i.inChannels,I=i.inDepth,$=i.inHeight,B=i.inWidth,z=i.outChannels,U=i.outDepth,M=i.outHeight,F=i.outWidth,H=i.strideDepth,X=i.strideHeight,K=i.strideWidth,Q=A-1-i.padInfo.front,ae=T-1-i.padInfo.top,le=P-1-i.padInfo.left,ve=0;ve<C;++ve)for(var de=0;de<k;++de)for(var Ce=0;Ce<I;++Ce)for(var ie=Ce-Q,me=Math.max(0,Math.ceil(ie/H)),ce=Math.min(U,(A+ie)/H),te=0;te<$;++te)for(var ye=te-ae,xe=Math.max(0,Math.ceil(ye/X)),De=Math.min(M,(T+ye)/X),Ie=0;Ie<B;++Ie){for(var et=Ie-le,vt=Math.max(0,Math.ceil(et/K)),Be=Math.min(F,(P+et)/K),ut=0,gt=me;gt<ce;++gt)for(var en=gt*H-ie,jt=xe;jt<De;++jt)for(var Hr=jt*X-ye,on=vt;on<Be;++on)for(var dn=p*ve+m*gt+v*jt+g*on,Qn=_*(A-1-en)+x*(T-1-Hr)+S*(P-1-(on*K-et))+E*de,Zn=0;Zn<z;++Zn)ut+=h[dn+Zn]*y[Qn+Zn];a[u*ve+l*Ce+c*te+f*Ie+de]=ut}return o.toTensor()},e.prototype.conv2dDerFilter=function(n,r,i){se([n,r],"conv2dDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",c=Ue(i.filterShape,"float32"),f=i.padInfo.left,h=i.padInfo.top,d=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var v=Math.max(0,Math.ceil((h-m)/o)),g=Math.min(i.outHeight,(i.inHeight+h-m)/o),y=0;y<u;++y)for(var b=Math.max(0,Math.ceil((f-y)/a)),_=Math.min(i.outWidth,(i.inWidth+f-y)/a),x=0;x<i.inChannels;++x)for(var S=0;S<i.outChannels;++S){for(var E=0,C=0;C<i.batchSize;++C)for(var A=v;A<g;++A)for(var T=m+A*o-h,P=b;P<_;++P){var k=y+P*a-f;E+=l?d.get(C,T,k,x)*p.get(C,A,P,S):d.get(C,x,T,k)*p.get(C,S,A,P)}c.set(E,m,y,x,S)}return c.toTensor()},e.prototype.conv3dDerFilter=function(n,r,i){for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=Ue(i.filterShape,"float32"),h=f.values,d=f.strides,p=d[0],m=d[1],v=d[2],g=d[3],y=this.readSync(r.dataId),b=r.strides,_=b[0],x=b[1],S=b[2],E=b[3],C=this.readSync(n.dataId),A=n.strides,T=A[0],P=A[1],k=A[2],I=A[3],$=i.padInfo.front,B=i.padInfo.left,z=i.padInfo.top,U=0;U<u;++U)for(var M=Math.max(0,Math.ceil(($-U)/o)),F=Math.min(i.outDepth,(i.inDepth+$-U)/o),H=U*p,X=0;X<l;++X)for(var K=Math.max(0,Math.ceil((z-X)/a)),Q=Math.min(i.outHeight,(i.inHeight+z-X)/a),ae=X*m+H,le=0;le<c;++le)for(var ve=Math.max(0,Math.ceil((B-le)/s)),de=Math.min(i.outWidth,(i.inWidth+B-le)/s),Ce=le*v+ae,ie=0;ie<i.inChannels;++ie)for(var me=ie*g+Ce,ce=0;ce<i.outChannels;++ce){for(var te=0,ye=0;ye<i.batchSize;++ye)for(var xe=ye*T,De=ye*_,Ie=M;Ie<F;++Ie)for(var et=(U+Ie*o-$)*P+xe,vt=Ie*x+De,Be=K;Be<Q;++Be)for(var ut=(X+Be*a-z)*k+et,gt=Be*S+vt,en=ve;en<de;++en){var jt=en*E+gt;te+=C[(le+en*s-B)*I+ut+ie]*y[jt+ce]}h[me+ce]=te}return f.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,i=n.filter,o=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,i,o);return a&&(l=this.add(l,a)),s&&(l=B1(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(n,r,i){se([n,r],"depthwiseConv2D");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.outChannels/i.inChannels,h=Ue(i.outShape,n.dtype),d=this.readSync(n.dataId),p=this.readSync(r.dataId),m=h.values,v=0;v<i.batchSize;++v)for(var g=v*n.strides[0],y=v*h.strides[0],b=0;b<i.outHeight;++b)for(var _=y+b*h.strides[1],x=b*i.strideHeight-l,S=0;S<o;++S){var E=x+S*s;if(!(E<0||E>=i.inHeight))for(var C=S*r.strides[0],A=g+E*n.strides[1],T=0;T<i.outWidth;++T)for(var P=_+T*h.strides[2],k=T*i.strideWidth-c,I=0;I<a;++I){var $=k+I*u;if(!($<0||$>=i.inWidth))for(var B=C+I*r.strides[1],z=A+$*i.inChannels,U=P,M=B,F=0;F<i.inChannels;++F){for(var H=d[z+F],X=0;X<f;++X)m[U+X]+=H*p[M+X];U+=f,M+=f}}}return h.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,i){se([n,r],"depthwiseConv2DDerInput");for(var o=Ue(i.inShape,"float32"),a=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],f=this.readSync(n.dataId),h=n.strides,d=h[0],p=h[1],m=h[2],v=this.readSync(r.dataId),g=r.strides,y=g[0],b=g[1],_=g[2],x=i.batchSize,S=i.filterHeight,E=i.filterWidth,C=i.inChannels,A=i.inHeight,T=i.inWidth,P=i.outChannels,k=i.outHeight,I=i.outWidth,$=i.strideHeight,B=i.strideWidth,z=S-1-i.padInfo.top,U=E-1-i.padInfo.left,M=P/C,F=0;F<x;++F)for(var H=0;H<C;++H)for(var X=0;X<A;++X)for(var K=X-z,Q=Math.max(0,Math.ceil(K/$)),ae=Math.min(k,(S+K)/$),le=0;le<T;++le){for(var ve=le-U,de=Math.max(0,Math.ceil(ve/B)),Ce=Math.min(I,(E+ve)/B),ie=0,me=Q;me<ae;++me)for(var ce=me*$-K,te=de;te<Ce;++te)for(var ye=d*F+p*me+m*te,xe=y*(S-1-ce)+b*(E-1-(te*B-ve))+_*H,De=0;De<M;++De)ie+=f[ye+(H*M+De)]*v[xe+De];a[u*F+l*X+c*le+H]=ie}return o.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){se([n,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=Ue(i.filterShape,"float32"),c=i.padInfo.left,f=i.padInfo.top,h=i.outChannels/i.inChannels,d=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var v=Math.max(0,Math.ceil((f-m)/o)),g=Math.min(i.outHeight,(i.inHeight+f-m)/o),y=0;y<u;++y)for(var b=Math.max(0,Math.ceil((c-y)/a)),_=Math.min(i.outWidth,(i.inWidth+c-y)/a),x=0;x<i.outChannels;++x){for(var S=Math.trunc(x/h),E=x%h,C=0,A=0;A<i.batchSize;++A)for(var T=v;T<g;++T)for(var P=m+T*o-f,k=b;k<_;++k){var I=y+k*a-c;C+=d.get(A,P,I,S)*p.get(A,T,k,x)}l.set(C,m,y,S,E)}return l.toTensor()},e.prototype.tile=function(n,r){return se(n,"tile"),nW(this.bufferSync(n),r)},e.prototype.pad=function(n,r,i){se(n,"pad");var o=r.map(function(h,d){return h[0]+n.shape[d]+h[1]}),a=r.map(function(h){return h[0]}),s=this.bufferSync(n),u=Ue(o,n.dtype);i!==0&&u.values.fill(i);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),f=c.map(function(h,d){return h+a[d]});u.set.apply(u,[s.get.apply(s,c)].concat(f))}return u.toTensor()},e.prototype.transpose=function(n,r){se(n,"transpose");for(var i=new Array(n.rank),o=0;o<i.length;o++)i[o]=n.shape[r[o]];var a=this.readSync(n.dataId),s=Ue(i,n.dtype),u=this.bufferSync(n);for(o=0;o<n.size;++o){for(var l=u.indexToLoc(o),c=new Array(l.length),f=0;f<c.length;f++)c[f]=l[r[f]];var h=s.locToIndex(c);s.values[h]=a[o]}return s.toTensor()},e.prototype.gather=function(n,r,i){se([n,r],"gather");var o=n.shape.slice(),a=this.readSync(r.dataId);o[i]=a.length;for(var s=Ue(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),f=c.slice();f[i]=a[c[i]];var h=u.locToIndex(f);s.values[l]=u.values[h]}return s.toTensor()},e.prototype.batchToSpaceND=function(n,r,i){se([n],"batchToSpaceND");var o=r.reduce(function(f,h){return f*h}),a=Wy(n.shape,r,o),s=zy(a.length,r.length),u=Hy(n.shape,r,o),l=WV(i,r.length),c=zV(u,i,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){se([n],"spaceToBatchND");var o=r.reduce(function(h,d){return h*d}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=Wy(u.shape,r,o,!1),c=zy(l.length,r.length,!1),f=Hy(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.pool=function(n,r,i){se(n,"pool");for(var o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,d=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),m=Ue(r.outShape,n.dtype),v=m.values,g=r.outShape[1]*r.outShape[2]*r.outShape[3],y=r.outShape[2]*r.outShape[3],b=r.outShape[3],_=0;_<r.batchSize;++_)for(var x=_*g,S=_*n.strides[0],E=0;E<r.inChannels;++E)for(var C=0;C<r.outHeight;++C)for(var A=C*o-f,T=Math.max(0,A),P=Math.min(r.inHeight,l+A),k=x+C*y,I=0;I<r.outWidth;++I){for(var $=I*a-h,B=Math.max(0,$),z=Math.min(r.inWidth,c+$),U=d,M=0,F=0,H=T;H<P;H+=s){for(var X=S+H*n.strides[1],K=B;K<z;K+=u){var Q=p[X+K*n.strides[2]+E];i==="max"&&Q>U?U=Q:i==="avg"&&(M+=Q,F++)}if(isNaN(U))break}v[k+I*b+E]=i==="avg"?M/F:U}return m.toTensor()},e.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},e.prototype.maxPoolPositions=function(n,r){for(var i=Ue(r.outShape,"int32"),o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,d=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var m=0;m<r.inChannels;++m)for(var v=0;v<r.outHeight;++v){for(var g=v*o-f,y=g;y<0;)y+=s;for(var b=Math.min(r.inHeight,l+g),_=0;_<r.outWidth;++_){for(var x=_*a-h,S=x;S<0;)S+=u;for(var E=Math.min(r.inWidth,c+x),C=Number.NEGATIVE_INFINITY,A=-1,T=y;T<b;T+=s)for(var P=T-g,k=S;k<E;k+=u){var I=k-x,$=d.get(p,T,k,m);$>C&&(C=$,A=P*c+I)}i.set(A,p,v,_,m)}}return i.toTensor()},e.prototype.maxPoolBackprop=function(n,r,i,o){se([r,i],"maxPoolBackprop");for(var a=this.maxPoolPositions(r,o),s=o.strideHeight,u=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,f=o.effectiveFilterHeight,h=o.effectiveFilterWidth,d=h-1-o.padInfo.left,p=f-1-o.padInfo.top,m=Ue(r.shape,"float32"),v=this.bufferSync(a),g=this.bufferSync(n),y=0;y<o.batchSize;++y)for(var b=0;b<o.inChannels;++b)for(var _=0;_<o.inHeight;++_)for(var x=0;x<o.inWidth;++x){for(var S=_-p,E=x-d,C=0,A=0;A<f;A+=l){var T=(S+A)/s;if(!(T<0||T>=o.outHeight||Math.floor(T)!==T))for(var P=0;P<h;P+=c){var k=(E+P)/u;if(!(k<0||k>=o.outWidth||Math.floor(k)!==k)){var I=f*h-1-v.get(y,T,k,b)===A*h+P?1:0;I!==0&&(C+=g.get(y,T,k,b)*I)}}}m.set(C,y,_,x,b)}return m.toTensor()},e.prototype.avgPoolBackprop=function(n,r,i){se([n,r],"avgPoolBackprop");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=h-1-i.padInfo.left,p=f-1-i.padInfo.top,m=Ue(r.shape,"float32"),v=1/(s*u),g=this.bufferSync(n),y=0;y<i.batchSize;++y)for(var b=0;b<i.inChannels;++b)for(var _=0;_<i.inHeight;++_)for(var x=0;x<i.inWidth;++x){for(var S=_-p,E=x-d,C=0,A=0;A<f;A+=l){var T=(S+A)/o;if(!(T<0||T>=i.outHeight||Math.floor(T)!==T))for(var P=0;P<h;P+=c){var k=(E+P)/a;k<0||k>=i.outWidth||Math.floor(k)!==k||(C+=g.get(y,T,k,b))}}m.set(C*v,y,_,x,b)}return m.toTensor()},e.prototype.pool3d=function(n,r,i){se(n,"pool3d");for(var o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,v=r.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(n.dataId),b=Ue(r.outShape,n.dtype),_=b.values,x=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],C=r.outShape[4],A=0;A<r.batchSize;++A)for(var T=A*x,P=A*n.strides[0],k=0;k<r.inChannels;++k)for(var I=0;I<r.outDepth;++I){for(var $=I*o-p,B=$;B<0;)B+=u;for(var z=Math.min(r.inDepth,f+$),U=T+I*S,M=0;M<r.outHeight;++M){for(var F=M*a-m,H=F;H<0;)H+=l;for(var X=Math.min(r.inHeight,h+F),K=U+M*E,Q=0;Q<r.outWidth;++Q){for(var ae=Q*s-v,le=ae;le<0;)le+=c;for(var ve=Math.min(r.inWidth,d+ae),de=K+Q*C,Ce=g,ie=0,me=0,ce=B;ce<z;ce+=u){for(var te=P+ce*n.strides[1],ye=H;ye<X;ye+=l){for(var xe=te+ye*n.strides[2],De=le;De<ve;De+=c){var Ie=y[xe+De*n.strides[3]+k];if(i==="max"&&Ie>Ce?Ce=Ie:i==="avg"&&(ie+=Ie,me++),isNaN(Ce))break}if(isNaN(Ce))break}if(isNaN(Ce))break}_[de+k]=i==="avg"?ie/me:Ce}}}return b.toTensor()},e.prototype.avgPool3d=function(n,r){return se(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,i){se([n,r],"avgPool3dBackprop");for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=i.dilationDepth,h=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,m=i.effectiveFilterHeight,v=i.effectiveFilterWidth,g=p-1-i.padInfo.front,y=v-1-i.padInfo.left,b=m-1-i.padInfo.top,_=Ue(r.shape,"float32"),x=1/(u*l*c),S=this.bufferSync(n),E=0;E<i.batchSize;++E)for(var C=0;C<i.inChannels;++C)for(var A=0;A<i.inDepth;++A)for(var T=0;T<i.inHeight;++T)for(var P=0;P<i.inWidth;++P){for(var k=A-g,I=T-b,$=P-y,B=0,z=0;z<p;z+=f){var U=(k+z)/o;if(!(U<0||U>=i.outDepth||Math.floor(U)!==U))for(var M=0;M<m;M+=h){var F=(I+M)/a;if(!(F<0||F>=i.outHeight||Math.floor(F)!==F))for(var H=0;H<v;H+=d){var X=($+H)/s;X<0||X>=i.outWidth||Math.floor(X)!==X||(B+=S.get(E,U,F,X,C))}}}_.set(B*x,E,A,T,P,C)}return _.toTensor()},e.prototype.maxPool3d=function(n,r){return se(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var i=Ue(r.outShape,"int32"),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,v=r.padInfo.left,g=this.bufferSync(n),y=0;y<r.batchSize;++y)for(var b=0;b<r.inChannels;++b)for(var _=0;_<r.outDepth;++_){for(var x=_*o-p,S=x;S<0;)S+=u;for(var E=Math.min(r.inDepth,f+x),C=0;C<r.outHeight;++C){for(var A=C*a-m,T=A;T<0;)T+=l;for(var P=Math.min(r.inHeight,h+A),k=0;k<r.outWidth;++k){for(var I=k*s-v,$=I;$<0;)$+=c;for(var B=Math.min(r.inWidth,d+I),z=Number.NEGATIVE_INFINITY,U=-1,M=S;M<E;M+=u)for(var F=M-x,H=T;H<P;H+=l)for(var X=H-A,K=$;K<B;K+=c){var Q=K-I,ae=g.get(y,M,H,K,b);ae>=z&&(z=ae,U=F*h*d+X*h+Q)}i.set(U,y,_,C,k,b)}}}return i.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,i,o){se([r,i],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,o),s=o.strideDepth,u=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,f=o.dilationHeight,h=o.dilationWidth,d=o.effectiveFilterDepth,p=o.effectiveFilterHeight,m=o.effectiveFilterWidth,v=d-1-o.padInfo.front,g=m-1-o.padInfo.left,y=p-1-o.padInfo.top,b=Ue(r.shape,"float32"),_=this.bufferSync(a),x=this.bufferSync(n),S=0;S<o.batchSize;++S)for(var E=0;E<o.inChannels;++E)for(var C=0;C<o.inDepth;++C)for(var A=0;A<o.inHeight;++A)for(var T=0;T<o.inWidth;++T){for(var P=C-v,k=A-y,I=T-g,$=0,B=0;B<d;B+=c){var z=(P+B)/s;if(!(z<0||z>=o.outDepth||Math.floor(z)!==z))for(var U=0;U<p;U+=f){var M=(k+U)/u;if(!(M<0||M>=o.outHeight||Math.floor(M)!==M))for(var F=0;F<m;F+=h){var H=(I+F)/l;if(!(H<0||H>=o.outWidth||Math.floor(H)!==H)){var X=d*p*m-1-_.get(S,z,M,H,E)===B*p*m+U*m+F?1:0;X!==0&&($+=x.get(S,z,M,H,E)*X)}}}}b.set($,S,C,A,T,E)}return b.toTensor()},e.prototype.cast=function(n,r){return QV(n,r,this)},e.prototype.reshape=function(n,r){return TE(n,r)},e.prototype.avgPool=function(n,r){return se(n,"avgPool"),this.pool(n,r,"avg").toFloat()},e.prototype.resizeBilinear=function(n,r,i,o){se(n,"resizeBilinear");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],f=this.readSync(n.dataId),h=new Float32Array(Ae([s,r,i,c])),d=[o&&r>1?u-1:u,o&&i>1?l-1:l],p=[o&&r>1?r-1:r,o&&i>1?i-1:i],m=0,v=d[0]/p[0],g=d[1]/p[1],y=0;y<s;y++)for(var b=0;b<r;b++)for(var _=v*b,x=Math.floor(_),S=_-x,E=Math.min(u-1,Math.ceil(_)),C=y*n.strides[0]+x*n.strides[1],A=y*n.strides[0]+E*n.strides[1],T=0;T<i;T++)for(var P=g*T,k=Math.floor(P),I=P-k,$=Math.min(l-1,Math.ceil(P)),B=C+k*n.strides[2],z=A+k*n.strides[2],U=C+$*n.strides[2],M=A+$*n.strides[2],F=0;F<c;F++){var H=f[B+F],X=f[z+F],K=H+(f[U+F]-H)*I,Q=K+(X+(f[M+F]-X)*I-K)*S;h[m++]=Q}return Xn(h,[s,r,i,c])},e.prototype.resizeBilinearBackprop=function(n,r,i){se([n,r],"resizeBilinearBackprop");for(var o=r.shape,a=o[0],s=o[1],u=o[2],l=o[3],c=n.shape,f=c[1],h=c[2],d=new Float32Array(a*s*u*l),p=[i&&f>1?s-1:s,i&&h>1?u-1:u],m=[i&&f>1?f-1:f,i&&h>1?h-1:h],v=p[0]/m[0],g=p[1]/m[1],y=this.readSync(n.dataId),b=0,_=0;_<a;_++)for(var x=_*r.strides[0],S=0;S<f;S++)for(var E=S*v,C=Math.floor(E),A=Math.min(Math.ceil(E),s-1),T=x+C*r.strides[1],P=x+A*r.strides[1],k=E-C,I=1-k,$=0;$<h;$++)for(var B=$*g,z=Math.floor(B),U=Math.min(Math.ceil(B),u-1),M=B-z,F=1-M,H=T+z*r.strides[2],X=T+U*r.strides[2],K=P+z*r.strides[2],Q=P+U*r.strides[2],ae=I*F,le=I*M,ve=k*F,de=k*M,Ce=0;Ce<l;Ce++){var ie=y[b++];d[H+Ce]+=ie*ae,d[X+Ce]+=ie*le,d[K+Ce]+=ie*ve,d[Q+Ce]+=ie*de}return kr(d,[a,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,i,o){se(n,"resizeNearestNeighbor");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],f=this.readSync(n.dataId),h=new Float32Array(s*r*i*c),d=[o&&r>1?u-1:u,o&&i>1?l-1:l],p=[o&&r>1?r-1:r,o&&i>1?i-1:i],m=d[0]/p[0],v=d[1]/p[1],g=0,y=0;y<s;y++)for(var b=y*n.strides[0],_=0;_<r;_++)for(var x=m*_,S=b+Math.min(u-1,o?Math.round(x):Math.floor(x))*n.strides[1],E=0;E<i;E++)for(var C=v*E,A=S+Math.min(l-1,o?Math.round(C):Math.floor(C))*n.strides[2],T=0;T<c;T++){var P=f[A+T];h[g++]=P}return Xn(h,[s,r,i,c],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){se([n,r],"resizeNearestNeighborBackprop");for(var o=r.shape,a=o[0],s=o[1],u=o[2],l=o[3],c=n.shape,f=c[1],h=c[2],d=new Float32Array(a*s*u*l),p=this.readSync(n.dataId),m=[i&&f>1?s-1:s,i&&h>1?u-1:u],v=[i&&f>1?f-1:f,i&&h>1?h-1:h],g=m[0]/v[0],y=m[1]/v[1],b=1/g,_=1/y,x=2*Math.ceil(b)+2,S=2*Math.ceil(_)+2,E=0;E<a;E++)for(var C=E*r.strides[0],A=0;A<s;A++)for(var T=C+A*r.strides[1],P=Math.floor(A*b),k=Math.floor(P-x/2),I=0;I<u;I++)for(var $=T+I*r.strides[2],B=Math.floor(I*_),z=Math.floor(B-S/2),U=0;U<l;U++){for(var M=0,F=0;F<x;F++){var H=F+k;if(!(H<0||H>=f)){var X=C+H*n.strides[1],K=H*g;if(A===Math.min(s-1,i?Math.round(K):Math.floor(K)))for(var Q=0;Q<S;Q++){var ae=Q+z;if(!(ae<0||ae>=h)){var le=X+ae*n.strides[2],ve=ae*y;I===Math.min(u-1,i?Math.round(ve):Math.floor(ve))&&(M+=p[le+U])}}}}d[$+U]=M}return kr(d,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,i,o,a,s){se([n,r,i,a,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(i.dataId),f=a?this.readSync(a.dataId):new Float32Array([1]),h=s?this.readSync(s.dataId):new Float32Array([0]),d=new Float32Array(u.length),p=h.length,m=f.length,v=c.length,g=l.length,y=0,b=0,_=0,x=0,S=0;S<u.length;++S)d[S]=h[y++]+(u[S]-l[b++])*f[_++]/Math.sqrt(c[x++]+o),y>=p&&(y=0),b>=g&&(b=0),_>=m&&(_=0),x>=v&&(x=0);return kr(d,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,i,o,a){se(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,f=new Float32Array(c);function h(v){for(var g=v%s,y=v-g+Math.max(0,g-r),b=v-g+Math.min(g+r,u),_=0;y<=b;y++){var x=l[y];_+=x*x}return _}for(var d=0;d<c;d++){var p=h(d),m=l[d]*Math.pow(i+o*p,-a);f[d]=m}return kr(f,n.shape)},e.prototype.LRNGrad=function(n,r,i,o,a,s,u){se(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),f=this.readSync(r.dataId),h=this.readSync(i.dataId),d=new Float32Array(n.size),p=n.size,m=0;m<p;m++){for(var v=m%l,g=m-v+Math.max(0,v-o),y=m-v+Math.min(l,v+o+1),b=0,_=g;_<y;_++)b+=Math.pow(f[_],2);for(b=s*b+a,_=g;_<y;_++){var x=-2*s*u*f[_]*h[m]/b;m===_&&(x+=Math.pow(b,-u)),x*=c[m],d[_]+=x}}return kr(d,n.shape)},e.prototype.multinomial=function(n,r,i,o){se(n,"multinomial");for(var a=r?n:Ga(n),s=a.shape[0],u=a.shape[1],l=Nt([s,i],"int32"),c=this.readSync(l.dataId),f=this.readSync(a.dataId),h=0;h<s;++h){var d=h*u,p=new Float32Array(u-1);p[0]=f[d];for(var m=1;m<p.length;++m)p[m]=p[m-1]+f[d+m];for(var v=Vb(o.toString()),g=h*i,y=0;y<i;++y){var b=v();c[g+y]=p.length;for(var _=0;_<p.length;_++)if(b<p[_]){c[g+y]=_;break}}}return l},e.prototype.oneHot=function(n,r,i,o){se(n,"oneHot");var a=new Float32Array(n.size*r);a.fill(o);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(a[u*r+s[u]]=i);return qs(a,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,i,o,a){return se(n,"nonMaxSuppression"),xT(this.readSync(n.dataId),this.readSync(r.dataId),i,o,a)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var i=n.shape[0],o=n.shape[1],a=Ue(n.shape,"float32"),s=Ue(n.shape,"float32"),u=Ti(n).as2D(i,o),l=Bo(n).as2D(i,o),c=0;c<i;c++)for(var f=u.slice([c,0],[1,o]),h=l.slice([c,0],[1,o]),d=Gn(f,h),p=this.readSync(this.fftImpl(d,r).dataId),m=0;m<o;m++){var v=bD(p,m);a.values[c*o+m]=v.real,s.values[c*o+m]=v.imag}return Gn(a.toTensor(),s.toTensor()).as2D(i,o)},e.prototype.fftImpl=function(n,r){var i=n.as1D(),o=i.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(i,o,r).as2D(n.shape[0],n.shape[1]);return r&&(a=Gn(Ti(a).div(pe(o)),Bo(a).div(pe(o)))),a}var s=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),f=new Float32Array(l.length/2),h=0;h<l.length;h+=2)c[h/2]=l[h],f[h/2]=l[h+1];return{real:c,imag:f}}(this.fourierTransformByMatmul(s,o,r));return Gn(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,i){if(r===1)return n;var o=this.readSync(n.dataId),a=r/2,s=function(g){for(var y=Math.ceil(g.length/4),b=new Float32Array(y),_=new Float32Array(y),x=0;x<g.length;x+=4)b[Math.floor(x/4)]=g[x],_[Math.floor(x/4)]=g[x+1];return{real:b,imag:_}}(o),u=Gn(s.real,s.imag).as1D(),l=function(g){for(var y=Math.floor(g.length/4),b=new Float32Array(y),_=new Float32Array(y),x=2;x<g.length;x+=4)b[Math.floor(x/4)]=g[x],_[Math.floor(x/4)]=g[x+1];return{real:b,imag:_}}(o),c=Gn(l.real,l.imag).as1D();u=this.fftRadix2(u,a,i),c=this.fftRadix2(c,a,i);var f=function(g,y){for(var b=new Float32Array(g/2),_=new Float32Array(g/2),x=0;x<Math.ceil(g/2);x++){var S=(y?2:-2)*Math.PI*(x/g);b[x]=Math.cos(S),_[x]=Math.sin(S)}return{real:b,imag:_}}(r,i),h=Gn(f.real,f.imag).mul(c),d=u.add(h),p=u.sub(h),m=Ti(d).concat(Ti(p)),v=Bo(d).concat(Bo(p));return Gn(m,v).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,i){for(var o=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,u=0,l=0;l<r;l++){var c=Ble(a*l,r,i),f=bD(n,l);s+=f.real*c.real-f.imag*c.imag,u+=f.real*c.imag+f.imag*c.real}i&&(s/=r,u/=r),Fle(o,s,u,a)}return o},e.prototype.depthToSpace=function(n,r,i){V(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),V(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=n.shape[0],a=n.shape[1],s=n.shape[2],u=n.shape[3],l=a*r,c=s*r,f=u/(r*r),h=this.readSync(n.dataId),d=new Float32Array(o*l*c*f),p=0,m=0;m<o;++m)for(var v=0;v<l;++v)for(var g=Math.floor(v/r),y=v%r,b=0;b<c;++b)for(var _=Math.floor(b/r),x=(y*r+b%r)*f,S=0;S<f;++S){var E=S+x+u*(_+s*(g+a*m));d[p++]=h[E]}return kr(d,[o,l,c,f])},e.prototype.broadcastedBinaryOp=function(n,r,i,o){var a=Ye(n.shape,r.shape),s=Ue(a,i),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Ds(n.shape,a),f=Ds(r.shape,a),h=s.values;if(c.length+f.length===0)for(var d=0;d<h.length;++d)h[d]=o(u[d%u.length],l[d%l.length]);else{var p=this.bufferSync(n),m=this.bufferSync(r),v=function(g){var y=s.indexToLoc(g),b=y.slice(-n.rank);c.forEach(function(E){return b[E]=0});var _=p.locToIndex(b),x=y.slice(-r.rank);f.forEach(function(E){return x[E]=0});var S=m.locToIndex(x);h[g]=o(u[_],l[S])};for(d=0;d<h.length;++d)v(d)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,i){var o=Ye(n.shape,r.shape),a=Ue(o,"float32"),s=Ue(o,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Ds(n.shape,o),f=Ds(r.shape,o),h=a.values,d=s.values;if(c.length+f.length===0)for(var p=0;p<h.length;p++){var m=p%u.length,v=p%l.length,g=i(u[2*m],u[2*m+1],l[2*v],l[2*v+1]);h[p]=g.real,d[p]=g.imag}else{var y=this.bufferSync(this.data.get(n.dataId).complexTensors.real),b=this.bufferSync(this.data.get(r.dataId).complexTensors.real),_=function(x){var S=a.indexToLoc(x),E=S.slice(-n.rank);c.forEach(function(k){return E[k]=0});var C=y.locToIndex(E),A=S.slice(-r.rank);f.forEach(function(k){return A[k]=0});var T=b.locToIndex(A),P=i(u[2*C],u[2*C+1],l[2*T],l[2*T+1]);h[x]=P.real,d[x]=P.imag};for(p=0;p<h.length;p++)_(p)}return this.complex(a.toTensor(),s.toTensor())},e.prototype.split=function(n,r,i){return tW(n,r,i)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,i,o,a,s){for(var u=n.shape,l=u[0],c=u[1],f=u[2],h=u[3],d=r.shape[0],p=o[0],m=o[1],v=Ue([d,p,m,h],"float32"),g=this.readSync(r.dataId),y=this.readSync(i.dataId),b=this.readSync(n.dataId),_=n.strides,x=v.strides,S=0;S<d;S++){var E=4*S,C=g[E],A=g[E+1],T=g[E+2],P=g[E+3],k=y[S];if(!(k>=l))for(var I=p>1?(T-C)*(c-1)/(p-1):0,$=m>1?(P-A)*(f-1)/(m-1):0,B=0;B<p;B++){var z=p>1?C*(c-1)+B*I:.5*(C+T)*(c-1);if(z<0||z>c-1)for(var U=0;U<m;U++)for(var M=0;M<h;M++){var F=M+U*x[2]+B*x[1]+S*x[0];v.values[F]=s}else if(a==="bilinear"){var H=Math.floor(z),X=Math.ceil(z),K=z-H;for(U=0;U<m;U++)if((ce=m>1?A*(f-1)+U*$:.5*(A+P)*(f-1))<0||ce>f-1)for(M=0;M<h;M++)F=M+U*x[2]+B*x[1]+S*x[0],v.values[F]=s;else{var Q=Math.floor(ce),ae=Math.ceil(ce),le=ce-Q;for(M=0;M<h;M++){var ve=b[F=M+Q*_[2]+H*_[1]+k*_[0]],de=b[F=M+ae*_[2]+H*_[1]+k*_[0]],Ce=b[F=M+Q*_[2]+X*_[1]+k*_[0]],ie=ve+(de-ve)*le,me=Ce+(b[F=M+ae*_[2]+X*_[1]+k*_[0]]-Ce)*le;F=M+U*x[2]+B*x[1]+S*x[0],v.values[F]=ie+(me-ie)*K}}}else for(U=0;U<m;++U){var ce;if((ce=m>1?A*(f-1)+U*$:.5*(A+P)*(f-1))<0||ce>f-1)for(M=0;M<h;M++)F=M+U*x[2]+B*x[1]+S*x[0],v.values[F]=s;else{var te=Math.round(ce),ye=Math.round(z);for(M=0;M<h;M++){var xe=M+te*_[2]+ye*_[1]+k*_[0],De=M+U*x[2]+B*x[1]+S*x[0];v.values[De]=b[xe]}}}}}return v.toTensor()},e.prototype.sparseToDense=function(n,r,i,o){var a=qy(0,n,i),s=a.sliceRank,u=a.numUpdates,l=a.sliceSize,c=a.strides,f=a.outputSize;return this.scatter(n,r,i,f,l,u,s,c,o,!1)},e.prototype.gatherND=function(n,r){var i=r.shape,o=i[i.length-1],a=HV(n,r),s=a[0],u=a[1],l=a[2],c=a[3];if(u===0)return Xn([],s,n.dtype);for(var f=new Rp([u,l],n.dtype),h=this.readSync(r.dataId),d=this.readSync(n.dataId),p=0;p<u;p++){for(var m=[],v=0,g=0;g<o;g++){var y=h[p*o+g];v+=y*c[g],m.push(y)}if(v<0||v>=n.size/l)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var b=0;b<l;b++)f.values[p*l+b]=d[v*l+b]}return f.toTensor().reshape(s)},e.prototype.scatterND=function(n,r,i){var o=qy(0,n,i),a=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,f=pe(0);return this.scatter(n,r,i,c,u,s,a,l,f,!0)},e.prototype.fill=function(n,r,i){var o=$y(i=i||$m(r),Ae(n));return o.fill(r),G.makeTensor(o,n,i,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=$y(n.dtype,Ae(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,i){return ZV(n,r,i)},e.prototype.scatter=function(n,r,i,o,a,s,u,l,c,f){var h=[o/a,a],d=this.readSync(n.dataId),p=this.readSync(r.dataId);if(o===0)return Xn([],i,r.dtype);var m=new Rp(h,r.dtype);m.values.fill(this.readSync(c.dataId)[0]);for(var v=0;v<s;v++){for(var g=[],y=0,b=0;b<u;b++){var _=d[v*u+b];g.push(_),y+=_*l[b]}if(y<0||y>=o/a)throw new Error("Invalid indices: "+g+" does not index into "+i);for(var x=0;x<a;x++)f?m.values[y*a+x]+=p[v*a+x]:m.values[y*a+x]=r.rank===0?p[0]:p[v*a+x]}return m.toTensor().reshape(i)},e}(YV);G.registerBackend("cpu",function(){return new ape},1);for(var U1=0,UD=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e,o=i.boxes,a=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=n;se(o,"NonMaxSuppressionWithScore");var d=_T(h.data.get(o.dataId).values,h.data.get(a.dataId).values,u,l,c,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n;se(r,"square");for(var o=i.data.get(r.dataId).values,a=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];a[s]=u*u}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Mp,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,o=r.b,a=n;se([i,o],Mp);var s=a.data.get(i.dataId).values,u=a.data.get(o.dataId).values,l=function(h,d,p,m,v,g){var y=Ye(h,d),b=y.length,_=Jo(y),x=Ip(v,Ae(y)),S=h.length,E=d.length,C=Jo(h),A=Jo(d),T=Ds(h,y),P=Ds(d,y);if(T.length+P.length===0)for(var k=0;k<x.length;++k)x[k]=g(p[k%p.length],m[k%m.length]);else{var I=function($){var B=vue($,b,_),z=B.slice(-S);T.forEach(function(H){return z[H]=0});var U=cD(z,S,C),M=B.slice(-E);P.forEach(function(H){return M[H]=0});var F=cD(M,E,A);x[$]=g(p[U],m[F])};for(k=0;k<x.length;++k)I(k)}return[x,y]}(i.shape,o.shape,s,u,i.dtype,function(h,d){var p=h-d;return p*p}),c=l[0],f=l[1];return{dataId:a.write(c,f,i.dtype),shape:f,dtype:i.dtype}}}];U1<UD.length;U1++)EV(UD[U1]);var ic,spe=function(t){this.variableNames=["A"];var e=lr(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},upe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=lr(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var V1=0,VD=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.pixels,o=r.numChannels,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=u[0],c=u[1],f=[c,l],h=[c,l,o];(s||a)&&(ic==null&&(ic=document.createElement("canvas").getContext("2d")),ic.canvas.width=l,ic.canvas.height=c,ic.drawImage(i,0,0,l,c),i=ic.canvas);var d=n.makeTensorInfo(f,"int32");n.texData.get(d.dataId).usage=si.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);var p=ne().getBool("WEBGL_PACK")?new upe(h):new spe(h),m=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;By("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e,o=i.boxes,a=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=n,d=_T(h.readSync(o.dataId),h.readSync(a.dataId),u,l,c,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n,o=new He(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Mp,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,o=r.b,a=n,s=ne().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ma("return (a - b) * (a - b);",i.shape,o.shape):new Xt("return (a - b) * (a - b);",i.shape,o.shape);return a.compileAndRun(s,[i,o])}}];V1<VD.length;V1++)EV(VD[V1]);for(var W1=0,WD=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:Mp,gradFunc:function(t,e){var n=e[0],r=e[1],i=pe(2);return{a:function(){return dr(t,dr(i,Pn(n,r)))},b:function(){return dr(t,dr(i,Pn(r,n)))}}}}];W1<WD.length;W1++)oue(WD[W1]);var lpe=function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t}();ne().get("IS_BROWSER")&&ne().setPlatform("browser",new lpe);var z1,cpe=function(){return require("node-fetch")},fpe=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return ne().global.fetch!=null?ne().global.fetch(e,n):(z1==null&&(z1=cpe()),z1(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t}();ne().get("IS_NODE")&&ne().setPlatform("node",new fpe);var kE={float32:4,int32:4,uint16:2,uint8:1,bool:1},Zy=4;function GW(t,e){for(var n={},r=0,i=function(s){var u=s.name,l=s.dtype,c=s.shape,f=Ae(c),h=void 0;if("quantization"in s){var d=s.quantization;if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+d.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=kE[d.dtype],m=t.slice(r,r+f*p),v=d.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(l==="float32")h=Float32Array.from(v,function(S){return S*d.scale+d.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=Int32Array.from(v,function(S){return Math.round(S*d.scale+d.min)})}r+=f*p}else if(l==="string"){var g=Ae(s.shape);h=[];for(var y=0;y<g;y++){var b=new Uint32Array(t.slice(r,r+Zy))[0];r+=Zy;var _=new Uint8Array(t.slice(r,r+b));h.push(_),r+=b}}else{var x=kE[l];if(m=t.slice(r,r+f*x),l==="float32")h=new Float32Array(m);else if(l==="int32")h=new Int32Array(m);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=new Uint8Array(m)}r+=f*x}n[u]=Xn(h,c,l)},o=0,a=e;o<a.length;o++)i(a[o]);return n}function hpe(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(o){if(e+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var IE=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function zD(t){return IE?Buffer.byteLength(t):new Blob([t]).size}function UT(t){var e=0;t.forEach(function(i){e+=i.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function HD(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Wm(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:zD(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:zD(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var ui=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var a=o(e,r);a!==null&&i.push(a)}),i},t}(),rf="://",Gs=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){V(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(rf)&&(e=e.slice(0,e.indexOf(rf))),V(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();V(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function Bg(t){if(t.indexOf(rf)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Gs.getSchemes().join(","));return{scheme:t.split(rf)[0],path:t.split(rf)[1]}}function qD(t,e,n){return n===void 0&&(n=!1),Se(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,f;return Ee(this,function(h){switch(h.label){case 0:return V(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),V((r=ui.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),V(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],V((o=ui.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),V(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),a=o[0],s=Bg(t).scheme,u=Bg(t).path,l=s===Bg(t).scheme,[4,i.load()];case 1:return c=h.sent(),n&&l?[4,Gs.getManager(s).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,a.save(c)];case 4:return f=h.sent(),!n||l?[3,6]:[4,Gs.getManager(s).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var nl="models_store",Ms="model_info_store";function KW(){if(!ne().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function RE(t){var e=t.result;e.createObjectStore(nl,{keyPath:"modelPath"}),e.createObjectStore(Ms,{keyPath:"modelPath"})}var of=function(){function t(e){if(this.indexedDB=KW(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return Se(this,void 0,void 0,function(){return Ee(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(i,o){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return RE(a)},a.onsuccess=function(){var s=a.result;if(n==null){var u=s.transaction(nl,"readonly"),l=u.objectStore(nl).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(m){return s.close(),o(l.error)},u.oncomplete=function(){return s.close()}}else{var c,f=Wm(n),h=s.transaction(Ms,"readwrite"),d=h.objectStore(Ms),p=d.put({modelPath:r.modelPath,modelArtifactsInfo:f});p.onsuccess=function(){var m=(c=s.transaction(nl,"readwrite")).objectStore(nl).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});m.onsuccess=function(){return i({modelArtifactsInfo:f})},m.onerror=function(v){var g=(d=h.objectStore(Ms)).delete(r.modelPath);g.onsuccess=function(){return s.close(),o(m.error)},g.onerror=function(y){return s.close(),o(m.error)}}},p.onerror=function(m){return s.close(),o(p.error)},h.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return o(a.error)}})},t.URL_SCHEME="indexeddb://",t}(),GD=function(t){return ne().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(of.URL_SCHEME)?(e=t.slice(of.URL_SCHEME.length),new of(e)):null;var e};ui.registerSaveRouter(GD),ui.registerLoadRouter(GD);var dpe=function(){function t(){this.indexedDB=KW()}return t.prototype.listModels=function(){return Se(this,void 0,void 0,function(){var e=this;return Ee(this,function(n){return[2,new Promise(function(r,i){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return RE(o)},o.onsuccess=function(){var a=o.result,s=a.transaction(Ms,"readonly"),u=s.objectStore(Ms).getAll();u.onsuccess=function(){for(var l={},c=0,f=u.result;c<f.length;c++){var h=f[c];l[h.modelPath]=h.modelArtifactsInfo}r(l)},u.onerror=function(l){return a.close(),i(u.error)},s.oncomplete=function(){return a.close()}},o.onerror=function(a){return i(o.error)}})]})})},t.prototype.removeModel=function(e){return Se(this,void 0,void 0,function(){var n=this;return Ee(this,function(r){var i;return e=(i=e).startsWith(of.URL_SCHEME)?i.slice(of.URL_SCHEME.length):i,[2,new Promise(function(o,a){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return RE(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(Ms,"readwrite"),f=c.objectStore(Ms),h=f.get(e);h.onsuccess=function(){if(h.result==null)return l.close(),a(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var d=f.delete(e),p=function(){var m=(u=l.transaction(nl,"readwrite")).objectStore(nl).delete(e);m.onsuccess=function(){return o(h.result.modelArtifactsInfo)},m.onerror=function(v){return a(h.error)}};d.onsuccess=p,d.onerror=function(m){return p(),l.close(),a(h.error)}},h.onerror=function(d){return l.close(),a(h.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return a(s.error)}})]})})},t}();if(ne().getBool("IS_BROWSER"))try{Gs.registerManager(of.URL_SCHEME,new dpe)}catch{}var _a="/",mc="tensorflowjs_models",XW="info",ppe="model_topology",mpe="weight_specs",vpe="weight_data",gpe="model_metadata";function YW(t){return{info:[mc,t,XW].join(_a),topology:[mc,t,ppe].join(_a),weightSpecs:[mc,t,mpe].join(_a),weightData:[mc,t,vpe].join(_a),modelMetadata:[mc,t,gpe].join(_a)}}function ype(t){var e=t.split(_a);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(_a)}var af=function(){function t(e){if(!ne().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=YW(this.modelPath)}return t.prototype.save=function(e){return Se(this,void 0,void 0,function(){var n,r,i;return Ee(this,function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=Wm(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(a){if(IE)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return Se(this,void 0,void 0,function(){var e,n,r,i,o,a,s;return Ee(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(o),n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,n.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(IE){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var f=atob(l),h=new Uint8Array(f.length),d=0;d<f.length;++d)h.set([f.charCodeAt(d)],d);return h.buffer}(s),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),KD=function(t){return ne().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(af.URL_SCHEME)?(e=t.slice(af.URL_SCHEME.length),new af(e)):null;var e};ui.registerSaveRouter(KD),ui.registerLoadRouter(KD);var bpe=function(){function t(){V(ne().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),V(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return Se(this,void 0,void 0,function(){var e,n,r,i,o,a;return Ee(this,function(s){for(e={},n=mc+_a,r=_a+XW,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(n)&&o.endsWith(r)&&(a=ype(o),e[a]=JSON.parse(this.LS.getItem(o)));return[2,e]})})},t.prototype.removeModel=function(e){return Se(this,void 0,void 0,function(){var n,r;return Ee(this,function(i){var o;if(e=(o=e).startsWith(af.URL_SCHEME)?o.slice(af.URL_SCHEME.length):o,n=YW(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(ne().getBool("IS_BROWSER"))try{Gs.registerManager(af.URL_SCHEME,new bpe)}catch{}var wpe="model",xpe=".json",_pe=".weights.bin";function XD(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var H1=function(){function t(e){if(!ne().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=wpe),this.modelTopologyFileName=e+xpe,this.weightDataFileName=e+_pe}return t.prototype.save=function(e){return Se(this,void 0,void 0,function(){var n,r,i,o,a,s;return Ee(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,XD(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,XD(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Wm(e)}]}})})},t.URL_SCHEME="downloads://",t}(),Spe=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return Se(this,void 0,void 0,function(){var e,n,r=this;return Ee(this,function(i){return e=this.files[0],n=this.files.slice(1),[2,new Promise(function(o,a){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&o({modelTopology:c});var f=l.weightsManifest;if(f!=null){var h;try{h=r.checkManifestAndWeightFiles(f,n)}catch(v){return void a(v)}var d=[],p=[],m=[];f.forEach(function(v){v.paths.forEach(function(g){p.push(g),m.push(null)}),d.push.apply(d,v.weights)}),f.forEach(function(v){v.paths.forEach(function(g){var y=new FileReader;y.onload=function(b){var _=b.target.result,x=p.indexOf(g);m[x]=_,m.indexOf(null)===-1&&o({modelTopology:c,weightSpecs:d,weightData:UT(m),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},y.onerror=function(b){return a("Failed to weights data from file of path '"+g+"'.")},y.readAsArrayBuffer(h[g])})})}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)})]})})},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],i=n.map(function(u){return HD(u.name)}),o={},a=0,s=e;a<s.length;a++)s[a].paths.forEach(function(u){var l=HD(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");o[u]=n[i.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return o},t}();function YD(t,e,n,r){(function(o){V(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,a){V(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),V(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),V(a>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+a})}(n=n??0,r=r??1);var i=0;return Promise.all(t.map(function(o){return o.then(function(a){var s=n+ ++i/t.length*(r-n);return e(s),a}),o}))}function JW(t,e){return Se(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c;return Ee(this,function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?ne().platform.fetch:e.fetchFunc,r=t.map(function(h){return n(h,e.requestInit,{isBinary:!0})}),i=0,o=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=f.sent(),[3,4];case 2:return[4,YD(r,e.onProgress,i,o)];case 3:a=f.sent(),f.label=4;case 4:return s=a.map(function(h){return h.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,YD(s,e.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}})})}function JD(t){var e=this;return function(n,r,i){return r===void 0&&(r=""),Se(e,void 0,void 0,function(){var o,a,s,u,l,c,f,h,d,p;return Ee(this,function(m){switch(m.label){case 0:if(o=n.map(function(){return!1}),a={},s=i!=null?i.map(function(){return!1}):[],u=[],n.forEach(function(v,g){var y=0;v.weights.forEach(function(b){var _="quantization"in b?b.quantization.dtype:b.dtype,x=kE[_]*Ae(b.shape),S=function(){o[g]=!0,a[g]==null&&(a[g]=[]),a[g].push({manifestEntry:b,groupOffset:y,sizeBytes:x})};i!=null?i.forEach(function(E,C){E===b.name&&(S(),s[C]=!0)}):S(),u.push(b.name),y+=x})}),!s.every(function(v){return v}))throw l=i.filter(function(v,g){return!s[g]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=o.reduce(function(v,g,y){return g&&v.push(y),v},[]),f=[],c.forEach(function(v){n[v].paths.forEach(function(g){var y=r+(r.endsWith("/")?"":"/")+g;f.push(y)})}),[4,t(f)];case 1:return h=m.sent(),d={},p=0,c.forEach(function(v){for(var g=n[v].paths.length,y=0,b=0;b<g;b++)y+=h[p+b].byteLength;for(var _=new ArrayBuffer(y),x=new Uint8Array(_),S=0,E=0;E<g;E++){var C=new Uint8Array(h[p+E]);x.set(C,S),S+=C.byteLength}a[v].forEach(function(A){var T=GW(_.slice(A.groupOffset,A.groupOffset+A.sizeBytes),[A.manifestEntry]);for(var P in T)d[P]=T[P]}),p+=g}),[2,d]}})})}}ui.registerSaveRouter(function(t){return ne().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(H1.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new H1(e)}(t.slice(H1.URL_SCHEME.length)):null});var QW=function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(V(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=ne().platform.fetch,V(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&V(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return Se(this,void 0,void 0,function(){var n,r,i,o;return Ee(this,function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:Wm(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return Se(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,l,c,f,h;return Ee(this,function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return n=d.sent(),[3,5];case 4:throw d.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=n.modelTopology,o=n.weightsManifest,a=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:h=d.sent(),c=h[0],f=h[1],d.label=7;case 7:return[2,{modelTopology:i,weightSpecs:c,weightData:f,userDefinedMetadata:l,generatedBy:a,convertedBy:s,format:u}]}})})},t.prototype.loadWeights=function(e){return Se(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c,f,h;return Ee(this,function(d){switch(d.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var m=p.lastIndexOf("/"),v=p.lastIndexOf("?"),g=p.substring(0,m),y=v>m?p.substring(v):"";return[g+"/",y]}(n),i=r[0],o=r[1],a=this.weightPathPrefix||i,s=[],u=0,l=e;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return f=[],e.forEach(function(p){p.paths.forEach(function(m){f.push(a+m+o)})}),[4,JW(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=d.sent(),[2,[s,UT(h)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function NE(t){return t.match(QW.URL_SCHEME_REGEX)!=null}var QD=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return NE(n)}):NE(t))?DE(t,{onProgress:e}):null};function DE(t,e){return new QW(t,e)}ui.registerSaveRouter(QD),ui.registerLoadRouter(QD);var q1=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(e){return[2,this.modelArtifacts]})})},t}(),Epe=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return Se(this,void 0,void 0,function(){return Ee(this,function(n){return[2,this.saveHandler(e)]})})},t}(),ZW=Object.freeze({browserFiles:function(t){return new Spe(t)},browserHTTPRequest:function(t,e){return DE(t,e)},concatenateArrayBuffers:UT,decodeWeights:GW,encodeWeights:function(t,e){return Se(this,void 0,void 0,function(){var n,r,i,o,a,s=this;return Ee(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),o=function(l){var c=i[l],f=Array.isArray(t)?t[l].tensor:t[c];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+f.dtype);var h={name:c,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var d=new Promise(function(p){return Se(s,void 0,void 0,function(){var m,v,g,y,b,_,x;return Ee(this,function(S){switch(S.label){case 0:return[4,f.bytes()];case 1:for(m=S.sent(),v=m.reduce(function(E,C){return E+C.length},0)+Zy*m.length,g=new Uint8Array(v),y=0,b=0;b<m.length;b++)_=m[b],x=new Uint8Array(new Uint32Array([_.length]).buffer),g.set(x,y),y+=Zy,g.set(_,y),y+=_.length;return p(g),[2]}})})});r.push(d)}else r.push(f.data());e!=null&&(h.group=e),n.push(h)},a=0;a<i.length;++a)o(a);return[4,Promise.all(r)];case 1:return[2,{data:hpe(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new q1(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new q1({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new q1({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return ui.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:Wm,getSaveHandlers:function(t){return ui.getSaveHandlers(t)},http:DE,isHTTPScheme:NE,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),Se(this,void 0,void 0,function(){return Ee(this,function(i){return[2,JD(function(o){return JW(o,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return ui.registerLoadRouter(t)},registerSaveRouter:function(t){return ui.registerSaveRouter(t)},weightsLoaderFactory:JD,withSaveHandler:function(t){return new Epe(t)},copyModel:function(t,e){return Se(this,void 0,void 0,function(){return Ee(this,function(n){return[2,qD(t,e,!1)]})})},listModels:function(){return Se(this,void 0,void 0,function(){var t,e,n,r,i,o,a;return Ee(this,function(s){switch(s.label){case 0:t=Gs.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(i=r[n],[4,Gs.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())e[i+rf+a]=o[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return Se(this,void 0,void 0,function(){return Ee(this,function(n){return[2,qD(t,e,!0)]})})},removeModel:function(t){return Se(this,void 0,void 0,function(){var e;return Ee(this,function(n){return e=Bg(t),[2,Gs.getManager(e.scheme).removeModel(e.path)]})})}}),oc;q({confusionMatrix_:function(t,e,n){var r=j(t,"labels","confusionMatrix"),i=j(e,"predictions","confusionMatrix");V(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),V(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),V(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),V(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),V(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var o=CE(r.asType("int32"),n),a=CE(i.asType("int32"),n);return o.transpose().matMul(a).asType("int32")}});var Cpe=q({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);a=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(SV("FromPixels",G.backendName)!=null)return G.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=l[0],f=l[1];if(a?s=t.getContext("2d").getImageData(0,0,c,f).data:r||n?s=t.data:(o||i)&&(oc==null&&(oc=document.createElement("canvas").getContext("2d")),oc.canvas.width=c,oc.canvas.height=f,oc.drawImage(t,0,0,c,f),s=oc.getImageData(0,0,c,f).data),e===4)u=new Int32Array(s);else{var h=c*f;u=new Int32Array(h*e);for(var d=0;d<h;d++)for(var p=0;p<e;++p)u[d*e+p]=s[4*d+p]}return vT(u,[f,c,e],"int32")}}),VT=Object.freeze({toPixels:function(t,e){return Se(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c,f,h,d,p,m,v,g,y,b,_,x,S,E,C;return Ee(this,function(A){switch(A.label){case 0:if(n=j(t,"img","toPixels"),t instanceof Wt||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],o=r[1],(a=n.rank===2?1:n.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=A.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=A.sent(),f=c[0],h=c[1],d=f[0],p=h[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(d<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(d<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+p+"].")}for(m=n.dtype==="float32"?255:1,v=new Uint8ClampedArray(o*i*4),g=0;g<i*o;++g)y=void 0,b=void 0,_=void 0,x=void 0,a===1?(y=s[g]*m,b=s[g]*m,_=s[g]*m,x=255):a===3?(y=s[3*g]*m,b=s[3*g+1]*m,_=s[3*g+2]*m,x=255):a===4&&(y=s[4*g]*m,b=s[4*g+1]*m,_=s[4*g+2]*m,x=s[4*g+3]*m),v[(S=4*g)+0]=Math.round(y),v[S+1]=Math.round(b),v[S+2]=Math.round(_),v[S+3]=Math.round(x);return e!=null&&(e.width=o,e.height=i,E=e.getContext("2d"),C=new ImageData(v,o,i),E.putImageData(C,0,0)),n!==t&&n.dispose(),[2,v]}})})},fromPixels:Cpe}),Ape=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t}(),Tpe=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function Bl(t){V(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),V(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),V(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Tpe.register(t)}var Ul=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return wo(e,t),e.prototype.minimize=function(n,r,i){r===void 0&&(r=!1);var o=this.computeGradients(n,i),a=o.value,s=o.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return Fr(s),r?a:(a.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return jle(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&Fr(this.iterations_)},e.prototype.saveIterations=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:pe(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(n){return Se(this,void 0,void 0,function(){return Ee(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(n){return Se(this,void 0,void 0,function(){var r;return Ee(this,function(i){switch(i.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,n.slice(1)]}})})},e}(Ape);Object.defineProperty(Ul,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var Ppe=function(t){function e(n,r,i){i===void 0&&(i=null);var o=t.call(this)||this;return o.learningRate=n,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=G.backend.epsilon()),o}return wo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=G.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:ge(function(){return Ze(a).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:ge(function(){return Ze(a).variable(!1)})});var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[o].variable,l=r.accumulatedUpdates[o].variable;ge(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),h=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(c),l.assign(h);var d=f.mul(-r.learningRate).add(a);a.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Fr(this.accumulatedGrads.map(function(n){return n.variable})),Fr(this.accumulatedUpdates.map(function(n){return n.variable})))},e.prototype.getWeights=function(){return Se(this,void 0,void 0,function(){var n;return Ee(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Se(this,void 0,void 0,function(){var r;return Ee(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(Ul);Bl(Ppe);var Ope=function(t){function e(n,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=n,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return wo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=G.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:ge(function(){return Qo(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[o].variable;ge(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(G.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&Fr(this.accumulatedGrads.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return Se(this,void 0,void 0,function(){return Ee(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(Ul);Bl(Ope);var kpe=function(t){function e(n,r,i,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=i,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],ge(function(){a.accBeta1=pe(r).variable(),a.accBeta2=pe(i).variable()}),o==null&&(a.epsilon=G.backend.epsilon()),a}return wo(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n);ge(function(){var o=Pn(1,r.accBeta1),a=Pn(1,r.accBeta2);i.forEach(function(s,u){var l=G.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:ge(function(){return Ze(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:ge(function(){return Ze(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,h=r.accumulatedSecondMoment[u].variable,d=f.mul(r.beta1).add(c.mul(1-r.beta1)),p=h.mul(r.beta2).add(c.square().mul(1-r.beta2)),m=d.div(o),v=p.div(a);f.assign(d),h.assign(p);var g=m.div(v.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(g)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Fr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Fr(this.accumulatedSecondMoment.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Se(this,void 0,void 0,function(){var n;return Ee(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Se(this,void 0,void 0,function(){var r,i=this;return Ee(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),ge(function(){i.accBeta1.assign(Jy(i.beta1,i.iterations_+1)),i.accBeta2.assign(Jy(i.beta2,i.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(Ul);Bl(kpe);var Ipe=function(t){function e(n,r,i,o,a){o===void 0&&(o=null),a===void 0&&(a=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=i,s.epsilon=o,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],ge(function(){s.iteration=pe(0).variable(),s.accBeta1=pe(r).variable()}),o==null&&(s.epsilon=G.backend.epsilon()),s}return wo(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n);ge(function(){var o=Pn(1,r.accBeta1),a=so(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=G.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Ze(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Ze(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,h=r.accumulatedWeightedInfNorm[u].variable,d=f.mul(r.beta1).add(c.mul(1-r.beta1)),p=h.mul(r.beta2),m=c.abs(),v=p.maximum(m);f.assign(d),h.assign(v);var g=a.div(o).mul(d.div(v.add(r.epsilon))).add(l);l.assign(g)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Fr(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Fr(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(n){return Se(this,void 0,void 0,function(){return Ee(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(Ul);Bl(Ipe);var e6=function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return wo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=Array.isArray(n)?n[o].tensor:n[i];if(a!=null){var s=G.registeredVariables[i];ge(function(){var u=r.c.mul(a).add(s);s.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=Jue(pe(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},e.prototype.setWeights=function(n){return Se(this,void 0,void 0,function(){return Ee(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e}(Ul);Bl(e6);var Rpe=function(t){function e(n,r,i){i===void 0&&(i=!1);var o=t.call(this,n)||this;return o.learningRate=n,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=pe(o.momentum),o}return wo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=G.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:ge(function(){return Ze(a).variable(!1)})});var s=r.accumulations[o].variable,u=Array.isArray(n)?n[o].tensor:n[i];u!=null&&ge(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Fr(this.accumulations.map(function(n){return n.variable}))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return Se(this,void 0,void 0,function(){return Ee(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return Se(this,void 0,void 0,function(){return Ee(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(e6);Bl(Rpe);var Npe=function(t){function e(n,r,i,o,a){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),a===void 0&&(a=!1);var s=t.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=i,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,o==null&&(s.epsilon=G.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return wo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=G.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:ge(function(){return Ze(a).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:ge(function(){return Ze(a).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:ge(function(){return Ze(a).variable(!1)})});var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var u=r.accumulatedMeanSquares[o].variable,l=r.accumulatedMoments[o].variable;ge(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[o].variable,h=f.mul(r.decay).add(s.mul(1-r.decay)),d=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(h.square().add(r.epsilon)).sqrt()));u.assign(c),f.assign(h),l.assign(d);var p=a.sub(d);a.assign(p)}else{var m=u.mul(r.decay).add(s.square().mul(1-r.decay));d=l.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),u.assign(m),l.assign(d),p=a.sub(d),a.assign(p)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Fr(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Fr(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Fr(this.accumulatedMoments.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Se(this,void 0,void 0,function(){var n;return Ee(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Se(this,void 0,void 0,function(){var r;return Ee(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(Ul);Bl(Npe);Wt.prototype.squaredDifference=function(t){return mW(this,t)},ee=ope;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ME=function(t,e){return ME=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ME(t,e)};function Fe(t,e){ME(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sr=function(){return sr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},sr.apply(this,arguments)};function Pe(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(f){a(f)}}function u(c){try{l(r.throw(c))}catch(f){a(f)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,[])).next())})}function Oe(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Hd(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var sf=function(){function t(e,n){if(!yl(e)||!yl(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function Yb(t,e){return t instanceof Wt&&t.shape.length===e}function Dpe(t){return Yb(t,2)}function Jb(t){return Yb(t,3)}function Ks(t){return Yb(t,4)}function Mpe(t){return t%1!==0}function ZD(t){return t%2===0}function $pe(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function eM(t){return t&&t.width&&t.height}function jpe(t,e){var n=t.width,r=t.height,i=e/Math.max(r,n);return new sf(Math.round(n*i),Math.round(r*i))}function WT(t){return t.reduce(function(e,n){return e.add(n)},new st(0,0)).div(new st(t.length,t.length))}function $p(t,e,n){return Array(t).fill(0).map(function(r,i){return e+i*n})}function yl(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function tM(t){return yl(t)&&0<=t&&t<=1}var st=function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),su=function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},i=[r.left,r.top,r.right,r.bottom].every(yl),o=[r.x,r.y,r.width,r.height].every(yl);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],l=a[2],c=a[3];t.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(yl)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new st(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new st(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new st(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new st(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),n=e[0],r=e[1],i=e[2],o=e[3];return new t({x:n,y:r,width:i,height:o})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),n=e[0],r=e[1],i=e[2],o=e[3];return new t({x:n,y:r,width:i,height:o})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,i=e.width,o=e.height,a=Math.abs(i-o);return i<o&&(n-=a/2,i+=a),o<i&&(r-=a/2,o+=a),new t({x:n,y:r,width:i,height:o})},t.prototype.rescale=function(e){var n=eM(e)?e.width:e,r=eM(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],i=r[0],o=r[1],a=r[2],s=r[3];return new t({x:i,y:o,width:a,height:s})},t.prototype.clipAtImageBorders=function(e,n){var r=this,i=r.x,o=r.y,a=r.right,s=r.bottom,u=Math.max(i,0),l=Math.max(o,0),c=a-u,f=s-l,h=Math.min(c,e-u),d=Math.min(f,n-l);return new t({x:u,y:l,width:h,height:d}).floor()},t.prototype.shift=function(e,n){var r=this,i=r.width,o=r.height,a=this.x+e,s=this.y+n;return new t({x:a,y:s,width:i,height:o})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,i=this.height+1,o=1,a=1,s=r,u=i,l=this.left,c=this.top,f=this.right,h=this.bottom;return f>n&&(s=-f+n+r,f=n),h>e&&(u=-h+e+i,h=e),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:a,edy:u,dx:o,edx:s,y:c,ey:h,x:l,ex:f,w:r,h:i}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),Qb=function(t){Fe(e,t);function e(n,r,i,o,a){return a===void 0&&(a=!1),t.call(this,{left:n,top:r,right:i,bottom:o},a)||this}return e}(su),t6=function(){function t(e,n,r,i,o){this._imageDims=new sf(o.width,o.height),this._score=e,this._classScore=n,this._className=r,this._box=new su(i).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new su(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),la=function(t){Fe(e,t);function e(n,r,i){return t.call(this,n,n,"",r,i)||this}return e.prototype.forSize=function(n,r){var i=t.prototype.forSize.call(this,n,r),o=i.score,a=i.relativeBox,s=i.imageDims;return new e(o,a,s)},e}(t6);function Lpe(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),i=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),o=r*i;return n?o/(t.area+e.area-o):o/Math.min(t.area,e.area)}function Fpe(t){var e=t.map(function(s){return s.x}),n=t.map(function(s){return s.y}),r=e.reduce(function(s,u){return u<s?u:s},1/0),i=n.reduce(function(s,u){return u<s?u:s},1/0),o=e.reduce(function(s,u){return s<u?u:s},0),a=n.reduce(function(s,u){return s<u?u:s},0);return new Qb(r,i,o,a)}function jp(t,e,n,r){r===void 0&&(r=!0);for(var i=e.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),o=[],a=function(){var s=i.pop();o.push(s);for(var u=i,l=[],c=0;c<u.length;c++){var f=u[c],h=t[s],d=t[f];l.push(Lpe(h,d,r))}i=i.filter(function(p,m){return l[m]<=n})};i.length>0;)a();return o}function zm(t,e){return ge(function(){var n=e[0],r=e[1],i=e[2],o=Qo(Hd(t.shape.slice(0,3),[1]),n),a=Qo(Hd(t.shape.slice(0,3),[1]),r),s=Qo(Hd(t.shape.slice(0,3),[1]),i),u=Cn([o,a,s],3);return Pn(t,u)})}function Bpe(t,e){return e===void 0&&(e=!1),ge(function(){var n=t.shape.slice(1),r=n[0],i=n[1];if(r===i)return t;var o=Math.abs(r-i),a=Math.round(o*(e?.5:1)),s=r>i?2:1,u=function(d){var p=t.shape.slice();return p[s]=d,Qo(p,0)},l=u(a),c=o-l.shape[s],f=e&&c?u(c):null,h=[f,t,l].filter(function(d){return!!d}).map(function(d){return d.toFloat()});return Cn(h,s)})}function G1(t){return 1/(1+Math.exp(-t))}var zT=function(t){Fe(e,t);function e(n,r,i,o,a){return a===void 0&&(a=!1),t.call(this,{x:n,y:r,width:i,height:o},a)||this}return e}(su),Upe=.5,Vpe=.43,Wpe=.45,e0=function(){function t(e,n,r){r===void 0&&(r=new st(0,0));var i=n.width,o=n.height;this._imgDims=new sf(i,o),this._shift=r,this._positions=e.map(function(a){return a.mul(new st(i,o)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new st(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new st(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new st(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof la?e.box.floor():new su(e);return this.shiftBy(r.x,r.y).align(null,n)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),o=i.useDlibAlignment,a=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(a)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],i=e[2],o=function(f){return i.sub(f).magnitude()},a=(o(n)+o(r))/2,s=Math.floor(a/Wpe),u=WT(e),l=Math.floor(Math.max(0,u.x-Upe*s)),c=Math.floor(Math.max(0,u.y-Vpe*s));return new zT(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},t.prototype.alignMinBbox=function(e){var n=Fpe(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),zpe=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],WT([n[3],n[4]])]},e}(e0),Hpe=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(WT)},e}(e0),nM=function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+$pe(this.distance)+")":"")},t}(),rM=function(t){Fe(e,t);function e(n,r){var i=t.call(this,n)||this;return i._label=r,i}return e.assertIsValidLabeledBox=function(n,r){if(su.assertIsValidBox(n,r),!yl(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(su),eg=function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(r){return new Float32Array(r)});return new t(e.label,n)},t}();(function(t){Fe(e,t);function e(n,r,i,o){var a=t.call(this,n,r)||this;return a._score=i,a._classScore=o,a}return e.assertIsValidPredictedBox=function(n,r){if(rM.assertIsValidLabeledBox(n,r),!tM(n.score)||!tM(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(rM);function qpe(t){return t.detection instanceof la}function HT(t,e){var n={detection:e};return Object.assign({},t,n)}function n6(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function r6(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(i,o){t.readFile(r,function(a,s){return a?o(a):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function i6(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=r6();return sr({Canvas:t||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:e||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:n,createImageElement:r,fetch:i},o)}function o6(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function a6(){return typeof global=="object"&&typeof require=="function"&&typeof C9<"u"&&typeof process<"u"&&!!process.version}var bn;function Gpe(){if(!bn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return bn}function $E(t){bn=t}function qT(){o6()&&$E(n6()),a6()&&$E(i6())}function Kpe(t){if(bn||qT(),!bn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?bn.Canvas:e,r=t.Image,i=r===void 0?bn.Image:r;bn.Canvas=n,bn.Image=i,bn.createCanvasElement=t.createCanvasElement||function(){return new n},bn.createImageElement=t.createImageElement||function(){return new i},bn.ImageData=t.ImageData||bn.ImageData,bn.Video=t.Video||bn.Video,bn.fetch=t.fetch||bn.fetch,bn.readFile=t.readFile||bn.readFile}var mr={getEnv:Gpe,setEnv:$E,initialize:qT,createBrowserEnv:n6,createFileSystem:r6,createNodejsEnv:i6,monkeyPatch:Kpe,isBrowser:o6,isNodejs:a6};qT();function s6(t){return!mr.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function Ol(t){var e=mr.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var i=s6(t);if(!(i instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var iM;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(iM||(iM={}));function u6(t){var e=mr.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function Xpe(t){return new Promise(function(e,n){if(t instanceof mr.getEnv().Canvas||u6(t))return e();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),e(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),n(o))}t.addEventListener("load",r),t.addEventListener("error",i)})}function l6(t){var e=mr.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new sf(t.naturalWidth,t.naturalHeight):t instanceof r?new sf(t.videoWidth,t.videoHeight):new sf(t.width,t.height)}function Zb(t){var e=t.width,n=t.height,r=mr.getEnv().createCanvasElement,i=r();return i.width=e,i.height=n,i}function GT(t,e){var n=mr.getEnv().ImageData;if(!(t instanceof n)&&!u6(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=l6(t),i=r.width,o=r.height,a=Zb({width:i,height:o});return t instanceof n?Ol(a).putImageData(t,0,0):Ol(a).drawImage(t,0,0,i,o),a}function Ype(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,o,a,s;return Oe(this,function(u){switch(u.label){case 0:return n=mr.getEnv().createCanvasElement(),r=t.shape.slice(Ks(t)?1:0),i=r[0],o=r[1],a=r[2],s=ge(function(){return t.as3D(i,o,a).toInt()}),[4,VT.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function oM(t){var e=mr.getEnv(),n=e.Image,r=e.Canvas,i=e.Video;return t instanceof n||t instanceof r||t instanceof i}function Jpe(t,e,n){n===void 0&&(n=!1);var r=mr.getEnv(),i=r.Image,o=r.Canvas;if(!(t instanceof i||t instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=l6(t),s=e/Math.max(a.height,a.width),u=s*a.width,l=s*a.height,c=Zb({width:e,height:e}),f=t instanceof o?t:GT(t),h=Math.abs(u-l)/2,d=n&&u<l?h:0,p=n&&l<u?h:0;return Ol(c).drawImage(f,d,p,u,l),c}var t0=function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(i,o){if(Jb(i)){r._imageTensors[o]=i,r._inputDimensions[o]=i.shape;return}if(Ks(i)){var a=i.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");r._imageTensors[o]=i,r._inputDimensions[o]=i.shape.slice(1);return}var s=i instanceof mr.getEnv().Canvas?i:GT(i);r._canvases[o]=s,r._inputDimensions[o]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return $p(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return jpe({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,ge(function(){var i=$p(r.batchSize,0,1).map(function(a){var s=r.getInput(a);if(s instanceof Wt){var u=Ks(s)?s:s.expandDims();return u=Bpe(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=$T.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(s instanceof mr.getEnv().Canvas)return VT.fromPixels(Jpe(s,e,n));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),o=hi(i.map(function(a){return a.toFloat()})).as4D(r.batchSize,e,e,3);return o})},t}();function Bn(t){return Pe(this,void 0,void 0,function(){var e,n,r;return Oe(this,function(i){switch(i.label){case 0:if(t instanceof t0)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(o){return Array.isArray(t)?" at input index "+o+":":""},r=e.map(s6),r.forEach(function(o,a){if(!oM(o)&&!Jb(o)&&!Ks(o))throw typeof e[a]=="string"?new Error("toNetInput -"+n(a)+" string passed, but could not resolve HTMLElement for element id "+e[a]):new Error("toNetInput -"+n(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Ks(o)){var s=o.shape[0];if(s!==1)throw new Error("toNetInput -"+n(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return oM(o)&&Xpe(o)}))];case 1:return i.sent(),[2,new t0(r,Array.isArray(t))]}})})}function KT(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,o,a,s,u;return Oe(this,function(l){switch(l.label){case 0:return n=mr.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,Bn(t)];case 1:if(i=l.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=i.getInput(0),o instanceof n?(a=o,[3,4]):[3,2];case 2:return[4,Ype(o)];case 3:a=l.sent(),l.label=4;case 4:r=a,l.label=5;case 5:return s=Ol(r),u=e.map(function(c){return c instanceof la?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var f=c.x,h=c.y,d=c.width,p=c.height,m=Zb({width:d,height:p});return Ol(m).putImageData(s.getImageData(f,h,d,p),0,0),m})]}})})}function XT(t,e){return Pe(this,void 0,void 0,function(){return Oe(this,function(n){if(!Jb(t)&&!Ks(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Ks(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,ge(function(){var r=t.shape.slice(Ks(t)?1:0),i=r[0],o=r[1],a=r[2],s=e.map(function(l){return l instanceof la?l.forSize(o,i).box:l}).map(function(l){return l.clipAtImageBorders(o,i)}),u=s.map(function(l){var c=l.x,f=l.y,h=l.width,d=l.height;return $W(t.as3D(i,o,a),[f,c,0],[d,h,a])});return u})]})})}function Qpe(t,e){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return n=mr.getEnv().fetch,[4,n(t,e)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Zpe(t){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){switch(e.label){case 0:return[4,Qpe(t)];case 1:return[2,e.sent().json()]}})})}function c6(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var i=t.split("/").filter(function(s){return s}),o=t.endsWith(".json")?i[i.length-1]:n,a=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return a=t.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+o:a+"/"+o}}function eme(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,o;return Oe(this,function(a){switch(a.label){case 0:return n=c6(t,e),r=n.manifestUri,i=n.modelBaseUri,[4,Zpe(r)];case 1:return o=a.sent(),[2,ZW.loadWeights(o,i)]}})})}var Xa=function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;return r[i]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),i=r.obj,o=r.objProp;i[o].dispose(),i[o]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof Nf})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof Nf)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,i=n.tensor;e.reassignParamFromPath(r,i.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,i=n.tensor,o=Xn(i.dataSync());i.dispose(),e.reassignParamFromPath(r,o)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return Pe(this,void 0,void 0,function(){var n;return Oe(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,eme(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return Pe(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c,f;return Oe(this,function(h){switch(h.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=mr.getEnv().readFile,r=c6(e,this.getDefaultModelName()),i=r.manifestUri,o=r.modelBaseUri,a=function(d){return Promise.all(d.map(function(p){return n(p).then(function(m){return m.buffer})}))},s=ZW.weightsLoaderFactory(a),c=(l=JSON).parse,[4,n(i)];case 1:return u=c.apply(l,[h.sent().toString()]),[4,s(u,o)];case 2:return f=h.sent(),this.loadFromWeightMap(f),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(o,a){if(!o.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+e);return{obj:o.nextObj,objProp:a,nextObj:o.nextObj[a]}},{nextObj:this.params}),r=n.obj,i=n.objProp;if(!r||!i||!(r[i]instanceof Wt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:i}},t}();function li(t,e,n){return ge(function(){var r=IT(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=Ke(r,e.bias),r})}function K1(t,e,n){return n===void 0&&(n=!1),ge(function(){var r=Ht(n?Ke(Fi(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):li(t,e.conv0,[2,2])),i=li(r,e.conv1,[1,1]),o=Ht(Ke(r,i)),a=li(o,e.conv2,[1,1]);return Ht(Ke(r,Ke(i,a)))})}function tg(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),ge(function(){var i=Ht(n?Ke(Fi(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):li(t,e.conv0,r?[2,2]:[1,1])),o=li(i,e.conv1,[1,1]),a=Ht(Ke(i,o)),s=li(a,e.conv2,[1,1]),u=Ht(Ke(i,Ke(o,s))),l=li(u,e.conv3,[1,1]);return Ht(Ke(i,Ke(o,Ke(s,l))))})}function po(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),ge(function(){var i=Ke(Fi(t,e.filters,[1,1],n),e.bias);return r?Ht(i):i})}function Ya(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function ew(t,e){return function(n,r,i,o){var a=kr(t(n*r*i*i),[i,i,n,r]),s=cn(t(r));return e.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}}function YT(t,e){return function(n,r,i){var o=qs(t(n*r),[n,r]),a=cn(t(r));return e.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:a}}}var f6=function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t}();function JT(t,e){return function(n,r,i){var o=kr(t(9*n),[3,3,n,1]),a=kr(t(n*r),[1,1,n,r]),s=cn(t(r));return e.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new f6(o,a,s)}}function QT(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),i=t(e+"/bias",1);return new f6(n,r,i)}}function mu(t,e){return function(n,r,i){var o=t[n];if(!Yb(o,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+o);return e.push({originalPath:n,paramPath:i||n}),o}}function Ja(t){var e=t;function n(i){var o=e.slice(0,i);return e=e.slice(i),o}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function h6(t,e){var n=ew(t,e),r=JT(t,e);function i(a,s,u,l){l===void 0&&(l=!1);var c=l?n(a,s,3,u+"/conv0"):r(a,s,u+"/conv0"),f=r(s,s,u+"/conv1"),h=r(s,s,u+"/conv2");return{conv0:c,conv1:f,conv2:h}}function o(a,s,u,l){l===void 0&&(l=!1);var c=i(a,s,u,l),f=c.conv0,h=c.conv1,d=c.conv2,p=r(s,s,u+"/conv3");return{conv0:f,conv1:h,conv2:d,conv3:p}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function tme(t){var e=[],n=Ja(t),r=n.extractWeights,i=n.getRemainingWeights,o=h6(r,e).extractDenseBlock4Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2"),l=o(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:a,dense1:s,dense2:u,dense3:l}}}function d6(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function p6(t,e){var n=mu(t,e),r=d6(n),i=QT(n);function o(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2");return{conv0:l,conv1:c,conv2:f}}function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2"),h=i(s+"/conv3");return{conv0:l,conv1:c,conv2:f,conv3:h}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function nme(t){var e=[],n=p6(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Ya(t,e),{params:r,paramMappings:e}}var m6=function(t){Fe(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return ge(function(){var i=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=zm(i,o).div(pe(255)),s=tg(a,r.dense0,!0);return s=tg(s,r.dense1),s=tg(s,r.dense2),s=tg(s,r.dense3),s=Vm(s,[7,7],[2,2],"valid"),s})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Bn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return nme(n)},e.prototype.extractParams=function(n){return tme(n)},e}(Xa);function Wo(t,e){return ge(function(){return Ke(Gb(t,e.weights),e.bias)})}function rme(t,e,n){var r=[],i=Ja(t),o=i.extractWeights,a=i.getRemainingWeights,s=YT(o,r),u=s(e,n,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:u}}}function ime(t){var e=[],n=mu(t,e);function r(o){var a=n(o+"/weights",2),s=n(o+"/bias",1);return{weights:a,bias:s}}var i={fc:r("fc")};return Ya(t,e),{params:i,paramMappings:e}}function v6(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=r.startsWith("fc")?n:e;i[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var g6=function(t){Fe(e,t);function e(n,r){var i=t.call(this,n)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return ge(function(){var o=n instanceof t0?r.faceFeatureExtractor.forwardInput(n):n;return Wo(o.as2D(o.shape[0],-1),i.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},e.prototype.extractClassifierParams=function(n){return rme(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=v6(n),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),ime(o)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*r+i,a=n.slice(0,n.length-o),s=n.slice(n.length-o);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},e}(Xa),aM=["neutral","happy","sad","angry","fearful","disgusted","surprised"],ome=function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);aM.forEach(function(r,i){n[r]=e[i]})}return t.prototype.asSortedArray=function(){var e=this;return aM.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t}(),ame=function(t){Fe(e,t);function e(n){return n===void 0&&(n=new m6),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return ge(function(){return Ga(r.runNet(n))})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Bn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictExpressions=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,a,s=this;return Oe(this,function(u){switch(u.label){case 0:return[4,Bn(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(An(i).map(function(l){return Pe(s,void 0,void 0,function(){var c;return Oe(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return c=f.sent(),l.dispose(),[2,c]}})})}))];case 3:return o=u.sent(),i.dispose(),a=o.map(function(l){return new ome(l)}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(g6);function y6(t,e){var n={expressions:e};return Object.assign({},t,n)}function sme(t){return qpe(t)&&t.landmarks instanceof e0&&t.unshiftedLandmarks instanceof e0&&t.alignedRect instanceof la}function ZT(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),i=r.align(),o=t.detection.imageDims,a=new la(t.detection.score,i.rescale(o.reverse()),o),s={landmarks:r,unshiftedLandmarks:e,alignedRect:a};return Object.assign({},t,s)}function ume(t,e){var n=ew(t,e),r=JT(t,e);function i(a,s,u){var l=r(a,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),f=n(a,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:f}}function o(a,s){var u=r(a,a,s+"/separable_conv0"),l=r(a,a,s+"/separable_conv1"),c=r(a,a,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:o}}function lme(t,e){var n=[],r=Ja(t),i=r.extractWeights,o=r.getRemainingWeights,a=ume(i,n),s=a.extractConvParams,u=a.extractSeparableConvParams,l=a.extractReductionBlockParams,c=a.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),h=l(32,64,"entry_flow/reduction_block_0"),d=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:f,reduction_block_0:h,reduction_block_1:d},m={};$p(e,0,1).forEach(function(b){m["main_block_"+b]=c(128,"middle_flow/main_block_"+b)});var v=l(128,256,"exit_flow/reduction_block"),g=u(256,512,"exit_flow/separable_conv"),y={reduction_block:v,separable_conv:g};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:m,exit_flow:y}}}function cme(t,e){var n=mu(t,e),r=d6(n),i=QT(n);function o(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function a(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=i(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:a}}function fme(t,e){var n=[],r=cme(t,n),i=r.extractConvParams,o=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=i("entry_flow/conv_in"),l=a("entry_flow/reduction_block_0"),c=a("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:c},h={};$p(e,0,1).forEach(function(v){h["main_block_"+v]=s("middle_flow/main_block_"+v)});var d=a("exit_flow/reduction_block"),p=o("exit_flow/separable_conv"),m={reduction_block:d,separable_conv:p};return Ya(t,n),{params:{entry_flow:f,middle_flow:h,exit_flow:m},paramMappings:n}}function b6(t,e,n){return Ke(Fi(t,e.filters,n,"same"),e.bias)}function X1(t,e,n){n===void 0&&(n=!0);var r=n?Ht(t):t;return r=li(r,e.separable_conv0,[1,1]),r=li(Ht(r),e.separable_conv1,[1,1]),r=Nn(r,[3,3],[2,2],"same"),r=Ke(r,b6(t,e.expansion_conv,[2,2])),r}function hme(t,e){var n=li(Ht(t),e.separable_conv0,[1,1]);return n=li(Ht(n),e.separable_conv1,[1,1]),n=li(Ht(n),e.separable_conv2,[1,1]),n=Ke(n,t),n}var dme=function(t){Fe(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return ge(function(){var o=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=zm(o,a).div(pe(256)),u=Ht(b6(s,i.entry_flow.conv_in,[2,2]));return u=X1(u,i.entry_flow.reduction_block_0,!1),u=X1(u,i.entry_flow.reduction_block_1),$p(r._numMainBlocks,0,1).forEach(function(l){u=hme(u,i.middle_flow["main_block_"+l])}),u=X1(u,i.exit_flow.reduction_block),u=Ht(li(u,i.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Bn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return fme(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return lme(n,this._numMainBlocks)},e}(Xa);function pme(t){var e=[],n=Ja(t),r=n.extractWeights,i=n.getRemainingWeights,o=YT(r,e),a=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{fc:{age:a,gender:s}}}}function mme(t){var e=[],n=mu(t,e);function r(o){var a=n(o+"/weights",2),s=n(o+"/bias",1);return{weights:a,bias:s}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Ya(t,e),{params:i,paramMappings:e}}var n0;(function(t){t.FEMALE="female",t.MALE="male"})(n0||(n0={}));var vme=function(t){Fe(e,t);function e(n){n===void 0&&(n=new dme(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return ge(function(){var o=n instanceof t0?r.faceFeatureExtractor.forwardInput(n):n,a=Vm(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),s=Wo(a,i.fc.age).as1D(),u=Wo(a,i.fc.gender);return{age:s,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return ge(function(){var i=r.runNet(n),o=i.age,a=i.gender;return{age:o,gender:Ga(a)}})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Bn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,a,s,u,l=this;return Oe(this,function(c){switch(c.label){case 0:return[4,Bn(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return i=c.sent(),o=An(i.age),a=An(i.gender),s=o.map(function(f,h){return{ageTensor:f,genderTensor:a[h]}}),[4,Promise.all(s.map(function(f){var h=f.ageTensor,d=f.genderTensor;return Pe(l,void 0,void 0,function(){var p,m,v,g,y;return Oe(this,function(b){switch(b.label){case 0:return[4,h.data()];case 1:return p=b.sent()[0],[4,d.data()];case 2:return m=b.sent()[0],v=m>.5,g=v?n0.MALE:n0.FEMALE,y=v?m:1-m,h.dispose(),d.dispose(),[2,{age:p,gender:g,genderProbability:y}]}})})}))];case 3:return u=c.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},e.prototype.extractClassifierParams=function(n){return pme(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=v6(n),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),mme(o)},e.prototype.extractParams=function(n){var r=1539,i=n.slice(0,n.length-r),o=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},e}(Xa),w6=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,i){var o=i.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),a=o.length;return ge(function(){var s=function(h,d){return hi([Qo([68],h),Qo([68],d)],1).as2D(1,136).as1D()},u=function(h,d){var p=o[h],m=p.width,v=p.height;return d(m,v)?Math.abs(m-v)/2:0},l=function(h){return u(h,function(d,p){return d<p})},c=function(h){return u(h,function(d,p){return p<d})},f=n.mul(Qo([a,136],r)).sub(hi(Array.from(Array(a),function(h,d){return s(l(d),c(d))}))).div(hi(Array.from(Array(a),function(h,d){return s(o[d].width,o[d].height)})));return f})},e.prototype.forwardInput=function(n){var r=this;return ge(function(){var i=r.runNet(n);return r.postProcess(i,n.inputSize,n.inputDimensions.map(function(o){var a=o[0],s=o[1];return{height:a,width:s}}))})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Bn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.detectLandmarks=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,a=this;return Oe(this,function(s){switch(s.label){case 0:return[4,Bn(n)];case 1:return r=s.sent(),i=ge(function(){return An(a.forwardInput(r))}),[4,Promise.all(i.map(function(u,l){return Pe(a,void 0,void 0,function(){var c,f,h,d,p;return Oe(this,function(m){switch(m.label){case 0:return h=(f=Array).from,[4,u.data()];case 1:return c=h.apply(f,[m.sent()]),d=c.filter(function(v,g){return ZD(g)}),p=c.filter(function(v,g){return!ZD(g)}),[2,new Hpe(Array(68).fill(0).map(function(v,g){return new st(d[g],p[g])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return o=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(g6),x6=function(t){Fe(e,t);function e(n){return n===void 0&&(n=new m6),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(w6);function gme(t){var e=[],n=p6(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Ya(t,e),{params:r,paramMappings:e}}function yme(t){var e=[],n=Ja(t),r=n.extractWeights,i=n.getRemainingWeights,o=h6(r,e).extractDenseBlock3Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:a,dense1:s,dense2:u}}}var bme=function(t){Fe(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return ge(function(){var i=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=zm(i,o).div(pe(255)),s=K1(a,r.dense0,!0);return s=K1(s,r.dense1),s=K1(s,r.dense2),s=Vm(s,[14,14],[2,2],"valid"),s})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Bn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return gme(n)},e.prototype.extractParams=function(n){return yme(n)},e}(Xa),wme=function(t){Fe(e,t);function e(n){return n===void 0&&(n=new bme),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(w6);(function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(x6);function xme(t,e){return Ke(dr(t,e.weights),e.biases)}function eP(t,e,n,r,i){i===void 0&&(i="same");var o=e.conv,a=o.filters,s=o.bias,u=Fi(t,a,n,i);return u=Ke(u,s),u=xme(u,e.scale),r?Ht(u):u}function _me(t,e){return eP(t,e,[1,1],!0)}function _6(t,e){return eP(t,e,[1,1],!1)}function S6(t,e){return eP(t,e,[2,2],!0,"valid")}function Sme(t,e){function n(s,u,l){var c=t(s),f=c.length/(u*l*l);if(Mpe(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return ge(function(){return au(kr(c,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,c){var f=n(s,u,l),h=cn(t(u));return e.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:f,bias:h}}function i(s,u){var l=cn(t(s)),c=cn(t(s));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function o(s,u,l,c){var f=r(s,u,l,c+"/conv"),h=i(u,c+"/scale");return{conv:f,scale:h}}function a(s,u,l,c,f){f===void 0&&(f=!1);var h=o((f?.5:1)*s,u,l,c+"/conv1"),d=o(s,u,l,c+"/conv2");return{conv1:h,conv2:d}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function Eme(t){var e=Ja(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],o=Sme(n,i),a=o.extractConvLayerParams,s=o.extractResidualLayerParams,u=a(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),d=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),v=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),_=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),S=s(589824,256,3,"conv256_down_out"),E=ge(function(){return au(qs(n(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var C={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:f,conv64_down:h,conv64_1:d,conv64_2:p,conv64_3:m,conv128_down:v,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:_,conv256_2:x,conv256_down_out:S,fc:E};return{params:C,paramMappings:i}}function Cme(t,e){var n=mu(t,e);function r(a){var s=n(a+"/scale/weights",1),u=n(a+"/scale/biases",1);return{weights:s,biases:u}}function i(a){var s=n(a+"/conv/filters",4),u=n(a+"/conv/bias",1),l=r(a);return{conv:{filters:s,bias:u},scale:l}}function o(a){return{conv1:i(a+"/conv1"),conv2:i(a+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function Ame(t){var e=[],n=Cme(t,e),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,o=r("conv32_down"),a=i("conv32_1"),s=i("conv32_2"),u=i("conv32_3"),l=i("conv64_down"),c=i("conv64_1"),f=i("conv64_2"),h=i("conv64_3"),d=i("conv128_down"),p=i("conv128_1"),m=i("conv128_2"),v=i("conv256_down"),g=i("conv256_1"),y=i("conv256_2"),b=i("conv256_down_out"),_=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!Dpe(_))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+_);var x={conv32_down:o,conv32_1:a,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:f,conv64_3:h,conv128_down:d,conv128_1:p,conv128_2:m,conv256_down:v,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:_};return Ya(t,e),{params:x,paramMappings:e}}function Po(t,e){var n=_me(t,e.conv1);return n=_6(n,e.conv2),n=Ke(n,t),n=Ht(n),n}function ng(t,e){var n=S6(t,e.conv1);n=_6(n,e.conv2);var r=Vm(t,2,2,"valid"),i=Nt(r.shape),o=r.shape[3]!==n.shape[3],a=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(a){var s=Hd(n.shape);s[1]=1;var u=Nt(s);n=Cn([n,u],1);var l=Hd(n.shape);l[2]=1;var c=Nt(l);n=Cn([n,c],2)}return r=o?Cn([r,i],3):r,n=Ke(r,n),n=Ht(n),n}var Tme=function(t){Fe(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return ge(function(){var i=n.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],a=zm(i,o).div(pe(256)),s=S6(a,r.conv32_down);s=Nn(s,3,2,"valid"),s=Po(s,r.conv32_1),s=Po(s,r.conv32_2),s=Po(s,r.conv32_3),s=ng(s,r.conv64_down),s=Po(s,r.conv64_1),s=Po(s,r.conv64_2),s=Po(s,r.conv64_3),s=ng(s,r.conv128_down),s=Po(s,r.conv128_1),s=Po(s,r.conv128_2),s=ng(s,r.conv256_down),s=Po(s,r.conv256_1),s=Po(s,r.conv256_2),s=ng(s,r.conv256_down_out);var u=s.mean([1,2]),l=Gb(u,r.fc);return l})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Bn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,a=this;return Oe(this,function(s){switch(s.label){case 0:return[4,Bn(n)];case 1:return r=s.sent(),i=ge(function(){return An(a.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return o=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Ame(n)},e.prototype.extractParams=function(n){return Eme(n)},e}(Xa);function E6(t,e){var n={descriptor:e};return Object.assign({},t,n)}function C6(t,e){var n={age:e};return Object.assign({},t,n)}function A6(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var T6=function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,i=n.scaleFactor,o=n.maxNumScales,a=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function Pme(t,e){function n(u,l){var c=kr(t(9*u),[3,3,u,1]),f=cn(t(u)),h=cn(t(u)),d=cn(t(u)),p=cn(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:f,batch_norm_offset:h,batch_norm_mean:d,batch_norm_variance:p}}function r(u,l,c,f,h){var d=kr(t(u*l*c*c),[c,c,u,l]),p=cn(t(l));return e.push({paramPath:f+"/filters"},{paramPath:f+"/"+(h?"batch_norm_offset":"bias")}),{filters:d,bias:p}}function i(u,l,c,f){var h=r(u,l,c,f,!0),d=h.filters,p=h.bias;return{filters:d,batch_norm_offset:p}}function o(u,l,c){var f=n(u,c+"/depthwise_conv"),h=i(u,l,1,c+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:h}}function a(){var u=i(3,32,3,"mobilenetv1/conv_0"),l=o(32,64,"mobilenetv1/conv_1"),c=o(64,128,"mobilenetv1/conv_2"),f=o(128,128,"mobilenetv1/conv_3"),h=o(128,256,"mobilenetv1/conv_4"),d=o(256,256,"mobilenetv1/conv_5"),p=o(256,512,"mobilenetv1/conv_6"),m=o(512,512,"mobilenetv1/conv_7"),v=o(512,512,"mobilenetv1/conv_8"),g=o(512,512,"mobilenetv1/conv_9"),y=o(512,512,"mobilenetv1/conv_10"),b=o(512,512,"mobilenetv1/conv_11"),_=o(512,1024,"mobilenetv1/conv_12"),x=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:h,conv_5:d,conv_6:p,conv_7:m,conv_8:v,conv_9:g,conv_10:y,conv_11:b,conv_12:_,conv_13:x}}function s(){var u=i(1024,256,1,"prediction_layer/conv_0"),l=i(256,512,3,"prediction_layer/conv_1"),c=i(512,128,1,"prediction_layer/conv_2"),f=i(128,256,3,"prediction_layer/conv_3"),h=i(256,128,1,"prediction_layer/conv_4"),d=i(128,256,3,"prediction_layer/conv_5"),p=i(256,64,1,"prediction_layer/conv_6"),m=i(64,128,3,"prediction_layer/conv_7"),v=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),g=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),y=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),b=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),_=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),x=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),C=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),A=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),T=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),P=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),k={box_encoding_predictor:v,class_predictor:g},I={box_encoding_predictor:y,class_predictor:b},$={box_encoding_predictor:_,class_predictor:x},B={box_encoding_predictor:S,class_predictor:E},z={box_encoding_predictor:C,class_predictor:A},U={box_encoding_predictor:T,class_predictor:P};return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:h,conv_5:d,conv_6:p,conv_7:m,box_predictor_0:k,box_predictor_1:I,box_predictor_2:$,box_predictor_3:B,box_predictor_4:z,box_predictor_5:U}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function Ome(t){var e=[],n=Ja(t),r=n.extractWeights,i=n.getRemainingWeights,o=Pme(r,e),a=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,u=a(),l=s(),c=vT(r(5118*4),[1,5118,4]),f={extra_dim:c};if(e.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:e}}function kme(t,e){var n=mu(t,e);function r(l,c,f){var h=n(l+"/Conv2d_"+c+"_pointwise/weights",4,f+"/filters"),d=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:h,batch_norm_offset:d}}function i(l){var c="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",h=c+"/depthwise_conv",d=c+"/pointwise_conv",p=n(f+"/depthwise_weights",4,h+"/filters"),m=n(f+"/BatchNorm/gamma",1,h+"/batch_norm_scale"),v=n(f+"/BatchNorm/beta",1,h+"/batch_norm_offset"),g=n(f+"/BatchNorm/moving_mean",1,h+"/batch_norm_mean"),y=n(f+"/BatchNorm/moving_variance",1,h+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:m,batch_norm_offset:v,batch_norm_mean:g,batch_norm_variance:y},pointwise_conv:r("MobilenetV1",l,d)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function a(l,c){var f=n(l+"/weights",4,c+"/filters"),h=n(l+"/biases",1,c+"/bias");return{filters:f,bias:h}}function s(l){var c=a("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=a("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function Ime(t){var e=[],n=kme(t,e),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,o=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Jb(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var a={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return Ya(t,e),{params:a,paramMappings:e}}function ko(t,e,n){return ge(function(){var r=Fi(t,e.filters,n,"same");return r=Ke(r,e.batch_norm_offset),TT(r,0,6)})}var Rme=.0010000000474974513;function Nme(t,e,n){return ge(function(){var r=qb(t,e.filters,n,"same");return r=xW(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,Rme),TT(r,0,6)})}function Dme(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function Mme(t,e){return ge(function(){var n=null,r=ko(t,e.conv_0,[2,2]),i=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(i.forEach(function(o,a){var s=a+1,u=Dme(s);r=Nme(r,o.depthwise_conv,u),r=ko(r,o.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function $me(t,e,n,r,i){var o=t.shape[0],a=Math.min(n,o),s=e.map(function(c,f){return{score:c,boxIndex:f}}).filter(function(c){return c.score>i}).sort(function(c,f){return f.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=a)){for(var f=c.score,h=l.length-1;h>=0;--h){var d=jme(t,c.boxIndex,l[h]);if(d!==0&&(c.score*=u(d),c.score<=i))break}f===c.score&&l.push(c.boxIndex)}}),l}function jme(t,e,n){var r=t.arraySync(),i=Math.min(r[e][0],r[e][2]),o=Math.min(r[e][1],r[e][3]),a=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),h=(a-i)*(s-o),d=(c-u)*(f-l);if(h<=0||d<=0)return 0;var p=Math.max(i,u),m=Math.max(o,l),v=Math.min(a,c),g=Math.min(s,f),y=Math.max(v-p,0)*Math.max(g-m,0);return y/(h+d-y)}function Lme(t){var e=An(au(t,[1,0])),n=[Pn(e[2],e[0]),Pn(e[3],e[1])],r=[Ke(e[0],so(n[0],pe(2))),Ke(e[1],so(n[1],pe(2)))];return{sizes:n,centers:r}}function Fme(t,e){var n=Lme(t),r=n.sizes,i=n.centers,o=An(au(e,[1,0])),a=so(dr(OE(so(o[2],pe(5))),r[0]),pe(2)),s=Ke(dr(so(o[0],pe(10)),r[0]),i[0]),u=so(dr(OE(so(o[3],pe(5))),r[1]),pe(2)),l=Ke(dr(so(o[1],pe(10)),r[1]),i[1]);return au(hi([Pn(s,a),Pn(l,u),Ke(s,a),Ke(l,u)]),[1,0])}function Bme(t,e,n){return ge(function(){var r=t.shape[0],i=Fme(co(tf(n.extra_dim,[r,1,1]),[-1,4]),co(t,[-1,4]));i=co(i,[r,i.shape[0]/r,4]);var o=gW(ra(e,[0,0,1],[-1,-1,-1])),a=ra(o,[0,0,0],[-1,-1,1]);a=co(a,[r,a.shape[1]]);var s=An(i),u=An(a);return{boxes:s,scores:u}})}function ac(t,e){return ge(function(){var n=t.shape[0],r=co(po(t,e.box_encoding_predictor),[n,-1,1,4]),i=co(po(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function Ume(t,e,n){return ge(function(){var r=ko(t,n.conv_0,[1,1]),i=ko(r,n.conv_1,[2,2]),o=ko(i,n.conv_2,[1,1]),a=ko(o,n.conv_3,[2,2]),s=ko(a,n.conv_4,[1,1]),u=ko(s,n.conv_5,[2,2]),l=ko(u,n.conv_6,[1,1]),c=ko(l,n.conv_7,[2,2]),f=ac(e,n.box_predictor_0),h=ac(t,n.box_predictor_1),d=ac(i,n.box_predictor_2),p=ac(a,n.box_predictor_3),m=ac(u,n.box_predictor_4),v=ac(c,n.box_predictor_5),g=Cn([f.boxPredictionEncoding,h.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,v.boxPredictionEncoding],1),y=Cn([f.classPrediction,h.classPrediction,d.classPrediction,p.classPrediction,m.classPrediction,v.classPrediction],1);return{boxPredictions:g,classPredictions:y}})}var tw=function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,i=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),P6=function(t){Fe(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return ge(function(){var i=n.toBatchTensor(512,!1).toFloat(),o=Pn(dr(i,pe(.007843137718737125)),pe(1)),a=Mme(o,r.mobilenetv1),s=Ume(a.out,a.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return Bme(u,l,r.output_layer)})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Bn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h,d,p,m,v,g,y,b,_,x,S,E,C;return Oe(this,function(A){switch(A.label){case 0:return i=new tw(r),o=i.maxResults,a=i.minConfidence,[4,Bn(n)];case 1:for(s=A.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,f=l[0],h=c[0],d=1;d<l.length;d++)l[d].dispose(),c[d].dispose();return v=(m=Array).from,[4,h.data()];case 2:return p=v.apply(m,[A.sent()]),g=.5,y=$me(f,p,o,g,a),b=s.getReshapedInputDimensions(0),_=s.inputSize,x=_/b.width,S=_/b.height,E=f.arraySync(),C=y.map(function(T){var P=[Math.max(0,E[T][0]),Math.min(1,E[T][2])].map(function(U){return U*S}),k=P[0],I=P[1],$=[Math.max(0,E[T][1]),Math.min(1,E[T][3])].map(function(U){return U*x}),B=$[0],z=$[1];return new la(p[T],new zT(B,k,z-B,I-k),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),h.dispose(),[2,C]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Ime(n)},e.prototype.extractParams=function(n){return Ome(n)},e}(Xa);(function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(P6);var Vme=.4,Wme=[new st(.738768,.874946),new st(2.42204,2.65704),new st(4.30971,7.04493),new st(10.246,4.59428),new st(12.6868,11.8741)],zme=[new st(1.603231,2.094468),new st(6.041143,7.080126),new st(2.882459,3.518061),new st(4.266906,5.178857),new st(9.041765,10.66308)],Hme=[117.001,114.697,97.404],qme="tiny_yolov2_model",Gme="tiny_yolov2_separable_conv_model",rg=function(t){return typeof t=="number"};function Kme(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!rg(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return rg(e.x)&&rg(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(rg)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function tP(t){return ge(function(){var e=dr(t,pe(.10000000149011612));return Ke(Ht(Pn(t,e)),e)})}function ds(t,e){return ge(function(){var n=Ll(t,[[0,0],[1,1],[1,1],[0,0]]);return n=Fi(n,e.conv.filters,[1,1],"valid"),n=Pn(n,e.bn.sub),n=dr(n,e.bn.truediv),n=Ke(n,e.conv.bias),tP(n)})}function ps(t,e){return ge(function(){var n=Ll(t,[[0,0],[1,1],[1,1],[0,0]]);return n=IT(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=Ke(n,e.bias),tP(n)})}function Xme(t,e){var n=ew(t,e);function r(a,s){var u=cn(t(a)),l=cn(t(a));return e.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function i(a,s,u){var l=n(a,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var o=JT(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function Yme(t,e,n,r){var i=Ja(t),o=i.extractWeights,a=i.getRemainingWeights,s=[],u=Xme(o,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,h;if(e.withSeparableConvs){var d=r[0],p=r[1],m=r[2],v=r[3],g=r[4],y=r[5],b=r[6],_=r[7],x=r[8],S=e.isFirstLayerConv2d?l(d,p,3,"conv0"):f(d,p,"conv0"),E=f(p,m,"conv1"),C=f(m,v,"conv2"),A=f(v,g,"conv3"),T=f(g,y,"conv4"),P=f(y,b,"conv5"),k=_?f(b,_,"conv6"):void 0,I=x?f(_,x,"conv7"):void 0,$=l(x||_||b,5*n,1,"conv8");h={conv0:S,conv1:E,conv2:C,conv3:A,conv4:T,conv5:P,conv6:k,conv7:I,conv8:$}}else{var d=r[0],p=r[1],m=r[2],v=r[3],g=r[4],y=r[5],b=r[6],_=r[7],x=r[8],S=c(d,p,"conv0"),E=c(p,m,"conv1"),C=c(m,v,"conv2"),A=c(v,g,"conv3"),T=c(g,y,"conv4"),P=c(y,b,"conv5"),k=c(b,_,"conv6"),I=c(_,x,"conv7"),$=l(x,5*n,1,"conv8");h={conv0:S,conv1:E,conv2:C,conv3:A,conv4:T,conv5:P,conv6:k,conv7:I,conv8:$}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:h,paramMappings:s}}function Jme(t,e){var n=mu(t,e);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function i(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function o(s){var u=i(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var a=QT(n);return{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function Qme(t,e){var n=[],r=Jme(t,n),i=r.extractConvParams,o=r.extractConvWithBatchNormParams,a=r.extractSeparableConvParams,s;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;s={conv0:e.isFirstLayerConv2d?i("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:u>7?a("conv6"):void 0,conv7:u>8?a("conv7"):void 0,conv8:i("conv8")}}else s={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return Ya(t,n),{params:s,paramMappings:n}}var sM;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(sM||(sM={}));var nP=function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,i=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),O6=function(t){Fe(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return Kme(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var i=ds(n,r.conv0);return i=Nn(i,[2,2],[2,2],"same"),i=ds(i,r.conv1),i=Nn(i,[2,2],[2,2],"same"),i=ds(i,r.conv2),i=Nn(i,[2,2],[2,2],"same"),i=ds(i,r.conv3),i=Nn(i,[2,2],[2,2],"same"),i=ds(i,r.conv4),i=Nn(i,[2,2],[2,2],"same"),i=ds(i,r.conv5),i=Nn(i,[2,2],[1,1],"same"),i=ds(i,r.conv6),i=ds(i,r.conv7),po(i,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var i=this.config.isFirstLayerConv2d?tP(po(n,r.conv0,"valid",!1)):ps(n,r.conv0);return i=Nn(i,[2,2],[2,2],"same"),i=ps(i,r.conv1),i=Nn(i,[2,2],[2,2],"same"),i=ps(i,r.conv2),i=Nn(i,[2,2],[2,2],"same"),i=ps(i,r.conv3),i=Nn(i,[2,2],[2,2],"same"),i=ps(i,r.conv4),i=Nn(i,[2,2],[2,2],"same"),i=ps(i,r.conv5),i=Nn(i,[2,2],[1,1],"same"),i=r.conv6?ps(i,r.conv6):i,i=r.conv7?ps(i,r.conv7):i,po(i,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return ge(function(){var a=n.toBatchTensor(r,!1).toFloat();return a=i.config.meanRgb?zm(a,i.config.meanRgb):a,a=a.div(pe(256)),i.config.withSeparableConvs?i.runMobilenet(a,o):i.runTinyYolov2(a,o)})},e.prototype.forward=function(n,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Bn(n)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h,d,p,m,v,g,y=this;return Oe(this,function(b){switch(b.label){case 0:return i=new nP(r),o=i.inputSize,a=i.scoreThreshold,[4,Bn(n)];case 1:return s=b.sent(),[4,this.forwardInput(s,o)];case 2:return u=b.sent(),l=ge(function(){return An(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),a)];case 3:return f=b.sent(),u.dispose(),l.dispose(),h=f.map(function(_){return _.box}),d=f.map(function(_){return _.score}),p=f.map(function(_){return _.classScore}),m=f.map(function(_){return y.config.classes[_.label]}),v=jp(h.map(function(_){return _.rescale(o)}),d,this.config.iouThreshold,!0),g=v.map(function(_){return new t6(d[_],p[_],m[_],h[_],c)}),[2,g]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return Qme(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return Yme(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,i){return Pe(this,void 0,void 0,function(){var o,a,s,u,l,c,f,h,d,p,m,v,g,y,b,_,x,S,E,C,A,T,P,k,I,$,B,z,U,M=this;return Oe(this,function(F){switch(F.label){case 0:return o=r.width,a=r.height,s=Math.max(o,a),u=s/o,l=s/a,c=n.shape[1],f=this.config.anchors.length,h=ge(function(){var H=n.reshape([c,c,f,M.boxEncodingSize]),X=H.slice([0,0,0,0],[c,c,f,4]),K=H.slice([0,0,0,4],[c,c,f,1]),Q=M.withClassScores?Ga(H.slice([0,0,0,5],[c,c,f,M.config.classes.length]),3):pe(0);return[X,K,Q]}),d=h[0],p=h[1],m=h[2],v=[],[4,p.array()];case 1:return g=F.sent(),[4,d.array()];case 2:y=F.sent(),b=0,F.label=3;case 3:if(!(b<c))return[3,12];_=0,F.label=4;case 4:if(!(_<c))return[3,11];x=0,F.label=5;case 5:return x<f?(S=G1(g[b][_][x][0]),!i||S>i?(E=(_+G1(y[b][_][x][0]))/c*u,C=(b+G1(y[b][_][x][1]))/c*l,A=Math.exp(y[b][_][x][2])*this.config.anchors[x].x/c*u,T=Math.exp(y[b][_][x][3])*this.config.anchors[x].y/c*l,P=E-A/2,k=C-T/2,I={row:b,col:_,anchor:x},this.withClassScores?[4,this.extractPredictedClass(m,I)]:[3,7]):[3,9]):[3,10];case 6:return U=F.sent(),[3,8];case 7:U={classScore:1,label:0},F.label=8;case 8:$=U,B=$.classScore,z=$.label,v.push(sr({box:new Qb(P,k,P+A,k+T),score:S,classScore:S*B,label:z},I)),F.label=9;case 9:return x++,[3,5];case 10:return _++,[3,4];case 11:return b++,[3,3];case 12:return d.dispose(),p.dispose(),m.dispose(),[2,v]}})})},e.prototype.extractPredictedClass=function(n,r){return Pe(this,void 0,void 0,function(){var i,o,a,s;return Oe(this,function(u){switch(u.label){case 0:return i=r.row,o=r.col,a=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[i][o][a][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(Xa),Zme=function(t){Fe(e,t);function e(n){n===void 0&&(n=!0);var r=this,i=Object.assign({},{withSeparableConvs:n,iouThreshold:Vme,classes:["face"]},n?{anchors:zme,meanRgb:Hme}:{anchors:Wme,withClassScores:!0});return r=t.call(this,i)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return[4,this.detect(n,r)];case 1:return i=o.sent(),[2,i.map(function(a){return new la(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Gme:qme},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(O6),k6=function(t){Fe(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e}(nP),Hm=function(){function t(){}return t.prototype.then=function(e){return Pe(this,void 0,void 0,function(){var n;return Oe(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t}();function nw(t,e,n,r,i){return i===void 0&&(i=function(o){var a=o.alignedRect;return a}),Pe(this,void 0,void 0,function(){var o,a,s,u,l;return Oe(this,function(c){switch(c.label){case 0:return o=t.map(function(f){return sme(f)?i(f):f.detection}),s=r,s?[3,5]:e instanceof Wt?[4,XT(e,o)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,KT(e,o)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return a=s,[4,n(a)];case 6:return l=c.sent(),a.forEach(function(f){return f instanceof Wt&&f.dispose()}),[2,l]}})})}function rP(t,e,n,r,i){return Pe(this,void 0,void 0,function(){var o=this;return Oe(this,function(a){return[2,nw([t],e,function(s){return Pe(o,void 0,void 0,function(){return Oe(this,function(u){return[2,n(s[0])]})})},r,i)]})})}function eve(t){return ge(function(){return hi(An(t,3).reverse(),3)})}var ig=2,r0=12;function tve(t,e){var n=ew(t,e),r=YT(t,e);function i(l,c){var f=cn(t(l));return e.push({paramPath:c}),f}function o(l,c,f){f===void 0&&(f=!1);var h=n(l[0],l[1],3,c+"/conv1"),d=i(l[1],c+"/prelu1_alpha"),p=n(l[1],l[2],3,c+"/conv2"),m=i(l[2],c+"/prelu2_alpha"),v=n(l[2],l[3],f?2:3,c+"/conv3"),g=i(l[3],c+"/prelu3_alpha");return{conv1:h,prelu1_alpha:d,conv2:p,prelu2_alpha:m,conv3:v,prelu3_alpha:g}}function a(){var l=o([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return sr(sr({},l),{conv4_1:c,conv4_2:f})}function s(){var l=o([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),f=i(128,"rnet/prelu4_alpha"),h=r(128,2,"rnet/fc2_1"),d=r(128,4,"rnet/fc2_2");return sr(sr({},l),{fc1:c,prelu4_alpha:f,fc2_1:h,fc2_2:d})}function u(){var l=o([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),f=i(128,"onet/prelu4_alpha"),h=r(1152,256,"onet/fc1"),d=i(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),v=r(256,10,"onet/fc2_3");return sr(sr({},l),{conv4:c,prelu4_alpha:f,fc1:h,prelu5_alpha:d,fc2_1:p,fc2_2:m,fc2_3:v})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:u}}function nve(t){var e=Ja(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],o=tve(n,i),a=o.extractPNetParams,s=o.extractRNetParams,u=o.extractONetParams,l=a(),c=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:f},paramMappings:i}}function rve(t,e){var n=mu(t,e);function r(c){var f=n(c+"/weights",4,c+"/filters"),h=n(c+"/bias",1);return{filters:f,bias:h}}function i(c){var f=n(c+"/weights",2),h=n(c+"/bias",1);return{weights:f,bias:h}}function o(c){return n(c,1)}function a(c){var f=r(c+"/conv1"),h=o(c+"/prelu1_alpha"),d=r(c+"/conv2"),p=o(c+"/prelu2_alpha"),m=r(c+"/conv3"),v=o(c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:d,prelu2_alpha:p,conv3:m,prelu3_alpha:v}}function s(){var c=a("pnet"),f=r("pnet/conv4_1"),h=r("pnet/conv4_2");return sr(sr({},c),{conv4_1:f,conv4_2:h})}function u(){var c=a("rnet"),f=i("rnet/fc1"),h=o("rnet/prelu4_alpha"),d=i("rnet/fc2_1"),p=i("rnet/fc2_2");return sr(sr({},c),{fc1:f,prelu4_alpha:h,fc2_1:d,fc2_2:p})}function l(){var c=a("onet"),f=r("onet/conv4"),h=o("onet/prelu4_alpha"),d=i("onet/fc1"),p=o("onet/prelu5_alpha"),m=i("onet/fc2_1"),v=i("onet/fc2_2"),g=i("onet/fc2_3");return sr(sr({},c),{conv4:f,prelu4_alpha:h,fc1:d,prelu5_alpha:p,fc2_1:m,fc2_2:v,fc2_3:g})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function ive(t){var e=[],n=rve(t,e),r=n.extractPNetParams,i=n.extractRNetParams,o=n.extractONetParams,a=r(),s=i(),u=o();return Ya(t,e),{params:{pnet:a,rnet:s,onet:u},paramMappings:e}}function jE(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function ove(t,e,n){for(var r=n[0],i=n[1],o=r0/t,a=[],s=Math.min(r,i)*o,u=0;s>=12;)a.push(o*Math.pow(e,u)),s=s*e,u+=1;return a}var iP=function(t){Fe(e,t);function e(n,r,i,o){return t.call(this,{left:n,top:r,right:i,bottom:o},!0)||this}return e}(su);function I6(t){return ge(function(){return dr(Pn(t,pe(127.5)),pe(.0078125))})}function uf(t,e){return ge(function(){return Ke(Ht(t),dr(e,Yy(Ht(Yy(t)))))})}function oP(t,e,n){return n===void 0&&(n=!1),ge(function(){var r=po(t,e.conv1,"valid");return r=uf(r,e.prelu1_alpha),r=Nn(r,n?[2,2]:[3,3],[2,2],"same"),r=po(r,e.conv2,"valid"),r=uf(r,e.prelu2_alpha),r=n?r:Nn(r,[3,3],[2,2],"valid"),r=po(r,e.conv3,"valid"),r=uf(r,e.prelu3_alpha),r})}function ave(t,e){return ge(function(){var n=oP(t,e,!0),r=po(n,e.conv4_1,"valid"),i=Ai(Kb(r,3),3),o=Ga(Pn(r,i),3),a=po(n,e.conv4_2,"valid");return{prob:o,regions:a}})}function sve(t,e){return ge(function(){var n=jE(e,t.shape.slice(1)),r=n.height,i=n.width,o=$T.resizeBilinear(t,[r,i]),a=I6(o);return au(a,[0,2,1,3])})}function uve(t,e,n,r){for(var i=[],o=t.arraySync(),a=0;a<t.shape[0];a++)for(var s=0;s<t.shape[1];s++)o[a][s]>=r&&i.push(new st(s,a));var u=i.map(function(l){var c=new Qb(Math.round((l.y*ig+1)/n),Math.round((l.x*ig+1)/n),Math.round((l.y*ig+r0)/n),Math.round((l.x*ig+r0)/n)),f=o[l.y][l.x],h=e.arraySync(),d=new iP(h[l.y][l.x][0],h[l.y][l.x][1],h[l.y][l.x][2],h[l.y][l.x][3]);return{cell:c,score:f,region:d}});return u}function lve(t,e,n,r,i){i.stage1=[];var o=e.map(function(h){return ge(function(){var d={scale:h},p=sve(t,h),m=Date.now(),v=ave(p,r),g=v.prob,y=v.regions;d.pnet=Date.now()-m;var b=An(An(g,3)[1])[0],_=An(y)[0];return{scoresTensor:b,regionsTensor:_,scale:h,statsForScale:d}})}),a=o.map(function(h){var d=h.scoresTensor,p=h.regionsTensor,m=h.scale,v=h.statsForScale,g=uve(d,p,m,n);if(d.dispose(),p.dispose(),!g.length)return i.stage1.push(v),[];var y=Date.now(),b=jp(g.map(function(_){return _.cell}),g.map(function(_){return _.score}),.5);return v.nms=Date.now()-y,v.numBoxes=b.length,i.stage1.push(v),b.map(function(_){return g[_]})}),s=a.reduce(function(h,d){return h.concat(d)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),f=jp(s.map(function(h){return h.cell}),s.map(function(h){return h.score}),.7);i.stage1_nms=Date.now()-c,l=f.map(function(h){return s[h].score}),u=f.map(function(h){return s[h]}).map(function(h){var d=h.cell,p=h.region;return new Qb(d.left+p.left*d.width,d.top+p.top*d.height,d.right+p.right*d.width,d.bottom+p.bottom*d.height).toSquare().round()})}return{boxes:u,scores:l}}function R6(t,e,n){var r=n.width,i=n.height;return Pe(this,void 0,void 0,function(){var o,a,s,u=this;return Oe(this,function(l){switch(l.label){case 0:return o=Ol(t),[4,Promise.all(e.map(function(c){return Pe(u,void 0,void 0,function(){var f,h,d,p,m,v,g,y;return Oe(this,function(b){return f=c.padAtBorders(t.height,t.width),h=f.y,d=f.ey,p=f.x,m=f.ex,v=p-1,g=h-1,y=o.getImageData(v,g,m-v,d-g),[2,mr.isNodejs()?GT(y):createImageBitmap(y)]})})}))];case 1:return a=l.sent(),s=[],a.forEach(function(c){var f=Zb({width:r,height:i}),h=Ol(f);h.drawImage(c,0,0,r,i);for(var d=h.getImageData(0,0,r,i).data,p=[],m=0;m<d.length;m+=4)p.push(d[m+2]),p.push(d[m+1]),p.push(d[m]);s.push(p)}),[2,s.map(function(c){var f=ge(function(){var h=au(kr(c,[1,r,i,3]),[0,2,1,3]).toFloat();return I6(h)});return f})]}})})}function cve(t,e){return ge(function(){var n=oP(t,e),r=co(n,[n.shape[0],e.fc1.weights.shape[0]]),i=Wo(r,e.fc1),o=uf(i,e.prelu4_alpha),a=Wo(o,e.fc2_1),s=Ai(Kb(a,1),1),u=Ga(Pn(a,s),1),l=Wo(o,e.fc2_2),c=An(u,1)[1];return{scores:c,regions:l}})}function fve(t,e,n,r,i){return Pe(this,void 0,void 0,function(){var o,a,s,u,l,c,f,h,d,p,m,v,g,y;return Oe(this,function(b){switch(b.label){case 0:return o=Date.now(),[4,R6(t,e,{width:24,height:24})];case 1:return a=b.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(_){var x=cve(_,r);return _.dispose(),x}),i.stage2_rnet=Date.now()-o,u=s.length>1?Cn(s.map(function(_){return _.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[b.sent()]),u.dispose(),h=l.map(function(_,x){return{score:_,idx:x}}).filter(function(_){return _.score>n}).map(function(_){var x=_.idx;return x}),d=h.map(function(_){return e[_]}),p=h.map(function(_){return l[_]}),m=[],v=[],d.length>0&&(o=Date.now(),g=jp(d,p,.7),i.stage2_nms=Date.now()-o,y=g.map(function(_){var x=s[h[_]].regions.arraySync();return new iP(x[0][0],x[0][1],x[0][2],x[0][3])}),v=g.map(function(_){return p[_]}),m=g.map(function(_,x){return d[_].calibrate(y[x])})),s.forEach(function(_){_.regions.dispose(),_.scores.dispose()}),[2,{boxes:m,scores:v}]}})})}function hve(t,e){return ge(function(){var n=oP(t,e);n=Nn(n,[2,2],[2,2],"same"),n=po(n,e.conv4,"valid"),n=uf(n,e.prelu4_alpha);var r=co(n,[n.shape[0],e.fc1.weights.shape[0]]),i=Wo(r,e.fc1),o=uf(i,e.prelu5_alpha),a=Wo(o,e.fc2_1),s=Ai(Kb(a,1),1),u=Ga(Pn(a,s),1),l=Wo(o,e.fc2_2),c=Wo(o,e.fc2_3),f=An(u,1)[1];return{scores:f,regions:l,points:c}})}function dve(t,e,n,r,i){return Pe(this,void 0,void 0,function(){var o,a,s,u,l,c,f,h,d,p,m,v,g,y,b;return Oe(this,function(_){switch(_.label){case 0:return o=Date.now(),[4,R6(t,e,{width:48,height:48})];case 1:return a=_.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(x){var S=hve(x,r);return x.dispose(),S}),i.stage3_onet=Date.now()-o,u=s.length>1?Cn(s.map(function(x){return x.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[_.sent()]),u.dispose(),h=l.map(function(x,S){return{score:x,idx:S}}).filter(function(x){return x.score>n}).map(function(x){var S=x.idx;return S}),d=h.map(function(x){var S=s[x].regions.arraySync();return new iP(S[0][0],S[0][1],S[0][2],S[0][3])}),p=h.map(function(x,S){return e[x].calibrate(d[S])}),m=h.map(function(x){return l[x]}),v=[],g=[],y=[],p.length>0&&(o=Date.now(),b=jp(p,m,.7,!1),i.stage3_nms=Date.now()-o,v=b.map(function(x){return p[x]}),g=b.map(function(x){return m[x]}),y=b.map(function(x,S){return Array(5).fill(0).map(function(E,C){var A=s[x].points.arraySync();return new st(A[0][C]*(v[S].width+1)+v[S].left,A[0][C+5]*(v[S].height+1)+v[S].top)})})),s.forEach(function(x){x.regions.dispose(),x.scores.dispose(),x.points.dispose()}),[2,{boxes:v,scores:g,points:y}]}})})}var pve=function(t){Fe(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.load=function(n){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,n)]})})},e.prototype.loadFromDisk=function(n){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,n)]})})},e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h,d,p,m,v,g,y,b,_,x,S,E,C;return Oe(this,function(A){switch(A.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(o=n.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),u=ge(function(){return eve(Ai(VT.fromPixels(o)).toFloat())}),l=function(T){return u.dispose(),a.total=Date.now()-s,T},c=u.shape.slice(1),f=c[0],h=c[1],d=new T6(r),p=d.minFaceSize,m=d.scaleFactor,v=d.maxNumScales,g=d.scoreThresholds,y=d.scaleSteps,b=(y||ove(p,m,[f,h])).filter(function(T){var P=jE(T,[f,h]);return Math.min(P.width,P.height)>r0}).slice(0,v),a.scales=b,a.pyramid=b.map(function(T){return jE(T,[f,h])}),_=Date.now(),[4,lve(u,b,g[0],i.pnet,a)];case 1:return x=A.sent(),a.total_stage1=Date.now()-_,x.boxes.length?(a.stage2_numInputBoxes=x.boxes.length,_=Date.now(),[4,fve(o,x.boxes,g[1],i.rnet,a)]):[2,l({results:[],stats:a})];case 2:return S=A.sent(),a.total_stage2=Date.now()-_,S.boxes.length?(a.stage3_numInputBoxes=S.boxes.length,_=Date.now(),[4,dve(o,S.boxes,g[2],i.onet,a)]):[2,l({results:[],stats:a})];case 3:return E=A.sent(),a.total_stage3=Date.now()-_,C=E.boxes.map(function(T,P){return ZT(HT({},new la(E.scores[P],new zT(T.left/h,T.top/f,T.width/h,T.height/f),{height:f,width:h})),new zpe(E.points[P].map(function(k){return k.sub(new st(T.left,T.top)).div(new st(T.width,T.height))}),{width:T.width,height:T.height}))}),[2,l({results:C,stats:a})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Bn(n)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Bn(n)];case 1:return[2,i.apply(this,[o.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return ive(n)},e.prototype.extractParams=function(n){return nve(n)},e}(Xa),mve=.4,vve=[new st(1.603231,2.094468),new st(6.041143,7.080126),new st(2.882459,3.518061),new st(4.266906,5.178857),new st(9.041765,10.66308)],gve=[117.001,114.697,97.404],yve=function(t){Fe(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:mve,classes:["face"],anchors:vve,meanRgb:gve,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return[4,this.detect(n,r)];case 1:return i=o.sent(),[2,i.map(function(a){return new la(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(O6),Dr={ssdMobilenetv1:new P6,tinyFaceDetector:new yve,tinyYolov2:new Zme,mtcnn:new pve,faceLandmark68Net:new x6,faceLandmark68TinyNet:new wme,faceRecognitionNet:new Tme,faceExpressionNet:new ame,ageGenderNet:new vme},N6=function(t){Fe(e,t);function e(n,r,i){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o.extractedFaces=i,o}return e}(Hm),aP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i=this;return Oe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,nw(n,this.input,function(a){return Pe(i,void 0,void 0,function(){return Oe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return Dr.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,n.map(function(a,s){return y6(a,r[s])})]}})})},e.prototype.withAgeAndGender=function(){return new cP(this,this.input)},e}(N6),sP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,rP(n,this.input,function(o){return Dr.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,y6(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new fP(this,this.input)},e}(N6),uP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new hP(this,this.input)},e.prototype.withFaceDescriptors=function(){return new pP(this,this.input)},e}(aP),lP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new dP(this,this.input)},e.prototype.withFaceDescriptor=function(){return new mP(this,this.input)},e}(sP),D6=function(t){Fe(e,t);function e(n,r,i){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o.extractedFaces=i,o}return e}(Hm),cP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i=this;return Oe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,nw(n,this.input,function(a){return Pe(i,void 0,void 0,function(){return Oe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return Dr.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,n.map(function(a,s){var u=r[s],l=u.age,c=u.gender,f=u.genderProbability;return C6(A6(a,c,f),l)})]}})})},e.prototype.withFaceExpressions=function(){return new aP(this,this.input)},e}(D6),fP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i,o,a;return Oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,rP(n,this.input,function(u){return Dr.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),i=r.age,o=r.gender,a=r.genderProbability,[2,C6(A6(n,o,a),i)]}})})},e.prototype.withFaceExpressions=function(){return new sP(this,this.input)},e}(D6),hP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new uP(this,this.input)},e.prototype.withFaceDescriptors=function(){return new pP(this,this.input)},e}(cP),dP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new lP(this,this.input)},e.prototype.withFaceDescriptor=function(){return new mP(this,this.input)},e}(fP),M6=function(t){Fe(e,t);function e(n,r){var i=t.call(this)||this;return i.parentTask=n,i.input=r,i}return e}(Hm),pP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,nw(n,this.input,function(o){return Promise.all(o.map(function(a){return Dr.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(o,a){return E6(n[a],o)})]}})})},e.prototype.withFaceExpressions=function(){return new uP(this,this.input)},e.prototype.withAgeAndGender=function(){return new hP(this,this.input)},e}(M6),mP=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,rP(n,this.input,function(o){return Dr.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,E6(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new lP(this,this.input)},e.prototype.withAgeAndGender=function(){return new dP(this,this.input)},e}(M6),$6=function(t){Fe(e,t);function e(n,r,i){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o.useTinyLandmarkNet=i,o}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Dr.faceLandmark68TinyNet:Dr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(Hm),bve=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i,o,a,s=this;return Oe(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof Wt?[4,XT(this.input,r)]:[3,3];case 2:return o=u.sent(),[3,5];case 3:return[4,KT(this.input,r)];case 4:o=u.sent(),u.label=5;case 5:return i=o,[4,Promise.all(i.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return a=u.sent(),i.forEach(function(l){return l instanceof Wt&&l.dispose()}),[2,n.map(function(l,c){return ZT(l,a[c])})]}})})},e.prototype.withFaceExpressions=function(){return new uP(this,this.input)},e.prototype.withAgeAndGender=function(){return new hP(this,this.input)},e.prototype.withFaceDescriptors=function(){return new pP(this,this.input)},e}($6),wve=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i,o,a;return Oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof Wt?[4,XT(this.input,[r])]:[3,3]):[2];case 2:return o=s.sent(),[3,5];case 3:return[4,KT(this.input,[r])];case 4:o=s.sent(),s.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return a=s.sent(),i.forEach(function(u){return u instanceof Wt&&u.dispose()}),[2,ZT(n,a)]}})})},e.prototype.withFaceExpressions=function(){return new lP(this,this.input)},e.prototype.withAgeAndGender=function(){return new dP(this,this.input)},e.prototype.withFaceDescriptor=function(){return new mP(this,this.input)},e}($6),j6=function(t){Fe(e,t);function e(n,r){r===void 0&&(r=new tw);var i=t.call(this)||this;return i.input=n,i.options=r,i}return e}(Hm),xve=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i,o;return Oe(this,function(a){switch(a.label){case 0:return n=this,r=n.input,i=n.options,i instanceof T6?[4,Dr.mtcnn.forward(r,i)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(o=i instanceof k6?function(s){return Dr.tinyFaceDetector.locateFaces(s,i)}:i instanceof tw?function(s){return Dr.ssdMobilenetv1.locateFaces(s,i)}:i instanceof nP?function(s){return Dr.tinyYolov2.locateFaces(s,i)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return Pe(n,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i.map(function(a){return HT({},a)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new bve(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new aP(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new cP(this.runAndExtendWithFaceDetections(),this.input)},e}(j6),_ve=function(t){Fe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return[4,new xve(this.input,this.options)];case 1:return n=i.sent(),r=n[0],n.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return Pe(n,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i?HT({},i):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new wve(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new sP(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new fP(this.runAndExtendWithFaceDetection(),this.input)},e}(j6);function Sve(t,e){return e===void 0&&(e=new tw),new _ve(t,e)}function Eve(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(i,o){return i-r[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}(function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=r.map(function(a){if(a instanceof eg)return a;if(a instanceof Float32Array)return new eg(o(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new eg(o(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return Eve(r,e)}).reduce(function(r,i){return r+i},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,o=r.label;return new nM(o,n.computeMeanDistance(e,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new nM("unknown",n.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},t.fromJSON=function(e){var n=e.labeledDescriptors.map(function(r){return eg.fromJSON(r)});return new t(n,e.distanceThreshold)},t})();const uM={happy:{arabic:"",emoji:""},neutral:{arabic:"",emoji:""},sad:{arabic:"",emoji:""},angry:{arabic:"",emoji:""},surprised:{arabic:"",emoji:""},fearful:{arabic:"",emoji:""},disgusted:{arabic:"",emoji:""}},Cve=()=>{const[t,e]=R.useState(!1),[n,r]=R.useState(!0),[i,o]=R.useState(null),[a,s]=R.useState(null),[u,l]=R.useState([]),c=R.useRef(null),f=R.useRef(null),h=R.useRef(null),d=R.useCallback(async()=>{try{r(!0),console.log("Loading face-api models...");const y="https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model";await Promise.all([Dr.tinyFaceDetector.loadFromUri(y),Dr.faceExpressionNet.loadFromUri(y)]),e(!0),o(null),console.log("Face-api models loaded successfully")}catch(y){o("      "),console.error("Error loading models:",y)}finally{r(!1)}},[]),p=R.useCallback(async()=>{try{console.log("Starting camera...");const y=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:320,height:240}});f.current=y;let b=0;for(;!c.current&&b<30;)await new Promise(_=>setTimeout(_,100)),b++;return c.current?(c.current.srcObject=y,await new Promise((_,x)=>{const S=c.current;S.onloadedmetadata=()=>{S.play().then(()=>{console.log("Camera started, video playing, dimensions:",S.videoWidth,"x",S.videoHeight),_()}).catch(x)},S.onerror=x,setTimeout(()=>_(),5e3)}),!0):(console.error("Video element not found after waiting"),!1)}catch(y){return o("    .   ."),console.error("Error accessing camera:",y),!1}},[]),m=R.useCallback(()=>{f.current&&(f.current.getTracks().forEach(y=>y.stop()),f.current=null),h.current&&(clearInterval(h.current),h.current=null)},[]),v=R.useCallback(async()=>{var b;if(!c.current||!t)return console.log("Cannot detect: video or model not ready",{video:!!c.current,model:t,videoReady:(b=c.current)==null?void 0:b.readyState}),null;const y=c.current;if(y.readyState<2||y.videoWidth===0||y.videoHeight===0)return console.log("Video not ready yet, readyState:",y.readyState,"dimensions:",y.videoWidth,"x",y.videoHeight),null;try{console.log("Detecting emotion... video dimensions:",y.videoWidth,"x",y.videoHeight);const _=await Sve(y,new k6({inputSize:224,scoreThreshold:.3})).withFaceExpressions();if(_&&_.expressions){const x=_.expressions,S=Object.entries(x).sort(([,k],[,I])=>I-k),[E,C]=S[0],A=E,T=uM[A]||uM.neutral,P={emotion:A,confidence:C,arabicLabel:T.arabic,emoji:T.emoji};return console.log(" Emotion detected:",P.emotion,"confidence:",Math.round(P.confidence*100)+"%"),s(P),l(k=>[...k.slice(-50),P]),P}else console.log(" No face detected in frame")}catch(_){console.error("Error detecting emotion:",_)}return null},[t]),g=R.useCallback((y=5e3)=>{console.log("Starting emotion detection with interval:",y,"ms"),h.current&&clearInterval(h.current);const b=async()=>{const _=await v();console.log("Detection result:",_?_.emotion:"no face")};setTimeout(()=>{b()},2e3),h.current=setInterval(()=>{b()},y)},[v]);return R.useEffect(()=>(d(),()=>{m()}),[d,m]),{videoRef:c,isModelLoaded:t,isLoading:n,error:i,currentEmotion:a,emotionHistory:u,loadModels:d,startCamera:p,stopCamera:m,detectEmotion:v,startDetection:g,clearHistory:()=>l([])}},Ave=({stageId:t,onBack:e,onComplete:n})=>{const[r,i]=R.useState("lesson"),[o,a]=R.useState(0),[s,u]=R.useState("pending"),l=R.useRef([]),{t:c,language:f}=bo(),d=Bb(f).find($=>$.id===t),{videoRef:p,currentEmotion:m,isModelLoaded:v,isLoading:g,startCamera:y,stopCamera:b,startDetection:_,emotionHistory:x}=Cve(),{saveProgress:S,logEmotion:E}=hT(),{toast:C}=aA(),A=R.useCallback(async()=>{u("granted"),await new Promise(B=>setTimeout(B,200)),await y()?(v||await new Promise(B=>setTimeout(B,2e3)),_(5e3),C({title:c("game.cameraEnabled"),description:c("game.cameraDesc")})):(u("denied"),C({title:c("game.cameraFailed"),description:c("game.cameraFailedDesc"),variant:"destructive"}))},[y,_,C,v,c]);R.useEffect(()=>()=>{b(),l.current=[]},[b]),R.useEffect(()=>{m&&r==="game"&&l.current.push(m.emotion)},[m,r]);const T=R.useCallback(()=>{const $=l.current;if($.length===0)return null;const B={};$.forEach(M=>{B[M]=(B[M]||0)+1});let z=0,U="neutral";return Object.entries(B).forEach(([M,F])=>{F>z&&(z=F,U=M)}),U},[]),P=R.useCallback(()=>{i("game"),a(Date.now()),l.current=[],s==="pending"&&A()},[s,A]),k=R.useCallback(async $=>{var M,F;i("complete"),b();const B=Math.round((Date.now()-o)/1e3),z=d?$>=d.requiredScore:!1,U=T();if(U){const H={happy:{arabic:c("emotion.happy"),emoji:""},neutral:{arabic:c("emotion.neutral"),emoji:""},sad:{arabic:c("emotion.sad"),emoji:""},angry:{arabic:c("emotion.angry"),emoji:""},surprised:{arabic:c("emotion.surprised"),emoji:""},fearful:{arabic:c("emotion.fearful"),emoji:""},disgusted:{arabic:c("emotion.disgusted"),emoji:""}},X=l.current.filter(le=>le===U).length,K=l.current.length,Q=K>0?X/K:.5,ae={emotion:U,confidence:Q,arabicLabel:((M=H[U])==null?void 0:M.arabic)||c("emotion.neutral"),emoji:((F=H[U])==null?void 0:F.emoji)||""};await E(t,ae),C({title:`${c("game.dominantEmotion")} ${ae.emoji} ${ae.arabicLabel}`,description:`${c("game.emotionRecorded")} ${t}`})}l.current=[],await S({levelNumber:t,gameType:(d==null?void 0:d.gameType)||"unknown",score:$,isCompleted:z,timeSpentSeconds:B,attempts:1}),setTimeout(()=>{n($)},2e3)},[t,d,o,S,b,n,T,E,C,c]);if(!d)return D.jsxs("div",{className:"text-center p-8",children:[D.jsx("p",{className:"text-xl",children:c("game.stageNotFound")}),D.jsx(jn,{onClick:e,className:"mt-4",children:c("game.goBack")})]});const I=()=>{switch(d.gameType){case"matching":return d.matchingItems&&D.jsx(Yse,{items:d.matchingItems,onComplete:k});case"mcq":return d.mcqQuestions&&D.jsx(Jse,{questions:d.mcqQuestions,onComplete:k});case"fillblank":return d.fillBlankQuestions&&D.jsx(Qse,{questions:d.fillBlankQuestions,onComplete:k});case"dragdrop":return d.dragDropItems&&D.jsx(eue,{items:d.dragDropItems,onComplete:k});default:return null}};return D.jsxs("div",{className:"min-h-screen p-4 pb-20",children:[D.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:D.jsx(jn,{variant:"ghost",onClick:e,className:"text-lg",children:c("game.back")})}),r==="lesson"&&D.jsx(Xse,{lesson:d.lesson,stageNumber:d.id,stageIcon:d.icon,onStartGame:P}),r==="game"&&I(),r==="complete"&&D.jsx(tt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed inset-0 flex items-center justify-center bg-background/90 backdrop-blur-sm z-50",children:D.jsxs("div",{className:"text-center p-8",children:[D.jsx("div",{className:"text-8xl mb-4 animate-bounce-in",children:""}),D.jsx("h2",{className:"text-4xl font-bold mb-2",children:c("game.wellDone")}),D.jsxs("p",{className:"text-xl text-muted-foreground",children:[c("game.completedStage")," ",d.id]})]})}),s==="granted"&&r==="game"&&D.jsx(tue,{videoRef:p,currentEmotion:m,isActive:v,isLoading:g,emotionsCount:l.current.length})]})};var Tve=Array.isArray,zr=Tve,Pve=typeof cv=="object"&&cv&&cv.Object===Object&&cv,L6=Pve,Ove=L6,kve=typeof self=="object"&&self&&self.Object===Object&&self,Ive=Ove||kve||Function("return this")(),ca=Ive,Rve=ca,Nve=Rve.Symbol,qm=Nve,lM=qm,F6=Object.prototype,Dve=F6.hasOwnProperty,Mve=F6.toString,ad=lM?lM.toStringTag:void 0;function $ve(t){var e=Dve.call(t,ad),n=t[ad];try{t[ad]=void 0;var r=!0}catch{}var i=Mve.call(t);return r&&(e?t[ad]=n:delete t[ad]),i}var jve=$ve,Lve=Object.prototype,Fve=Lve.toString;function Bve(t){return Fve.call(t)}var Uve=Bve,cM=qm,Vve=jve,Wve=Uve,zve="[object Null]",Hve="[object Undefined]",fM=cM?cM.toStringTag:void 0;function qve(t){return t==null?t===void 0?Hve:zve:fM&&fM in Object(t)?Vve(t):Wve(t)}var Qa=qve;function Gve(t){return t!=null&&typeof t=="object"}var Za=Gve,Kve=Qa,Xve=Za,Yve="[object Symbol]";function Jve(t){return typeof t=="symbol"||Xve(t)&&Kve(t)==Yve}var wh=Jve,Qve=zr,Zve=wh,ege=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tge=/^\w*$/;function nge(t,e){if(Qve(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Zve(t)?!0:tge.test(t)||!ege.test(t)||e!=null&&t in Object(e)}var vP=nge;function rge(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var vu=rge;const xh=pt(vu);var ige=Qa,oge=vu,age="[object AsyncFunction]",sge="[object Function]",uge="[object GeneratorFunction]",lge="[object Proxy]";function cge(t){if(!oge(t))return!1;var e=ige(t);return e==sge||e==uge||e==age||e==lge}var gP=cge;const We=pt(gP);var fge=ca,hge=fge["__core-js_shared__"],dge=hge,Y1=dge,hM=function(){var t=/[^.]+$/.exec(Y1&&Y1.keys&&Y1.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function pge(t){return!!hM&&hM in t}var mge=pge,vge=Function.prototype,gge=vge.toString;function yge(t){if(t!=null){try{return gge.call(t)}catch{}try{return t+""}catch{}}return""}var B6=yge,bge=gP,wge=mge,xge=vu,_ge=B6,Sge=/[\\^$.*+?()[\]{}|]/g,Ege=/^\[object .+?Constructor\]$/,Cge=Function.prototype,Age=Object.prototype,Tge=Cge.toString,Pge=Age.hasOwnProperty,Oge=RegExp("^"+Tge.call(Pge).replace(Sge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kge(t){if(!xge(t)||wge(t))return!1;var e=bge(t)?Oge:Ege;return e.test(_ge(t))}var Ige=kge;function Rge(t,e){return t==null?void 0:t[e]}var Nge=Rge,Dge=Ige,Mge=Nge;function $ge(t,e){var n=Mge(t,e);return Dge(n)?n:void 0}var Vl=$ge,jge=Vl,Lge=jge(Object,"create"),rw=Lge,dM=rw;function Fge(){this.__data__=dM?dM(null):{},this.size=0}var Bge=Fge;function Uge(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Vge=Uge,Wge=rw,zge="__lodash_hash_undefined__",Hge=Object.prototype,qge=Hge.hasOwnProperty;function Gge(t){var e=this.__data__;if(Wge){var n=e[t];return n===zge?void 0:n}return qge.call(e,t)?e[t]:void 0}var Kge=Gge,Xge=rw,Yge=Object.prototype,Jge=Yge.hasOwnProperty;function Qge(t){var e=this.__data__;return Xge?e[t]!==void 0:Jge.call(e,t)}var Zge=Qge,eye=rw,tye="__lodash_hash_undefined__";function nye(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=eye&&e===void 0?tye:e,this}var rye=nye,iye=Bge,oye=Vge,aye=Kge,sye=Zge,uye=rye;function _h(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_h.prototype.clear=iye;_h.prototype.delete=oye;_h.prototype.get=aye;_h.prototype.has=sye;_h.prototype.set=uye;var lye=_h;function cye(){this.__data__=[],this.size=0}var fye=cye;function hye(t,e){return t===e||t!==t&&e!==e}var yP=hye,dye=yP;function pye(t,e){for(var n=t.length;n--;)if(dye(t[n][0],e))return n;return-1}var iw=pye,mye=iw,vye=Array.prototype,gye=vye.splice;function yye(t){var e=this.__data__,n=mye(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():gye.call(e,n,1),--this.size,!0}var bye=yye,wye=iw;function xye(t){var e=this.__data__,n=wye(e,t);return n<0?void 0:e[n][1]}var _ye=xye,Sye=iw;function Eye(t){return Sye(this.__data__,t)>-1}var Cye=Eye,Aye=iw;function Tye(t,e){var n=this.__data__,r=Aye(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var Pye=Tye,Oye=fye,kye=bye,Iye=_ye,Rye=Cye,Nye=Pye;function Sh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Sh.prototype.clear=Oye;Sh.prototype.delete=kye;Sh.prototype.get=Iye;Sh.prototype.has=Rye;Sh.prototype.set=Nye;var ow=Sh,Dye=Vl,Mye=ca,$ye=Dye(Mye,"Map"),bP=$ye,pM=lye,jye=ow,Lye=bP;function Fye(){this.size=0,this.__data__={hash:new pM,map:new(Lye||jye),string:new pM}}var Bye=Fye;function Uye(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Vye=Uye,Wye=Vye;function zye(t,e){var n=t.__data__;return Wye(e)?n[typeof e=="string"?"string":"hash"]:n.map}var aw=zye,Hye=aw;function qye(t){var e=Hye(this,t).delete(t);return this.size-=e?1:0,e}var Gye=qye,Kye=aw;function Xye(t){return Kye(this,t).get(t)}var Yye=Xye,Jye=aw;function Qye(t){return Jye(this,t).has(t)}var Zye=Qye,e0e=aw;function t0e(t,e){var n=e0e(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var n0e=t0e,r0e=Bye,i0e=Gye,o0e=Yye,a0e=Zye,s0e=n0e;function Eh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Eh.prototype.clear=r0e;Eh.prototype.delete=i0e;Eh.prototype.get=o0e;Eh.prototype.has=a0e;Eh.prototype.set=s0e;var wP=Eh,U6=wP,u0e="Expected a function";function xP(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(u0e);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(xP.Cache||U6),n}xP.Cache=U6;var V6=xP;const l0e=pt(V6);var c0e=V6,f0e=500;function h0e(t){var e=c0e(t,function(r){return n.size===f0e&&n.clear(),r}),n=e.cache;return e}var d0e=h0e,p0e=d0e,m0e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v0e=/\\(\\)?/g,g0e=p0e(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(m0e,function(n,r,i,o){e.push(i?o.replace(v0e,"$1"):r||n)}),e}),y0e=g0e;function b0e(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var _P=b0e,mM=qm,w0e=_P,x0e=zr,_0e=wh,S0e=1/0,vM=mM?mM.prototype:void 0,gM=vM?vM.toString:void 0;function W6(t){if(typeof t=="string")return t;if(x0e(t))return w0e(t,W6)+"";if(_0e(t))return gM?gM.call(t):"";var e=t+"";return e=="0"&&1/t==-S0e?"-0":e}var E0e=W6,C0e=E0e;function A0e(t){return t==null?"":C0e(t)}var z6=A0e,T0e=zr,P0e=vP,O0e=y0e,k0e=z6;function I0e(t,e){return T0e(t)?t:P0e(t,e)?[t]:O0e(k0e(t))}var H6=I0e,R0e=wh,N0e=1/0;function D0e(t){if(typeof t=="string"||R0e(t))return t;var e=t+"";return e=="0"&&1/t==-N0e?"-0":e}var sw=D0e,M0e=H6,$0e=sw;function j0e(t,e){e=M0e(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[$0e(e[n++])];return n&&n==r?t:void 0}var SP=j0e,L0e=SP;function F0e(t,e,n){var r=t==null?void 0:L0e(t,e);return r===void 0?n:r}var q6=F0e;const di=pt(q6);function B0e(t){return t==null}var U0e=B0e;const Xe=pt(U0e);var V0e=Qa,W0e=zr,z0e=Za,H0e="[object String]";function q0e(t){return typeof t=="string"||!W0e(t)&&z0e(t)&&V0e(t)==H0e}var G0e=q0e;const kl=pt(G0e);var G6={exports:{}},mt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EP=Symbol.for("react.element"),CP=Symbol.for("react.portal"),uw=Symbol.for("react.fragment"),lw=Symbol.for("react.strict_mode"),cw=Symbol.for("react.profiler"),fw=Symbol.for("react.provider"),hw=Symbol.for("react.context"),K0e=Symbol.for("react.server_context"),dw=Symbol.for("react.forward_ref"),pw=Symbol.for("react.suspense"),mw=Symbol.for("react.suspense_list"),vw=Symbol.for("react.memo"),gw=Symbol.for("react.lazy"),X0e=Symbol.for("react.offscreen"),K6;K6=Symbol.for("react.module.reference");function Bi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case EP:switch(t=t.type,t){case uw:case cw:case lw:case pw:case mw:return t;default:switch(t=t&&t.$$typeof,t){case K0e:case hw:case dw:case gw:case vw:case fw:return t;default:return e}}case CP:return e}}}mt.ContextConsumer=hw;mt.ContextProvider=fw;mt.Element=EP;mt.ForwardRef=dw;mt.Fragment=uw;mt.Lazy=gw;mt.Memo=vw;mt.Portal=CP;mt.Profiler=cw;mt.StrictMode=lw;mt.Suspense=pw;mt.SuspenseList=mw;mt.isAsyncMode=function(){return!1};mt.isConcurrentMode=function(){return!1};mt.isContextConsumer=function(t){return Bi(t)===hw};mt.isContextProvider=function(t){return Bi(t)===fw};mt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===EP};mt.isForwardRef=function(t){return Bi(t)===dw};mt.isFragment=function(t){return Bi(t)===uw};mt.isLazy=function(t){return Bi(t)===gw};mt.isMemo=function(t){return Bi(t)===vw};mt.isPortal=function(t){return Bi(t)===CP};mt.isProfiler=function(t){return Bi(t)===cw};mt.isStrictMode=function(t){return Bi(t)===lw};mt.isSuspense=function(t){return Bi(t)===pw};mt.isSuspenseList=function(t){return Bi(t)===mw};mt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uw||t===cw||t===lw||t===pw||t===mw||t===X0e||typeof t=="object"&&t!==null&&(t.$$typeof===gw||t.$$typeof===vw||t.$$typeof===fw||t.$$typeof===hw||t.$$typeof===dw||t.$$typeof===K6||t.getModuleId!==void 0)};mt.typeOf=Bi;G6.exports=mt;var Y0e=G6.exports,J0e=Qa,Q0e=Za,Z0e="[object Number]";function ebe(t){return typeof t=="number"||Q0e(t)&&J0e(t)==Z0e}var X6=ebe;const tbe=pt(X6);var nbe=X6;function rbe(t){return nbe(t)&&t!=+t}var ibe=rbe;const Gm=pt(ibe);var xr=function(e){return e===0?0:e>0?1:-1},rl=function(e){return kl(e)&&e.indexOf("%")===e.length-1},he=function(e){return tbe(e)&&!Gm(e)},obe=function(e){return Xe(e)},En=function(e){return he(e)||kl(e)},abe=0,Km=function(e){var n=++abe;return"".concat(e||"").concat(n)},_r=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!he(e)&&!kl(e))return r;var o;if(rl(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return Gm(o)&&(o=r),i&&o>n&&(o=n),o},vc=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},sbe=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},ws=function(e,n){return he(e)&&he(n)?function(r){return e+r*(n-e)}:function(){return n}};function LE(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):di(r,e))===n})}var ube=function(e,n){return he(e)&&he(n)?e-n:kl(e)&&kl(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function lf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function FE(t){"@babel/helpers - typeof";return FE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FE(t)}var lbe=["viewBox","children"],cbe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],yM=["points","pathLength"],J1={svg:lbe,polygon:yM,polyline:yM},AP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],i0=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(R.isValidElement(e)&&(r=e.props),!xh(r))return null;var i={};return Object.keys(r).forEach(function(o){AP.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},fbe=function(e,n,r){return function(i){return e(n,r,i),null}},Il=function(e,n,r){if(!xh(e)||FE(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];AP.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=fbe(a,n,r))}),i},hbe=["children"],dbe=["children"];function bM(t,e){if(t==null)return{};var n=pbe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var wM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Pa=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},xM=null,Q1=null,TP=function t(e){if(e===xM&&Array.isArray(Q1))return Q1;var n=[];return R.Children.forEach(e,function(r){Xe(r)||(Y0e.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Q1=n,xM=e,n};function Mi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Pa(i)}):r=[Pa(e)],TP(t).forEach(function(i){var o=di(i,"type.displayName")||di(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function ei(t,e){var n=Mi(t,e);return n&&n[0]}var _M=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!he(r)||r<=0||!he(i)||i<=0)},mbe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],vbe=function(e){return e&&e.type&&kl(e.type)&&mbe.indexOf(e.type)>=0},gbe=function(e,n,r,i){var o,a=(o=J1==null?void 0:J1[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!We(e)&&(i&&a.includes(n)||cbe.includes(n))||r&&AP.includes(n)},Le=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(R.isValidElement(e)&&(i=e.props),!xh(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;gbe((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},BE=function t(e,n){if(e===n)return!0;var r=R.Children.count(e);if(r!==R.Children.count(n))return!1;if(r===0)return!0;if(r===1)return SM(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!SM(o,a))return!1}return!0},SM=function(e,n){if(Xe(e)&&Xe(n))return!0;if(!Xe(e)&&!Xe(n)){var r=e.props||{},i=r.children,o=bM(r,hbe),a=n.props||{},s=a.children,u=bM(a,dbe);return i&&s?lf(o,u)&&BE(i,s):!i&&!s?lf(o,u):!1}return!1},EM=function(e,n){var r=[],i={};return TP(e).forEach(function(o,a){if(vbe(o))r.push(o);else if(o){var s=Pa(o.type),u=n[s]||{},l=u.handler,c=u.once;if(l&&(!c||!i[s])){var f=l(o,s,a);r.push(f),i[s]=!0}}}),r},ybe=function(e){var n=e&&e.type;return n&&wM[n]?wM[n]:null},bbe=function(e,n){return TP(n).indexOf(e)},wbe=["children","width","height","viewBox","className","style","title","desc"];function UE(){return UE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UE.apply(this,arguments)}function xbe(t,e){if(t==null)return{};var n=_be(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _be(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VE(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,u=t.desc,l=xbe(t,wbe),c=i||{width:n,height:r,x:0,y:0},f=qe("recharts-surface",o);return W.createElement("svg",UE({},Le(l,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),W.createElement("title",null,s),W.createElement("desc",null,u),e)}var Sbe=["children","className"];function WE(){return WE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},WE.apply(this,arguments)}function Ebe(t,e){if(t==null)return{};var n=Cbe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ht=W.forwardRef(function(t,e){var n=t.children,r=t.className,i=Ebe(t,Sbe),o=qe("recharts-layer",r);return W.createElement("g",WE({className:o},Le(i,!0),{ref:e}),n)}),Oa=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function Abe(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var Tbe=Abe,Pbe=Tbe;function Obe(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Pbe(t,e,n)}var kbe=Obe,Ibe="\\ud800-\\udfff",Rbe="\\u0300-\\u036f",Nbe="\\ufe20-\\ufe2f",Dbe="\\u20d0-\\u20ff",Mbe=Rbe+Nbe+Dbe,$be="\\ufe0e\\ufe0f",jbe="\\u200d",Lbe=RegExp("["+jbe+Ibe+Mbe+$be+"]");function Fbe(t){return Lbe.test(t)}var Y6=Fbe;function Bbe(t){return t.split("")}var Ube=Bbe,J6="\\ud800-\\udfff",Vbe="\\u0300-\\u036f",Wbe="\\ufe20-\\ufe2f",zbe="\\u20d0-\\u20ff",Hbe=Vbe+Wbe+zbe,qbe="\\ufe0e\\ufe0f",Gbe="["+J6+"]",zE="["+Hbe+"]",HE="\\ud83c[\\udffb-\\udfff]",Kbe="(?:"+zE+"|"+HE+")",Q6="[^"+J6+"]",Z6="(?:\\ud83c[\\udde6-\\uddff]){2}",ez="[\\ud800-\\udbff][\\udc00-\\udfff]",Xbe="\\u200d",tz=Kbe+"?",nz="["+qbe+"]?",Ybe="(?:"+Xbe+"(?:"+[Q6,Z6,ez].join("|")+")"+nz+tz+")*",Jbe=nz+tz+Ybe,Qbe="(?:"+[Q6+zE+"?",zE,Z6,ez,Gbe].join("|")+")",Zbe=RegExp(HE+"(?="+HE+")|"+Qbe+Jbe,"g");function ewe(t){return t.match(Zbe)||[]}var twe=ewe,nwe=Ube,rwe=Y6,iwe=twe;function owe(t){return rwe(t)?iwe(t):nwe(t)}var awe=owe,swe=kbe,uwe=Y6,lwe=awe,cwe=z6;function fwe(t){return function(e){e=cwe(e);var n=uwe(e)?lwe(e):void 0,r=n?n[0]:e.charAt(0),i=n?swe(n,1).join(""):e.slice(1);return r[t]()+i}}var hwe=fwe,dwe=hwe,pwe=dwe("toUpperCase"),mwe=pwe;const yw=pt(mwe);function Ct(t){return function(){return t}}const rz=Math.cos,o0=Math.sin,_o=Math.sqrt,a0=Math.PI,bw=2*a0,qE=Math.PI,GE=2*qE,Bu=1e-6,vwe=GE-Bu;function iz(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function gwe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return iz;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class ywe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?iz:gwe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,u=r-e,l=i-n,c=a-e,f=s-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Bu)if(!(Math.abs(f*u-l*c)>Bu)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,p=i-s,m=u*u+l*l,v=d*d+p*p,g=Math.sqrt(m),y=Math.sqrt(h),b=o*Math.tan((qE-Math.acos((m+h-v)/(2*g*y)))/2),_=b/y,x=b/g;Math.abs(_-1)>Bu&&this._append`L${e+_*c},${n+_*f}`,this._append`A${o},${o},0,0,${+(f*d>c*p)},${this._x1=e+x*u},${this._y1=n+x*l}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=e+s,c=n+u,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Bu||Math.abs(this._y1-c)>Bu)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%GE+GE),h>vwe?this._append`A${r},${r},0,1,${f},${e-s},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>Bu&&this._append`A${r},${r},0,${+(h>=qE)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function PP(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ywe(e)}function OP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oz(t){this._context=t}oz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ww(t){return new oz(t)}function az(t){return t[0]}function sz(t){return t[1]}function uz(t,e){var n=Ct(!0),r=null,i=ww,o=null,a=PP(s);t=typeof t=="function"?t:t===void 0?az:Ct(t),e=typeof e=="function"?e:e===void 0?sz:Ct(e);function s(u){var l,c=(u=OP(u)).length,f,h=!1,d;for(r==null&&(o=i(d=a())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,l,u),+e(f,l,u));if(d)return o=null,d+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Ct(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:Ct(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Ct(!!u),s):n},s.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),s):r},s}function og(t,e,n){var r=null,i=Ct(!0),o=null,a=ww,s=null,u=PP(l);t=typeof t=="function"?t:t===void 0?az:Ct(+t),e=typeof e=="function"?e:Ct(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?sz:Ct(+n);function l(f){var h,d,p,m=(f=OP(f)).length,v,g=!1,y,b=new Array(m),_=new Array(m);for(o==null&&(s=a(y=u())),h=0;h<=m;++h){if(!(h<m&&i(v=f[h],h,f))===g)if(g=!g)d=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=h-1;p>=d;--p)s.point(b[p],_[p]);s.lineEnd(),s.areaEnd()}g&&(b[h]=+t(v,h,f),_[h]=+e(v,h,f),s.point(r?+r(v,h,f):b[h],n?+n(v,h,f):_[h]))}if(y)return s=null,y+""||null}function c(){return uz().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ct(+f),r=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Ct(+f),l):t},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ct(+f),l):r},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ct(+f),n=null,l):e},l.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Ct(+f),l):e},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ct(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ct(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}class lz{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function bwe(t){return new lz(t,!0)}function wwe(t){return new lz(t,!1)}const kP={draw(t,e){const n=_o(e/a0);t.moveTo(n,0),t.arc(0,0,n,0,bw)}},xwe={draw(t,e){const n=_o(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},cz=_o(1/3),_we=cz*2,Swe={draw(t,e){const n=_o(e/_we),r=n*cz;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Ewe={draw(t,e){const n=_o(e),r=-n/2;t.rect(r,r,n,n)}},Cwe=.8908130915292852,fz=o0(a0/10)/o0(7*a0/10),Awe=o0(bw/10)*fz,Twe=-rz(bw/10)*fz,Pwe={draw(t,e){const n=_o(e*Cwe),r=Awe*n,i=Twe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=bw*o/5,s=rz(a),u=o0(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},Z1=_o(3),Owe={draw(t,e){const n=-_o(e/(Z1*3));t.moveTo(0,n*2),t.lineTo(-Z1*n,-n),t.lineTo(Z1*n,-n),t.closePath()}},yi=-.5,bi=_o(3)/2,KE=1/_o(12),kwe=(KE/2+1)*3,Iwe={draw(t,e){const n=_o(e/kwe),r=n/2,i=n*KE,o=r,a=n*KE+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(yi*r-bi*i,bi*r+yi*i),t.lineTo(yi*o-bi*a,bi*o+yi*a),t.lineTo(yi*s-bi*u,bi*s+yi*u),t.lineTo(yi*r+bi*i,yi*i-bi*r),t.lineTo(yi*o+bi*a,yi*a-bi*o),t.lineTo(yi*s+bi*u,yi*u-bi*s),t.closePath()}};function Rwe(t,e){let n=null,r=PP(i);t=typeof t=="function"?t:Ct(t||kP),e=typeof e=="function"?e:Ct(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Ct(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Ct(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function s0(){}function u0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function hz(t){this._context=t}hz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:u0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:u0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Nwe(t){return new hz(t)}function dz(t){this._context=t}dz.prototype={areaStart:s0,areaEnd:s0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:u0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Dwe(t){return new dz(t)}function pz(t){this._context=t}pz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:u0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Mwe(t){return new pz(t)}function mz(t){this._context=t}mz.prototype={areaStart:s0,areaEnd:s0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function $we(t){return new mz(t)}function CM(t){return t<0?-1:1}function AM(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(CM(o)+CM(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function TM(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function e_(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function l0(t){this._context=t}l0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:e_(this,this._t0,TM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,e_(this,TM(this,n=AM(this,t,e)),n);break;default:e_(this,this._t0,n=AM(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function vz(t){this._context=new gz(t)}(vz.prototype=Object.create(l0.prototype)).point=function(t,e){l0.prototype.point.call(this,e,t)};function gz(t){this._context=t}gz.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function jwe(t){return new l0(t)}function Lwe(t){return new vz(t)}function yz(t){this._context=t}yz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=PM(t),i=PM(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function PM(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Fwe(t){return new yz(t)}function xw(t,e){this._context=t,this._t=e}xw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Bwe(t){return new xw(t,.5)}function Uwe(t){return new xw(t,0)}function Vwe(t){return new xw(t,1)}function $f(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function XE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Wwe(t,e){return t[e]}function zwe(t){const e=[];return e.key=t,e}function Hwe(){var t=Ct([]),e=XE,n=$f,r=Wwe;function i(o){var a=Array.from(t.apply(this,arguments),zwe),s,u=a.length,l=-1,c;for(const f of o)for(s=0,++l;s<u;++s)(a[s][l]=[0,+r(f,a[s].key,l,o)]).data=f;for(s=0,c=OP(e(a));s<u;++s)a[c[s]].index=s;return n(a,c),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Ct(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Ct(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?XE:typeof o=="function"?o:Ct(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??$f,i):n},i}function qwe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}$f(t,e)}}function Gwe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}$f(t,e)}}function Kwe(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,u=0,l=0;s<a;++s){for(var c=t[e[s]],f=c[r][1]||0,h=c[r-1][1]||0,d=(f-h)/2,p=0;p<s;++p){var m=t[e[p]],v=m[r][1]||0,g=m[r-1][1]||0;d+=v-g}u+=f,l+=d*f}i[r-1][1]+=i[r-1][0]=n,u&&(n-=l/u)}i[r-1][1]+=i[r-1][0]=n,$f(t,e)}}function Lp(t){"@babel/helpers - typeof";return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(t)}var Xwe=["type","size","sizeType"];function YE(){return YE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YE.apply(this,arguments)}function OM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OM(Object(n),!0).forEach(function(r){Ywe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ywe(t,e,n){return e=Jwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jwe(t){var e=Qwe(t,"string");return Lp(e)=="symbol"?e:e+""}function Qwe(t,e){if(Lp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zwe(t,e){if(t==null)return{};var n=exe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function exe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var bz={symbolCircle:kP,symbolCross:xwe,symbolDiamond:Swe,symbolSquare:Ewe,symbolStar:Pwe,symbolTriangle:Owe,symbolWye:Iwe},txe=Math.PI/180,nxe=function(e){var n="symbol".concat(yw(e));return bz[n]||kP},rxe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*txe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ixe=function(e,n){bz["symbol".concat(yw(e))]=n},IP=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,u=Zwe(e,Xwe),l=kM(kM({},u),{},{type:r,size:o,sizeType:s}),c=function(){var v=nxe(r),g=Rwe().type(v).size(rxe(o,s,r));return g()},f=l.className,h=l.cx,d=l.cy,p=Le(l,!0);return h===+h&&d===+d&&o===+o?W.createElement("path",YE({},p,{className:qe("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(d,")"),d:c()})):null};IP.registerSymbol=ixe;function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function JE(){return JE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},JE.apply(this,arguments)}function IM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IM(Object(n),!0).forEach(function(r){Fp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function axe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xz(r.key),r)}}function uxe(t,e,n){return e&&sxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lxe(t,e,n){return e=c0(e),cxe(t,wz()?Reflect.construct(e,n||[],c0(t).constructor):e.apply(t,n))}function cxe(t,e){if(e&&(jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fxe(t)}function fxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wz=function(){return!!t})()}function c0(t){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c0(t)}function hxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QE(t,e)}function QE(t,e){return QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QE(t,e)}function Fp(t,e,n){return e=xz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xz(t){var e=dxe(t,"string");return jf(e)=="symbol"?e:e+""}function dxe(t,e){if(jf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wi=32,RP=function(t){function e(){return axe(this,e),lxe(this,e,arguments)}return hxe(e,t),uxe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=wi/2,a=wi/6,s=wi/3,u=r.inactive?i:r.color;if(r.type==="plainline")return W.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:wi,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return W.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(wi,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return W.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(wi/8,"h").concat(wi,"v").concat(wi*3/4,"h").concat(-wi,"z"),className:"recharts-legend-icon"});if(W.isValidElement(r.legendIcon)){var l=oxe({},r);return delete l.legendIcon,W.cloneElement(r.legendIcon,l)}return W.createElement(IP,{fill:u,cx:o,cy:o,size:wi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,u=i.formatter,l=i.inactiveColor,c={x:0,y:0,width:wi,height:wi},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(d,p){var m=d.formatter||u,v=qe(Fp(Fp({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",d.inactive));if(d.type==="none")return null;var g=We(d.value)?null:d.value;Oa(!We(d.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=d.inactive?l:d.color;return W.createElement("li",JE({className:v,style:f,key:"legend-item-".concat(p)},Il(r.props,d,p)),W.createElement(VE,{width:a,height:a,viewBox:c,style:h},r.renderIcon(d)),W.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},m?m(g,d,p):g))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return W.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(R.PureComponent);Fp(RP,"displayName","Legend");Fp(RP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var pxe=ow;function mxe(){this.__data__=new pxe,this.size=0}var vxe=mxe;function gxe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var yxe=gxe;function bxe(t){return this.__data__.get(t)}var wxe=bxe;function xxe(t){return this.__data__.has(t)}var _xe=xxe,Sxe=ow,Exe=bP,Cxe=wP,Axe=200;function Txe(t,e){var n=this.__data__;if(n instanceof Sxe){var r=n.__data__;if(!Exe||r.length<Axe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Cxe(r)}return n.set(t,e),this.size=n.size,this}var Pxe=Txe,Oxe=ow,kxe=vxe,Ixe=yxe,Rxe=wxe,Nxe=_xe,Dxe=Pxe;function Ch(t){var e=this.__data__=new Oxe(t);this.size=e.size}Ch.prototype.clear=kxe;Ch.prototype.delete=Ixe;Ch.prototype.get=Rxe;Ch.prototype.has=Nxe;Ch.prototype.set=Dxe;var _z=Ch,Mxe="__lodash_hash_undefined__";function $xe(t){return this.__data__.set(t,Mxe),this}var jxe=$xe;function Lxe(t){return this.__data__.has(t)}var Fxe=Lxe,Bxe=wP,Uxe=jxe,Vxe=Fxe;function f0(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Bxe;++e<n;)this.add(t[e])}f0.prototype.add=f0.prototype.push=Uxe;f0.prototype.has=Vxe;var Sz=f0;function Wxe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Ez=Wxe;function zxe(t,e){return t.has(e)}var Cz=zxe,Hxe=Sz,qxe=Ez,Gxe=Cz,Kxe=1,Xxe=2;function Yxe(t,e,n,r,i,o){var a=n&Kxe,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var f=-1,h=!0,d=n&Xxe?new Hxe:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var p=t[f],m=e[f];if(r)var v=a?r(m,p,f,e,t,o):r(p,m,f,t,e,o);if(v!==void 0){if(v)continue;h=!1;break}if(d){if(!qxe(e,function(g,y){if(!Gxe(d,y)&&(p===g||i(p,g,n,r,o)))return d.push(y)})){h=!1;break}}else if(!(p===m||i(p,m,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var Az=Yxe,Jxe=ca,Qxe=Jxe.Uint8Array,Zxe=Qxe;function e1e(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var t1e=e1e;function n1e(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var NP=n1e,RM=qm,NM=Zxe,r1e=yP,i1e=Az,o1e=t1e,a1e=NP,s1e=1,u1e=2,l1e="[object Boolean]",c1e="[object Date]",f1e="[object Error]",h1e="[object Map]",d1e="[object Number]",p1e="[object RegExp]",m1e="[object Set]",v1e="[object String]",g1e="[object Symbol]",y1e="[object ArrayBuffer]",b1e="[object DataView]",DM=RM?RM.prototype:void 0,t_=DM?DM.valueOf:void 0;function w1e(t,e,n,r,i,o,a){switch(n){case b1e:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y1e:return!(t.byteLength!=e.byteLength||!o(new NM(t),new NM(e)));case l1e:case c1e:case d1e:return r1e(+t,+e);case f1e:return t.name==e.name&&t.message==e.message;case p1e:case v1e:return t==e+"";case h1e:var s=o1e;case m1e:var u=r&s1e;if(s||(s=a1e),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=u1e,a.set(t,e);var c=i1e(s(t),s(e),r,i,o,a);return a.delete(t),c;case g1e:if(t_)return t_.call(t)==t_.call(e)}return!1}var x1e=w1e;function _1e(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Tz=_1e,S1e=Tz,E1e=zr;function C1e(t,e,n){var r=e(t);return E1e(t)?r:S1e(r,n(t))}var A1e=C1e;function T1e(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var P1e=T1e;function O1e(){return[]}var k1e=O1e,I1e=P1e,R1e=k1e,N1e=Object.prototype,D1e=N1e.propertyIsEnumerable,MM=Object.getOwnPropertySymbols,M1e=MM?function(t){return t==null?[]:(t=Object(t),I1e(MM(t),function(e){return D1e.call(t,e)}))}:R1e,$1e=M1e;function j1e(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var L1e=j1e,F1e=Qa,B1e=Za,U1e="[object Arguments]";function V1e(t){return B1e(t)&&F1e(t)==U1e}var W1e=V1e,$M=W1e,z1e=Za,Pz=Object.prototype,H1e=Pz.hasOwnProperty,q1e=Pz.propertyIsEnumerable,G1e=$M(function(){return arguments}())?$M:function(t){return z1e(t)&&H1e.call(t,"callee")&&!q1e.call(t,"callee")},DP=G1e,h0={exports:{}};function K1e(){return!1}var X1e=K1e;h0.exports;(function(t,e){var n=ca,r=X1e,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||r;t.exports=l})(h0,h0.exports);var Oz=h0.exports,Y1e=9007199254740991,J1e=/^(?:0|[1-9]\d*)$/;function Q1e(t,e){var n=typeof t;return e=e??Y1e,!!e&&(n=="number"||n!="symbol"&&J1e.test(t))&&t>-1&&t%1==0&&t<e}var MP=Q1e,Z1e=9007199254740991;function e_e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Z1e}var $P=e_e,t_e=Qa,n_e=$P,r_e=Za,i_e="[object Arguments]",o_e="[object Array]",a_e="[object Boolean]",s_e="[object Date]",u_e="[object Error]",l_e="[object Function]",c_e="[object Map]",f_e="[object Number]",h_e="[object Object]",d_e="[object RegExp]",p_e="[object Set]",m_e="[object String]",v_e="[object WeakMap]",g_e="[object ArrayBuffer]",y_e="[object DataView]",b_e="[object Float32Array]",w_e="[object Float64Array]",x_e="[object Int8Array]",__e="[object Int16Array]",S_e="[object Int32Array]",E_e="[object Uint8Array]",C_e="[object Uint8ClampedArray]",A_e="[object Uint16Array]",T_e="[object Uint32Array]",Rt={};Rt[b_e]=Rt[w_e]=Rt[x_e]=Rt[__e]=Rt[S_e]=Rt[E_e]=Rt[C_e]=Rt[A_e]=Rt[T_e]=!0;Rt[i_e]=Rt[o_e]=Rt[g_e]=Rt[a_e]=Rt[y_e]=Rt[s_e]=Rt[u_e]=Rt[l_e]=Rt[c_e]=Rt[f_e]=Rt[h_e]=Rt[d_e]=Rt[p_e]=Rt[m_e]=Rt[v_e]=!1;function P_e(t){return r_e(t)&&n_e(t.length)&&!!Rt[t_e(t)]}var O_e=P_e;function k_e(t){return function(e){return t(e)}}var kz=k_e,d0={exports:{}};d0.exports;(function(t,e){var n=L6,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(d0,d0.exports);var I_e=d0.exports,R_e=O_e,N_e=kz,jM=I_e,LM=jM&&jM.isTypedArray,D_e=LM?N_e(LM):R_e,Iz=D_e,M_e=L1e,$_e=DP,j_e=zr,L_e=Oz,F_e=MP,B_e=Iz,U_e=Object.prototype,V_e=U_e.hasOwnProperty;function W_e(t,e){var n=j_e(t),r=!n&&$_e(t),i=!n&&!r&&L_e(t),o=!n&&!r&&!i&&B_e(t),a=n||r||i||o,s=a?M_e(t.length,String):[],u=s.length;for(var l in t)(e||V_e.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||F_e(l,u)))&&s.push(l);return s}var z_e=W_e,H_e=Object.prototype;function q_e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||H_e;return t===n}var G_e=q_e;function K_e(t,e){return function(n){return t(e(n))}}var Rz=K_e,X_e=Rz,Y_e=X_e(Object.keys,Object),J_e=Y_e,Q_e=G_e,Z_e=J_e,eSe=Object.prototype,tSe=eSe.hasOwnProperty;function nSe(t){if(!Q_e(t))return Z_e(t);var e=[];for(var n in Object(t))tSe.call(t,n)&&n!="constructor"&&e.push(n);return e}var rSe=nSe,iSe=gP,oSe=$P;function aSe(t){return t!=null&&oSe(t.length)&&!iSe(t)}var _w=aSe,sSe=z_e,uSe=rSe,lSe=_w;function cSe(t){return lSe(t)?sSe(t):uSe(t)}var jP=cSe,fSe=A1e,hSe=$1e,dSe=jP;function pSe(t){return fSe(t,dSe,hSe)}var mSe=pSe,FM=mSe,vSe=1,gSe=Object.prototype,ySe=gSe.hasOwnProperty;function bSe(t,e,n,r,i,o){var a=n&vSe,s=FM(t),u=s.length,l=FM(e),c=l.length;if(u!=c&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in e:ySe.call(e,h)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var m=!0;o.set(t,e),o.set(e,t);for(var v=a;++f<u;){h=s[f];var g=t[h],y=e[h];if(r)var b=a?r(y,g,h,e,t,o):r(g,y,h,t,e,o);if(!(b===void 0?g===y||i(g,y,n,r,o):b)){m=!1;break}v||(v=h=="constructor")}if(m&&!v){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof x=="function"&&x instanceof x)&&(m=!1)}return o.delete(t),o.delete(e),m}var wSe=bSe,xSe=Vl,_Se=ca,SSe=xSe(_Se,"DataView"),ESe=SSe,CSe=Vl,ASe=ca,TSe=CSe(ASe,"Promise"),PSe=TSe,OSe=Vl,kSe=ca,ISe=OSe(kSe,"Set"),Nz=ISe,RSe=Vl,NSe=ca,DSe=RSe(NSe,"WeakMap"),MSe=DSe,ZE=ESe,e2=bP,t2=PSe,n2=Nz,r2=MSe,Dz=Qa,Ah=B6,BM="[object Map]",$Se="[object Object]",UM="[object Promise]",VM="[object Set]",WM="[object WeakMap]",zM="[object DataView]",jSe=Ah(ZE),LSe=Ah(e2),FSe=Ah(t2),BSe=Ah(n2),USe=Ah(r2),Uu=Dz;(ZE&&Uu(new ZE(new ArrayBuffer(1)))!=zM||e2&&Uu(new e2)!=BM||t2&&Uu(t2.resolve())!=UM||n2&&Uu(new n2)!=VM||r2&&Uu(new r2)!=WM)&&(Uu=function(t){var e=Dz(t),n=e==$Se?t.constructor:void 0,r=n?Ah(n):"";if(r)switch(r){case jSe:return zM;case LSe:return BM;case FSe:return UM;case BSe:return VM;case USe:return WM}return e});var VSe=Uu,n_=_z,WSe=Az,zSe=x1e,HSe=wSe,HM=VSe,qM=zr,GM=Oz,qSe=Iz,GSe=1,KM="[object Arguments]",XM="[object Array]",ag="[object Object]",KSe=Object.prototype,YM=KSe.hasOwnProperty;function XSe(t,e,n,r,i,o){var a=qM(t),s=qM(e),u=a?XM:HM(t),l=s?XM:HM(e);u=u==KM?ag:u,l=l==KM?ag:l;var c=u==ag,f=l==ag,h=u==l;if(h&&GM(t)){if(!GM(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new n_),a||qSe(t)?WSe(t,e,n,r,i,o):zSe(t,e,u,n,r,i,o);if(!(n&GSe)){var d=c&&YM.call(t,"__wrapped__"),p=f&&YM.call(e,"__wrapped__");if(d||p){var m=d?t.value():t,v=p?e.value():e;return o||(o=new n_),i(m,v,n,r,o)}}return h?(o||(o=new n_),HSe(t,e,n,r,i,o)):!1}var YSe=XSe,JSe=YSe,JM=Za;function Mz(t,e,n,r,i){return t===e?!0:t==null||e==null||!JM(t)&&!JM(e)?t!==t&&e!==e:JSe(t,e,n,r,Mz,i)}var LP=Mz,QSe=_z,ZSe=LP,eEe=1,tEe=2;function nEe(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(l===void 0&&!(u in t))return!1}else{var f=new QSe;if(r)var h=r(l,c,u,t,e,f);if(!(h===void 0?ZSe(c,l,eEe|tEe,r,f):h))return!1}}return!0}var rEe=nEe,iEe=vu;function oEe(t){return t===t&&!iEe(t)}var $z=oEe,aEe=$z,sEe=jP;function uEe(t){for(var e=sEe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,aEe(i)]}return e}var lEe=uEe;function cEe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var jz=cEe,fEe=rEe,hEe=lEe,dEe=jz;function pEe(t){var e=hEe(t);return e.length==1&&e[0][2]?dEe(e[0][0],e[0][1]):function(n){return n===t||fEe(n,t,e)}}var mEe=pEe;function vEe(t,e){return t!=null&&e in Object(t)}var gEe=vEe,yEe=H6,bEe=DP,wEe=zr,xEe=MP,_Ee=$P,SEe=sw;function EEe(t,e,n){e=yEe(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=SEe(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&_Ee(i)&&xEe(a,i)&&(wEe(t)||bEe(t)))}var CEe=EEe,AEe=gEe,TEe=CEe;function PEe(t,e){return t!=null&&TEe(t,e,AEe)}var OEe=PEe,kEe=LP,IEe=q6,REe=OEe,NEe=vP,DEe=$z,MEe=jz,$Ee=sw,jEe=1,LEe=2;function FEe(t,e){return NEe(t)&&DEe(e)?MEe($Ee(t),e):function(n){var r=IEe(n,t);return r===void 0&&r===e?REe(n,t):kEe(e,r,jEe|LEe)}}var BEe=FEe;function UEe(t){return t}var Th=UEe;function VEe(t){return function(e){return e==null?void 0:e[t]}}var WEe=VEe,zEe=SP;function HEe(t){return function(e){return zEe(e,t)}}var qEe=HEe,GEe=WEe,KEe=qEe,XEe=vP,YEe=sw;function JEe(t){return XEe(t)?GEe(YEe(t)):KEe(t)}var QEe=JEe,ZEe=mEe,e2e=BEe,t2e=Th,n2e=zr,r2e=QEe;function i2e(t){return typeof t=="function"?t:t==null?t2e:typeof t=="object"?n2e(t)?e2e(t[0],t[1]):ZEe(t):r2e(t)}var gu=i2e;function o2e(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var a2e=o2e;function s2e(t){return t!==t}var u2e=s2e;function l2e(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var c2e=l2e,f2e=a2e,h2e=u2e,d2e=c2e;function p2e(t,e,n){return e===e?d2e(t,e,n):f2e(t,h2e,n)}var m2e=p2e,v2e=m2e;function g2e(t,e){var n=t==null?0:t.length;return!!n&&v2e(t,e,0)>-1}var y2e=g2e;function b2e(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var w2e=b2e;function x2e(){}var _2e=x2e,r_=Nz,S2e=_2e,E2e=NP,C2e=1/0,A2e=r_&&1/E2e(new r_([,-0]))[1]==C2e?function(t){return new r_(t)}:S2e,T2e=A2e,P2e=Sz,O2e=y2e,k2e=w2e,I2e=Cz,R2e=T2e,N2e=NP,D2e=200;function M2e(t,e,n){var r=-1,i=O2e,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=k2e;else if(o>=D2e){var l=e?null:R2e(t);if(l)return N2e(l);a=!1,i=I2e,u=new P2e}else u=e?[]:s;e:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;e&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}var $2e=M2e,j2e=gu,L2e=$2e;function F2e(t,e){return t&&t.length?L2e(t,j2e(e)):[]}var B2e=F2e;const QM=pt(B2e);function Lz(t,e,n){return e===!0?QM(t,n):We(e)?QM(t,e):t}function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}var U2e=["ref"];function ZM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZM(Object(n),!0).forEach(function(r){Sw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bz(r.key),r)}}function W2e(t,e,n){return e&&e$(t.prototype,e),n&&e$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z2e(t,e,n){return e=p0(e),H2e(t,Fz()?Reflect.construct(e,n||[],p0(t).constructor):e.apply(t,n))}function H2e(t,e){if(e&&(Lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q2e(t)}function q2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fz=function(){return!!t})()}function p0(t){return p0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},p0(t)}function G2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i2(t,e)}function i2(t,e){return i2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},i2(t,e)}function Sw(t,e,n){return e=Bz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bz(t){var e=K2e(t,"string");return Lf(e)=="symbol"?e:e+""}function K2e(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X2e(t,e){if(t==null)return{};var n=Y2e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Y2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function J2e(t){return t.value}function Q2e(t,e){if(W.isValidElement(t))return W.cloneElement(t,e);if(typeof t=="function")return W.createElement(t,e);e.ref;var n=X2e(e,U2e);return W.createElement(RP,n)}var t$=1,cf=function(t){function e(){var n;V2e(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=z2e(this,e,[].concat(i)),Sw(n,"lastBoundingBox",{width:-1,height:-1}),n}return G2e(e,t),W2e(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>t$||Math.abs(i.height-this.lastBoundingBox.height)>t$)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?da({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,u=i.margin,l=i.chartWidth,c=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var d=this.getBBoxSnapshot();f={left:((l||0)-d.width)/2}}else f=a==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var p=this.getBBoxSnapshot();h={top:((c||0)-p.height)/2}}else h=s==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return da(da({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,u=i.wrapperStyle,l=i.payloadUniqBy,c=i.payload,f=da(da({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(u)),u);return W.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(d){r.wrapperNode=d}},Q2e(o,da(da({},this.props),{},{payload:Lz(c,l,J2e)})))}}],[{key:"getWithHeight",value:function(r,i){var o=da(da({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&he(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(R.PureComponent);Sw(cf,"displayName","Legend");Sw(cf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var n$=qm,Z2e=DP,eCe=zr,r$=n$?n$.isConcatSpreadable:void 0;function tCe(t){return eCe(t)||Z2e(t)||!!(r$&&t&&t[r$])}var nCe=tCe,rCe=Tz,iCe=nCe;function Uz(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=iCe),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Uz(s,e-1,n,r,i):rCe(i,s):r||(i[i.length]=s)}return i}var Vz=Uz;function oCe(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}var aCe=oCe,sCe=aCe,uCe=sCe(),lCe=uCe,cCe=lCe,fCe=jP;function hCe(t,e){return t&&cCe(t,e,fCe)}var Wz=hCe,dCe=_w;function pCe(t,e){return function(n,r){if(n==null)return n;if(!dCe(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var mCe=pCe,vCe=Wz,gCe=mCe,yCe=gCe(vCe),FP=yCe,bCe=FP,wCe=_w;function xCe(t,e){var n=-1,r=wCe(t)?Array(t.length):[];return bCe(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var zz=xCe;function _Ce(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var SCe=_Ce,i$=wh;function ECe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=i$(t),a=e!==void 0,s=e===null,u=e===e,l=i$(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}var CCe=ECe,ACe=CCe;function TCe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=ACe(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*(l=="desc"?-1:1)}}return t.index-e.index}var PCe=TCe,i_=_P,OCe=SP,kCe=gu,ICe=zz,RCe=SCe,NCe=kz,DCe=PCe,MCe=Th,$Ce=zr;function jCe(t,e,n){e.length?e=i_(e,function(o){return $Ce(o)?function(a){return OCe(a,o.length===1?o[0]:o)}:o}):e=[MCe];var r=-1;e=i_(e,NCe(kCe));var i=ICe(t,function(o,a,s){var u=i_(e,function(l){return l(o)});return{criteria:u,index:++r,value:o}});return RCe(i,function(o,a){return DCe(o,a,n)})}var LCe=jCe;function FCe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var BCe=FCe,UCe=BCe,o$=Math.max;function VCe(t,e,n){return e=o$(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=o$(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),UCe(t,this,s)}}var WCe=VCe;function zCe(t){return function(){return t}}var HCe=zCe,qCe=Vl,GCe=function(){try{var t=qCe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Hz=GCe,KCe=HCe,a$=Hz,XCe=Th,YCe=a$?function(t,e){return a$(t,"toString",{configurable:!0,enumerable:!1,value:KCe(e),writable:!0})}:XCe,JCe=YCe,QCe=800,ZCe=16,eAe=Date.now;function tAe(t){var e=0,n=0;return function(){var r=eAe(),i=ZCe-(r-n);if(n=r,i>0){if(++e>=QCe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var nAe=tAe,rAe=JCe,iAe=nAe,oAe=iAe(rAe),aAe=oAe,sAe=Th,uAe=WCe,lAe=aAe;function cAe(t,e){return lAe(uAe(t,e,sAe),t+"")}var fAe=cAe,hAe=yP,dAe=_w,pAe=MP,mAe=vu;function vAe(t,e,n){if(!mAe(n))return!1;var r=typeof e;return(r=="number"?dAe(n)&&pAe(e,n.length):r=="string"&&e in n)?hAe(n[e],t):!1}var Ew=vAe,gAe=Vz,yAe=LCe,bAe=fAe,s$=Ew,wAe=bAe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&s$(t,e[0],e[1])?e=[]:n>2&&s$(e[0],e[1],e[2])&&(e=[e[0]]),yAe(t,gAe(e,1),[])}),xAe=wAe;const BP=pt(xAe);function Bp(t){"@babel/helpers - typeof";return Bp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bp(t)}function o2(){return o2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o2.apply(this,arguments)}function _Ae(t,e){return AAe(t)||CAe(t,e)||EAe(t,e)||SAe()}function SAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EAe(t,e){if(t){if(typeof t=="string")return u$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u$(t,e)}}function u$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function AAe(t){if(Array.isArray(t))return t}function l$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function o_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l$(Object(n),!0).forEach(function(r){TAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TAe(t,e,n){return e=PAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PAe(t){var e=OAe(t,"string");return Bp(e)=="symbol"?e:e+""}function OAe(t,e){if(Bp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kAe(t){return Array.isArray(t)&&En(t[0])&&En(t[1])?t.join(" ~ "):t}var IAe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,u=e.labelStyle,l=u===void 0?{}:u,c=e.payload,f=e.formatter,h=e.itemSorter,d=e.wrapperClassName,p=e.labelClassName,m=e.label,v=e.labelFormatter,g=e.accessibilityLayer,y=g===void 0?!1:g,b=function(){if(c&&c.length){var k={padding:0,margin:0},I=(h?BP(c,h):c).map(function($,B){if($.type==="none")return null;var z=o_({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},s),U=$.formatter||f||kAe,M=$.value,F=$.name,H=M,X=F;if(U&&H!=null&&X!=null){var K=U(M,F,$,B,c);if(Array.isArray(K)){var Q=_Ae(K,2);H=Q[0],X=Q[1]}else H=K}return W.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:z},En(X)?W.createElement("span",{className:"recharts-tooltip-item-name"},X):null,En(X)?W.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,W.createElement("span",{className:"recharts-tooltip-item-value"},H),W.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return W.createElement("ul",{className:"recharts-tooltip-item-list",style:k},I)}return null},_=o_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=o_({margin:0},l),S=!Xe(m),E=S?m:"",C=qe("recharts-default-tooltip",d),A=qe("recharts-tooltip-label",p);S&&v&&c!==void 0&&c!==null&&(E=v(m,c));var T=y?{role:"status","aria-live":"assertive"}:{};return W.createElement("div",o2({className:C,style:_},T),W.createElement("p",{className:A,style:x},W.isValidElement(E)?E:"".concat(E)),b())};function Up(t){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(t)}function sg(t,e,n){return e=RAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RAe(t){var e=NAe(t,"string");return Up(e)=="symbol"?e:e+""}function NAe(t,e){if(Up(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sd="recharts-tooltip-wrapper",DAe={visibility:"hidden"};function MAe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return qe(sd,sg(sg(sg(sg({},"".concat(sd,"-right"),he(n)&&e&&he(e.x)&&n>=e.x),"".concat(sd,"-left"),he(n)&&e&&he(e.x)&&n<e.x),"".concat(sd,"-bottom"),he(r)&&e&&he(e.y)&&r>=e.y),"".concat(sd,"-top"),he(r)&&e&&he(e.y)&&r<e.y))}function c$(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,u=t.viewBox,l=t.viewBoxDimension;if(o&&he(o[r]))return o[r];var c=n[r]-s-i,f=n[r]+i;if(e[r])return a[r]?c:f;if(a[r]){var h=c,d=u[r];return h<d?Math.max(f,u[r]):Math.max(c,u[r])}var p=f+s,m=u[r]+l;return p>m?Math.max(c,u[r]):Math.max(f,u[r])}function $Ae(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function jAe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,u=t.viewBox,l,c,f;return a.height>0&&a.width>0&&n?(c=c$({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),f=c$({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),l=$Ae({translateX:c,translateY:f,useTranslate3d:s})):l=DAe,{cssProperties:l,cssClasses:MAe({translateX:c,translateY:f,coordinate:n})}}function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}function f$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f$(Object(n),!0).forEach(function(r){s2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gz(r.key),r)}}function BAe(t,e,n){return e&&FAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UAe(t,e,n){return e=m0(e),VAe(t,qz()?Reflect.construct(e,n||[],m0(t).constructor):e.apply(t,n))}function VAe(t,e){if(e&&(Ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WAe(t)}function WAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qz=function(){return!!t})()}function m0(t){return m0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m0(t)}function zAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a2(t,e)}function a2(t,e){return a2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},a2(t,e)}function s2(t,e,n){return e=Gz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gz(t){var e=HAe(t,"string");return Ff(e)=="symbol"?e:e+""}function HAe(t,e){if(Ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d$=1,qAe=function(t){function e(){var n;LAe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=UAe(this,e,[].concat(i)),s2(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),s2(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,u,l,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(u=n.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&s!==void 0?s:0,y:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&l!==void 0?l:0}})}}),n}return zAe(e,t),BAe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>d$||Math.abs(r.height-this.state.lastBoundingBox.height)>d$)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,u=i.animationEasing,l=i.children,c=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,d=i.offset,p=i.position,m=i.reverseDirection,v=i.useTranslate3d,g=i.viewBox,y=i.wrapperStyle,b=jAe({allowEscapeViewBox:a,coordinate:c,offsetTopLeft:d,position:p,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:g}),_=b.cssClasses,x=b.cssProperties,S=h$(h$({transition:h&&o?"transform ".concat(s,"ms ").concat(u):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},y);return W.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(C){r.wrapperNode=C}},l)}}])}(R.PureComponent),GAe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ka={isSsr:GAe(),get:function(e){return ka[e]},set:function(e,n){if(typeof e=="string")ka[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){ka[i]=e[i]})}}};function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function p$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p$(Object(n),!0).forEach(function(r){UP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xz(r.key),r)}}function YAe(t,e,n){return e&&XAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function JAe(t,e,n){return e=v0(e),QAe(t,Kz()?Reflect.construct(e,n||[],v0(t).constructor):e.apply(t,n))}function QAe(t,e){if(e&&(Bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZAe(t)}function ZAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kz=function(){return!!t})()}function v0(t){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},v0(t)}function eTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u2(t,e)}function u2(t,e){return u2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},u2(t,e)}function UP(t,e,n){return e=Xz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xz(t){var e=tTe(t,"string");return Bf(e)=="symbol"?e:e+""}function tTe(t,e){if(Bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nTe(t){return t.dataKey}function rTe(t,e){return W.isValidElement(t)?W.cloneElement(t,e):typeof t=="function"?W.createElement(t,e):W.createElement(IAe,e)}var Ro=function(t){function e(){return KAe(this,e),JAe(this,e,arguments)}return eTe(e,t),YAe(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,u=i.animationEasing,l=i.content,c=i.coordinate,f=i.filterNull,h=i.isAnimationActive,d=i.offset,p=i.payload,m=i.payloadUniqBy,v=i.position,g=i.reverseDirection,y=i.useTranslate3d,b=i.viewBox,_=i.wrapperStyle,x=p??[];f&&x.length&&(x=Lz(p.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),m,nTe));var S=x.length>0;return W.createElement(qAe,{allowEscapeViewBox:a,animationDuration:s,animationEasing:u,isAnimationActive:h,active:o,coordinate:c,hasPayload:S,offset:d,position:v,reverseDirection:g,useTranslate3d:y,viewBox:b,wrapperStyle:_},rTe(l,m$(m$({},this.props),{},{payload:x})))}}])}(R.PureComponent);UP(Ro,"displayName","Tooltip");UP(Ro,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ka.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var iTe=ca,oTe=function(){return iTe.Date.now()},aTe=oTe,sTe=/\s/;function uTe(t){for(var e=t.length;e--&&sTe.test(t.charAt(e)););return e}var lTe=uTe,cTe=lTe,fTe=/^\s+/;function hTe(t){return t&&t.slice(0,cTe(t)+1).replace(fTe,"")}var dTe=hTe,pTe=dTe,v$=vu,mTe=wh,g$=NaN,vTe=/^[-+]0x[0-9a-f]+$/i,gTe=/^0b[01]+$/i,yTe=/^0o[0-7]+$/i,bTe=parseInt;function wTe(t){if(typeof t=="number")return t;if(mTe(t))return g$;if(v$(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=v$(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=pTe(t);var n=gTe.test(t);return n||yTe.test(t)?bTe(t.slice(2),n?2:8):vTe.test(t)?g$:+t}var Yz=wTe,xTe=vu,a_=aTe,y$=Yz,_Te="Expected a function",STe=Math.max,ETe=Math.min;function CTe(t,e,n){var r,i,o,a,s,u,l=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(_Te);e=y$(e)||0,xTe(n)&&(c=!!n.leading,f="maxWait"in n,o=f?STe(y$(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h);function d(S){var E=r,C=i;return r=i=void 0,l=S,a=t.apply(C,E),a}function p(S){return l=S,s=setTimeout(g,e),c?d(S):a}function m(S){var E=S-u,C=S-l,A=e-E;return f?ETe(A,o-C):A}function v(S){var E=S-u,C=S-l;return u===void 0||E>=e||E<0||f&&C>=o}function g(){var S=a_();if(v(S))return y(S);s=setTimeout(g,m(S))}function y(S){return s=void 0,h&&r?d(S):(r=i=void 0,a)}function b(){s!==void 0&&clearTimeout(s),l=0,r=u=i=s=void 0}function _(){return s===void 0?a:y(a_())}function x(){var S=a_(),E=v(S);if(r=arguments,i=this,u=S,E){if(s===void 0)return p(u);if(f)return clearTimeout(s),s=setTimeout(g,e),d(u)}return s===void 0&&(s=setTimeout(g,e)),a}return x.cancel=b,x.flush=_,x}var ATe=CTe,TTe=ATe,PTe=vu,OTe="Expected a function";function kTe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(OTe);return PTe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),TTe(t,e,{leading:r,maxWait:e,trailing:i})}var ITe=kTe;const Jz=pt(ITe);function Vp(t){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(t)}function b$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ug(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b$(Object(n),!0).forEach(function(r){RTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RTe(t,e,n){return e=NTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NTe(t){var e=DTe(t,"string");return Vp(e)=="symbol"?e:e+""}function DTe(t,e){if(Vp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MTe(t,e){return FTe(t)||LTe(t,e)||jTe(t,e)||$Te()}function $Te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jTe(t,e){if(t){if(typeof t=="string")return w$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w$(t,e)}}function w$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function LTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function FTe(t){if(Array.isArray(t))return t}var Qz=R.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,u=s===void 0?"100%":s,l=t.minWidth,c=l===void 0?0:l,f=t.minHeight,h=t.maxHeight,d=t.children,p=t.debounce,m=p===void 0?0:p,v=t.id,g=t.className,y=t.onResize,b=t.style,_=b===void 0?{}:b,x=R.useRef(null),S=R.useRef();S.current=y,R.useImperativeHandle(e,function(){return Object.defineProperty(x.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),x.current},configurable:!0})});var E=R.useState({containerWidth:i.width,containerHeight:i.height}),C=MTe(E,2),A=C[0],T=C[1],P=R.useCallback(function(I,$){T(function(B){var z=Math.round(I),U=Math.round($);return B.containerWidth===z&&B.containerHeight===U?B:{containerWidth:z,containerHeight:U}})},[]);R.useEffect(function(){var I=function(F){var H,X=F[0].contentRect,K=X.width,Q=X.height;P(K,Q),(H=S.current)===null||H===void 0||H.call(S,K,Q)};m>0&&(I=Jz(I,m,{trailing:!0,leading:!1}));var $=new ResizeObserver(I),B=x.current.getBoundingClientRect(),z=B.width,U=B.height;return P(z,U),$.observe(x.current),function(){$.disconnect()}},[P,m]);var k=R.useMemo(function(){var I=A.containerWidth,$=A.containerHeight;if(I<0||$<0)return null;Oa(rl(a)||rl(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,u),Oa(!n||n>0,"The aspect(%s) must be greater than zero.",n);var B=rl(a)?I:a,z=rl(u)?$:u;n&&n>0&&(B?z=B/n:z&&(B=z*n),h&&z>h&&(z=h)),Oa(B>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,z,a,u,c,f,n);var U=!Array.isArray(d)&&Pa(d.type).endsWith("Chart");return W.Children.map(d,function(M){return W.isValidElement(M)?R.cloneElement(M,ug({width:B,height:z},U?{style:ug({height:"100%",width:"100%",maxHeight:z,maxWidth:B},M.props.style)}:{})):M})},[n,d,u,h,f,c,A,a]);return W.createElement("div",{id:v?"".concat(v):void 0,className:qe("recharts-responsive-container",g),style:ug(ug({},_),{},{width:a,height:u,minWidth:c,minHeight:f,maxHeight:h}),ref:x},k)}),Cw=function(e){return null};Cw.displayName="Cell";function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}function x$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(n),!0).forEach(function(r){BTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BTe(t,e,n){return e=UTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UTe(t){var e=VTe(t,"string");return Wp(e)=="symbol"?e:e+""}function VTe(t,e){if(Wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sc={widthCache:{},cacheCount:0},WTe=2e3,zTe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_$="recharts_measurement_span";function HTe(t){var e=l2({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var qd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ka.isSsr)return{width:0,height:0};var r=HTe(n),i=JSON.stringify({text:e,copyStyle:r});if(sc.widthCache[i])return sc.widthCache[i];try{var o=document.getElementById(_$);o||(o=document.createElement("span"),o.setAttribute("id",_$),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=l2(l2({},zTe),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),u={width:s.width,height:s.height};return sc.widthCache[i]=u,++sc.cacheCount>WTe&&(sc.cacheCount=0,sc.widthCache={}),u}catch{return{width:0,height:0}}},qTe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function zp(t){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(t)}function g0(t,e){return YTe(t)||XTe(t,e)||KTe(t,e)||GTe()}function GTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KTe(t,e){if(t){if(typeof t=="string")return S$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S$(t,e)}}function S$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function YTe(t){if(Array.isArray(t))return t}function JTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZTe(r.key),r)}}function QTe(t,e,n){return e&&E$(t.prototype,e),n&&E$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ZTe(t){var e=ePe(t,"string");return zp(e)=="symbol"?e:e+""}function ePe(t,e){if(zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,A$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tPe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Zz={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},rPe=Object.keys(Zz),Dc="NaN";function iPe(t,e){return t*Zz[e]}var lg=function(){function t(e,n){JTe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!tPe.test(n)&&(this.num=NaN,this.unit=""),rPe.includes(n)&&(this.num=iPe(e,n),this.unit="px")}return QTe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=nPe.exec(n))!==null&&r!==void 0?r:[],o=g0(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function eH(t){if(t.includes(Dc))return Dc;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=C$.exec(e))!==null&&n!==void 0?n:[],i=g0(r,4),o=i[1],a=i[2],s=i[3],u=lg.parse(o??""),l=lg.parse(s??""),c=a==="*"?u.multiply(l):u.divide(l);if(c.isNaN())return Dc;e=e.replace(C$,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=A$.exec(e))!==null&&f!==void 0?f:[],d=g0(h,4),p=d[1],m=d[2],v=d[3],g=lg.parse(p??""),y=lg.parse(v??""),b=m==="+"?g.add(y):g.subtract(y);if(b.isNaN())return Dc;e=e.replace(A$,b.toString())}return e}var T$=/\(([^()]*)\)/;function oPe(t){for(var e=t;e.includes("(");){var n=T$.exec(e),r=g0(n,2),i=r[1];e=e.replace(T$,eH(i))}return e}function aPe(t){var e=t.replace(/\s+/g,"");return e=oPe(e),e=eH(e),e}function sPe(t){try{return aPe(t)}catch{return Dc}}function s_(t){var e=sPe(t.slice(5,-1));return e===Dc?"":e}var uPe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],lPe=["dx","dy","angle","className","breakAll"];function c2(){return c2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c2.apply(this,arguments)}function P$(t,e){if(t==null)return{};var n=cPe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function O$(t,e){return pPe(t)||dPe(t,e)||hPe(t,e)||fPe()}function fPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hPe(t,e){if(t){if(typeof t=="string")return k$(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k$(t,e)}}function k$(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function pPe(t){if(Array.isArray(t))return t}var tH=/[ \f\n\r\t\v\u2028\u2029]+/,nH=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];Xe(n)||(r?o=n.toString().split(""):o=n.toString().split(tH));var a=o.map(function(u){return{word:u,width:qd(u,i).width}}),s=r?0:qd("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},mPe=function(e,n,r,i,o){var a=e.maxLines,s=e.children,u=e.style,l=e.breakAll,c=he(a),f=s,h=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(z,U){var M=U.word,F=U.width,H=z[z.length-1];if(H&&(i==null||o||H.width+F+r<Number(i)))H.words.push(M),H.width+=F+r;else{var X={words:[M],width:F};z.push(X)}return z},[])},d=h(n),p=function(B){return B.reduce(function(z,U){return z.width>U.width?z:U})};if(!c)return d;for(var m="",v=function(B){var z=f.slice(0,B),U=nH({breakAll:l,style:u,children:z+m}).wordsWithComputedWidth,M=h(U),F=M.length>a||p(M).width>Number(i);return[F,M]},g=0,y=f.length-1,b=0,_;g<=y&&b<=f.length-1;){var x=Math.floor((g+y)/2),S=x-1,E=v(S),C=O$(E,2),A=C[0],T=C[1],P=v(x),k=O$(P,1),I=k[0];if(!A&&!I&&(g=x+1),A&&I&&(y=x-1),!A&&I){_=T;break}b++}return _||d},I$=function(e){var n=Xe(e)?[]:e.toString().split(tH);return[{words:n}]},vPe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!ka.isSsr){var u,l,c=nH({breakAll:a,children:i,style:o});if(c){var f=c.wordsWithComputedWidth,h=c.spaceWidth;u=f,l=h}else return I$(i);return mPe({breakAll:a,children:i,maxLines:s,style:o},u,l,n,r)}return I$(i)},R$="#808080",Rl=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,u=e.capHeight,l=u===void 0?"0.71em":u,c=e.scaleToFit,f=c===void 0?!1:c,h=e.textAnchor,d=h===void 0?"start":h,p=e.verticalAnchor,m=p===void 0?"end":p,v=e.fill,g=v===void 0?R$:v,y=P$(e,uPe),b=R.useMemo(function(){return vPe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:f,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,f,y.style,y.width]),_=y.dx,x=y.dy,S=y.angle,E=y.className,C=y.breakAll,A=P$(y,lPe);if(!En(r)||!En(o))return null;var T=r+(he(_)?_:0),P=o+(he(x)?x:0),k;switch(m){case"start":k=s_("calc(".concat(l,")"));break;case"middle":k=s_("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:k=s_("calc(".concat(b.length-1," * -").concat(s,")"));break}var I=[];if(f){var $=b[0].width,B=y.width;I.push("scale(".concat((he(B)?B/$:1)/$,")"))}return S&&I.push("rotate(".concat(S,", ").concat(T,", ").concat(P,")")),I.length&&(A.transform=I.join(" ")),W.createElement("text",c2({},Le(A,!0),{x:T,y:P,className:qe("recharts-text",E),textAnchor:d,fill:g.includes("url")?R$:g}),b.map(function(z,U){var M=z.words.join(C?"":" ");return W.createElement("tspan",{x:T,dy:U===0?k:s,key:"".concat(M,"-").concat(U)},M)}))};function Xs(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gPe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function VP(t){let e,n,r;t.length!==2?(e=Xs,n=(s,u)=>Xs(t(s),u),r=(s,u)=>t(s)-u):(e=t===Xs||t===gPe?t:yPe,n=t,r=t);function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function a(s,u,l=0,c=s.length){const f=i(s,u,l,c-1);return f>l&&r(s[f-1],u)>-r(s[f],u)?f-1:f}return{left:i,center:a,right:o}}function yPe(){return 0}function rH(t){return t===null?NaN:+t}function*bPe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const wPe=VP(Xs),Xm=wPe.right;VP(rH).center;class N$ extends Map{constructor(e,n=SPe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(D$(this,e))}has(e){return super.has(D$(this,e))}set(e,n){return super.set(xPe(this,e),n)}delete(e){return super.delete(_Pe(this,e))}}function D$({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function xPe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function _Pe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function SPe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function EPe(t=Xs){if(t===Xs)return iH;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function iH(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const CPe=Math.sqrt(50),APe=Math.sqrt(10),TPe=Math.sqrt(2);function y0(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=CPe?10:o>=APe?5:o>=TPe?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?y0(t,e,n*2):[s,u,l]}function f2(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?y0(e,t,n):y0(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)u[l]=(o-l)/-a;else for(let l=0;l<s;++l)u[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)u[l]=(i+l)/-a;else for(let l=0;l<s;++l)u[l]=(i+l)*a;return u}function h2(t,e,n){return e=+e,t=+t,n=+n,y0(t,e,n)[2]}function d2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?h2(e,t,n):h2(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function M$(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function $$(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function oH(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?iH:EPe(i);r>n;){if(r-n>600){const u=r-n+1,l=e-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),d=Math.max(n,Math.floor(e-l*f/u+h)),p=Math.min(r,Math.floor(e+(u-l)*f/u+h));oH(t,e,d,p,i)}const o=t[e];let a=n,s=r;for(ud(t,n,e),i(t[r],o)>0&&ud(t,n,r);a<s;){for(ud(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?ud(t,n,s):(++s,ud(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function ud(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function PPe(t,e,n){if(t=Float64Array.from(bPe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return $$(t);if(e>=1)return M$(t);var r,i=(r-1)*e,o=Math.floor(i),a=M$(oH(t,o).subarray(0,o+1)),s=$$(t.subarray(o+1));return a+(s-a)*(i-o)}}function OPe(t,e,n=rH){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function kPe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Ui(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function es(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const p2=Symbol("implicit");function WP(){var t=new N$,e=[],n=[],r=p2;function i(o){let a=t.get(o);if(a===void 0){if(r!==p2)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new N$;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return WP(e,n).unknown(r)},Ui.apply(i,arguments),i}function Hp(){var t=WP().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,u=0,l=0,c=.5;delete t.unknown;function f(){var h=e().length,d=i<r,p=d?i:r,m=d?r:i;o=(m-p)/Math.max(1,h-u+l*2),s&&(o=Math.floor(o)),p+=(m-p-o*(h-u))*c,a=o*(1-u),s&&(p=Math.round(p),a=Math.round(a));var v=kPe(h).map(function(g){return p+o*g});return n(d?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(u=Math.min(1,l=+h),f()):u},t.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},t.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return Hp(e(),[r,i]).round(s).paddingInner(u).paddingOuter(l).align(c)},Ui.apply(f(),arguments)}function aH(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return aH(e())},t}function Gd(){return aH(Hp.apply(null,arguments).paddingInner(1))}function zP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function sH(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ym(){}var qp=.7,b0=1/qp,ff="\\s*([+-]?\\d+)\\s*",Gp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",IPe=/^#([0-9a-f]{3,8})$/,RPe=new RegExp(`^rgb\\(${ff},${ff},${ff}\\)$`),NPe=new RegExp(`^rgb\\(${Zo},${Zo},${Zo}\\)$`),DPe=new RegExp(`^rgba\\(${ff},${ff},${ff},${Gp}\\)$`),MPe=new RegExp(`^rgba\\(${Zo},${Zo},${Zo},${Gp}\\)$`),$Pe=new RegExp(`^hsl\\(${Gp},${Zo},${Zo}\\)$`),jPe=new RegExp(`^hsla\\(${Gp},${Zo},${Zo},${Gp}\\)$`),j$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zP(Ym,Kp,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:L$,formatHex:L$,formatHex8:LPe,formatHsl:FPe,formatRgb:F$,toString:F$});function L$(){return this.rgb().formatHex()}function LPe(){return this.rgb().formatHex8()}function FPe(){return uH(this).formatHsl()}function F$(){return this.rgb().formatRgb()}function Kp(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=IPe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?B$(e):n===3?new Mr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?cg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?cg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=RPe.exec(t))?new Mr(e[1],e[2],e[3],1):(e=NPe.exec(t))?new Mr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=DPe.exec(t))?cg(e[1],e[2],e[3],e[4]):(e=MPe.exec(t))?cg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$Pe.exec(t))?W$(e[1],e[2]/100,e[3]/100,1):(e=jPe.exec(t))?W$(e[1],e[2]/100,e[3]/100,e[4]):j$.hasOwnProperty(t)?B$(j$[t]):t==="transparent"?new Mr(NaN,NaN,NaN,0):null}function B$(t){return new Mr(t>>16&255,t>>8&255,t&255,1)}function cg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Mr(t,e,n,r)}function BPe(t){return t instanceof Ym||(t=Kp(t)),t?(t=t.rgb(),new Mr(t.r,t.g,t.b,t.opacity)):new Mr}function m2(t,e,n,r){return arguments.length===1?BPe(t):new Mr(t,e,n,r??1)}function Mr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}zP(Mr,m2,sH(Ym,{brighter(t){return t=t==null?b0:Math.pow(b0,t),new Mr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?qp:Math.pow(qp,t),new Mr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mr(bl(this.r),bl(this.g),bl(this.b),w0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:U$,formatHex:U$,formatHex8:UPe,formatRgb:V$,toString:V$}));function U$(){return`#${il(this.r)}${il(this.g)}${il(this.b)}`}function UPe(){return`#${il(this.r)}${il(this.g)}${il(this.b)}${il((isNaN(this.opacity)?1:this.opacity)*255)}`}function V$(){const t=w0(this.opacity);return`${t===1?"rgb(":"rgba("}${bl(this.r)}, ${bl(this.g)}, ${bl(this.b)}${t===1?")":`, ${t})`}`}function w0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function il(t){return t=bl(t),(t<16?"0":"")+t.toString(16)}function W$(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new uo(t,e,n,r)}function uH(t){if(t instanceof uo)return new uo(t.h,t.s,t.l,t.opacity);if(t instanceof Ym||(t=Kp(t)),!t)return new uo;if(t instanceof uo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new uo(a,s,u,t.opacity)}function VPe(t,e,n,r){return arguments.length===1?uH(t):new uo(t,e,n,r??1)}function uo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}zP(uo,VPe,sH(Ym,{brighter(t){return t=t==null?b0:Math.pow(b0,t),new uo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?qp:Math.pow(qp,t),new uo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Mr(u_(t>=240?t-240:t+120,i,r),u_(t,i,r),u_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new uo(z$(this.h),fg(this.s),fg(this.l),w0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=w0(this.opacity);return`${t===1?"hsl(":"hsla("}${z$(this.h)}, ${fg(this.s)*100}%, ${fg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function z$(t){return t=(t||0)%360,t<0?t+360:t}function fg(t){return Math.max(0,Math.min(1,t||0))}function u_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const HP=t=>()=>t;function WPe(t,e){return function(n){return t+n*e}}function zPe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function HPe(t){return(t=+t)==1?lH:function(e,n){return n-e?zPe(e,n,t):HP(isNaN(e)?n:e)}}function lH(t,e){var n=e-t;return n?WPe(t,n):HP(isNaN(t)?e:t)}const H$=function t(e){var n=HPe(e);function r(i,o){var a=n((i=m2(i)).r,(o=m2(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=lH(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function qPe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function GPe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function KPe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Ph(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function XPe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function x0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function YPe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ph(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var v2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,l_=new RegExp(v2.source,"g");function JPe(t){return function(){return t}}function QPe(t){return function(e){return t(e)+""}}function ZPe(t,e){var n=v2.lastIndex=l_.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(t=t+"",e=e+"";(r=v2.exec(t))&&(i=l_.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:x0(r,i)})),n=l_.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?QPe(u[0].x):JPe(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function Ph(t,e){var n=typeof e,r;return e==null||n==="boolean"?HP(e):(n==="number"?x0:n==="string"?(r=Kp(e))?(e=r,H$):ZPe:e instanceof Kp?H$:e instanceof Date?XPe:GPe(e)?qPe:Array.isArray(e)?KPe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?YPe:x0)(t,e)}function qP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function eOe(t,e){e===void 0&&(e=t,t=Ph);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function tOe(t){return function(){return t}}function _0(t){return+t}var q$=[0,1];function Sr(t){return t}function g2(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:tOe(isNaN(e)?NaN:.5)}function nOe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function rOe(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=g2(i,r),o=n(a,o)):(r=g2(r,i),o=n(o,a)),function(s){return o(r(s))}}function iOe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=g2(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var u=Xm(t,s,1,r)-1;return o[u](i[u](s))}}function Jm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Aw(){var t=q$,e=q$,n=Ph,r,i,o,a=Sr,s,u,l;function c(){var h=Math.min(t.length,e.length);return a!==Sr&&(a=nOe(t[0],t[h-1])),s=h>2?iOe:rOe,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?o:(u||(u=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((l||(l=s(e,t.map(r),x0)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,_0),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=qP,c()},f.clamp=function(h){return arguments.length?(a=h?!0:Sr,c()):a!==Sr},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,c()}}function GP(){return Aw()(Sr,Sr)}function oOe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function S0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Uf(t){return t=S0(Math.abs(t)),t?t[1]:NaN}function aOe(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function sOe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var uOe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xp(t){if(!(e=uOe.exec(t)))throw new Error("invalid format: "+t);var e;return new KP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xp.prototype=KP.prototype;function KP(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}KP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lOe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var cH;function cOe(t,e){var n=S0(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(cH=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+S0(t,Math.max(0,e+o-1))[0]}function G$(t,e){var n=S0(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const K$={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:oOe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>G$(t*100,e),r:G$,s:cOe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function X$(t){return t}var Y$=Array.prototype.map,J$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function fOe(t){var e=t.grouping===void 0||t.thousands===void 0?X$:aOe(Y$.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?X$:sOe(Y$.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=Xp(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,v=f.zero,g=f.width,y=f.comma,b=f.precision,_=f.trim,x=f.type;x==="n"?(y=!0,x="g"):K$[x]||(b===void 0&&(b=12),_=!0,x="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=m==="$"?r:/[%p]/.test(x)?a:"",C=K$[x],A=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function T(P){var k=S,I=E,$,B,z;if(x==="c")I=C(P)+I,P="";else{P=+P;var U=P<0||1/P<0;if(P=isNaN(P)?u:C(Math.abs(P),b),_&&(P=lOe(P)),U&&+P==0&&p!=="+"&&(U=!1),k=(U?p==="("?p:s:p==="-"||p==="("?"":p)+k,I=(x==="s"?J$[8+cH/3]:"")+I+(U&&p==="("?")":""),A){for($=-1,B=P.length;++$<B;)if(z=P.charCodeAt($),48>z||z>57){I=(z===46?i+P.slice($+1):P.slice($))+I,P=P.slice(0,$);break}}}y&&!v&&(P=e(P,1/0));var M=k.length+P.length+I.length,F=M<g?new Array(g-M+1).join(h):"";switch(y&&v&&(P=e(F+P,F.length?g-I.length:1/0),F=""),d){case"<":P=k+P+I+F;break;case"=":P=k+F+P+I;break;case"^":P=F.slice(0,M=F.length>>1)+k+P+I+F.slice(M);break;default:P=F+k+P+I;break}return o(P)}return T.toString=function(){return f+""},T}function c(f,h){var d=l((f=Xp(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Uf(h)/3)))*3,m=Math.pow(10,-p),v=J$[8+p/3];return function(g){return d(m*g)+v}}return{format:l,formatPrefix:c}}var hg,XP,fH;hOe({thousands:",",grouping:[3],currency:["$",""]});function hOe(t){return hg=fOe(t),XP=hg.format,fH=hg.formatPrefix,hg}function dOe(t){return Math.max(0,-Uf(Math.abs(t)))}function pOe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Uf(e)/3)))*3-Uf(Math.abs(t)))}function mOe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Uf(e)-Uf(t))+1}function hH(t,e,n,r){var i=d2(t,e,n),o;switch(r=Xp(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=pOe(i,a))&&(r.precision=o),fH(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=mOe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=dOe(i))&&(r.precision=o-(r.type==="%")*2);break}}return XP(r)}function yu(t){var e=t.domain;return t.ticks=function(n){var r=e();return f2(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return hH(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],u,l,c=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);c-- >0;){if(l=h2(a,s,n),l===u)return r[i]=a,r[o]=s,e(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function E0(){var t=GP();return t.copy=function(){return Jm(t,E0())},Ui.apply(t,arguments),yu(t)}function dH(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,_0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return dH(t).unknown(e)},t=arguments.length?Array.from(t,_0):[0,1],yu(n)}function pH(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function Q$(t){return Math.log(t)}function Z$(t){return Math.exp(t)}function vOe(t){return-Math.log(-t)}function gOe(t){return-Math.exp(-t)}function yOe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bOe(t){return t===10?yOe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function wOe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ej(t){return(e,n)=>-t(-e,n)}function YP(t){const e=t(Q$,Z$),n=e.domain;let r=10,i,o;function a(){return i=wOe(r),o=bOe(r),n()[0]<0?(i=ej(i),o=ej(o),t(vOe,gOe)):t(Q$,Z$),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),p,m;const v=s==null?10:+s;let g=[];if(!(r%1)&&d-h<v){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(p=1;p<r;++p)if(m=h<0?p/o(-h):p*o(h),!(m<l)){if(m>c)break;g.push(m)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(m=h>0?p/o(-h):p*o(h),!(m<l)){if(m>c)break;g.push(m)}g.length*2<v&&(g=f2(l,c,v))}else g=f2(h,d,Math.min(d-h,v)).map(o);return f?g.reverse():g},e.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Xp(u)).precision==null&&(u.trim=!0),u=XP(u)),s===1/0)return u;const l=Math.max(1,r*s/e.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},e.nice=()=>n(pH(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function mH(){const t=YP(Aw()).domain([1,10]);return t.copy=()=>Jm(t,mH()).base(t.base()),Ui.apply(t,arguments),t}function tj(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function nj(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function JP(t){var e=1,n=t(tj(e),nj(e));return n.constant=function(r){return arguments.length?t(tj(e=+r),nj(e)):e},yu(n)}function vH(){var t=JP(Aw());return t.copy=function(){return Jm(t,vH()).constant(t.constant())},Ui.apply(t,arguments)}function rj(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function xOe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _Oe(t){return t<0?-t*t:t*t}function QP(t){var e=t(Sr,Sr),n=1;function r(){return n===1?t(Sr,Sr):n===.5?t(xOe,_Oe):t(rj(n),rj(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},yu(e)}function ZP(){var t=QP(Aw());return t.copy=function(){return Jm(t,ZP()).exponent(t.exponent())},Ui.apply(t,arguments),t}function SOe(){return ZP.apply(null,arguments).exponent(.5)}function ij(t){return Math.sign(t)*t*t}function EOe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function gH(){var t=GP(),e=[0,1],n=!1,r;function i(o){var a=EOe(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(ij(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,_0)).map(ij)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return gH(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ui.apply(i,arguments),yu(i)}function yH(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=OPe(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[Xm(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Xs),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return yH().domain(t).range(e).unknown(r)},Ui.apply(o,arguments)}function bH(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(u){return u!=null&&u<=u?i[Xm(r,u,0,n)]:o}function s(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,s()):[t,e]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,s()):i.slice()},a.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[t,r[0]]:l>=n?[r[n-1],e]:[r[l-1],r[l]]},a.unknown=function(u){return arguments.length&&(o=u),a},a.thresholds=function(){return r.slice()},a.copy=function(){return bH().domain([t,e]).range(i).unknown(o)},Ui.apply(yu(a),arguments)}function wH(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[Xm(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return wH().domain(t).range(e).unknown(n)},Ui.apply(i,arguments)}const c_=new Date,f_=new Date;function kn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const u=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return u;let l;do u.push(l=new Date(+o)),e(o,s),t(o);while(l<o&&o<a);return u},i.filter=o=>kn(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(c_.setTime(+o),f_.setTime(+a),t(c_),t(f_),Math.floor(n(c_,f_))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const C0=kn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);C0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?kn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):C0);C0.range;const Ca=1e3,Ri=Ca*60,Aa=Ri*60,Ba=Aa*24,eO=Ba*7,oj=Ba*30,h_=Ba*365,ol=kn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ca)},(t,e)=>(e-t)/Ca,t=>t.getUTCSeconds());ol.range;const tO=kn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ca)},(t,e)=>{t.setTime(+t+e*Ri)},(t,e)=>(e-t)/Ri,t=>t.getMinutes());tO.range;const nO=kn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ri)},(t,e)=>(e-t)/Ri,t=>t.getUTCMinutes());nO.range;const rO=kn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ca-t.getMinutes()*Ri)},(t,e)=>{t.setTime(+t+e*Aa)},(t,e)=>(e-t)/Aa,t=>t.getHours());rO.range;const iO=kn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Aa)},(t,e)=>(e-t)/Aa,t=>t.getUTCHours());iO.range;const Qm=kn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ri)/Ba,t=>t.getDate()-1);Qm.range;const Tw=kn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ba,t=>t.getUTCDate()-1);Tw.range;const xH=kn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ba,t=>Math.floor(t/Ba));xH.range;function Wl(t){return kn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ri)/eO)}const Pw=Wl(0),A0=Wl(1),COe=Wl(2),AOe=Wl(3),Vf=Wl(4),TOe=Wl(5),POe=Wl(6);Pw.range;A0.range;COe.range;AOe.range;Vf.range;TOe.range;POe.range;function zl(t){return kn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/eO)}const Ow=zl(0),T0=zl(1),OOe=zl(2),kOe=zl(3),Wf=zl(4),IOe=zl(5),ROe=zl(6);Ow.range;T0.range;OOe.range;kOe.range;Wf.range;IOe.range;ROe.range;const oO=kn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());oO.range;const aO=kn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());aO.range;const Ua=kn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ua.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ua.range;const Va=kn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Va.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Va.range;function _H(t,e,n,r,i,o){const a=[[ol,1,Ca],[ol,5,5*Ca],[ol,15,15*Ca],[ol,30,30*Ca],[o,1,Ri],[o,5,5*Ri],[o,15,15*Ri],[o,30,30*Ri],[i,1,Aa],[i,3,3*Aa],[i,6,6*Aa],[i,12,12*Aa],[r,1,Ba],[r,2,2*Ba],[n,1,eO],[e,1,oj],[e,3,3*oj],[t,1,h_]];function s(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:u(l,c,f),p=d?d.range(l,+c+1):[];return h?p.reverse():p}function u(l,c,f){const h=Math.abs(c-l)/f,d=VP(([,,v])=>v).right(a,h);if(d===a.length)return t.every(d2(l/h_,c/h_,f));if(d===0)return C0.every(Math.max(d2(l,c,f),1));const[p,m]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return p.every(m)}return[s,u]}const[NOe,DOe]=_H(Va,aO,Ow,xH,iO,nO),[MOe,$Oe]=_H(Ua,oO,Pw,Qm,rO,tO);function d_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function p_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ld(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function jOe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=cd(i),c=fd(i),f=cd(o),h=fd(o),d=cd(a),p=fd(a),m=cd(s),v=fd(s),g=cd(u),y=fd(u),b={a:U,A:M,b:F,B:H,c:null,d:fj,e:fj,f:ake,g:vke,G:yke,H:rke,I:ike,j:oke,L:SH,m:ske,M:uke,p:X,q:K,Q:pj,s:mj,S:lke,u:cke,U:fke,V:hke,w:dke,W:pke,x:null,X:null,y:mke,Y:gke,Z:bke,"%":dj},_={a:Q,A:ae,b:le,B:ve,c:null,d:hj,e:hj,f:Ske,g:Nke,G:Mke,H:wke,I:xke,j:_ke,L:CH,m:Eke,M:Cke,p:de,q:Ce,Q:pj,s:mj,S:Ake,u:Tke,U:Pke,V:Oke,w:kke,W:Ike,x:null,X:null,y:Rke,Y:Dke,Z:$ke,"%":dj},x={a:T,A:P,b:k,B:I,c:$,d:lj,e:lj,f:ZOe,g:uj,G:sj,H:cj,I:cj,j:XOe,L:QOe,m:KOe,M:YOe,p:A,q:GOe,Q:tke,s:nke,S:JOe,u:VOe,U:WOe,V:zOe,w:UOe,W:HOe,x:B,X:z,y:uj,Y:sj,Z:qOe,"%":eke};b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),_.x=S(n,_),_.X=S(r,_),_.c=S(e,_);function S(ie,me){return function(ce){var te=[],ye=-1,xe=0,De=ie.length,Ie,et,vt;for(ce instanceof Date||(ce=new Date(+ce));++ye<De;)ie.charCodeAt(ye)===37&&(te.push(ie.slice(xe,ye)),(et=aj[Ie=ie.charAt(++ye)])!=null?Ie=ie.charAt(++ye):et=Ie==="e"?" ":"0",(vt=me[Ie])&&(Ie=vt(ce,et)),te.push(Ie),xe=ye+1);return te.push(ie.slice(xe,ye)),te.join("")}}function E(ie,me){return function(ce){var te=ld(1900,void 0,1),ye=C(te,ie,ce+="",0),xe,De;if(ye!=ce.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(me&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(xe=p_(ld(te.y,0,1)),De=xe.getUTCDay(),xe=De>4||De===0?T0.ceil(xe):T0(xe),xe=Tw.offset(xe,(te.V-1)*7),te.y=xe.getUTCFullYear(),te.m=xe.getUTCMonth(),te.d=xe.getUTCDate()+(te.w+6)%7):(xe=d_(ld(te.y,0,1)),De=xe.getDay(),xe=De>4||De===0?A0.ceil(xe):A0(xe),xe=Qm.offset(xe,(te.V-1)*7),te.y=xe.getFullYear(),te.m=xe.getMonth(),te.d=xe.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),De="Z"in te?p_(ld(te.y,0,1)).getUTCDay():d_(ld(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(De+5)%7:te.w+te.U*7-(De+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,p_(te)):d_(te)}}function C(ie,me,ce,te){for(var ye=0,xe=me.length,De=ce.length,Ie,et;ye<xe;){if(te>=De)return-1;if(Ie=me.charCodeAt(ye++),Ie===37){if(Ie=me.charAt(ye++),et=x[Ie in aj?me.charAt(ye++):Ie],!et||(te=et(ie,ce,te))<0)return-1}else if(Ie!=ce.charCodeAt(te++))return-1}return te}function A(ie,me,ce){var te=l.exec(me.slice(ce));return te?(ie.p=c.get(te[0].toLowerCase()),ce+te[0].length):-1}function T(ie,me,ce){var te=d.exec(me.slice(ce));return te?(ie.w=p.get(te[0].toLowerCase()),ce+te[0].length):-1}function P(ie,me,ce){var te=f.exec(me.slice(ce));return te?(ie.w=h.get(te[0].toLowerCase()),ce+te[0].length):-1}function k(ie,me,ce){var te=g.exec(me.slice(ce));return te?(ie.m=y.get(te[0].toLowerCase()),ce+te[0].length):-1}function I(ie,me,ce){var te=m.exec(me.slice(ce));return te?(ie.m=v.get(te[0].toLowerCase()),ce+te[0].length):-1}function $(ie,me,ce){return C(ie,e,me,ce)}function B(ie,me,ce){return C(ie,n,me,ce)}function z(ie,me,ce){return C(ie,r,me,ce)}function U(ie){return a[ie.getDay()]}function M(ie){return o[ie.getDay()]}function F(ie){return u[ie.getMonth()]}function H(ie){return s[ie.getMonth()]}function X(ie){return i[+(ie.getHours()>=12)]}function K(ie){return 1+~~(ie.getMonth()/3)}function Q(ie){return a[ie.getUTCDay()]}function ae(ie){return o[ie.getUTCDay()]}function le(ie){return u[ie.getUTCMonth()]}function ve(ie){return s[ie.getUTCMonth()]}function de(ie){return i[+(ie.getUTCHours()>=12)]}function Ce(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var me=S(ie+="",b);return me.toString=function(){return ie},me},parse:function(ie){var me=E(ie+="",!1);return me.toString=function(){return ie},me},utcFormat:function(ie){var me=S(ie+="",_);return me.toString=function(){return ie},me},utcParse:function(ie){var me=E(ie+="",!0);return me.toString=function(){return ie},me}}}var aj={"-":"",_:" ",0:"0"},Un=/^\s*\d+/,LOe=/^%/,FOe=/[\\^$*+?|[\]().{}]/g;function it(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function BOe(t){return t.replace(FOe,"\\$&")}function cd(t){return new RegExp("^(?:"+t.map(BOe).join("|")+")","i")}function fd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function UOe(t,e,n){var r=Un.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function VOe(t,e,n){var r=Un.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function WOe(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function zOe(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function HOe(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function sj(t,e,n){var r=Un.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function uj(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function qOe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function GOe(t,e,n){var r=Un.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function KOe(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function lj(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function XOe(t,e,n){var r=Un.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function cj(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function YOe(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function JOe(t,e,n){var r=Un.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function QOe(t,e,n){var r=Un.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ZOe(t,e,n){var r=Un.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function eke(t,e,n){var r=LOe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function tke(t,e,n){var r=Un.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function nke(t,e,n){var r=Un.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function fj(t,e){return it(t.getDate(),e,2)}function rke(t,e){return it(t.getHours(),e,2)}function ike(t,e){return it(t.getHours()%12||12,e,2)}function oke(t,e){return it(1+Qm.count(Ua(t),t),e,3)}function SH(t,e){return it(t.getMilliseconds(),e,3)}function ake(t,e){return SH(t,e)+"000"}function ske(t,e){return it(t.getMonth()+1,e,2)}function uke(t,e){return it(t.getMinutes(),e,2)}function lke(t,e){return it(t.getSeconds(),e,2)}function cke(t){var e=t.getDay();return e===0?7:e}function fke(t,e){return it(Pw.count(Ua(t)-1,t),e,2)}function EH(t){var e=t.getDay();return e>=4||e===0?Vf(t):Vf.ceil(t)}function hke(t,e){return t=EH(t),it(Vf.count(Ua(t),t)+(Ua(t).getDay()===4),e,2)}function dke(t){return t.getDay()}function pke(t,e){return it(A0.count(Ua(t)-1,t),e,2)}function mke(t,e){return it(t.getFullYear()%100,e,2)}function vke(t,e){return t=EH(t),it(t.getFullYear()%100,e,2)}function gke(t,e){return it(t.getFullYear()%1e4,e,4)}function yke(t,e){var n=t.getDay();return t=n>=4||n===0?Vf(t):Vf.ceil(t),it(t.getFullYear()%1e4,e,4)}function bke(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+it(e/60|0,"0",2)+it(e%60,"0",2)}function hj(t,e){return it(t.getUTCDate(),e,2)}function wke(t,e){return it(t.getUTCHours(),e,2)}function xke(t,e){return it(t.getUTCHours()%12||12,e,2)}function _ke(t,e){return it(1+Tw.count(Va(t),t),e,3)}function CH(t,e){return it(t.getUTCMilliseconds(),e,3)}function Ske(t,e){return CH(t,e)+"000"}function Eke(t,e){return it(t.getUTCMonth()+1,e,2)}function Cke(t,e){return it(t.getUTCMinutes(),e,2)}function Ake(t,e){return it(t.getUTCSeconds(),e,2)}function Tke(t){var e=t.getUTCDay();return e===0?7:e}function Pke(t,e){return it(Ow.count(Va(t)-1,t),e,2)}function AH(t){var e=t.getUTCDay();return e>=4||e===0?Wf(t):Wf.ceil(t)}function Oke(t,e){return t=AH(t),it(Wf.count(Va(t),t)+(Va(t).getUTCDay()===4),e,2)}function kke(t){return t.getUTCDay()}function Ike(t,e){return it(T0.count(Va(t)-1,t),e,2)}function Rke(t,e){return it(t.getUTCFullYear()%100,e,2)}function Nke(t,e){return t=AH(t),it(t.getUTCFullYear()%100,e,2)}function Dke(t,e){return it(t.getUTCFullYear()%1e4,e,4)}function Mke(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Wf(t):Wf.ceil(t),it(t.getUTCFullYear()%1e4,e,4)}function $ke(){return"+0000"}function dj(){return"%"}function pj(t){return+t}function mj(t){return Math.floor(+t/1e3)}var uc,TH,PH;jke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jke(t){return uc=jOe(t),TH=uc.format,uc.parse,PH=uc.utcFormat,uc.utcParse,uc}function Lke(t){return new Date(t)}function Fke(t){return t instanceof Date?+t:+new Date(+t)}function sO(t,e,n,r,i,o,a,s,u,l){var c=GP(),f=c.invert,h=c.domain,d=l(".%L"),p=l(":%S"),m=l("%I:%M"),v=l("%I %p"),g=l("%a %d"),y=l("%b %d"),b=l("%B"),_=l("%Y");function x(S){return(u(S)<S?d:s(S)<S?p:a(S)<S?m:o(S)<S?v:r(S)<S?i(S)<S?g:y:n(S)<S?b:_)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?h(Array.from(S,Fke)):h().map(Lke)},c.ticks=function(S){var E=h();return t(E[0],E[E.length-1],S??10)},c.tickFormat=function(S,E){return E==null?x:l(E)},c.nice=function(S){var E=h();return(!S||typeof S.range!="function")&&(S=e(E[0],E[E.length-1],S??10)),S?h(pH(E,S)):c},c.copy=function(){return Jm(c,sO(t,e,n,r,i,o,a,s,u,l))},c}function Bke(){return Ui.apply(sO(MOe,$Oe,Ua,oO,Pw,Qm,rO,tO,ol,TH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uke(){return Ui.apply(sO(NOe,DOe,Va,aO,Ow,Tw,iO,nO,ol,PH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kw(){var t=0,e=1,n,r,i,o,a=Sr,s=!1,u;function l(f){return f==null||isNaN(f=+f)?u:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([t,e]=f,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),l):[t,e]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function c(f){return function(h){var d,p;return arguments.length?([d,p]=h,a=f(d,p),l):[a(0),a(1)]}}return l.range=c(Ph),l.rangeRound=c(qP),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),l}}function bu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function OH(){var t=yu(kw()(Sr));return t.copy=function(){return bu(t,OH())},es.apply(t,arguments)}function kH(){var t=YP(kw()).domain([1,10]);return t.copy=function(){return bu(t,kH()).base(t.base())},es.apply(t,arguments)}function IH(){var t=JP(kw());return t.copy=function(){return bu(t,IH()).constant(t.constant())},es.apply(t,arguments)}function uO(){var t=QP(kw());return t.copy=function(){return bu(t,uO()).exponent(t.exponent())},es.apply(t,arguments)}function Vke(){return uO.apply(null,arguments).exponent(.5)}function RH(){var t=[],e=Sr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Xm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Xs),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>PPe(t,o/r))},n.copy=function(){return RH(e).domain(t)},es.apply(n,arguments)}function Iw(){var t=0,e=.5,n=1,r=1,i,o,a,s,u,l=Sr,c,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+c(m))-o)*(r*m<r*o?s:u),l(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,i=c(t=+t),o=c(e=+e),a=c(n=+n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(l=m,d):l};function p(m){return function(v){var g,y,b;return arguments.length?([g,y,b]=v,l=eOe(m,[g,y,b]),d):[l(0),l(.5),l(1)]}}return d.range=p(Ph),d.rangeRound=p(qP),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return c=m,i=m(t),o=m(e),a=m(n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function NH(){var t=yu(Iw()(Sr));return t.copy=function(){return bu(t,NH())},es.apply(t,arguments)}function DH(){var t=YP(Iw()).domain([.1,1,10]);return t.copy=function(){return bu(t,DH()).base(t.base())},es.apply(t,arguments)}function MH(){var t=JP(Iw());return t.copy=function(){return bu(t,MH()).constant(t.constant())},es.apply(t,arguments)}function lO(){var t=QP(Iw());return t.copy=function(){return bu(t,lO()).exponent(t.exponent())},es.apply(t,arguments)}function Wke(){return lO.apply(null,arguments).exponent(.5)}const vj=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Hp,scaleDiverging:NH,scaleDivergingLog:DH,scaleDivergingPow:lO,scaleDivergingSqrt:Wke,scaleDivergingSymlog:MH,scaleIdentity:dH,scaleImplicit:p2,scaleLinear:E0,scaleLog:mH,scaleOrdinal:WP,scalePoint:Gd,scalePow:ZP,scaleQuantile:yH,scaleQuantize:bH,scaleRadial:gH,scaleSequential:OH,scaleSequentialLog:kH,scaleSequentialPow:uO,scaleSequentialQuantile:RH,scaleSequentialSqrt:Vke,scaleSequentialSymlog:IH,scaleSqrt:SOe,scaleSymlog:vH,scaleThreshold:wH,scaleTime:Bke,scaleUtc:Uke,tickFormat:hH},Symbol.toStringTag,{value:"Module"}));var zke=wh;function Hke(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!zke(a):n(a,s)))var s=a,u=o}return u}var Rw=Hke;function qke(t,e){return t>e}var $H=qke,Gke=Rw,Kke=$H,Xke=Th;function Yke(t){return t&&t.length?Gke(t,Xke,Kke):void 0}var Jke=Yke;const Nw=pt(Jke);function Qke(t,e){return t<e}var jH=Qke,Zke=Rw,eIe=jH,tIe=Th;function nIe(t){return t&&t.length?Zke(t,tIe,eIe):void 0}var rIe=nIe;const Dw=pt(rIe);var iIe=_P,oIe=gu,aIe=zz,sIe=zr;function uIe(t,e){var n=sIe(t)?iIe:aIe;return n(t,oIe(e))}var lIe=uIe,cIe=Vz,fIe=lIe;function hIe(t,e){return cIe(fIe(t,e),1)}var dIe=hIe;const pIe=pt(dIe);var mIe=LP;function vIe(t,e){return mIe(t,e)}var gIe=vIe;const Mw=pt(gIe);var Oh=1e9,yIe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},fO,Bt=!0,Li="[DecimalError] ",wl=Li+"Invalid argument: ",cO=Li+"Exponent out of range: ",kh=Math.floor,Vu=Math.pow,bIe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,oi,Dn=1e7,Dt=7,LH=9007199254740991,P0=kh(LH/Dt),we={};we.absoluteValue=we.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};we.comparedTo=we.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};we.decimalPlaces=we.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Dt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};we.dividedBy=we.div=function(t){return Ia(this,new this.constructor(t))};we.dividedToIntegerBy=we.idiv=function(t){var e=this,n=e.constructor;return xt(Ia(e,new n(t),0,1),n.precision)};we.equals=we.eq=function(t){return!this.cmp(t)};we.exponent=function(){return hn(this)};we.greaterThan=we.gt=function(t){return this.cmp(t)>0};we.greaterThanOrEqualTo=we.gte=function(t){return this.cmp(t)>=0};we.isInteger=we.isint=function(){return this.e>this.d.length-2};we.isNegative=we.isneg=function(){return this.s<0};we.isPositive=we.ispos=function(){return this.s>0};we.isZero=function(){return this.s===0};we.lessThan=we.lt=function(t){return this.cmp(t)<0};we.lessThanOrEqualTo=we.lte=function(t){return this.cmp(t)<1};we.logarithm=we.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(oi))throw Error(Li+"NaN");if(n.s<1)throw Error(Li+(n.s?"NaN":"-Infinity"));return n.eq(oi)?new r(0):(Bt=!1,e=Ia(Yp(n,o),Yp(t,o),o),Bt=!0,xt(e,i))};we.minus=we.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?UH(e,t):FH(e,(t.s=-t.s,t))};we.modulo=we.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Li+"NaN");return n.s?(Bt=!1,e=Ia(n,t,0,1).times(t),Bt=!0,n.minus(e)):xt(new r(n),i)};we.naturalExponential=we.exp=function(){return BH(this)};we.naturalLogarithm=we.ln=function(){return Yp(this)};we.negated=we.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};we.plus=we.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?FH(e,t):UH(e,(t.s=-t.s,t))};we.precision=we.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(wl+t);if(e=hn(i)+1,r=i.d.length-1,n=r*Dt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};we.squareRoot=we.sqrt=function(){var t,e,n,r,i,o,a,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(Li+"NaN")}for(t=hn(s),Bt=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=zo(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=kh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=a=n+3;;)if(o=r,r=o.plus(Ia(s,o,a+2)).times(.5),zo(o.d).slice(0,a)===(e=zo(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(xt(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return Bt=!0,xt(r,n)};we.times=we.mul=function(t){var e,n,r,i,o,a,s,u,l,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,n=c.e+t.e,u=h.length,l=d.length,u<l&&(o=h,h=d,d=o,a=u,u=l,l=a),o=[],a=u+l,r=a;r--;)o.push(0);for(r=l;--r>=0;){for(e=0,i=u+r;i>r;)s=o[i]+d[r]*h[i-r-1]+e,o[i--]=s%Dn|0,e=s/Dn|0;o[i]=(o[i]+e)%Dn|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,Bt?xt(t,f.precision):t};we.toDecimalPlaces=we.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ia(t,0,Oh),e===void 0?e=r.rounding:ia(e,0,8),xt(n,t+hn(n)+1,e))};we.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Nl(r,!0):(ia(t,0,Oh),e===void 0?e=i.rounding:ia(e,0,8),r=xt(new i(r),t+1,e),n=Nl(r,!0,t+1)),n};we.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Nl(i):(ia(t,0,Oh),e===void 0?e=o.rounding:ia(e,0,8),r=xt(new o(i),t+hn(i)+1,e),n=Nl(r.abs(),!1,t+hn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};we.toInteger=we.toint=function(){var t=this,e=t.constructor;return xt(new e(t),hn(t)+1,e.rounding)};we.toNumber=function(){return+this};we.toPower=we.pow=function(t){var e,n,r,i,o,a,s=this,u=s.constructor,l=12,c=+(t=new u(t));if(!t.s)return new u(oi);if(s=new u(s),!s.s){if(t.s<1)throw Error(Li+"Infinity");return s}if(s.eq(oi))return s;if(r=u.precision,t.eq(oi))return xt(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=c<0?-c:c)<=LH){for(i=new u(oi),e=Math.ceil(r/Dt+4),Bt=!1;n%2&&(i=i.times(s),yj(i.d,e)),n=kh(n/2),n!==0;)s=s.times(s),yj(s.d,e);return Bt=!0,t.s<0?new u(oi).div(i):xt(i,r)}}else if(o<0)throw Error(Li+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,Bt=!1,i=t.times(Yp(s,r+l)),Bt=!0,i=BH(i),i.s=o,i};we.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=hn(i),r=Nl(i,n<=o.toExpNeg||n>=o.toExpPos)):(ia(t,1,Oh),e===void 0?e=o.rounding:ia(e,0,8),i=xt(new o(i),t,e),n=hn(i),r=Nl(i,t<=n||n<=o.toExpNeg,t)),r};we.toSignificantDigits=we.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ia(t,1,Oh),e===void 0?e=r.rounding:ia(e,0,8)),xt(new r(n),t,e)};we.toString=we.valueOf=we.val=we.toJSON=we[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=hn(t),n=t.constructor;return Nl(t,e<=n.toExpNeg||e>=n.toExpPos)};function FH(t,e){var n,r,i,o,a,s,u,l,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),Bt?xt(e,f):e;if(u=t.d,l=e.d,a=t.e,i=e.e,u=u.slice(),o=a-i,o){for(o<0?(r=u,o=-o,s=l.length):(r=l,i=a,s=u.length),a=Math.ceil(f/Dt),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=u.length,o=l.length,s-o<0&&(o=s,r=l,l=u,u=r),n=0;o;)n=(u[--o]=u[o]+l[o]+n)/Dn|0,u[o]%=Dn;for(n&&(u.unshift(n),++i),s=u.length;u[--s]==0;)u.pop();return e.d=u,e.e=i,Bt?xt(e,f):e}function ia(t,e,n){if(t!==~~t||t<e||t>n)throw Error(wl+t)}function zo(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=Dt-r.length,n&&(o+=xs(n)),o+=r;a=t[e],r=a+"",n=Dt-r.length,n&&(o+=xs(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var Ia=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%Dn|0,a=o/Dn|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,u;if(o!=a)u=o>a?1:-1;else for(s=u=0;s<o;s++)if(r[s]!=i[s]){u=r[s]>i[s]?1:-1;break}return u}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*Dn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,u,l,c,f,h,d,p,m,v,g,y,b,_,x,S,E,C,A=r.constructor,T=r.s==i.s?1:-1,P=r.d,k=i.d;if(!r.s)return new A(r);if(!i.s)throw Error(Li+"Division by zero");for(u=r.e-i.e,E=k.length,x=P.length,d=new A(T),p=d.d=[],l=0;k[l]==(P[l]||0);)++l;if(k[l]>(P[l]||0)&&--u,o==null?y=o=A.precision:a?y=o+(hn(r)-hn(i))+1:y=o,y<0)return new A(0);if(y=y/Dt+2|0,l=0,E==1)for(c=0,k=k[0],y++;(l<x||c)&&y--;l++)b=c*Dn+(P[l]||0),p[l]=b/k|0,c=b%k|0;else{for(c=Dn/(k[0]+1)|0,c>1&&(k=t(k,c),P=t(P,c),E=k.length,x=P.length),_=E,m=P.slice(0,E),v=m.length;v<E;)m[v++]=0;C=k.slice(),C.unshift(0),S=k[0],k[1]>=Dn/2&&++S;do c=0,s=e(k,m,E,v),s<0?(g=m[0],E!=v&&(g=g*Dn+(m[1]||0)),c=g/S|0,c>1?(c>=Dn&&(c=Dn-1),f=t(k,c),h=f.length,v=m.length,s=e(f,m,h,v),s==1&&(c--,n(f,E<h?C:k,h))):(c==0&&(s=c=1),f=k.slice()),h=f.length,h<v&&f.unshift(0),n(m,f,v),s==-1&&(v=m.length,s=e(k,m,E,v),s<1&&(c++,n(m,E<v?C:k,v))),v=m.length):s===0&&(c++,m=[0]),p[l++]=c,s&&m[0]?m[v++]=P[_]||0:(m=[P[_]],v=1);while((_++<x||m[0]!==void 0)&&y--)}return p[0]||p.shift(),d.e=u,xt(d,a?o+hn(d)+1:o)}}();function BH(t,e){var n,r,i,o,a,s,u=0,l=0,c=t.constructor,f=c.precision;if(hn(t)>16)throw Error(cO+hn(t));if(!t.s)return new c(oi);for(e==null?(Bt=!1,s=f):s=e,a=new c(.03125);t.abs().gte(.1);)t=t.times(a),l+=5;for(r=Math.log(Vu(2,l))/Math.LN10*2+5|0,s+=r,n=i=o=new c(oi),c.precision=s;;){if(i=xt(i.times(t),s),n=n.times(++u),a=o.plus(Ia(i,n,s)),zo(a.d).slice(0,s)===zo(o.d).slice(0,s)){for(;l--;)o=xt(o.times(o),s);return c.precision=f,e==null?(Bt=!0,xt(o,f)):o}o=a}}function hn(t){for(var e=t.e*Dt,n=t.d[0];n>=10;n/=10)e++;return e}function m_(t,e,n){if(e>t.LN10.sd())throw Bt=!0,n&&(t.precision=n),Error(Li+"LN10 precision limit exceeded");return xt(new t(t.LN10),e)}function xs(t){for(var e="";t--;)e+="0";return e}function Yp(t,e){var n,r,i,o,a,s,u,l,c,f=1,h=10,d=t,p=d.d,m=d.constructor,v=m.precision;if(d.s<1)throw Error(Li+(d.s?"NaN":"-Infinity"));if(d.eq(oi))return new m(0);if(e==null?(Bt=!1,l=v):l=e,d.eq(10))return e==null&&(Bt=!0),m_(m,l);if(l+=h,m.precision=l,n=zo(p),r=n.charAt(0),o=hn(d),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)d=d.times(t),n=zo(d.d),r=n.charAt(0),f++;o=hn(d),r>1?(d=new m("0."+n),o++):d=new m(r+"."+n.slice(1))}else return u=m_(m,l+2,v).times(o+""),d=Yp(new m(r+"."+n.slice(1)),l-h).plus(u),m.precision=v,e==null?(Bt=!0,xt(d,v)):d;for(s=a=d=Ia(d.minus(oi),d.plus(oi),l),c=xt(d.times(d),l),i=3;;){if(a=xt(a.times(c),l),u=s.plus(Ia(a,new m(i),l)),zo(u.d).slice(0,l)===zo(s.d).slice(0,l))return s=s.times(2),o!==0&&(s=s.plus(m_(m,l+2,v).times(o+""))),s=Ia(s,new m(f),l),m.precision=v,e==null?(Bt=!0,xt(s,v)):s;s=u,i+=2}}function gj(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=kh(n/Dt),t.d=[],r=(n+1)%Dt,n<0&&(r+=Dt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Dt;r<i;)t.d.push(+e.slice(r,r+=Dt));e=e.slice(r),r=Dt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Bt&&(t.e>P0||t.e<-P0))throw Error(cO+n)}else t.s=0,t.e=0,t.d=[0];return t}function xt(t,e,n){var r,i,o,a,s,u,l,c,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=Dt,i=e,l=f[c=0];else{if(c=Math.ceil((r+1)/Dt),o=f.length,c>=o)return t;for(l=o=f[c],a=1;o>=10;o/=10)a++;r%=Dt,i=r-Dt+a}if(n!==void 0&&(o=Vu(10,a-i-1),s=l/o%10|0,u=e<0||f[c+1]!==void 0||l%o,u=n<4?(s||u)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||u||n==6&&(r>0?i>0?l/Vu(10,a-i):0:f[c-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return u?(o=hn(t),f.length=1,e=e-o-1,f[0]=Vu(10,(Dt-e%Dt)%Dt),t.e=kh(-e/Dt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=c,o=1,c--):(f.length=c+1,o=Vu(10,Dt-r),f[c]=i>0?(l/Vu(10,a-i)%Vu(10,i)|0)*o:0),u)for(;;)if(c==0){(f[0]+=o)==Dn&&(f[0]=1,++t.e);break}else{if(f[c]+=o,f[c]!=Dn)break;f[c--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if(Bt&&(t.e>P0||t.e<-P0))throw Error(cO+hn(t));return t}function UH(t,e){var n,r,i,o,a,s,u,l,c,f,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Bt?xt(e,d):e;if(u=t.d,f=e.d,r=e.e,l=t.e,u=u.slice(),a=l-r,a){for(c=a<0,c?(n=u,a=-a,s=f.length):(n=f,r=l,s=u.length),i=Math.max(Math.ceil(d/Dt),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=u.length,s=f.length,c=i<s,c&&(s=i),i=0;i<s;i++)if(u[i]!=f[i]){c=u[i]<f[i];break}a=0}for(c&&(n=u,u=f,f=n,e.s=-e.s),s=u.length,i=f.length-s;i>0;--i)u[s++]=0;for(i=f.length;i>a;){if(u[--i]<f[i]){for(o=i;o&&u[--o]===0;)u[o]=Dn-1;--u[o],u[i]+=Dn}u[i]-=f[i]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,Bt?xt(e,d):e):new h(0)}function Nl(t,e,n){var r,i=hn(t),o=zo(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+xs(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+xs(-i-1)+o,n&&(r=n-a)>0&&(o+=xs(r))):i>=a?(o+=xs(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+xs(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=xs(r))),t.s<0?"-"+o:o}function yj(t,e){if(t.length>e)return t.length=e,!0}function VH(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(wl+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return gj(a,o.toString())}else if(typeof o!="string")throw Error(wl+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,bIe.test(o))gj(a,o);else throw Error(wl+o)}if(i.prototype=we,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=VH,i.config=i.set=wIe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function wIe(t){if(!t||typeof t!="object")throw Error(Li+"Object expected");var e,n,r,i=["precision",1,Oh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(kh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(wl+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(wl+n+": "+r);return this}var fO=VH(yIe);oi=new fO(1);const yt=fO;function xIe(t){return CIe(t)||EIe(t)||SIe(t)||_Ie()}function _Ie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SIe(t,e){if(t){if(typeof t=="string")return y2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y2(t,e)}}function EIe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function CIe(t){if(Array.isArray(t))return y2(t)}function y2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var AIe=function(e){return e},WH={"@@functional/placeholder":!0},zH=function(e){return e===WH},bj=function(e){return function n(){return arguments.length===0||arguments.length===1&&zH(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},TIe=function t(e,n){return e===1?n:bj(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==WH}).length;return a>=e?n.apply(void 0,i):t(e-a,bj(function(){for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];var c=i.map(function(f){return zH(f)?u.shift():f});return n.apply(void 0,xIe(c).concat(u))}))})},$w=function(e){return TIe(e.length,e)},b2=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},PIe=$w(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),OIe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return AIe;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,u){return u(s)},o.apply(void 0,arguments))}},w2=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},HH=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,u){return s===n[u]})||(n=o,r=e.apply(void 0,o)),r}};function kIe(t){var e;return t===0?e=1:e=Math.floor(new yt(t).abs().log(10).toNumber())+1,e}function IIe(t,e,n){for(var r=new yt(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var RIe=$w(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),NIe=$w(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),DIe=$w(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const jw={rangeStep:IIe,getDigitCount:kIe,interpolateNumber:RIe,uninterpolateNumber:NIe,uninterpolateTruncation:DIe};function x2(t){return jIe(t)||$Ie(t)||qH(t)||MIe()}function MIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ie(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function jIe(t){if(Array.isArray(t))return _2(t)}function Jp(t,e){return BIe(t)||FIe(t,e)||qH(t,e)||LIe()}function LIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qH(t,e){if(t){if(typeof t=="string")return _2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _2(t,e)}}function _2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FIe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function BIe(t){if(Array.isArray(t))return t}function GH(t){var e=Jp(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function KH(t,e,n){if(t.lte(0))return new yt(0);var r=jw.getDigitCount(t.toNumber()),i=new yt(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new yt(Math.ceil(o.div(a).toNumber())).add(n).mul(a),u=s.mul(i);return e?u:new yt(Math.ceil(u))}function UIe(t,e,n){var r=1,i=new yt(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new yt(10).pow(jw.getDigitCount(t)-1),i=new yt(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new yt(Math.floor(t)))}else t===0?i=new yt(Math.floor((e-1)/2)):n||(i=new yt(Math.floor(t)));var a=Math.floor((e-1)/2),s=OIe(PIe(function(u){return i.add(new yt(u-a).mul(r)).toNumber()}),b2);return s(0,e)}function XH(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new yt(0),tickMin:new yt(0),tickMax:new yt(0)};var o=KH(new yt(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new yt(0):(a=new yt(t).add(e).div(2),a=a.sub(new yt(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),u=Math.ceil(new yt(e).sub(a).div(o).toNumber()),l=s+u+1;return l>n?XH(t,e,n,r,i+1):(l<n&&(u=e>0?u+(n-l):u,s=e>0?s:s+(n-l)),{step:o,tickMin:a.sub(new yt(s).mul(o)),tickMax:a.add(new yt(u).mul(o))})}function VIe(t){var e=Jp(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=GH([n,r]),u=Jp(s,2),l=u[0],c=u[1];if(l===-1/0||c===1/0){var f=c===1/0?[l].concat(x2(b2(0,i-1).map(function(){return 1/0}))):[].concat(x2(b2(0,i-1).map(function(){return-1/0})),[c]);return n>r?w2(f):f}if(l===c)return UIe(l,i,o);var h=XH(l,c,a,o),d=h.step,p=h.tickMin,m=h.tickMax,v=jw.rangeStep(p,m.add(new yt(.1).mul(d)),d);return n>r?w2(v):v}function WIe(t,e){var n=Jp(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=GH([r,i]),s=Jp(a,2),u=s[0],l=s[1];if(u===-1/0||l===1/0)return[r,i];if(u===l)return[u];var c=Math.max(e,2),f=KH(new yt(l).sub(u).div(c-1),o,0),h=[].concat(x2(jw.rangeStep(new yt(u),new yt(l).sub(new yt(.99).mul(f)),f)),[l]);return r>i?w2(h):h}var zIe=HH(VIe),HIe=HH(WIe),qIe="Invariant failed";function Dl(t,e){throw new Error(qIe)}var GIe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function zf(t){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zf(t)}function O0(){return O0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O0.apply(this,arguments)}function KIe(t,e){return QIe(t)||JIe(t,e)||YIe(t,e)||XIe()}function XIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YIe(t,e){if(t){if(typeof t=="string")return wj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wj(t,e)}}function wj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JIe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function QIe(t){if(Array.isArray(t))return t}function ZIe(t,e){if(t==null)return{};var n=eRe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function tRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nRe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QH(r.key),r)}}function rRe(t,e,n){return e&&nRe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iRe(t,e,n){return e=k0(e),oRe(t,YH()?Reflect.construct(e,n||[],k0(t).constructor):e.apply(t,n))}function oRe(t,e){if(e&&(zf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aRe(t)}function aRe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YH=function(){return!!t})()}function k0(t){return k0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k0(t)}function sRe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S2(t,e)}function S2(t,e){return S2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S2(t,e)}function JH(t,e,n){return e=QH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QH(t){var e=uRe(t,"string");return zf(e)=="symbol"?e:e+""}function uRe(t,e){if(zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Lw=function(t){function e(){return tRe(this,e),iRe(this,e,arguments)}return sRe(e,t),rRe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,u=r.data,l=r.dataPointFormatter,c=r.xAxis,f=r.yAxis,h=ZIe(r,GIe),d=Le(h,!1);this.props.direction==="x"&&c.type!=="number"&&Dl();var p=u.map(function(m){var v=l(m,s),g=v.x,y=v.y,b=v.value,_=v.errorVal;if(!_)return null;var x=[],S,E;if(Array.isArray(_)){var C=KIe(_,2);S=C[0],E=C[1]}else S=E=_;if(o==="vertical"){var A=c.scale,T=y+i,P=T+a,k=T-a,I=A(b-S),$=A(b+E);x.push({x1:$,y1:P,x2:$,y2:k}),x.push({x1:I,y1:T,x2:$,y2:T}),x.push({x1:I,y1:P,x2:I,y2:k})}else if(o==="horizontal"){var B=f.scale,z=g+i,U=z-a,M=z+a,F=B(b-S),H=B(b+E);x.push({x1:U,y1:H,x2:M,y2:H}),x.push({x1:z,y1:F,x2:z,y2:H}),x.push({x1:U,y1:F,x2:M,y2:F})}return W.createElement(ht,O0({className:"recharts-errorBar",key:"bar-".concat(x.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},d),x.map(function(X){return W.createElement("line",O0({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return W.createElement(ht,{className:"recharts-errorBars"},p)}}])}(W.Component);JH(Lw,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});JH(Lw,"displayName","ErrorBar");function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}function xj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Iu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xj(Object(n),!0).forEach(function(r){lRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lRe(t,e,n){return e=cRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cRe(t){var e=fRe(t,"string");return Qp(e)=="symbol"?e:e+""}function fRe(t,e){if(Qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZH=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=ei(n,cf);if(!a)return null;var s=cf.defaultProps,u=s!==void 0?Iu(Iu({},s),a.props):{},l;return a.props&&a.props.payload?l=a.props&&a.props.payload:o==="children"?l=(r||[]).reduce(function(c,f){var h=f.item,d=f.props,p=d.sectors||d.data||[];return c.concat(p.map(function(m){return{type:a.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):l=(r||[]).map(function(c){var f=c.item,h=f.type.defaultProps,d=h!==void 0?Iu(Iu({},h),f.props):{},p=d.dataKey,m=d.name,v=d.legendType,g=d.hide;return{inactive:g,dataKey:p,type:u.iconType||v||"square",color:hO(f),value:m||p,payload:d}}),Iu(Iu(Iu({},u),cf.getWithHeight(a,i)),{},{payload:l,item:a})};function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function _j(t){return mRe(t)||pRe(t)||dRe(t)||hRe()}function hRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dRe(t,e){if(t){if(typeof t=="string")return E2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E2(t,e)}}function pRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mRe(t){if(Array.isArray(t))return E2(t)}function E2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sj(Object(n),!0).forEach(function(r){hf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hf(t,e,n){return e=vRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vRe(t){var e=gRe(t,"string");return Zp(e)=="symbol"?e:e+""}function gRe(t,e){if(Zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fr(t,e,n){return Xe(t)||Xe(e)?n:En(e)?di(t,e,n):We(e)?e(t):n}function Kd(t,e,n,r){var i=pIe(t,function(s){return fr(s,e)});if(n==="number"){var o=i.filter(function(s){return he(s)||parseFloat(s)});return o.length?[Dw(o),Nw(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!Xe(s)}):i;return a.map(function(s){return En(s)||s instanceof Date?s:""})}var yRe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var u=o.range,l=0;l<s;l++){var c=l>0?i[l-1].coordinate:i[s-1].coordinate,f=i[l].coordinate,h=l>=s-1?i[0].coordinate:i[l+1].coordinate,d=void 0;if(xr(f-c)!==xr(h-f)){var p=[];if(xr(h-f)===xr(u[1]-u[0])){d=h;var m=f+u[1]-u[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{d=c;var v=h+u[1]-u[0];p[0]=Math.min(f,(v+f)/2),p[1]=Math.max(f,(v+f)/2)}var g=[Math.min(f,(d+f)/2),Math.max(f,(d+f)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){a=i[l].index;break}}else{var y=Math.min(c,h),b=Math.max(c,h);if(e>(y+f)/2&&e<=(b+f)/2){a=i[l].index;break}}}else for(var _=0;_<s;_++)if(_===0&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<s-1&&e>(r[_].coordinate+r[_-1].coordinate)/2&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_===s-1&&e>(r[_].coordinate+r[_-1].coordinate)/2){a=r[_].index;break}return a},hO=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Zt(Zt({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,u;switch(i){case"Line":u=a;break;case"Area":case"Radar":u=a&&a!=="none"?a:s;break;default:u=s;break}return u},bRe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),u=0,l=s.length;u<l;u++)for(var c=o[s[u]].stackGroups,f=Object.keys(c),h=0,d=f.length;h<d;h++){var p=c[f[h]],m=p.items,v=p.cateAxisId,g=m.filter(function(E){return Pa(E.type).indexOf("Bar")>=0});if(g&&g.length){var y=g[0].type.defaultProps,b=y!==void 0?Zt(Zt({},y),g[0].props):g[0].props,_=b.barSize,x=b[v];a[x]||(a[x]=[]);var S=Xe(_)?n:_;a[x].push({item:g[0],stackList:g.slice(1),barSize:Xe(S)?void 0:_r(S,r,0)})}}return a},wRe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,u=a.length;if(u<1)return null;var l=_r(n,i,0,!0),c,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,d=i/u,p=a.reduce(function(_,x){return _+x.barSize||0},0);p+=(u-1)*l,p>=i&&(p-=(u-1)*l,l=0),p>=i&&d>0&&(h=!0,d*=.9,p=u*d);var m=(i-p)/2>>0,v={offset:m-l,size:0};c=a.reduce(function(_,x){var S={item:x.item,position:{offset:v.offset+v.size+l,size:h?d:x.barSize}},E=[].concat(_j(_),[S]);return v=E[E.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(C){E.push({item:C,position:v})}),E},f)}else{var g=_r(r,i,0,!0);i-2*g-(u-1)*l<=0&&(l=0);var y=(i-2*g-(u-1)*l)/u;y>1&&(y>>=0);var b=s===+s?Math.min(y,s):y;c=a.reduce(function(_,x,S){var E=[].concat(_j(_),[{item:x.item,position:{offset:g+(y+l)*S+(y-b)/2,size:b}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(C){E.push({item:C,position:E[E.length-1].position})}),E},f)}return c},xRe=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,u=a-(s.left||0)-(s.right||0),l=ZH({children:o,legendWidth:u});if(l){var c=i||{},f=c.width,h=c.height,d=l.align,p=l.verticalAlign,m=l.layout;if((m==="vertical"||m==="horizontal"&&p==="middle")&&d!=="center"&&he(e[d]))return Zt(Zt({},e),{},hf({},d,e[d]+(f||0)));if((m==="horizontal"||m==="vertical"&&d==="center")&&p!=="middle"&&he(e[p]))return Zt(Zt({},e),{},hf({},p,e[p]+(h||0)))}return e},_Re=function(e,n,r){return Xe(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},e8=function(e,n,r,i,o){var a=n.props.children,s=Mi(a,Lw).filter(function(l){return _Re(i,o,l.props.direction)});if(s&&s.length){var u=s.map(function(l){return l.props.dataKey});return e.reduce(function(l,c){var f=fr(c,r);if(Xe(f))return l;var h=Array.isArray(f)?[Dw(f),Nw(f)]:[f,f],d=u.reduce(function(p,m){var v=fr(c,m,0),g=h[0]-Math.abs(Array.isArray(v)?v[0]:v),y=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(g,p[0]),Math.max(y,p[1])]},[1/0,-1/0]);return[Math.min(d[0],l[0]),Math.max(d[1],l[1])]},[1/0,-1/0])}return null},SRe=function(e,n,r,i,o){var a=n.map(function(s){return e8(e,s,r,o,i)}).filter(function(s){return!Xe(s)});return a&&a.length?a.reduce(function(s,u){return[Math.min(s[0],u[0]),Math.max(s[1],u[1])]},[1/0,-1/0]):null},t8=function(e,n,r,i,o){var a=n.map(function(u){var l=u.props.dataKey;return r==="number"&&l&&e8(e,u,l,i)||Kd(e,l,r,o)});if(r==="number")return a.reduce(function(u,l){return[Math.min(u[0],l[0]),Math.max(u[1],l[1])]},[1/0,-1/0]);var s={};return a.reduce(function(u,l){for(var c=0,f=l.length;c<f;c++)s[l[c]]||(s[l[c]]=!0,u.push(l[c]));return u},[])},n8=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},al=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,u=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,l=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/u:0;if(l=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?xr(s[0]-s[1])*2*l:l,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+l,value:f,offset:l}});return c.filter(function(f){return!Gm(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+l,value:f,index:h,offset:l}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+l,value:f,offset:l}}):i.domain().map(function(f,h){return{coordinate:i(f)+l,value:o?o[f]:f,index:h,offset:l}})},v_=new WeakMap,dg=function(e,n){if(typeof n!="function")return e;v_.has(e)||v_.set(e,new WeakMap);var r=v_.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},r8=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Hp(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:E0(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Gd(),realScaleType:"point"}:o==="category"?{scale:Hp(),realScaleType:"band"}:{scale:E0(),realScaleType:"linear"};if(kl(i)){var u="scale".concat(yw(i));return{scale:(vj[u]||Gd)(),realScaleType:vj[u]?u:"point"}}return We(i)?{scale:i}:{scale:Gd(),realScaleType:"point"}},Ej=1e-4,i8=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-Ej,a=Math.max(i[0],i[1])+Ej,s=e(n[0]),u=e(n[r-1]);(s<o||s>a||u<o||u>a)&&e.domain([n[0],n[r-1]])}},ERe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},CRe=function(e,n){if(!n||n.length!==2||!he(n[0])||!he(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!he(e[0])||e[0]<r)&&(o[0]=r),(!he(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},ARe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var u=Gm(e[s][r][1])?e[s][r][0]:e[s][r][1];u>=0?(e[s][r][0]=o,e[s][r][1]=o+u,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+u,a=e[s][r][1])}},TRe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=Gm(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},PRe={sign:ARe,expand:qwe,none:$f,silhouette:Gwe,wiggle:Kwe,positive:TRe},ORe=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=PRe[r],a=Hwe().keys(i).value(function(s,u){return+fr(s,u,0)}).order(XE).offset(o);return a(e)},kRe=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,u={},l=s.reduce(function(f,h){var d,p=(d=h.type)!==null&&d!==void 0&&d.defaultProps?Zt(Zt({},h.type.defaultProps),h.props):h.props,m=p.stackId,v=p.hide;if(v)return f;var g=p[r],y=f[g]||{hasStack:!1,stackGroups:{}};if(En(m)){var b=y.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};b.items.push(h),y.hasStack=!0,y.stackGroups[m]=b}else y.stackGroups[Km("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Zt(Zt({},f),{},hf({},g,y))},u),c={};return Object.keys(l).reduce(function(f,h){var d=l[h];if(d.hasStack){var p={};d.stackGroups=Object.keys(d.stackGroups).reduce(function(m,v){var g=d.stackGroups[v];return Zt(Zt({},m),{},hf({},v,{numericAxisId:r,cateAxisId:i,items:g.items,stackedData:ORe(e,g.items,o)}))},p)}return Zt(Zt({},f),{},hf({},h,d))},c)},o8=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,u=r||n.scale;if(u!=="auto"&&u!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var l=e.domain();if(!l.length)return null;var c=zIe(l,o,s);return e.domain([Dw(c),Nw(c)]),{niceTicks:c}}if(o&&i==="number"){var f=e.domain(),h=HIe(f,o,s);return{niceTicks:h}}return null},Cj=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var u=fr(a,n.dataKey,n.domain[s]);return Xe(u)?null:n.scale(u)-o/2+i},IRe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},RRe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Zt(Zt({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(En(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},NRe=function(e){return e.reduce(function(n,r){return[Dw(r.concat([n[0]]).filter(he)),Nw(r.concat([n[1]]).filter(he))]},[1/0,-1/0])},a8=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,u=s.reduce(function(l,c){var f=NRe(c.slice(n,r+1));return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(u[0],i[0]),Math.max(u[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},Aj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Tj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,C2=function(e,n,r){if(We(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(he(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(Aj.test(e[0])){var o=+Aj.exec(e[0])[1];i[0]=n[0]-o}else We(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(he(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(Tj.test(e[1])){var a=+Tj.exec(e[1])[1];i[1]=n[1]+a}else We(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},I0=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=BP(n,function(f){return f.coordinate}),a=1/0,s=1,u=o.length;s<u;s++){var l=o[s],c=o[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},Pj=function(e,n,r){return!e||!e.length||Mw(e,di(r,"type.defaultProps.domain"))?n:e},s8=function(e,n){var r=e.type.defaultProps?Zt(Zt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,u=r.tooltipType,l=r.chartType,c=r.hide;return Zt(Zt({},Le(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:hO(e),value:fr(n,i),type:u,payload:n,chartType:l,hide:c})};function em(t){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},em(t)}function Oj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oj(Object(n),!0).forEach(function(r){u8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function u8(t,e,n){return e=DRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DRe(t){var e=MRe(t,"string");return em(e)=="symbol"?e:e+""}function MRe(t,e){if(em(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Re(t,e){return BRe(t)||FRe(t,e)||LRe(t,e)||jRe()}function jRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LRe(t,e){if(t){if(typeof t=="string")return kj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kj(t,e)}}function kj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FRe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function BRe(t){if(Array.isArray(t))return t}var R0=Math.PI/180,URe=function(e){return e*180/Math.PI},Tt=function(e,n,r,i){return{x:e+Math.cos(-R0*i)*r,y:n+Math.sin(-R0*i)*r}},l8=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},VRe=function(e,n,r,i,o){var a=e.width,s=e.height,u=e.startAngle,l=e.endAngle,c=_r(e.cx,a,a/2),f=_r(e.cy,s,s/2),h=l8(a,s,r),d=_r(e.innerRadius,h,0),p=_r(e.outerRadius,h,h*.8),m=Object.keys(n);return m.reduce(function(v,g){var y=n[g],b=y.domain,_=y.reversed,x;if(Xe(y.range))i==="angleAxis"?x=[u,l]:i==="radiusAxis"&&(x=[d,p]),_&&(x=[x[1],x[0]]);else{x=y.range;var S=x,E=$Re(S,2);u=E[0],l=E[1]}var C=r8(y,o),A=C.realScaleType,T=C.scale;T.domain(b).range(x),i8(T);var P=o8(T,ya(ya({},y),{},{realScaleType:A})),k=ya(ya(ya({},y),P),{},{range:x,radius:p,realScaleType:A,scale:T,cx:c,cy:f,innerRadius:d,outerRadius:p,startAngle:u,endAngle:l});return ya(ya({},v),{},u8({},g,k))},{})},WRe=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},zRe=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=WRe({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var u=(r-o)/s,l=Math.acos(u);return i>a&&(l=2*Math.PI-l),{radius:s,angle:URe(l),angleInRadian:l}},HRe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},qRe=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},Ij=function(e,n){var r=e.x,i=e.y,o=zRe({x:r,y:i},n),a=o.radius,s=o.angle,u=n.innerRadius,l=n.outerRadius;if(a<u||a>l)return!1;if(a===0)return!0;var c=HRe(n),f=c.startAngle,h=c.endAngle,d=s,p;if(f<=h){for(;d>h;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=h}else{for(;d>f;)d-=360;for(;d<h;)d+=360;p=d>=h&&d<=f}return p?ya(ya({},n),{},{radius:a,angle:qRe(d,n)}):null},c8=function(e){return!R.isValidElement(e)&&!We(e)&&typeof e!="boolean"?e.className:""};function tm(t){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(t)}var GRe=["offset"];function KRe(t){return QRe(t)||JRe(t)||YRe(t)||XRe()}function XRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YRe(t,e){if(t){if(typeof t=="string")return A2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A2(t,e)}}function JRe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QRe(t){if(Array.isArray(t))return A2(t)}function A2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ZRe(t,e){if(t==null)return{};var n=eNe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rj(Object(n),!0).forEach(function(r){tNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tNe(t,e,n){return e=nNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nNe(t){var e=rNe(t,"string");return tm(e)=="symbol"?e:e+""}function rNe(t,e){if(tm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nm(){return nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nm.apply(this,arguments)}var iNe=function(e){var n=e.value,r=e.formatter,i=Xe(e.children)?n:e.children;return We(r)?r(i):i},oNe=function(e,n){var r=xr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},aNe=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,u=o,l=u.cx,c=u.cy,f=u.innerRadius,h=u.outerRadius,d=u.startAngle,p=u.endAngle,m=u.clockWise,v=(f+h)/2,g=oNe(d,p),y=g>=0?1:-1,b,_;i==="insideStart"?(b=d+y*a,_=m):i==="insideEnd"?(b=p-y*a,_=!m):i==="end"&&(b=p+y*a,_=m),_=g<=0?_:!_;var x=Tt(l,c,v,b),S=Tt(l,c,v,b+(_?1:-1)*359),E="M".concat(x.x,",").concat(x.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),C=Xe(e.id)?Km("recharts-radial-line-"):e.id;return W.createElement("text",nm({},r,{dominantBaseline:"central",className:qe("recharts-radial-bar-label",s)}),W.createElement("defs",null,W.createElement("path",{id:C,d:E})),W.createElement("textPath",{xlinkHref:"#".concat(C)},n))},sNe=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,u=o.innerRadius,l=o.outerRadius,c=o.startAngle,f=o.endAngle,h=(c+f)/2;if(i==="outside"){var d=Tt(a,s,l+r,h),p=d.x,m=d.y;return{x:p,y:m,textAnchor:p>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(u+l)/2,g=Tt(a,s,v,h),y=g.x,b=g.y;return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},uNe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,u=a.y,l=a.width,c=a.height,f=c>=0?1:-1,h=f*i,d=f>0?"end":"start",p=f>0?"start":"end",m=l>=0?1:-1,v=m*i,g=m>0?"end":"start",y=m>0?"start":"end";if(o==="top"){var b={x:s+l/2,y:u-f*i,textAnchor:"middle",verticalAnchor:d};return gn(gn({},b),r?{height:Math.max(u-r.y,0),width:l}:{})}if(o==="bottom"){var _={x:s+l/2,y:u+c+h,textAnchor:"middle",verticalAnchor:p};return gn(gn({},_),r?{height:Math.max(r.y+r.height-(u+c),0),width:l}:{})}if(o==="left"){var x={x:s-v,y:u+c/2,textAnchor:g,verticalAnchor:"middle"};return gn(gn({},x),r?{width:Math.max(x.x-r.x,0),height:c}:{})}if(o==="right"){var S={x:s+l+v,y:u+c/2,textAnchor:y,verticalAnchor:"middle"};return gn(gn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var E=r?{width:l,height:c}:{};return o==="insideLeft"?gn({x:s+v,y:u+c/2,textAnchor:y,verticalAnchor:"middle"},E):o==="insideRight"?gn({x:s+l-v,y:u+c/2,textAnchor:g,verticalAnchor:"middle"},E):o==="insideTop"?gn({x:s+l/2,y:u+h,textAnchor:"middle",verticalAnchor:p},E):o==="insideBottom"?gn({x:s+l/2,y:u+c-h,textAnchor:"middle",verticalAnchor:d},E):o==="insideTopLeft"?gn({x:s+v,y:u+h,textAnchor:y,verticalAnchor:p},E):o==="insideTopRight"?gn({x:s+l-v,y:u+h,textAnchor:g,verticalAnchor:p},E):o==="insideBottomLeft"?gn({x:s+v,y:u+c-h,textAnchor:y,verticalAnchor:d},E):o==="insideBottomRight"?gn({x:s+l-v,y:u+c-h,textAnchor:g,verticalAnchor:d},E):xh(o)&&(he(o.x)||rl(o.x))&&(he(o.y)||rl(o.y))?gn({x:s+_r(o.x,l),y:u+_r(o.y,c),textAnchor:"end",verticalAnchor:"end"},E):gn({x:s+l/2,y:u+c/2,textAnchor:"middle",verticalAnchor:"middle"},E)},lNe=function(e){return"cx"in e&&he(e.cx)};function $n(t){var e=t.offset,n=e===void 0?5:e,r=ZRe(t,GRe),i=gn({offset:n},r),o=i.viewBox,a=i.position,s=i.value,u=i.children,l=i.content,c=i.className,f=c===void 0?"":c,h=i.textBreakAll;if(!o||Xe(s)&&Xe(u)&&!R.isValidElement(l)&&!We(l))return null;if(R.isValidElement(l))return R.cloneElement(l,i);var d;if(We(l)){if(d=R.createElement(l,i),R.isValidElement(d))return d}else d=iNe(i);var p=lNe(o),m=Le(i,!0);if(p&&(a==="insideStart"||a==="insideEnd"||a==="end"))return aNe(i,d,m);var v=p?sNe(i):uNe(i);return W.createElement(Rl,nm({className:qe("recharts-label",f)},m,v,{breakAll:h}),d)}$n.displayName="Label";var f8=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,u=e.radius,l=e.innerRadius,c=e.outerRadius,f=e.x,h=e.y,d=e.top,p=e.left,m=e.width,v=e.height,g=e.clockWise,y=e.labelViewBox;if(y)return y;if(he(m)&&he(v)){if(he(f)&&he(h))return{x:f,y:h,width:m,height:v};if(he(d)&&he(p))return{x:d,y:p,width:m,height:v}}return he(f)&&he(h)?{x:f,y:h,width:0,height:0}:he(n)&&he(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:l||0,outerRadius:c||u||s||0,clockWise:g}:e.viewBox?e.viewBox:{}},cNe=function(e,n){return e?e===!0?W.createElement($n,{key:"label-implicit",viewBox:n}):En(e)?W.createElement($n,{key:"label-implicit",viewBox:n,value:e}):R.isValidElement(e)?e.type===$n?R.cloneElement(e,{key:"label-implicit",viewBox:n}):W.createElement($n,{key:"label-implicit",content:e,viewBox:n}):We(e)?W.createElement($n,{key:"label-implicit",content:e,viewBox:n}):xh(e)?W.createElement($n,nm({viewBox:n},e,{key:"label-implicit"})):null:null},fNe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=f8(e),a=Mi(i,$n).map(function(u,l){return R.cloneElement(u,{viewBox:n||o,key:"label-".concat(l)})});if(!r)return a;var s=cNe(e.label,n||o);return[s].concat(KRe(a))};$n.parseViewBox=f8;$n.renderCallByParent=fNe;function hNe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var dNe=hNe;const pNe=pt(dNe);function rm(t){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(t)}var mNe=["valueAccessor"],vNe=["data","dataKey","clockWise","id","textBreakAll"];function gNe(t){return xNe(t)||wNe(t)||bNe(t)||yNe()}function yNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bNe(t,e){if(t){if(typeof t=="string")return T2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T2(t,e)}}function wNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xNe(t){if(Array.isArray(t))return T2(t)}function T2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N0(){return N0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N0.apply(this,arguments)}function Nj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nj(Object(n),!0).forEach(function(r){_Ne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ne(t,e,n){return e=SNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SNe(t){var e=ENe(t,"string");return rm(e)=="symbol"?e:e+""}function ENe(t,e){if(rm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mj(t,e){if(t==null)return{};var n=CNe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var ANe=function(e){return Array.isArray(e.value)?pNe(e.value):e.value};function Ys(t){var e=t.valueAccessor,n=e===void 0?ANe:e,r=Mj(t,mNe),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,u=r.textBreakAll,l=Mj(r,vNe);return!i||!i.length?null:W.createElement(ht,{className:"recharts-label-list"},i.map(function(c,f){var h=Xe(o)?n(c,f):fr(c&&c.payload,o),d=Xe(s)?{}:{id:"".concat(s,"-").concat(f)};return W.createElement($n,N0({},Le(c,!0),l,d,{parentViewBox:c.parentViewBox,value:h,textBreakAll:u,viewBox:$n.parseViewBox(Xe(a)?c:Dj(Dj({},c),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Ys.displayName="LabelList";function TNe(t,e){return t?t===!0?W.createElement(Ys,{key:"labelList-implicit",data:e}):W.isValidElement(t)||We(t)?W.createElement(Ys,{key:"labelList-implicit",data:e,content:t}):xh(t)?W.createElement(Ys,N0({data:e},t,{key:"labelList-implicit"})):null:null}function PNe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Mi(r,Ys).map(function(a,s){return R.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=TNe(t.label,e);return[o].concat(gNe(i))}Ys.renderCallByParent=PNe;function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function P2(){return P2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P2.apply(this,arguments)}function $j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$j(Object(n),!0).forEach(function(r){ONe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$j(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ONe(t,e,n){return e=kNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kNe(t){var e=INe(t,"string");return im(e)=="symbol"?e:e+""}function INe(t,e){if(im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RNe=function(e,n){var r=xr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},pg=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,u=e.cornerRadius,l=e.cornerIsExternal,c=u*(s?1:-1)+i,f=Math.asin(u/c)/R0,h=l?o:o+a*f,d=Tt(n,r,c,h),p=Tt(n,r,i,h),m=l?o-a*f:o,v=Tt(n,r,c*Math.cos(f*R0),m);return{center:d,circleTangency:p,lineTangency:v,theta:f}},h8=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,u=RNe(a,s),l=a+u,c=Tt(n,r,o,a),f=Tt(n,r,o,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>l),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var d=Tt(n,r,i,a),p=Tt(n,r,i,l);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=l),`,
            `).concat(d.x,",").concat(d.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},NNe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,u=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,f=xr(c-l),h=pg({cx:n,cy:r,radius:o,angle:l,sign:f,cornerRadius:a,cornerIsExternal:u}),d=h.circleTangency,p=h.lineTangency,m=h.theta,v=pg({cx:n,cy:r,radius:o,angle:c,sign:-f,cornerRadius:a,cornerIsExternal:u}),g=v.circleTangency,y=v.lineTangency,b=v.theta,_=u?Math.abs(l-c):Math.abs(l-c)-m-b;if(_<0)return s?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):h8({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c});var x="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var S=pg({cx:n,cy:r,radius:i,angle:l,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),E=S.circleTangency,C=S.lineTangency,A=S.theta,T=pg({cx:n,cy:r,radius:i,angle:c,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),P=T.circleTangency,k=T.lineTangency,I=T.theta,$=u?Math.abs(l-c):Math.abs(l-c)-A-I;if($<0&&a===0)return"".concat(x,"L").concat(n,",").concat(r,"Z");x+="L".concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+($>180),",").concat(+(f>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else x+="L".concat(n,",").concat(r,"Z");return x},DNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},d8=function(e){var n=jj(jj({},DNe),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,u=n.forceCornerRadius,l=n.cornerIsExternal,c=n.startAngle,f=n.endAngle,h=n.className;if(a<o||c===f)return null;var d=qe("recharts-sector",h),p=a-o,m=_r(s,p,0,!0),v;return m>0&&Math.abs(c-f)<360?v=NNe({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(m,p/2),forceCornerRadius:u,cornerIsExternal:l,startAngle:c,endAngle:f}):v=h8({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:f}),W.createElement("path",P2({},Le(n,!0),{className:d,d:v,role:"img"}))};function om(t){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(t)}function O2(){return O2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O2.apply(this,arguments)}function Lj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lj(Object(n),!0).forEach(function(r){MNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MNe(t,e,n){return e=$Ne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ne(t){var e=jNe(t,"string");return om(e)=="symbol"?e:e+""}function jNe(t,e){if(om(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bj={curveBasisClosed:Dwe,curveBasisOpen:Mwe,curveBasis:Nwe,curveBumpX:bwe,curveBumpY:wwe,curveLinearClosed:$we,curveLinear:ww,curveMonotoneX:jwe,curveMonotoneY:Lwe,curveNatural:Fwe,curveStep:Bwe,curveStepAfter:Vwe,curveStepBefore:Uwe},mg=function(e){return e.x===+e.x&&e.y===+e.y},hd=function(e){return e.x},dd=function(e){return e.y},LNe=function(e,n){if(We(e))return e;var r="curve".concat(yw(e));return(r==="curveMonotone"||r==="curveBump")&&n?Bj["".concat(r).concat(n==="vertical"?"Y":"X")]:Bj[r]||ww},FNe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,u=e.connectNulls,l=u===void 0?!1:u,c=LNe(r,s),f=l?o.filter(function(m){return mg(m)}):o,h;if(Array.isArray(a)){var d=l?a.filter(function(m){return mg(m)}):a,p=f.map(function(m,v){return Fj(Fj({},m),{},{base:d[v]})});return s==="vertical"?h=og().y(dd).x1(hd).x0(function(m){return m.base.x}):h=og().x(hd).y1(dd).y0(function(m){return m.base.y}),h.defined(mg).curve(c),h(p)}return s==="vertical"&&he(a)?h=og().y(dd).x1(hd).x0(a):he(a)?h=og().x(hd).y1(dd).y0(a):h=uz().x(hd).y(dd),h.defined(mg).curve(c),h(f)},k2=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?FNe(e):i;return R.createElement("path",O2({},Le(e,!1),i0(e),{className:qe("recharts-curve",n),d:a,ref:o}))},p8={exports:{}},BNe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UNe=BNe,VNe=UNe;function m8(){}function v8(){}v8.resetWarningCache=m8;var WNe=function(){function t(r,i,o,a,s,u){if(u!==VNe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:v8,resetWarningCache:m8};return n.PropTypes=n,n};p8.exports=WNe();var zNe=p8.exports;const ct=pt(zNe);var HNe=Object.getOwnPropertyNames,qNe=Object.getOwnPropertySymbols,GNe=Object.prototype.hasOwnProperty;function Uj(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function vg(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);var u=t(n,r,i);return o.delete(n),o.delete(r),u}}function Vj(t){return HNe(t).concat(qNe(t))}var KNe=Object.hasOwn||function(t,e){return GNe.call(t,e)};function Hl(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var XNe="__v",YNe="__o",JNe="_owner",Wj=Object.getOwnPropertyDescriptor,zj=Object.keys;function QNe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function ZNe(t,e){return Hl(t.getTime(),e.getTime())}function eDe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function tDe(t,e){return t===e}function Hj(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),o=t.entries(),a,s,u=0;(a=o.next())&&!a.done;){for(var l=e.entries(),c=!1,f=0;(s=l.next())&&!s.done;){if(i[f]){f++;continue}var h=a.value,d=s.value;if(n.equals(h[0],d[0],u,f,t,e,n)&&n.equals(h[1],d[1],h[0],d[0],t,e,n)){c=i[f]=!0;break}f++}if(!c)return!1;u++}return!0}var nDe=Hl;function rDe(t,e,n){var r=zj(t),i=r.length;if(zj(e).length!==i)return!1;for(;i-- >0;)if(!g8(t,e,n,r[i]))return!1;return!0}function pd(t,e,n){var r=Vj(t),i=r.length;if(Vj(e).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=r[i],!g8(t,e,n,o)||(a=Wj(t,o),s=Wj(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function iDe(t,e){return Hl(t.valueOf(),e.valueOf())}function oDe(t,e){return t.source===e.source&&t.flags===e.flags}function qj(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),o=t.values(),a,s;(a=o.next())&&!a.done;){for(var u=e.values(),l=!1,c=0;(s=u.next())&&!s.done;){if(!i[c]&&n.equals(a.value,s.value,a.value,s.value,t,e,n)){l=i[c]=!0;break}c++}if(!l)return!1}return!0}function aDe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function sDe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function g8(t,e,n,r){return(r===JNe||r===YNe||r===XNe)&&(t.$$typeof||e.$$typeof)?!0:KNe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var uDe="[object Arguments]",lDe="[object Boolean]",cDe="[object Date]",fDe="[object Error]",hDe="[object Map]",dDe="[object Number]",pDe="[object Object]",mDe="[object RegExp]",vDe="[object Set]",gDe="[object String]",yDe="[object URL]",bDe=Array.isArray,Gj=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Kj=Object.assign,wDe=Object.prototype.toString.call.bind(Object.prototype.toString);function xDe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,o=t.areMapsEqual,a=t.areNumbersEqual,s=t.areObjectsEqual,u=t.arePrimitiveWrappersEqual,l=t.areRegExpsEqual,c=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(p,m,v){if(p===m)return!0;if(p==null||m==null)return!1;var g=typeof p;if(g!==typeof m)return!1;if(g!=="object")return g==="number"?a(p,m,v):g==="function"?i(p,m,v):!1;var y=p.constructor;if(y!==m.constructor)return!1;if(y===Object)return s(p,m,v);if(bDe(p))return e(p,m,v);if(Gj!=null&&Gj(p))return f(p,m,v);if(y===Date)return n(p,m,v);if(y===RegExp)return l(p,m,v);if(y===Map)return o(p,m,v);if(y===Set)return c(p,m,v);var b=wDe(p);return b===cDe?n(p,m,v):b===mDe?l(p,m,v):b===hDe?o(p,m,v):b===vDe?c(p,m,v):b===pDe?typeof p.then!="function"&&typeof m.then!="function"&&s(p,m,v):b===yDe?h(p,m,v):b===fDe?r(p,m,v):b===uDe?s(p,m,v):b===lDe||b===dDe||b===gDe?u(p,m,v):!1}}function _De(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?pd:QNe,areDatesEqual:ZNe,areErrorsEqual:eDe,areFunctionsEqual:tDe,areMapsEqual:r?Uj(Hj,pd):Hj,areNumbersEqual:nDe,areObjectsEqual:r?pd:rDe,arePrimitiveWrappersEqual:iDe,areRegExpsEqual:oDe,areSetsEqual:r?Uj(qj,pd):qj,areTypedArraysEqual:r?pd:aDe,areUrlsEqual:sDe};if(n&&(i=Kj({},i,n(i))),e){var o=vg(i.areArraysEqual),a=vg(i.areMapsEqual),s=vg(i.areObjectsEqual),u=vg(i.areSetsEqual);i=Kj({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:u})}return i}function SDe(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function EDe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(u,l){var c=r(),f=c.cache,h=f===void 0?e?new WeakMap:void 0:f,d=c.meta;return n(u,l,{cache:h,equals:i,meta:d,strict:o})};if(e)return function(u,l){return n(u,l,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(u,l){return n(u,l,a)}}var CDe=wu();wu({strict:!0});wu({circular:!0});wu({circular:!0,strict:!0});wu({createInternalComparator:function(){return Hl}});wu({strict:!0,createInternalComparator:function(){return Hl}});wu({circular:!0,createInternalComparator:function(){return Hl}});wu({circular:!0,createInternalComparator:function(){return Hl},strict:!0});function wu(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,a=o===void 0?!1:o,s=_De(t),u=xDe(s),l=r?r(u):SDe(u);return EDe({circular:n,comparator:u,createState:i,equals:l,strict:a})}function ADe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Xj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):ADe(i)};requestAnimationFrame(r)}function I2(t){"@babel/helpers - typeof";return I2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I2(t)}function TDe(t){return IDe(t)||kDe(t)||ODe(t)||PDe()}function PDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ODe(t,e){if(t){if(typeof t=="string")return Yj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yj(t,e)}}function Yj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kDe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IDe(t){if(Array.isArray(t))return t}function RDe(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=TDe(a),u=s[0],l=s.slice(1);if(typeof u=="number"){Xj(i.bind(null,l),u);return}i(u),Xj(i.bind(null,l));return}I2(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(t)}function Jj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jj(Object(n),!0).forEach(function(r){y8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y8(t,e,n){return e=NDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NDe(t){var e=DDe(t,"string");return am(e)==="symbol"?e:String(e)}function DDe(t,e){if(am(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(am(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MDe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},$De=function(e){return e},jDe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Xd=function(e,n){return Object.keys(n).reduce(function(r,i){return Qj(Qj({},r),{},y8({},i,e(i,n[i])))},{})},Zj=function(e,n,r){return e.map(function(i){return"".concat(jDe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function LDe(t,e){return UDe(t)||BDe(t,e)||b8(t,e)||FDe()}function FDe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BDe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function UDe(t){if(Array.isArray(t))return t}function VDe(t){return HDe(t)||zDe(t)||b8(t)||WDe()}function WDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b8(t,e){if(t){if(typeof t=="string")return R2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R2(t,e)}}function zDe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HDe(t){if(Array.isArray(t))return R2(t)}function R2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var D0=1e-4,w8=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},x8=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},eL=function(e,n){return function(r){var i=w8(e,n);return x8(i,r)}},qDe=function(e,n){return function(r){var i=w8(e,n),o=[].concat(VDe(i.map(function(a,s){return a*s}).slice(1)),[0]);return x8(o,r)}},tL=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var u=n[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var l=u[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),c=LDe(l,4);i=c[0],o=c[1],a=c[2],s=c[3]}}}var f=eL(i,a),h=eL(o,s),d=qDe(i,a),p=function(g){return g>1?1:g<0?0:g},m=function(g){for(var y=g>1?1:g,b=y,_=0;_<8;++_){var x=f(b)-y,S=d(b);if(Math.abs(x-y)<D0||S<D0)return h(b);b=p(b-x/S)}return h(b)};return m.isStepper=!1,m},GDe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,u=function(c,f,h){var d=-(c-f)*r,p=h*o,m=h+(d-p)*s/1e3,v=h*s/1e3+c;return Math.abs(v-f)<D0&&Math.abs(m)<D0?[f,0]:[v,m]};return u.isStepper=!0,u.dt=s,u},KDe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tL(i);case"spring":return GDe();default:if(i.split("(")[0]==="cubic-bezier")return tL(i)}return typeof i=="function"?i:null};function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}function nL(t){return JDe(t)||YDe(t)||_8(t)||XDe()}function XDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YDe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JDe(t){if(Array.isArray(t))return D2(t)}function rL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rL(Object(n),!0).forEach(function(r){N2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N2(t,e,n){return e=QDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QDe(t){var e=ZDe(t,"string");return sm(e)==="symbol"?e:String(e)}function ZDe(t,e){if(sm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(sm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eMe(t,e){return rMe(t)||nMe(t,e)||_8(t,e)||tMe()}function tMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _8(t,e){if(t){if(typeof t=="string")return D2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D2(t,e)}}function D2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function rMe(t){if(Array.isArray(t))return t}var M0=function(e,n,r){return e+(n-e)*r},M2=function(e){var n=e.from,r=e.to;return n!==r},iMe=function t(e,n,r){var i=Xd(function(o,a){if(M2(a)){var s=e(a.from,a.to,a.velocity),u=eMe(s,2),l=u[0],c=u[1];return zn(zn({},a),{},{from:l,velocity:c})}return a},n);return r<1?Xd(function(o,a){return M2(a)?zn(zn({},a),{},{velocity:M0(a.velocity,i[o].velocity,r),from:M0(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const oMe=function(t,e,n,r,i){var o=MDe(t,e),a=o.reduce(function(v,g){return zn(zn({},v),{},N2({},g,[t[g],e[g]]))},{}),s=o.reduce(function(v,g){return zn(zn({},v),{},N2({},g,{from:t[g],velocity:0,to:e[g]}))},{}),u=-1,l,c,f=function(){return null},h=function(){return Xd(function(g,y){return y.from},s)},d=function(){return!Object.values(s).filter(M2).length},p=function(g){l||(l=g);var y=g-l,b=y/n.dt;s=iMe(n,s,b),i(zn(zn(zn({},t),e),h())),l=g,d()||(u=requestAnimationFrame(f))},m=function(g){c||(c=g);var y=(g-c)/r,b=Xd(function(x,S){return M0.apply(void 0,nL(S).concat([n(y)]))},a);if(i(zn(zn(zn({},t),e),b)),y<1)u=requestAnimationFrame(f);else{var _=Xd(function(x,S){return M0.apply(void 0,nL(S).concat([n(1)]))},a);i(zn(zn(zn({},t),e),_))}};return f=n.isStepper?p:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(u)}}};function Hf(t){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hf(t)}var aMe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function sMe(t,e){if(t==null)return{};var n=uMe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uMe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function g_(t){return hMe(t)||fMe(t)||cMe(t)||lMe()}function lMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cMe(t,e){if(t){if(typeof t=="string")return $2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $2(t,e)}}function fMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hMe(t){if(Array.isArray(t))return $2(t)}function $2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ki(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iL(Object(n),!0).forEach(function(r){Sd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sd(t,e,n){return e=S8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S8(r.key),r)}}function mMe(t,e,n){return e&&pMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S8(t){var e=vMe(t,"string");return Hf(e)==="symbol"?e:String(e)}function vMe(t,e){if(Hf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gMe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j2(t,e)}function j2(t,e){return j2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j2(t,e)}function yMe(t){var e=bMe();return function(){var r=$0(t),i;if(e){var o=$0(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return L2(this,i)}}function L2(t,e){if(e&&(Hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F2(t)}function F2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bMe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $0(t){return $0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$0(t)}var Wa=function(t){gMe(n,t);var e=yMe(n);function n(r,i){var o;dMe(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,u=a.attributeName,l=a.from,c=a.to,f=a.steps,h=a.children,d=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(F2(o)),o.changeStyle=o.changeStyle.bind(F2(o)),!s||d<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:c}),L2(o);if(f&&f.length)o.state={style:f[0].style};else if(l){if(typeof h=="function")return o.state={style:l},L2(o);o.state={style:u?Sd({},u,l):l}}else o.state={style:{}};return o}return mMe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,u=o.attributeName,l=o.shouldReAnimate,c=o.to,f=o.from,h=this.state.style;if(s){if(!a){var d={style:u?Sd({},u,c):c};this.state&&h&&(u&&h[u]!==c||!u&&h!==c)&&this.setState(d);return}if(!(CDe(i.to,c)&&i.canBegin&&i.isActive)){var p=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=p||l?f:i.to;if(this.state&&h){var v={style:u?Sd({},u,m):m};(u&&h[u]!==m||!u&&h!==m)&&this.setState(v)}this.runAnimation(Ki(Ki({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,u=i.duration,l=i.easing,c=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,d=oMe(a,s,KDe(l),u,this.changeStyle),p=function(){o.stopJSAnimation=d()};this.manager.start([h,c,p,u,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,u=i.onAnimationStart,l=a[0],c=l.style,f=l.duration,h=f===void 0?0:f,d=function(m,v,g){if(g===0)return m;var y=v.duration,b=v.easing,_=b===void 0?"ease":b,x=v.style,S=v.properties,E=v.onAnimationEnd,C=g>0?a[g-1]:v,A=S||Object.keys(x);if(typeof _=="function"||_==="spring")return[].concat(g_(m),[o.runJSAnimation.bind(o,{from:C.style,to:x,duration:y,easing:_}),y]);var T=Zj(A,y,_),P=Ki(Ki(Ki({},C.style),x),{},{transition:T});return[].concat(g_(m),[P,y,E]).filter($De)};return this.manager.start([u].concat(g_(a.reduce(d,[c,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=RDe());var o=i.begin,a=i.duration,s=i.attributeName,u=i.to,l=i.easing,c=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,d=i.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof l=="function"||typeof d=="function"||l==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var m=s?Sd({},s,u):u,v=Zj(Object.keys(m),a,l);p.start([c,o,Ki(Ki({},m),{},{transition:v}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var u=sMe(i,aMe),l=R.Children.count(o),c=this.state.style;if(typeof o=="function")return o(c);if(!s||l===0||a<=0)return o;var f=function(d){var p=d.props,m=p.style,v=m===void 0?{}:m,g=p.className,y=R.cloneElement(d,Ki(Ki({},u),{},{style:Ki(Ki({},v),c),className:g}));return y};return l===1?f(R.Children.only(o)):W.createElement("div",null,R.Children.map(o,function(h){return f(h)}))}}]),n}(R.PureComponent);Wa.displayName="Animate";Wa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Wa.propTypes={from:ct.oneOfType([ct.object,ct.string]),to:ct.oneOfType([ct.object,ct.string]),attributeName:ct.string,duration:ct.number,begin:ct.number,easing:ct.oneOfType([ct.string,ct.func]),steps:ct.arrayOf(ct.shape({duration:ct.number.isRequired,style:ct.object.isRequired,easing:ct.oneOfType([ct.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ct.func]),properties:ct.arrayOf("string"),onAnimationEnd:ct.func})),children:ct.oneOfType([ct.node,ct.func]),isActive:ct.bool,canBegin:ct.bool,onAnimationEnd:ct.func,shouldReAnimate:ct.bool,onAnimationStart:ct.func,onAnimationReStart:ct.func};function um(t){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}function j0(){return j0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j0.apply(this,arguments)}function wMe(t,e){return EMe(t)||SMe(t,e)||_Me(t,e)||xMe()}function xMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Me(t,e){if(t){if(typeof t=="string")return oL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oL(t,e)}}function oL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function EMe(t){if(Array.isArray(t))return t}function aL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(n),!0).forEach(function(r){CMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CMe(t,e,n){return e=AMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AMe(t){var e=TMe(t,"string");return um(e)=="symbol"?e:e+""}function TMe(t,e){if(um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uL=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,u=r>=0?1:-1,l=i>=0&&r>=0||i<0&&r<0?1:0,c;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,d=4;h<d;h++)f[h]=o[h]>a?a:o[h];c="M".concat(e,",").concat(n+s*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(l,",").concat(e+u*f[0],",").concat(n)),c+="L ".concat(e+r-u*f[1],",").concat(n),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(n+s*f[1])),c+="L ".concat(e+r,",").concat(n+i-s*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(l,`,
        `).concat(e+r-u*f[2],",").concat(n+i)),c+="L ".concat(e+u*f[3],",").concat(n+i),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(n+i-s*f[3])),c+="Z"}else if(a>0&&o===+o&&o>0){var p=Math.min(a,o);c="M ".concat(e,",").concat(n+s*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+u*p,",").concat(n,`
            L `).concat(e+r-u*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(n+s*p,`
            L `).concat(e+r,",").concat(n+i-s*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-u*p,",").concat(n+i,`
            L `).concat(e+u*p,",").concat(n+i,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(n+i-s*p," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},PMe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,u=n.height;if(Math.abs(s)>0&&Math.abs(u)>0){var l=Math.min(o,o+s),c=Math.max(o,o+s),f=Math.min(a,a+u),h=Math.max(a,a+u);return r>=l&&r<=c&&i>=f&&i<=h}return!1},OMe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dO=function(e){var n=sL(sL({},OMe),e),r=R.useRef(),i=R.useState(-1),o=wMe(i,2),a=o[0],s=o[1];R.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&s(_)}catch{}},[]);var u=n.x,l=n.y,c=n.width,f=n.height,h=n.radius,d=n.className,p=n.animationEasing,m=n.animationDuration,v=n.animationBegin,g=n.isAnimationActive,y=n.isUpdateAnimationActive;if(u!==+u||l!==+l||c!==+c||f!==+f||c===0||f===0)return null;var b=qe("recharts-rectangle",d);return y?W.createElement(Wa,{canBegin:a>0,from:{width:c,height:f,x:u,y:l},to:{width:c,height:f,x:u,y:l},duration:m,animationEasing:p,isActive:y},function(_){var x=_.width,S=_.height,E=_.x,C=_.y;return W.createElement(Wa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:m,isActive:g,easing:p},W.createElement("path",j0({},Le(n,!0),{className:b,d:uL(E,C,x,S,h),ref:r})))}):W.createElement("path",j0({},Le(n,!0),{className:b,d:uL(u,l,c,f,h)}))},kMe=["points","className","baseLinePoints","connectNulls"];function Mc(){return Mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mc.apply(this,arguments)}function IMe(t,e){if(t==null)return{};var n=RMe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lL(t){return $Me(t)||MMe(t)||DMe(t)||NMe()}function NMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DMe(t,e){if(t){if(typeof t=="string")return B2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B2(t,e)}}function MMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $Me(t){if(Array.isArray(t))return B2(t)}function B2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cL=function(e){return e&&e.x===+e.x&&e.y===+e.y},jMe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){cL(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),cL(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Yd=function(e,n){var r=jMe(e);n&&(r=[r.reduce(function(o,a){return[].concat(lL(o),lL(a))},[])]);var i=r.map(function(o){return o.reduce(function(a,s,u){return"".concat(a).concat(u===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},LMe=function(e,n,r){var i=Yd(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Yd(n.reverse(),r).slice(1))},FMe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,a=IMe(e,kMe);if(!n||!n.length)return null;var s=qe("recharts-polygon",r);if(i&&i.length){var u=a.stroke&&a.stroke!=="none",l=LMe(n,i,o);return W.createElement("g",{className:s},W.createElement("path",Mc({},Le(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),u?W.createElement("path",Mc({},Le(a,!0),{fill:"none",d:Yd(n,o)})):null,u?W.createElement("path",Mc({},Le(a,!0),{fill:"none",d:Yd(i,o)})):null)}var c=Yd(n,o);return W.createElement("path",Mc({},Le(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",className:s,d:c}))};function U2(){return U2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U2.apply(this,arguments)}var pO=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=qe("recharts-dot",o);return n===+n&&r===+r&&i===+i?R.createElement("circle",U2({},Le(e,!1),i0(e),{className:a,cx:n,cy:r,r:i})):null};function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}var BMe=["x","y","top","left","width","height","className"];function V2(){return V2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V2.apply(this,arguments)}function fL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UMe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fL(Object(n),!0).forEach(function(r){VMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VMe(t,e,n){return e=WMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WMe(t){var e=zMe(t,"string");return lm(e)=="symbol"?e:e+""}function zMe(t,e){if(lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HMe(t,e){if(t==null)return{};var n=qMe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var GMe=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},KMe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,u=e.left,l=u===void 0?0:u,c=e.width,f=c===void 0?0:c,h=e.height,d=h===void 0?0:h,p=e.className,m=HMe(e,BMe),v=UMe({x:r,y:o,top:s,left:l,width:f,height:d},m);return!he(r)||!he(o)||!he(f)||!he(d)||!he(s)||!he(l)?null:W.createElement("path",V2({},Le(v,!0),{className:qe("recharts-cross",p),d:GMe(r,o,f,d,s,l)}))},XMe=Rw,YMe=$H,JMe=gu;function QMe(t,e){return t&&t.length?XMe(t,JMe(e),YMe):void 0}var ZMe=QMe;const e$e=pt(ZMe);var t$e=Rw,n$e=gu,r$e=jH;function i$e(t,e){return t&&t.length?t$e(t,n$e(e),r$e):void 0}var o$e=i$e;const a$e=pt(o$e);var s$e=["cx","cy","angle","ticks","axisLine"],u$e=["ticks","tick","angle","tickFormatter","stroke"];function qf(t){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qf(t)}function Jd(){return Jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jd.apply(this,arguments)}function hL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ru(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hL(Object(n),!0).forEach(function(r){Fw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dL(t,e){if(t==null)return{};var n=l$e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function c$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C8(r.key),r)}}function f$e(t,e,n){return e&&pL(t.prototype,e),n&&pL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h$e(t,e,n){return e=L0(e),d$e(t,E8()?Reflect.construct(e,n||[],L0(t).constructor):e.apply(t,n))}function d$e(t,e){if(e&&(qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p$e(t)}function p$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E8=function(){return!!t})()}function L0(t){return L0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L0(t)}function m$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W2(t,e)}function W2(t,e){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},W2(t,e)}function Fw(t,e,n){return e=C8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C8(t){var e=v$e(t,"string");return qf(e)=="symbol"?e:e+""}function v$e(t,e){if(qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bw=function(t){function e(){return c$e(this,e),h$e(this,e,arguments)}return m$e(e,t),f$e(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,a=o.angle,s=o.cx,u=o.cy;return Tt(s,u,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,u=e$e(s,function(c){return c.coordinate||0}),l=a$e(s,function(c){return c.coordinate||0});return{cx:i,cy:o,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,u=r.axisLine,l=dL(r,s$e),c=s.reduce(function(p,m){return[Math.min(p[0],m.coordinate),Math.max(p[1],m.coordinate)]},[1/0,-1/0]),f=Tt(i,o,c[0],a),h=Tt(i,o,c[1],a),d=Ru(Ru(Ru({},Le(l,!1)),{},{fill:"none"},Le(u,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return W.createElement("line",Jd({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.angle,u=i.tickFormatter,l=i.stroke,c=dL(i,u$e),f=this.getTickTextAnchor(),h=Le(c,!1),d=Le(a,!1),p=o.map(function(m,v){var g=r.getTickValueCoord(m),y=Ru(Ru(Ru(Ru({textAnchor:f,transform:"rotate(".concat(90-s,", ").concat(g.x,", ").concat(g.y,")")},h),{},{stroke:"none",fill:l},d),{},{index:v},g),{},{payload:m});return W.createElement(ht,Jd({className:qe("recharts-polar-radius-axis-tick",c8(a)),key:"tick-".concat(m.coordinate)},Il(r.props,m,v)),e.renderTickItem(a,y,u?u(m.value,v):m.value))});return W.createElement(ht,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,a=r.tick;return!i||!i.length?null:W.createElement(ht,{className:qe("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),a&&this.renderTicks(),$n.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return W.isValidElement(r)?a=W.cloneElement(r,i):We(r)?a=r(i):a=W.createElement(Rl,Jd({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),a}}])}(R.PureComponent);Fw(Bw,"displayName","PolarRadiusAxis");Fw(Bw,"axisType","radiusAxis");Fw(Bw,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Gf(t){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gf(t)}function Gu(){return Gu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gu.apply(this,arguments)}function mL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mL(Object(n),!0).forEach(function(r){Uw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T8(r.key),r)}}function y$e(t,e,n){return e&&vL(t.prototype,e),n&&vL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function b$e(t,e,n){return e=F0(e),w$e(t,A8()?Reflect.construct(e,n||[],F0(t).constructor):e.apply(t,n))}function w$e(t,e){if(e&&(Gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x$e(t)}function x$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A8=function(){return!!t})()}function F0(t){return F0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},F0(t)}function _$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z2(t,e)}function z2(t,e){return z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z2(t,e)}function Uw(t,e,n){return e=T8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T8(t){var e=S$e(t,"string");return Gf(e)=="symbol"?e:e+""}function S$e(t,e){if(Gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E$e=Math.PI/180,gL=1e-5,Vw=function(t){function e(){return g$e(this,e),b$e(this,e,arguments)}return _$e(e,t),y$e(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,a=i.cy,s=i.radius,u=i.orientation,l=i.tickSize,c=l||8,f=Tt(o,a,s,r.coordinate),h=Tt(o,a,s+(u==="inner"?-1:1)*c,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*E$e),a;return o>gL?a=i==="outer"?"start":"end":o<-gL?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.radius,s=r.axisLine,u=r.axisLineType,l=Nu(Nu({},Le(this.props,!1)),{},{fill:"none"},Le(s,!1));if(u==="circle")return W.createElement(pO,Gu({className:"recharts-polar-angle-axis-line"},l,{cx:i,cy:o,r:a}));var c=this.props.ticks,f=c.map(function(h){return Tt(i,o,a,h.coordinate)});return W.createElement(FMe,Gu({className:"recharts-polar-angle-axis-line"},l,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.tickLine,u=i.tickFormatter,l=i.stroke,c=Le(this.props,!1),f=Le(a,!1),h=Nu(Nu({},c),{},{fill:"none"},Le(s,!1)),d=o.map(function(p,m){var v=r.getTickLineCoord(p),g=r.getTickTextAnchor(p),y=Nu(Nu(Nu({textAnchor:g},c),{},{stroke:"none",fill:l},f),{},{index:m,payload:p,x:v.x2,y:v.y2});return W.createElement(ht,Gu({className:qe("recharts-polar-angle-axis-tick",c8(a)),key:"tick-".concat(p.coordinate)},Il(r.props,p,m)),s&&W.createElement("line",Gu({className:"recharts-polar-angle-axis-tick-line"},h,v)),a&&e.renderTickItem(a,y,u?u(p.value,m):p.value))});return W.createElement(ht,{className:"recharts-polar-angle-axis-ticks"},d)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,a=r.axisLine;return o<=0||!i||!i.length?null:W.createElement(ht,{className:qe("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var a;return W.isValidElement(r)?a=W.cloneElement(r,i):We(r)?a=r(i):a=W.createElement(Rl,Gu({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),a}}])}(R.PureComponent);Uw(Vw,"displayName","PolarAngleAxis");Uw(Vw,"axisType","angleAxis");Uw(Vw,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var C$e=Rz,A$e=C$e(Object.getPrototypeOf,Object),T$e=A$e,P$e=Qa,O$e=T$e,k$e=Za,I$e="[object Object]",R$e=Function.prototype,N$e=Object.prototype,P8=R$e.toString,D$e=N$e.hasOwnProperty,M$e=P8.call(Object);function $$e(t){if(!k$e(t)||P$e(t)!=I$e)return!1;var e=O$e(t);if(e===null)return!0;var n=D$e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&P8.call(n)==M$e}var j$e=$$e;const L$e=pt(j$e);var F$e=Qa,B$e=Za,U$e="[object Boolean]";function V$e(t){return t===!0||t===!1||B$e(t)&&F$e(t)==U$e}var W$e=V$e;const z$e=pt(W$e);function cm(t){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(t)}function B0(){return B0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B0.apply(this,arguments)}function H$e(t,e){return X$e(t)||K$e(t,e)||G$e(t,e)||q$e()}function q$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G$e(t,e){if(t){if(typeof t=="string")return yL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yL(t,e)}}function yL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function K$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function X$e(t){if(Array.isArray(t))return t}function bL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bL(Object(n),!0).forEach(function(r){Y$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y$e(t,e,n){return e=J$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J$e(t){var e=Q$e(t,"string");return cm(e)=="symbol"?e:e+""}function Q$e(t,e){if(cm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xL=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},Z$e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eje=function(e){var n=wL(wL({},Z$e),e),r=R.useRef(),i=R.useState(-1),o=H$e(i,2),a=o[0],s=o[1];R.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var u=n.x,l=n.y,c=n.upperWidth,f=n.lowerWidth,h=n.height,d=n.className,p=n.animationEasing,m=n.animationDuration,v=n.animationBegin,g=n.isUpdateAnimationActive;if(u!==+u||l!==+l||c!==+c||f!==+f||h!==+h||c===0&&f===0||h===0)return null;var y=qe("recharts-trapezoid",d);return g?W.createElement(Wa,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:u,y:l},to:{upperWidth:c,lowerWidth:f,height:h,x:u,y:l},duration:m,animationEasing:p,isActive:g},function(b){var _=b.upperWidth,x=b.lowerWidth,S=b.height,E=b.x,C=b.y;return W.createElement(Wa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:m,easing:p},W.createElement("path",B0({},Le(n,!0),{className:y,d:xL(E,C,_,x,S),ref:r})))}):W.createElement("g",null,W.createElement("path",B0({},Le(n,!0),{className:y,d:xL(u,l,c,f,h)})))},tje=["option","shapeType","propTransformer","activeClassName","isActive"];function fm(t){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(t)}function nje(t,e){if(t==null)return{};var n=rje(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_L(Object(n),!0).forEach(function(r){ije(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_L(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ije(t,e,n){return e=oje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oje(t){var e=aje(t,"string");return fm(e)=="symbol"?e:e+""}function aje(t,e){if(fm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sje(t,e){return U0(U0({},e),t)}function uje(t,e){return t==="symbols"}function SL(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return W.createElement(dO,n);case"trapezoid":return W.createElement(eje,n);case"sector":return W.createElement(d8,n);case"symbols":if(uje(e))return W.createElement(IP,n);break;default:return null}}function lje(t){return R.isValidElement(t)?t.props:t}function O8(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?sje:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,u=nje(t,tje),l;if(R.isValidElement(e))l=R.cloneElement(e,U0(U0({},u),lje(e)));else if(We(e))l=e(u);else if(L$e(e)&&!z$e(e)){var c=i(e,u);l=W.createElement(SL,{shapeType:n,elementProps:c})}else{var f=u;l=W.createElement(SL,{shapeType:n,elementProps:f})}return s?W.createElement(ht,{className:a},l):l}function Ww(t,e){return e!=null&&"trapezoids"in t.props}function zw(t,e){return e!=null&&"sectors"in t.props}function hm(t,e){return e!=null&&"points"in t.props}function cje(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function fje(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function hje(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function dje(t,e){var n;return Ww(t,e)?n=cje:zw(t,e)?n=fje:hm(t,e)&&(n=hje),n}function pje(t,e){var n;return Ww(t,e)?n="trapezoids":zw(t,e)?n="sectors":hm(t,e)&&(n="points"),n}function mje(t,e){if(Ww(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(zw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return hm(t,e)?e.payload:{}}function vje(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=pje(n,e),o=mje(n,e),a=r.filter(function(u,l){var c=Mw(o,u),f=n.props[i].filter(function(p){var m=dje(n,e);return m(p,e)}),h=n.props[i].indexOf(f[f.length-1]),d=l===h;return c&&d}),s=r.indexOf(a[a.length-1]);return s}var Ug;function Kf(t){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kf(t)}function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$c.apply(this,arguments)}function EL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EL(Object(n),!0).forEach(function(r){Pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I8(r.key),r)}}function yje(t,e,n){return e&&CL(t.prototype,e),n&&CL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bje(t,e,n){return e=V0(e),wje(t,k8()?Reflect.construct(e,n||[],V0(t).constructor):e.apply(t,n))}function wje(t,e){if(e&&(Kf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xje(t)}function xje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k8=function(){return!!t})()}function V0(t){return V0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},V0(t)}function _je(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H2(t,e)}function H2(t,e){return H2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},H2(t,e)}function Pi(t,e,n){return e=I8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I8(t){var e=Sje(t,"string");return Kf(e)=="symbol"?e:e+""}function Sje(t,e){if(Kf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ts=function(t){function e(n){var r;return gje(this,e),r=bje(this,e,[n]),Pi(r,"pieRef",null),Pi(r,"sectorRefs",[]),Pi(r,"id",Km("recharts-pie-")),Pi(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),We(i)&&i()}),Pi(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),We(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return _je(e,t),yje(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.label,s=o.labelLine,u=o.dataKey,l=o.valueKey,c=Le(this.props,!1),f=Le(a,!1),h=Le(s,!1),d=a&&a.offsetRadius||20,p=r.map(function(m,v){var g=(m.startAngle+m.endAngle)/2,y=Tt(m.cx,m.cy,m.outerRadius+d,g),b=Et(Et(Et(Et({},c),m),{},{stroke:"none"},f),{},{index:v,textAnchor:e.getTextAnchor(y.x,m.cx)},y),_=Et(Et(Et(Et({},c),m),{},{fill:"none",stroke:m.fill},h),{},{index:v,points:[Tt(m.cx,m.cy,m.outerRadius,g),y]}),x=u;return Xe(u)&&Xe(l)?x="value":Xe(u)&&(x=l),W.createElement(ht,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(v)},s&&e.renderLabelLineItem(s,_,"line"),e.renderLabelItem(a,b,fr(m,x)))});return W.createElement(ht,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,a=o.activeShape,s=o.blendStroke,u=o.inactiveShape;return r.map(function(l,c){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(c),h=u&&i.hasActiveIndex()?u:null,d=f?a:h,p=Et(Et({},l),{},{stroke:s?l.fill:l.stroke,tabIndex:-1});return W.createElement(ht,$c({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Il(i.props,l,c),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(c)}),W.createElement(O8,$c({option:d,isActive:f,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,a=i.isAnimationActive,s=i.animationBegin,u=i.animationDuration,l=i.animationEasing,c=i.animationId,f=this.state,h=f.prevSectors,d=f.prevIsAnimationActive;return W.createElement(Wa,{begin:s,duration:u,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var m=p.t,v=[],g=o&&o[0],y=g.startAngle;return o.forEach(function(b,_){var x=h&&h[_],S=_>0?di(b,"paddingAngle",0):0;if(x){var E=ws(x.endAngle-x.startAngle,b.endAngle-b.startAngle),C=Et(Et({},b),{},{startAngle:y+S,endAngle:y+E(m)+S});v.push(C),y=C.endAngle}else{var A=b.endAngle,T=b.startAngle,P=ws(0,A-T),k=P(m),I=Et(Et({},b),{},{startAngle:y+S,endAngle:y+k+S});v.push(I),y=I.endAngle}}),W.createElement(ht,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,a=this.state.prevSectors;return o&&i&&i.length&&(!a||!Mw(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,a=i.sectors,s=i.className,u=i.label,l=i.cx,c=i.cy,f=i.innerRadius,h=i.outerRadius,d=i.isAnimationActive,p=this.state.isAnimationFinished;if(o||!a||!a.length||!he(l)||!he(c)||!he(f)||!he(h))return null;var m=qe("recharts-pie",s);return W.createElement(ht,{tabIndex:this.props.rootTabIndex,className:m,ref:function(g){r.pieRef=g}},this.renderSectors(),u&&this.renderLabels(a),$n.renderCallByParent(this.props,null,!1),(!d||p)&&Ys.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(W.isValidElement(r))return W.cloneElement(r,i);if(We(r))return r(i);var a=qe("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return W.createElement(k2,$c({},i,{key:o,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,o){if(W.isValidElement(r))return W.cloneElement(r,i);var a=o;if(We(r)&&(a=r(i),W.isValidElement(a)))return a;var s=qe("recharts-pie-label-text",typeof r!="boolean"&&!We(r)?r.className:"");return W.createElement(Rl,$c({},i,{alignmentBaseline:"middle",className:s}),a)}}])}(R.PureComponent);Ug=ts;Pi(ts,"displayName","Pie");Pi(ts,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ka.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Pi(ts,"parseDeltaAngle",function(t,e){var n=xr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Pi(ts,"getRealPieData",function(t){var e=t.data,n=t.children,r=Le(t,!1),i=Mi(n,Cw);return e&&e.length?e.map(function(o,a){return Et(Et(Et({payload:o},r),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return Et(Et({},r),o.props)}):[]});Pi(ts,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,o=e.height,a=l8(i,o),s=r+_r(t.cx,i,i/2),u=n+_r(t.cy,o,o/2),l=_r(t.innerRadius,a,0),c=_r(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:s,cy:u,innerRadius:l,outerRadius:c,maxRadius:f}});Pi(ts,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Et(Et({},e.type.defaultProps),e.props):e.props,i=Ug.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,a=r.startAngle,s=r.endAngle,u=r.paddingAngle,l=r.dataKey,c=r.nameKey,f=r.valueKey,h=r.tooltipType,d=Math.abs(r.minAngle),p=Ug.parseCoordinateOfPie(r,n),m=Ug.parseDeltaAngle(a,s),v=Math.abs(m),g=l;Xe(l)&&Xe(f)?(Oa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g="value"):Xe(l)&&(Oa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g=f);var y=i.filter(function(C){return fr(C,g,0)!==0}).length,b=(v>=360?y:y-1)*u,_=v-y*d-b,x=i.reduce(function(C,A){var T=fr(A,g,0);return C+(he(T)?T:0)},0),S;if(x>0){var E;S=i.map(function(C,A){var T=fr(C,g,0),P=fr(C,c,A),k=(he(T)?T:0)/x,I;A?I=E.endAngle+xr(m)*u*(T!==0?1:0):I=a;var $=I+xr(m)*((T!==0?d:0)+k*_),B=(I+$)/2,z=(p.innerRadius+p.outerRadius)/2,U=[{name:P,value:T,payload:C,dataKey:g,type:h}],M=Tt(p.cx,p.cy,z,B);return E=Et(Et(Et({percent:k,cornerRadius:o,name:P,tooltipPayload:U,midAngle:B,middleRadius:z,tooltipPosition:M},C),p),{},{value:fr(C,g),startAngle:I,endAngle:$,payload:C,paddingAngle:xr(m)*u}),E})}return Et(Et({},p),{},{sectors:S,data:i})});var Eje=Math.ceil,Cje=Math.max;function Aje(t,e,n,r){for(var i=-1,o=Cje(Eje((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var Tje=Aje,Pje=Yz,AL=1/0,Oje=17976931348623157e292;function kje(t){if(!t)return t===0?t:0;if(t=Pje(t),t===AL||t===-AL){var e=t<0?-1:1;return e*Oje}return t===t?t:0}var Ije=kje,Rje=Tje,Nje=Ew,y_=Ije;function Dje(t){return function(e,n,r){return r&&typeof r!="number"&&Nje(e,n,r)&&(n=r=void 0),e=y_(e),n===void 0?(n=e,e=0):n=y_(n),r=r===void 0?e<n?1:-1:y_(r),Rje(e,n,r,t)}}var Mje=Dje,$je=Mje,jje=$je(),Lje=jje;const W0=pt(Lje);function dm(t){"@babel/helpers - typeof";return dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dm(t)}function TL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TL(Object(n),!0).forEach(function(r){R8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R8(t,e,n){return e=Fje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fje(t){var e=Bje(t,"string");return dm(e)=="symbol"?e:e+""}function Bje(t,e){if(dm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uje=["Webkit","Moz","O","ms"],Vje=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Uje.reduce(function(o,a){return PL(PL({},o),{},R8({},a+r,n))},{});return i[e]=n,i};function Xf(t){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(t)}function z0(){return z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z0.apply(this,arguments)}function OL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(n),!0).forEach(function(r){Jr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D8(r.key),r)}}function zje(t,e,n){return e&&kL(t.prototype,e),n&&kL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hje(t,e,n){return e=H0(e),qje(t,N8()?Reflect.construct(e,n||[],H0(t).constructor):e.apply(t,n))}function qje(t,e){if(e&&(Xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gje(t)}function Gje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N8=function(){return!!t})()}function H0(t){return H0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H0(t)}function Kje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q2(t,e)}function q2(t,e){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},q2(t,e)}function Jr(t,e,n){return e=D8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D8(t){var e=Xje(t,"string");return Xf(e)=="symbol"?e:e+""}function Xje(t,e){if(Xf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yje=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var u=n.length,l=Gd().domain(W0(0,u)).range([o,o+a-s]),c=l.domain().map(function(f){return l(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(i),scale:l,scaleValues:c}},IL=function(e){return e.changedTouches&&!!e.changedTouches.length},Yf=function(t){function e(n){var r;return Wje(this,e),r=Hje(this,e,[n]),Jr(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Jr(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Jr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),Jr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Jr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Jr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Jr(r,"handleSlideDragStart",function(i){var o=IL(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Kje(e,t),zje(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,u=s.gap,l=s.data,c=l.length-1,f=Math.min(i,o),h=Math.max(i,o),d=e.getIndexInRange(a,f),p=e.getIndexInRange(a,h);return{startIndex:d-d%u,endIndex:p===c?c:p-p%u}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,u=fr(o[r],s,r);return We(a)?a(u,r):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,u=this.props,l=u.x,c=u.width,f=u.travellerWidth,h=u.startIndex,d=u.endIndex,p=u.onChange,m=r.pageX-o;m>0?m=Math.min(m,l+c-f-s,l+c-f-a):m<0&&(m=Math.max(m,l-a,l-s));var v=this.getIndex({startX:a+m,endX:s+m});(v.startIndex!==h||v.endIndex!==d)&&p&&p(v),this.setState({startX:a+m,endX:s+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=IL(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,u=i.startX,l=this.state[a],c=this.props,f=c.x,h=c.width,d=c.travellerWidth,p=c.onChange,m=c.gap,v=c.data,g={startX:this.state.startX,endX:this.state.endX},y=r.pageX-o;y>0?y=Math.min(y,f+h-d-l):y<0&&(y=Math.max(y,f-l)),g[a]=l+y;var b=this.getIndex(g),_=b.startIndex,x=b.endIndex,S=function(){var C=v.length-1;return a==="startX"&&(s>u?_%m===0:x%m===0)||s<u&&x===C||a==="endX"&&(s>u?x%m===0:_%m===0)||s>u&&x===C};this.setState(Jr(Jr({},a,l+y),"brushMoveStartX",r.pageX),function(){p&&S()&&p(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,u=a.startX,l=a.endX,c=this.state[i],f=s.indexOf(c);if(f!==-1){var h=f+r;if(!(h===-1||h>=s.length)){var d=s[h];i==="startX"&&d>=l||i==="endX"&&d<=u||this.setState(Jr({},i,d),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.fill,l=r.stroke;return W.createElement("rect",{stroke:l,fill:u,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.data,l=r.children,c=r.padding,f=R.Children.only(l);return f?W.cloneElement(f,{x:i,y:o,width:a,height:s,margin:c,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,u=this.props,l=u.y,c=u.travellerWidth,f=u.height,h=u.traveller,d=u.ariaLabel,p=u.data,m=u.startIndex,v=u.endIndex,g=Math.max(r,this.props.x),y=b_(b_({},Le(this.props,!1)),{},{x:g,y:l,width:c,height:f}),b=d||"Min value: ".concat((o=p[m])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=p[v])===null||a===void 0?void 0:a.name);return W.createElement(ht,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(x){["ArrowLeft","ArrowRight"].includes(x.key)&&(x.preventDefault(),x.stopPropagation(),s.handleTravellerMoveKeyboard(x.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,y))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,u=o.stroke,l=o.travellerWidth,c=Math.min(r,i)+l,f=Math.max(Math.abs(i-r)-l,0);return W.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:c,y:a,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,u=r.travellerWidth,l=r.stroke,c=this.state,f=c.startX,h=c.endX,d=5,p={pointerEvents:"none",fill:l};return W.createElement(ht,{className:"recharts-brush-texts"},W.createElement(Rl,z0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-d,y:a+s/2},p),this.getTextOfTick(i)),W.createElement(Rl,z0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+u+d,y:a+s/2},p),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,u=r.y,l=r.width,c=r.height,f=r.alwaysShowText,h=this.state,d=h.startX,p=h.endX,m=h.isTextActive,v=h.isSlideMoving,g=h.isTravellerMoving,y=h.isTravellerFocused;if(!i||!i.length||!he(s)||!he(u)||!he(l)||!he(c)||l<=0||c<=0)return null;var b=qe("recharts-brush",o),_=W.Children.count(a)===1,x=Vje("userSelect","none");return W.createElement(ht,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(d,p),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(p,"endX"),(m||v||g||y||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,u=r.stroke,l=Math.floor(o+s/2)-1;return W.createElement(W.Fragment,null,W.createElement("rect",{x:i,y:o,width:a,height:s,fill:u,stroke:"none"}),W.createElement("line",{x1:i+1,y1:l,x2:i+a-1,y2:l,fill:"none",stroke:"#fff"}),W.createElement("line",{x1:i+1,y1:l+2,x2:i+a-1,y2:l+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return W.isValidElement(r)?o=W.cloneElement(r,i):We(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,u=r.travellerWidth,l=r.updateId,c=r.startIndex,f=r.endIndex;if(o!==i.prevData||l!==i.prevUpdateId)return b_({prevData:o,prevTravellerWidth:u,prevUpdateId:l,prevX:s,prevWidth:a},o&&o.length?Yje({data:o,width:a,x:s,travellerWidth:u,startIndex:c,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||u!==i.prevTravellerWidth)){i.scale.range([s,s+a-u]);var h=i.scale.domain().map(function(d){return i.scale(d)});return{prevData:o,prevTravellerWidth:u,prevUpdateId:l,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var u=Math.floor((a+s)/2);r[u]>i?s=u:a=u}return i>=r[s]?s:a}}])}(R.PureComponent);Jr(Yf,"displayName","Brush");Jr(Yf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Jje=FP;function Qje(t,e){var n;return Jje(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var Zje=Qje,eLe=Ez,tLe=gu,nLe=Zje,rLe=zr,iLe=Ew;function oLe(t,e,n){var r=rLe(t)?eLe:nLe;return n&&iLe(t,e,n)&&(e=void 0),r(t,tLe(e))}var aLe=oLe;const sLe=pt(aLe);var ea=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},RL=Hz;function uLe(t,e,n){e=="__proto__"&&RL?RL(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var lLe=uLe,cLe=lLe,fLe=Wz,hLe=gu;function dLe(t,e){var n={};return e=hLe(e),fLe(t,function(r,i,o){cLe(n,i,e(r,i,o))}),n}var pLe=dLe;const mLe=pt(pLe);function vLe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var gLe=vLe,yLe=FP;function bLe(t,e){var n=!0;return yLe(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var wLe=bLe,xLe=gLe,_Le=wLe,SLe=gu,ELe=zr,CLe=Ew;function ALe(t,e,n){var r=ELe(t)?xLe:_Le;return n&&CLe(t,e,n)&&(e=void 0),r(t,SLe(e))}var TLe=ALe;const PLe=pt(TLe);var OLe=["x","y"];function pm(t){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pm(t)}function G2(){return G2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G2.apply(this,arguments)}function NL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function md(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NL(Object(n),!0).forEach(function(r){kLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kLe(t,e,n){return e=ILe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ILe(t){var e=RLe(t,"string");return pm(e)=="symbol"?e:e+""}function RLe(t,e){if(pm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NLe(t,e){if(t==null)return{};var n=DLe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DLe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function MLe(t,e){var n=t.x,r=t.y,i=NLe(t,OLe),o="".concat(n),a=parseInt(o,10),s="".concat(r),u=parseInt(s,10),l="".concat(e.height||i.height),c=parseInt(l,10),f="".concat(e.width||i.width),h=parseInt(f,10);return md(md(md(md(md({},e),i),a?{x:a}:{}),u?{y:u}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function DL(t){return W.createElement(O8,G2({shapeType:"rectangle",propTransformer:MLe,activeClassName:"recharts-active-bar"},t))}var $Le=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=he(r)||obe(r);return o?e(r,i):(o||Dl(),n)}},jLe=["value","background"],M8;function Jf(t){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jf(t)}function LLe(t,e){if(t==null)return{};var n=FLe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FLe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function q0(){return q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q0.apply(this,arguments)}function ML(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function an(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(n),!0).forEach(function(r){$s(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j8(r.key),r)}}function ULe(t,e,n){return e&&$L(t.prototype,e),n&&$L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function VLe(t,e,n){return e=G0(e),WLe(t,$8()?Reflect.construct(e,n||[],G0(t).constructor):e.apply(t,n))}function WLe(t,e){if(e&&(Jf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zLe(t)}function zLe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($8=function(){return!!t})()}function G0(t){return G0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},G0(t)}function HLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K2(t,e)}function K2(t,e){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K2(t,e)}function $s(t,e,n){return e=j8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j8(t){var e=qLe(t,"string");return Jf(e)=="symbol"?e:e+""}function qLe(t,e){if(Jf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uu=function(t){function e(){var n;BLe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=VLe(this,e,[].concat(i)),$s(n,"state",{isAnimationFinished:!1}),$s(n,"id",Km("recharts-bar-")),$s(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),$s(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return HLe(e,t),ULe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,u=o.activeIndex,l=o.activeBar,c=Le(this.props,!1);return r&&r.map(function(f,h){var d=h===u,p=d?l:a,m=an(an(an({},c),f),{},{isActive:d,option:p,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return W.createElement(ht,q0({className:"recharts-bar-rectangle"},Il(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),W.createElement(DL,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,u=i.animationBegin,l=i.animationDuration,c=i.animationEasing,f=i.animationId,h=this.state.prevData;return W.createElement(Wa,{begin:u,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var p=d.t,m=o.map(function(v,g){var y=h&&h[g];if(y){var b=ws(y.x,v.x),_=ws(y.y,v.y),x=ws(y.width,v.width),S=ws(y.height,v.height);return an(an({},v),{},{x:b(p),y:_(p),width:x(p),height:S(p)})}if(a==="horizontal"){var E=ws(0,v.height),C=E(p);return an(an({},v),{},{y:v.y+v.height-C,height:C})}var A=ws(0,v.width),T=A(p);return an(an({},v),{},{width:T})});return W.createElement(ht,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!Mw(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,u=Le(this.props.background,!1);return o.map(function(l,c){l.value;var f=l.background,h=LLe(l,jLe);if(!f)return null;var d=an(an(an(an(an({},h),{},{fill:"#eee"},f),u),Il(r.props,l,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:c,className:"recharts-bar-background-rectangle"});return W.createElement(DL,q0({key:"background-bar-".concat(c),option:r.props.background,isActive:c===s},d))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,u=o.yAxis,l=o.layout,c=o.children,f=Mi(c,Lw);if(!f)return null;var h=l==="vertical"?a[0].height/2:a[0].width/2,d=function(v,g){var y=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:y,errorVal:fr(v,g)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return W.createElement(ht,p,f.map(function(m){return W.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:a,xAxis:s,yAxis:u,layout:l,offset:h,dataPointFormatter:d})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,u=r.yAxis,l=r.left,c=r.top,f=r.width,h=r.height,d=r.isAnimationActive,p=r.background,m=r.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,g=qe("recharts-bar",a),y=s&&s.allowDataOverflow,b=u&&u.allowDataOverflow,_=y||b,x=Xe(m)?this.id:m;return W.createElement(ht,{className:g},y||b?W.createElement("defs",null,W.createElement("clipPath",{id:"clipPath-".concat(x)},W.createElement("rect",{x:y?l:l-f/2,y:b?c:c-h/2,width:y?f:f*2,height:b?h:h*2}))):null,W.createElement(ht,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(x,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,x),(!d||v)&&Ys.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(R.PureComponent);M8=uu;$s(uu,"displayName","Bar");$s(uu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ka.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});$s(uu,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,u=t.yAxisTicks,l=t.stackedData,c=t.dataStartIndex,f=t.displayedData,h=t.offset,d=ERe(r,n);if(!d)return null;var p=e.layout,m=n.type.defaultProps,v=m!==void 0?an(an({},m),n.props):n.props,g=v.dataKey,y=v.children,b=v.minPointSize,_=p==="horizontal"?a:o,x=l?_.scale.domain():null,S=IRe({numericAxis:_}),E=Mi(y,Cw),C=f.map(function(A,T){var P,k,I,$,B,z;l?P=CRe(l[c+T],x):(P=fr(A,g),Array.isArray(P)||(P=[S,P]));var U=$Le(b,M8.defaultProps.minPointSize)(P[1],T);if(p==="horizontal"){var M,F=[a.scale(P[0]),a.scale(P[1])],H=F[0],X=F[1];k=Cj({axis:o,ticks:s,bandSize:i,offset:d.offset,entry:A,index:T}),I=(M=X??H)!==null&&M!==void 0?M:void 0,$=d.size;var K=H-X;if(B=Number.isNaN(K)?0:K,z={x:k,y:a.y,width:$,height:a.height},Math.abs(U)>0&&Math.abs(B)<Math.abs(U)){var Q=xr(B||U)*(Math.abs(U)-Math.abs(B));I-=Q,B+=Q}}else{var ae=[o.scale(P[0]),o.scale(P[1])],le=ae[0],ve=ae[1];if(k=le,I=Cj({axis:a,ticks:u,bandSize:i,offset:d.offset,entry:A,index:T}),$=ve-le,B=d.size,z={x:o.x,y:I,width:o.width,height:B},Math.abs(U)>0&&Math.abs($)<Math.abs(U)){var de=xr($||U)*(Math.abs(U)-Math.abs($));$+=de}}return an(an(an({},A),{},{x:k,y:I,width:$,height:B,value:l?P:P[1],payload:A,background:z},E&&E[T]&&E[T].props),{},{tooltipPayload:[s8(n,A)],tooltipPosition:{x:k+$/2,y:I+B/2}})});return an({data:C,layout:p},h)});function mm(t){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mm(t)}function GLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L8(r.key),r)}}function KLe(t,e,n){return e&&jL(t.prototype,e),n&&jL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function io(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(n),!0).forEach(function(r){Hw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hw(t,e,n){return e=L8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L8(t){var e=XLe(t,"string");return mm(e)=="symbol"?e:e+""}function XLe(t,e){if(mm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YLe=function(e,n,r,i,o){var a=e.width,s=e.height,u=e.layout,l=e.children,c=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!ei(l,uu);return c.reduce(function(d,p){var m=n[p],v=m.orientation,g=m.domain,y=m.padding,b=y===void 0?{}:y,_=m.mirror,x=m.reversed,S="".concat(v).concat(_?"Mirror":""),E,C,A,T,P;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var k=g[1]-g[0],I=1/0,$=m.categoricalDomain.sort(ube);if($.forEach(function(ae,le){le>0&&(I=Math.min((ae||0)-($[le-1]||0),I))}),Number.isFinite(I)){var B=I/k,z=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(E=B*z/2),m.padding==="no-gap"){var U=_r(e.barCategoryGap,B*z),M=B*z/2;E=M-U-(M-U)/z*U}}}i==="xAxis"?C=[r.left+(b.left||0)+(E||0),r.left+r.width-(b.right||0)-(E||0)]:i==="yAxis"?C=u==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(E||0),r.top+r.height-(b.bottom||0)-(E||0)]:C=m.range,x&&(C=[C[1],C[0]]);var F=r8(m,o,h),H=F.scale,X=F.realScaleType;H.domain(g).range(C),i8(H);var K=o8(H,io(io({},m),{},{realScaleType:X}));i==="xAxis"?(P=v==="top"&&!_||v==="bottom"&&_,A=r.left,T=f[S]-P*m.height):i==="yAxis"&&(P=v==="left"&&!_||v==="right"&&_,A=f[S]-P*m.width,T=r.top);var Q=io(io(io({},m),K),{},{realScaleType:X,x:A,y:T,scale:H,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return Q.bandSize=I0(Q,K),!m.hide&&i==="xAxis"?f[S]+=(P?-1:1)*Q.height:m.hide||(f[S]+=(P?-1:1)*Q.width),io(io({},d),{},Hw({},p,Q))},{})},F8=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},JLe=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return F8({x:n,y:r},{x:i,y:o})},B8=function(){function t(e){GLe(this,t),this.scale=e}return KLe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+u}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Hw(B8,"EPS",1e-4);var mO=function(e){var n=Object.keys(e).reduce(function(r,i){return io(io({},r),{},Hw({},i,B8.create(e[i])))},{});return io(io({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return mLe(i,function(u,l){return n[l].apply(u,{bandAware:a,position:s})})},isInRange:function(i){return PLe(i,function(o,a){return n[a].isInRange(o)})}})};function QLe(t){return(t%180+180)%180}var ZLe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=QLe(i),a=o*Math.PI/180,s=Math.atan(r/n),u=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(u)},e4e=l0e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),U8=R.createContext(void 0),V8=R.createContext(void 0),W8=R.createContext(void 0),t4e=R.createContext({}),z8=R.createContext(void 0),H8=R.createContext(0),q8=R.createContext(0),FL=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,u=e.width,l=e.height,c=e4e(o);return W.createElement(U8.Provider,{value:r},W.createElement(V8.Provider,{value:i},W.createElement(t4e.Provider,{value:o},W.createElement(W8.Provider,{value:c},W.createElement(z8.Provider,{value:a},W.createElement(H8.Provider,{value:l},W.createElement(q8.Provider,{value:u},s)))))))},n4e=function(){return R.useContext(z8)},G8=function(e){var n=R.useContext(U8);n==null&&Dl();var r=n[e];return r==null&&Dl(),r},K8=function(e){var n=R.useContext(V8);n==null&&Dl();var r=n[e];return r==null&&Dl(),r},r4e=function(){var e=R.useContext(W8);return e},X8=function(){return R.useContext(q8)},Y8=function(){return R.useContext(H8)};function Qf(t){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qf(t)}function i4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o4e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q8(r.key),r)}}function a4e(t,e,n){return e&&o4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s4e(t,e,n){return e=K0(e),u4e(t,J8()?Reflect.construct(e,n||[],K0(t).constructor):e.apply(t,n))}function u4e(t,e){if(e&&(Qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l4e(t)}function l4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J8=function(){return!!t})()}function K0(t){return K0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},K0(t)}function c4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&X2(t,e)}function X2(t,e){return X2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},X2(t,e)}function BL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BL(Object(n),!0).forEach(function(r){vO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vO(t,e,n){return e=Q8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q8(t){var e=f4e(t,"string");return Qf(e)=="symbol"?e:e+""}function f4e(t,e){if(Qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h4e(t,e){return v4e(t)||m4e(t,e)||p4e(t,e)||d4e()}function d4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p4e(t,e){if(t){if(typeof t=="string")return VL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VL(t,e)}}function VL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m4e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function v4e(t){if(Array.isArray(t))return t}function Y2(){return Y2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y2.apply(this,arguments)}var g4e=function(e,n){var r;return W.isValidElement(e)?r=W.cloneElement(e,n):We(e)?r=e(n):r=W.createElement("line",Y2({},n,{className:"recharts-reference-line-line"})),r},y4e=function(e,n,r,i,o,a,s,u,l){var c=o.x,f=o.y,h=o.width,d=o.height;if(r){var p=l.y,m=e.y.apply(p,{position:a});if(ea(l,"discard")&&!e.y.isInRange(m))return null;var v=[{x:c+h,y:m},{x:c,y:m}];return u==="left"?v.reverse():v}if(n){var g=l.x,y=e.x.apply(g,{position:a});if(ea(l,"discard")&&!e.x.isInRange(y))return null;var b=[{x:y,y:f+d},{x:y,y:f}];return s==="top"?b.reverse():b}if(i){var _=l.segment,x=_.map(function(S){return e.apply(S,{position:a})});return ea(l,"discard")&&sLe(x,function(S){return!e.isInRange(S)})?null:x}return null};function b4e(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,u=t.alwaysShow,l=n4e(),c=G8(i),f=K8(o),h=r4e();if(!l||!h)return null;Oa(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=mO({x:c.scale,y:f.scale}),p=En(e),m=En(n),v=r&&r.length===2,g=y4e(d,p,m,v,h,t.position,c.orientation,f.orientation,t);if(!g)return null;var y=h4e(g,2),b=y[0],_=b.x,x=b.y,S=y[1],E=S.x,C=S.y,A=ea(t,"hidden")?"url(#".concat(l,")"):void 0,T=UL(UL({clipPath:A},Le(t,!0)),{},{x1:_,y1:x,x2:E,y2:C});return W.createElement(ht,{className:qe("recharts-reference-line",s)},g4e(a,T),$n.renderCallByParent(t,JLe({x1:_,y1:x,x2:E,y2:C})))}var gO=function(t){function e(){return i4e(this,e),s4e(this,e,arguments)}return c4e(e,t),a4e(e,[{key:"render",value:function(){return W.createElement(b4e,this.props)}}])}(W.Component);vO(gO,"displayName","ReferenceLine");vO(gO,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function J2(){return J2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J2.apply(this,arguments)}function Zf(t){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zf(t)}function WL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WL(Object(n),!0).forEach(function(r){qw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function w4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x4e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e9(r.key),r)}}function _4e(t,e,n){return e&&x4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S4e(t,e,n){return e=X0(e),E4e(t,Z8()?Reflect.construct(e,n||[],X0(t).constructor):e.apply(t,n))}function E4e(t,e){if(e&&(Zf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C4e(t)}function C4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z8=function(){return!!t})()}function X0(t){return X0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},X0(t)}function A4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q2(t,e)}function Q2(t,e){return Q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Q2(t,e)}function qw(t,e,n){return e=e9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e9(t){var e=T4e(t,"string");return Zf(e)=="symbol"?e:e+""}function T4e(t,e){if(Zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var P4e=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=mO({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return ea(e,"discard")&&!a.isInRange(s)?null:s},Gw=function(t){function e(){return w4e(this,e),S4e(this,e,arguments)}return A4e(e,t),_4e(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,u=r.clipPathId,l=En(i),c=En(o);if(Oa(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var f=P4e(this.props);if(!f)return null;var h=f.x,d=f.y,p=this.props,m=p.shape,v=p.className,g=ea(this.props,"hidden")?"url(#".concat(u,")"):void 0,y=zL(zL({clipPath:g},Le(this.props,!0)),{},{cx:h,cy:d});return W.createElement(ht,{className:qe("recharts-reference-dot",v)},e.renderDot(m,y),$n.renderCallByParent(this.props,{x:h-a,y:d-a,width:2*a,height:2*a}))}}])}(W.Component);qw(Gw,"displayName","ReferenceDot");qw(Gw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});qw(Gw,"renderDot",function(t,e){var n;return W.isValidElement(t)?n=W.cloneElement(t,e):We(t)?n=t(e):n=W.createElement(pO,J2({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function Z2(){return Z2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z2.apply(this,arguments)}function eh(t){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eh(t)}function HL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HL(Object(n),!0).forEach(function(r){Kw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k4e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n9(r.key),r)}}function I4e(t,e,n){return e&&k4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function R4e(t,e,n){return e=Y0(e),N4e(t,t9()?Reflect.construct(e,n||[],Y0(t).constructor):e.apply(t,n))}function N4e(t,e){if(e&&(eh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D4e(t)}function D4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function t9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t9=function(){return!!t})()}function Y0(t){return Y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Y0(t)}function M4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eC(t,e)}function eC(t,e){return eC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},eC(t,e)}function Kw(t,e,n){return e=n9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n9(t){var e=$4e(t,"string");return eh(e)=="symbol"?e:e+""}function $4e(t,e){if(eh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j4e=function(e,n,r,i,o){var a=o.x1,s=o.x2,u=o.y1,l=o.y2,c=o.xAxis,f=o.yAxis;if(!c||!f)return null;var h=mO({x:c.scale,y:f.scale}),d={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(u,{position:"start"}):h.y.rangeMin},p={x:n?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(l,{position:"end"}):h.y.rangeMax};return ea(o,"discard")&&(!h.isInRange(d)||!h.isInRange(p))?null:F8(d,p)},Xw=function(t){function e(){return O4e(this,e),R4e(this,e,arguments)}return M4e(e,t),I4e(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,u=r.className,l=r.alwaysShow,c=r.clipPathId;Oa(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=En(i),h=En(o),d=En(a),p=En(s),m=this.props.shape;if(!f&&!h&&!d&&!p&&!m)return null;var v=j4e(f,h,d,p,this.props);if(!v&&!m)return null;var g=ea(this.props,"hidden")?"url(#".concat(c,")"):void 0;return W.createElement(ht,{className:qe("recharts-reference-area",u)},e.renderRect(m,qL(qL({clipPath:g},Le(this.props,!0)),v)),$n.renderCallByParent(this.props,v))}}])}(W.Component);Kw(Xw,"displayName","ReferenceArea");Kw(Xw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Kw(Xw,"renderRect",function(t,e){var n;return W.isValidElement(t)?n=W.cloneElement(t,e):We(t)?n=t(e):n=W.createElement(dO,Z2({},e,{className:"recharts-reference-area-rect"})),n});function r9(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function L4e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return ZLe(r,n)}function F4e(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function J0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function B4e(t,e){return r9(t,e+1)}function U4e(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,u=0,l=1,c=a,f=function(){var p=r==null?void 0:r[u];if(p===void 0)return{v:r9(r,l)};var m=u,v,g=function(){return v===void 0&&(v=n(p,m)),v},y=p.coordinate,b=u===0||J0(t,y,g,c,s);b||(u=0,c=a,l+=1),b&&(c=y+t*(g()/2+i),u+=l)},h;l<=o.length;)if(h=f(),h)return h.v;return[]}function vm(t){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(t)}function GL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GL(Object(n),!0).forEach(function(r){V4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V4e(t,e,n){return e=W4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W4e(t){var e=z4e(t,"string");return vm(e)=="symbol"?e:e+""}function z4e(t,e){if(vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H4e(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,u=e.end,l=function(h){var d=o[h],p,m=function(){return p===void 0&&(p=n(d,h)),p};if(h===a-1){var v=t*(d.coordinate+t*m()/2-u);o[h]=d=ir(ir({},d),{},{tickCoord:v>0?d.coordinate-v*t:d.coordinate})}else o[h]=d=ir(ir({},d),{},{tickCoord:d.coordinate});var g=J0(t,d.tickCoord,m,s,u);g&&(u=d.tickCoord-t*(m()/2+i),o[h]=ir(ir({},d),{},{isShow:!0}))},c=a-1;c>=0;c--)l(c);return o}function q4e(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,u=e.start,l=e.end;if(o){var c=r[s-1],f=n(c,s-1),h=t*(c.coordinate+t*f/2-l);a[s-1]=c=ir(ir({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate});var d=J0(t,c.tickCoord,function(){return f},u,l);d&&(l=c.tickCoord-t*(f/2+i),a[s-1]=ir(ir({},c),{},{isShow:!0}))}for(var p=o?s-1:s,m=function(y){var b=a[y],_,x=function(){return _===void 0&&(_=n(b,y)),_};if(y===0){var S=t*(b.coordinate-t*x()/2-u);a[y]=b=ir(ir({},b),{},{tickCoord:S<0?b.coordinate-S*t:b.coordinate})}else a[y]=b=ir(ir({},b),{},{tickCoord:b.coordinate});var E=J0(t,b.tickCoord,x,u,l);E&&(u=b.tickCoord+t*(x()/2+i),a[y]=ir(ir({},b),{},{isShow:!0}))},v=0;v<p;v++)m(v);return a}function G4e(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,u=t.interval,l=t.tickFormatter,c=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(he(u)||ka.isSsr)return B4e(i,typeof u=="number"&&he(u)?u:0);var h=[],d=s==="top"||s==="bottom"?"width":"height",p=c&&d==="width"?qd(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(b,_){var x=We(l)?l(b.value,_):b.value;return d==="width"?L4e(qd(x,{fontSize:e,letterSpacing:n}),p,f):qd(x,{fontSize:e,letterSpacing:n})[d]},v=i.length>=2?xr(i[1].coordinate-i[0].coordinate):1,g=F4e(o,v,d);return u==="equidistantPreserveStart"?U4e(v,g,m,i,a):(u==="preserveStart"||u==="preserveStartEnd"?h=q4e(v,g,m,i,a,u==="preserveStartEnd"):h=H4e(v,g,m,i,a),h.filter(function(y){return y.isShow}))}var K4e=["viewBox"],X4e=["viewBox"],Y4e=["ticks"];function th(t){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(t)}function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jc.apply(this,arguments)}function KL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(n),!0).forEach(function(r){yO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function w_(t,e){if(t==null)return{};var n=J4e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function J4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Q4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function XL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o9(r.key),r)}}function Z4e(t,e,n){return e&&XL(t.prototype,e),n&&XL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eFe(t,e,n){return e=Q0(e),tFe(t,i9()?Reflect.construct(e,n||[],Q0(t).constructor):e.apply(t,n))}function tFe(t,e){if(e&&(th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nFe(t)}function nFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i9=function(){return!!t})()}function Q0(t){return Q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Q0(t)}function rFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tC(t,e)}function tC(t,e){return tC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},tC(t,e)}function yO(t,e,n){return e=o9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o9(t){var e=iFe(t,"string");return th(e)=="symbol"?e:e+""}function iFe(t,e){if(th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yw=function(t){function e(n){var r;return Q4e(this,e),r=eFe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return rFe(e,t),Z4e(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=w_(r,K4e),s=this.props,u=s.viewBox,l=w_(s,X4e);return!lf(o,u)||!lf(a,l)||!lf(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,u=i.height,l=i.orientation,c=i.tickSize,f=i.mirror,h=i.tickMargin,d,p,m,v,g,y,b=f?-1:1,_=r.tickSize||c,x=he(r.tickCoord)?r.tickCoord:r.coordinate;switch(l){case"top":d=p=r.coordinate,v=a+ +!f*u,m=v-b*_,y=m-b*h,g=x;break;case"left":m=v=r.coordinate,p=o+ +!f*s,d=p-b*_,g=d-b*h,y=x;break;case"right":m=v=r.coordinate,p=o+ +f*s,d=p+b*_,g=d+b*h,y=x;break;default:d=p=r.coordinate,v=a+ +f*u,m=v+b*_,y=m+b*h,g=x;break}return{line:{x1:d,y1:m,x2:p,y2:v},tick:{x:g,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.orientation,l=r.mirror,c=r.axisLine,f=vn(vn(vn({},Le(this.props,!1)),Le(c,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var h=+(u==="top"&&!l||u==="bottom"&&l);f=vn(vn({},f),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var d=+(u==="left"&&!l||u==="right"&&l);f=vn(vn({},f),{},{x1:i+d*a,y1:o,x2:i+d*a,y2:o+s})}return W.createElement("line",jc({},f,{className:qe("recharts-cartesian-axis-line",di(c,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,u=s.tickLine,l=s.stroke,c=s.tick,f=s.tickFormatter,h=s.unit,d=G4e(vn(vn({},this.props),{},{ticks:r}),i,o),p=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),v=Le(this.props,!1),g=Le(c,!1),y=vn(vn({},v),{},{fill:"none"},Le(u,!1)),b=d.map(function(_,x){var S=a.getTickLineCoord(_),E=S.line,C=S.tick,A=vn(vn(vn(vn({textAnchor:p,verticalAnchor:m},v),{},{stroke:"none",fill:l},g),C),{},{index:x,payload:_,visibleTicksCount:d.length,tickFormatter:f});return W.createElement(ht,jc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Il(a.props,_,x)),u&&W.createElement("line",jc({},y,E,{className:qe("recharts-cartesian-axis-tick-line",di(u,"className"))})),c&&e.renderTickItem(c,A,"".concat(We(f)?f(_.value,x):_.value).concat(h||"")))});return W.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,u=i.ticksGenerator,l=i.className,c=i.hide;if(c)return null;var f=this.props,h=f.ticks,d=w_(f,Y4e),p=h;return We(u)&&(p=h&&h.length>0?u(this.props):u(d)),a<=0||s<=0||!p||!p.length?null:W.createElement(ht,{className:qe("recharts-cartesian-axis",l),ref:function(v){r.layerReference=v}},o&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),$n.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a,s=qe(i.className,"recharts-cartesian-axis-tick-value");return W.isValidElement(r)?a=W.cloneElement(r,vn(vn({},i),{},{className:s})):We(r)?a=r(vn(vn({},i),{},{className:s})):a=W.createElement(Rl,jc({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(R.Component);yO(Yw,"displayName","CartesianAxis");yO(Yw,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}function oFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aFe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u9(r.key),r)}}function sFe(t,e,n){return e&&aFe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uFe(t,e,n){return e=Z0(e),lFe(t,a9()?Reflect.construct(e,n||[],Z0(t).constructor):e.apply(t,n))}function lFe(t,e){if(e&&(nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cFe(t)}function cFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a9=function(){return!!t})()}function Z0(t){return Z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Z0(t)}function fFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nC(t,e)}function nC(t,e){return nC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nC(t,e)}function s9(t,e,n){return e=u9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u9(t){var e=hFe(t,"string");return nh(e)=="symbol"?e:e+""}function hFe(t,e){if(nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rC(){return rC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rC.apply(this,arguments)}function dFe(t){var e=t.xAxisId,n=X8(),r=Y8(),i=G8(e);return i==null?null:R.createElement(Yw,rC({},i,{className:qe("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return al(a,!0)}}))}var Jw=function(t){function e(){return oFe(this,e),uFe(this,e,arguments)}return fFe(e,t),sFe(e,[{key:"render",value:function(){return R.createElement(dFe,this.props)}}])}(R.Component);s9(Jw,"displayName","XAxis");s9(Jw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function pFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mFe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f9(r.key),r)}}function vFe(t,e,n){return e&&mFe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gFe(t,e,n){return e=eb(e),yFe(t,l9()?Reflect.construct(e,n||[],eb(t).constructor):e.apply(t,n))}function yFe(t,e){if(e&&(rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bFe(t)}function bFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l9=function(){return!!t})()}function eb(t){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eb(t)}function wFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iC(t,e)}function iC(t,e){return iC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iC(t,e)}function c9(t,e,n){return e=f9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f9(t){var e=xFe(t,"string");return rh(e)=="symbol"?e:e+""}function xFe(t,e){if(rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oC(){return oC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oC.apply(this,arguments)}var _Fe=function(e){var n=e.yAxisId,r=X8(),i=Y8(),o=K8(n);return o==null?null:R.createElement(Yw,oC({},o,{className:qe("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return al(s,!0)}}))},Qw=function(t){function e(){return pFe(this,e),gFe(this,e,arguments)}return wFe(e,t),vFe(e,[{key:"render",value:function(){return R.createElement(_Fe,this.props)}}])}(R.Component);c9(Qw,"displayName","YAxis");c9(Qw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function YL(t){return AFe(t)||CFe(t)||EFe(t)||SFe()}function SFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EFe(t,e){if(t){if(typeof t=="string")return aC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aC(t,e)}}function CFe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AFe(t){if(Array.isArray(t))return aC(t)}function aC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sC=function(e,n,r,i,o){var a=Mi(e,gO),s=Mi(e,Gw),u=[].concat(YL(a),YL(s)),l=Mi(e,Xw),c="".concat(i,"Id"),f=i[0],h=n;if(u.length&&(h=u.reduce(function(m,v){if(v.props[c]===r&&ea(v.props,"extendDomain")&&he(v.props[f])){var g=v.props[f];return[Math.min(m[0],g),Math.max(m[1],g)]}return m},h)),l.length){var d="".concat(f,"1"),p="".concat(f,"2");h=l.reduce(function(m,v){if(v.props[c]===r&&ea(v.props,"extendDomain")&&he(v.props[d])&&he(v.props[p])){var g=v.props[d],y=v.props[p];return[Math.min(m[0],g,y),Math.max(m[1],g,y)]}return m},h)}return o&&o.length&&(h=o.reduce(function(m,v){return he(v)?[Math.min(m[0],v),Math.max(m[1],v)]:m},h)),h},h9={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function o(u,l,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,f||u,h),p=n?n+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],d]:u._events[p].push(d):(u._events[p]=d,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],c,f;if(this._eventsCount===0)return l;for(f in c=this._events)e.call(c,f)&&l.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},s.prototype.listeners=function(l){var c=n?n+l:l,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},s.prototype.listenerCount=function(l){var c=n?n+l:l,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,c,f,h,d,p){var m=n?n+l:l;if(!this._events[m])return!1;var v=this._events[m],g=arguments.length,y,b;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,f),!0;case 4:return v.fn.call(v.context,c,f,h),!0;case 5:return v.fn.call(v.context,c,f,h,d),!0;case 6:return v.fn.call(v.context,c,f,h,d,p),!0}for(b=1,y=new Array(g-1);b<g;b++)y[b-1]=arguments[b];v.fn.apply(v.context,y)}else{var _=v.length,x;for(b=0;b<_;b++)switch(v[b].once&&this.removeListener(l,v[b].fn,void 0,!0),g){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,c);break;case 3:v[b].fn.call(v[b].context,c,f);break;case 4:v[b].fn.call(v[b].context,c,f,h);break;default:if(!y)for(x=1,y=new Array(g-1);x<g;x++)y[x-1]=arguments[x];v[b].fn.apply(v[b].context,y)}}return!0},s.prototype.on=function(l,c,f){return o(this,l,c,f,!1)},s.prototype.once=function(l,c,f){return o(this,l,c,f,!0)},s.prototype.removeListener=function(l,c,f,h){var d=n?n+l:l;if(!this._events[d])return this;if(!c)return a(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!h||p.once)&&(!f||p.context===f)&&a(this,d);else{for(var m=0,v=[],g=p.length;m<g;m++)(p[m].fn!==c||h&&!p[m].once||f&&p[m].context!==f)&&v.push(p[m]);v.length?this._events[d]=v.length===1?v[0]:v:a(this,d)}return this},s.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(h9);var TFe=h9.exports;const PFe=pt(TFe);var x_=new PFe,__="recharts.syncMouseEvents";function gm(t){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gm(t)}function OFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kFe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d9(r.key),r)}}function IFe(t,e,n){return e&&kFe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S_(t,e,n){return e=d9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d9(t){var e=RFe(t,"string");return gm(e)=="symbol"?e:e+""}function RFe(t,e){if(gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var NFe=function(){function t(){OFe(this,t),S_(this,"activeIndex",0),S_(this,"coordinateList",[]),S_(this,"layout","horizontal")}return IFe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,u=n.layout,l=u===void 0?null:u,c=n.offset,f=c===void 0?null:c,h=n.mouseHandlerCallback,d=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=l??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=d??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,u=this.coordinateList[this.activeIndex].coordinate,l=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+u+l,h=a+this.offset.top+s/2+c;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function DFe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&he(r)&&he(i))return!0}return!1}function MFe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function p9(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Tt(e,n,r,i),s=Tt(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function $Fe(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,u=e.cy,l=e.innerRadius,c=e.outerRadius,f=e.angle,h=Tt(s,u,l,f),d=Tt(s,u,c,f);r=h.x,i=h.y,o=d.x,a=d.y}else return p9(e);return[{x:r,y:i},{x:o,y:a}]}function ym(t){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(t)}function JL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JL(Object(n),!0).forEach(function(r){jFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jFe(t,e,n){return e=LFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LFe(t){var e=FFe(t,"string");return ym(e)=="symbol"?e:e+""}function FFe(t,e){if(ym(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BFe(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,u=t.offset,l=t.activeTooltipIndex,c=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,d=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!d||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var p,m=k2;if(h==="ScatterChart")p=a,m=KMe;else if(h==="BarChart")p=MFe(f,a,u,c),m=dO;else if(f==="radial"){var v=p9(a),g=v.cx,y=v.cy,b=v.radius,_=v.startAngle,x=v.endAngle;p={cx:g,cy:y,startAngle:_,endAngle:x,innerRadius:b,outerRadius:b},m=d8}else p={points:$Fe(f,a,u)},m=k2;var S=gg(gg(gg(gg({stroke:"#ccc",pointerEvents:"none"},u),p),Le(d,!1)),{},{payload:s,payloadIndex:l,className:qe("recharts-tooltip-cursor",d.className)});return R.isValidElement(d)?R.cloneElement(d,S):R.createElement(m,S)}var UFe=["item"],VFe=["children","className","width","height","style","compact","title","desc"];function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function Lc(){return Lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lc.apply(this,arguments)}function QL(t,e){return HFe(t)||zFe(t,e)||v9(t,e)||WFe()}function WFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zFe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function HFe(t){if(Array.isArray(t))return t}function ZL(t,e){if(t==null)return{};var n=qFe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function GFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KFe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g9(r.key),r)}}function XFe(t,e,n){return e&&KFe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YFe(t,e,n){return e=tb(e),JFe(t,m9()?Reflect.construct(e,n||[],tb(t).constructor):e.apply(t,n))}function JFe(t,e){if(e&&(ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QFe(t)}function QFe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m9=function(){return!!t})()}function tb(t){return tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tb(t)}function ZFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uC(t,e)}function uC(t,e){return uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uC(t,e)}function oh(t){return n3e(t)||t3e(t)||v9(t)||e3e()}function e3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v9(t,e){if(t){if(typeof t=="string")return lC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lC(t,e)}}function t3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function n3e(t){if(Array.isArray(t))return lC(t)}function lC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e4(Object(n),!0).forEach(function(r){Re(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Re(t,e,n){return e=g9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g9(t){var e=r3e(t,"string");return ih(e)=="symbol"?e:e+""}function r3e(t,e){if(ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i3e={xAxis:["bottom","top"],yAxis:["left","right"]},o3e={width:"100%",height:"100%"},y9={x:0,y:0};function yg(t){return t}var a3e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},s3e=function(e,n,r,i){var o=n.find(function(c){return c&&c.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return re(re(re({},i),Tt(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var u=o.coordinate,l=i.angle;return re(re(re({},i),Tt(i.cx,i.cy,u,l)),{},{angle:l,radius:u})}return y9},Zw=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,u){var l=u.props.data;return l&&l.length?[].concat(oh(s),oh(l)):s},[]);return a.length>0?a:e&&e.length&&he(i)&&he(o)?e.slice(i,o+1):[]};function b9(t){return t==="number"?[0,"auto"]:void 0}var cC=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=Zw(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(u,l){var c,f=(c=l.props.data)!==null&&c!==void 0?c:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var d=f===void 0?s:f;h=LE(d,a.dataKey,i)}else h=f&&f[r]||s[r];return h?[].concat(oh(u),[s8(l,h)]):u},[])},t4=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=a3e(o,r),s=e.orderedTooltipTicks,u=e.tooltipAxis,l=e.tooltipTicks,c=yRe(a,s,l,u);if(c>=0&&l){var f=l[c]&&l[c].value,h=cC(e,n,c,f),d=s3e(r,s,c,o);return{activeTooltipIndex:c,activeLabel:f,activePayload:h,activeCoordinate:d}}return null},u3e=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.layout,f=e.children,h=e.stackOffset,d=n8(c,o);return r.reduce(function(p,m){var v,g=m.type.defaultProps!==void 0?re(re({},m.type.defaultProps),m.props):m.props,y=g.type,b=g.dataKey,_=g.allowDataOverflow,x=g.allowDuplicatedCategory,S=g.scale,E=g.ticks,C=g.includeHidden,A=g[a];if(p[A])return p;var T=Zw(e.data,{graphicalItems:i.filter(function(K){var Q,ae=a in K.props?K.props[a]:(Q=K.type.defaultProps)===null||Q===void 0?void 0:Q[a];return ae===A}),dataStartIndex:u,dataEndIndex:l}),P=T.length,k,I,$;DFe(g.domain,_,y)&&(k=C2(g.domain,null,_),d&&(y==="number"||S!=="auto")&&($=Kd(T,b,"category")));var B=b9(y);if(!k||k.length===0){var z,U=(z=g.domain)!==null&&z!==void 0?z:B;if(b){if(k=Kd(T,b,y),y==="category"&&d){var M=sbe(k);x&&M?(I=k,k=W0(0,P)):x||(k=Pj(U,k,m).reduce(function(K,Q){return K.indexOf(Q)>=0?K:[].concat(oh(K),[Q])},[]))}else if(y==="category")x?k=k.filter(function(K){return K!==""&&!Xe(K)}):k=Pj(U,k,m).reduce(function(K,Q){return K.indexOf(Q)>=0||Q===""||Xe(Q)?K:[].concat(oh(K),[Q])},[]);else if(y==="number"){var F=SRe(T,i.filter(function(K){var Q,ae,le=a in K.props?K.props[a]:(Q=K.type.defaultProps)===null||Q===void 0?void 0:Q[a],ve="hide"in K.props?K.props.hide:(ae=K.type.defaultProps)===null||ae===void 0?void 0:ae.hide;return le===A&&(C||!ve)}),b,o,c);F&&(k=F)}d&&(y==="number"||S!=="auto")&&($=Kd(T,b,"category"))}else d?k=W0(0,P):s&&s[A]&&s[A].hasStack&&y==="number"?k=h==="expand"?[0,1]:a8(s[A].stackGroups,u,l):k=t8(T,i.filter(function(K){var Q=a in K.props?K.props[a]:K.type.defaultProps[a],ae="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return Q===A&&(C||!ae)}),y,c,!0);if(y==="number")k=sC(f,k,A,o,E),U&&(k=C2(U,k,_));else if(y==="category"&&U){var H=U,X=k.every(function(K){return H.indexOf(K)>=0});X&&(k=H)}}return re(re({},p),{},Re({},A,re(re({},g),{},{axisType:o,domain:k,categoricalDomain:$,duplicateDomain:I,originalDomain:(v=g.domain)!==null&&v!==void 0?v:B,isCategorical:d,layout:c})))},{})},l3e=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.layout,f=e.children,h=Zw(e.data,{graphicalItems:r,dataStartIndex:u,dataEndIndex:l}),d=h.length,p=n8(c,o),m=-1;return r.reduce(function(v,g){var y=g.type.defaultProps!==void 0?re(re({},g.type.defaultProps),g.props):g.props,b=y[a],_=b9("number");if(!v[b]){m++;var x;return p?x=W0(0,d):s&&s[b]&&s[b].hasStack?(x=a8(s[b].stackGroups,u,l),x=sC(f,x,b,o)):(x=C2(_,t8(h,r.filter(function(S){var E,C,A=a in S.props?S.props[a]:(E=S.type.defaultProps)===null||E===void 0?void 0:E[a],T="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return A===b&&!T}),"number",c),i.defaultProps.allowDataOverflow),x=sC(f,x,b,o)),re(re({},v),{},Re({},b,re(re({axisType:o},i.defaultProps),{},{hide:!0,orientation:di(i3e,"".concat(o,".").concat(m%2),null),domain:x,originalDomain:_,isCategorical:p,layout:c})))}return v},{})},c3e=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.children,f="".concat(i,"Id"),h=Mi(c,o),d={};return h&&h.length?d=u3e(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:u,dataEndIndex:l}):a&&a.length&&(d=l3e(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:u,dataEndIndex:l})),d},f3e=function(e){var n=vc(e),r=al(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:BP(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:I0(n,r)}},n4=function(e){var n=e.children,r=e.defaultShowTooltip,i=ei(n,Yf),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},h3e=function(e){return!e||!e.length?!1:e.some(function(n){var r=Pa(n&&n.type);return r&&r.indexOf("Bar")>=0})},r4=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},d3e=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,u=s===void 0?{}:s,l=r.width,c=r.height,f=r.children,h=r.margin||{},d=ei(f,Yf),p=ei(f,cf),m=Object.keys(u).reduce(function(x,S){var E=u[S],C=E.orientation;return!E.mirror&&!E.hide?re(re({},x),{},Re({},C,x[C]+E.width)):x},{left:h.left||0,right:h.right||0}),v=Object.keys(a).reduce(function(x,S){var E=a[S],C=E.orientation;return!E.mirror&&!E.hide?re(re({},x),{},Re({},C,di(x,"".concat(C))+E.height)):x},{top:h.top||0,bottom:h.bottom||0}),g=re(re({},v),m),y=g.bottom;d&&(g.bottom+=d.props.height||Yf.defaultProps.height),p&&n&&(g=xRe(g,i,r,n));var b=l-g.left-g.right,_=c-g.top-g.bottom;return re(re({brushBottom:y},g),{},{width:Math.max(b,0),height:Math.max(_,0)})},p3e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},w9=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,u=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,f=e.defaultProps,h=function(g,y){var b=y.graphicalItems,_=y.stackGroups,x=y.offset,S=y.updateId,E=y.dataStartIndex,C=y.dataEndIndex,A=g.barSize,T=g.layout,P=g.barGap,k=g.barCategoryGap,I=g.maxBarSize,$=r4(T),B=$.numericAxisName,z=$.cateAxisName,U=h3e(b),M=[];return b.forEach(function(F,H){var X=Zw(g.data,{graphicalItems:[F],dataStartIndex:E,dataEndIndex:C}),K=F.type.defaultProps!==void 0?re(re({},F.type.defaultProps),F.props):F.props,Q=K.dataKey,ae=K.maxBarSize,le=K["".concat(B,"Id")],ve=K["".concat(z,"Id")],de={},Ce=u.reduce(function(gt,en){var jt=y["".concat(en.axisType,"Map")],Hr=K["".concat(en.axisType,"Id")];jt&&jt[Hr]||en.axisType==="zAxis"||Dl();var on=jt[Hr];return re(re({},gt),{},Re(Re({},en.axisType,on),"".concat(en.axisType,"Ticks"),al(on)))},de),ie=Ce[z],me=Ce["".concat(z,"Ticks")],ce=_&&_[le]&&_[le].hasStack&&RRe(F,_[le].stackGroups),te=Pa(F.type).indexOf("Bar")>=0,ye=I0(ie,me),xe=[],De=U&&bRe({barSize:A,stackGroups:_,totalSize:p3e(Ce,z)});if(te){var Ie,et,vt=Xe(ae)?I:ae,Be=(Ie=(et=I0(ie,me,!0))!==null&&et!==void 0?et:vt)!==null&&Ie!==void 0?Ie:0;xe=wRe({barGap:P,barCategoryGap:k,bandSize:Be!==ye?Be:ye,sizeList:De[ve],maxBarSize:vt}),Be!==ye&&(xe=xe.map(function(gt){return re(re({},gt),{},{position:re(re({},gt.position),{},{offset:gt.position.offset-Be/2})})}))}var ut=F&&F.type&&F.type.getComposedData;ut&&M.push({props:re(re({},ut(re(re({},Ce),{},{displayedData:X,props:g,dataKey:Q,item:F,bandSize:ye,barPosition:xe,offset:x,stackedData:ce,layout:T,dataStartIndex:E,dataEndIndex:C}))),{},Re(Re(Re({key:F.key||"item-".concat(H)},B,Ce[B]),z,Ce[z]),"animationId",S)),childIndex:bbe(F,g.children),item:F})}),M},d=function(g,y){var b=g.props,_=g.dataStartIndex,x=g.dataEndIndex,S=g.updateId;if(!_M({props:b}))return null;var E=b.children,C=b.layout,A=b.stackOffset,T=b.data,P=b.reverseStackOrder,k=r4(C),I=k.numericAxisName,$=k.cateAxisName,B=Mi(E,r),z=kRe(T,B,"".concat(I,"Id"),"".concat($,"Id"),A,P),U=u.reduce(function(K,Q){var ae="".concat(Q.axisType,"Map");return re(re({},K),{},Re({},ae,c3e(b,re(re({},Q),{},{graphicalItems:B,stackGroups:Q.axisType===I&&z,dataStartIndex:_,dataEndIndex:x}))))},{}),M=d3e(re(re({},U),{},{props:b,graphicalItems:B}),y==null?void 0:y.legendBBox);Object.keys(U).forEach(function(K){U[K]=c(b,U[K],M,K.replace("Map",""),n)});var F=U["".concat($,"Map")],H=f3e(F),X=h(b,re(re({},U),{},{dataStartIndex:_,dataEndIndex:x,updateId:S,graphicalItems:B,stackGroups:z,offset:M}));return re(re({formattedGraphicalItems:X,graphicalItems:B,offset:M,stackGroups:z},H),U)},p=function(v){function g(y){var b,_,x;return GFe(this,g),x=YFe(this,g,[y]),Re(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Re(x,"accessibilityManager",new NFe),Re(x,"handleLegendBBoxUpdate",function(S){if(S){var E=x.state,C=E.dataStartIndex,A=E.dataEndIndex,T=E.updateId;x.setState(re({legendBBox:S},d({props:x.props,dataStartIndex:C,dataEndIndex:A,updateId:T},re(re({},x.state),{},{legendBBox:S}))))}}),Re(x,"handleReceiveSyncEvent",function(S,E,C){if(x.props.syncId===S){if(C===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(E)}}),Re(x,"handleBrushChange",function(S){var E=S.startIndex,C=S.endIndex;if(E!==x.state.dataStartIndex||C!==x.state.dataEndIndex){var A=x.state.updateId;x.setState(function(){return re({dataStartIndex:E,dataEndIndex:C},d({props:x.props,dataStartIndex:E,dataEndIndex:C,updateId:A},x.state))}),x.triggerSyncEvent({dataStartIndex:E,dataEndIndex:C})}}),Re(x,"handleMouseEnter",function(S){var E=x.getMouseInfo(S);if(E){var C=re(re({},E),{},{isTooltipActive:!0});x.setState(C),x.triggerSyncEvent(C);var A=x.props.onMouseEnter;We(A)&&A(C,S)}}),Re(x,"triggeredAfterMouseMove",function(S){var E=x.getMouseInfo(S),C=E?re(re({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(C),x.triggerSyncEvent(C);var A=x.props.onMouseMove;We(A)&&A(C,S)}),Re(x,"handleItemMouseEnter",function(S){x.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Re(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),Re(x,"handleMouseMove",function(S){S.persist(),x.throttleTriggeredAfterMouseMove(S)}),Re(x,"handleMouseLeave",function(S){x.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};x.setState(E),x.triggerSyncEvent(E);var C=x.props.onMouseLeave;We(C)&&C(E,S)}),Re(x,"handleOuterEvent",function(S){var E=ybe(S),C=di(x.props,"".concat(E));if(E&&We(C)){var A,T;/.*touch.*/i.test(E)?T=x.getMouseInfo(S.changedTouches[0]):T=x.getMouseInfo(S),C((A=T)!==null&&A!==void 0?A:{},S)}}),Re(x,"handleClick",function(S){var E=x.getMouseInfo(S);if(E){var C=re(re({},E),{},{isTooltipActive:!0});x.setState(C),x.triggerSyncEvent(C);var A=x.props.onClick;We(A)&&A(C,S)}}),Re(x,"handleMouseDown",function(S){var E=x.props.onMouseDown;if(We(E)){var C=x.getMouseInfo(S);E(C,S)}}),Re(x,"handleMouseUp",function(S){var E=x.props.onMouseUp;if(We(E)){var C=x.getMouseInfo(S);E(C,S)}}),Re(x,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Re(x,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.handleMouseDown(S.changedTouches[0])}),Re(x,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.handleMouseUp(S.changedTouches[0])}),Re(x,"handleDoubleClick",function(S){var E=x.props.onDoubleClick;if(We(E)){var C=x.getMouseInfo(S);E(C,S)}}),Re(x,"handleContextMenu",function(S){var E=x.props.onContextMenu;if(We(E)){var C=x.getMouseInfo(S);E(C,S)}}),Re(x,"triggerSyncEvent",function(S){x.props.syncId!==void 0&&x_.emit(__,x.props.syncId,S,x.eventEmitterSymbol)}),Re(x,"applySyncEvent",function(S){var E=x.props,C=E.layout,A=E.syncMethod,T=x.state.updateId,P=S.dataStartIndex,k=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)x.setState(re({dataStartIndex:P,dataEndIndex:k},d({props:x.props,dataStartIndex:P,dataEndIndex:k,updateId:T},x.state)));else if(S.activeTooltipIndex!==void 0){var I=S.chartX,$=S.chartY,B=S.activeTooltipIndex,z=x.state,U=z.offset,M=z.tooltipTicks;if(!U)return;if(typeof A=="function")B=A(M,S);else if(A==="value"){B=-1;for(var F=0;F<M.length;F++)if(M[F].value===S.activeLabel){B=F;break}}var H=re(re({},U),{},{x:U.left,y:U.top}),X=Math.min(I,H.x+H.width),K=Math.min($,H.y+H.height),Q=M[B]&&M[B].value,ae=cC(x.state,x.props.data,B),le=M[B]?{x:C==="horizontal"?M[B].coordinate:X,y:C==="horizontal"?K:M[B].coordinate}:y9;x.setState(re(re({},S),{},{activeLabel:Q,activeCoordinate:le,activePayload:ae,activeTooltipIndex:B}))}else x.setState(S)}),Re(x,"renderCursor",function(S){var E,C=x.state,A=C.isTooltipActive,T=C.activeCoordinate,P=C.activePayload,k=C.offset,I=C.activeTooltipIndex,$=C.tooltipAxisBandSize,B=x.getTooltipEventType(),z=(E=S.props.active)!==null&&E!==void 0?E:A,U=x.props.layout,M=S.key||"_recharts-cursor";return W.createElement(BFe,{key:M,activeCoordinate:T,activePayload:P,activeTooltipIndex:I,chartName:n,element:S,isActive:z,layout:U,offset:k,tooltipAxisBandSize:$,tooltipEventType:B})}),Re(x,"renderPolarAxis",function(S,E,C){var A=di(S,"type.axisType"),T=di(x.state,"".concat(A,"Map")),P=S.type.defaultProps,k=P!==void 0?re(re({},P),S.props):S.props,I=T&&T[k["".concat(A,"Id")]];return R.cloneElement(S,re(re({},I),{},{className:qe(A,I.className),key:S.key||"".concat(E,"-").concat(C),ticks:al(I,!0)}))}),Re(x,"renderPolarGrid",function(S){var E=S.props,C=E.radialLines,A=E.polarAngles,T=E.polarRadius,P=x.state,k=P.radiusAxisMap,I=P.angleAxisMap,$=vc(k),B=vc(I),z=B.cx,U=B.cy,M=B.innerRadius,F=B.outerRadius;return R.cloneElement(S,{polarAngles:Array.isArray(A)?A:al(B,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(T)?T:al($,!0).map(function(H){return H.coordinate}),cx:z,cy:U,innerRadius:M,outerRadius:F,key:S.key||"polar-grid",radialLines:C})}),Re(x,"renderLegend",function(){var S=x.state.formattedGraphicalItems,E=x.props,C=E.children,A=E.width,T=E.height,P=x.props.margin||{},k=A-(P.left||0)-(P.right||0),I=ZH({children:C,formattedGraphicalItems:S,legendWidth:k,legendContent:l});if(!I)return null;var $=I.item,B=ZL(I,UFe);return R.cloneElement($,re(re({},B),{},{chartWidth:A,chartHeight:T,margin:P,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),Re(x,"renderTooltip",function(){var S,E=x.props,C=E.children,A=E.accessibilityLayer,T=ei(C,Ro);if(!T)return null;var P=x.state,k=P.isTooltipActive,I=P.activeCoordinate,$=P.activePayload,B=P.activeLabel,z=P.offset,U=(S=T.props.active)!==null&&S!==void 0?S:k;return R.cloneElement(T,{viewBox:re(re({},z),{},{x:z.left,y:z.top}),active:U,label:B,payload:U?$:[],coordinate:I,accessibilityLayer:A})}),Re(x,"renderBrush",function(S){var E=x.props,C=E.margin,A=E.data,T=x.state,P=T.offset,k=T.dataStartIndex,I=T.dataEndIndex,$=T.updateId;return R.cloneElement(S,{key:S.key||"_recharts-brush",onChange:dg(x.handleBrushChange,S.props.onChange),data:A,x:he(S.props.x)?S.props.x:P.left,y:he(S.props.y)?S.props.y:P.top+P.height+P.brushBottom-(C.bottom||0),width:he(S.props.width)?S.props.width:P.width,startIndex:k,endIndex:I,updateId:"brush-".concat($)})}),Re(x,"renderReferenceElement",function(S,E,C){if(!S)return null;var A=x,T=A.clipPathId,P=x.state,k=P.xAxisMap,I=P.yAxisMap,$=P.offset,B=S.type.defaultProps||{},z=S.props,U=z.xAxisId,M=U===void 0?B.xAxisId:U,F=z.yAxisId,H=F===void 0?B.yAxisId:F;return R.cloneElement(S,{key:S.key||"".concat(E,"-").concat(C),xAxis:k[M],yAxis:I[H],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:T})}),Re(x,"renderActivePoints",function(S){var E=S.item,C=S.activePoint,A=S.basePoint,T=S.childIndex,P=S.isRange,k=[],I=E.props.key,$=E.item.type.defaultProps!==void 0?re(re({},E.item.type.defaultProps),E.item.props):E.item.props,B=$.activeDot,z=$.dataKey,U=re(re({index:T,dataKey:z,cx:C.x,cy:C.y,r:4,fill:hO(E.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Le(B,!1)),i0(B));return k.push(g.renderActiveDot(B,U,"".concat(I,"-activePoint-").concat(T))),A?k.push(g.renderActiveDot(B,re(re({},U),{},{cx:A.x,cy:A.y}),"".concat(I,"-basePoint-").concat(T))):P&&k.push(null),k}),Re(x,"renderGraphicChild",function(S,E,C){var A=x.filterFormatItem(S,E,C);if(!A)return null;var T=x.getTooltipEventType(),P=x.state,k=P.isTooltipActive,I=P.tooltipAxis,$=P.activeTooltipIndex,B=P.activeLabel,z=x.props.children,U=ei(z,Ro),M=A.props,F=M.points,H=M.isRange,X=M.baseLine,K=A.item.type.defaultProps!==void 0?re(re({},A.item.type.defaultProps),A.item.props):A.item.props,Q=K.activeDot,ae=K.hide,le=K.activeBar,ve=K.activeShape,de=!!(!ae&&k&&U&&(Q||le||ve)),Ce={};T!=="axis"&&U&&U.props.trigger==="click"?Ce={onClick:dg(x.handleItemMouseEnter,S.props.onClick)}:T!=="axis"&&(Ce={onMouseLeave:dg(x.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:dg(x.handleItemMouseEnter,S.props.onMouseEnter)});var ie=R.cloneElement(S,re(re({},A.props),Ce));function me(en){return typeof I.dataKey=="function"?I.dataKey(en.payload):null}if(de)if($>=0){var ce,te;if(I.dataKey&&!I.allowDuplicatedCategory){var ye=typeof I.dataKey=="function"?me:"payload.".concat(I.dataKey.toString());ce=LE(F,ye,B),te=H&&X&&LE(X,ye,B)}else ce=F==null?void 0:F[$],te=H&&X&&X[$];if(ve||le){var xe=S.props.activeIndex!==void 0?S.props.activeIndex:$;return[R.cloneElement(S,re(re(re({},A.props),Ce),{},{activeIndex:xe})),null,null]}if(!Xe(ce))return[ie].concat(oh(x.renderActivePoints({item:A,activePoint:ce,basePoint:te,childIndex:$,isRange:H})))}else{var De,Ie=(De=x.getItemByXY(x.state.activeCoordinate))!==null&&De!==void 0?De:{graphicalItem:ie},et=Ie.graphicalItem,vt=et.item,Be=vt===void 0?S:vt,ut=et.childIndex,gt=re(re(re({},A.props),Ce),{},{activeIndex:ut});return[R.cloneElement(Be,gt),null,null]}return H?[ie,null,null]:[ie,null]}),Re(x,"renderCustomized",function(S,E,C){return R.cloneElement(S,re(re({key:"recharts-customized-".concat(C)},x.props),x.state))}),Re(x,"renderMap",{CartesianGrid:{handler:yg,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:yg},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:yg},YAxis:{handler:yg},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:Km("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=Jz(x.triggeredAfterMouseMove,(_=y.throttleDelay)!==null&&_!==void 0?_:1e3/60),x.state={},x}return ZFe(g,v),XFe(g,[{key:"componentDidMount",value:function(){var b,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,_=b.children,x=b.data,S=b.height,E=b.layout,C=ei(_,Ro);if(C){var A=C.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,P=cC(this.state,x,A,T),k=this.state.tooltipTicks[A].coordinate,I=(this.state.offset.top+S)/2,$=E==="horizontal",B=$?{x:k,y:I}:{y:k,x:I},z=this.state.formattedGraphicalItems.find(function(M){var F=M.item;return F.type.name==="Scatter"});z&&(B=re(re({},B),z.props.points[A].tooltipPosition),P=z.props.points[A].tooltipPayload);var U={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:T,activePayload:P,activeCoordinate:B};this.setState(U),this.renderCursor(C),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var x,S;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){BE([ei(b.children,Ro)],[ei(this.props.children,Ro)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=ei(this.props.children,Ro);if(b&&typeof b.props.shared=="boolean"){var _=b.props.shared?"axis":"item";return s.indexOf(_)>=0?_:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var _=this.container,x=_.getBoundingClientRect(),S=qTe(x),E={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},C=x.width/_.offsetWidth||1,A=this.inRange(E.chartX,E.chartY,C);if(!A)return null;var T=this.state,P=T.xAxisMap,k=T.yAxisMap,I=this.getTooltipEventType(),$=t4(this.state,this.props.data,this.props.layout,A);if(I!=="axis"&&P&&k){var B=vc(P).scale,z=vc(k).scale,U=B&&B.invert?B.invert(E.chartX):null,M=z&&z.invert?z.invert(E.chartY):null;return re(re({},E),{},{xValue:U,yValue:M},$)}return $?re(re({},E),$):null}},{key:"inRange",value:function(b,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,E=b/x,C=_/x;if(S==="horizontal"||S==="vertical"){var A=this.state.offset,T=E>=A.left&&E<=A.left+A.width&&C>=A.top&&C<=A.top+A.height;return T?{x:E,y:C}:null}var P=this.state,k=P.angleAxisMap,I=P.radiusAxisMap;if(k&&I){var $=vc(k);return Ij({x:E,y:C},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,_=this.getTooltipEventType(),x=ei(b,Ro),S={};x&&_==="axis"&&(x.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=i0(this.props,this.handleOuterEvent);return re(re({},E),S)}},{key:"addListener",value:function(){x_.on(__,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){x_.removeListener(__,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,_,x){for(var S=this.state.formattedGraphicalItems,E=0,C=S.length;E<C;E++){var A=S[E];if(A.item===b||A.props.key===b.key||_===Pa(A.item.type)&&x===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,_=this.state.offset,x=_.left,S=_.top,E=_.height,C=_.width;return W.createElement("defs",null,W.createElement("clipPath",{id:b},W.createElement("rect",{x,y:S,height:E,width:C})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(_,x){var S=QL(x,2),E=S[0],C=S[1];return re(re({},_),{},Re({},E,C.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(_,x){var S=QL(x,2),E=S[0],C=S[1];return re(re({},_),{},Re({},E,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(b){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(b){var _=this.state,x=_.formattedGraphicalItems,S=_.activeItem;if(x&&x.length)for(var E=0,C=x.length;E<C;E++){var A=x[E],T=A.props,P=A.item,k=P.type.defaultProps!==void 0?re(re({},P.type.defaultProps),P.props):P.props,I=Pa(P.type);if(I==="Bar"){var $=(T.data||[]).find(function(M){return PMe(b,M)});if($)return{graphicalItem:A,payload:$}}else if(I==="RadialBar"){var B=(T.data||[]).find(function(M){return Ij(b,M)});if(B)return{graphicalItem:A,payload:B}}else if(Ww(A,S)||zw(A,S)||hm(A,S)){var z=vje({graphicalItem:A,activeTooltipItem:S,itemData:k.data}),U=k.activeIndex===void 0?z:k.activeIndex;return{graphicalItem:re(re({},A),{},{childIndex:U}),payload:hm(A,S)?k.data[z]:A.props.data[z]}}}return null}},{key:"render",value:function(){var b=this;if(!_M(this))return null;var _=this.props,x=_.children,S=_.className,E=_.width,C=_.height,A=_.style,T=_.compact,P=_.title,k=_.desc,I=ZL(_,VFe),$=Le(I,!1);if(T)return W.createElement(FL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},W.createElement(VE,Lc({},$,{width:E,height:C,title:P,desc:k}),this.renderClipPath(),EM(x,this.renderMap)));if(this.props.accessibilityLayer){var B,z;$.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,$.role=(z=this.props.role)!==null&&z!==void 0?z:"application",$.onKeyDown=function(M){b.accessibilityManager.keyboardEvent(M)},$.onFocus=function(){b.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return W.createElement(FL,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},W.createElement("div",Lc({className:qe("recharts-wrapper",S),style:re({position:"relative",cursor:"default",width:E,height:C},A)},U,{ref:function(F){b.container=F}}),W.createElement(VE,Lc({},$,{width:E,height:C,title:P,desc:k,style:o3e}),this.renderClipPath(),EM(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(R.Component);Re(p,"displayName",n),Re(p,"defaultProps",re({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Re(p,"getDerivedStateFromProps",function(v,g){var y=v.dataKey,b=v.data,_=v.children,x=v.width,S=v.height,E=v.layout,C=v.stackOffset,A=v.margin,T=g.dataStartIndex,P=g.dataEndIndex;if(g.updateId===void 0){var k=n4(v);return re(re(re({},k),{},{updateId:0},d(re(re({props:v},k),{},{updateId:0}),g)),{},{prevDataKey:y,prevData:b,prevWidth:x,prevHeight:S,prevLayout:E,prevStackOffset:C,prevMargin:A,prevChildren:_})}if(y!==g.prevDataKey||b!==g.prevData||x!==g.prevWidth||S!==g.prevHeight||E!==g.prevLayout||C!==g.prevStackOffset||!lf(A,g.prevMargin)){var I=n4(v),$={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},B=re(re({},t4(g,b,E)),{},{updateId:g.updateId+1}),z=re(re(re({},I),$),B);return re(re(re({},z),d(re({props:v},z),g)),{},{prevDataKey:y,prevData:b,prevWidth:x,prevHeight:S,prevLayout:E,prevStackOffset:C,prevMargin:A,prevChildren:_})}if(!BE(_,g.prevChildren)){var U,M,F,H,X=ei(_,Yf),K=X&&(U=(M=X.props)===null||M===void 0?void 0:M.startIndex)!==null&&U!==void 0?U:T,Q=X&&(F=(H=X.props)===null||H===void 0?void 0:H.endIndex)!==null&&F!==void 0?F:P,ae=K!==T||Q!==P,le=!Xe(b),ve=le&&!ae?g.updateId:g.updateId+1;return re(re({updateId:ve},d(re(re({props:v},g),{},{updateId:ve,dataStartIndex:K,dataEndIndex:Q}),g)),{},{prevChildren:_,dataStartIndex:K,dataEndIndex:Q})}return null}),Re(p,"renderActiveDot",function(v,g,y){var b;return R.isValidElement(v)?b=R.cloneElement(v,g):We(v)?b=v(g):b=W.createElement(pO,g),W.createElement(ht,{className:"recharts-active-dot",key:y},b)});var m=R.forwardRef(function(g,y){return W.createElement(p,Lc({},g,{ref:y}))});return m.displayName=p.displayName,m},m3e=w9({chartName:"BarChart",GraphicalChild:uu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Jw},{axisType:"yAxis",AxisComp:Qw}],formatAxisMap:YLe}),v3e=w9({chartName:"PieChart",GraphicalChild:ts,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Vw},{axisType:"radiusAxis",AxisComp:Bw}],formatAxisMap:VRe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const g3e={light:"",dark:".dark"},x9=R.createContext(null);function _9(){const t=R.useContext(x9);if(!t)throw new Error("useChart must be used within a <ChartContainer />");return t}const S9=R.forwardRef(({id:t,className:e,children:n,config:r,...i},o)=>{const a=R.useId(),s=`chart-${t||a.replace(/:/g,"")}`;return D.jsx(x9.Provider,{value:{config:r},children:D.jsxs("div",{"data-chart":s,ref:o,className:Ft("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",e),...i,children:[D.jsx(y3e,{id:s,config:r}),D.jsx(Qz,{children:n})]})})});S9.displayName="Chart";const y3e=({id:t,config:e})=>{const n=Object.entries(e).filter(([r,i])=>i.theme||i.color);return n.length?D.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(g3e).map(([r,i])=>`
${i} [data-chart=${t}] {
${n.map(([o,a])=>{var u;const s=((u=a.theme)==null?void 0:u[r])||a.color;return s?`  --color-${o}: ${s};`:null}).join(`
`)}
}
`).join(`
`)}}):null},i4=Ro,E9=R.forwardRef(({active:t,payload:e,className:n,indicator:r="dot",hideLabel:i=!1,hideIndicator:o=!1,label:a,labelFormatter:s,labelClassName:u,formatter:l,color:c,nameKey:f,labelKey:h},d)=>{const{config:p}=_9(),m=R.useMemo(()=>{var x;if(i||!(e!=null&&e.length))return null;const[g]=e,y=`${h||g.dataKey||g.name||"value"}`,b=fC(p,g,y),_=!h&&typeof a=="string"?((x=p[a])==null?void 0:x.label)||a:b==null?void 0:b.label;return s?D.jsx("div",{className:Ft("font-medium",u),children:s(_,e)}):_?D.jsx("div",{className:Ft("font-medium",u),children:_}):null},[a,s,e,i,u,p,h]);if(!t||!(e!=null&&e.length))return null;const v=e.length===1&&r!=="dot";return D.jsxs("div",{ref:d,className:Ft("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[v?null:m,D.jsx("div",{className:"grid gap-1.5",children:e.map((g,y)=>{const b=`${f||g.name||g.dataKey||"value"}`,_=fC(p,g,b),x=c||g.payload.fill||g.color;return D.jsx("div",{className:Ft("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:l&&(g==null?void 0:g.value)!==void 0&&g.name?l(g.value,g.name,g,y,g.payload):D.jsxs(D.Fragment,{children:[_!=null&&_.icon?D.jsx(_.icon,{}):!o&&D.jsx("div",{className:Ft("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":v&&r==="dashed"}),style:{"--color-bg":x,"--color-border":x}}),D.jsxs("div",{className:Ft("flex flex-1 justify-between leading-none",v?"items-end":"items-center"),children:[D.jsxs("div",{className:"grid gap-1.5",children:[v?m:null,D.jsx("span",{className:"text-muted-foreground",children:(_==null?void 0:_.label)||g.name})]}),g.value&&D.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:g.value.toLocaleString()})]})]})},g.dataKey)})})]})});E9.displayName="ChartTooltip";const b3e=R.forwardRef(({className:t,hideIcon:e=!1,payload:n,verticalAlign:r="bottom",nameKey:i},o)=>{const{config:a}=_9();return n!=null&&n.length?D.jsx("div",{ref:o,className:Ft("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",t),children:n.map(s=>{const u=`${i||s.dataKey||"value"}`,l=fC(a,s,u);return D.jsxs("div",{className:Ft("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[l!=null&&l.icon&&!e?D.jsx(l.icon,{}):D.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:s.color}}),l==null?void 0:l.label]},s.value)})}):null});b3e.displayName="ChartLegend";function fC(t,e,n){if(typeof e!="object"||e===null)return;const r="payload"in e&&typeof e.payload=="object"&&e.payload!==null?e.payload:void 0;let i=n;return n in e&&typeof e[n]=="string"?i=e[n]:r&&n in r&&typeof r[n]=="string"&&(i=r[n]),i in t?t[i]:t[n]}const w3e={happy:"hsl(142 71% 45%)",neutral:"hsl(220 9% 46%)",sad:"hsl(220 70% 50%)",angry:"hsl(0 84% 60%)",surprised:"hsl(38 92% 50%)",fearful:"hsl(262 83% 58%)",disgusted:"hsl(172 66% 50%)"},x3e=({onBack:t})=>{const{getProgress:e,getEmotionLogs:n,getProfile:r}=hT(),{t:i,language:o}=bo(),a=Bb(o),[s,u]=R.useState([]),[l,c]=R.useState([]),[f,h]=R.useState(null),[d,p]=R.useState(!0),m={happy:`${i("emotion.happy")} `,neutral:`${i("emotion.neutral")} `,sad:`${i("emotion.sad")} `,angry:`${i("emotion.angry")} `,surprised:`${i("emotion.surprised")} `,fearful:`${i("emotion.fearful")} `,disgusted:`${i("emotion.disgusted")} `};R.useEffect(()=>{(async()=>{p(!0);const[E,C,A]=await Promise.all([e(),n(),r()]);E.data&&u(E.data),C.data&&c(C.data),A.data&&h(A.data),p(!1)})()},[e,n,r]);const v=a.map(S=>{const E=s.filter(A=>A.level_number===S.id),C=E.length>0?Math.max(...E.map(A=>A.score)):0;return{name:`${o==="ar"?"":"S"}${S.id}`,fullName:S.title,score:C,required:S.requiredScore}}),g=l.reduce((S,E)=>(S[E.emotion]=(S[E.emotion]||0)+1,S),{}),y=Object.entries(g).map(([S,E])=>({name:m[S]||S,value:E,color:w3e[S]||"hsl(220 9% 46%)"})),b=[...new Set(s.filter(S=>S.is_completed).map(S=>S.level_number))].length,_=s.reduce((S,E)=>S+(E.time_spent_seconds||0),0),x={score:{label:i("dash.chartScore"),color:"hsl(var(--primary))"},required:{label:i("dash.chartRequired"),color:"hsl(var(--muted))"}};return d?D.jsx("div",{className:"min-h-screen flex items-center justify-center",children:D.jsxs("div",{className:"text-center",children:[D.jsx("div",{className:"text-6xl animate-bounce mb-4",children:""}),D.jsx("p",{className:"text-xl",children:i("dash.loading")})]})}):D.jsx("div",{className:"min-h-screen p-4",children:D.jsxs("div",{className:"max-w-6xl mx-auto",children:[D.jsxs("div",{className:"flex items-center justify-between mb-8",children:[D.jsx(jn,{variant:"ghost",onClick:t,className:"text-lg",children:i("dash.backToGame")}),D.jsx("h1",{className:"text-3xl font-bold text-gradient",children:i("dash.title")})]}),f&&D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:D.jsx(ur,{className:"mb-8 border-2 gradient-primary text-primary-foreground",children:D.jsx(Ir,{className:"p-6",children:D.jsxs("div",{className:"flex items-center gap-6",children:[D.jsx("div",{className:"text-6xl",children:""}),D.jsxs("div",{children:[D.jsx("h2",{className:"text-2xl font-bold",children:f.username}),D.jsxs("p",{className:"text-lg opacity-90",children:[i("dash.currentLevel")," ",f.current_level," ",i("dash.of10")]})]})]})})})}),D.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[{icon:"",value:b,label:i("dash.completedStages"),color:"text-primary",delay:.1},{icon:"",value:s.length,label:i("dash.attempts"),color:"text-secondary",delay:.2},{icon:"",value:Math.round(_/60),label:i("dash.minutesPlayed"),color:"text-accent",delay:.3},{icon:"",value:l.length,label:i("dash.emotionAnalysis"),color:"text-success",delay:.4}].map((S,E)=>D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:S.delay},children:D.jsx(ur,{className:"text-center card-hover",children:D.jsxs(Ir,{className:"p-6",children:[D.jsx("div",{className:"text-4xl mb-2",children:S.icon}),D.jsx("p",{className:`text-3xl font-bold ${S.color}`,children:S.value}),D.jsx("p",{className:"text-muted-foreground",children:S.label})]})})},E))}),D.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:D.jsxs(ur,{children:[D.jsx(Qc,{children:D.jsxs(Zc,{className:"flex items-center gap-2",children:[D.jsx("span",{children:""}),i("dash.stageResults")]})}),D.jsx(Ir,{children:D.jsx(S9,{config:x,className:"h-[300px]",children:D.jsxs(m3e,{data:v,children:[D.jsx(Jw,{dataKey:"name"}),D.jsx(Qw,{}),D.jsx(i4,{content:D.jsx(E9,{})}),D.jsx(uu,{dataKey:"score",fill:"hsl(var(--primary))",radius:4}),D.jsx(uu,{dataKey:"required",fill:"hsl(var(--muted))",radius:4})]})})})]})}),D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:D.jsxs(ur,{children:[D.jsx(Qc,{children:D.jsxs(Zc,{className:"flex items-center gap-2",children:[D.jsx("span",{children:""}),i("dash.emotionDist")]})}),D.jsx(Ir,{children:y.length>0?D.jsx("div",{className:"h-[300px]",children:D.jsx(Qz,{width:"100%",height:"100%",children:D.jsxs(v3e,{children:[D.jsx(ts,{data:y,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:S,percent:E})=>`${S} ${(E*100).toFixed(0)}%`,children:y.map((S,E)=>D.jsx(Cw,{fill:S.color},E))}),D.jsx(i4,{})]})})}):D.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:D.jsx("p",{children:i("dash.noEmotionData")})})})]})})]}),D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"mt-6",children:D.jsxs(ur,{children:[D.jsx(Qc,{children:D.jsxs(Zc,{className:"flex items-center gap-2",children:[D.jsx("span",{children:""}),i("dash.activityLog")]})}),D.jsx(Ir,{children:s.length>0?D.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:s.slice(0,20).map((S,E)=>{const C=a.find(A=>A.id===S.level_number);return D.jsxs(tt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:E*.05},className:`flex items-center gap-4 p-4 rounded-xl ${S.is_completed?"bg-success/10":"bg-muted/50"}`,children:[D.jsx("span",{className:"text-3xl",children:(C==null?void 0:C.icon)||""}),D.jsxs("div",{className:"flex-1",children:[D.jsx("p",{className:"font-bold",children:(C==null?void 0:C.title)||`${i("game.stage")} ${S.level_number}`}),D.jsxs("p",{className:"text-sm text-muted-foreground",children:[wV(S.game_type,o),"  ",i("dash.scoreLabel")," ",S.score]})]}),D.jsx("span",{className:"text-2xl",children:S.is_completed?"":""})]},S.id)})}):D.jsx("div",{className:"text-center py-8 text-muted-foreground",children:D.jsx("p",{children:i("dash.noActivity")})})})]})})]})})},_3e=()=>{const{user:t,loading:e,signOut:n}=oT(),{getProfile:r,updateCurrentLevel:i}=hT(),{t:o,language:a,toggleLanguage:s}=bo(),[u,l]=R.useState(1),[c,f]=R.useState([]),[h,d]=R.useState(null),[p,m]=R.useState("stages"),v=Bb(a);R.useEffect(()=>{jse()},[]),R.useEffect(()=>{(async()=>{if(t){const{data:x}=await r();x&&l(x.current_level||1)}})()},[t,r]);const g=R.useCallback(_=>{d(_),m("game")},[]),y=R.useCallback(async _=>{if(h){const x=v.find(S=>S.id===h);if(x&&_>=x.requiredScore&&(f(S=>[...new Set([...S,h])]),h>=u&&h<v.length)){const S=h+1;l(S),await i(S)}}setTimeout(()=>{m("stages"),d(null)},2e3)},[h,u,i,v]),b=R.useCallback(()=>{m("stages"),d(null)},[]);return e?D.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:D.jsxs(tt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[D.jsx("div",{className:"text-7xl mb-4 animate-float",children:""}),D.jsx("h1",{className:"text-3xl font-bold text-gradient mb-2",children:o("app.title")}),D.jsx("p",{className:"text-xl text-muted-foreground",children:o("app.loading")})]})}):t?D.jsxs("div",{className:"min-h-screen bg-background",children:[D.jsx("header",{className:"sticky top-0 z-30 bg-background/95 backdrop-blur-sm border-b",children:D.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsx("span",{className:"text-3xl",children:""}),D.jsx("h1",{className:"text-xl font-bold",children:o("app.title")})]}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx(jn,{variant:"ghost",size:"sm",onClick:s,className:"font-bold",children:a==="ar"?"EN":""}),D.jsx(jn,{variant:p==="dashboard"?"default":"ghost",size:"sm",onClick:()=>m(p==="dashboard"?"stages":"dashboard"),children:o("app.reports")}),D.jsx(jn,{variant:"ghost",size:"sm",onClick:n,children:o("app.logout")})]})]})}),D.jsx("main",{className:"py-6",children:D.jsxs(mh,{mode:"wait",children:[p==="stages"&&D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"px-4",children:D.jsx(Kse,{currentLevel:u,completedLevels:c,onSelectStage:g})},"stages"),p==="game"&&h&&D.jsx(tt.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:D.jsx(Ave,{stageId:h,onBack:b,onComplete:y})},"game"),p==="dashboard"&&D.jsx(tt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:D.jsx(x3e,{onBack:()=>m("stages")})},"dashboard")]})})]}):D.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:D.jsx(zse,{})})},S3e=()=>D.jsx(Use,{children:D.jsx(Boe,{children:D.jsx(_3e,{})})}),E3e=()=>{const t=iU();return R.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),D.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:D.jsxs("div",{className:"text-center",children:[D.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),D.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),D.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},C3e=new VJ,A3e=()=>D.jsx(zJ,{client:C3e,children:D.jsxs(yJ,{children:[D.jsx(tX,{}),D.jsx(NX,{}),D.jsx(OQ,{children:D.jsxs(AQ,{children:[D.jsx(kS,{path:"/",element:D.jsx(S3e,{})}),D.jsx(kS,{path:"*",element:D.jsx(E3e,{})})]})})]})});T3(document.getElementById("root")).render(D.jsx(A3e,{}))});export default T3e();
