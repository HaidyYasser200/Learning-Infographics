var Qk=t=>{throw TypeError(t)};var _q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Kx=(t,e,n)=>e.has(t)||Qk("Cannot "+n);var oe=(t,e,n)=>(Kx(t,e,"read from private field"),n?n.call(t):e.get(t)),lt=(t,e,n)=>e.has(t)?Qk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),We=(t,e,n,r)=>(Kx(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),pr=(t,e,n)=>(Kx(t,e,"access private method"),n);var Dm=(t,e,n,r)=>({set _(i){We(t,e,i,n)},get _(){return oe(t,e,r)}});var W5e=_q((tVe,iq)=>{function Sq(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SF={exports:{}},Db={},EF={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv=Symbol.for("react.element"),Eq=Symbol.for("react.portal"),Cq=Symbol.for("react.fragment"),Aq=Symbol.for("react.strict_mode"),Tq=Symbol.for("react.profiler"),Pq=Symbol.for("react.provider"),Oq=Symbol.for("react.context"),kq=Symbol.for("react.forward_ref"),Rq=Symbol.for("react.suspense"),Iq=Symbol.for("react.memo"),Dq=Symbol.for("react.lazy"),Zk=Symbol.iterator;function Nq(t){return t===null||typeof t!="object"?null:(t=Zk&&t[Zk]||t["@@iterator"],typeof t=="function"?t:null)}var CF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AF=Object.assign,TF={};function Eh(t,e,n){this.props=t,this.context=e,this.refs=TF,this.updater=n||CF}Eh.prototype.isReactComponent={};Eh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Eh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function PF(){}PF.prototype=Eh.prototype;function tA(t,e,n){this.props=t,this.context=e,this.refs=TF,this.updater=n||CF}var nA=tA.prototype=new PF;nA.constructor=tA;AF(nA,Eh.prototype);nA.isPureReactComponent=!0;var eR=Array.isArray,OF=Object.prototype.hasOwnProperty,rA={current:null},kF={key:!0,ref:!0,__self:!0,__source:!0};function RF(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)OF.call(e,r)&&!kF.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Hv,type:t,key:o,ref:a,props:i,_owner:rA.current}}function Mq(t,e){return{$$typeof:Hv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function iA(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hv}function $q(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var tR=/\/+/g;function Xx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$q(""+t.key):e.toString(36)}function Hg(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Hv:case Eq:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Xx(a,0):r,eR(i)?(n="",t!=null&&(n=t.replace(tR,"$&/")+"/"),Hg(i,e,n,"",function(l){return l})):i!=null&&(iA(i)&&(i=Mq(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(tR,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",eR(t))for(var s=0;s<t.length;s++){o=t[s];var u=r+Xx(o,s);a+=Hg(o,e,n,u,i)}else if(u=Nq(t),typeof u=="function")for(t=u.call(t),s=0;!(o=t.next()).done;)o=o.value,u=r+Xx(o,s++),a+=Hg(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Mm(t,e,n){if(t==null)return t;var r=[],i=0;return Hg(t,r,"","",function(o){return e.call(n,o,i++)}),r}function jq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ur={current:null},Gg={transition:null},Lq={ReactCurrentDispatcher:Ur,ReactCurrentBatchConfig:Gg,ReactCurrentOwner:rA};function IF(){throw Error("act(...) is not supported in production builds of React.")}et.Children={map:Mm,forEach:function(t,e,n){Mm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mm(t,function(){e++}),e},toArray:function(t){return Mm(t,function(e){return e})||[]},only:function(t){if(!iA(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};et.Component=Eh;et.Fragment=Cq;et.Profiler=Tq;et.PureComponent=tA;et.StrictMode=Aq;et.Suspense=Rq;et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lq;et.act=IF;et.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=AF({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=rA.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(u in e)OF.call(e,u)&&!kF.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&s!==void 0?s[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Hv,type:t.type,key:i,ref:o,props:r,_owner:a}};et.createContext=function(t){return t={$$typeof:Oq,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pq,_context:t},t.Consumer=t};et.createElement=RF;et.createFactory=function(t){var e=RF.bind(null,t);return e.type=t,e};et.createRef=function(){return{current:null}};et.forwardRef=function(t){return{$$typeof:kq,render:t}};et.isValidElement=iA;et.lazy=function(t){return{$$typeof:Dq,_payload:{_status:-1,_result:t},_init:jq}};et.memo=function(t,e){return{$$typeof:Iq,type:t,compare:e===void 0?null:e}};et.startTransition=function(t){var e=Gg.transition;Gg.transition={};try{t()}finally{Gg.transition=e}};et.unstable_act=IF;et.useCallback=function(t,e){return Ur.current.useCallback(t,e)};et.useContext=function(t){return Ur.current.useContext(t)};et.useDebugValue=function(){};et.useDeferredValue=function(t){return Ur.current.useDeferredValue(t)};et.useEffect=function(t,e){return Ur.current.useEffect(t,e)};et.useId=function(){return Ur.current.useId()};et.useImperativeHandle=function(t,e,n){return Ur.current.useImperativeHandle(t,e,n)};et.useInsertionEffect=function(t,e){return Ur.current.useInsertionEffect(t,e)};et.useLayoutEffect=function(t,e){return Ur.current.useLayoutEffect(t,e)};et.useMemo=function(t,e){return Ur.current.useMemo(t,e)};et.useReducer=function(t,e,n){return Ur.current.useReducer(t,e,n)};et.useRef=function(t){return Ur.current.useRef(t)};et.useState=function(t){return Ur.current.useState(t)};et.useSyncExternalStore=function(t,e,n){return Ur.current.useSyncExternalStore(t,e,n)};et.useTransition=function(){return Ur.current.useTransition()};et.version="18.3.1";EF.exports=et;var k=EF.exports;const V=wt(k),DF=Sq({__proto__:null,default:V},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fq=k,Bq=Symbol.for("react.element"),Uq=Symbol.for("react.fragment"),Vq=Object.prototype.hasOwnProperty,Wq=Fq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zq={key:!0,ref:!0,__self:!0,__source:!0};function NF(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Vq.call(e,r)&&!zq.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Bq,type:t,key:o,ref:a,props:i,_owner:Wq.current}}Db.Fragment=Uq;Db.jsx=NF;Db.jsxs=NF;SF.exports=Db;var N=SF.exports,MF={exports:{}},Pi={},$F={exports:{}},jF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,L){var H=$.length;$.push(L);e:for(;0<H;){var X=H-1>>>1,q=$[X];if(0<i(q,L))$[X]=L,$[H]=q,H=X;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var L=$[0],H=$.pop();if(H!==L){$[0]=H;e:for(var X=0,q=$.length,J=q>>>1;X<J;){var ae=2*(X+1)-1,fe=$[ae],he=ae+1,de=$[he];if(0>i(fe,H))he<q&&0>i(de,fe)?($[X]=de,$[he]=H,X=he):($[X]=fe,$[ae]=H,X=ae);else if(he<q&&0>i(de,H))$[X]=de,$[he]=H,X=he;else break e}}return L}function i($,L){var H=$.sortIndex-L.sortIndex;return H!==0?H:$.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var u=[],l=[],c=1,f=null,h=3,d=!1,p=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var L=n(l);L!==null;){if(L.callback===null)r(l);else if(L.startTime<=$)r(l),L.sortIndex=L.expirationTime,e(u,L);else break;L=n(l)}}function _($){if(v=!1,b($),!p)if(n(u)!==null)p=!0,z(x);else{var L=n(l);L!==null&&U(_,L.startTime-$)}}function x($,L){p=!1,v&&(v=!1,g(C),C=-1),d=!0;var H=h;try{for(b(L),f=n(u);f!==null&&(!(f.expirationTime>L)||$&&!P());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var q=X(f.expirationTime<=L);L=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(u)&&r(u),b(L)}else r(u);f=n(u)}if(f!==null)var J=!0;else{var ae=n(l);ae!==null&&U(_,ae.startTime-L),J=!1}return J}finally{f=null,h=H,d=!1}}var S=!1,E=null,C=-1,A=5,T=-1;function P(){return!(t.unstable_now()-T<A)}function R(){if(E!==null){var $=t.unstable_now();T=$;var L=!0;try{L=E(!0,$)}finally{L?I():(S=!1,E=null)}}else S=!1}var I;if(typeof y=="function")I=function(){y(R)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,B=M.port2;M.port1.onmessage=R,I=function(){B.postMessage(null)}}else I=function(){m(R,0)};function z($){E=$,S||(S=!0,I())}function U($,L){C=m(function(){$(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,z(x))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var H=h;h=L;try{return $()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,L){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var H=h;h=$;try{return L()}finally{h=H}},t.unstable_scheduleCallback=function($,L,H){var X=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,$){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=H+q,$={id:c++,callback:L,priorityLevel:$,startTime:H,expirationTime:q,sortIndex:-1},H>X?($.sortIndex=H,e(l,$),n(u)===null&&$===n(l)&&(v?(g(C),C=-1):v=!0,U(_,H-X))):($.sortIndex=q,e(u,$),p||d||(p=!0,z(x))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var L=h;return function(){var H=h;h=L;try{return $.apply(this,arguments)}finally{h=H}}}})(jF);$F.exports=jF;var Hq=$F.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gq=k,Ti=Hq;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var LF=new Set,yp={};function Yl(t,e){Lf(t,e),Lf(t+"Capture",e)}function Lf(t,e){for(yp[t]=e,t=0;t<e.length;t++)LF.add(e[t])}var Xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uS=Object.prototype.hasOwnProperty,qq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nR={},rR={};function Kq(t){return uS.call(rR,t)?!0:uS.call(nR,t)?!1:qq.test(t)?rR[t]=!0:(nR[t]=!0,!1)}function Xq(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yq(t,e,n,r){if(e===null||typeof e>"u"||Xq(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vr(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cr[t]=new Vr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cr[e]=new Vr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cr[t]=new Vr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cr[t]=new Vr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cr[t]=new Vr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cr[t]=new Vr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cr[t]=new Vr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cr[t]=new Vr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cr[t]=new Vr(t,5,!1,t.toLowerCase(),null,!1,!1)});var oA=/[\-:]([a-z])/g;function aA(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(oA,aA);cr[e]=new Vr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(oA,aA);cr[e]=new Vr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(oA,aA);cr[e]=new Vr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cr[t]=new Vr(t,1,!1,t.toLowerCase(),null,!1,!1)});cr.xlinkHref=new Vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cr[t]=new Vr(t,1,!1,t.toLowerCase(),null,!0,!0)});function sA(t,e,n,r){var i=cr.hasOwnProperty(e)?cr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yq(e,n,i,r)&&(n=null),r||i===null?Kq(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ss=Gq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$m=Symbol.for("react.element"),Dc=Symbol.for("react.portal"),Nc=Symbol.for("react.fragment"),uA=Symbol.for("react.strict_mode"),lS=Symbol.for("react.profiler"),FF=Symbol.for("react.provider"),BF=Symbol.for("react.context"),lA=Symbol.for("react.forward_ref"),cS=Symbol.for("react.suspense"),fS=Symbol.for("react.suspense_list"),cA=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),UF=Symbol.for("react.offscreen"),iR=Symbol.iterator;function sd(t){return t===null||typeof t!="object"?null:(t=iR&&t[iR]||t["@@iterator"],typeof t=="function"?t:null)}var nn=Object.assign,Yx;function Dd(t){if(Yx===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yx=e&&e[1]||""}return`
`+Yx+t}var Jx=!1;function Qx(t,e){if(!t||Jx)return"";Jx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=s);break}}}finally{Jx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dd(t):""}function Jq(t){switch(t.tag){case 5:return Dd(t.type);case 16:return Dd("Lazy");case 13:return Dd("Suspense");case 19:return Dd("SuspenseList");case 0:case 2:case 15:return t=Qx(t.type,!1),t;case 11:return t=Qx(t.type.render,!1),t;case 1:return t=Qx(t.type,!0),t;default:return""}}function hS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nc:return"Fragment";case Dc:return"Portal";case lS:return"Profiler";case uA:return"StrictMode";case cS:return"Suspense";case fS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BF:return(t.displayName||"Context")+".Consumer";case FF:return(t._context.displayName||"Context")+".Provider";case lA:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cA:return e=t.displayName||null,e!==null?e:hS(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return hS(t(e))}catch{}}return null}function Qq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hS(e);case 8:return e===uA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function du(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zq(t){var e=VF(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jm(t){t._valueTracker||(t._valueTracker=Zq(t))}function WF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=VF(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dS(t,e){var n=e.checked;return nn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function oR(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=du(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zF(t,e){e=e.checked,e!=null&&sA(t,"checked",e,!1)}function pS(t,e){zF(t,e);var n=du(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vS(t,e.type,n):e.hasOwnProperty("defaultValue")&&vS(t,e.type,du(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function aR(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vS(t,e,n){(e!=="number"||vy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nd=Array.isArray;function tf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+du(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function mS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return nn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sR(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Nd(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:du(n)}}function HF(t,e){var n=du(e.value),r=du(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function uR(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function GF(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?GF(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lm,qF=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lm=Lm||document.createElement("div"),Lm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ud={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eK=["Webkit","ms","Moz","O"];Object.keys(Ud).forEach(function(t){eK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ud[e]=Ud[t]})});function KF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ud.hasOwnProperty(t)&&Ud[t]?(""+e).trim():e+"px"}function XF(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=KF(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tK=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yS(t,e){if(e){if(tK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function bS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wS=null;function fA(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xS=null,nf=null,rf=null;function lR(t){if(t=Kv(t)){if(typeof xS!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Lb(e),xS(t.stateNode,t.type,e))}}function YF(t){nf?rf?rf.push(t):rf=[t]:nf=t}function JF(){if(nf){var t=nf,e=rf;if(rf=nf=null,lR(t),e)for(t=0;t<e.length;t++)lR(e[t])}}function QF(t,e){return t(e)}function ZF(){}var Zx=!1;function e3(t,e,n){if(Zx)return t(e,n);Zx=!0;try{return QF(t,e,n)}finally{Zx=!1,(nf!==null||rf!==null)&&(ZF(),JF())}}function wp(t,e){var n=t.stateNode;if(n===null)return null;var r=Lb(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var _S=!1;if(Xa)try{var ud={};Object.defineProperty(ud,"passive",{get:function(){_S=!0}}),window.addEventListener("test",ud,ud),window.removeEventListener("test",ud,ud)}catch{_S=!1}function nK(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Vd=!1,my=null,gy=!1,SS=null,rK={onError:function(t){Vd=!0,my=t}};function iK(t,e,n,r,i,o,a,s,u){Vd=!1,my=null,nK.apply(rK,arguments)}function oK(t,e,n,r,i,o,a,s,u){if(iK.apply(this,arguments),Vd){if(Vd){var l=my;Vd=!1,my=null}else throw Error(le(198));gy||(gy=!0,SS=l)}}function Jl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function t3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cR(t){if(Jl(t)!==t)throw Error(le(188))}function aK(t){var e=t.alternate;if(!e){if(e=Jl(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return cR(i),t;if(o===r)return cR(i),e;o=o.sibling}throw Error(le(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function n3(t){return t=aK(t),t!==null?r3(t):null}function r3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=r3(t);if(e!==null)return e;t=t.sibling}return null}var i3=Ti.unstable_scheduleCallback,fR=Ti.unstable_cancelCallback,sK=Ti.unstable_shouldYield,uK=Ti.unstable_requestPaint,vn=Ti.unstable_now,lK=Ti.unstable_getCurrentPriorityLevel,hA=Ti.unstable_ImmediatePriority,o3=Ti.unstable_UserBlockingPriority,yy=Ti.unstable_NormalPriority,cK=Ti.unstable_LowPriority,a3=Ti.unstable_IdlePriority,Nb=null,oa=null;function fK(t){if(oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(Nb,t,void 0,(t.current.flags&128)===128)}catch{}}var Co=Math.clz32?Math.clz32:pK,hK=Math.log,dK=Math.LN2;function pK(t){return t>>>=0,t===0?32:31-(hK(t)/dK|0)|0}var Fm=64,Bm=4194304;function Md(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function by(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Md(s):(o&=a,o!==0&&(r=Md(o)))}else a=n&~i,a!==0?r=Md(a):o!==0&&(r=Md(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Co(e),i=1<<n,r|=t[n],e&=~i;return r}function vK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Co(o),s=1<<a,u=i[a];u===-1?(!(s&n)||s&r)&&(i[a]=vK(s,e)):u<=e&&(t.expiredLanes|=s),o&=~s}}function ES(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function s3(){var t=Fm;return Fm<<=1,!(Fm&4194240)&&(Fm=64),t}function e1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Co(e),t[e]=n}function gK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Co(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function dA(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Co(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var bt=0;function u3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var l3,pA,c3,f3,h3,CS=!1,Um=[],Zs=null,eu=null,tu=null,xp=new Map,_p=new Map,Ls=[],yK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hR(t,e){switch(t){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":eu=null;break;case"mouseover":case"mouseout":tu=null;break;case"pointerover":case"pointerout":xp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(e.pointerId)}}function ld(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Kv(e),e!==null&&pA(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function bK(t,e,n,r,i){switch(e){case"focusin":return Zs=ld(Zs,t,e,n,r,i),!0;case"dragenter":return eu=ld(eu,t,e,n,r,i),!0;case"mouseover":return tu=ld(tu,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return xp.set(o,ld(xp.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,_p.set(o,ld(_p.get(o)||null,t,e,n,r,i)),!0}return!1}function d3(t){var e=ll(t.target);if(e!==null){var n=Jl(e);if(n!==null){if(e=n.tag,e===13){if(e=t3(n),e!==null){t.blockedOn=e,h3(t.priority,function(){c3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=AS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wS=r,n.target.dispatchEvent(r),wS=null}else return e=Kv(n),e!==null&&pA(e),t.blockedOn=n,!1;e.shift()}return!0}function dR(t,e,n){qg(t)&&n.delete(e)}function wK(){CS=!1,Zs!==null&&qg(Zs)&&(Zs=null),eu!==null&&qg(eu)&&(eu=null),tu!==null&&qg(tu)&&(tu=null),xp.forEach(dR),_p.forEach(dR)}function cd(t,e){t.blockedOn===e&&(t.blockedOn=null,CS||(CS=!0,Ti.unstable_scheduleCallback(Ti.unstable_NormalPriority,wK)))}function Sp(t){function e(i){return cd(i,t)}if(0<Um.length){cd(Um[0],t);for(var n=1;n<Um.length;n++){var r=Um[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zs!==null&&cd(Zs,t),eu!==null&&cd(eu,t),tu!==null&&cd(tu,t),xp.forEach(e),_p.forEach(e),n=0;n<Ls.length;n++)r=Ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)d3(n),n.blockedOn===null&&Ls.shift()}var of=ss.ReactCurrentBatchConfig,wy=!0;function xK(t,e,n,r){var i=bt,o=of.transition;of.transition=null;try{bt=1,vA(t,e,n,r)}finally{bt=i,of.transition=o}}function _K(t,e,n,r){var i=bt,o=of.transition;of.transition=null;try{bt=4,vA(t,e,n,r)}finally{bt=i,of.transition=o}}function vA(t,e,n,r){if(wy){var i=AS(t,e,n,r);if(i===null)c1(t,e,r,xy,n),hR(t,r);else if(bK(i,t,e,n,r))r.stopPropagation();else if(hR(t,r),e&4&&-1<yK.indexOf(t)){for(;i!==null;){var o=Kv(i);if(o!==null&&l3(o),o=AS(t,e,n,r),o===null&&c1(t,e,r,xy,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else c1(t,e,r,null,n)}}var xy=null;function AS(t,e,n,r){if(xy=null,t=fA(r),t=ll(t),t!==null)if(e=Jl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=t3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xy=t,null}function p3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lK()){case hA:return 1;case o3:return 4;case yy:case cK:return 16;case a3:return 536870912;default:return 16}default:return 16}}var Gs=null,mA=null,Kg=null;function v3(){if(Kg)return Kg;var t,e=mA,n=e.length,r,i="value"in Gs?Gs.value:Gs.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Kg=i.slice(t,1<r?1-r:void 0)}function Xg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vm(){return!0}function pR(){return!1}function Oi(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Vm:pR,this.isPropagationStopped=pR,this}return nn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vm)},persist:function(){},isPersistent:Vm}),e}var Ch={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gA=Oi(Ch),qv=nn({},Ch,{view:0,detail:0}),SK=Oi(qv),t1,n1,fd,Mb=nn({},qv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fd&&(fd&&t.type==="mousemove"?(t1=t.screenX-fd.screenX,n1=t.screenY-fd.screenY):n1=t1=0,fd=t),t1)},movementY:function(t){return"movementY"in t?t.movementY:n1}}),vR=Oi(Mb),EK=nn({},Mb,{dataTransfer:0}),CK=Oi(EK),AK=nn({},qv,{relatedTarget:0}),r1=Oi(AK),TK=nn({},Ch,{animationName:0,elapsedTime:0,pseudoElement:0}),PK=Oi(TK),OK=nn({},Ch,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kK=Oi(OK),RK=nn({},Ch,{data:0}),mR=Oi(RK),IK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MK(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NK[t])?!!e[t]:!1}function yA(){return MK}var $K=nn({},qv,{key:function(t){if(t.key){var e=IK[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DK[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yA,charCode:function(t){return t.type==="keypress"?Xg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jK=Oi($K),LK=nn({},Mb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gR=Oi(LK),FK=nn({},qv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yA}),BK=Oi(FK),UK=nn({},Ch,{propertyName:0,elapsedTime:0,pseudoElement:0}),VK=Oi(UK),WK=nn({},Mb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zK=Oi(WK),HK=[9,13,27,32],bA=Xa&&"CompositionEvent"in window,Wd=null;Xa&&"documentMode"in document&&(Wd=document.documentMode);var GK=Xa&&"TextEvent"in window&&!Wd,m3=Xa&&(!bA||Wd&&8<Wd&&11>=Wd),yR=" ",bR=!1;function g3(t,e){switch(t){case"keyup":return HK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mc=!1;function qK(t,e){switch(t){case"compositionend":return y3(e);case"keypress":return e.which!==32?null:(bR=!0,yR);case"textInput":return t=e.data,t===yR&&bR?null:t;default:return null}}function KK(t,e){if(Mc)return t==="compositionend"||!bA&&g3(t,e)?(t=v3(),Kg=mA=Gs=null,Mc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m3&&e.locale!=="ko"?null:e.data;default:return null}}var XK={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wR(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XK[t.type]:e==="textarea"}function b3(t,e,n,r){YF(r),e=_y(e,"onChange"),0<e.length&&(n=new gA("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zd=null,Ep=null;function YK(t){k3(t,0)}function $b(t){var e=Lc(t);if(WF(e))return t}function JK(t,e){if(t==="change")return e}var w3=!1;if(Xa){var i1;if(Xa){var o1="oninput"in document;if(!o1){var xR=document.createElement("div");xR.setAttribute("oninput","return;"),o1=typeof xR.oninput=="function"}i1=o1}else i1=!1;w3=i1&&(!document.documentMode||9<document.documentMode)}function _R(){zd&&(zd.detachEvent("onpropertychange",x3),Ep=zd=null)}function x3(t){if(t.propertyName==="value"&&$b(Ep)){var e=[];b3(e,Ep,t,fA(t)),e3(YK,e)}}function QK(t,e,n){t==="focusin"?(_R(),zd=e,Ep=n,zd.attachEvent("onpropertychange",x3)):t==="focusout"&&_R()}function ZK(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $b(Ep)}function e7(t,e){if(t==="click")return $b(e)}function t7(t,e){if(t==="input"||t==="change")return $b(e)}function n7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Po=typeof Object.is=="function"?Object.is:n7;function Cp(t,e){if(Po(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!uS.call(e,i)||!Po(t[i],e[i]))return!1}return!0}function SR(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ER(t,e){var n=SR(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=SR(n)}}function _3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function S3(){for(var t=window,e=vy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vy(t.document)}return e}function wA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function r7(t){var e=S3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_3(n.ownerDocument.documentElement,n)){if(r!==null&&wA(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ER(n,o);var a=ER(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i7=Xa&&"documentMode"in document&&11>=document.documentMode,$c=null,TS=null,Hd=null,PS=!1;function CR(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;PS||$c==null||$c!==vy(r)||(r=$c,"selectionStart"in r&&wA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Hd&&Cp(Hd,r)||(Hd=r,r=_y(TS,"onSelect"),0<r.length&&(e=new gA("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$c)))}function Wm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var jc={animationend:Wm("Animation","AnimationEnd"),animationiteration:Wm("Animation","AnimationIteration"),animationstart:Wm("Animation","AnimationStart"),transitionend:Wm("Transition","TransitionEnd")},a1={},E3={};Xa&&(E3=document.createElement("div").style,"AnimationEvent"in window||(delete jc.animationend.animation,delete jc.animationiteration.animation,delete jc.animationstart.animation),"TransitionEvent"in window||delete jc.transitionend.transition);function jb(t){if(a1[t])return a1[t];if(!jc[t])return t;var e=jc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in E3)return a1[t]=e[n];return t}var C3=jb("animationend"),A3=jb("animationiteration"),T3=jb("animationstart"),P3=jb("transitionend"),O3=new Map,AR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cu(t,e){O3.set(t,e),Yl(e,[t])}for(var s1=0;s1<AR.length;s1++){var u1=AR[s1],o7=u1.toLowerCase(),a7=u1[0].toUpperCase()+u1.slice(1);Cu(o7,"on"+a7)}Cu(C3,"onAnimationEnd");Cu(A3,"onAnimationIteration");Cu(T3,"onAnimationStart");Cu("dblclick","onDoubleClick");Cu("focusin","onFocus");Cu("focusout","onBlur");Cu(P3,"onTransitionEnd");Lf("onMouseEnter",["mouseout","mouseover"]);Lf("onMouseLeave",["mouseout","mouseover"]);Lf("onPointerEnter",["pointerout","pointerover"]);Lf("onPointerLeave",["pointerout","pointerover"]);Yl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s7=new Set("cancel close invalid load scroll toggle".split(" ").concat($d));function TR(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oK(r,e,void 0,t),t.currentTarget=null}function k3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;TR(i,s,l),o=u}else for(a=0;a<r.length;a++){if(s=r[a],u=s.instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;TR(i,s,l),o=u}}}if(gy)throw t=SS,gy=!1,SS=null,t}function Lt(t,e){var n=e[DS];n===void 0&&(n=e[DS]=new Set);var r=t+"__bubble";n.has(r)||(R3(e,t,2,!1),n.add(r))}function l1(t,e,n){var r=0;e&&(r|=4),R3(n,t,r,e)}var zm="_reactListening"+Math.random().toString(36).slice(2);function Ap(t){if(!t[zm]){t[zm]=!0,LF.forEach(function(n){n!=="selectionchange"&&(s7.has(n)||l1(n,!1,t),l1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zm]||(e[zm]=!0,l1("selectionchange",!1,e))}}function R3(t,e,n,r){switch(p3(e)){case 1:var i=xK;break;case 4:i=_K;break;default:i=vA}n=i.bind(null,e,n,t),i=void 0,!_S||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function c1(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;s!==null;){if(a=ll(s),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}s=s.parentNode}}r=r.return}e3(function(){var l=o,c=fA(n),f=[];e:{var h=O3.get(t);if(h!==void 0){var d=gA,p=t;switch(t){case"keypress":if(Xg(n)===0)break e;case"keydown":case"keyup":d=jK;break;case"focusin":p="focus",d=r1;break;case"focusout":p="blur",d=r1;break;case"beforeblur":case"afterblur":d=r1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=vR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=CK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=BK;break;case C3:case A3:case T3:d=PK;break;case P3:d=VK;break;case"scroll":d=SK;break;case"wheel":d=zK;break;case"copy":case"cut":case"paste":d=kK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=gR}var v=(e&4)!==0,m=!v&&t==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var y=l,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,g!==null&&(_=wp(y,g),_!=null&&v.push(Tp(y,_,b)))),m)break;y=y.return}0<v.length&&(h=new d(h,p,null,n,c),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==wS&&(p=n.relatedTarget||n.fromElement)&&(ll(p)||p[Ya]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=l,p=p?ll(p):null,p!==null&&(m=Jl(p),p!==m||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=l),d!==p)){if(v=vR,_="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=gR,_="onPointerLeave",g="onPointerEnter",y="pointer"),m=d==null?h:Lc(d),b=p==null?h:Lc(p),h=new v(_,y+"leave",d,n,c),h.target=m,h.relatedTarget=b,_=null,ll(c)===l&&(v=new v(g,y+"enter",p,n,c),v.target=b,v.relatedTarget=m,_=v),m=_,d&&p)t:{for(v=d,g=p,y=0,b=v;b;b=hc(b))y++;for(b=0,_=g;_;_=hc(_))b++;for(;0<y-b;)v=hc(v),y--;for(;0<b-y;)g=hc(g),b--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=hc(v),g=hc(g)}v=null}else v=null;d!==null&&PR(f,h,d,v,!1),p!==null&&m!==null&&PR(f,m,p,v,!0)}}e:{if(h=l?Lc(l):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var x=JK;else if(wR(h))if(w3)x=t7;else{x=ZK;var S=QK}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=e7);if(x&&(x=x(t,l))){b3(f,x,n,c);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&vS(h,"number",h.value)}switch(S=l?Lc(l):window,t){case"focusin":(wR(S)||S.contentEditable==="true")&&($c=S,TS=l,Hd=null);break;case"focusout":Hd=TS=$c=null;break;case"mousedown":PS=!0;break;case"contextmenu":case"mouseup":case"dragend":PS=!1,CR(f,n,c);break;case"selectionchange":if(i7)break;case"keydown":case"keyup":CR(f,n,c)}var E;if(bA)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Mc?g3(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(m3&&n.locale!=="ko"&&(Mc||C!=="onCompositionStart"?C==="onCompositionEnd"&&Mc&&(E=v3()):(Gs=c,mA="value"in Gs?Gs.value:Gs.textContent,Mc=!0)),S=_y(l,C),0<S.length&&(C=new mR(C,t,null,n,c),f.push({event:C,listeners:S}),E?C.data=E:(E=y3(n),E!==null&&(C.data=E)))),(E=GK?qK(t,n):KK(t,n))&&(l=_y(l,"onBeforeInput"),0<l.length&&(c=new mR("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=E))}k3(f,e)})}function Tp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _y(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=wp(t,n),o!=null&&r.unshift(Tp(t,o,i)),o=wp(t,e),o!=null&&r.push(Tp(t,o,i))),t=t.return}return r}function hc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function PR(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&l!==null&&(s=l,i?(u=wp(n,o),u!=null&&a.unshift(Tp(n,u,s))):i||(u=wp(n,o),u!=null&&a.push(Tp(n,u,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var u7=/\r\n?/g,l7=/\u0000|\uFFFD/g;function OR(t){return(typeof t=="string"?t:""+t).replace(u7,`
`).replace(l7,"")}function Hm(t,e,n){if(e=OR(e),OR(t)!==e&&n)throw Error(le(425))}function Sy(){}var OS=null,kS=null;function RS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var IS=typeof setTimeout=="function"?setTimeout:void 0,c7=typeof clearTimeout=="function"?clearTimeout:void 0,kR=typeof Promise=="function"?Promise:void 0,f7=typeof queueMicrotask=="function"?queueMicrotask:typeof kR<"u"?function(t){return kR.resolve(null).then(t).catch(h7)}:IS;function h7(t){setTimeout(function(){throw t})}function f1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Sp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Sp(e)}function nu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function RR(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ah=Math.random().toString(36).slice(2),Jo="__reactFiber$"+Ah,Pp="__reactProps$"+Ah,Ya="__reactContainer$"+Ah,DS="__reactEvents$"+Ah,d7="__reactListeners$"+Ah,p7="__reactHandles$"+Ah;function ll(t){var e=t[Jo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ya]||n[Jo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=RR(t);t!==null;){if(n=t[Jo])return n;t=RR(t)}return e}t=n,n=t.parentNode}return null}function Kv(t){return t=t[Jo]||t[Ya],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Lb(t){return t[Pp]||null}var NS=[],Fc=-1;function Au(t){return{current:t}}function Vt(t){0>Fc||(t.current=NS[Fc],NS[Fc]=null,Fc--)}function It(t,e){Fc++,NS[Fc]=t.current,t.current=e}var pu={},Pr=Au(pu),Qr=Au(!1),$l=pu;function Ff(t,e){var n=t.type.contextTypes;if(!n)return pu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Zr(t){return t=t.childContextTypes,t!=null}function Ey(){Vt(Qr),Vt(Pr)}function IR(t,e,n){if(Pr.current!==pu)throw Error(le(168));It(Pr,e),It(Qr,n)}function I3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(le(108,Qq(t)||"Unknown",i));return nn({},n,r)}function Cy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pu,$l=Pr.current,It(Pr,t),It(Qr,Qr.current),!0}function DR(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=I3(t,e,$l),r.__reactInternalMemoizedMergedChildContext=t,Vt(Qr),Vt(Pr),It(Pr,t)):Vt(Qr),It(Qr,n)}var $a=null,Fb=!1,h1=!1;function D3(t){$a===null?$a=[t]:$a.push(t)}function v7(t){Fb=!0,D3(t)}function Tu(){if(!h1&&$a!==null){h1=!0;var t=0,e=bt;try{var n=$a;for(bt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$a=null,Fb=!1}catch(i){throw $a!==null&&($a=$a.slice(t+1)),i3(hA,Tu),i}finally{bt=e,h1=!1}}return null}var Bc=[],Uc=0,Ay=null,Ty=0,Li=[],Fi=0,jl=null,Ba=1,Ua="";function Xu(t,e){Bc[Uc++]=Ty,Bc[Uc++]=Ay,Ay=t,Ty=e}function N3(t,e,n){Li[Fi++]=Ba,Li[Fi++]=Ua,Li[Fi++]=jl,jl=t;var r=Ba;t=Ua;var i=32-Co(r)-1;r&=~(1<<i),n+=1;var o=32-Co(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ba=1<<32-Co(e)+i|n<<i|r,Ua=o+t}else Ba=1<<o|n<<i|r,Ua=t}function xA(t){t.return!==null&&(Xu(t,1),N3(t,1,0))}function _A(t){for(;t===Ay;)Ay=Bc[--Uc],Bc[Uc]=null,Ty=Bc[--Uc],Bc[Uc]=null;for(;t===jl;)jl=Li[--Fi],Li[Fi]=null,Ua=Li[--Fi],Li[Fi]=null,Ba=Li[--Fi],Li[Fi]=null}var Si=null,bi=null,Ht=!1,bo=null;function M3(t,e){var n=Wi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NR(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Si=t,bi=nu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Si=t,bi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=jl!==null?{id:Ba,overflow:Ua}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Si=t,bi=null,!0):!1;default:return!1}}function MS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $S(t){if(Ht){var e=bi;if(e){var n=e;if(!NR(t,e)){if(MS(t))throw Error(le(418));e=nu(n.nextSibling);var r=Si;e&&NR(t,e)?M3(r,n):(t.flags=t.flags&-4097|2,Ht=!1,Si=t)}}else{if(MS(t))throw Error(le(418));t.flags=t.flags&-4097|2,Ht=!1,Si=t}}}function MR(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Si=t}function Gm(t){if(t!==Si)return!1;if(!Ht)return MR(t),Ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!RS(t.type,t.memoizedProps)),e&&(e=bi)){if(MS(t))throw $3(),Error(le(418));for(;e;)M3(t,e),e=nu(e.nextSibling)}if(MR(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bi=nu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bi=null}}else bi=Si?nu(t.stateNode.nextSibling):null;return!0}function $3(){for(var t=bi;t;)t=nu(t.nextSibling)}function Bf(){bi=Si=null,Ht=!1}function SA(t){bo===null?bo=[t]:bo.push(t)}var m7=ss.ReactCurrentBatchConfig;function hd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function qm(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $R(t){var e=t._init;return e(t._payload)}function j3(t){function e(g,y){if(t){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(g,y){return g=au(g,y),g.index=0,g.sibling=null,g}function o(g,y,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function s(g,y,b,_){return y===null||y.tag!==6?(y=b1(b,g.mode,_),y.return=g,y):(y=i(y,b),y.return=g,y)}function u(g,y,b,_){var x=b.type;return x===Nc?c(g,y,b.props.children,_,b.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Is&&$R(x)===y.type)?(_=i(y,b.props),_.ref=hd(g,y,b),_.return=g,_):(_=ny(b.type,b.key,b.props,null,g.mode,_),_.ref=hd(g,y,b),_.return=g,_)}function l(g,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=w1(b,g.mode,_),y.return=g,y):(y=i(y,b.children||[]),y.return=g,y)}function c(g,y,b,_,x){return y===null||y.tag!==7?(y=Ol(b,g.mode,_,x),y.return=g,y):(y=i(y,b),y.return=g,y)}function f(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=b1(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $m:return b=ny(y.type,y.key,y.props,null,g.mode,b),b.ref=hd(g,null,y),b.return=g,b;case Dc:return y=w1(y,g.mode,b),y.return=g,y;case Is:var _=y._init;return f(g,_(y._payload),b)}if(Nd(y)||sd(y))return y=Ol(y,g.mode,b,null),y.return=g,y;qm(g,y)}return null}function h(g,y,b,_){var x=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:s(g,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $m:return b.key===x?u(g,y,b,_):null;case Dc:return b.key===x?l(g,y,b,_):null;case Is:return x=b._init,h(g,y,x(b._payload),_)}if(Nd(b)||sd(b))return x!==null?null:c(g,y,b,_,null);qm(g,b)}return null}function d(g,y,b,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(b)||null,s(y,g,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $m:return g=g.get(_.key===null?b:_.key)||null,u(y,g,_,x);case Dc:return g=g.get(_.key===null?b:_.key)||null,l(y,g,_,x);case Is:var S=_._init;return d(g,y,b,S(_._payload),x)}if(Nd(_)||sd(_))return g=g.get(b)||null,c(y,g,_,x,null);qm(y,_)}return null}function p(g,y,b,_){for(var x=null,S=null,E=y,C=y=0,A=null;E!==null&&C<b.length;C++){E.index>C?(A=E,E=null):A=E.sibling;var T=h(g,E,b[C],_);if(T===null){E===null&&(E=A);break}t&&E&&T.alternate===null&&e(g,E),y=o(T,y,C),S===null?x=T:S.sibling=T,S=T,E=A}if(C===b.length)return n(g,E),Ht&&Xu(g,C),x;if(E===null){for(;C<b.length;C++)E=f(g,b[C],_),E!==null&&(y=o(E,y,C),S===null?x=E:S.sibling=E,S=E);return Ht&&Xu(g,C),x}for(E=r(g,E);C<b.length;C++)A=d(E,g,C,b[C],_),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?C:A.key),y=o(A,y,C),S===null?x=A:S.sibling=A,S=A);return t&&E.forEach(function(P){return e(g,P)}),Ht&&Xu(g,C),x}function v(g,y,b,_){var x=sd(b);if(typeof x!="function")throw Error(le(150));if(b=x.call(b),b==null)throw Error(le(151));for(var S=x=null,E=y,C=y=0,A=null,T=b.next();E!==null&&!T.done;C++,T=b.next()){E.index>C?(A=E,E=null):A=E.sibling;var P=h(g,E,T.value,_);if(P===null){E===null&&(E=A);break}t&&E&&P.alternate===null&&e(g,E),y=o(P,y,C),S===null?x=P:S.sibling=P,S=P,E=A}if(T.done)return n(g,E),Ht&&Xu(g,C),x;if(E===null){for(;!T.done;C++,T=b.next())T=f(g,T.value,_),T!==null&&(y=o(T,y,C),S===null?x=T:S.sibling=T,S=T);return Ht&&Xu(g,C),x}for(E=r(g,E);!T.done;C++,T=b.next())T=d(E,g,C,T.value,_),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?C:T.key),y=o(T,y,C),S===null?x=T:S.sibling=T,S=T);return t&&E.forEach(function(R){return e(g,R)}),Ht&&Xu(g,C),x}function m(g,y,b,_){if(typeof b=="object"&&b!==null&&b.type===Nc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $m:e:{for(var x=b.key,S=y;S!==null;){if(S.key===x){if(x=b.type,x===Nc){if(S.tag===7){n(g,S.sibling),y=i(S,b.props.children),y.return=g,g=y;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Is&&$R(x)===S.type){n(g,S.sibling),y=i(S,b.props),y.ref=hd(g,S,b),y.return=g,g=y;break e}n(g,S);break}else e(g,S);S=S.sibling}b.type===Nc?(y=Ol(b.props.children,g.mode,_,b.key),y.return=g,g=y):(_=ny(b.type,b.key,b.props,null,g.mode,_),_.ref=hd(g,y,b),_.return=g,g=_)}return a(g);case Dc:e:{for(S=b.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(g,y.sibling),y=i(y,b.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=w1(b,g.mode,_),y.return=g,g=y}return a(g);case Is:return S=b._init,m(g,y,S(b._payload),_)}if(Nd(b))return p(g,y,b,_);if(sd(b))return v(g,y,b,_);qm(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(g,y.sibling),y=i(y,b),y.return=g,g=y):(n(g,y),y=b1(b,g.mode,_),y.return=g,g=y),a(g)):n(g,y)}return m}var Uf=j3(!0),L3=j3(!1),Py=Au(null),Oy=null,Vc=null,EA=null;function CA(){EA=Vc=Oy=null}function AA(t){var e=Py.current;Vt(Py),t._currentValue=e}function jS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function af(t,e){Oy=t,EA=Vc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xr=!0),t.firstContext=null)}function Yi(t){var e=t._currentValue;if(EA!==t)if(t={context:t,memoizedValue:e,next:null},Vc===null){if(Oy===null)throw Error(le(308));Vc=t,Oy.dependencies={lanes:0,firstContext:t}}else Vc=Vc.next=t;return e}var cl=null;function TA(t){cl===null?cl=[t]:cl.push(t)}function F3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,TA(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ja(t,r)}function Ja(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ds=!1;function PA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function za(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ru(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ut&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ja(t,n)}return i=r.interleaved,i===null?(e.next=e,TA(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ja(t,n)}function Yg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dA(t,n)}}function jR(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ky(t,e,n,r){var i=t.updateQueue;Ds=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var u=s,l=u.next;u.next=null,a===null?o=l:a.next=l,a=u;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;a=0,c=l=u=null,s=o;do{var h=s.lane,d=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=t,v=s;switch(h=e,d=n,v.tag){case 1:if(p=v.payload,typeof p=="function"){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,h=typeof p=="function"?p.call(d,f,h):p,h==null)break e;f=nn({},f,h);break e;case 2:Ds=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Fl|=a,t.lanes=a,t.memoizedState=f}}function LR(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(le(191,i));i.call(r)}}}var Xv={},aa=Au(Xv),Op=Au(Xv),kp=Au(Xv);function fl(t){if(t===Xv)throw Error(le(174));return t}function OA(t,e){switch(It(kp,e),It(Op,t),It(aa,Xv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gS(e,t)}Vt(aa),It(aa,e)}function Vf(){Vt(aa),Vt(Op),Vt(kp)}function U3(t){fl(kp.current);var e=fl(aa.current),n=gS(e,t.type);e!==n&&(It(Op,t),It(aa,n))}function kA(t){Op.current===t&&(Vt(aa),Vt(Op))}var Jt=Au(0);function Ry(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var d1=[];function RA(){for(var t=0;t<d1.length;t++)d1[t]._workInProgressVersionPrimary=null;d1.length=0}var Jg=ss.ReactCurrentDispatcher,p1=ss.ReactCurrentBatchConfig,Ll=0,tn=null,In=null,qn=null,Iy=!1,Gd=!1,Rp=0,g7=0;function vr(){throw Error(le(321))}function IA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Po(t[n],e[n]))return!1;return!0}function DA(t,e,n,r,i,o){if(Ll=o,tn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jg.current=t===null||t.memoizedState===null?x7:_7,t=n(r,i),Gd){o=0;do{if(Gd=!1,Rp=0,25<=o)throw Error(le(301));o+=1,qn=In=null,e.updateQueue=null,Jg.current=S7,t=n(r,i)}while(Gd)}if(Jg.current=Dy,e=In!==null&&In.next!==null,Ll=0,qn=In=tn=null,Iy=!1,e)throw Error(le(300));return t}function NA(){var t=Rp!==0;return Rp=0,t}function Vo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qn===null?tn.memoizedState=qn=t:qn=qn.next=t,qn}function Ji(){if(In===null){var t=tn.alternate;t=t!==null?t.memoizedState:null}else t=In.next;var e=qn===null?tn.memoizedState:qn.next;if(e!==null)qn=e,In=t;else{if(t===null)throw Error(le(310));In=t,t={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},qn===null?tn.memoizedState=qn=t:qn=qn.next=t}return qn}function Ip(t,e){return typeof e=="function"?e(t):e}function v1(t){var e=Ji(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=In,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,u=null,l=o;do{var c=l.lane;if((Ll&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(s=u=f,a=r):u=u.next=f,tn.lanes|=c,Fl|=c}l=l.next}while(l!==null&&l!==o);u===null?a=r:u.next=s,Po(r,e.memoizedState)||(Xr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,tn.lanes|=o,Fl|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function m1(t){var e=Ji(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Po(o,e.memoizedState)||(Xr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function V3(){}function W3(t,e){var n=tn,r=Ji(),i=e(),o=!Po(r.memoizedState,i);if(o&&(r.memoizedState=i,Xr=!0),r=r.queue,MA(G3.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||qn!==null&&qn.memoizedState.tag&1){if(n.flags|=2048,Dp(9,H3.bind(null,n,r,i,e),void 0,null),Yn===null)throw Error(le(349));Ll&30||z3(n,e,i)}return i}function z3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=tn.updateQueue,e===null?(e={lastEffect:null,stores:null},tn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function H3(t,e,n,r){e.value=n,e.getSnapshot=r,q3(e)&&K3(t)}function G3(t,e,n){return n(function(){q3(e)&&K3(t)})}function q3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Po(t,n)}catch{return!0}}function K3(t){var e=Ja(t,1);e!==null&&Ao(e,t,1,-1)}function FR(t){var e=Vo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ip,lastRenderedState:t},e.queue=t,t=t.dispatch=w7.bind(null,tn,t),[e.memoizedState,t]}function Dp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=tn.updateQueue,e===null?(e={lastEffect:null,stores:null},tn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function X3(){return Ji().memoizedState}function Qg(t,e,n,r){var i=Vo();tn.flags|=t,i.memoizedState=Dp(1|e,n,void 0,r===void 0?null:r)}function Bb(t,e,n,r){var i=Ji();r=r===void 0?null:r;var o=void 0;if(In!==null){var a=In.memoizedState;if(o=a.destroy,r!==null&&IA(r,a.deps)){i.memoizedState=Dp(e,n,o,r);return}}tn.flags|=t,i.memoizedState=Dp(1|e,n,o,r)}function BR(t,e){return Qg(8390656,8,t,e)}function MA(t,e){return Bb(2048,8,t,e)}function Y3(t,e){return Bb(4,2,t,e)}function J3(t,e){return Bb(4,4,t,e)}function Q3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Z3(t,e,n){return n=n!=null?n.concat([t]):null,Bb(4,4,Q3.bind(null,e,t),n)}function $A(){}function eB(t,e){var n=Ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&IA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tB(t,e){var n=Ji();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&IA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nB(t,e,n){return Ll&21?(Po(n,e)||(n=s3(),tn.lanes|=n,Fl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xr=!0),t.memoizedState=n)}function y7(t,e){var n=bt;bt=n!==0&&4>n?n:4,t(!0);var r=p1.transition;p1.transition={};try{t(!1),e()}finally{bt=n,p1.transition=r}}function rB(){return Ji().memoizedState}function b7(t,e,n){var r=ou(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iB(t))oB(e,n);else if(n=F3(t,e,n,r),n!==null){var i=Br();Ao(n,t,r,i),aB(n,e,r)}}function w7(t,e,n){var r=ou(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iB(t))oB(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Po(s,a)){var u=e.interleaved;u===null?(i.next=i,TA(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=F3(t,e,i,r),n!==null&&(i=Br(),Ao(n,t,r,i),aB(n,e,r))}}function iB(t){var e=t.alternate;return t===tn||e!==null&&e===tn}function oB(t,e){Gd=Iy=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aB(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dA(t,n)}}var Dy={readContext:Yi,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},x7={readContext:Yi,useCallback:function(t,e){return Vo().memoizedState=[t,e===void 0?null:e],t},useContext:Yi,useEffect:BR,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qg(4194308,4,Q3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qg(4,2,t,e)},useMemo:function(t,e){var n=Vo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=b7.bind(null,tn,t),[r.memoizedState,t]},useRef:function(t){var e=Vo();return t={current:t},e.memoizedState=t},useState:FR,useDebugValue:$A,useDeferredValue:function(t){return Vo().memoizedState=t},useTransition:function(){var t=FR(!1),e=t[0];return t=y7.bind(null,t[1]),Vo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=tn,i=Vo();if(Ht){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Yn===null)throw Error(le(349));Ll&30||z3(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,BR(G3.bind(null,r,o,t),[t]),r.flags|=2048,Dp(9,H3.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Vo(),e=Yn.identifierPrefix;if(Ht){var n=Ua,r=Ba;n=(r&~(1<<32-Co(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Rp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=g7++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_7={readContext:Yi,useCallback:eB,useContext:Yi,useEffect:MA,useImperativeHandle:Z3,useInsertionEffect:Y3,useLayoutEffect:J3,useMemo:tB,useReducer:v1,useRef:X3,useState:function(){return v1(Ip)},useDebugValue:$A,useDeferredValue:function(t){var e=Ji();return nB(e,In.memoizedState,t)},useTransition:function(){var t=v1(Ip)[0],e=Ji().memoizedState;return[t,e]},useMutableSource:V3,useSyncExternalStore:W3,useId:rB,unstable_isNewReconciler:!1},S7={readContext:Yi,useCallback:eB,useContext:Yi,useEffect:MA,useImperativeHandle:Z3,useInsertionEffect:Y3,useLayoutEffect:J3,useMemo:tB,useReducer:m1,useRef:X3,useState:function(){return m1(Ip)},useDebugValue:$A,useDeferredValue:function(t){var e=Ji();return In===null?e.memoizedState=t:nB(e,In.memoizedState,t)},useTransition:function(){var t=m1(Ip)[0],e=Ji().memoizedState;return[t,e]},useMutableSource:V3,useSyncExternalStore:W3,useId:rB,unstable_isNewReconciler:!1};function co(t,e){if(t&&t.defaultProps){e=nn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function LS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ub={isMounted:function(t){return(t=t._reactInternals)?Jl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Br(),i=ou(t),o=za(r,i);o.payload=e,n!=null&&(o.callback=n),e=ru(t,o,i),e!==null&&(Ao(e,t,i,r),Yg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Br(),i=ou(t),o=za(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ru(t,o,i),e!==null&&(Ao(e,t,i,r),Yg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Br(),r=ou(t),i=za(n,r);i.tag=2,e!=null&&(i.callback=e),e=ru(t,i,r),e!==null&&(Ao(e,t,r,n),Yg(e,t,r))}};function UR(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Cp(n,r)||!Cp(i,o):!0}function sB(t,e,n){var r=!1,i=pu,o=e.contextType;return typeof o=="object"&&o!==null?o=Yi(o):(i=Zr(e)?$l:Pr.current,r=e.contextTypes,o=(r=r!=null)?Ff(t,i):pu),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ub,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function VR(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ub.enqueueReplaceState(e,e.state,null)}function FS(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},PA(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Yi(o):(o=Zr(e)?$l:Pr.current,i.context=Ff(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(LS(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ub.enqueueReplaceState(i,i.state,null),ky(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wf(t,e){try{var n="",r=e;do n+=Jq(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function g1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function BS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var E7=typeof WeakMap=="function"?WeakMap:Map;function uB(t,e,n){n=za(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){My||(My=!0,YS=r),BS(t,e)},n}function lB(t,e,n){n=za(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){BS(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){BS(t,e),typeof r!="function"&&(iu===null?iu=new Set([this]):iu.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function WR(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new E7;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=L7.bind(null,t,e,n),e.then(t,t))}function zR(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function HR(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=za(-1,1),e.tag=2,ru(n,e,1))),n.lanes|=1),t)}var C7=ss.ReactCurrentOwner,Xr=!1;function Dr(t,e,n,r){e.child=t===null?L3(e,null,n,r):Uf(e,t.child,n,r)}function GR(t,e,n,r,i){n=n.render;var o=e.ref;return af(e,i),r=DA(t,e,n,r,o,i),n=NA(),t!==null&&!Xr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qa(t,e,i)):(Ht&&n&&xA(e),e.flags|=1,Dr(t,e,r,i),e.child)}function qR(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!zA(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,cB(t,e,o,r,i)):(t=ny(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Cp,n(a,r)&&t.ref===e.ref)return Qa(t,e,i)}return e.flags|=1,t=au(o,r),t.ref=e.ref,t.return=e,e.child=t}function cB(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Cp(o,r)&&t.ref===e.ref)if(Xr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Xr=!0);else return e.lanes=t.lanes,Qa(t,e,i)}return US(t,e,n,r,i)}function fB(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(zc,fi),fi|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,It(zc,fi),fi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,It(zc,fi),fi|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,It(zc,fi),fi|=r;return Dr(t,e,i,n),e.child}function hB(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function US(t,e,n,r,i){var o=Zr(n)?$l:Pr.current;return o=Ff(e,o),af(e,i),n=DA(t,e,n,r,o,i),r=NA(),t!==null&&!Xr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qa(t,e,i)):(Ht&&r&&xA(e),e.flags|=1,Dr(t,e,n,i),e.child)}function KR(t,e,n,r,i){if(Zr(n)){var o=!0;Cy(e)}else o=!1;if(af(e,i),e.stateNode===null)Zg(t,e),sB(e,n,r),FS(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=Yi(l):(l=Zr(n)?$l:Pr.current,l=Ff(e,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||u!==l)&&VR(e,a,r,l),Ds=!1;var h=e.memoizedState;a.state=h,ky(e,r,a,i),u=e.memoizedState,s!==r||h!==u||Qr.current||Ds?(typeof c=="function"&&(LS(e,n,c,r),u=e.memoizedState),(s=Ds||UR(e,n,s,r,h,u,l))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,B3(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:co(e.type,s),a.props=l,f=e.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yi(u):(u=Zr(n)?$l:Pr.current,u=Ff(e,u));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||h!==u)&&VR(e,a,r,u),Ds=!1,h=e.memoizedState,a.state=h,ky(e,r,a,i);var p=e.memoizedState;s!==f||h!==p||Qr.current||Ds?(typeof d=="function"&&(LS(e,n,d,r),p=e.memoizedState),(l=Ds||UR(e,n,l,r,h,p,u)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,p,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,p,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return VS(t,e,n,r,o,i)}function VS(t,e,n,r,i,o){hB(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&DR(e,n,!1),Qa(t,e,o);r=e.stateNode,C7.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Uf(e,t.child,null,o),e.child=Uf(e,null,s,o)):Dr(t,e,s,o),e.memoizedState=r.state,i&&DR(e,n,!0),e.child}function dB(t){var e=t.stateNode;e.pendingContext?IR(t,e.pendingContext,e.pendingContext!==e.context):e.context&&IR(t,e.context,!1),OA(t,e.containerInfo)}function XR(t,e,n,r,i){return Bf(),SA(i),e.flags|=256,Dr(t,e,n,r),e.child}var WS={dehydrated:null,treeContext:null,retryLane:0};function zS(t){return{baseLanes:t,cachePool:null,transitions:null}}function pB(t,e,n){var r=e.pendingProps,i=Jt.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),It(Jt,i&1),t===null)return $S(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=zb(a,r,0,null),t=Ol(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=zS(n),e.memoizedState=WS,t):jA(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return A7(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=au(i,u),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=au(s,o):(o=Ol(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?zS(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=WS,r}return o=t.child,t=o.sibling,r=au(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jA(t,e){return e=zb({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Km(t,e,n,r){return r!==null&&SA(r),Uf(e,t.child,null,n),t=jA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function A7(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=g1(Error(le(422))),Km(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=zb({mode:"visible",children:r.children},i,0,null),o=Ol(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Uf(e,t.child,null,a),e.child.memoizedState=zS(a),e.memoizedState=WS,o);if(!(e.mode&1))return Km(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(le(419)),r=g1(o,r,void 0),Km(t,e,a,r)}if(s=(a&t.childLanes)!==0,Xr||s){if(r=Yn,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ja(t,i),Ao(r,t,i,-1))}return WA(),r=g1(Error(le(421))),Km(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=F7.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,bi=nu(i.nextSibling),Si=e,Ht=!0,bo=null,t!==null&&(Li[Fi++]=Ba,Li[Fi++]=Ua,Li[Fi++]=jl,Ba=t.id,Ua=t.overflow,jl=e),e=jA(e,r.children),e.flags|=4096,e)}function YR(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jS(t.return,e,n)}function y1(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function vB(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Dr(t,e,r.children,n),r=Jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&YR(t,n,e);else if(t.tag===19)YR(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(It(Jt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ry(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),y1(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ry(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}y1(e,!0,n,null,o);break;case"together":y1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=au(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=au(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function T7(t,e,n){switch(e.tag){case 3:dB(e),Bf();break;case 5:U3(e);break;case 1:Zr(e.type)&&Cy(e);break;case 4:OA(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;It(Py,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(It(Jt,Jt.current&1),e.flags|=128,null):n&e.child.childLanes?pB(t,e,n):(It(Jt,Jt.current&1),t=Qa(t,e,n),t!==null?t.sibling:null);It(Jt,Jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vB(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),It(Jt,Jt.current),r)break;return null;case 22:case 23:return e.lanes=0,fB(t,e,n)}return Qa(t,e,n)}var mB,HS,gB,yB;mB=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};HS=function(){};gB=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fl(aa.current);var o=null;switch(n){case"input":i=dS(t,i),r=dS(t,r),o=[];break;case"select":i=nn({},i,{value:void 0}),r=nn({},r,{value:void 0}),o=[];break;case"textarea":i=mS(t,i),r=mS(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sy)}yS(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(yp.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(u!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&s[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(yp.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Lt("scroll",t),o||s===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};yB=function(t,e,n,r){n!==r&&(e.flags|=4)};function dd(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function P7(t,e,n){var r=e.pendingProps;switch(_A(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(e),null;case 1:return Zr(e.type)&&Ey(),mr(e),null;case 3:return r=e.stateNode,Vf(),Vt(Qr),Vt(Pr),RA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bo!==null&&(ZS(bo),bo=null))),HS(t,e),mr(e),null;case 5:kA(e);var i=fl(kp.current);if(n=e.type,t!==null&&e.stateNode!=null)gB(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return mr(e),null}if(t=fl(aa.current),Gm(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Jo]=e,r[Pp]=o,t=(e.mode&1)!==0,n){case"dialog":Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":case"embed":Lt("load",r);break;case"video":case"audio":for(i=0;i<$d.length;i++)Lt($d[i],r);break;case"source":Lt("error",r);break;case"img":case"image":case"link":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"input":oR(r,o),Lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Lt("invalid",r);break;case"textarea":sR(r,o),Lt("invalid",r)}yS(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Hm(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Hm(r.textContent,s,t),i=["children",""+s]):yp.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Lt("scroll",r)}switch(n){case"input":jm(r),aR(r,o,!0);break;case"textarea":jm(r),uR(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Sy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=GF(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Jo]=e,t[Pp]=r,mB(t,e,!1,!1),e.stateNode=t;e:{switch(a=bS(n,r),n){case"dialog":Lt("cancel",t),Lt("close",t),i=r;break;case"iframe":case"object":case"embed":Lt("load",t),i=r;break;case"video":case"audio":for(i=0;i<$d.length;i++)Lt($d[i],t);i=r;break;case"source":Lt("error",t),i=r;break;case"img":case"image":case"link":Lt("error",t),Lt("load",t),i=r;break;case"details":Lt("toggle",t),i=r;break;case"input":oR(t,r),i=dS(t,r),Lt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=nn({},r,{value:void 0}),Lt("invalid",t);break;case"textarea":sR(t,r),i=mS(t,r),Lt("invalid",t);break;default:i=r}yS(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];o==="style"?XF(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&qF(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&bp(t,u):typeof u=="number"&&bp(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(yp.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Lt("scroll",t):u!=null&&sA(t,o,u,a))}switch(n){case"input":jm(t),aR(t,r,!1);break;case"textarea":jm(t),uR(t);break;case"option":r.value!=null&&t.setAttribute("value",""+du(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?tf(t,!!r.multiple,o,!1):r.defaultValue!=null&&tf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Sy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mr(e),null;case 6:if(t&&e.stateNode!=null)yB(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=fl(kp.current),fl(aa.current),Gm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jo]=e,(o=r.nodeValue!==n)&&(t=Si,t!==null))switch(t.tag){case 3:Hm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hm(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jo]=e,e.stateNode=r}return mr(e),null;case 13:if(Vt(Jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ht&&bi!==null&&e.mode&1&&!(e.flags&128))$3(),Bf(),e.flags|=98560,o=!1;else if(o=Gm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(le(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(le(317));o[Jo]=e}else Bf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mr(e),o=!1}else bo!==null&&(ZS(bo),bo=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?$n===0&&($n=3):WA())),e.updateQueue!==null&&(e.flags|=4),mr(e),null);case 4:return Vf(),HS(t,e),t===null&&Ap(e.stateNode.containerInfo),mr(e),null;case 10:return AA(e.type._context),mr(e),null;case 17:return Zr(e.type)&&Ey(),mr(e),null;case 19:if(Vt(Jt),o=e.memoizedState,o===null)return mr(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)dd(o,!1);else{if($n!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ry(t),a!==null){for(e.flags|=128,dd(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return It(Jt,Jt.current&1|2),e.child}t=t.sibling}o.tail!==null&&vn()>zf&&(e.flags|=128,r=!0,dd(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ry(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),dd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ht)return mr(e),null}else 2*vn()-o.renderingStartTime>zf&&n!==1073741824&&(e.flags|=128,r=!0,dd(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=vn(),e.sibling=null,n=Jt.current,It(Jt,r?n&1|2:n&1),e):(mr(e),null);case 22:case 23:return VA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fi&1073741824&&(mr(e),e.subtreeFlags&6&&(e.flags|=8192)):mr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function O7(t,e){switch(_A(e),e.tag){case 1:return Zr(e.type)&&Ey(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vf(),Vt(Qr),Vt(Pr),RA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kA(e),null;case 13:if(Vt(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Bf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Vt(Jt),null;case 4:return Vf(),null;case 10:return AA(e.type._context),null;case 22:case 23:return VA(),null;case 24:return null;default:return null}}var Xm=!1,wr=!1,k7=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Wc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ln(t,e,r)}else n.current=null}function GS(t,e,n){try{n()}catch(r){ln(t,e,r)}}var JR=!1;function R7(t,e){if(OS=wy,t=S3(),wA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,u=-1,l=0,c=0,f=t,h=null;t:for(;;){for(var d;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===t)break t;if(h===n&&++l===i&&(s=a),h===o&&++c===r&&(u=a),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(kS={focusedElem:t,selectionRange:n},wy=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,m=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:co(e.type,v),m);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(_){ln(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return p=JR,JR=!1,p}function qd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&GS(e,n,o)}i=i.next}while(i!==r)}}function Vb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bB(t){var e=t.alternate;e!==null&&(t.alternate=null,bB(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jo],delete e[Pp],delete e[DS],delete e[d7],delete e[p7])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wB(t){return t.tag===5||t.tag===3||t.tag===4}function QR(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wB(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function KS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sy));else if(r!==4&&(t=t.child,t!==null))for(KS(t,e,n),t=t.sibling;t!==null;)KS(t,e,n),t=t.sibling}function XS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(XS(t,e,n),t=t.sibling;t!==null;)XS(t,e,n),t=t.sibling}var rr=null,mo=!1;function Cs(t,e,n){for(n=n.child;n!==null;)xB(t,e,n),n=n.sibling}function xB(t,e,n){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(Nb,n)}catch{}switch(n.tag){case 5:wr||Wc(n,e);case 6:var r=rr,i=mo;rr=null,Cs(t,e,n),rr=r,mo=i,rr!==null&&(mo?(t=rr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rr.removeChild(n.stateNode));break;case 18:rr!==null&&(mo?(t=rr,n=n.stateNode,t.nodeType===8?f1(t.parentNode,n):t.nodeType===1&&f1(t,n),Sp(t)):f1(rr,n.stateNode));break;case 4:r=rr,i=mo,rr=n.stateNode.containerInfo,mo=!0,Cs(t,e,n),rr=r,mo=i;break;case 0:case 11:case 14:case 15:if(!wr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&GS(n,e,a),i=i.next}while(i!==r)}Cs(t,e,n);break;case 1:if(!wr&&(Wc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){ln(n,e,s)}Cs(t,e,n);break;case 21:Cs(t,e,n);break;case 22:n.mode&1?(wr=(r=wr)||n.memoizedState!==null,Cs(t,e,n),wr=r):Cs(t,e,n);break;default:Cs(t,e,n)}}function ZR(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new k7),e.forEach(function(r){var i=B7.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function io(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:rr=s.stateNode,mo=!1;break e;case 3:rr=s.stateNode.containerInfo,mo=!0;break e;case 4:rr=s.stateNode.containerInfo,mo=!0;break e}s=s.return}if(rr===null)throw Error(le(160));xB(o,a,i),rr=null,mo=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){ln(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_B(e,t),e=e.sibling}function _B(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(io(e,t),Bo(t),r&4){try{qd(3,t,t.return),Vb(3,t)}catch(v){ln(t,t.return,v)}try{qd(5,t,t.return)}catch(v){ln(t,t.return,v)}}break;case 1:io(e,t),Bo(t),r&512&&n!==null&&Wc(n,n.return);break;case 5:if(io(e,t),Bo(t),r&512&&n!==null&&Wc(n,n.return),t.flags&32){var i=t.stateNode;try{bp(i,"")}catch(v){ln(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&zF(i,o),bS(s,a);var l=bS(s,o);for(a=0;a<u.length;a+=2){var c=u[a],f=u[a+1];c==="style"?XF(i,f):c==="dangerouslySetInnerHTML"?qF(i,f):c==="children"?bp(i,f):sA(i,c,f,l)}switch(s){case"input":pS(i,o);break;case"textarea":HF(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?tf(i,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?tf(i,!!o.multiple,o.defaultValue,!0):tf(i,!!o.multiple,o.multiple?[]:"",!1))}i[Pp]=o}catch(v){ln(t,t.return,v)}}break;case 6:if(io(e,t),Bo(t),r&4){if(t.stateNode===null)throw Error(le(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){ln(t,t.return,v)}}break;case 3:if(io(e,t),Bo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sp(e.containerInfo)}catch(v){ln(t,t.return,v)}break;case 4:io(e,t),Bo(t);break;case 13:io(e,t),Bo(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(BA=vn())),r&4&&ZR(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(wr=(l=wr)||c,io(e,t),wr=l):io(e,t),Bo(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(xe=t,c=t.child;c!==null;){for(f=xe=c;xe!==null;){switch(h=xe,d=h.child,h.tag){case 0:case 11:case 14:case 15:qd(4,h,h.return);break;case 1:Wc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){ln(r,n,v)}}break;case 5:Wc(h,h.return);break;case 22:if(h.memoizedState!==null){tI(f);continue}}d!==null?(d.return=h,xe=d):tI(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=KF("display",a))}catch(v){ln(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(v){ln(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:io(e,t),Bo(t),r&4&&ZR(t);break;case 21:break;default:io(e,t),Bo(t)}}function Bo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wB(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(bp(i,""),r.flags&=-33);var o=QR(t);XS(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=QR(t);KS(t,s,a);break;default:throw Error(le(161))}}catch(u){ln(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I7(t,e,n){xe=t,SB(t)}function SB(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var i=xe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Xm;if(!a){var s=i.alternate,u=s!==null&&s.memoizedState!==null||wr;s=Xm;var l=wr;if(Xm=a,(wr=u)&&!l)for(xe=i;xe!==null;)a=xe,u=a.child,a.tag===22&&a.memoizedState!==null?nI(i):u!==null?(u.return=a,xe=u):nI(i);for(;o!==null;)xe=o,SB(o),o=o.sibling;xe=i,Xm=s,wr=l}eI(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,xe=o):eI(t)}}function eI(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wr||Vb(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:co(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&LR(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}LR(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Sp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}wr||e.flags&512&&qS(e)}catch(h){ln(e,e.return,h)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function tI(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function nI(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vb(4,e)}catch(u){ln(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ln(e,i,u)}}var o=e.return;try{qS(e)}catch(u){ln(e,o,u)}break;case 5:var a=e.return;try{qS(e)}catch(u){ln(e,a,u)}}}catch(u){ln(e,e.return,u)}if(e===t){xe=null;break}var s=e.sibling;if(s!==null){s.return=e.return,xe=s;break}xe=e.return}}var D7=Math.ceil,Ny=ss.ReactCurrentDispatcher,LA=ss.ReactCurrentOwner,qi=ss.ReactCurrentBatchConfig,ut=0,Yn=null,_n=null,lr=0,fi=0,zc=Au(0),$n=0,Np=null,Fl=0,Wb=0,FA=0,Kd=null,Gr=null,BA=0,zf=1/0,Da=null,My=!1,YS=null,iu=null,Ym=!1,qs=null,$y=0,Xd=0,JS=null,ey=-1,ty=0;function Br(){return ut&6?vn():ey!==-1?ey:ey=vn()}function ou(t){return t.mode&1?ut&2&&lr!==0?lr&-lr:m7.transition!==null?(ty===0&&(ty=s3()),ty):(t=bt,t!==0||(t=window.event,t=t===void 0?16:p3(t.type)),t):1}function Ao(t,e,n,r){if(50<Xd)throw Xd=0,JS=null,Error(le(185));Gv(t,n,r),(!(ut&2)||t!==Yn)&&(t===Yn&&(!(ut&2)&&(Wb|=n),$n===4&&Fs(t,lr)),ei(t,r),n===1&&ut===0&&!(e.mode&1)&&(zf=vn()+500,Fb&&Tu()))}function ei(t,e){var n=t.callbackNode;mK(t,e);var r=by(t,t===Yn?lr:0);if(r===0)n!==null&&fR(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fR(n),e===1)t.tag===0?v7(rI.bind(null,t)):D3(rI.bind(null,t)),f7(function(){!(ut&6)&&Tu()}),n=null;else{switch(u3(r)){case 1:n=hA;break;case 4:n=o3;break;case 16:n=yy;break;case 536870912:n=a3;break;default:n=yy}n=RB(n,EB.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function EB(t,e){if(ey=-1,ty=0,ut&6)throw Error(le(327));var n=t.callbackNode;if(sf()&&t.callbackNode!==n)return null;var r=by(t,t===Yn?lr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jy(t,r);else{e=r;var i=ut;ut|=2;var o=AB();(Yn!==t||lr!==e)&&(Da=null,zf=vn()+500,Pl(t,e));do try{$7();break}catch(s){CB(t,s)}while(!0);CA(),Ny.current=o,ut=i,_n!==null?e=0:(Yn=null,lr=0,e=$n)}if(e!==0){if(e===2&&(i=ES(t),i!==0&&(r=i,e=QS(t,i))),e===1)throw n=Np,Pl(t,0),Fs(t,r),ei(t,vn()),n;if(e===6)Fs(t,r);else{if(i=t.current.alternate,!(r&30)&&!N7(i)&&(e=jy(t,r),e===2&&(o=ES(t),o!==0&&(r=o,e=QS(t,o))),e===1))throw n=Np,Pl(t,0),Fs(t,r),ei(t,vn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Yu(t,Gr,Da);break;case 3:if(Fs(t,r),(r&130023424)===r&&(e=BA+500-vn(),10<e)){if(by(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Br(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=IS(Yu.bind(null,t,Gr,Da),e);break}Yu(t,Gr,Da);break;case 4:if(Fs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Co(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*D7(r/1960))-r,10<r){t.timeoutHandle=IS(Yu.bind(null,t,Gr,Da),r);break}Yu(t,Gr,Da);break;case 5:Yu(t,Gr,Da);break;default:throw Error(le(329))}}}return ei(t,vn()),t.callbackNode===n?EB.bind(null,t):null}function QS(t,e){var n=Kd;return t.current.memoizedState.isDehydrated&&(Pl(t,e).flags|=256),t=jy(t,e),t!==2&&(e=Gr,Gr=n,e!==null&&ZS(e)),t}function ZS(t){Gr===null?Gr=t:Gr.push.apply(Gr,t)}function N7(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Po(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Fs(t,e){for(e&=~FA,e&=~Wb,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Co(e),r=1<<n;t[n]=-1,e&=~r}}function rI(t){if(ut&6)throw Error(le(327));sf();var e=by(t,0);if(!(e&1))return ei(t,vn()),null;var n=jy(t,e);if(t.tag!==0&&n===2){var r=ES(t);r!==0&&(e=r,n=QS(t,r))}if(n===1)throw n=Np,Pl(t,0),Fs(t,e),ei(t,vn()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yu(t,Gr,Da),ei(t,vn()),null}function UA(t,e){var n=ut;ut|=1;try{return t(e)}finally{ut=n,ut===0&&(zf=vn()+500,Fb&&Tu())}}function Bl(t){qs!==null&&qs.tag===0&&!(ut&6)&&sf();var e=ut;ut|=1;var n=qi.transition,r=bt;try{if(qi.transition=null,bt=1,t)return t()}finally{bt=r,qi.transition=n,ut=e,!(ut&6)&&Tu()}}function VA(){fi=zc.current,Vt(zc)}function Pl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,c7(n)),_n!==null)for(n=_n.return;n!==null;){var r=n;switch(_A(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ey();break;case 3:Vf(),Vt(Qr),Vt(Pr),RA();break;case 5:kA(r);break;case 4:Vf();break;case 13:Vt(Jt);break;case 19:Vt(Jt);break;case 10:AA(r.type._context);break;case 22:case 23:VA()}n=n.return}if(Yn=t,_n=t=au(t.current,null),lr=fi=e,$n=0,Np=null,FA=Wb=Fl=0,Gr=Kd=null,cl!==null){for(e=0;e<cl.length;e++)if(n=cl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}cl=null}return t}function CB(t,e){do{var n=_n;try{if(CA(),Jg.current=Dy,Iy){for(var r=tn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Iy=!1}if(Ll=0,qn=In=tn=null,Gd=!1,Rp=0,LA.current=null,n===null||n.return===null){$n=1,Np=e,_n=null;break}e:{var o=t,a=n.return,s=n,u=e;if(e=lr,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=zR(a);if(d!==null){d.flags&=-257,HR(d,a,s,o,e),d.mode&1&&WR(o,l,e),e=d,u=l;var p=e.updateQueue;if(p===null){var v=new Set;v.add(u),e.updateQueue=v}else p.add(u);break e}else{if(!(e&1)){WR(o,l,e),WA();break e}u=Error(le(426))}}else if(Ht&&s.mode&1){var m=zR(a);if(m!==null){!(m.flags&65536)&&(m.flags|=256),HR(m,a,s,o,e),SA(Wf(u,s));break e}}o=u=Wf(u,s),$n!==4&&($n=2),Kd===null?Kd=[o]:Kd.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=uB(o,u,e);jR(o,g);break e;case 1:s=u;var y=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(iu===null||!iu.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var _=lB(o,s,e);jR(o,_);break e}}o=o.return}while(o!==null)}PB(n)}catch(x){e=x,_n===n&&n!==null&&(_n=n=n.return);continue}break}while(!0)}function AB(){var t=Ny.current;return Ny.current=Dy,t===null?Dy:t}function WA(){($n===0||$n===3||$n===2)&&($n=4),Yn===null||!(Fl&268435455)&&!(Wb&268435455)||Fs(Yn,lr)}function jy(t,e){var n=ut;ut|=2;var r=AB();(Yn!==t||lr!==e)&&(Da=null,Pl(t,e));do try{M7();break}catch(i){CB(t,i)}while(!0);if(CA(),ut=n,Ny.current=r,_n!==null)throw Error(le(261));return Yn=null,lr=0,$n}function M7(){for(;_n!==null;)TB(_n)}function $7(){for(;_n!==null&&!sK();)TB(_n)}function TB(t){var e=kB(t.alternate,t,fi);t.memoizedProps=t.pendingProps,e===null?PB(t):_n=e,LA.current=null}function PB(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=O7(n,e),n!==null){n.flags&=32767,_n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$n=6,_n=null;return}}else if(n=P7(n,e,fi),n!==null){_n=n;return}if(e=e.sibling,e!==null){_n=e;return}_n=e=t}while(e!==null);$n===0&&($n=5)}function Yu(t,e,n){var r=bt,i=qi.transition;try{qi.transition=null,bt=1,j7(t,e,n,r)}finally{qi.transition=i,bt=r}return null}function j7(t,e,n,r){do sf();while(qs!==null);if(ut&6)throw Error(le(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(gK(t,o),t===Yn&&(_n=Yn=null,lr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ym||(Ym=!0,RB(yy,function(){return sf(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=qi.transition,qi.transition=null;var a=bt;bt=1;var s=ut;ut|=4,LA.current=null,R7(t,n),_B(n,t),r7(kS),wy=!!OS,kS=OS=null,t.current=n,I7(n),uK(),ut=s,bt=a,qi.transition=o}else t.current=n;if(Ym&&(Ym=!1,qs=t,$y=i),o=t.pendingLanes,o===0&&(iu=null),fK(n.stateNode),ei(t,vn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(My)throw My=!1,t=YS,YS=null,t;return $y&1&&t.tag!==0&&sf(),o=t.pendingLanes,o&1?t===JS?Xd++:(Xd=0,JS=t):Xd=0,Tu(),null}function sf(){if(qs!==null){var t=u3($y),e=qi.transition,n=bt;try{if(qi.transition=null,bt=16>t?16:t,qs===null)var r=!1;else{if(t=qs,qs=null,$y=0,ut&6)throw Error(le(331));var i=ut;for(ut|=4,xe=t.current;xe!==null;){var o=xe,a=o.child;if(xe.flags&16){var s=o.deletions;if(s!==null){for(var u=0;u<s.length;u++){var l=s[u];for(xe=l;xe!==null;){var c=xe;switch(c.tag){case 0:case 11:case 15:qd(8,c,o)}var f=c.child;if(f!==null)f.return=c,xe=f;else for(;xe!==null;){c=xe;var h=c.sibling,d=c.return;if(bB(c),c===l){xe=null;break}if(h!==null){h.return=d,xe=h;break}xe=d}}}var p=o.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}xe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,xe=a;else e:for(;xe!==null;){if(o=xe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qd(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,xe=g;break e}xe=o.return}}var y=t.current;for(xe=y;xe!==null;){a=xe;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,xe=b;else e:for(a=y;xe!==null;){if(s=xe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Vb(9,s)}}catch(x){ln(s,s.return,x)}if(s===a){xe=null;break e}var _=s.sibling;if(_!==null){_.return=s.return,xe=_;break e}xe=s.return}}if(ut=i,Tu(),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(Nb,t)}catch{}r=!0}return r}finally{bt=n,qi.transition=e}}return!1}function iI(t,e,n){e=Wf(n,e),e=uB(t,e,1),t=ru(t,e,1),e=Br(),t!==null&&(Gv(t,1,e),ei(t,e))}function ln(t,e,n){if(t.tag===3)iI(t,t,n);else for(;e!==null;){if(e.tag===3){iI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(iu===null||!iu.has(r))){t=Wf(n,t),t=lB(e,t,1),e=ru(e,t,1),t=Br(),e!==null&&(Gv(e,1,t),ei(e,t));break}}e=e.return}}function L7(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Br(),t.pingedLanes|=t.suspendedLanes&n,Yn===t&&(lr&n)===n&&($n===4||$n===3&&(lr&130023424)===lr&&500>vn()-BA?Pl(t,0):FA|=n),ei(t,e)}function OB(t,e){e===0&&(t.mode&1?(e=Bm,Bm<<=1,!(Bm&130023424)&&(Bm=4194304)):e=1);var n=Br();t=Ja(t,e),t!==null&&(Gv(t,e,n),ei(t,n))}function F7(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OB(t,n)}function B7(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),OB(t,n)}var kB;kB=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qr.current)Xr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xr=!1,T7(t,e,n);Xr=!!(t.flags&131072)}else Xr=!1,Ht&&e.flags&1048576&&N3(e,Ty,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zg(t,e),t=e.pendingProps;var i=Ff(e,Pr.current);af(e,n),i=DA(null,e,r,t,i,n);var o=NA();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zr(r)?(o=!0,Cy(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,PA(e),i.updater=Ub,e.stateNode=i,i._reactInternals=e,FS(e,r,t,n),e=VS(null,e,r,!0,o,n)):(e.tag=0,Ht&&o&&xA(e),Dr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=V7(r),t=co(r,t),i){case 0:e=US(null,e,r,t,n);break e;case 1:e=KR(null,e,r,t,n);break e;case 11:e=GR(null,e,r,t,n);break e;case 14:e=qR(null,e,r,co(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:co(r,i),US(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:co(r,i),KR(t,e,r,i,n);case 3:e:{if(dB(e),t===null)throw Error(le(387));r=e.pendingProps,o=e.memoizedState,i=o.element,B3(t,e),ky(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Wf(Error(le(423)),e),e=XR(t,e,r,n,i);break e}else if(r!==i){i=Wf(Error(le(424)),e),e=XR(t,e,r,n,i);break e}else for(bi=nu(e.stateNode.containerInfo.firstChild),Si=e,Ht=!0,bo=null,n=L3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bf(),r===i){e=Qa(t,e,n);break e}Dr(t,e,r,n)}e=e.child}return e;case 5:return U3(e),t===null&&$S(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,RS(r,i)?a=null:o!==null&&RS(r,o)&&(e.flags|=32),hB(t,e),Dr(t,e,a,n),e.child;case 6:return t===null&&$S(e),null;case 13:return pB(t,e,n);case 4:return OA(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Uf(e,null,r,n):Dr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:co(r,i),GR(t,e,r,i,n);case 7:return Dr(t,e,e.pendingProps,n),e.child;case 8:return Dr(t,e,e.pendingProps.children,n),e.child;case 12:return Dr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,It(Py,r._currentValue),r._currentValue=a,o!==null)if(Po(o.value,a)){if(o.children===i.children&&!Qr.current){e=Qa(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=za(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),jS(o.return,n,e),s.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(le(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),jS(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Dr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,af(e,n),i=Yi(i),r=r(i),e.flags|=1,Dr(t,e,r,n),e.child;case 14:return r=e.type,i=co(r,e.pendingProps),i=co(r.type,i),qR(t,e,r,i,n);case 15:return cB(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:co(r,i),Zg(t,e),e.tag=1,Zr(r)?(t=!0,Cy(e)):t=!1,af(e,n),sB(e,r,i),FS(e,r,i,n),VS(null,e,r,!0,t,n);case 19:return vB(t,e,n);case 22:return fB(t,e,n)}throw Error(le(156,e.tag))};function RB(t,e){return i3(t,e)}function U7(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wi(t,e,n,r){return new U7(t,e,n,r)}function zA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function V7(t){if(typeof t=="function")return zA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lA)return 11;if(t===cA)return 14}return 2}function au(t,e){var n=t.alternate;return n===null?(n=Wi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ny(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")zA(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Nc:return Ol(n.children,i,o,e);case uA:a=8,i|=8;break;case lS:return t=Wi(12,n,e,i|2),t.elementType=lS,t.lanes=o,t;case cS:return t=Wi(13,n,e,i),t.elementType=cS,t.lanes=o,t;case fS:return t=Wi(19,n,e,i),t.elementType=fS,t.lanes=o,t;case UF:return zb(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FF:a=10;break e;case BF:a=9;break e;case lA:a=11;break e;case cA:a=14;break e;case Is:a=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=Wi(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ol(t,e,n,r){return t=Wi(7,t,r,e),t.lanes=n,t}function zb(t,e,n,r){return t=Wi(22,t,r,e),t.elementType=UF,t.lanes=n,t.stateNode={isHidden:!1},t}function b1(t,e,n){return t=Wi(6,t,null,e),t.lanes=n,t}function w1(t,e,n){return e=Wi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W7(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=e1(0),this.expirationTimes=e1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function HA(t,e,n,r,i,o,a,s,u){return t=new W7(t,e,n,s,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Wi(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},PA(o),t}function z7(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function IB(t){if(!t)return pu;t=t._reactInternals;e:{if(Jl(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Zr(n))return I3(t,n,e)}return e}function DB(t,e,n,r,i,o,a,s,u){return t=HA(n,r,!0,t,i,o,a,s,u),t.context=IB(null),n=t.current,r=Br(),i=ou(n),o=za(r,i),o.callback=e??null,ru(n,o,i),t.current.lanes=i,Gv(t,i,r),ei(t,r),t}function Hb(t,e,n,r){var i=e.current,o=Br(),a=ou(i);return n=IB(n),e.context===null?e.context=n:e.pendingContext=n,e=za(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ru(i,e,a),t!==null&&(Ao(t,i,a,o),Yg(t,i,a)),a}function Ly(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function GA(t,e){oI(t,e),(t=t.alternate)&&oI(t,e)}function H7(){return null}var NB=typeof reportError=="function"?reportError:function(t){console.error(t)};function qA(t){this._internalRoot=t}Gb.prototype.render=qA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Hb(t,e,null,null)};Gb.prototype.unmount=qA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bl(function(){Hb(null,t,null,null)}),e[Ya]=null}};function Gb(t){this._internalRoot=t}Gb.prototype.unstable_scheduleHydration=function(t){if(t){var e=f3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ls.length&&e!==0&&e<Ls[n].priority;n++);Ls.splice(n,0,t),n===0&&d3(t)}};function KA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function aI(){}function G7(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Ly(a);o.call(l)}}var a=DB(e,r,t,0,null,!1,!1,"",aI);return t._reactRootContainer=a,t[Ya]=a.current,Ap(t.nodeType===8?t.parentNode:t),Bl(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Ly(u);s.call(l)}}var u=HA(t,0,!1,null,null,!1,!1,"",aI);return t._reactRootContainer=u,t[Ya]=u.current,Ap(t.nodeType===8?t.parentNode:t),Bl(function(){Hb(e,u,n,r)}),u}function Kb(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var u=Ly(a);s.call(u)}}Hb(e,a,t,i)}else a=G7(n,e,t,i,r);return Ly(a)}l3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Md(e.pendingLanes);n!==0&&(dA(e,n|1),ei(e,vn()),!(ut&6)&&(zf=vn()+500,Tu()))}break;case 13:Bl(function(){var r=Ja(t,1);if(r!==null){var i=Br();Ao(r,t,1,i)}}),GA(t,1)}};pA=function(t){if(t.tag===13){var e=Ja(t,134217728);if(e!==null){var n=Br();Ao(e,t,134217728,n)}GA(t,134217728)}};c3=function(t){if(t.tag===13){var e=ou(t),n=Ja(t,e);if(n!==null){var r=Br();Ao(n,t,e,r)}GA(t,e)}};f3=function(){return bt};h3=function(t,e){var n=bt;try{return bt=t,e()}finally{bt=n}};xS=function(t,e,n){switch(e){case"input":if(pS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lb(r);if(!i)throw Error(le(90));WF(r),pS(r,i)}}}break;case"textarea":HF(t,n);break;case"select":e=n.value,e!=null&&tf(t,!!n.multiple,e,!1)}};QF=UA;ZF=Bl;var q7={usingClientEntryPoint:!1,Events:[Kv,Lc,Lb,YF,JF,UA]},pd={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K7={bundleType:pd.bundleType,version:pd.version,rendererPackageName:pd.rendererPackageName,rendererConfig:pd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=n3(t),t===null?null:t.stateNode},findFiberByHostInstance:pd.findFiberByHostInstance||H7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{Nb=Jm.inject(K7),oa=Jm}catch{}}Pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q7;Pi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KA(e))throw Error(le(200));return z7(t,e,null,n)};Pi.createRoot=function(t,e){if(!KA(t))throw Error(le(299));var n=!1,r="",i=NB;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=HA(t,1,!1,null,null,n,!1,r,i),t[Ya]=e.current,Ap(t.nodeType===8?t.parentNode:t),new qA(e)};Pi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=n3(e),t=t===null?null:t.stateNode,t};Pi.flushSync=function(t){return Bl(t)};Pi.hydrate=function(t,e,n){if(!qb(e))throw Error(le(200));return Kb(null,t,e,!0,n)};Pi.hydrateRoot=function(t,e,n){if(!KA(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=NB;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=DB(e,null,t,1,n??null,i,!1,o,a),t[Ya]=e.current,Ap(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gb(e)};Pi.render=function(t,e,n){if(!qb(e))throw Error(le(200));return Kb(null,t,e,!1,n)};Pi.unmountComponentAtNode=function(t){if(!qb(t))throw Error(le(40));return t._reactRootContainer?(Bl(function(){Kb(null,null,t,!1,function(){t._reactRootContainer=null,t[Ya]=null})}),!0):!1};Pi.unstable_batchedUpdates=UA;Pi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qb(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Kb(t,e,n,!1,r)};Pi.version="18.3.1-next-f1338f8080-20240426";function MB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MB)}catch(t){console.error(t)}}MB(),MF.exports=Pi;var ea=MF.exports;const $B=wt(ea);var jB,sI=ea;jB=sI.createRoot,sI.hydrateRoot;const X7=1,Y7=1e6;let x1=0;function J7(){return x1=(x1+1)%Number.MAX_SAFE_INTEGER,x1.toString()}const _1=new Map,uI=t=>{if(_1.has(t))return;const e=setTimeout(()=>{_1.delete(t),Yd({type:"REMOVE_TOAST",toastId:t})},Y7);_1.set(t,e)},Q7=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,X7)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?uI(n):t.toasts.forEach(r=>{uI(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ry=[];let iy={toasts:[]};function Yd(t){iy=Q7(iy,t),ry.forEach(e=>{e(iy)})}function Z7({...t}){const e=J7(),n=i=>Yd({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Yd({type:"DISMISS_TOAST",toastId:e});return Yd({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function XA(){const[t,e]=k.useState(iy);return k.useEffect(()=>(ry.push(e),()=>{const n=ry.indexOf(e);n>-1&&ry.splice(n,1)}),[t]),{...t,toast:Z7,dismiss:n=>Yd({type:"DISMISS_TOAST",toastId:n})}}function Mn(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function lI(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function LB(...t){return e=>{let n=!1;const r=t.map(i=>{const o=lI(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():lI(t[i],null)}}}}function Oo(...t){return k.useCallback(LB(...t),t)}function Xb(t,e=[]){let n=[];function r(o,a){const s=k.createContext(a),u=n.length;n=[...n,a];const l=f=>{var g;const{scope:h,children:d,...p}=f,v=((g=h==null?void 0:h[t])==null?void 0:g[u])||s,m=k.useMemo(()=>p,Object.values(p));return N.jsx(v.Provider,{value:m,children:d})};l.displayName=o+"Provider";function c(f,h){var v;const d=((v=h==null?void 0:h[t])==null?void 0:v[u])||s,p=k.useContext(d);if(p)return p;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[l,c]}const i=()=>{const o=n.map(a=>k.createContext(a));return function(s){const u=(s==null?void 0:s[t])||o;return k.useMemo(()=>({[`__scope${t}`]:{...s,[t]:u}}),[s,u])}};return i.scopeName=t,[r,eX(i,...e)]}function eX(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:u,scopeName:l})=>{const f=u(o)[`__scope${l}`];return{...s,...f}},{});return k.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Fy(t){const e=nX(t),n=k.forwardRef((r,i)=>{const{children:o,...a}=r,s=k.Children.toArray(o),u=s.find(iX);if(u){const l=u.props.children,c=s.map(f=>f===u?k.Children.count(l)>1?k.Children.only(null):k.isValidElement(l)?l.props.children:null:f);return N.jsx(e,{...a,ref:i,children:k.isValidElement(l)?k.cloneElement(l,void 0,c):null})}return N.jsx(e,{...a,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}var tX=Fy("Slot");function nX(t){const e=k.forwardRef((n,r)=>{const{children:i,...o}=n;if(k.isValidElement(i)){const a=aX(i),s=oX(o,i.props);return i.type!==k.Fragment&&(s.ref=r?LB(r,a):a),k.cloneElement(i,s)}return k.Children.count(i)>1?k.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var FB=Symbol("radix.slottable");function rX(t){const e=({children:n})=>N.jsx(N.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=FB,e}function iX(t){return k.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===FB}function oX(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...s)=>{const u=o(...s);return i(...s),u}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function aX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function sX(t){const e=t+"CollectionProvider",[n,r]=Xb(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:m,children:g}=v,y=V.useRef(null),b=V.useRef(new Map).current;return N.jsx(i,{scope:m,itemMap:b,collectionRef:y,children:g})};a.displayName=e;const s=t+"CollectionSlot",u=Fy(s),l=V.forwardRef((v,m)=>{const{scope:g,children:y}=v,b=o(s,g),_=Oo(m,b.collectionRef);return N.jsx(u,{ref:_,children:y})});l.displayName=s;const c=t+"CollectionItemSlot",f="data-radix-collection-item",h=Fy(c),d=V.forwardRef((v,m)=>{const{scope:g,children:y,...b}=v,_=V.useRef(null),x=Oo(m,_),S=o(c,g);return V.useEffect(()=>(S.itemMap.set(_,{ref:_,...b}),()=>void S.itemMap.delete(_))),N.jsx(h,{[f]:"",ref:x,children:y})});d.displayName=c;function p(v){const m=o(t+"CollectionConsumer",v);return V.useCallback(()=>{const y=m.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(m.itemMap.values()).sort((S,E)=>b.indexOf(S.ref.current)-b.indexOf(E.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:l,ItemSlot:d},p,r]}var uX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oi=uX.reduce((t,e)=>{const n=Fy(`Primitive.${e}`),r=k.forwardRef((i,o)=>{const{asChild:a,...s}=i,u=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),N.jsx(u,{...s,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function BB(t,e){t&&ea.flushSync(()=>t.dispatchEvent(e))}function vu(t){const e=k.useRef(t);return k.useEffect(()=>{e.current=t}),k.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function lX(t,e=globalThis==null?void 0:globalThis.document){const n=vu(t);k.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var cX="DismissableLayer",eE="dismissableLayer.update",fX="dismissableLayer.pointerDownOutside",hX="dismissableLayer.focusOutside",cI,UB=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),YA=k.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...u}=t,l=k.useContext(UB),[c,f]=k.useState(null),h=(c==null?void 0:c.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,d]=k.useState({}),p=Oo(e,E=>f(E)),v=Array.from(l.layers),[m]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),g=v.indexOf(m),y=c?v.indexOf(c):-1,b=l.layersWithOutsidePointerEventsDisabled.size>0,_=y>=g,x=pX(E=>{const C=E.target,A=[...l.branches].some(T=>T.contains(C));!_||A||(i==null||i(E),a==null||a(E),E.defaultPrevented||s==null||s())},h),S=vX(E=>{const C=E.target;[...l.branches].some(T=>T.contains(C))||(o==null||o(E),a==null||a(E),E.defaultPrevented||s==null||s())},h);return lX(E=>{y===l.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&s&&(E.preventDefault(),s()))},h),k.useEffect(()=>{if(c)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(cI=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(c)),l.layers.add(c),fI(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=cI)}},[c,h,n,l]),k.useEffect(()=>()=>{c&&(l.layers.delete(c),l.layersWithOutsidePointerEventsDisabled.delete(c),fI())},[c,l]),k.useEffect(()=>{const E=()=>d({});return document.addEventListener(eE,E),()=>document.removeEventListener(eE,E)},[]),N.jsx(oi.div,{...u,ref:p,style:{pointerEvents:b?_?"auto":"none":void 0,...t.style},onFocusCapture:Mn(t.onFocusCapture,S.onFocusCapture),onBlurCapture:Mn(t.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Mn(t.onPointerDownCapture,x.onPointerDownCapture)})});YA.displayName=cX;var dX="DismissableLayerBranch",VB=k.forwardRef((t,e)=>{const n=k.useContext(UB),r=k.useRef(null),i=Oo(e,r);return k.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),N.jsx(oi.div,{...t,ref:i})});VB.displayName=dX;function pX(t,e=globalThis==null?void 0:globalThis.document){const n=vu(t),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const o=s=>{if(s.target&&!r.current){let u=function(){WB(fX,n,l,{discrete:!0})};const l={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function vX(t,e=globalThis==null?void 0:globalThis.document){const n=vu(t),r=k.useRef(!1);return k.useEffect(()=>{const i=o=>{o.target&&!r.current&&WB(hX,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function fI(){const t=new CustomEvent(eE);document.dispatchEvent(t)}function WB(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?BB(i,o):i.dispatchEvent(o)}var mX=YA,gX=VB,mu=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},yX="Portal",zB=k.forwardRef((t,e)=>{var s;const{container:n,...r}=t,[i,o]=k.useState(!1);mu(()=>o(!0),[]);const a=n||i&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return a?$B.createPortal(N.jsx(oi.div,{...r,ref:e}),a):null});zB.displayName=yX;function bX(t,e){return k.useReducer((n,r)=>e[n][r]??n,t)}var JA=t=>{const{present:e,children:n}=t,r=wX(e),i=typeof n=="function"?n({present:r.isPresent}):k.Children.only(n),o=Oo(r.ref,xX(i));return typeof n=="function"||r.isPresent?k.cloneElement(i,{ref:o}):null};JA.displayName="Presence";function wX(t){const[e,n]=k.useState(),r=k.useRef(null),i=k.useRef(t),o=k.useRef("none"),a=t?"mounted":"unmounted",[s,u]=bX(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const l=Qm(r.current);o.current=s==="mounted"?l:"none"},[s]),mu(()=>{const l=r.current,c=i.current;if(c!==t){const h=o.current,d=Qm(l);t?u("MOUNT"):d==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&h!==d?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,u]),mu(()=>{if(e){let l;const c=e.ownerDocument.defaultView??window,f=d=>{const v=Qm(r.current).includes(d.animationName);if(d.target===e&&v&&(u("ANIMATION_END"),!i.current)){const m=e.style.animationFillMode;e.style.animationFillMode="forwards",l=c.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=m)})}},h=d=>{d.target===e&&(o.current=Qm(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{c.clearTimeout(l),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:k.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function Qm(t){return(t==null?void 0:t.animationName)||"none"}function xX(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var _X=DF[" useInsertionEffect ".trim().toString()]||mu;function SX({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,o,a]=EX({defaultProp:e,onChange:n}),s=t!==void 0,u=s?t:i;{const c=k.useRef(t!==void 0);k.useEffect(()=>{const f=c.current;f!==s&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=s},[s,r])}const l=k.useCallback(c=>{var f;if(s){const h=CX(c)?c(t):c;h!==t&&((f=a.current)==null||f.call(a,h))}else o(c)},[s,t,o,a]);return[u,l]}function EX({defaultProp:t,onChange:e}){const[n,r]=k.useState(t),i=k.useRef(n),o=k.useRef(e);return _X(()=>{o.current=e},[e]),k.useEffect(()=>{var a;i.current!==n&&((a=o.current)==null||a.call(o,n),i.current=n)},[n,i]),[n,r,o]}function CX(t){return typeof t=="function"}var AX=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),TX="VisuallyHidden",Yb=k.forwardRef((t,e)=>N.jsx(oi.span,{...t,ref:e,style:{...AX,...t.style}}));Yb.displayName=TX;var PX=Yb,QA="ToastProvider",[ZA,OX,kX]=sX("Toast"),[HB,H5e]=Xb("Toast",[kX]),[RX,Jb]=HB(QA),GB=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=t,[s,u]=k.useState(null),[l,c]=k.useState(0),f=k.useRef(!1),h=k.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${QA}\`. Expected non-empty \`string\`.`),N.jsx(ZA.Provider,{scope:e,children:N.jsx(RX,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:l,viewport:s,onViewportChange:u,onToastAdd:k.useCallback(()=>c(d=>d+1),[]),onToastRemove:k.useCallback(()=>c(d=>d-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:a})})};GB.displayName=QA;var qB="ToastViewport",IX=["F8"],tE="toast.viewportPause",nE="toast.viewportResume",KB=k.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=IX,label:i="Notifications ({hotkey})",...o}=t,a=Jb(qB,n),s=OX(n),u=k.useRef(null),l=k.useRef(null),c=k.useRef(null),f=k.useRef(null),h=Oo(e,f,a.onViewportChange),d=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=a.toastCount>0;k.useEffect(()=>{const m=g=>{var b;r.length!==0&&r.every(_=>g[_]||g.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[r]),k.useEffect(()=>{const m=u.current,g=f.current;if(p&&m&&g){const y=()=>{if(!a.isClosePausedRef.current){const S=new CustomEvent(tE);g.dispatchEvent(S),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const S=new CustomEvent(nE);g.dispatchEvent(S),a.isClosePausedRef.current=!1}},_=S=>{!m.contains(S.relatedTarget)&&b()},x=()=>{m.contains(document.activeElement)||b()};return m.addEventListener("focusin",y),m.addEventListener("focusout",_),m.addEventListener("pointermove",y),m.addEventListener("pointerleave",x),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{m.removeEventListener("focusin",y),m.removeEventListener("focusout",_),m.removeEventListener("pointermove",y),m.removeEventListener("pointerleave",x),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[p,a.isClosePausedRef]);const v=k.useCallback(({tabbingDirection:m})=>{const y=s().map(b=>{const _=b.ref.current,x=[_,...HX(_)];return m==="forwards"?x:x.reverse()});return(m==="forwards"?y.reverse():y).flat()},[s]);return k.useEffect(()=>{const m=f.current;if(m){const g=y=>{var x,S,E;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const C=document.activeElement,A=y.shiftKey;if(y.target===m&&A){(x=l.current)==null||x.focus();return}const R=v({tabbingDirection:A?"backwards":"forwards"}),I=R.findIndex(M=>M===C);S1(R.slice(I+1))?y.preventDefault():A?(S=l.current)==null||S.focus():(E=c.current)==null||E.focus()}};return m.addEventListener("keydown",g),()=>m.removeEventListener("keydown",g)}},[s,v]),N.jsxs(gX,{ref:u,role:"region","aria-label":i.replace("{hotkey}",d),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&N.jsx(rE,{ref:l,onFocusFromOutsideViewport:()=>{const m=v({tabbingDirection:"forwards"});S1(m)}}),N.jsx(ZA.Slot,{scope:n,children:N.jsx(oi.ol,{tabIndex:-1,...o,ref:h})}),p&&N.jsx(rE,{ref:c,onFocusFromOutsideViewport:()=>{const m=v({tabbingDirection:"backwards"});S1(m)}})]})});KB.displayName=qB;var XB="ToastFocusProxy",rE=k.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,o=Jb(XB,n);return N.jsx(Yb,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var l;const s=a.relatedTarget;!((l=o.viewport)!=null&&l.contains(s))&&r()}})});rE.displayName=XB;var Yv="Toast",DX="toast.swipeStart",NX="toast.swipeMove",MX="toast.swipeCancel",$X="toast.swipeEnd",YB=k.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...a}=t,[s,u]=SX({prop:r,defaultProp:i??!0,onChange:o,caller:Yv});return N.jsx(JA,{present:n||s,children:N.jsx(FX,{open:s,...a,ref:e,onClose:()=>u(!1),onPause:vu(t.onPause),onResume:vu(t.onResume),onSwipeStart:Mn(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Mn(t.onSwipeMove,l=>{const{x:c,y:f}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${c}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Mn(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Mn(t.onSwipeEnd,l=>{const{x:c,y:f}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${c}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),u(!1)})})})});YB.displayName=Yv;var[jX,LX]=HB(Yv,{onClose(){}}),FX=k.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:u,onResume:l,onSwipeStart:c,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:d,...p}=t,v=Jb(Yv,n),[m,g]=k.useState(null),y=Oo(e,M=>g(M)),b=k.useRef(null),_=k.useRef(null),x=i||v.duration,S=k.useRef(0),E=k.useRef(x),C=k.useRef(0),{onToastAdd:A,onToastRemove:T}=v,P=vu(()=>{var B;(m==null?void 0:m.contains(document.activeElement))&&((B=v.viewport)==null||B.focus()),a()}),R=k.useCallback(M=>{!M||M===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(P,M))},[P]);k.useEffect(()=>{const M=v.viewport;if(M){const B=()=>{R(E.current),l==null||l()},z=()=>{const U=new Date().getTime()-S.current;E.current=E.current-U,window.clearTimeout(C.current),u==null||u()};return M.addEventListener(tE,z),M.addEventListener(nE,B),()=>{M.removeEventListener(tE,z),M.removeEventListener(nE,B)}}},[v.viewport,x,u,l,R]),k.useEffect(()=>{o&&!v.isClosePausedRef.current&&R(x)},[o,x,v.isClosePausedRef,R]),k.useEffect(()=>(A(),()=>T()),[A,T]);const I=k.useMemo(()=>m?rU(m):null,[m]);return v.viewport?N.jsxs(N.Fragment,{children:[I&&N.jsx(BX,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),N.jsx(jX,{scope:n,onClose:P,children:ea.createPortal(N.jsx(ZA.ItemSlot,{scope:n,children:N.jsx(mX,{asChild:!0,onEscapeKeyDown:Mn(s,()=>{v.isFocusedToastEscapeKeyDownRef.current||P(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:N.jsx(oi.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Mn(t.onKeyDown,M=>{M.key==="Escape"&&(s==null||s(M.nativeEvent),M.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Mn(t.onPointerDown,M=>{M.button===0&&(b.current={x:M.clientX,y:M.clientY})}),onPointerMove:Mn(t.onPointerMove,M=>{if(!b.current)return;const B=M.clientX-b.current.x,z=M.clientY-b.current.y,U=!!_.current,$=["left","right"].includes(v.swipeDirection),L=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,H=$?L(0,B):0,X=$?0:L(0,z),q=M.pointerType==="touch"?10:2,J={x:H,y:X},ae={originalEvent:M,delta:J};U?(_.current=J,Zm(NX,f,ae,{discrete:!1})):hI(J,v.swipeDirection,q)?(_.current=J,Zm(DX,c,ae,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(B)>q||Math.abs(z)>q)&&(b.current=null)}),onPointerUp:Mn(t.onPointerUp,M=>{const B=_.current,z=M.target;if(z.hasPointerCapture(M.pointerId)&&z.releasePointerCapture(M.pointerId),_.current=null,b.current=null,B){const U=M.currentTarget,$={originalEvent:M,delta:B};hI(B,v.swipeDirection,v.swipeThreshold)?Zm($X,d,$,{discrete:!0}):Zm(MX,h,$,{discrete:!0}),U.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),BX=t=>{const{__scopeToast:e,children:n,...r}=t,i=Jb(Yv,e),[o,a]=k.useState(!1),[s,u]=k.useState(!1);return WX(()=>a(!0)),k.useEffect(()=>{const l=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(l)},[]),s?null:N.jsx(zB,{asChild:!0,children:N.jsx(Yb,{...r,children:o&&N.jsxs(N.Fragment,{children:[i.label," ",n]})})})},UX="ToastTitle",JB=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return N.jsx(oi.div,{...r,ref:e})});JB.displayName=UX;var VX="ToastDescription",QB=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return N.jsx(oi.div,{...r,ref:e})});QB.displayName=VX;var ZB="ToastAction",eU=k.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?N.jsx(nU,{altText:n,asChild:!0,children:N.jsx(eT,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ZB}\`. Expected non-empty \`string\`.`),null)});eU.displayName=ZB;var tU="ToastClose",eT=k.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=LX(tU,n);return N.jsx(nU,{asChild:!0,children:N.jsx(oi.button,{type:"button",...r,ref:e,onClick:Mn(t.onClick,i.onClose)})})});eT.displayName=tU;var nU=k.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return N.jsx(oi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function rU(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),zX(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...rU(r))}}),e}function Zm(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?BB(i,o):i.dispatchEvent(o)}var hI=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),o=r>i;return e==="left"||e==="right"?o&&r>n:!o&&i>n};function WX(t=()=>{}){const e=vu(t);mu(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function zX(t){return t.nodeType===t.ELEMENT_NODE}function HX(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function S1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var GX=GB,iU=KB,oU=YB,aU=JB,sU=QB,uU=eU,lU=eT;function cU(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=cU(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qe(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=cU(t))&&(r&&(r+=" "),r+=e);return r}const dI=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,pI=qe,fU=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return pI(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,a=Object.keys(i).map(l=>{const c=n==null?void 0:n[l],f=o==null?void 0:o[l];if(c===null)return null;const h=dI(c)||dI(f);return i[l][h]}),s=n&&Object.entries(n).reduce((l,c)=>{let[f,h]=c;return h===void 0||(l[f]=h),l},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((l,c)=>{let{class:f,className:h,...d}=c;return Object.entries(d).every(p=>{let[v,m]=p;return Array.isArray(m)?m.includes({...o,...s}[v]):{...o,...s}[v]===m})?[...l,f,h]:l},[]);return pI(t,a,u,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qX=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hU=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KX={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...s},u)=>k.createElement("svg",{ref:u,...KX,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:hU("lucide",i),...s},[...a.map(([l,c])=>k.createElement(l,c)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=(t,e)=>{const n=k.forwardRef(({className:r,...i},o)=>k.createElement(XX,{ref:o,iconNode:e,className:hU(`lucide-${qX(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=dU("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JX=dU("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tT="-",QX=t=>{const e=eY(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const s=a.split(tT);return s[0]===""&&s.length!==1&&s.shift(),pU(s,e)||ZX(a)},getConflictingClassGroupIds:(a,s)=>{const u=n[a]||[];return s&&r[a]?[...u,...r[a]]:u}}},pU=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?pU(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(tT);return(a=e.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId},vI=/^\[(.+)\]$/,ZX=t=>{if(vI.test(t)){const e=vI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},eY=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return nY(Object.entries(t.classGroups),n).forEach(([o,a])=>{iE(a,r,o,e)}),r},iE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:mI(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(tY(i)){iE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,a])=>{iE(a,mI(e,o),n,r)})})},mI=(t,e)=>{let n=t;return e.split(tT).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},tY=t=>t.isThemeGetter,nY=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[e+a,s])):o);return[n,i]}):t,rY=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set(o,a){n.has(o)?n.set(o,a):i(o,a)}}},vU="!",iY=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,a=s=>{const u=[];let l=0,c=0,f;for(let m=0;m<s.length;m++){let g=s[m];if(l===0){if(g===i&&(r||s.slice(m,m+o)===e)){u.push(s.slice(c,m)),c=m+o;continue}if(g==="/"){f=m;continue}}g==="["?l++:g==="]"&&l--}const h=u.length===0?s:s.substring(c),d=h.startsWith(vU),p=d?h.substring(1):h,v=f&&f>c?f-c:void 0;return{modifiers:u,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:v}};return n?s=>n({className:s,parseClassName:a}):a},oY=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},aY=t=>({cache:rY(t.cacheSize),parseClassName:iY(t),...QX(t)}),sY=/\s+/,uY=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],a=t.trim().split(sY);let s="";for(let u=a.length-1;u>=0;u-=1){const l=a[u],{modifiers:c,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:d}=n(l);let p=!!d,v=r(p?h.substring(0,d):h);if(!v){if(!p){s=l+(s.length>0?" "+s:s);continue}if(v=r(h),!v){s=l+(s.length>0?" "+s:s);continue}p=!1}const m=oY(c).join(":"),g=f?m+vU:m,y=g+v;if(o.includes(y))continue;o.push(y);const b=i(v,p);for(let _=0;_<b.length;++_){const x=b[_];o.push(g+x)}s=l+(s.length>0?" "+s:s)}return s};function lY(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=mU(e))&&(r&&(r+=" "),r+=n);return r}const mU=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=mU(t[r]))&&(n&&(n+=" "),n+=e);return n};function cY(t,...e){let n,r,i,o=a;function a(u){const l=e.reduce((c,f)=>f(c),t());return n=aY(l),r=n.cache.get,i=n.cache.set,o=s,s(u)}function s(u){const l=r(u);if(l)return l;const c=uY(u,n);return i(u,c),c}return function(){return o(lY.apply(null,arguments))}}const jt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},gU=/^\[(?:([a-z-]+):)?(.+)\]$/i,fY=/^\d+\/\d+$/,hY=new Set(["px","full","screen"]),dY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pa=t=>uf(t)||hY.has(t)||fY.test(t),As=t=>Th(t,"length",CY),uf=t=>!!t&&!Number.isNaN(Number(t)),E1=t=>Th(t,"number",uf),vd=t=>!!t&&Number.isInteger(Number(t)),yY=t=>t.endsWith("%")&&uf(t.slice(0,-1)),He=t=>gU.test(t),Ts=t=>dY.test(t),bY=new Set(["length","size","percentage"]),wY=t=>Th(t,bY,yU),xY=t=>Th(t,"position",yU),_Y=new Set(["image","url"]),SY=t=>Th(t,_Y,TY),EY=t=>Th(t,"",AY),md=()=>!0,Th=(t,e,n)=>{const r=gU.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},CY=t=>pY.test(t)&&!vY.test(t),yU=()=>!1,AY=t=>mY.test(t),TY=t=>gY.test(t),PY=()=>{const t=jt("colors"),e=jt("spacing"),n=jt("blur"),r=jt("brightness"),i=jt("borderColor"),o=jt("borderRadius"),a=jt("borderSpacing"),s=jt("borderWidth"),u=jt("contrast"),l=jt("grayscale"),c=jt("hueRotate"),f=jt("invert"),h=jt("gap"),d=jt("gradientColorStops"),p=jt("gradientColorStopPositions"),v=jt("inset"),m=jt("margin"),g=jt("opacity"),y=jt("padding"),b=jt("saturate"),_=jt("scale"),x=jt("sepia"),S=jt("skew"),E=jt("space"),C=jt("translate"),A=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",He,e],R=()=>[He,e],I=()=>["",Pa,As],M=()=>["auto",uf,He],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",He],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[uf,He];return{cacheSize:500,separator:":",theme:{colors:[md],spacing:[Pa,As],blur:["none","",Ts,He],brightness:X(),borderColor:[t],borderRadius:["none","","full",Ts,He],borderSpacing:R(),borderWidth:I(),contrast:X(),grayscale:L(),hueRotate:X(),invert:L(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[yY,As],inset:P(),margin:P(),opacity:X(),padding:R(),saturate:X(),scale:X(),sepia:L(),skew:X(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",He]}],container:["container"],columns:[{columns:[Ts]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),He]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vd,He]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",He]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",vd,He]}],"grid-cols":[{"grid-cols":[md]}],"col-start-end":[{col:["auto",{span:["full",vd,He]},He]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[md]}],"row-start-end":[{row:["auto",{span:[vd,He]},He]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",He]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",He]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",He,e]}],"min-w":[{"min-w":[He,e,"min","max","fit"]}],"max-w":[{"max-w":[He,e,"none","full","min","max","fit","prose",{screen:[Ts]},Ts]}],h:[{h:[He,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[He,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[He,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[He,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ts,As]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",E1]}],"font-family":[{font:[md]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",He]}],"line-clamp":[{"line-clamp":["none",uf,E1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pa,He]}],"list-image":[{"list-image":["none",He]}],"list-style-type":[{list:["none","disc","decimal",He]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pa,As]}],"underline-offset":[{"underline-offset":["auto",Pa,He]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",He]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",He]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),xY]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wY]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},SY]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[d]}],"gradient-via":[{via:[d]}],"gradient-to":[{to:[d]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Pa,He]}],"outline-w":[{outline:[Pa,As]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[Pa,As]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ts,EY]}],"shadow-color":[{shadow:[md]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Ts,He]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",He]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",He]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",He]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[vd,He]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",He]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",He]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",He]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Pa,As,E1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},OY=cY(PY);function Gt(...t){return OY(qe(t))}const kY=GX,bU=k.forwardRef(({className:t,...e},n)=>N.jsx(iU,{ref:n,className:Gt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));bU.displayName=iU.displayName;const RY=fU("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),wU=k.forwardRef(({className:t,variant:e,...n},r)=>N.jsx(oU,{ref:r,className:Gt(RY({variant:e}),t),...n}));wU.displayName=oU.displayName;const IY=k.forwardRef(({className:t,...e},n)=>N.jsx(uU,{ref:n,className:Gt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));IY.displayName=uU.displayName;const xU=k.forwardRef(({className:t,...e},n)=>N.jsx(lU,{ref:n,className:Gt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:N.jsx(JX,{className:"h-4 w-4"})}));xU.displayName=lU.displayName;const _U=k.forwardRef(({className:t,...e},n)=>N.jsx(aU,{ref:n,className:Gt("text-sm font-semibold",t),...e}));_U.displayName=aU.displayName;const SU=k.forwardRef(({className:t,...e},n)=>N.jsx(sU,{ref:n,className:Gt("text-sm opacity-90",t),...e}));SU.displayName=sU.displayName;function DY(){const{toasts:t}=XA();return N.jsxs(kY,{children:[t.map(function({id:e,title:n,description:r,action:i,...o}){return N.jsxs(wU,{...o,children:[N.jsxs("div",{className:"grid gap-1",children:[n&&N.jsx(_U,{children:n}),r&&N.jsx(SU,{children:r})]}),i,N.jsx(xU,{})]},e)}),N.jsx(bU,{})]})}var gI=["light","dark"],NY="(prefers-color-scheme: dark)",MY=k.createContext(void 0),$Y={setTheme:t=>{},themes:[]},jY=()=>{var t;return(t=k.useContext(MY))!=null?t:$Y};k.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:a,attrs:s,nonce:u})=>{let l=o==="system",c=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${s.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=i?gI.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(p,v=!1,m=!0)=>{let g=a?a[p]:p,y=v?p+"|| ''":`'${g}'`,b="";return i&&m&&!v&&gI.includes(p)&&(b+=`d.style.colorScheme = '${p}';`),n==="class"?v||g?b+=`c.add(${y})`:b+="null":g&&(b+=`d[s](n,${y})`),b},d=t?`!function(){${c}${h(t)}}()`:r?`!function(){try{${c}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${NY}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}${l?"":"else{"+h(o,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${c}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${f}}catch(t){}}();`;return k.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:d}})});var LY=t=>{switch(t){case"success":return UY;case"info":return WY;case"warning":return VY;case"error":return zY;default:return null}},FY=Array(12).fill(0),BY=({visible:t,className:e})=>V.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},V.createElement("div",{className:"sonner-spinner"},FY.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),UY=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),VY=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),WY=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zY=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),HY=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),GY=()=>{let[t,e]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},oE=1,qY=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:oE++,a=this.toasts.find(u=>u.id===o),s=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(u=>u.id===o?(this.publish({...u,...e,id:o,title:r}),{...u,...e,id:o,dismissible:s,title:r}):u):this.addToast({title:r,...i,dismissible:s,id:o}),o},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let i=e instanceof Promise?e:e(),o=r!==void 0,a,s=i.then(async l=>{if(a=["resolve",l],V.isValidElement(l))o=!1,this.create({id:r,type:"default",message:l});else if(XY(l)&&!l.ok){o=!1;let c=typeof n.error=="function"?await n.error(`HTTP error! status: ${l.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${l.status}`):n.description;this.create({id:r,type:"error",message:c,description:f})}else if(n.success!==void 0){o=!1;let c=typeof n.success=="function"?await n.success(l):n.success,f=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"success",message:c,description:f})}}).catch(async l=>{if(a=["reject",l],n.error!==void 0){o=!1;let c=typeof n.error=="function"?await n.error(l):n.error,f=typeof n.description=="function"?await n.description(l):n.description;this.create({id:r,type:"error",message:c,description:f})}}).finally(()=>{var l;o&&(this.dismiss(r),r=void 0),(l=n.finally)==null||l.call(n)}),u=()=>new Promise((l,c)=>s.then(()=>a[0]==="reject"?c(a[1]):l(a[1])).catch(c));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||oE++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Hr=new qY,KY=(t,e)=>{let n=(e==null?void 0:e.id)||oE++;return Hr.addToast({title:t,...e,id:n}),n},XY=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",YY=KY,JY=()=>Hr.toasts,QY=()=>Hr.getActiveToasts();Object.assign(YY,{success:Hr.success,info:Hr.info,warning:Hr.warning,error:Hr.error,custom:Hr.custom,message:Hr.message,promise:Hr.promise,dismiss:Hr.dismiss,loading:Hr.loading},{getHistory:JY,getToasts:QY});function ZY(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}ZY(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function eg(t){return t.label!==void 0}var eJ=3,tJ="32px",nJ="16px",yI=4e3,rJ=356,iJ=14,oJ=20,aJ=200;function oo(...t){return t.filter(Boolean).join(" ")}function sJ(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var uJ=t=>{var e,n,r,i,o,a,s,u,l,c,f;let{invert:h,toast:d,unstyled:p,interacting:v,setHeights:m,visibleToasts:g,heights:y,index:b,toasts:_,expanded:x,removeToast:S,defaultRichColors:E,closeButton:C,style:A,cancelButtonStyle:T,actionButtonStyle:P,className:R="",descriptionClassName:I="",duration:M,position:B,gap:z,loadingIcon:U,expandByDefault:$,classNames:L,icons:H,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:q}=t,[J,ae]=V.useState(null),[fe,he]=V.useState(null),[de,be]=V.useState(!1),[ne,ue]=V.useState(!1),[ce,Z]=V.useState(!1),[ge,ye]=V.useState(!1),[De,ke]=V.useState(!1),[tt,ft]=V.useState(0),[je,Ye]=V.useState(0),st=V.useRef(d.duration||M||yI),Pt=V.useRef(null),Et=V.useRef(null),fr=b===0,on=b+1<=g,fn=d.type,Kt=d.dismissible!==!1,Xt=d.className||"",ui=d.descriptionClassName||"",no=V.useMemo(()=>y.findIndex(Ie=>Ie.toastId===d.id)||0,[y,d.id]),kr=V.useMemo(()=>{var Ie;return(Ie=d.closeButton)!=null?Ie:C},[d.closeButton,C]),Aa=V.useMemo(()=>d.duration||M||yI,[d.duration,M]),Rr=V.useRef(0),hr=V.useRef(0),Wr=V.useRef(0),dr=V.useRef(null),[sc,bs]=B.split("-"),ju=V.useMemo(()=>y.reduce((Ie,Ve,Ke)=>Ke>=no?Ie:Ie+Ve.height,0),[y,no]),$o=GY(),uc=d.invert||h,nt=fn==="loading";hr.current=V.useMemo(()=>no*z+ju,[no,ju]),V.useEffect(()=>{st.current=Aa},[Aa]),V.useEffect(()=>{be(!0)},[]),V.useEffect(()=>{let Ie=Et.current;if(Ie){let Ve=Ie.getBoundingClientRect().height;return Ye(Ve),m(Ke=>[{toastId:d.id,height:Ve,position:d.position},...Ke]),()=>m(Ke=>Ke.filter(gt=>gt.toastId!==d.id))}},[m,d.id]),V.useLayoutEffect(()=>{if(!de)return;let Ie=Et.current,Ve=Ie.style.height;Ie.style.height="auto";let Ke=Ie.getBoundingClientRect().height;Ie.style.height=Ve,Ye(Ke),m(gt=>gt.find(gn=>gn.toastId===d.id)?gt.map(gn=>gn.toastId===d.id?{...gn,height:Ke}:gn):[{toastId:d.id,height:Ke,position:d.position},...gt])},[de,d.title,d.description,m,d.id]);let Mt=V.useCallback(()=>{ue(!0),ft(hr.current),m(Ie=>Ie.filter(Ve=>Ve.toastId!==d.id)),setTimeout(()=>{S(d)},aJ)},[d,S,m,hr]);V.useEffect(()=>{if(d.promise&&fn==="loading"||d.duration===1/0||d.type==="loading")return;let Ie;return x||v||q&&$o?(()=>{if(Wr.current<Rr.current){let Ve=new Date().getTime()-Rr.current;st.current=st.current-Ve}Wr.current=new Date().getTime()})():st.current!==1/0&&(Rr.current=new Date().getTime(),Ie=setTimeout(()=>{var Ve;(Ve=d.onAutoClose)==null||Ve.call(d,d),Mt()},st.current)),()=>clearTimeout(Ie)},[x,v,d,fn,q,$o,Mt]),V.useEffect(()=>{d.delete&&Mt()},[Mt,d.delete]);function hn(){var Ie,Ve,Ke;return H!=null&&H.loading?V.createElement("div",{className:oo(L==null?void 0:L.loader,(Ie=d==null?void 0:d.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":fn==="loading"},H.loading):U?V.createElement("div",{className:oo(L==null?void 0:L.loader,(Ve=d==null?void 0:d.classNames)==null?void 0:Ve.loader,"sonner-loader"),"data-visible":fn==="loading"},U):V.createElement(BY,{className:oo(L==null?void 0:L.loader,(Ke=d==null?void 0:d.classNames)==null?void 0:Ke.loader),visible:fn==="loading"})}return V.createElement("li",{tabIndex:0,ref:Et,className:oo(R,Xt,L==null?void 0:L.toast,(e=d==null?void 0:d.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[fn],(n=d==null?void 0:d.classNames)==null?void 0:n[fn]),"data-sonner-toast":"","data-rich-colors":(r=d.richColors)!=null?r:E,"data-styled":!(d.jsx||d.unstyled||p),"data-mounted":de,"data-promise":!!d.promise,"data-swiped":De,"data-removed":ne,"data-visible":on,"data-y-position":sc,"data-x-position":bs,"data-index":b,"data-front":fr,"data-swiping":ce,"data-dismissible":Kt,"data-type":fn,"data-invert":uc,"data-swipe-out":ge,"data-swipe-direction":fe,"data-expanded":!!(x||$&&de),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${ne?tt:hr.current}px`,"--initial-height":$?"auto":`${je}px`,...A,...d.style},onDragEnd:()=>{Z(!1),ae(null),dr.current=null},onPointerDown:Ie=>{nt||!Kt||(Pt.current=new Date,ft(hr.current),Ie.target.setPointerCapture(Ie.pointerId),Ie.target.tagName!=="BUTTON"&&(Z(!0),dr.current={x:Ie.clientX,y:Ie.clientY}))},onPointerUp:()=>{var Ie,Ve,Ke,gt;if(ge||!Kt)return;dr.current=null;let gn=Number(((Ie=Et.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),_t=Number(((Ve=Et.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),yn=new Date().getTime()-((Ke=Pt.current)==null?void 0:Ke.getTime()),zt=J==="x"?gn:_t,dn=Math.abs(zt)/yn;if(Math.abs(zt)>=oJ||dn>.11){ft(hr.current),(gt=d.onDismiss)==null||gt.call(d,d),he(J==="x"?gn>0?"right":"left":_t>0?"down":"up"),Mt(),ye(!0),ke(!1);return}Z(!1),ae(null)},onPointerMove:Ie=>{var Ve,Ke,gt,gn;if(!dr.current||!Kt||((Ve=window.getSelection())==null?void 0:Ve.toString().length)>0)return;let _t=Ie.clientY-dr.current.y,yn=Ie.clientX-dr.current.x,zt=(Ke=t.swipeDirections)!=null?Ke:sJ(B);!J&&(Math.abs(yn)>1||Math.abs(_t)>1)&&ae(Math.abs(yn)>Math.abs(_t)?"x":"y");let dn={x:0,y:0};J==="y"?(zt.includes("top")||zt.includes("bottom"))&&(zt.includes("top")&&_t<0||zt.includes("bottom")&&_t>0)&&(dn.y=_t):J==="x"&&(zt.includes("left")||zt.includes("right"))&&(zt.includes("left")&&yn<0||zt.includes("right")&&yn>0)&&(dn.x=yn),(Math.abs(dn.x)>0||Math.abs(dn.y)>0)&&ke(!0),(gt=Et.current)==null||gt.style.setProperty("--swipe-amount-x",`${dn.x}px`),(gn=Et.current)==null||gn.style.setProperty("--swipe-amount-y",`${dn.y}px`)}},kr&&!d.jsx?V.createElement("button",{"aria-label":X,"data-disabled":nt,"data-close-button":!0,onClick:nt||!Kt?()=>{}:()=>{var Ie;Mt(),(Ie=d.onDismiss)==null||Ie.call(d,d)},className:oo(L==null?void 0:L.closeButton,(i=d==null?void 0:d.classNames)==null?void 0:i.closeButton)},(o=H==null?void 0:H.close)!=null?o:HY):null,d.jsx||k.isValidElement(d.title)?d.jsx?d.jsx:typeof d.title=="function"?d.title():d.title:V.createElement(V.Fragment,null,fn||d.icon||d.promise?V.createElement("div",{"data-icon":"",className:oo(L==null?void 0:L.icon,(a=d==null?void 0:d.classNames)==null?void 0:a.icon)},d.promise||d.type==="loading"&&!d.icon?d.icon||hn():null,d.type!=="loading"?d.icon||(H==null?void 0:H[fn])||LY(fn):null):null,V.createElement("div",{"data-content":"",className:oo(L==null?void 0:L.content,(s=d==null?void 0:d.classNames)==null?void 0:s.content)},V.createElement("div",{"data-title":"",className:oo(L==null?void 0:L.title,(u=d==null?void 0:d.classNames)==null?void 0:u.title)},typeof d.title=="function"?d.title():d.title),d.description?V.createElement("div",{"data-description":"",className:oo(I,ui,L==null?void 0:L.description,(l=d==null?void 0:d.classNames)==null?void 0:l.description)},typeof d.description=="function"?d.description():d.description):null),k.isValidElement(d.cancel)?d.cancel:d.cancel&&eg(d.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:d.cancelButtonStyle||T,onClick:Ie=>{var Ve,Ke;eg(d.cancel)&&Kt&&((Ke=(Ve=d.cancel).onClick)==null||Ke.call(Ve,Ie),Mt())},className:oo(L==null?void 0:L.cancelButton,(c=d==null?void 0:d.classNames)==null?void 0:c.cancelButton)},d.cancel.label):null,k.isValidElement(d.action)?d.action:d.action&&eg(d.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:d.actionButtonStyle||P,onClick:Ie=>{var Ve,Ke;eg(d.action)&&((Ke=(Ve=d.action).onClick)==null||Ke.call(Ve,Ie),!Ie.defaultPrevented&&Mt())},className:oo(L==null?void 0:L.actionButton,(f=d==null?void 0:d.classNames)==null?void 0:f.actionButton)},d.action.label):null))};function bI(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function lJ(t,e){let n={};return[t,e].forEach((r,i)=>{let o=i===1,a=o?"--mobile-offset":"--offset",s=o?nJ:tJ;function u(l){["top","right","bottom","left"].forEach(c=>{n[`${a}-${c}`]=typeof l=="number"?`${l}px`:l})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(l=>{r[l]===void 0?n[`${a}-${l}`]=s:n[`${a}-${l}`]=typeof r[l]=="number"?`${r[l]}px`:r[l]}):u(s)}),n}var cJ=k.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:a,className:s,offset:u,mobileOffset:l,theme:c="light",richColors:f,duration:h,style:d,visibleToasts:p=eJ,toastOptions:v,dir:m=bI(),gap:g=iJ,loadingIcon:y,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:x}=t,[S,E]=V.useState([]),C=V.useMemo(()=>Array.from(new Set([r].concat(S.filter(q=>q.position).map(q=>q.position)))),[S,r]),[A,T]=V.useState([]),[P,R]=V.useState(!1),[I,M]=V.useState(!1),[B,z]=V.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=V.useRef(null),$=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=V.useRef(null),H=V.useRef(!1),X=V.useCallback(q=>{E(J=>{var ae;return(ae=J.find(fe=>fe.id===q.id))!=null&&ae.delete||Hr.dismiss(q.id),J.filter(({id:fe})=>fe!==q.id)})},[]);return V.useEffect(()=>Hr.subscribe(q=>{if(q.dismiss){E(J=>J.map(ae=>ae.id===q.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{$B.flushSync(()=>{E(J=>{let ae=J.findIndex(fe=>fe.id===q.id);return ae!==-1?[...J.slice(0,ae),{...J[ae],...q},...J.slice(ae+1)]:[q,...J]})})})}),[]),V.useEffect(()=>{if(c!=="system"){z(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let q=window.matchMedia("(prefers-color-scheme: dark)");try{q.addEventListener("change",({matches:J})=>{z(J?"dark":"light")})}catch{q.addListener(({matches:ae})=>{try{z(ae?"dark":"light")}catch(fe){console.error(fe)}})}},[c]),V.useEffect(()=>{S.length<=1&&R(!1)},[S]),V.useEffect(()=>{let q=J=>{var ae,fe;i.every(he=>J[he]||J.code===he)&&(R(!0),(ae=U.current)==null||ae.focus()),J.code==="Escape"&&(document.activeElement===U.current||(fe=U.current)!=null&&fe.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[i]),V.useEffect(()=>{if(U.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,H.current=!1)}},[U.current]),V.createElement("section",{ref:e,"aria-label":`${_} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((q,J)=>{var ae;let[fe,he]=q.split("-");return S.length?V.createElement("ol",{key:q,dir:m==="auto"?bI():m,tabIndex:-1,ref:U,className:s,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":fe,"data-lifted":P&&S.length>1&&!o,"data-x-position":he,style:{"--front-toast-height":`${((ae=A[0])==null?void 0:ae.height)||0}px`,"--width":`${rJ}px`,"--gap":`${g}px`,...d,...lJ(u,l)},onBlur:de=>{H.current&&!de.currentTarget.contains(de.relatedTarget)&&(H.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||H.current||(H.current=!0,L.current=de.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{I||R(!1)},onDragEnd:()=>R(!1),onPointerDown:de=>{de.target instanceof HTMLElement&&de.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},S.filter(de=>!de.position&&J===0||de.position===q).map((de,be)=>{var ne,ue;return V.createElement(uJ,{key:de.id,icons:b,index:be,toast:de,defaultRichColors:f,duration:(ne=v==null?void 0:v.duration)!=null?ne:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:p,closeButton:(ue=v==null?void 0:v.closeButton)!=null?ue:a,interacting:I,position:q,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:X,toasts:S.filter(ce=>ce.position==de.position),heights:A.filter(ce=>ce.position==de.position),setHeights:T,expandByDefault:o,gap:g,loadingIcon:y,expanded:P,pauseWhenPageIsHidden:x,swipeDirections:t.swipeDirections})})):null}))});const fJ=({...t})=>{const{theme:e="system"}=jY();return N.jsx(cJ,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},hJ=["top","right","bottom","left"],gu=Math.min,vi=Math.max,By=Math.round,tg=Math.floor,sa=t=>({x:t,y:t}),dJ={left:"right",right:"left",bottom:"top",top:"bottom"},pJ={start:"end",end:"start"};function aE(t,e,n){return vi(t,gu(e,n))}function Za(t,e){return typeof t=="function"?t(e):t}function es(t){return t.split("-")[0]}function Ph(t){return t.split("-")[1]}function nT(t){return t==="x"?"y":"x"}function rT(t){return t==="y"?"height":"width"}const vJ=new Set(["top","bottom"]);function ta(t){return vJ.has(es(t))?"y":"x"}function iT(t){return nT(ta(t))}function mJ(t,e,n){n===void 0&&(n=!1);const r=Ph(t),i=iT(t),o=rT(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Uy(a)),[a,Uy(a)]}function gJ(t){const e=Uy(t);return[sE(t),e,sE(e)]}function sE(t){return t.replace(/start|end/g,e=>pJ[e])}const wI=["left","right"],xI=["right","left"],yJ=["top","bottom"],bJ=["bottom","top"];function wJ(t,e,n){switch(t){case"top":case"bottom":return n?e?xI:wI:e?wI:xI;case"left":case"right":return e?yJ:bJ;default:return[]}}function xJ(t,e,n,r){const i=Ph(t);let o=wJ(es(t),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(sE)))),o}function Uy(t){return t.replace(/left|right|bottom|top/g,e=>dJ[e])}function _J(t){return{top:0,right:0,bottom:0,left:0,...t}}function EU(t){return typeof t!="number"?_J(t):{top:t,right:t,bottom:t,left:t}}function Vy(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function _I(t,e,n){let{reference:r,floating:i}=t;const o=ta(e),a=iT(e),s=rT(a),u=es(e),l=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[s]/2-i[s]/2;let d;switch(u){case"top":d={x:c,y:r.y-i.height};break;case"bottom":d={x:c,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:f};break;case"left":d={x:r.x-i.width,y:f};break;default:d={x:r.x,y:r.y}}switch(Ph(e)){case"start":d[a]-=h*(n&&l?-1:1);break;case"end":d[a]+=h*(n&&l?-1:1);break}return d}const SJ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),u=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=_I(l,r,u),h=r,d={},p=0;for(let v=0;v<s.length;v++){const{name:m,fn:g}=s[v],{x:y,y:b,data:_,reset:x}=await g({x:c,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:d,rects:l,platform:a,elements:{reference:t,floating:e}});c=y??c,f=b??f,d={...d,[m]:{...d[m],..._}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(l=x.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):x.rects),{x:c,y:f}=_I(l,h,u)),v=-1)}return{x:c,y:f,placement:h,strategy:i,middlewareData:d}};async function Mp(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=Za(e,t),p=EU(d),m=s[h?f==="floating"?"reference":"floating":f],g=Vy(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(m)))==null||n?m:m.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:c,strategy:u})),y=f==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),_=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},x=Vy(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:b,strategy:u}):y);return{top:(g.top-x.top+p.top)/_.y,bottom:(x.bottom-g.bottom+p.bottom)/_.y,left:(g.left-x.left+p.left)/_.x,right:(x.right-g.right+p.right)/_.x}}const EJ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:u}=e,{element:l,padding:c=0}=Za(t,e)||{};if(l==null)return{};const f=EU(c),h={x:n,y:r},d=iT(i),p=rT(d),v=await a.getDimensions(l),m=d==="y",g=m?"top":"left",y=m?"bottom":"right",b=m?"clientHeight":"clientWidth",_=o.reference[p]+o.reference[d]-h[d]-o.floating[p],x=h[d]-o.reference[d],S=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let E=S?S[b]:0;(!E||!await(a.isElement==null?void 0:a.isElement(S)))&&(E=s.floating[b]||o.floating[p]);const C=_/2-x/2,A=E/2-v[p]/2-1,T=gu(f[g],A),P=gu(f[y],A),R=T,I=E-v[p]-P,M=E/2-v[p]/2+C,B=aE(R,M,I),z=!u.arrow&&Ph(i)!=null&&M!==B&&o.reference[p]/2-(M<R?T:P)-v[p]/2<0,U=z?M<R?M-R:M-I:0;return{[d]:h[d]+U,data:{[d]:B,centerOffset:M-B-U,...z&&{alignmentOffset:U}},reset:z}}}),CJ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:u,elements:l}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...m}=Za(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const g=es(i),y=ta(s),b=es(s)===s,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),x=h||(b||!v?[Uy(s)]:gJ(s)),S=p!=="none";!h&&S&&x.push(...xJ(s,v,p,_));const E=[s,...x],C=await Mp(e,m),A=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&A.push(C[g]),f){const M=mJ(i,a,_);A.push(C[M[0]],C[M[1]])}if(T=[...T,{placement:i,overflows:A}],!A.every(M=>M<=0)){var P,R;const M=(((P=o.flip)==null?void 0:P.index)||0)+1,B=E[M];if(B&&(!(f==="alignment"?y!==ta(B):!1)||T.every($=>$.overflows[0]>0&&ta($.placement)===y)))return{data:{index:M,overflows:T},reset:{placement:B}};let z=(R=T.filter(U=>U.overflows[0]<=0).sort((U,$)=>U.overflows[1]-$.overflows[1])[0])==null?void 0:R.placement;if(!z)switch(d){case"bestFit":{var I;const U=(I=T.filter($=>{if(S){const L=ta($.placement);return L===y||L==="y"}return!0}).map($=>[$.placement,$.overflows.filter(L=>L>0).reduce((L,H)=>L+H,0)]).sort(($,L)=>$[1]-L[1])[0])==null?void 0:I[0];U&&(z=U);break}case"initialPlacement":z=s;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function SI(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function EI(t){return hJ.some(e=>t[e]>=0)}const AJ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Za(t,e);switch(r){case"referenceHidden":{const o=await Mp(e,{...i,elementContext:"reference"}),a=SI(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:EI(a)}}}case"escaped":{const o=await Mp(e,{...i,altBoundary:!0}),a=SI(o,n.floating);return{data:{escapedOffsets:a,escaped:EI(a)}}}default:return{}}}}},CU=new Set(["left","top"]);async function TJ(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=es(n),s=Ph(n),u=ta(n)==="y",l=CU.has(a)?-1:1,c=o&&u?-1:1,f=Za(e,t);let{mainAxis:h,crossAxis:d,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return s&&typeof p=="number"&&(d=s==="end"?p*-1:p),u?{x:d*c,y:h*l}:{x:h*l,y:d*c}}const PJ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=e,u=await TJ(e,t);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:o+u.y,data:{...u,placement:a}}}}},OJ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:m=>{let{x:g,y}=m;return{x:g,y}}},...u}=Za(t,e),l={x:n,y:r},c=await Mp(e,u),f=ta(es(i)),h=nT(f);let d=l[h],p=l[f];if(o){const m=h==="y"?"top":"left",g=h==="y"?"bottom":"right",y=d+c[m],b=d-c[g];d=aE(y,d,b)}if(a){const m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=p+c[m],b=p-c[g];p=aE(y,p,b)}const v=s.fn({...e,[h]:d,[f]:p});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:o,[f]:a}}}}}},kJ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:a}=e,{offset:s=0,mainAxis:u=!0,crossAxis:l=!0}=Za(t,e),c={x:n,y:r},f=ta(i),h=nT(f);let d=c[h],p=c[f];const v=Za(s,e),m=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(u){const b=h==="y"?"height":"width",_=o.reference[h]-o.floating[b]+m.mainAxis,x=o.reference[h]+o.reference[b]-m.mainAxis;d<_?d=_:d>x&&(d=x)}if(l){var g,y;const b=h==="y"?"width":"height",_=CU.has(es(i)),x=o.reference[f]-o.floating[b]+(_&&((g=a.offset)==null?void 0:g[f])||0)+(_?0:m.crossAxis),S=o.reference[f]+o.reference[b]+(_?0:((y=a.offset)==null?void 0:y[f])||0)-(_?m.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[h]:d,[f]:p}}}},RJ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:u=()=>{},...l}=Za(t,e),c=await Mp(e,l),f=es(i),h=Ph(i),d=ta(i)==="y",{width:p,height:v}=o.floating;let m,g;f==="top"||f==="bottom"?(m=f,g=h===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(g=f,m=h==="end"?"top":"bottom");const y=v-c.top-c.bottom,b=p-c.left-c.right,_=gu(v-c[m],y),x=gu(p-c[g],b),S=!e.middlewareData.shift;let E=_,C=x;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=y),S&&!h){const T=vi(c.left,0),P=vi(c.right,0),R=vi(c.top,0),I=vi(c.bottom,0);d?C=p-2*(T!==0||P!==0?T+P:vi(c.left,c.right)):E=v-2*(R!==0||I!==0?R+I:vi(c.top,c.bottom))}await u({...e,availableWidth:C,availableHeight:E});const A=await a.getDimensions(s.floating);return p!==A.width||v!==A.height?{reset:{rects:!0}}:{}}}};function Qb(){return typeof window<"u"}function Oh(t){return AU(t)?(t.nodeName||"").toLowerCase():"#document"}function Ei(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function wa(t){var e;return(e=(AU(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function AU(t){return Qb()?t instanceof Node||t instanceof Ei(t).Node:!1}function ko(t){return Qb()?t instanceof Element||t instanceof Ei(t).Element:!1}function va(t){return Qb()?t instanceof HTMLElement||t instanceof Ei(t).HTMLElement:!1}function CI(t){return!Qb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ei(t).ShadowRoot}const IJ=new Set(["inline","contents"]);function Jv(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ro(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!IJ.has(i)}const DJ=new Set(["table","td","th"]);function NJ(t){return DJ.has(Oh(t))}const MJ=[":popover-open",":modal"];function Zb(t){return MJ.some(e=>{try{return t.matches(e)}catch{return!1}})}const $J=["transform","translate","scale","rotate","perspective"],jJ=["transform","translate","scale","rotate","perspective","filter"],LJ=["paint","layout","strict","content"];function oT(t){const e=aT(),n=ko(t)?Ro(t):t;return $J.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||jJ.some(r=>(n.willChange||"").includes(r))||LJ.some(r=>(n.contain||"").includes(r))}function FJ(t){let e=yu(t);for(;va(e)&&!Hf(e);){if(oT(e))return e;if(Zb(e))return null;e=yu(e)}return null}function aT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const BJ=new Set(["html","body","#document"]);function Hf(t){return BJ.has(Oh(t))}function Ro(t){return Ei(t).getComputedStyle(t)}function ew(t){return ko(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function yu(t){if(Oh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||CI(t)&&t.host||wa(t);return CI(e)?e.host:e}function TU(t){const e=yu(t);return Hf(e)?t.ownerDocument?t.ownerDocument.body:t.body:va(e)&&Jv(e)?e:TU(e)}function $p(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=TU(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),a=Ei(i);if(o){const s=uE(a);return e.concat(a,a.visualViewport||[],Jv(i)?i:[],s&&n?$p(s):[])}return e.concat(i,$p(i,[],n))}function uE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function PU(t){const e=Ro(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=va(t),o=i?t.offsetWidth:n,a=i?t.offsetHeight:r,s=By(n)!==o||By(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function sT(t){return ko(t)?t:t.contextElement}function lf(t){const e=sT(t);if(!va(e))return sa(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=PU(e);let a=(o?By(n.width):n.width)/r,s=(o?By(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const UJ=sa(0);function OU(t){const e=Ei(t);return!aT()||!e.visualViewport?UJ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function VJ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ei(t)?!1:e}function Ul(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=sT(t);let a=sa(1);e&&(r?ko(r)&&(a=lf(r)):a=lf(t));const s=VJ(o,n,r)?OU(o):sa(0);let u=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,c=i.width/a.x,f=i.height/a.y;if(o){const h=Ei(o),d=r&&ko(r)?Ei(r):r;let p=h,v=uE(p);for(;v&&r&&d!==p;){const m=lf(v),g=v.getBoundingClientRect(),y=Ro(v),b=g.left+(v.clientLeft+parseFloat(y.paddingLeft))*m.x,_=g.top+(v.clientTop+parseFloat(y.paddingTop))*m.y;u*=m.x,l*=m.y,c*=m.x,f*=m.y,u+=b,l+=_,p=Ei(v),v=uE(p)}}return Vy({width:c,height:f,x:u,y:l})}function uT(t,e){const n=ew(t).scrollLeft;return e?e.left+n:Ul(wa(t)).left+n}function kU(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:uT(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function WJ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",a=wa(r),s=e?Zb(e.floating):!1;if(r===a||s&&o)return n;let u={scrollLeft:0,scrollTop:0},l=sa(1);const c=sa(0),f=va(r);if((f||!f&&!o)&&((Oh(r)!=="body"||Jv(a))&&(u=ew(r)),va(r))){const d=Ul(r);l=lf(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}const h=a&&!f&&!o?kU(a,u,!0):sa(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x+h.x,y:n.y*l.y-u.scrollTop*l.y+c.y+h.y}}function zJ(t){return Array.from(t.getClientRects())}function HJ(t){const e=wa(t),n=ew(t),r=t.ownerDocument.body,i=vi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=vi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+uT(t);const s=-n.scrollTop;return Ro(r).direction==="rtl"&&(a+=vi(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}function GJ(t,e){const n=Ei(t),r=wa(t),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,u=0;if(i){o=i.width,a=i.height;const l=aT();(!l||l&&e==="fixed")&&(s=i.offsetLeft,u=i.offsetTop)}return{width:o,height:a,x:s,y:u}}const qJ=new Set(["absolute","fixed"]);function KJ(t,e){const n=Ul(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=va(t)?lf(t):sa(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,u=i*o.x,l=r*o.y;return{width:a,height:s,x:u,y:l}}function AI(t,e,n){let r;if(e==="viewport")r=GJ(t,n);else if(e==="document")r=HJ(wa(t));else if(ko(e))r=KJ(e,n);else{const i=OU(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Vy(r)}function RU(t,e){const n=yu(t);return n===e||!ko(n)||Hf(n)?!1:Ro(n).position==="fixed"||RU(n,e)}function XJ(t,e){const n=e.get(t);if(n)return n;let r=$p(t,[],!1).filter(s=>ko(s)&&Oh(s)!=="body"),i=null;const o=Ro(t).position==="fixed";let a=o?yu(t):t;for(;ko(a)&&!Hf(a);){const s=Ro(a),u=oT(a);!u&&s.position==="fixed"&&(i=null),(o?!u&&!i:!u&&s.position==="static"&&!!i&&qJ.has(i.position)||Jv(a)&&!u&&RU(t,a))?r=r.filter(c=>c!==a):i=s,a=yu(a)}return e.set(t,r),r}function YJ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const a=[...n==="clippingAncestors"?Zb(e)?[]:XJ(e,this._c):[].concat(n),r],s=a[0],u=a.reduce((l,c)=>{const f=AI(e,c,i);return l.top=vi(f.top,l.top),l.right=gu(f.right,l.right),l.bottom=gu(f.bottom,l.bottom),l.left=vi(f.left,l.left),l},AI(e,s,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function JJ(t){const{width:e,height:n}=PU(t);return{width:e,height:n}}function QJ(t,e,n){const r=va(e),i=wa(e),o=n==="fixed",a=Ul(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const u=sa(0);function l(){u.x=uT(i)}if(r||!r&&!o)if((Oh(e)!=="body"||Jv(i))&&(s=ew(e)),r){const d=Ul(e,!0,o,e);u.x=d.x+e.clientLeft,u.y=d.y+e.clientTop}else i&&l();o&&!r&&i&&l();const c=i&&!r&&!o?kU(i,s):sa(0),f=a.left+s.scrollLeft-u.x-c.x,h=a.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:a.width,height:a.height}}function C1(t){return Ro(t).position==="static"}function TI(t,e){if(!va(t)||Ro(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return wa(t)===n&&(n=n.ownerDocument.body),n}function IU(t,e){const n=Ei(t);if(Zb(t))return n;if(!va(t)){let i=yu(t);for(;i&&!Hf(i);){if(ko(i)&&!C1(i))return i;i=yu(i)}return n}let r=TI(t,e);for(;r&&NJ(r)&&C1(r);)r=TI(r,e);return r&&Hf(r)&&C1(r)&&!oT(r)?n:r||FJ(t)||n}const ZJ=async function(t){const e=this.getOffsetParent||IU,n=this.getDimensions,r=await n(t.floating);return{reference:QJ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eQ(t){return Ro(t).direction==="rtl"}const tQ={convertOffsetParentRelativeRectToViewportRelativeRect:WJ,getDocumentElement:wa,getClippingRect:YJ,getOffsetParent:IU,getElementRects:ZJ,getClientRects:zJ,getDimensions:JJ,getScale:lf,isElement:ko,isRTL:eQ};function DU(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nQ(t,e){let n=null,r;const i=wa(t);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),o();const l=t.getBoundingClientRect(),{left:c,top:f,width:h,height:d}=l;if(s||e(),!h||!d)return;const p=tg(f),v=tg(i.clientWidth-(c+h)),m=tg(i.clientHeight-(f+d)),g=tg(c),b={rootMargin:-p+"px "+-v+"px "+-m+"px "+-g+"px",threshold:vi(0,gu(1,u))||1};let _=!0;function x(S){const E=S[0].intersectionRatio;if(E!==u){if(!_)return a();E?a(!1,E):r=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!DU(l,t.getBoundingClientRect())&&a(),_=!1}try{n=new IntersectionObserver(x,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,b)}n.observe(t)}return a(!0),o}function rQ(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=sT(t),c=i||o?[...l?$p(l):[],...$p(e)]:[];c.forEach(g=>{i&&g.addEventListener("scroll",n,{passive:!0}),o&&g.addEventListener("resize",n)});const f=l&&s?nQ(l,n):null;let h=-1,d=null;a&&(d=new ResizeObserver(g=>{let[y]=g;y&&y.target===l&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=d)==null||b.observe(e)})),n()}),l&&!u&&d.observe(l),d.observe(e));let p,v=u?Ul(t):null;u&&m();function m(){const g=Ul(t);v&&!DU(v,g)&&n(),v=g,p=requestAnimationFrame(m)}return n(),()=>{var g;c.forEach(y=>{i&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),f==null||f(),(g=d)==null||g.disconnect(),d=null,u&&cancelAnimationFrame(p)}}const iQ=PJ,oQ=OJ,aQ=CJ,sQ=RJ,uQ=AJ,PI=EJ,lQ=kJ,cQ=(t,e,n)=>{const r=new Map,i={platform:tQ,...n},o={...i.platform,_c:r};return SJ(t,e,{...i,platform:o})};var fQ=typeof document<"u",hQ=function(){},oy=fQ?k.useLayoutEffect:hQ;function Wy(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Wy(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!Wy(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function NU(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function OI(t,e){const n=NU(t);return Math.round(e*n)/n}function A1(t){const e=k.useRef(t);return oy(()=>{e.current=t}),e}function dQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:u,open:l}=t,[c,f]=k.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,d]=k.useState(r);Wy(h,r)||d(r);const[p,v]=k.useState(null),[m,g]=k.useState(null),y=k.useCallback($=>{$!==S.current&&(S.current=$,v($))},[]),b=k.useCallback($=>{$!==E.current&&(E.current=$,g($))},[]),_=o||p,x=a||m,S=k.useRef(null),E=k.useRef(null),C=k.useRef(c),A=u!=null,T=A1(u),P=A1(i),R=A1(l),I=k.useCallback(()=>{if(!S.current||!E.current)return;const $={placement:e,strategy:n,middleware:h};P.current&&($.platform=P.current),cQ(S.current,E.current,$).then(L=>{const H={...L,isPositioned:R.current!==!1};M.current&&!Wy(C.current,H)&&(C.current=H,ea.flushSync(()=>{f(H)}))})},[h,e,n,P,R]);oy(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f($=>({...$,isPositioned:!1})))},[l]);const M=k.useRef(!1);oy(()=>(M.current=!0,()=>{M.current=!1}),[]),oy(()=>{if(_&&(S.current=_),x&&(E.current=x),_&&x){if(T.current)return T.current(_,x,I);I()}},[_,x,I,T,A]);const B=k.useMemo(()=>({reference:S,floating:E,setReference:y,setFloating:b}),[y,b]),z=k.useMemo(()=>({reference:_,floating:x}),[_,x]),U=k.useMemo(()=>{const $={position:n,left:0,top:0};if(!z.floating)return $;const L=OI(z.floating,c.x),H=OI(z.floating,c.y);return s?{...$,transform:"translate("+L+"px, "+H+"px)",...NU(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:H}},[n,s,z.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:I,refs:B,elements:z,floatingStyles:U}),[c,I,B,z,U])}const pQ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?PI({element:r.current,padding:i}).fn(n):{}:r?PI({element:r,padding:i}).fn(n):{}}}},vQ=(t,e)=>({...iQ(t),options:[t,e]}),mQ=(t,e)=>({...oQ(t),options:[t,e]}),gQ=(t,e)=>({...lQ(t),options:[t,e]}),yQ=(t,e)=>({...aQ(t),options:[t,e]}),bQ=(t,e)=>({...sQ(t),options:[t,e]}),wQ=(t,e)=>({...uQ(t),options:[t,e]}),xQ=(t,e)=>({...pQ(t),options:[t,e]});var _Q="Arrow",MU=k.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return N.jsx(oi.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:N.jsx("polygon",{points:"0,0 30,0 15,10"})})});MU.displayName=_Q;var SQ=MU;function EQ(t){const[e,n]=k.useState(void 0);return mu(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const u=o.borderBoxSize,l=Array.isArray(u)?u[0]:u;a=l.inlineSize,s=l.blockSize}else a=t.offsetWidth,s=t.offsetHeight;n({width:a,height:s})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var $U="Popper",[jU,LU]=Xb($U),[q5e,FU]=jU($U),BU="PopperAnchor",UU=k.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=FU(BU,n),a=k.useRef(null),s=Oo(e,a);return k.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:N.jsx(oi.div,{...i,ref:s})});UU.displayName=BU;var lT="PopperContent",[CQ,AQ]=jU(lT),VU=k.forwardRef((t,e)=>{var de,be,ne,ue,ce,Z;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:l=[],collisionPadding:c=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:d="optimized",onPlaced:p,...v}=t,m=FU(lT,n),[g,y]=k.useState(null),b=Oo(e,ge=>y(ge)),[_,x]=k.useState(null),S=EQ(_),E=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,A=r+(o!=="center"?"-"+o:""),T=typeof c=="number"?c:{top:0,right:0,bottom:0,left:0,...c},P=Array.isArray(l)?l:[l],R=P.length>0,I={padding:T,boundary:P.filter(PQ),altBoundary:R},{refs:M,floatingStyles:B,placement:z,isPositioned:U,middlewareData:$}=dQ({strategy:"fixed",placement:A,whileElementsMounted:(...ge)=>rQ(...ge,{animationFrame:d==="always"}),elements:{reference:m.anchor},middleware:[vQ({mainAxis:i+C,alignmentAxis:a}),u&&mQ({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?gQ():void 0,...I}),u&&yQ({...I}),bQ({...I,apply:({elements:ge,rects:ye,availableWidth:De,availableHeight:ke})=>{const{width:tt,height:ft}=ye.reference,je=ge.floating.style;je.setProperty("--radix-popper-available-width",`${De}px`),je.setProperty("--radix-popper-available-height",`${ke}px`),je.setProperty("--radix-popper-anchor-width",`${tt}px`),je.setProperty("--radix-popper-anchor-height",`${ft}px`)}}),_&&xQ({element:_,padding:s}),OQ({arrowWidth:E,arrowHeight:C}),h&&wQ({strategy:"referenceHidden",...I})]}),[L,H]=HU(z),X=vu(p);mu(()=>{U&&(X==null||X())},[U,X]);const q=(de=$.arrow)==null?void 0:de.x,J=(be=$.arrow)==null?void 0:be.y,ae=((ne=$.arrow)==null?void 0:ne.centerOffset)!==0,[fe,he]=k.useState();return mu(()=>{g&&he(window.getComputedStyle(g).zIndex)},[g]),N.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:U?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[(ue=$.transformOrigin)==null?void 0:ue.x,(ce=$.transformOrigin)==null?void 0:ce.y].join(" "),...((Z=$.hide)==null?void 0:Z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:N.jsx(CQ,{scope:n,placedSide:L,onArrowChange:x,arrowX:q,arrowY:J,shouldHideArrow:ae,children:N.jsx(oi.div,{"data-side":L,"data-align":H,...v,ref:b,style:{...v.style,animation:U?void 0:"none"}})})})});VU.displayName=lT;var WU="PopperArrow",TQ={top:"bottom",right:"left",bottom:"top",left:"right"},zU=k.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=AQ(WU,r),a=TQ[o.placedSide];return N.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:N.jsx(SQ,{...i,ref:n,style:{...i.style,display:"block"}})})});zU.displayName=WU;function PQ(t){return t!==null}var OQ=t=>({name:"transformOrigin",options:t,fn(e){var m,g,y;const{placement:n,rects:r,middlewareData:i}=e,a=((m=i.arrow)==null?void 0:m.centerOffset)!==0,s=a?0:t.arrowWidth,u=a?0:t.arrowHeight,[l,c]=HU(n),f={start:"0%",center:"50%",end:"100%"}[c],h=(((g=i.arrow)==null?void 0:g.x)??0)+s/2,d=(((y=i.arrow)==null?void 0:y.y)??0)+u/2;let p="",v="";return l==="bottom"?(p=a?f:`${h}px`,v=`${-u}px`):l==="top"?(p=a?f:`${h}px`,v=`${r.floating.height+u}px`):l==="right"?(p=`${-u}px`,v=a?f:`${d}px`):l==="left"&&(p=`${r.floating.width+u}px`,v=a?f:`${d}px`),{data:{x:p,y:v}}}});function HU(t){const[e,n="center"]=t.split("-");return[e,n]}var kQ=UU,RQ=VU,IQ=zU,[tw,K5e]=Xb("Tooltip",[LU]),cT=LU(),GU="TooltipProvider",DQ=700,kI="tooltip.open",[NQ,qU]=tw(GU),KU=t=>{const{__scopeTooltip:e,delayDuration:n=DQ,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=t,a=k.useRef(!0),s=k.useRef(!1),u=k.useRef(0);return k.useEffect(()=>{const l=u.current;return()=>window.clearTimeout(l)},[]),N.jsx(NQ,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:k.useCallback(l=>{s.current=l},[]),disableHoverableContent:i,children:o})};KU.displayName=GU;var XU="Tooltip",[X5e,nw]=tw(XU),lE="TooltipTrigger",MQ=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=nw(lE,n),o=qU(lE,n),a=cT(n),s=k.useRef(null),u=Oo(e,s,i.onTriggerChange),l=k.useRef(!1),c=k.useRef(!1),f=k.useCallback(()=>l.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),N.jsx(kQ,{asChild:!0,...a,children:N.jsx(oi.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:u,onPointerMove:Mn(t.onPointerMove,h=>{h.pointerType!=="touch"&&!c.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),c.current=!0)}),onPointerLeave:Mn(t.onPointerLeave,()=>{i.onTriggerLeave(),c.current=!1}),onPointerDown:Mn(t.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Mn(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:Mn(t.onBlur,i.onClose),onClick:Mn(t.onClick,i.onClose)})})});MQ.displayName=lE;var $Q="TooltipPortal",[Y5e,jQ]=tw($Q,{forceMount:void 0}),Gf="TooltipContent",YU=k.forwardRef((t,e)=>{const n=jQ(Gf,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=t,a=nw(Gf,t.__scopeTooltip);return N.jsx(JA,{present:r||a.open,children:a.disableHoverableContent?N.jsx(JU,{side:i,...o,ref:e}):N.jsx(LQ,{side:i,...o,ref:e})})}),LQ=k.forwardRef((t,e)=>{const n=nw(Gf,t.__scopeTooltip),r=qU(Gf,t.__scopeTooltip),i=k.useRef(null),o=Oo(e,i),[a,s]=k.useState(null),{trigger:u,onClose:l}=n,c=i.current,{onPointerInTransitChange:f}=r,h=k.useCallback(()=>{s(null),f(!1)},[f]),d=k.useCallback((p,v)=>{const m=p.currentTarget,g={x:p.clientX,y:p.clientY},y=WQ(g,m.getBoundingClientRect()),b=zQ(g,y),_=HQ(v.getBoundingClientRect()),x=qQ([...b,..._]);s(x),f(!0)},[f]);return k.useEffect(()=>()=>h(),[h]),k.useEffect(()=>{if(u&&c){const p=m=>d(m,c),v=m=>d(m,u);return u.addEventListener("pointerleave",p),c.addEventListener("pointerleave",v),()=>{u.removeEventListener("pointerleave",p),c.removeEventListener("pointerleave",v)}}},[u,c,d,h]),k.useEffect(()=>{if(a){const p=v=>{const m=v.target,g={x:v.clientX,y:v.clientY},y=(u==null?void 0:u.contains(m))||(c==null?void 0:c.contains(m)),b=!GQ(g,a);y?h():b&&(h(),l())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[u,c,a,l,h]),N.jsx(JU,{...t,ref:o})}),[FQ,BQ]=tw(XU,{isInside:!1}),UQ=rX("TooltipContent"),JU=k.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=t,u=nw(Gf,n),l=cT(n),{onClose:c}=u;return k.useEffect(()=>(document.addEventListener(kI,c),()=>document.removeEventListener(kI,c)),[c]),k.useEffect(()=>{if(u.trigger){const f=h=>{const d=h.target;d!=null&&d.contains(u.trigger)&&c()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[u.trigger,c]),N.jsx(YA,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:c,children:N.jsxs(RQ,{"data-state":u.stateAttribute,...l,...s,ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[N.jsx(UQ,{children:r}),N.jsx(FQ,{scope:n,isInside:!0,children:N.jsx(PX,{id:u.contentId,role:"tooltip",children:i||r})})]})})});YU.displayName=Gf;var QU="TooltipArrow",VQ=k.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=cT(n);return BQ(QU,n).isInside?null:N.jsx(IQ,{...i,...r,ref:e})});VQ.displayName=QU;function WQ(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function zQ(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function HQ(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function GQ(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const s=e[o],u=e[a],l=s.x,c=s.y,f=u.x,h=u.y;c>r!=h>r&&n<(f-l)*(r-c)/(h-c)+l&&(i=!i)}return i}function qQ(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),KQ(e)}function KQ(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var XQ=KU,ZU=YU;const YQ=XQ,JQ=k.forwardRef(({className:t,sideOffset:e=4,...n},r)=>N.jsx(ZU,{ref:r,sideOffset:e,className:Gt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));JQ.displayName=ZU.displayName;var rw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},iw=typeof window>"u"||"Deno"in globalThis;function fo(){}function QQ(t,e){return typeof t=="function"?t(e):t}function ZQ(t){return typeof t=="number"&&t>=0&&t!==1/0}function eZ(t,e){return Math.max(t+(e||0)-Date.now(),0)}function cE(t,e){return typeof t=="function"?t(e):t}function tZ(t,e){return typeof t=="function"?t(e):t}function RI(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:a,stale:s}=t;if(a){if(r){if(e.queryHash!==fT(a,e.options))return!1}else if(!Lp(e.queryKey,a))return!1}if(n!=="all"){const u=e.isActive();if(n==="active"&&!u||n==="inactive"&&u)return!1}return!(typeof s=="boolean"&&e.isStale()!==s||i&&i!==e.state.fetchStatus||o&&!o(e))}function II(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(jp(e.options.mutationKey)!==jp(o))return!1}else if(!Lp(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function fT(t,e){return((e==null?void 0:e.queryKeyHashFn)||jp)(t)}function jp(t){return JSON.stringify(t,(e,n)=>fE(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Lp(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Lp(t[n],e[n])):!1}function e5(t,e){if(t===e)return t;const n=DI(t)&&DI(e);if(n||fE(t)&&fE(e)){const r=n?t:Object.keys(t),i=r.length,o=n?e:Object.keys(e),a=o.length,s=n?[]:{},u=new Set(r);let l=0;for(let c=0;c<a;c++){const f=n?c:o[c];(!n&&u.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(s[f]=void 0,l++):(s[f]=e5(t[f],e[f]),s[f]===t[f]&&t[f]!==void 0&&l++)}return i===a&&l===i?t:s}return e}function DI(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function fE(t){if(!NI(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!NI(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function NI(t){return Object.prototype.toString.call(t)==="[object Object]"}function nZ(t){return new Promise(e=>{setTimeout(e,t)})}function rZ(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?e5(t,e):e}function iZ(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function oZ(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var hT=Symbol();function t5(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===hT?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var _l,Us,kf,vF,aZ=(vF=class extends rw{constructor(){super();lt(this,_l);lt(this,Us);lt(this,kf);We(this,kf,e=>{if(!iw&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){oe(this,Us)||this.setEventListener(oe(this,kf))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,Us))==null||e.call(this),We(this,Us,void 0))}setEventListener(e){var n;We(this,kf,e),(n=oe(this,Us))==null||n.call(this),We(this,Us,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){oe(this,_l)!==e&&(We(this,_l,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof oe(this,_l)=="boolean"?oe(this,_l):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},_l=new WeakMap,Us=new WeakMap,kf=new WeakMap,vF),n5=new aZ,Rf,Vs,If,mF,sZ=(mF=class extends rw{constructor(){super();lt(this,Rf,!0);lt(this,Vs);lt(this,If);We(this,If,e=>{if(!iw&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){oe(this,Vs)||this.setEventListener(oe(this,If))}onUnsubscribe(){var e;this.hasListeners()||((e=oe(this,Vs))==null||e.call(this),We(this,Vs,void 0))}setEventListener(e){var n;We(this,If,e),(n=oe(this,Vs))==null||n.call(this),We(this,Vs,e(this.setOnline.bind(this)))}setOnline(e){oe(this,Rf)!==e&&(We(this,Rf,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return oe(this,Rf)}},Rf=new WeakMap,Vs=new WeakMap,If=new WeakMap,mF),zy=new sZ;function uZ(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function lZ(t){return Math.min(1e3*2**t,3e4)}function r5(t){return(t??"online")==="online"?zy.isOnline():!0}var i5=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function T1(t){return t instanceof i5}function o5(t){let e=!1,n=0,r=!1,i;const o=uZ(),a=v=>{var m;r||(h(new i5(v)),(m=t.abort)==null||m.call(t))},s=()=>{e=!0},u=()=>{e=!1},l=()=>n5.isFocused()&&(t.networkMode==="always"||zy.isOnline())&&t.canRun(),c=()=>r5(t.networkMode)&&t.canRun(),f=v=>{var m;r||(r=!0,(m=t.onSuccess)==null||m.call(t,v),i==null||i(),o.resolve(v))},h=v=>{var m;r||(r=!0,(m=t.onError)==null||m.call(t,v),i==null||i(),o.reject(v))},d=()=>new Promise(v=>{var m;i=g=>{(r||l())&&v(g)},(m=t.onPause)==null||m.call(t)}).then(()=>{var v;i=void 0,r||(v=t.onContinue)==null||v.call(t)}),p=()=>{if(r)return;let v;const m=n===0?t.initialPromise:void 0;try{v=m??t.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var S;if(r)return;const y=t.retry??(iw?0:3),b=t.retryDelay??lZ,_=typeof b=="function"?b(n,g):b,x=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,g);if(e||!x){h(g);return}n++,(S=t.onFail)==null||S.call(t,n,g),nZ(_).then(()=>l()?void 0:d()).then(()=>{e?h(g):p()})})};return{promise:o,cancel:a,continue:()=>(i==null||i(),o),cancelRetry:s,continueRetry:u,canStart:c,start:()=>(c()?p():d().then(p),o)}}var cZ=t=>setTimeout(t,0);function fZ(){let t=[],e=0,n=s=>{s()},r=s=>{s()},i=cZ;const o=s=>{e?t.push(s):i(()=>{n(s)})},a=()=>{const s=t;t=[],s.length&&i(()=>{r(()=>{s.forEach(u=>{n(u)})})})};return{batch:s=>{let u;e++;try{u=s()}finally{e--,e||a()}return u},batchCalls:s=>(...u)=>{o(()=>{s(...u)})},schedule:o,setNotifyFunction:s=>{n=s},setBatchNotifyFunction:s=>{r=s},setScheduler:s=>{i=s}}}var Nr=fZ(),Sl,gF,a5=(gF=class{constructor(){lt(this,Sl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ZQ(this.gcTime)&&We(this,Sl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(iw?1/0:5*60*1e3))}clearGcTimeout(){oe(this,Sl)&&(clearTimeout(oe(this,Sl)),We(this,Sl,void 0))}},Sl=new WeakMap,gF),Df,El,Mi,Cl,gr,Wv,Al,po,Ra,yF,hZ=(yF=class extends a5{constructor(n){super();lt(this,po);lt(this,Df);lt(this,El);lt(this,Mi);lt(this,Cl);lt(this,gr);lt(this,Wv);lt(this,Al);We(this,Al,!1),We(this,Wv,n.defaultOptions),this.setOptions(n.options),this.observers=[],We(this,Cl,n.client),We(this,Mi,oe(this,Cl).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,We(this,Df,pZ(this.options)),this.state=n.state??oe(this,Df),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=oe(this,gr))==null?void 0:n.promise}setOptions(n){this.options={...oe(this,Wv),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&oe(this,Mi).remove(this)}setData(n,r){const i=rZ(this.state.data,n,this.options);return pr(this,po,Ra).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){pr(this,po,Ra).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,o;const r=(i=oe(this,gr))==null?void 0:i.promise;return(o=oe(this,gr))==null||o.cancel(n),r?r.then(fo).catch(fo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(oe(this,Df))}isActive(){return this.observers.some(n=>tZ(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>cE(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!eZ(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=oe(this,gr))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=oe(this,gr))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),oe(this,Mi).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(oe(this,gr)&&(oe(this,Al)?oe(this,gr).cancel({revert:!0}):oe(this,gr).cancelRetry()),this.scheduleGc()),oe(this,Mi).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pr(this,po,Ra).call(this,{type:"invalidate"})}fetch(n,r){var c,f,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(oe(this,gr))return oe(this,gr).continueRetry(),oe(this,gr).promise}if(n&&this.setOptions(n),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const i=new AbortController,o=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(We(this,Al,!0),i.signal)})},a=()=>{const d=t5(this.options,r),v=(()=>{const m={client:oe(this,Cl),queryKey:this.queryKey,meta:this.meta};return o(m),m})();return We(this,Al,!1),this.options.persister?this.options.persister(d,v,this):d(v)},u=(()=>{const d={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:oe(this,Cl),state:this.state,fetchFn:a};return o(d),d})();(c=this.options.behavior)==null||c.onFetch(u,this),We(this,El,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=u.fetchOptions)==null?void 0:f.meta))&&pr(this,po,Ra).call(this,{type:"fetch",meta:(h=u.fetchOptions)==null?void 0:h.meta});const l=d=>{var p,v,m,g;T1(d)&&d.silent||pr(this,po,Ra).call(this,{type:"error",error:d}),T1(d)||((v=(p=oe(this,Mi).config).onError)==null||v.call(p,d,this),(g=(m=oe(this,Mi).config).onSettled)==null||g.call(m,this.state.data,d,this)),this.scheduleGc()};return We(this,gr,o5({initialPromise:r==null?void 0:r.initialPromise,fn:u.fetchFn,abort:i.abort.bind(i),onSuccess:d=>{var p,v,m,g;if(d===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){l(y);return}(v=(p=oe(this,Mi).config).onSuccess)==null||v.call(p,d,this),(g=(m=oe(this,Mi).config).onSettled)==null||g.call(m,d,this.state.error,this),this.scheduleGc()},onError:l,onFail:(d,p)=>{pr(this,po,Ra).call(this,{type:"failed",failureCount:d,error:p})},onPause:()=>{pr(this,po,Ra).call(this,{type:"pause"})},onContinue:()=>{pr(this,po,Ra).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),oe(this,gr).start()}},Df=new WeakMap,El=new WeakMap,Mi=new WeakMap,Cl=new WeakMap,gr=new WeakMap,Wv=new WeakMap,Al=new WeakMap,po=new WeakSet,Ra=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...dZ(i.data,this.options),fetchMeta:n.meta??null};case"success":return We(this,El,void 0),{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=n.error;return T1(o)&&o.revert&&oe(this,El)?{...oe(this,El),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),Nr.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),oe(this,Mi).notify({query:this,type:"updated",action:n})})},yF);function dZ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:r5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function pZ(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Go,bF,vZ=(bF=class extends rw{constructor(e={}){super();lt(this,Go);this.config=e,We(this,Go,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??fT(i,n);let a=this.get(o);return a||(a=new hZ({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){oe(this,Go).has(e.queryHash)||(oe(this,Go).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=oe(this,Go).get(e.queryHash);n&&(e.destroy(),n===e&&oe(this,Go).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Nr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return oe(this,Go).get(e)}getAll(){return[...oe(this,Go).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>RI(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>RI(e,r)):n}notify(e){Nr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Nr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Nr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Go=new WeakMap,bF),qo,Ir,Tl,Ko,ks,wF,mZ=(wF=class extends a5{constructor(e){super();lt(this,Ko);lt(this,qo);lt(this,Ir);lt(this,Tl);this.mutationId=e.mutationId,We(this,Ir,e.mutationCache),We(this,qo,[]),this.state=e.state||gZ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){oe(this,qo).includes(e)||(oe(this,qo).push(e),this.clearGcTimeout(),oe(this,Ir).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){We(this,qo,oe(this,qo).filter(n=>n!==e)),this.scheduleGc(),oe(this,Ir).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){oe(this,qo).length||(this.state.status==="pending"?this.scheduleGc():oe(this,Ir).remove(this))}continue(){var e;return((e=oe(this,Tl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,_,x,S,E,C;const n=()=>{pr(this,Ko,ks).call(this,{type:"continue"})};We(this,Tl,o5({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(A,T)=>{pr(this,Ko,ks).call(this,{type:"failed",failureCount:A,error:T})},onPause:()=>{pr(this,Ko,ks).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>oe(this,Ir).canRun(this)}));const r=this.state.status==="pending",i=!oe(this,Tl).canStart();try{if(r)n();else{pr(this,Ko,ks).call(this,{type:"pending",variables:e,isPaused:i}),await((a=(o=oe(this,Ir).config).onMutate)==null?void 0:a.call(o,e,this));const T=await((u=(s=this.options).onMutate)==null?void 0:u.call(s,e));T!==this.state.context&&pr(this,Ko,ks).call(this,{type:"pending",context:T,variables:e,isPaused:i})}const A=await oe(this,Tl).start();return await((c=(l=oe(this,Ir).config).onSuccess)==null?void 0:c.call(l,A,e,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,A,e,this.state.context)),await((p=(d=oe(this,Ir).config).onSettled)==null?void 0:p.call(d,A,null,this.state.variables,this.state.context,this)),await((m=(v=this.options).onSettled)==null?void 0:m.call(v,A,null,e,this.state.context)),pr(this,Ko,ks).call(this,{type:"success",data:A}),A}catch(A){try{throw await((y=(g=oe(this,Ir).config).onError)==null?void 0:y.call(g,A,e,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,A,e,this.state.context)),await((S=(x=oe(this,Ir).config).onSettled)==null?void 0:S.call(x,void 0,A,this.state.variables,this.state.context,this)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,A,e,this.state.context)),A}finally{pr(this,Ko,ks).call(this,{type:"error",error:A})}}finally{oe(this,Ir).runNext(this)}}},qo=new WeakMap,Ir=new WeakMap,Tl=new WeakMap,Ko=new WeakSet,ks=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Nr.batch(()=>{oe(this,qo).forEach(r=>{r.onMutationUpdate(e)}),oe(this,Ir).notify({mutation:this,type:"updated",action:e})})},wF);function gZ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ja,vo,zv,xF,yZ=(xF=class extends rw{constructor(e={}){super();lt(this,ja);lt(this,vo);lt(this,zv);this.config=e,We(this,ja,new Set),We(this,vo,new Map),We(this,zv,0)}build(e,n,r){const i=new mZ({mutationCache:this,mutationId:++Dm(this,zv)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){oe(this,ja).add(e);const n=ng(e);if(typeof n=="string"){const r=oe(this,vo).get(n);r?r.push(e):oe(this,vo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(oe(this,ja).delete(e)){const n=ng(e);if(typeof n=="string"){const r=oe(this,vo).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&oe(this,vo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ng(e);if(typeof n=="string"){const r=oe(this,vo).get(n),i=r==null?void 0:r.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=ng(e);if(typeof n=="string"){const i=(r=oe(this,vo).get(n))==null?void 0:r.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Nr.batch(()=>{oe(this,ja).forEach(e=>{this.notify({type:"removed",mutation:e})}),oe(this,ja).clear(),oe(this,vo).clear()})}getAll(){return Array.from(oe(this,ja))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>II(n,r))}findAll(e={}){return this.getAll().filter(n=>II(e,n))}notify(e){Nr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Nr.batch(()=>Promise.all(e.map(n=>n.continue().catch(fo))))}},ja=new WeakMap,vo=new WeakMap,zv=new WeakMap,xF);function ng(t){var e;return(e=t.options.scope)==null?void 0:e.id}function MI(t){return{onFetch:(e,n)=>{var c,f,h,d,p;const r=e.options,i=(h=(f=(c=e.fetchOptions)==null?void 0:c.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,o=((d=e.state.data)==null?void 0:d.pages)||[],a=((p=e.state.data)==null?void 0:p.pageParams)||[];let s={pages:[],pageParams:[]},u=0;const l=async()=>{let v=!1;const m=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},g=t5(e.options,e.fetchOptions),y=async(b,_,x)=>{if(v)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const E=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:_,direction:x?"backward":"forward",meta:e.options.meta};return m(P),P})(),C=await g(E),{maxPages:A}=e.options,T=x?oZ:iZ;return{pages:T(b.pages,C,A),pageParams:T(b.pageParams,_,A)}};if(i&&o.length){const b=i==="backward",_=b?bZ:$I,x={pages:o,pageParams:a},S=_(r,x);s=await y(x,S,b)}else{const b=t??o.length;do{const _=u===0?a[0]??r.initialPageParam:$I(r,s);if(u>0&&_==null)break;s=await y(s,_),u++}while(u<b)}return s};e.options.persister?e.fetchFn=()=>{var v,m;return(m=(v=e.options).persister)==null?void 0:m.call(v,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function $I(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function bZ(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var sn,Ws,zs,Nf,Mf,Hs,$f,jf,_F,wZ=(_F=class{constructor(t={}){lt(this,sn);lt(this,Ws);lt(this,zs);lt(this,Nf);lt(this,Mf);lt(this,Hs);lt(this,$f);lt(this,jf);We(this,sn,t.queryCache||new vZ),We(this,Ws,t.mutationCache||new yZ),We(this,zs,t.defaultOptions||{}),We(this,Nf,new Map),We(this,Mf,new Map),We(this,Hs,0)}mount(){Dm(this,Hs)._++,oe(this,Hs)===1&&(We(this,$f,n5.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,sn).onFocus())})),We(this,jf,zy.subscribe(async t=>{t&&(await this.resumePausedMutations(),oe(this,sn).onOnline())})))}unmount(){var t,e;Dm(this,Hs)._--,oe(this,Hs)===0&&((t=oe(this,$f))==null||t.call(this),We(this,$f,void 0),(e=oe(this,jf))==null||e.call(this),We(this,jf,void 0))}isFetching(t){return oe(this,sn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return oe(this,Ws).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=oe(this,sn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=oe(this,sn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(cE(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return oe(this,sn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=oe(this,sn).get(r.queryHash),o=i==null?void 0:i.state.data,a=QQ(e,o);if(a!==void 0)return oe(this,sn).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Nr.batch(()=>oe(this,sn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=oe(this,sn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=oe(this,sn);Nr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=oe(this,sn);return Nr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Nr.batch(()=>oe(this,sn).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(fo).catch(fo)}invalidateQueries(t,e={}){return Nr.batch(()=>(oe(this,sn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Nr.batch(()=>oe(this,sn).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(fo)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(fo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=oe(this,sn).build(this,e);return n.isStaleByTime(cE(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fo).catch(fo)}fetchInfiniteQuery(t){return t.behavior=MI(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fo).catch(fo)}ensureInfiniteQueryData(t){return t.behavior=MI(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zy.isOnline()?oe(this,Ws).resumePausedMutations():Promise.resolve()}getQueryCache(){return oe(this,sn)}getMutationCache(){return oe(this,Ws)}getDefaultOptions(){return oe(this,zs)}setDefaultOptions(t){We(this,zs,t)}setQueryDefaults(t,e){oe(this,Nf).set(jp(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...oe(this,Nf).values()],n={};return e.forEach(r=>{Lp(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){oe(this,Mf).set(jp(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...oe(this,Mf).values()],n={};return e.forEach(r=>{Lp(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...oe(this,zs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=fT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===hT&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...oe(this,zs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){oe(this,sn).clear(),oe(this,Ws).clear()}},sn=new WeakMap,Ws=new WeakMap,zs=new WeakMap,Nf=new WeakMap,Mf=new WeakMap,Hs=new WeakMap,$f=new WeakMap,jf=new WeakMap,_F),xZ=k.createContext(void 0),_Z=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),N.jsx(xZ.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hy.apply(this,arguments)}var Ks;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ks||(Ks={}));const jI="popstate";function SZ(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:s}=r.location;return hE("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:u5(i)}return CZ(e,n,null,t)}function ni(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function s5(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EZ(){return Math.random().toString(36).substr(2,8)}function LI(t,e){return{usr:t.state,key:t.key,idx:e}}function hE(t,e,n,r){return n===void 0&&(n=null),Hy({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ow(e):e,{state:n,key:e&&e.key||r||EZ()})}function u5(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ow(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function CZ(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Ks.Pop,u=null,l=c();l==null&&(l=0,a.replaceState(Hy({},a.state,{idx:l}),""));function c(){return(a.state||{idx:null}).idx}function f(){s=Ks.Pop;let m=c(),g=m==null?null:m-l;l=m,u&&u({action:s,location:v.location,delta:g})}function h(m,g){s=Ks.Push;let y=hE(v.location,m,g);l=c()+1;let b=LI(y,l),_=v.createHref(y);try{a.pushState(b,"",_)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(_)}o&&u&&u({action:s,location:v.location,delta:1})}function d(m,g){s=Ks.Replace;let y=hE(v.location,m,g);l=c();let b=LI(y,l),_=v.createHref(y);a.replaceState(b,"",_),o&&u&&u({action:s,location:v.location,delta:0})}function p(m){let g=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof m=="string"?m:u5(m);return y=y.replace(/ $/,"%20"),ni(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let v={get action(){return s},get location(){return t(i,a)},listen(m){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(jI,f),u=m,()=>{i.removeEventListener(jI,f),u=null}},createHref(m){return e(i,m)},createURL:p,encodeLocation(m){let g=p(m);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:d,go(m){return a.go(m)}};return v}var FI;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(FI||(FI={}));function AZ(t,e,n){return n===void 0&&(n="/"),TZ(t,e,n,!1)}function TZ(t,e,n,r){let i=typeof e=="string"?ow(e):e,o=f5(i.pathname||"/",n);if(o==null)return null;let a=l5(t);PZ(a);let s=null;for(let u=0;s==null&&u<a.length;++u){let l=FZ(o);s=jZ(a[u],l,r)}return s}function l5(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let u={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(ni(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=cf([r,u.relativePath]),c=n.concat(u);o.children&&o.children.length>0&&(ni(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),l5(o.children,e,c,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:MZ(l,o.index),routesMeta:c})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let u of c5(o.path))i(o,a,u)}),e}function c5(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=c5(r.join("/")),s=[];return s.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&s.push(...a),s.map(u=>t.startsWith("/")&&u===""?"/":u)}function PZ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$Z(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const OZ=/^:[\w-]+$/,kZ=3,RZ=2,IZ=1,DZ=10,NZ=-2,BI=t=>t==="*";function MZ(t,e){let n=t.split("/"),r=n.length;return n.some(BI)&&(r+=NZ),e&&(r+=RZ),n.filter(i=>!BI(i)).reduce((i,o)=>i+(OZ.test(o)?kZ:o===""?IZ:DZ),r)}function $Z(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function jZ(t,e,n){let{routesMeta:r}=t,i={},o="/",a=[];for(let s=0;s<r.length;++s){let u=r[s],l=s===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",f=UI({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),h=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=UI({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:cf([o,f.pathname]),pathnameBase:BZ(cf([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=cf([o,f.pathnameBase]))}return a}function UI(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=LZ(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:h,isOptional:d}=c;if(h==="*"){let v=s[f]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const p=s[f];return d&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:t}}function LZ(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),s5(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function FZ(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return s5(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function f5(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const cf=t=>t.join("/").replace(/\/\/+/g,"/"),BZ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function UZ(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const h5=["post","put","patch","delete"];new Set(h5);const VZ=["get",...h5];new Set(VZ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gy(){return Gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gy.apply(this,arguments)}const WZ=k.createContext(null),zZ=k.createContext(null),d5=k.createContext(null),aw=k.createContext(null),sw=k.createContext({outlet:null,matches:[],isDataRoute:!1}),p5=k.createContext(null);function dT(){return k.useContext(aw)!=null}function v5(){return dT()||ni(!1),k.useContext(aw).location}function HZ(t,e){return GZ(t,e)}function GZ(t,e,n,r){dT()||ni(!1);let{navigator:i}=k.useContext(d5),{matches:o}=k.useContext(sw),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let l=v5(),c;if(e){var f;let m=typeof e=="string"?ow(e):e;u==="/"||(f=m.pathname)!=null&&f.startsWith(u)||ni(!1),c=m}else c=l;let h=c.pathname||"/",d=h;if(u!=="/"){let m=u.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(m.length).join("/")}let p=AZ(t,{pathname:d}),v=JZ(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},s,m.params),pathname:cf([u,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:cf([u,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return e&&v?k.createElement(aw.Provider,{value:{location:Gy({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ks.Pop}},v):v}function qZ(){let t=tee(),e=UZ(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,null)}const KZ=k.createElement(qZ,null);class XZ extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(sw.Provider,{value:this.props.routeContext},k.createElement(p5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YZ(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(WZ);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(sw.Provider,{value:e},r)}function JZ(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=(i=n)==null?void 0:i.errors;if(s!=null){let c=a.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);c>=0||ni(!1),a=a.slice(0,Math.min(a.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<a.length;c++){let f=a[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:h,errors:d}=n,p=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((c,f,h)=>{let d,p=!1,v=null,m=null;n&&(d=s&&f.route.id?s[f.route.id]:void 0,v=f.route.errorElement||KZ,u&&(l<0&&h===0?(p=!0,m=null):l===h&&(p=!0,m=f.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,h+1)),y=()=>{let b;return d?b=v:p?b=m:f.route.Component?b=k.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,k.createElement(YZ,{match:f,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?k.createElement(XZ,{location:n.location,revalidation:n.revalidation,component:v,error:d,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var dE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(dE||{});function QZ(t){let e=k.useContext(zZ);return e||ni(!1),e}function ZZ(t){let e=k.useContext(sw);return e||ni(!1),e}function eee(t){let e=ZZ(),n=e.matches[e.matches.length-1];return n.route.id||ni(!1),n.route.id}function tee(){var t;let e=k.useContext(p5),n=QZ(dE.UseRouteError),r=eee(dE.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function nee(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function pE(t){ni(!1)}function ree(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ks.Pop,navigator:o,static:a=!1,future:s}=t;dT()&&ni(!1);let u=e.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:u,navigator:o,static:a,future:Gy({v7_relativeSplatPath:!1},s)}),[u,s,o,a]);typeof r=="string"&&(r=ow(r));let{pathname:c="/",search:f="",hash:h="",state:d=null,key:p="default"}=r,v=k.useMemo(()=>{let m=f5(c,u);return m==null?null:{location:{pathname:m,search:f,hash:h,state:d,key:p},navigationType:i}},[u,c,f,h,d,p,i]);return v==null?null:k.createElement(d5.Provider,{value:l},k.createElement(aw.Provider,{children:n,value:v}))}function iee(t){let{children:e,location:n}=t;return HZ(vE(e),n)}new Promise(()=>{});function vE(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let o=[...e,i];if(r.type===k.Fragment){n.push.apply(n,vE(r.props.children,o));return}r.type!==pE&&ni(!1),!r.props.index||!r.props.children||ni(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=vE(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const oee="6";try{window.__reactRouterVersion=oee}catch{}const aee="startTransition",VI=DF[aee];function see(t){let{basename:e,children:n,future:r,window:i}=t,o=k.useRef();o.current==null&&(o.current=SZ({window:i,v5Compat:!0}));let a=o.current,[s,u]=k.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},c=k.useCallback(f=>{l&&VI?VI(()=>u(f)):u(f)},[u,l]);return k.useLayoutEffect(()=>a.listen(c),[a,c]),k.useEffect(()=>nee(r),[r]),k.createElement(ree,{basename:e,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}var WI;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(WI||(WI={}));var zI;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zI||(zI={}));const pT=k.createContext({});function vT(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const m5=typeof window<"u",g5=m5?k.useLayoutEffect:k.useEffect,uw=k.createContext(null);function mT(t,e){t.indexOf(e)===-1&&t.push(e)}function gT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ma=(t,e,n)=>n>e?e:n<t?t:n;let lw=()=>{},qf=()=>{};const ts={},y5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function b5(t){return typeof t=="object"&&t!==null}const w5=t=>/^0[^.\s]+$/u.test(t);function yT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ki=t=>t,uee=(t,e)=>n=>e(t(n)),Qv=(...t)=>t.reduce(uee),Fp=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class bT{constructor(){this.subscriptions=[]}add(e){return mT(this.subscriptions,e),()=>gT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ua=t=>t*1e3,zi=t=>t/1e3;function x5(t,e){return e?t*(1e3/e):0}const _5=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,lee=1e-7,cee=12;function fee(t,e,n,r,i){let o,a,s=0;do a=e+(n-e)/2,o=_5(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>lee&&++s<cee);return a}function Zv(t,e,n,r){if(t===e&&n===r)return Ki;const i=o=>fee(o,0,1,t,n);return o=>o===0||o===1?o:_5(i(o),e,r)}const S5=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,E5=t=>e=>1-t(1-e),C5=Zv(.33,1.53,.69,.99),wT=E5(C5),A5=S5(wT),T5=t=>(t*=2)<1?.5*wT(t):.5*(2-Math.pow(2,-10*(t-1))),xT=t=>1-Math.sin(Math.acos(t)),P5=E5(xT),O5=S5(xT),hee=Zv(.42,0,1,1),dee=Zv(0,0,.58,1),k5=Zv(.42,0,.58,1),pee=t=>Array.isArray(t)&&typeof t[0]!="number",R5=t=>Array.isArray(t)&&typeof t[0]=="number",HI={linear:Ki,easeIn:hee,easeInOut:k5,easeOut:dee,circIn:xT,circInOut:O5,circOut:P5,backIn:wT,backInOut:A5,backOut:C5,anticipate:T5},vee=t=>typeof t=="string",GI=t=>{if(R5(t)){qf(t.length===4,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");const[e,n,r,i]=t;return Zv(e,n,r,i)}else if(vee(t))return qf(HI[t]!==void 0,`Invalid easing type '${t}'`,"invalid-easing-type"),HI[t];return t},rg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],qI={value:null,addProjectionMetrics:null};function mee(t,e){let n=new Set,r=new Set,i=!1,o=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1},u=0;function l(f){a.has(f)&&(c.schedule(f),t()),u++,f(s)}const c={schedule:(f,h=!1,d=!1)=>{const v=d&&i?n:r;return h&&a.add(f),v.has(f)||v.add(f),f},cancel:f=>{r.delete(f),a.delete(f)},process:f=>{if(s=f,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(l),e&&qI.value&&qI.value.frameloop[e].push(u),u=0,n.clear(),i=!1,o&&(o=!1,c.process(f))}};return c}const gee=40;function I5(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=rg.reduce((b,_)=>(b[_]=mee(o,e?_:void 0),b),{}),{setup:s,read:u,resolveKeyframes:l,preUpdate:c,update:f,preRender:h,render:d,postRender:p}=a,v=()=>{const b=ts.useManualTiming?i.timestamp:performance.now();n=!1,ts.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,gee),1)),i.timestamp=b,i.isProcessing=!0,s.process(i),u.process(i),l.process(i),c.process(i),f.process(i),h.process(i),d.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(v))},m=()=>{n=!0,r=!0,i.isProcessing||t(v)};return{schedule:rg.reduce((b,_)=>{const x=a[_];return b[_]=(S,E=!1,C=!1)=>(n||m(),x.schedule(S,E,C)),b},{}),cancel:b=>{for(let _=0;_<rg.length;_++)a[rg[_]].cancel(b)},state:i,steps:a}}const{schedule:Wt,cancel:bu,state:ir,steps:P1}=I5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ki,!0);let ay;function yee(){ay=void 0}const Mr={now:()=>(ay===void 0&&Mr.set(ir.isProcessing||ts.useManualTiming?ir.timestamp:performance.now()),ay),set:t=>{ay=t,queueMicrotask(yee)}},D5=t=>e=>typeof e=="string"&&e.startsWith(t),N5=D5("--"),bee=D5("var(--"),_T=t=>bee(t)?wee.test(t.split("/*")[0].trim()):!1,wee=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function KI(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const kh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bp={...kh,transform:t=>ma(0,1,t)},ig={...kh,default:1},Jd=t=>Math.round(t*1e5)/1e5,ST=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xee(t){return t==null}const _ee=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ET=(t,e)=>n=>!!(typeof n=="string"&&_ee.test(n)&&n.startsWith(t)||e&&!xee(n)&&Object.prototype.hasOwnProperty.call(n,e)),M5=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,s]=r.match(ST);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:s!==void 0?parseFloat(s):1}},See=t=>ma(0,255,t),O1={...kh,transform:t=>Math.round(See(t))},hl={test:ET("rgb","red"),parse:M5("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+O1.transform(t)+", "+O1.transform(e)+", "+O1.transform(n)+", "+Jd(Bp.transform(r))+")"};function Eee(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mE={test:ET("#"),parse:Eee,transform:hl.transform},em=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rs=em("deg"),la=em("%"),Se=em("px"),Cee=em("vh"),Aee=em("vw"),XI={...la,parse:t=>la.parse(t)/100,transform:t=>la.transform(t*100)},Hc={test:ET("hsl","hue"),parse:M5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+la.transform(Jd(e))+", "+la.transform(Jd(n))+", "+Jd(Bp.transform(r))+")"},xn={test:t=>hl.test(t)||mE.test(t)||Hc.test(t),parse:t=>hl.test(t)?hl.parse(t):Hc.test(t)?Hc.parse(t):mE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?hl.transform(t):Hc.transform(t),getAnimatableNone:t=>{const e=xn.parse(t);return e.alpha=0,xn.transform(e)}},Tee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Pee(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ST))==null?void 0:e.length)||0)+(((n=t.match(Tee))==null?void 0:n.length)||0)>0}const $5="number",j5="color",Oee="var",kee="var(",YI="${}",Ree=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Up(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const s=e.replace(Ree,u=>(xn.test(u)?(r.color.push(o),i.push(j5),n.push(xn.parse(u))):u.startsWith(kee)?(r.var.push(o),i.push(Oee),n.push(u)):(r.number.push(o),i.push($5),n.push(parseFloat(u))),++o,YI)).split(YI);return{values:n,split:s,indexes:r,types:i}}function L5(t){return Up(t).values}function F5(t){const{split:e,types:n}=Up(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const s=n[a];s===$5?o+=Jd(i[a]):s===j5?o+=xn.transform(i[a]):o+=i[a]}return o}}const Iee=t=>typeof t=="number"?0:xn.test(t)?xn.getAnimatableNone(t):t;function Dee(t){const e=L5(t);return F5(t)(e.map(Iee))}const wu={test:Pee,parse:L5,createTransformer:F5,getAnimatableNone:Dee};function k1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Nee({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;i=k1(u,s,t+1/3),o=k1(u,s,t),a=k1(u,s,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function qy(t,e){return n=>n>0?e:t}const Zt=(t,e,n)=>t+(e-t)*n,R1=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Mee=[mE,hl,Hc],$ee=t=>Mee.find(e=>e.test(t));function JI(t){const e=$ee(t);if(lw(!!e,`'${t}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!e)return!1;let n=e.parse(t);return e===Hc&&(n=Nee(n)),n}const QI=(t,e)=>{const n=JI(t),r=JI(e);if(!n||!r)return qy(t,e);const i={...n};return o=>(i.red=R1(n.red,r.red,o),i.green=R1(n.green,r.green,o),i.blue=R1(n.blue,r.blue,o),i.alpha=Zt(n.alpha,r.alpha,o),hl.transform(i))},gE=new Set(["none","hidden"]);function jee(t,e){return gE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Lee(t,e){return n=>Zt(t,e,n)}function CT(t){return typeof t=="number"?Lee:typeof t=="string"?_T(t)?qy:xn.test(t)?QI:Uee:Array.isArray(t)?B5:typeof t=="object"?xn.test(t)?QI:Fee:qy}function B5(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>CT(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function Fee(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=CT(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function Bee(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][r[o]],s=t.values[a]??0;n[i]=s,r[o]++}return n}const Uee=(t,e)=>{const n=wu.createTransformer(e),r=Up(t),i=Up(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?gE.has(t)&&!i.values.length||gE.has(e)&&!r.values.length?jee(t,e):Qv(B5(Bee(r,i),i.values),n):(lw(!0,`Complex values '${t}' and '${e}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),qy(t,e))};function U5(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Zt(t,e,n):CT(t)(t,e)}const Vee=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Wt.update(e,n),stop:()=>bu(e),now:()=>ir.isProcessing?ir.timestamp:Mr.now()}},V5=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ky=2e4;function AT(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Ky;)e+=n,r=t.next(e);return e>=Ky?1/0:e}function Wee(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(AT(r),Ky);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:zi(i)}}const zee=5;function W5(t,e,n){const r=Math.max(e-zee,0);return x5(n-t(r),e-r)}const Yt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},I1=.001;function Hee({duration:t=Yt.duration,bounce:e=Yt.bounce,velocity:n=Yt.velocity,mass:r=Yt.mass}){let i,o;lw(t<=ua(Yt.maxDuration),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-e;a=ma(Yt.minDamping,Yt.maxDamping,a),t=ma(Yt.minDuration,Yt.maxDuration,zi(t)),a<1?(i=l=>{const c=l*a,f=c*t,h=c-n,d=yE(l,a),p=Math.exp(-f);return I1-h/d*p},o=l=>{const f=l*a*t,h=f*n+n,d=Math.pow(a,2)*Math.pow(l,2)*t,p=Math.exp(-f),v=yE(Math.pow(l,2),a);return(-i(l)+I1>0?-1:1)*((h-d)*p)/v}):(i=l=>{const c=Math.exp(-l*t),f=(l-n)*t+1;return-I1+c*f},o=l=>{const c=Math.exp(-l*t),f=(n-l)*(t*t);return c*f});const s=5/t,u=qee(i,o,s);if(t=ua(t),isNaN(u))return{stiffness:Yt.stiffness,damping:Yt.damping,duration:t};{const l=Math.pow(u,2)*r;return{stiffness:l,damping:a*2*Math.sqrt(r*l),duration:t}}}const Gee=12;function qee(t,e,n){let r=n;for(let i=1;i<Gee;i++)r=r-t(r)/e(r);return r}function yE(t,e){return t*Math.sqrt(1-e*e)}const Kee=["duration","bounce"],Xee=["stiffness","damping","mass"];function ZI(t,e){return e.some(n=>t[n]!==void 0)}function Yee(t){let e={velocity:Yt.velocity,stiffness:Yt.stiffness,damping:Yt.damping,mass:Yt.mass,isResolvedFromDuration:!1,...t};if(!ZI(t,Xee)&&ZI(t,Kee))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*ma(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Yt.mass,stiffness:i,damping:o}}else{const n=Hee(t);e={...e,...n,mass:Yt.mass},e.isResolvedFromDuration=!0}return e}function Xy(t=Yt.visualDuration,e=Yt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],s={done:!1,value:o},{stiffness:u,damping:l,mass:c,duration:f,velocity:h,isResolvedFromDuration:d}=Yee({...n,velocity:-zi(n.velocity||0)}),p=h||0,v=l/(2*Math.sqrt(u*c)),m=a-o,g=zi(Math.sqrt(u/c)),y=Math.abs(m)<5;r||(r=y?Yt.restSpeed.granular:Yt.restSpeed.default),i||(i=y?Yt.restDelta.granular:Yt.restDelta.default);let b;if(v<1){const x=yE(g,v);b=S=>{const E=Math.exp(-v*g*S);return a-E*((p+v*g*m)/x*Math.sin(x*S)+m*Math.cos(x*S))}}else if(v===1)b=x=>a-Math.exp(-g*x)*(m+(p+g*m)*x);else{const x=g*Math.sqrt(v*v-1);b=S=>{const E=Math.exp(-v*g*S),C=Math.min(x*S,300);return a-E*((p+v*g*m)*Math.sinh(C)+x*m*Math.cosh(C))/x}}const _={calculatedDuration:d&&f||null,next:x=>{const S=b(x);if(d)s.done=x>=f;else{let E=x===0?p:0;v<1&&(E=x===0?ua(p):W5(b,x,S));const C=Math.abs(E)<=r,A=Math.abs(a-S)<=i;s.done=C&&A}return s.value=s.done?a:S,s},toString:()=>{const x=Math.min(AT(_),Ky),S=V5(E=>_.next(x*E).value,x,30);return x+"ms "+S},toTransition:()=>{}};return _}Xy.applyToOptions=t=>{const e=Wee(t,100,Xy);return t.ease=e.ease,t.duration=ua(e.duration),t.type="keyframes",t};function bE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:s,max:u,restDelta:l=.5,restSpeed:c}){const f=t[0],h={done:!1,value:f},d=C=>s!==void 0&&C<s||u!==void 0&&C>u,p=C=>s===void 0?u:u===void 0||Math.abs(s-C)<Math.abs(u-C)?s:u;let v=n*e;const m=f+v,g=a===void 0?m:a(m);g!==m&&(v=g-f);const y=C=>-v*Math.exp(-C/r),b=C=>g+y(C),_=C=>{const A=y(C),T=b(C);h.done=Math.abs(A)<=l,h.value=h.done?g:T};let x,S;const E=C=>{d(h.value)&&(x=C,S=Xy({keyframes:[h.value,p(h.value)],velocity:W5(b,C,h.value),damping:i,stiffness:o,restDelta:l,restSpeed:c}))};return E(0),{calculatedDuration:null,next:C=>{let A=!1;return!S&&x===void 0&&(A=!0,_(C),E(C)),x!==void 0&&C>=x?S.next(C-x):(!A&&_(C),h)}}}function Jee(t,e,n){const r=[],i=n||ts.mix||U5,o=t.length-1;for(let a=0;a<o;a++){let s=i(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||Ki:e;s=Qv(u,s)}r.push(s)}return r}function Qee(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(qf(o===e.length,"Both input and output ranges must be the same length","range-length"),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const s=Jee(e,r,i),u=s.length,l=c=>{if(a&&c<t[0])return e[0];let f=0;if(u>1)for(;f<t.length-2&&!(c<t[f+1]);f++);const h=Fp(t[f],t[f+1],c);return s[f](h)};return n?c=>l(ma(t[0],t[o-1],c)):l}function Zee(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Fp(0,e,r);t.push(Zt(n,1,i))}}function ete(t){const e=[0];return Zee(e,t.length-1),e}function tte(t,e){return t.map(n=>n*e)}function nte(t,e){return t.map(()=>e||k5).splice(0,t.length-1)}function Qd({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=pee(r)?r.map(GI):GI(r),o={done:!1,value:e[0]},a=tte(n&&n.length===e.length?n:ete(e),t),s=Qee(a,e,{ease:Array.isArray(i)?i:nte(e,i)});return{calculatedDuration:t,next:u=>(o.value=s(u),o.done=u>=t,o)}}const rte=t=>t!==null;function TT(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(rte),s=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!s||r===void 0?o[s]:r}const ite={decay:bE,inertia:bE,tween:Qd,keyframes:Qd,spring:Xy};function z5(t){typeof t.type=="string"&&(t.type=ite[t.type])}class PT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const ote=t=>t/100;class OT extends PT{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Mr.now()&&this.tick(Mr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;z5(e);const{type:n=Qd,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=e;let{keyframes:s}=e;const u=n||Qd;u!==Qd&&typeof s[0]!="number"&&(this.mixKeyframes=Qv(ote,U5(s[0],s[1])),s=[0,100]);const l=u({...e,keyframes:s});o==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...s].reverse(),velocity:-a})),l.calculatedDuration===null&&(l.calculatedDuration=AT(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=l}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:s,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:l=0,keyframes:c,repeat:f,repeatType:h,repeatDelay:d,type:p,onUpdate:v,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let b=this.currentTime,_=r;if(f){const C=Math.min(this.currentTime,i)/s;let A=Math.floor(C),T=C%1;!T&&C>=1&&(T=1),T===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(h==="reverse"?(T=1-T,d&&(T-=d/s)):h==="mirror"&&(_=a)),b=ma(0,1,T)*s}const x=y?{done:!1,value:c[0]}:_.next(b);o&&(x.value=o(x.value));let{done:S}=x;!y&&u!==null&&(S=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&p!==bE&&(x.value=TT(c,this.options,m,this.speed)),v&&v(x.value),E&&this.finish(),x}then(e,n){return this.finished.then(e,n)}get duration(){return zi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zi(e)}get time(){return zi(this.currentTime)}set time(e){var n;e=ua(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Mr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zi(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=Vee,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function ate(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const dl=t=>t*180/Math.PI,wE=t=>{const e=dl(Math.atan2(t[1],t[0]));return xE(e)},ste={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:wE,rotateZ:wE,skewX:t=>dl(Math.atan(t[1])),skewY:t=>dl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},xE=t=>(t=t%360,t<0&&(t+=360),t),eD=wE,tD=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),nD=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),ute={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tD,scaleY:nD,scale:t=>(tD(t)+nD(t))/2,rotateX:t=>xE(dl(Math.atan2(t[6],t[5]))),rotateY:t=>xE(dl(Math.atan2(-t[2],t[0]))),rotateZ:eD,rotate:eD,skewX:t=>dl(Math.atan(t[4])),skewY:t=>dl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _E(t){return t.includes("scale")?1:0}function SE(t,e){if(!t||t==="none")return _E(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=ute,i=n;else{const s=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=ste,i=s}if(!i)return _E(e);const o=r[e],a=i[1].split(",").map(cte);return typeof o=="function"?o(a):a[o]}const lte=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return SE(n,e)};function cte(t){return parseFloat(t.trim())}const Rh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ih=new Set(Rh),rD=t=>t===kh||t===Se,fte=new Set(["x","y","z"]),hte=Rh.filter(t=>!fte.has(t));function dte(t){const e=[];return hte.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Xs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>SE(e,"x"),y:(t,{transform:e})=>SE(e,"y")};Xs.translateX=Xs.x;Xs.translateY=Xs.y;const kl=new Set;let EE=!1,CE=!1,AE=!1;function H5(){if(CE){const t=Array.from(kl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=dte(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var s;(s=r.getValue(o))==null||s.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}CE=!1,EE=!1,kl.forEach(t=>t.complete(AE)),kl.clear()}function G5(){kl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(CE=!0)})}function pte(){AE=!0,G5(),H5(),AE=!1}class kT{constructor(e,n,r,i,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(kl.add(this),EE||(EE=!0,Wt.read(G5),Wt.resolveKeyframes(H5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const s=r.readValue(n,a);s!=null&&(e[0]=s)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}ate(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),kl.delete(this)}cancel(){this.state==="scheduled"&&(kl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const vte=t=>t.startsWith("--");function mte(t,e,n){vte(e)?t.style.setProperty(e,n):t.style[e]=n}const gte=yT(()=>window.ScrollTimeline!==void 0),yte={};function bte(t,e){const n=yT(t);return()=>yte[e]??n()}const q5=bte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,iD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jd([0,.65,.55,1]),circOut:jd([.55,0,1,.45]),backIn:jd([.31,.01,.66,-.59]),backOut:jd([.33,1.53,.69,.99])};function K5(t,e){if(t)return typeof t=="function"?q5()?V5(t,e):"ease-out":R5(t)?jd(t):Array.isArray(t)?t.map(n=>K5(n,e)||iD.easeOut):iD[t]}function wte(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:s="easeOut",times:u}={},l=void 0){const c={[e]:n};u&&(c.offset=u);const f=K5(s,i);Array.isArray(f)&&(c.easing=f);const h={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return l&&(h.pseudoElement=l),t.animate(c,h)}function X5(t){return typeof t=="function"&&"applyToOptions"in t}function xte({type:t,...e}){return X5(t)&&q5()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class _te extends PT{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:s,onComplete:u}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,qf(typeof e.type!="string",`Mini animate() doesn't support "type" as a string.`,"mini-spring");const l=xte(e);this.animation=wte(n,r,i,l,o),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const c=TT(i,this.options,s,this.speed);this.updateMotionValue?this.updateMotionValue(c):mte(n,r,c),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return zi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zi(e)}get time(){return zi(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ua(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&gte()?(this.animation.timeline=e,Ki):n(this)}}const Y5={anticipate:T5,backInOut:A5,circInOut:O5};function Ste(t){return t in Y5}function Ete(t){typeof t.ease=="string"&&Ste(t.ease)&&(t.ease=Y5[t.ease])}const D1=10;class Cte extends _te{constructor(e){Ete(e),z5(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const s=new OT({...a,autoplay:!1}),u=Math.max(D1,Mr.now()-this.startTime),l=ma(0,D1,u-D1);n.setWithVelocity(s.sample(Math.max(0,u-l)).value,s.sample(u).value,l),s.stop()}}const oD=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wu.test(t)||t==="0")&&!t.startsWith("url("));function Ate(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Tte(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=oD(i,e),s=oD(o,e);return lw(a===s,`You are trying to animate ${e} from "${i}" to "${o}". "${a?o:i}" is not an animatable value.`,"value-not-animatable"),!a||!s?!1:Ate(t)||(n==="spring"||X5(n))&&r}function TE(t){t.duration=0,t.type="keyframes"}const Pte=new Set(["opacity","clipPath","filter","transform"]),Ote=yT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function kte(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=t;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:l}=e.owner.getProps();return Ote()&&n&&Pte.has(n)&&(n!=="transform"||!l)&&!u&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}const Rte=40;class Ite extends PT{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",keyframes:s,name:u,motionValue:l,element:c,...f}){var p;super(),this.stop=()=>{var v,m;this._animation&&(this._animation.stop(),(v=this.stopTimeline)==null||v.call(this)),(m=this.keyframeResolver)==null||m.cancel()},this.createdAt=Mr.now();const h={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,name:u,motionValue:l,element:c,...f},d=(c==null?void 0:c.KeyframeResolver)||kT;this.keyframeResolver=new d(s,(v,m,g)=>this.onKeyframesResolved(v,m,h,!g),u,l,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,n,r,i){var m,g;this.keyframeResolver=void 0;const{name:o,type:a,velocity:s,delay:u,isHandoff:l,onUpdate:c}=r;this.resolvedAt=Mr.now(),Tte(e,o,a,s)||((ts.instantAnimations||!u)&&(c==null||c(TT(e,r,n))),e[0]=e[e.length-1],TE(r),r.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Rte?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},d=!l&&kte(h),p=(g=(m=h.motionValue)==null?void 0:m.owner)==null?void 0:g.current,v=d?new Cte({...h,element:p}):new OT(h);v.finished.then(()=>{this.notifyFinished()}).catch(Ki),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),pte()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function J5(t,e,n,r=0,i=1){const o=Array.from(t).sort((l,c)=>l.sortNodePosition(c)).indexOf(e),a=t.size,s=(a-1)*r;return typeof n=="function"?n(o,a):i===1?o*r:s-o*r}const Dte=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Nte(t){const e=Dte.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}const Mte=4;function Q5(t,e,n=1){qf(n<=Mte,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");const[r,i]=Nte(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return y5(a)?parseFloat(a):a}return _T(i)?Q5(i,e,n+1):i}const $te={type:"spring",stiffness:500,damping:25,restSpeed:10},jte=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Lte={type:"keyframes",duration:.8},Fte={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Bte=(t,{keyframes:e})=>e.length>2?Lte:Ih.has(t)?t.startsWith("scale")?jte(e[1]):$te:Fte,Ute=t=>t!==null;function Vte(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Ute),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}function RT(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}function Wte({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:s,from:u,elapsed:l,...c}){return!!Object.keys(c).length}const IT=(t,e,n,r={},i,o)=>a=>{const s=RT(r,t)||{},u=s.delay||r.delay||0;let{elapsed:l=0}=r;l=l-ua(u);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...s,delay:-l,onUpdate:h=>{e.set(h),s.onUpdate&&s.onUpdate(h)},onComplete:()=>{a(),s.onComplete&&s.onComplete()},name:t,motionValue:e,element:o?void 0:i};Wte(s)||Object.assign(c,Bte(t,c)),c.duration&&(c.duration=ua(c.duration)),c.repeatDelay&&(c.repeatDelay=ua(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let f=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(TE(c),c.delay===0&&(f=!0)),(ts.instantAnimations||ts.skipAnimations)&&(f=!0,TE(c),c.delay=0),c.allowFlatten=!s.type&&!s.ease,f&&!o&&e.get()!==void 0){const h=Vte(c.keyframes,s);if(h!==void 0){Wt.update(()=>{c.onUpdate(h),c.onComplete()});return}}return s.isSync?new OT(c):new Ite(c)};function aD(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function DT(t,e,n,r){if(typeof e=="function"){const[i,o]=aD(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=aD(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function ff(t,e,n){const r=t.getProps();return DT(r,e,n!==void 0?n:r.custom,t)}const Z5=new Set(["width","height","top","left","right","bottom",...Rh]),sD=30,zte=t=>!isNaN(parseFloat(t));class Hte{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=Mr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=zte(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new bT);const r=this.events[e].add(n);return e==="change"?()=>{r(),Wt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>sD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,sD);return x5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kf(t,e){return new Hte(t,e)}const PE=t=>Array.isArray(t);function Gte(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Kf(n))}function qte(t){return PE(t)?t[t.length-1]||0:t}function Kte(t,e){const n=ff(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const s=qte(o[a]);Gte(t,a,s)}}const Cr=t=>!!(t&&t.getVelocity);function Xte(t){return!!(Cr(t)&&t.add)}function OE(t,e){const n=t.getValue("willChange");if(Xte(n))return n.add(e);if(!n&&ts.WillChange){const r=new ts.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function NT(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const Yte="framerAppearId",eV="data-"+NT(Yte);function tV(t){return t.props[eV]}function Jte({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function nV(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...s}=e;const u=o==null?void 0:o.reduceMotion;r&&(o=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const f in s){const h=t.getValue(f,t.latestValues[f]??null),d=s[f];if(d===void 0||c&&Jte(c,f))continue;const p={delay:n,...RT(o||{},f)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(d)&&d===v&&!p.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const b=tV(t);if(b){const _=window.MotionHandoffAnimation(b,f,Wt);_!==null&&(p.startTime=_,m=!0)}}OE(t,f);const g=u??t.shouldReduceMotion;h.start(IT(f,h,d,g&&Z5.has(f)?{type:!1}:p,t,m));const y=h.animation;y&&l.push(y)}return a&&Promise.all(l).then(()=>{Wt.update(()=>{a&&Kte(t,a)})}),l}function kE(t,e,n={}){var u;const r=ff(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(nV(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:f,staggerDirection:h}=i;return Qte(t,e,l,c,f,h,n)}:()=>Promise.resolve(),{when:s}=i;if(s){const[l,c]=s==="beforeChildren"?[o,a]:[a,o];return l().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function Qte(t,e,n=0,r=0,i=0,o=1,a){const s=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),s.push(kE(u,e,{...a,delay:n+(typeof r=="function"?0:r)+J5(t.variantChildren,u,r,i,o)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(s)}function Zte(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>kE(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=kE(t,e,n);else{const i=typeof e=="function"?ff(t,e,n.custom):e;r=Promise.all(nV(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const ene={test:t=>t==="auto",parse:t=>t},rV=t=>e=>e.test(t),iV=[kh,Se,la,Rs,Aee,Cee,ene],uD=t=>iV.find(rV(t));function tne(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||w5(t):!0}const nne=new Set(["brightness","contrast","saturate","opacity"]);function rne(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ST)||[];if(!r)return t;const i=n.replace(r,"");let o=nne.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const ine=/\b([a-z-]*)\(.*?\)/gu,RE={...wu,getAnimatableNone:t=>{const e=t.match(ine);return e?e.map(rne).join(" "):t}},lD={...kh,transform:Math.round},one={rotate:Rs,rotateX:Rs,rotateY:Rs,rotateZ:Rs,scale:ig,scaleX:ig,scaleY:ig,scaleZ:ig,skew:Rs,skewX:Rs,skewY:Rs,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:Bp,originX:XI,originY:XI,originZ:Se},MT={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,top:Se,right:Se,bottom:Se,left:Se,inset:Se,insetBlock:Se,insetBlockStart:Se,insetBlockEnd:Se,insetInline:Se,insetInlineStart:Se,insetInlineEnd:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,paddingBlock:Se,paddingBlockStart:Se,paddingBlockEnd:Se,paddingInline:Se,paddingInlineStart:Se,paddingInlineEnd:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,marginBlock:Se,marginBlockStart:Se,marginBlockEnd:Se,marginInline:Se,marginInlineStart:Se,marginInlineEnd:Se,fontSize:Se,backgroundPositionX:Se,backgroundPositionY:Se,...one,zIndex:lD,fillOpacity:Bp,strokeOpacity:Bp,numOctaves:lD},ane={...MT,color:xn,backgroundColor:xn,outlineColor:xn,fill:xn,stroke:xn,borderColor:xn,borderTopColor:xn,borderRightColor:xn,borderBottomColor:xn,borderLeftColor:xn,filter:RE,WebkitFilter:RE},oV=t=>ane[t];function aV(t,e){let n=oV(t);return n!==RE&&(n=wu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const sne=new Set(["auto","none","0"]);function une(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!sne.has(o)&&Up(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=aV(n,i)}class lne extends kT{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),_T(f))){const h=Q5(f,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Z5.has(r)||e.length!==2)return;const[i,o]=e,a=uD(i),s=uD(o),u=KI(i),l=KI(o);if(u!==l&&Xs[r]){this.needsMeasurement=!0;return}if(a!==s)if(rD(a)&&rD(s))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else Xs[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||tne(e[i]))&&r.push(i);r.length&&une(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xs[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var s;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=Xs[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(s=this.removedTransforms)!=null&&s.length&&this.removedTransforms.forEach(([u,l])=>{e.getValue(u).set(l)}),this.resolveNoneKeyframes()}}function cne(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){const i=document.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const sV=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function IE(t){return b5(t)&&"offsetHeight"in t}const{schedule:$T,cancel:Q5e}=I5(queueMicrotask,!1),lo={x:!1,y:!1};function uV(){return lo.x||lo.y}function fne(t){return t==="x"||t==="y"?lo[t]?null:(lo[t]=!0,()=>{lo[t]=!1}):lo.x||lo.y?null:(lo.x=lo.y=!0,()=>{lo.x=lo.y=!1})}function lV(t,e){const n=cne(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function cD(t){return!(t.pointerType==="touch"||uV())}function hne(t,e,n={}){const[r,i,o]=lV(t,n),a=s=>{if(!cD(s))return;const{target:u}=s,l=e(u,s);if(typeof l!="function"||!u)return;const c=f=>{cD(f)&&(l(f),u.removeEventListener("pointerleave",c))};u.addEventListener("pointerleave",c,i)};return r.forEach(s=>{s.addEventListener("pointerenter",a,i)}),o}const cV=(t,e)=>e?t===e?!0:cV(t,e.parentElement):!1,jT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,dne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fV(t){return dne.has(t.tagName)||t.isContentEditable===!0}const sy=new WeakSet;function fD(t){return e=>{e.key==="Enter"&&t(e)}}function N1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const pne=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=fD(()=>{if(sy.has(n))return;N1(n,"down");const i=fD(()=>{N1(n,"up")}),o=()=>N1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function hD(t){return jT(t)&&!uV()}function vne(t,e,n={}){const[r,i,o]=lV(t,n),a=s=>{const u=s.currentTarget;if(!hD(s))return;sy.add(u);const l=e(u,s),c=(d,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),sy.has(u)&&sy.delete(u),hD(d)&&typeof l=="function"&&l(d,{success:p})},f=d=>{c(d,u===window||u===document||n.useGlobalTarget||cV(u,d.target))},h=d=>{c(d,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(s=>{(n.useGlobalTarget?window:s).addEventListener("pointerdown",a,i),IE(s)&&(s.addEventListener("focus",l=>pne(l,i)),!fV(s)&&!s.hasAttribute("tabindex")&&(s.tabIndex=0))}),o}function hV(t){return b5(t)&&"ownerSVGElement"in t}function mne(t){return hV(t)&&t.tagName==="svg"}const gne=[...iV,xn,wu],yne=t=>gne.find(rV(t)),dD=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gc=()=>({x:dD(),y:dD()}),pD=()=>({min:0,max:0}),Rn=()=>({x:pD(),y:pD()}),DE={current:null},dV={current:!1},bne=typeof window<"u";function wne(){if(dV.current=!0,!!bne)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>DE.current=t.matches;t.addEventListener("change",e),e()}else DE.current=!1}const xne=new WeakMap;function cw(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Vp(t){return typeof t=="string"||Array.isArray(t)}const LT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],FT=["initial",...LT];function fw(t){return cw(t.animate)||FT.some(e=>Vp(t[e]))}function pV(t){return!!(fw(t)||t.variants)}function _ne(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Cr(i))t.addValue(r,i);else if(Cr(o))t.addValue(r,Kf(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Kf(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const vD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Yy={};function vV(t){Yy=t}function Sne(){return Yy}class Ene{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Mr.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Wt.render(this.render,!1,!0))};const{latestValues:u,renderState:l}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=s,this.blockInitialAnimation=!!o,this.isControllingVariants=fw(n),this.isVariantNode=pV(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const d=f[h];u[h]!==void 0&&Cr(d)&&d.set(u[h])}}mount(e){var n;this.current=e,xne.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(dV.current||wne(),this.shouldReduceMotion=DE.current),(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),bu(this.notifyUpdate),bu(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ih.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Wt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Yy){const n=Yy[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vD.length;r++){const i=vD[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=_ne(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Kf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(y5(r)||w5(r))?r=parseFloat(r):!yne(r)&&wu.test(n)&&(r=aV(e,n)),this.setBaseTarget(e,Cr(r)?r.get():r)),Cr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=DT(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Cr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new bT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){$T.render(this.render)}}class mV extends Ene{constructor(){super(...arguments),this.KeyframeResolver=lne}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Cr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Pu{constructor(e){this.isMounted=!1,this.node=e}update(){}}function gV({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Cne({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ane(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function M1(t){return t===void 0||t===1}function NE({scale:t,scaleX:e,scaleY:n}){return!M1(t)||!M1(e)||!M1(n)}function Ju(t){return NE(t)||yV(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function yV(t){return mD(t.x)||mD(t.y)}function mD(t){return t&&t!=="0%"}function Jy(t,e,n){const r=t-n,i=e*r;return n+i}function gD(t,e,n,r,i){return i!==void 0&&(t=Jy(t,i,r)),Jy(t,n,r)+e}function ME(t,e=0,n=1,r,i){t.min=gD(t.min,e,n,r,i),t.max=gD(t.max,e,n,r,i)}function bV(t,{x:e,y:n}){ME(t.x,e.translate,e.scale,e.originPoint),ME(t.y,n.translate,n.scale,n.originPoint)}const yD=.999999999999,bD=1.0000000000001;function Tne(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let s=0;s<i;s++){o=n[s],a=o.projectionDelta;const{visualElement:u}=o.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Kc(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,bV(t,a)),r&&Ju(o.latestValues)&&Kc(t,o.latestValues))}e.x<bD&&e.x>yD&&(e.x=1),e.y<bD&&e.y>yD&&(e.y=1)}function qc(t,e){t.min=t.min+e,t.max=t.max+e}function wD(t,e,n,r,i=.5){const o=Zt(t.min,t.max,i);ME(t,e,n,o,r)}function Kc(t,e){wD(t.x,e.x,e.scaleX,e.scale,e.originX),wD(t.y,e.y,e.scaleY,e.scale,e.originY)}function wV(t,e){return gV(Ane(t.getBoundingClientRect(),e))}function Pne(t,e,n){const r=wV(t,n),{scroll:i}=e;return i&&(qc(r.x,i.offset.x),qc(r.y,i.offset.y)),r}const One={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kne=Rh.length;function Rne(t,e,n){let r="",i=!0;for(let o=0;o<kne;o++){const a=Rh[o],s=t[a];if(s===void 0)continue;let u=!0;if(typeof s=="number")u=s===(a.startsWith("scale")?1:0);else{const l=parseFloat(s);u=a.startsWith("scale")?l===1:l===0}if(!u||n){const l=sV(s,MT[a]);if(!u){i=!1;const c=One[a]||a;r+=`${c}(${l}) `}n&&(e[a]=l)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function BT(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,s=!1;for(const u in e){const l=e[u];if(Ih.has(u)){a=!0;continue}else if(N5(u)){i[u]=l;continue}else{const c=sV(l,MT[u]);u.startsWith("origin")?(s=!0,o[u]=c):r[u]=c}}if(e.transform||(a||n?r.transform=Rne(e,t.transform,n):r.transform&&(r.transform="none")),s){const{originX:u="50%",originY:l="50%",originZ:c=0}=o;r.transformOrigin=`${u} ${l} ${c}`}}function xV(t,{style:e,vars:n},r,i){const o=t.style;let a;for(a in e)o[a]=e[a];i==null||i.applyProjectionStyles(o,r);for(a in n)o.setProperty(a,n[a])}function xD(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const gd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Se.test(t))t=parseFloat(t);else return t;const n=xD(t,e.target.x),r=xD(t,e.target.y);return`${n}% ${r}%`}},Ine={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=wu.parse(t);if(i.length>5)return r;const o=wu.createTransformer(t),a=typeof i[0]!="number"?1:0,s=n.x.scale*e.x,u=n.y.scale*e.y;i[0+a]/=s,i[1+a]/=u;const l=Zt(s,u,.5);return typeof i[2+a]=="number"&&(i[2+a]/=l),typeof i[3+a]=="number"&&(i[3+a]/=l),o(i)}},$E={borderRadius:{...gd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gd,borderTopRightRadius:gd,borderBottomLeftRadius:gd,borderBottomRightRadius:gd,boxShadow:Ine};function _V(t,{layout:e,layoutId:n}){return Ih.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!$E[t]||t==="opacity")}function UT(t,e,n){var a;const r=t.style,i=e==null?void 0:e.style,o={};if(!r)return o;for(const s in r)(Cr(r[s])||i&&Cr(i[s])||_V(s,t)||((a=n==null?void 0:n.getValue(s))==null?void 0:a.liveStyle)!==void 0)&&(o[s]=r[s]);return o}function Dne(t){return window.getComputedStyle(t)}class Nne extends mV{constructor(){super(...arguments),this.type="html",this.renderInstance=xV}readValueFromInstance(e,n){var r;if(Ih.has(n))return(r=this.projection)!=null&&r.isProjecting?_E(n):lte(e,n);{const i=Dne(e),o=(N5(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wV(e,n)}build(e,n,r){BT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return UT(e,n,r)}}const Mne={offset:"stroke-dashoffset",array:"stroke-dasharray"},$ne={offset:"strokeDashoffset",array:"strokeDasharray"};function jne(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?Mne:$ne;t[o.offset]=`${-r}`,t[o.array]=`${e} ${n}`}const Lne=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function SV(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:a=0,...s},u,l,c){if(BT(t,s,l),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h}=t;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete f.transformBox);for(const d of Lne)f[d]!==void 0&&(h[d]=f[d],delete f[d]);e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&jne(f,i,o,a,!1)}const EV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),CV=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Fne(t,e,n,r){xV(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(EV.has(i)?i:NT(i),e.attrs[i])}function AV(t,e,n){const r=UT(t,e,n);for(const i in t)if(Cr(t[i])||Cr(e[i])){const o=Rh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}class Bne extends mV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ih.has(n)){const r=oV(n);return r&&r.default||0}return n=EV.has(n)?n:NT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return AV(e,n,r)}build(e,n,r){SV(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Fne(e,n,r,i)}mount(e){this.isSVGTag=CV(e.tagName),super.mount(e)}}const Une=FT.length;function TV(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?TV(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Une;n++){const r=FT[n],i=t.props[r];(Vp(i)||i===!1)&&(e[r]=i)}return e}function PV(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Vne=[...LT].reverse(),Wne=LT.length;function zne(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Zte(t,n,r)))}function Hne(t){let e=zne(t),n=_D(),r=!0;const i=u=>(l,c)=>{var h;const f=ff(t,c,u==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:d,transitionEnd:p,...v}=f;l={...l,...v,...p}}return l};function o(u){e=u(t)}function a(u){const{props:l}=t,c=TV(t.parent)||{},f=[],h=new Set;let d={},p=1/0;for(let m=0;m<Wne;m++){const g=Vne[m],y=n[g],b=l[g]!==void 0?l[g]:c[g],_=Vp(b),x=g===u?y.isActive:null;x===!1&&(p=m);let S=b===c[g]&&b!==l[g]&&_;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...d},!y.isActive&&x===null||!b&&!y.prevProp||cw(b)||typeof b=="boolean")continue;const E=Gne(y.prevProp,b);let C=E||g===u&&y.isActive&&!S&&_||m>p&&_,A=!1;const T=Array.isArray(b)?b:[b];let P=T.reduce(i(g),{});x===!1&&(P={});const{prevResolvedValues:R={}}=y,I={...R,...P},M=U=>{C=!0,h.has(U)&&(A=!0,h.delete(U)),y.needsAnimating[U]=!0;const $=t.getValue(U);$&&($.liveStyle=!1)};for(const U in I){const $=P[U],L=R[U];if(d.hasOwnProperty(U))continue;let H=!1;PE($)&&PE(L)?H=!PV($,L):H=$!==L,H?$!=null?M(U):h.add(U):$!==void 0&&h.has(U)?M(U):y.protectedKeys[U]=!0}y.prevProp=b,y.prevResolvedValues=P,y.isActive&&(d={...d,...P}),r&&t.blockInitialAnimation&&(C=!1);const B=S&&E;C&&(!B||A)&&f.push(...T.map(U=>{const $={type:g};if(typeof U=="string"&&r&&!B&&t.manuallyAnimateOnMount&&t.parent){const{parent:L}=t,H=ff(L,U);if(L.enteringChildren&&H){const{delayChildren:X}=H.transition||{};$.delay=J5(L.enteringChildren,t,X)}}return{animation:U,options:$}}))}if(h.size){const m={};if(typeof l.initial!="boolean"){const g=ff(t,Array.isArray(l.initial)?l.initial[0]:l.initial);g&&g.transition&&(m.transition=g.transition)}h.forEach(g=>{const y=t.getBaseTarget(g),b=t.getValue(g);b&&(b.liveStyle=!0),m[g]=y??null}),f.push({animation:m})}let v=!!f.length;return r&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function s(u,l){var f;if(n[u].isActive===l)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(h=>{var d;return(d=h.animationState)==null?void 0:d.setActive(u,l)}),n[u].isActive=l;const c=a(u);for(const h in n)n[h].protectedKeys={};return c}return{animateChanges:a,setActive:s,setAnimateFunction:o,getState:()=>n,reset:()=>{n=_D()}}}function Gne(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!PV(e,t):!1}function Vu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _D(){return{animate:Vu(!0),whileInView:Vu(),whileHover:Vu(),whileTap:Vu(),whileDrag:Vu(),whileFocus:Vu(),exit:Vu()}}function SD(t,e){t.min=e.min,t.max=e.max}function ao(t,e){SD(t.x,e.x),SD(t.y,e.y)}function ED(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const OV=1e-4,qne=1-OV,Kne=1+OV,kV=.01,Xne=0-kV,Yne=0+kV;function $r(t){return t.max-t.min}function Jne(t,e,n){return Math.abs(t-e)<=n}function CD(t,e,n,r=.5){t.origin=r,t.originPoint=Zt(e.min,e.max,t.origin),t.scale=$r(n)/$r(e),t.translate=Zt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=qne&&t.scale<=Kne||isNaN(t.scale))&&(t.scale=1),(t.translate>=Xne&&t.translate<=Yne||isNaN(t.translate))&&(t.translate=0)}function Zd(t,e,n,r){CD(t.x,e.x,n.x,r?r.originX:void 0),CD(t.y,e.y,n.y,r?r.originY:void 0)}function AD(t,e,n){t.min=n.min+e.min,t.max=t.min+$r(e)}function Qne(t,e,n){AD(t.x,e.x,n.x),AD(t.y,e.y,n.y)}function TD(t,e,n){t.min=e.min-n.min,t.max=t.min+$r(e)}function Qy(t,e,n){TD(t.x,e.x,n.x),TD(t.y,e.y,n.y)}function PD(t,e,n,r,i){return t-=e,t=Jy(t,1/n,r),i!==void 0&&(t=Jy(t,1/i,r)),t}function Zne(t,e=0,n=1,r=.5,i,o=t,a=t){if(la.test(e)&&(e=parseFloat(e),e=Zt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let s=Zt(o.min,o.max,r);t===o&&(s-=e),t.min=PD(t.min,e,n,s,i),t.max=PD(t.max,e,n,s,i)}function OD(t,e,[n,r,i],o,a){Zne(t,e[n],e[r],e[i],e.scale,o,a)}const ere=["x","scaleX","originX"],tre=["y","scaleY","originY"];function kD(t,e,n,r){OD(t.x,e,ere,n?n.x:void 0,r?r.x:void 0),OD(t.y,e,tre,n?n.y:void 0,r?r.y:void 0)}function RD(t){return t.translate===0&&t.scale===1}function RV(t){return RD(t.x)&&RD(t.y)}function ID(t,e){return t.min===e.min&&t.max===e.max}function nre(t,e){return ID(t.x,e.x)&&ID(t.y,e.y)}function DD(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function IV(t,e){return DD(t.x,e.x)&&DD(t.y,e.y)}function ND(t){return $r(t.x)/$r(t.y)}function MD(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Ni(t){return[t("x"),t("y")]}function rre(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:l,rotate:c,rotateX:f,rotateY:h,skewX:d,skewY:p}=n;l&&(r=`perspective(${l}px) ${r}`),c&&(r+=`rotate(${c}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),d&&(r+=`skewX(${d}deg) `),p&&(r+=`skewY(${p}deg) `)}const s=t.x.scale*e.x,u=t.y.scale*e.y;return(s!==1||u!==1)&&(r+=`scale(${s}, ${u})`),r||"none"}const DV=["TopLeft","TopRight","BottomLeft","BottomRight"],ire=DV.length,$D=t=>typeof t=="string"?parseFloat(t):t,jD=t=>typeof t=="number"||Se.test(t);function ore(t,e,n,r,i,o){i?(t.opacity=Zt(0,n.opacity??1,are(r)),t.opacityExit=Zt(e.opacity??1,0,sre(r))):o&&(t.opacity=Zt(e.opacity??1,n.opacity??1,r));for(let a=0;a<ire;a++){const s=`border${DV[a]}Radius`;let u=LD(e,s),l=LD(n,s);if(u===void 0&&l===void 0)continue;u||(u=0),l||(l=0),u===0||l===0||jD(u)===jD(l)?(t[s]=Math.max(Zt($D(u),$D(l),r),0),(la.test(l)||la.test(u))&&(t[s]+="%")):t[s]=l}(e.rotate||n.rotate)&&(t.rotate=Zt(e.rotate||0,n.rotate||0,r))}function LD(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const are=NV(0,.5,P5),sre=NV(.5,.95,Ki);function NV(t,e,n){return r=>r<t?0:r>e?1:n(Fp(t,e,r))}function ure(t,e,n){const r=Cr(t)?t:Kf(t);return r.start(IT("",r,e,n)),r.animation}function Wp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const lre=(t,e)=>t.depth-e.depth;class cre{constructor(){this.children=[],this.isDirty=!1}add(e){mT(this.children,e),this.isDirty=!0}remove(e){gT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(lre),this.isDirty=!1,this.children.forEach(e)}}function fre(t,e){const n=Mr.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(bu(r),t(o-e))};return Wt.setup(r,!0),()=>bu(r)}function uy(t){return Cr(t)?t.get():t}class hre{constructor(){this.members=[]}add(e){mT(this.members,e),e.scheduleRender()}remove(e){if(gT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,o=e.options.layoutDependency;i!==void 0&&o!==void 0&&i===o||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const ly={hasAnimatedSinceResize:!0,hasEverUpdated:!1},$1=["","X","Y","Z"],dre=1e3;let pre=0;function j1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function MV(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=tV(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Wt,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&MV(r)}function $V({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},s=e==null?void 0:e()){this.id=pre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(gre),this.nodes.forEach(xre),this.nodes.forEach(_re),this.nodes.forEach(yre)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new cre)}addEventListener(a,s){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new bT),this.eventHandlers.get(a).add(s)}notifyListeners(a,...s){const u=this.eventHandlers.get(a);u&&u.notify(...s)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=hV(a)&&!mne(a),this.instance=a;const{layoutId:s,layout:u,visualElement:l}=this.options;if(l&&!l.current&&l.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||s)&&(this.isLayoutDirty=!0),t){let c,f=0;const h=()=>this.root.updateBlockedByResize=!1;Wt.read(()=>{f=window.innerWidth}),t(a,()=>{const d=window.innerWidth;d!==f&&(f=d,this.root.updateBlockedByResize=!0,c&&c(),c=fre(h,250),ly.hasAnimatedSinceResize&&(ly.hasAnimatedSinceResize=!1,this.nodes.forEach(UD)))})}s&&this.root.registerSharedNode(s,this),this.options.animate!==!1&&l&&(s||u)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||l.getDefaultTransition()||Tre,{onLayoutAnimationStart:v,onLayoutAnimationComplete:m}=l.getProps(),g=!this.targetLayout||!IV(this.targetLayout,d),y=!f&&h;if(this.options.layoutRoot||this.resumeFrom||y||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...RT(p,"layout"),onPlay:v,onComplete:m};(l.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(c,y)}else f||UD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Sre),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MV(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const f=this.path[c];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:s,layout:u}=this.options;if(s===void 0&&!u)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(FD);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(BD);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wre),this.nodes.forEach(vre),this.nodes.forEach(mre)):this.nodes.forEach(BD),this.clearAllSnapshots();const s=Mr.now();ir.delta=ma(0,1e3/60,s-ir.timestamp),ir.timestamp=s,ir.isProcessing=!0,P1.update.process(ir),P1.preRender.process(ir),P1.render.process(ir),ir.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$T.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bre),this.sharedNodes.forEach(Ere)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$r(this.snapshot.measuredBox.x)&&!$r(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Rn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let s=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(s=!1),s&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,s=this.projectionDelta&&!RV(this.projectionDelta),u=this.getTransformTemplate(),l=u?u(this.latestValues,""):void 0,c=l!==this.prevTransformTemplateValue;a&&this.instance&&(s||Ju(this.latestValues)||c)&&(i(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const s=this.measurePageBox();let u=this.removeElementScroll(s);return a&&(u=this.removeTransform(u)),Pre(u),{animationId:this.root.animationId,measuredBox:s,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:a}=this.options;if(!a)return Rn();const s=a.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(Ore))){const{scroll:c}=this.root;c&&(qc(s.x,c.offset.x),qc(s.y,c.offset.y))}return s}removeElementScroll(a){var u;const s=Rn();if(ao(s,a),(u=this.scroll)!=null&&u.wasRoot)return s;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:f,options:h}=c;c!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&ao(s,a),qc(s.x,f.offset.x),qc(s.y,f.offset.y))}return s}applyTransform(a,s=!1){const u=Rn();ao(u,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];!s&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Kc(u,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ju(c.latestValues)&&Kc(u,c.latestValues)}return Ju(this.latestValues)&&Kc(u,this.latestValues),u}removeTransform(a){const s=Rn();ao(s,a);for(let u=0;u<this.path.length;u++){const l=this.path[u];if(!l.instance||!Ju(l.latestValues))continue;NE(l.latestValues)&&l.updateSnapshot();const c=Rn(),f=l.measurePageBox();ao(c,f),kD(s,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,c)}return Ju(this.latestValues)&&kD(s,this.latestValues),s}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ir.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var d;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==s;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:f}=this.options;if(!this.layout||!(c||f))return;this.resolvedRelativeTargetAt=ir.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Rn(),this.targetWithTransforms=Rn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qne(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ao(this.target,this.layout.layoutBox),bV(this.target,this.targetDelta)):ao(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||NE(this.parent.latestValues)||yV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,s,u){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),Qy(this.relativeTargetOrigin,s,u),ao(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var p;const a=this.getLead(),s=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(u=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ir.timestamp&&(u=!1),u)return;const{layout:l,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||c))return;ao(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;Tne(this.layoutCorrected,this.treeScale,this.path,s),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Rn());const{target:d}=a;if(!d){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ED(this.prevProjectionDelta.x,this.projectionDelta.x),ED(this.prevProjectionDelta.y,this.projectionDelta.y)),Zd(this.projectionDelta,this.layoutCorrected,d,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!MD(this.projectionDelta.x,this.prevProjectionDelta.x)||!MD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var s;if((s=this.options.visualElement)==null||s.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gc(),this.projectionDelta=Gc(),this.projectionDeltaWithTransform=Gc()}setAnimationOrigin(a,s=!1){const u=this.snapshot,l=u?u.latestValues:{},c={...this.latestValues},f=Gc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const h=Rn(),d=u?u.source:void 0,p=this.layout?this.layout.source:void 0,v=d!==p,m=this.getStack(),g=!m||m.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(Are));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const x=_/1e3;VD(f.x,a.x,x),VD(f.y,a.y,x),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Cre(this.relativeTarget,this.relativeTargetOrigin,h,x),b&&nre(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Rn()),ao(b,this.relativeTarget)),v&&(this.animationValues=c,ore(c,l,this.latestValues,x,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var s,u,l;this.notifyListeners("animationStart"),(s=this.currentAnimation)==null||s.stop(),(l=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||l.stop(),this.pendingAnimation&&(bu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wt.update(()=>{ly.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Kf(0)),this.currentAnimation=ure(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:s,target:u,layout:l,latestValues:c}=a;if(!(!s||!u||!l)){if(this!==a&&this.layout&&l&&jV(this.options.animationType,this.layout.layoutBox,l.layoutBox)){u=this.target||Rn();const f=$r(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+f;const h=$r(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+h}ao(s,u),Kc(s,c),Zd(this.projectionDeltaWithTransform,this.layoutCorrected,s,c)}}registerSharedNode(a,s){this.sharedNodes.has(a)||this.sharedNodes.set(a,new hre),this.sharedNodes.get(a).add(s);const l=s.options.initialPromotionConfig;s.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(s):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var s;const{layoutId:a}=this.options;return a?((s=this.getStack())==null?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:a}=this.options;return a?(s=this.getStack())==null?void 0:s.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:s,preserveFollowOpacity:u}={}){const l=this.getStack();l&&l.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let s=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(s=!0),!s)return;const l={};u.z&&j1("z",a,l,this.animationValues);for(let c=0;c<$1.length;c++)j1(`rotate${$1[c]}`,a,l,this.animationValues),j1(`skew${$1[c]}`,a,l,this.animationValues);a.render();for(const c in l)a.setStaticValue(c,l[c]),this.animationValues&&(this.animationValues[c]=l[c]);a.scheduleRender()}applyProjectionStyles(a,s){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=uy(s==null?void 0:s.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=uy(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Ju(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const c=l.animationValues||l.latestValues;this.applyTransformsToTarget();let f=rre(this.projectionDeltaWithTransform,this.treeScale,c);u&&(f=u(c,f)),a.transform=f;const{x:h,y:d}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${d.origin*100}% 0`,l.animationValues?a.opacity=l===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:a.opacity=l===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in $E){if(c[p]===void 0)continue;const{correct:v,applyTo:m,isCSSVariable:g}=$E[p],y=f==="none"?c[p]:v(c[p],l);if(m){const b=m.length;for(let _=0;_<b;_++)a[m[_]]=y}else g?this.options.visualElement.renderState.vars[p]=y:a[p]=y}this.options.layoutId&&(a.pointerEvents=l===this?uy(s==null?void 0:s.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var s;return(s=a.currentAnimation)==null?void 0:s.stop()}),this.root.nodes.forEach(FD),this.root.sharedNodes.clear()}}}function vre(t){t.updateLayout()}function mre(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=e.source!==t.layout.source;o==="size"?Ni(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],d=$r(h);h.min=r[f].min,h.max=h.min+d}):jV(o,e.layoutBox,r)&&Ni(f=>{const h=a?e.measuredBox[f]:e.layoutBox[f],d=$r(r[f]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+d)});const s=Gc();Zd(s,r,e.layoutBox);const u=Gc();a?Zd(u,t.applyTransform(i,!0),e.measuredBox):Zd(u,r,e.layoutBox);const l=!RV(s);let c=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:d}=f;if(h&&d){const p=Rn();Qy(p,e.layoutBox,h.layoutBox);const v=Rn();Qy(v,r,d.layoutBox),IV(p,v)||(c=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=p,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:s,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function gre(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function yre(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bre(t){t.clearSnapshot()}function FD(t){t.clearMeasurements()}function BD(t){t.isLayoutDirty=!1}function wre(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function UD(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function xre(t){t.resolveTargetDelta()}function _re(t){t.calcProjection()}function Sre(t){t.resetSkewAndRotation()}function Ere(t){t.removeLeadSnapshot()}function VD(t,e,n){t.translate=Zt(e.translate,0,n),t.scale=Zt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function WD(t,e,n,r){t.min=Zt(e.min,n.min,r),t.max=Zt(e.max,n.max,r)}function Cre(t,e,n,r){WD(t.x,e.x,n.x,r),WD(t.y,e.y,n.y,r)}function Are(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Tre={duration:.45,ease:[.4,0,.1,1]},zD=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),HD=zD("applewebkit/")&&!zD("chrome/")?Math.round:Ki;function GD(t){t.min=HD(t.min),t.max=HD(t.max)}function Pre(t){GD(t.x),GD(t.y)}function jV(t,e,n){return t==="position"||t==="preserve-aspect"&&!Jne(ND(e),ND(n),.2)}function Ore(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const kre=$V({attachResizeListener:(t,e)=>Wp(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),L1={current:void 0},LV=$V({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!L1.current){const t=new kre({});t.mount(window),t.setOptions({layoutScroll:!0}),L1.current=t}return L1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),VT=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function qD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Rre(...t){return e=>{let n=!1;const r=t.map(i=>{const o=qD(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():qD(t[i],null)}}}}function Ire(...t){return k.useCallback(Rre(...t),t)}class Dre extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=IE(r)&&r.offsetWidth||0,o=IE(r)&&r.offsetHeight||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left,a.bottom=o-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Nre({children:t,isPresent:e,anchorX:n,anchorY:r,root:i}){var f;const o=k.useId(),a=k.useRef(null),s=k.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=k.useContext(VT),l=((f=t.props)==null?void 0:f.ref)??(t==null?void 0:t.ref),c=Ire(a,l);return k.useInsertionEffect(()=>{const{width:h,height:d,top:p,left:v,right:m,bottom:g}=s.current;if(e||!a.current||!h||!d)return;const y=n==="left"?`left: ${v}`:`right: ${m}`,b=r==="bottom"?`bottom: ${g}`:`top: ${p}`;a.current.dataset.motionPopId=o;const _=document.createElement("style");u&&(_.nonce=u);const x=i??document.head;return x.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${d}px !important;
            ${y}px !important;
            ${b}px !important;
          }
        `),()=>{x.contains(_)&&x.removeChild(_)}},[e]),N.jsx(Dre,{isPresent:e,childRef:a,sizeRef:s,children:k.cloneElement(t,{ref:c})})}const Mre=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:s,anchorY:u,root:l})=>{const c=vT($re),f=k.useId();let h=!0,d=k.useMemo(()=>(h=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:p=>{c.set(p,!0);for(const v of c.values())if(!v)return;r&&r()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,r]);return o&&h&&(d={...d}),k.useMemo(()=>{c.forEach((p,v)=>c.set(v,!1))},[n]),k.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),a==="popLayout"&&(t=N.jsx(Nre,{isPresent:n,anchorX:s,anchorY:u,root:l,children:t})),N.jsx(uw.Provider,{value:d,children:t})};function $re(){return new Map}function FV(t=!0){const e=k.useContext(uw);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=k.useId();k.useEffect(()=>{if(t)return i(o)},[t]);const a=k.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,a]:[!0]}const og=t=>t.key||"";function KD(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const tm=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:s="left",anchorY:u="top",root:l})=>{const[c,f]=FV(a),h=k.useMemo(()=>KD(t),[t]),d=a&&!c?[]:h.map(og),p=k.useRef(!0),v=k.useRef(h),m=vT(()=>new Map),g=k.useRef(new Set),[y,b]=k.useState(h),[_,x]=k.useState(h);g5(()=>{p.current=!1,v.current=h;for(let C=0;C<_.length;C++){const A=og(_[C]);d.includes(A)?(m.delete(A),g.current.delete(A)):m.get(A)!==!0&&m.set(A,!1)}},[_,d.length,d.join("-")]);const S=[];if(h!==y){let C=[...h];for(let A=0;A<_.length;A++){const T=_[A],P=og(T);d.includes(P)||(C.splice(A,0,T),S.push(T))}return o==="wait"&&S.length&&(C=S),x(KD(C)),b(h),null}const{forceRender:E}=k.useContext(pT);return N.jsx(N.Fragment,{children:_.map(C=>{const A=og(C),T=a&&!c?!1:h===_||d.includes(A),P=()=>{if(g.current.has(A))return;if(g.current.add(A),m.has(A))m.set(A,!0);else return;let R=!0;m.forEach(I=>{I||(R=!1)}),R&&(E==null||E(),x(v.current),a&&(f==null||f()),r&&r())};return N.jsx(Mre,{isPresent:T,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:l,onExitComplete:T?void 0:P,anchorX:s,anchorY:u,children:C},A)})})},BV=k.createContext({strict:!1}),XD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let YD=!1;function jre(){if(YD)return;const t={};for(const e in XD)t[e]={isEnabled:n=>XD[e].some(r=>!!n[r])};vV(t),YD=!0}function UV(){return jre(),Sne()}function Lre(t){const e=UV();for(const n in t)e[n]={...e[n],...t[n]};vV(e)}const Fre=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zy(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Fre.has(t)}let VV=t=>!Zy(t);function Bre(t){typeof t=="function"&&(VV=e=>e.startsWith("on")?!Zy(e):t(e))}try{Bre(require("@emotion/is-prop-valid").default)}catch{}function Ure(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(VV(i)||n===!0&&Zy(i)||!e&&!Zy(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const hw=k.createContext({});function Vre(t,e){if(fw(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Vp(n)?n:void 0,animate:Vp(r)?r:void 0}}return t.inherit!==!1?e:{}}function Wre(t){const{initial:e,animate:n}=Vre(t,k.useContext(hw));return k.useMemo(()=>({initial:e,animate:n}),[JD(e),JD(n)])}function JD(t){return Array.isArray(t)?t.join(" "):t}const WT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function WV(t,e,n){for(const r in e)!Cr(e[r])&&!_V(r,n)&&(t[r]=e[r])}function zre({transformTemplate:t},e){return k.useMemo(()=>{const n=WT();return BT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Hre(t,e){const n=t.style||{},r={};return WV(r,n,t),Object.assign(r,zre(t,e)),r}function Gre(t,e){const n={},r=Hre(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const zV=()=>({...WT(),attrs:{}});function qre(t,e,n,r){const i=k.useMemo(()=>{const o=zV();return SV(o,e,CV(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};WV(o,t.style,t),i.style={...o,...i.style}}return i}const Kre=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function zT(t){return typeof t!="string"||t.includes("-")?!1:!!(Kre.indexOf(t)>-1||/[A-Z]/u.test(t))}function Xre(t,e,n,{latestValues:r},i,o=!1,a){const u=(a??zT(t)?qre:Gre)(e,r,i,t),l=Ure(e,typeof t=="string",o),c=t!==k.Fragment?{...l,...u,ref:n}:{},{children:f}=e,h=k.useMemo(()=>Cr(f)?f.get():f,[f]);return k.createElement(t,{...c,children:h})}function Yre({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Jre(n,r,i,t),renderState:e()}}function Jre(t,e,n,r){const i={},o=r(t,{});for(const h in o)i[h]=uy(o[h]);let{initial:a,animate:s}=t;const u=fw(t),l=pV(t);e&&l&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),s===void 0&&(s=e.animate));let c=n?n.initial===!1:!1;c=c||a===!1;const f=c?s:a;if(f&&typeof f!="boolean"&&!cw(f)){const h=Array.isArray(f)?f:[f];for(let d=0;d<h.length;d++){const p=DT(t,h[d]);if(p){const{transitionEnd:v,transition:m,...g}=p;for(const y in g){let b=g[y];if(Array.isArray(b)){const _=c?b.length-1:0;b=b[_]}b!==null&&(i[y]=b)}for(const y in v)i[y]=v[y]}}}return i}const HV=t=>(e,n)=>{const r=k.useContext(hw),i=k.useContext(uw),o=()=>Yre(t,e,r,i);return n?o():vT(o)},Qre=HV({scrapeMotionValuesFromProps:UT,createRenderState:WT}),Zre=HV({scrapeMotionValuesFromProps:AV,createRenderState:zV}),eie=Symbol.for("motionComponentSymbol");function tie(t,e,n){const r=k.useRef(n);k.useInsertionEffect(()=>{r.current=n});const i=k.useRef(null);return k.useCallback(o=>{var s;o&&((s=t.onMount)==null||s.call(t,o)),e&&(o?e.mount(o):e.unmount());const a=r.current;if(typeof a=="function")if(o){const u=a(o);typeof u=="function"&&(i.current=u)}else i.current?(i.current(),i.current=null):a(o);else a&&(a.current=o)},[e])}const GV=k.createContext({});function Ld(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nie(t,e,n,r,i,o){var g,y;const{visualElement:a}=k.useContext(hw),s=k.useContext(BV),u=k.useContext(uw),l=k.useContext(VT).reducedMotion,c=k.useRef(null),f=k.useRef(!1);r=r||s.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:l,isSVG:o}),f.current&&c.current&&(c.current.manuallyAnimateOnMount=!0));const h=c.current,d=k.useContext(GV);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&rie(c.current,n,i,d);const p=k.useRef(!1);k.useInsertionEffect(()=>{h&&p.current&&h.update(n,u)});const v=n[eV],m=k.useRef(!!v&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,v))&&((y=window.MotionHasOptimisedAnimation)==null?void 0:y.call(window,v)));return g5(()=>{f.current=!0,h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),m.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,v)}),m.current=!1),h.enteringChildren=void 0)}),h}function rie(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:s,layoutScroll:u,layoutRoot:l,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:qV(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||s&&Ld(s),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:u,layoutRoot:l})}function qV(t){if(t)return t.options.allowProjection!==!1?t.projection:qV(t.parent)}function F1(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&Lre(r);const o=n?n==="svg":zT(t),a=o?Zre:Qre;function s(l,c){let f;const h={...k.useContext(VT),...l,layoutId:iie(l)},{isStatic:d}=h,p=Wre(l),v=a(l,d);if(!d&&m5){oie();const m=aie(h);f=m.MeasureLayout,p.visualElement=nie(t,v,h,i,m.ProjectionNode,o)}return N.jsxs(hw.Provider,{value:p,children:[f&&p.visualElement?N.jsx(f,{visualElement:p.visualElement,...h}):null,Xre(t,l,tie(v,p.visualElement,c),v,d,e,o)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=k.forwardRef(s);return u[eie]=t,u}function iie({layoutId:t}){const e=k.useContext(pT).id;return e&&t!==void 0?e+"-"+t:t}function oie(t,e){k.useContext(BV).strict}function aie(t){const e=UV(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n!=null&&n.isEnabled(t)||r!=null&&r.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function sie(t,e){if(typeof Proxy>"u")return F1;const n=new Map,r=(o,a)=>F1(o,a,t,e),i=(o,a)=>r(o,a);return new Proxy(i,{get:(o,a)=>a==="create"?r:(n.has(a)||n.set(a,F1(a,void 0,t,e)),n.get(a))})}const uie=(t,e)=>e.isSVG??zT(t)?new Bne(e):new Nne(e,{allowProjection:t!==k.Fragment});class lie extends Pu{constructor(e){super(e),e.animationState||(e.animationState=Hne(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();cw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let cie=0;class fie extends Pu{constructor(){super(...arguments),this.id=cie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const hie={animation:{Feature:lie},exit:{Feature:fie}};function nm(t){return{point:{x:t.pageX,y:t.pageY}}}const die=t=>e=>jT(e)&&t(e,nm(e));function ep(t,e,n,r){return Wp(t,e,die(n),r)}const KV=({current:t})=>t?t.ownerDocument.defaultView:null,QD=(t,e)=>Math.abs(t-e);function pie(t,e){const n=QD(t.x,e.x),r=QD(t.y,e.y);return Math.sqrt(n**2+r**2)}const ZD=new Set(["auto","scroll"]);class XV{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3,element:s}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=d=>{this.handleScroll(d.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=U1(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,v=pie(d.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!v)return;const{point:m}=d,{timestamp:g}=ir;this.history.push({...m,timestamp:g});const{onStart:y,onMove:b}=this.handlers;p||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=B1(p,this.transformPagePoint),Wt.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:v,onSessionEnd:m,resumeAnimation:g}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=U1(d.type==="pointercancel"?this.lastMoveEventInfo:B1(p,this.transformPagePoint),this.history);this.startEvent&&v&&v(d,y),m&&m(d,y)},!jT(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const u=nm(e),l=B1(u,this.transformPagePoint),{point:c}=l,{timestamp:f}=ir;this.history=[{...c,timestamp:f}];const{onSessionStart:h}=n;h&&h(e,U1(l,this.history)),this.removeListeners=Qv(ep(this.contextWindow,"pointermove",this.handlePointerMove),ep(this.contextWindow,"pointerup",this.handlePointerUp),ep(this.contextWindow,"pointercancel",this.handlePointerUp)),s&&this.startScrollTracking(s)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(ZD.has(r.overflowX)||ZD.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:i.x-n.x,y:i.y-n.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,i),Wt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),bu(this.updatePoint)}}function B1(t,e){return e?{point:e(t.point)}:t}function eN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function U1({point:t},e){return{point:t,delta:eN(t,YV(e)),offset:eN(t,vie(e)),velocity:mie(e,.1)}}function vie(t){return t[0]}function YV(t){return t[t.length-1]}function mie(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=YV(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ua(e)));)n--;if(!r)return{x:0,y:0};const o=zi(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function gie(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Zt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Zt(n,t,r.max):Math.min(t,n)),t}function tN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function yie(t,{top:e,left:n,bottom:r,right:i}){return{x:tN(t.x,n,i),y:tN(t.y,e,r)}}function nN(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function bie(t,e){return{x:nN(t.x,e.x),y:nN(t.y,e.y)}}function wie(t,e){let n=.5;const r=$r(t),i=$r(e);return i>r?n=Fp(e.min,e.max-r,t.min):r>i&&(n=Fp(t.min,t.max-i,e.min)),ma(0,1,n)}function xie(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const jE=.35;function _ie(t=jE){return t===!1?t=0:t===!0&&(t=jE),{x:rN(t,"left","right"),y:rN(t,"top","bottom")}}function rN(t,e,n){return{min:iN(t,e),max:iN(t,n)}}function iN(t,e){return typeof t=="number"?t:t[e]||0}const Sie=new WeakMap;class Eie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=f=>{n?(this.stopAnimation(),this.snapToCursor(nm(f).point)):this.pauseAnimation()},a=(f,h)=>{this.stopAnimation();const{drag:d,dragPropagation:p,onDragStart:v}=this.getProps();if(d&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=fne(d),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ni(g=>{let y=this.getAxisMotionValue(g).get()||0;if(la.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const _=b.layout.layoutBox[g];_&&(y=$r(_)*(parseFloat(y)/100))}}this.originPoint[g]=y}),v&&Wt.postRender(()=>v(f,h)),OE(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},s=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:d,dragDirectionLock:p,onDirectionLock:v,onDrag:m}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:g}=h;if(p&&this.currentDirection===null){this.currentDirection=Cie(g),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),m&&m(f,h)},u=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>Ni(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new XV(e,{onSessionStart:o,onStart:a,onMove:s,onSessionEnd:u,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:KV(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:s}=this.getProps();s&&Wt.postRender(()=>s(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ag(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=gie(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Ld(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=yie(r.layoutBox,e):this.constraints=!1,this.elastic=_ie(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ni(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=xie(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ld(e))return!1;const r=e.current;qf(r!==null,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=Pne(r,i.root,this.visualElement.getTransformPagePoint());let a=bie(i.layout.layoutBox,o);if(n){const s=n(Cne(a));this.hasMutatedConstraints=!!s,s&&(a=gV(s))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:s}=this.getProps(),u=this.constraints||{},l=Ni(c=>{if(!ag(c,n,this.currentDirection))return;let f=u&&u[c]||{};a&&(f={min:0,max:0});const h=i?200:1e6,d=i?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(c,p)});return Promise.all(l).then(s)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return OE(this.visualElement,e),r.start(IT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ni(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ni(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ni(n=>{const{drag:r}=this.getProps();if(!ag(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:s}=i.layout.layoutBox[n],u=o.get()||0;o.set(e[n]-Zt(a,s,.5)+u)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ld(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ni(a=>{const s=this.getAxisMotionValue(a);if(s&&this.constraints!==!1){const u=s.get();i[a]=wie({min:u,max:u},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ni(a=>{if(!ag(a,e,null))return;const s=this.getAxisMotionValue(a),{min:u,max:l}=this.constraints[a];s.set(Zt(u,l,i[a]))})}addListeners(){if(!this.visualElement.current)return;Sie.set(this.visualElement,this);const e=this.visualElement.current,n=ep(e,"pointerdown",u=>{const{drag:l,dragListener:c=!0}=this.getProps(),f=u.target,h=f!==e&&fV(f);l&&c&&!h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ld(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Wt.read(r);const a=Wp(window,"resize",()=>this.scalePositionWithinConstraints()),s=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:l})=>{this.isDragging&&l&&(Ni(c=>{const f=this.getAxisMotionValue(c);f&&(this.originPoint[c]+=u[c].translate,f.set(f.get()+u[c].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=jE,dragMomentum:s=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:s}}}function ag(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Cie(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Aie extends Pu{constructor(e){super(e),this.removeGroupControls=Ki,this.removeListeners=Ki,this.controls=new Eie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ki}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const oN=t=>(e,n)=>{t&&Wt.postRender(()=>t(e,n))};class Tie extends Pu{constructor(){super(...arguments),this.removePointerDownListener=Ki}onPointerDown(e){this.session=new XV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:KV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:oN(e),onStart:oN(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&Wt.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=ep(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let V1=!1;class Pie extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),V1&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),ly.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,e.layoutDependency!==n&&a.setOptions({...a.options,layoutDependency:n}),V1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Wt.postRender(()=>{const s=a.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),$T.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;V1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function JV(t){const[e,n]=FV(),r=k.useContext(pT);return N.jsx(Pie,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(GV),isPresent:e,safeToRemove:n})}const Oie={pan:{Feature:Tie},drag:{Feature:Aie,ProjectionNode:LV,MeasureLayout:JV}};function aN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Wt.postRender(()=>o(e,nm(e)))}class kie extends Pu{mount(){const{current:e}=this.node;e&&(this.unmount=hne(e,(n,r)=>(aN(this.node,r,"Start"),i=>aN(this.node,i,"End"))))}unmount(){}}class Rie extends Pu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qv(Wp(this.node.current,"focus",()=>this.onFocus()),Wp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sN(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Wt.postRender(()=>o(e,nm(e)))}class Iie extends Pu{mount(){const{current:e}=this.node;e&&(this.unmount=vne(e,(n,r)=>(sN(this.node,r,"Start"),(i,{success:o})=>sN(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const LE=new WeakMap,W1=new WeakMap,Die=t=>{const e=LE.get(t.target);e&&e(t)},Nie=t=>{t.forEach(Die)};function Mie({root:t,...e}){const n=t||document;W1.has(n)||W1.set(n,{});const r=W1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Nie,{root:t,...e})),r[i]}function $ie(t,e,n){const r=Mie(e);return LE.set(t,n),r.observe(t),()=>{LE.delete(t),r.unobserve(t)}}const jie={some:0,all:1};class Lie extends Pu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:jie[i]},s=u=>{const{isIntersecting:l}=u;if(this.isInView===l||(this.isInView=l,o&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:c,onViewportLeave:f}=this.node.getProps(),h=l?c:f;h&&h(u)};return $ie(this.node.current,a,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Fie(e,n))&&this.startObserver()}unmount(){}}function Fie({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Bie={inView:{Feature:Lie},tap:{Feature:Iie},focus:{Feature:Rie},hover:{Feature:kie}},Uie={layout:{ProjectionNode:LV,MeasureLayout:JV}},Vie={...hie,...Bie,...Oie,...Uie},it=sie(Vie,uie);function dw(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Wie(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(f){a(f)}}function u(c){try{l(r.throw(c))}catch(f){a(f)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,e||[])).next())})}const zie=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class HT extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Hie extends HT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class uN extends HT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lN extends HT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FE;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(FE||(FE={}));class Gie{constructor(e,{headers:n={},customFetch:r,region:i=FE.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=zie(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Wie(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:s,method:u,body:l,signal:c,timeout:f}=r;let h={},{region:d}=r;d||(d=this.region);const p=new URL(`${this.url}/${n}`);d&&d!=="any"&&(h["x-region"]=d,p.searchParams.set("forceFunctionRegion",d));let v;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(h["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(h["Content-Type"]="application/json",v=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?v=JSON.stringify(l):v=l;let m=c;f&&(a=new AbortController,o=setTimeout(()=>a.abort(),f),c?(m=a.signal,c.addEventListener("abort",()=>a.abort())):m=a.signal);const g=yield this.fetch(p.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v,signal:m}).catch(x=>{throw new Hie(x)}),y=g.headers.get("x-relay-error");if(y&&y==="true")throw new uN(g);if(!g.ok)throw new lN(g);let b=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return b==="application/json"?_=yield g.json():b==="application/octet-stream"||b==="application/pdf"?_=yield g.blob():b==="text/event-stream"?_=g:b==="multipart/form-data"?_=yield g.formData():_=yield g.text(),{data:_,error:null,response:g}}catch(s){return{data:null,error:s,response:s instanceof lN||s instanceof uN?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var qie=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},Kie=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,u=null,l=o.status,c=o.statusText;if(o.ok){var f,h;if(n.method!=="HEAD"){var d;const g=await o.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((d=n.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?s=g:s=JSON.parse(g))}const v=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),m=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&m&&m.length>1&&(u=parseInt(m[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,u=null,l=406,c="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var p;const v=await o.text();try{a=JSON.parse(v),Array.isArray(a)&&o.status===404&&(s=[],a=null,l=200,c="OK")}catch{o.status===404&&v===""?(l=204,c="No Content"):a={message:v}}if(a&&n.isMaybeSingle&&(!(a==null||(p=a.details)===null||p===void 0)&&p.includes("0 rows"))&&(a=null,l=200,c="OK"),a&&n.shouldThrowOnError)throw new qie(a)}return{error:a,data:s,count:u,status:l,statusText:c}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let s="";const u=o==null?void 0:o.cause;if(u){var l,c,f,h;const p=(l=u==null?void 0:u.message)!==null&&l!==void 0?l:"",v=(c=u==null?void 0:u.code)!==null&&c!==void 0?c:"";s=`${(f=o==null?void 0:o.name)!==null&&f!==void 0?f:"FetchError"}: ${o==null?void 0:o.message}`,s+=`

Caused by: ${(h=u==null?void 0:u.name)!==null&&h!==void 0?h:"Error"}: ${p}`,v&&(s+=` (${v})`),u!=null&&u.stack&&(s+=`
${u.stack}`)}else{var d;s=(d=o==null?void 0:o.stack)!==null&&d!==void 0?d:""}return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},Xie=class extends Kie{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const s=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const cN=new RegExp("[,()]");var Cc=class extends Xie{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&cN.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&cN.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},Yie=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join(""),{url:s,headers:u}=this.cloneRequestState();return s.searchParams.set("select",a),r&&u.append("Prefer",`count=${r}`),new Cc({method:i,url:s,headers:u,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),n||a.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((u,l)=>u.concat(Object.keys(l)),[]);if(s.length>0){const u=[...new Set(s)].map(l=>`"${l}"`);o.searchParams.set("columns",u.join(","))}}return new Cc({method:i,url:o,headers:a,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST",{url:s,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&s.searchParams.set("on_conflict",e),r&&u.append("Prefer",`count=${r}`),i||u.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((c,f)=>c.concat(Object.keys(f)),[]);if(l.length>0){const c=[...new Set(l)].map(f=>`"${f}"`);s.searchParams.set("columns",c.join(","))}}return new Cc({method:a,url:s,headers:u,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Cc({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new Cc({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Jie=class QV{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Yie(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new QV(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var a;let s;const u=new URL(`${this.url}/rpc/${e}`);let l;const c=d=>d!==null&&typeof d=="object"&&(!Array.isArray(d)||d.some(c)),f=r&&Object.values(n).some(c);f?(s="POST",l=n):r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{u.searchParams.append(d,p)})):(s="POST",l=n);const h=new Headers(this.headers);return f?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new Cc({method:s,url:u,headers:h,schema:this.schemaName,body:l,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class Qie{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Zie="2.93.3",eoe=`realtime-js/${Zie}`,toe="1.0.0",ZV="2.0.0",fN=ZV,BE=1e4,noe=1e3,roe=100;var Ns;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ns||(Ns={}));var On;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(On||(On={}));var go;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(go||(go={}));var UE;(function(t){t.websocket="websocket"})(UE||(UE={}));var il;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(il||(il={}));class ioe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",u=(o=e.join_ref)!==null&&o!==void 0?o:"",l=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(c).length===0?"":JSON.stringify(c);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+s.length+a.length+l.length+f.length,d=new ArrayBuffer(this.HEADER_LENGTH+h);let p=new DataView(d),v=0;p.setUint8(v++,this.KINDS.userBroadcastPush),p.setUint8(v++,u.length),p.setUint8(v++,s.length),p.setUint8(v++,a.length),p.setUint8(v++,l.length),p.setUint8(v++,f.length),p.setUint8(v++,n),Array.from(u,g=>p.setUint8(v++,g.charCodeAt(0))),Array.from(s,g=>p.setUint8(v++,g.charCodeAt(0))),Array.from(a,g=>p.setUint8(v++,g.charCodeAt(0))),Array.from(l,g=>p.setUint8(v++,g.charCodeAt(0))),Array.from(f,g=>p.setUint8(v++,g.charCodeAt(0)));var m=new Uint8Array(d.byteLength+r.byteLength);return m.set(new Uint8Array(d),0),m.set(new Uint8Array(r),d.byteLength),m.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,a,s,u]=r;return n({join_ref:i,ref:o,topic:a,event:s,payload:u})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),s=n.getUint8(4);let u=this.HEADER_LENGTH+4;const l=r.decode(e.slice(u,u+i));u=u+i;const c=r.decode(e.slice(u,u+o));u=u+o;const f=r.decode(e.slice(u,u+a));u=u+a;const h=e.slice(u,e.byteLength),d=s===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:c,payload:d};return a>0&&(p.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class eW{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ot||(Ot={}));const hN=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=ooe(a,t,e,i),o),{}):{}},ooe=(t,e,n,r)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=n[t];return o&&!r.includes(o)?tW(o,a):VE(a)},tW=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return loe(e,n)}switch(t){case Ot.bool:return aoe(e);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return soe(e);case Ot.json:case Ot.jsonb:return uoe(e);case Ot.timestamp:return coe(e);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return VE(e);default:return VE(e)}},VE=t=>t,aoe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},soe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},uoe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},loe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>tW(e,s))}return t},coe=t=>typeof t=="string"?t.replace(" ","T"):t,nW=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class z1{constructor(e,n,r={},i=BE){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dN;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dN||(dN={}));class tp{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tp.syncState(this.state,i,o,a),this.pendingDiffs.forEach(u=>{this.state=tp.syncDiff(this.state,u,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=tp.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),s={},u={};return this.map(o,(l,c)=>{a[l]||(u[l]=c)}),this.map(a,(l,c)=>{const f=o[l];if(f){const h=c.map(m=>m.presence_ref),d=f.map(m=>m.presence_ref),p=c.filter(m=>d.indexOf(m.presence_ref)<0),v=f.filter(m=>h.indexOf(m.presence_ref)<0);p.length>0&&(s[l]=p),v.length>0&&(u[l]=v)}else s[l]=c}),this.syncDiff(o,{joins:s,leaves:u},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(s,u)=>{var l;const c=(l=e[s])!==null&&l!==void 0?l:[];if(e[s]=this.cloneDeep(u),c.length>0){const f=e[s].map(d=>d.presence_ref),h=c.filter(d=>f.indexOf(d.presence_ref)<0);e[s].unshift(...h)}r(s,c,u)}),this.map(a,(s,u)=>{let l=e[s];if(!l)return;const c=u.map(f=>f.presence_ref);l=l.filter(f=>c.indexOf(f.presence_ref)<0),e[s]=l,i(s,l,u),l.length===0&&delete e[s]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pN;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(pN||(pN={}));var np;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(np||(np={}));var Na;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Na||(Na={}));class Xc{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=On.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new z1(this,go.join,this.params,this.timeout),this.rejoinTimer=new eW(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=On.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=On.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this._on(go.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new tp(this),this.broadcastEndpointURL=nW(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==On.closed){const{config:{broadcast:a,presence:s,private:u}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[np.PRESENCE]&&this.bindings[np.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,f={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:l,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(d=>e==null?void 0:e(Na.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Na.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),d===void 0){e==null||e(Na.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,m=(p=v==null?void 0:v.length)!==null&&p!==void 0?p:0,g=[];for(let y=0;y<m;y++){const b=v[y],{filter:{event:_,schema:x,table:S,filter:E}}=b,C=d&&d[y];if(C&&C.event===_&&Xc.isFilterValueEqual(C.schema,x)&&Xc.isFilterValueEqual(C.table,S)&&Xc.isFilterValueEqual(C.filter,E))g.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),this.state=On.errored,e==null||e(Na.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Na.SUBSCRIBED);return}}).receive("error",d=>{this.state=On.errored,e==null||e(Na.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Na.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===On.joined&&e===np.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let u=s.statusText;try{const l=await s.json();u=l.error||l.message||u}catch{}return Promise.reject(new Error(u))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,u;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=On.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(go.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new z1(this,go.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=On.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new z1(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>roe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:u,leave:l,join:c}=go;if(r&&[s,u,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(d=>{var p,v,m;return((p=d.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(v=d.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===a}).map(d=>d.callback(h,r)):(o=this.bindings[a])===null||o===void 0||o.filter(d=>{var p,v,m,g,y,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in d){const _=d.id,x=(p=d.filter)===null||p===void 0?void 0:p.event;return _&&((v=n.ids)===null||v===void 0?void 0:v.includes(_))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((m=n.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const _=(y=(g=d==null?void 0:d.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===a}).map(d=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:v,table:m,commit_timestamp:g,type:y,errors:b}=p;h=Object.assign(Object.assign({},{schema:v,table:m,commit_timestamp:g,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(p))}d.callback(h,r)})}_isClosed(){return this.state===On.closed}_isJoined(){return this.state===On.joined}_isJoining(){return this.state===On.joining}_isLeaving(){return this.state===On.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Xc.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(go.close,{},e)}_onError(e){this._on(go.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=On.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=hN(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=hN(e.columns,e.old_record)),n}}const H1=()=>{},sg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},foe=[1e3,2e3,5e3,1e4],hoe=1e4,doe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class poe{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=BE,this.transport=null,this.heartbeatIntervalMs=sg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=H1,this.ref=0,this.reconnectTimer=null,this.vsn=fN,this.logger=H1,this.conn=null,this.sendBuffer=[],this.serializer=new ioe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${UE.websocket}`,this.httpEndpoint=nW(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Qie.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ns.connecting:return il.Connecting;case Ns.open:return il.Open;case Ns.closing:return il.Closing;default:return il.Closed}}isConnected(){return this.connectionState()===il.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Xc(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var u;(u=this.conn)===null||u===void 0||u.send(s)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(noe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},sg.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",l)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:a}=n,s=a?`(${a})`:"",u=o.status||"";this.log("receive",`${u} ${r} ${i} ${s}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ns.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ns.open||this.conn.readyState===Ns.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(go.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([doe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:eoe};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(go.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new eW(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,s,u,l,c,f,h,d;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:BE,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:sg.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:H1,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:fN,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:p=>foe[p-1]||hoe,this.vsn){case toe:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(p,v)=>v(JSON.stringify(p)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(p,v)=>v(JSON.parse(p));break;case ZV:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var zp=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function voe(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function moe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function goe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const s=voe(t.baseUrl,r,i),u=await moe(t.auth),l=await e(s,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...u,...a},body:o?JSON.stringify(o):void 0}),c=await l.text(),f=(l.headers.get("content-type")||"").includes("application/json"),h=f&&c?JSON.parse(c):c;if(!l.ok){const d=f?h:void 0,p=d==null?void 0:d.error;throw new zp((p==null?void 0:p.message)??`Request failed with status ${l.status}`,{status:l.status,icebergType:p==null?void 0:p.type,icebergCode:p==null?void 0:p.code,details:d})}return{status:l.status,headers:l.headers,data:h}}}}function ug(t){return t.join("")}var yoe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ug(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ug(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ug(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ug(t.namespace)}`}),!0}catch(e){if(e instanceof zp&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof zp&&n.status===409)return;throw n}}};function dc(t){return t.join("")}var boe=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dc(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof zp&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof zp&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},woe=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=goe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new yoe(this.client,e),this.tableOps=new boe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},pw=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function vw(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var lg=class extends pw{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rW=class extends pw{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const xoe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_oe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},WE=t=>{if(Array.isArray(t))return t.map(n=>WE(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=WE(r)}),e},Soe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(t)}function Eoe(t,e){if(Hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Coe(t){var e=Eoe(t,"string");return Hp(e)=="symbol"?e:e+""}function Aoe(t,e,n){return(e=Coe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vN(Object(n),!0).forEach(function(r){Aoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const mN=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Toe=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t,o=i.status||500;if(typeof i.json=="function")i.json().then(a=>{const s=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||o+"";e(new lg(mN(a),o,s,r))}).catch(()=>{if(r==="vectors"){const a=o+"";e(new lg(i.statusText||`HTTP ${o} error`,o,a,r))}else{const a=o+"";e(new lg(i.statusText||`HTTP ${o} error`,o,a,r))}});else{const a=o+"";e(new lg(i.statusText||`HTTP ${o} error`,o,a,r))}}else e(new rW(mN(t),t,r))},Poe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?$e($e({},i),n):(_oe(r)?(i.headers=$e({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),$e($e({},i),n))};async function yd(t,e,n,r,i,o,a){return new Promise((s,u)=>{t(n,Poe(e,r,i,o)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;if(a==="vectors"){const c=l.headers.get("content-type");if(l.headers.get("content-length")==="0"||l.status===204)return{};if(!c||!c.includes("application/json"))return{}}return l.json()}).then(l=>s(l)).catch(l=>Toe(l,u,r,a))})}function iW(t="storage"){return{get:async(e,n,r,i)=>yd(e,"GET",n,r,i,void 0,t),post:async(e,n,r,i,o)=>yd(e,"POST",n,i,o,r,t),put:async(e,n,r,i,o)=>yd(e,"PUT",n,i,o,r,t),head:async(e,n,r,i)=>yd(e,"HEAD",n,$e($e({},r),{},{noResolveJson:!0}),i,void 0,t),remove:async(e,n,r,i,o)=>yd(e,"DELETE",n,i,o,r,t)}}const Ooe=iW("storage"),{get:Gp,post:ho,put:zE,head:koe,remove:GT}=Ooe,gi=iW("vectors");var Dh=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=xoe(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(vw(n))return{data:null,error:n};throw n}}},Roe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(vw(e))return{data:null,error:e};throw e}}};let oW;oW=Symbol.toStringTag;var Ioe=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[oW]="BlobDownloadBuilder",this.promise=null}asStream(){return new Roe(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(vw(e))return{data:null,error:e};throw e}}};const Doe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Noe=class extends Dh{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var i=this;return i.handleOperation(async()=>{let o;const a=$e($e({},gN),r);let s=$e($e({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),u&&o.append("metadata",i.encodeMetadata(u)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),u&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(u))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,u&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(s=$e($e({},s),r.headers));const l=i._removeEmptyFolders(e),c=i._getFinalPath(l),f=await(t=="PUT"?zE:ho)(i.fetch,`${i.url}/object/${c}`,o,$e({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{path:l,id:f.Id,fullPath:f.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),a=i._getFinalPath(o),s=new URL(i.url+`/object/upload/sign/${a}`);return s.searchParams.set("token",e),i.handleOperation(async()=>{let u;const l=$e({upsert:gN.upsert},r),c=$e($e({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",l.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",l.cacheControl)):(u=n,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType),{path:o,fullPath:(await zE(i.fetch,s.toString(),u,{headers:c})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const i=$e({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await ho(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+o.url),s=a.searchParams.get("token");if(!s)throw new pw("No token returned by API");return{signedUrl:a.toString(),path:t,token:s}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await ho(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await ho(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(t),o=await ho(r.fetch,`${r.url}/object/sign/${i}`,$e({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${a}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const i=await ho(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(a=>$e($e({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${o}`):null}))})}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),a=()=>Gp(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new Ioe(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>WE(await Gp(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await koe(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(vw(r)&&r instanceof rW){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let s=r.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await GT(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const i=$e($e($e({},Doe),e),{},{prefix:t||""});return await ho(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=$e({},t);return await ho(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Moe="2.93.3",rm={"X-Client-Info":`storage-js/${Moe}`};var $oe=class extends Dh{constructor(t,e={},n,r){const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const o=i.href.replace(/\/$/,""),a=$e($e({},rm),e);super(o,a,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await Gp(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Gp(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await ho(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await zE(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await ho(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await GT(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},joe=class extends Dh{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=$e($e({},rm),e);super(r,i,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await ho(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Gp(e.fetch,i,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await GT(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!Soe(t))throw new pw("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new woe({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(i,s),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}}}})}},Loe=class extends Dh{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=$e($e({},rm),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await gi.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await gi.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},Foe=class extends Dh{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=$e($e({},rm),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},Boe=class extends Dh{constructor(t,e={},n){const r=t.replace(/\/$/,""),i=$e($e({},rm),{},{"Content-Type":"application/json"},e);super(r,i,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await gi.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},Uoe=class extends Boe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Voe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},Voe=class extends Loe{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new Woe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},Woe=class extends Foe{constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,$e($e({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},zoe=class extends $oe{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new Noe(this.url,this.headers,t,this.fetch)}get vectors(){return new Uoe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new joe(this.url+"/iceberg",this.headers,this.fetch)}};const aW="2.93.3",Ac=30*1e3,HE=3,G1=HE*Ac,Hoe="http://localhost:9999",Goe="supabase.auth.token",qoe={"X-Client-Info":`gotrue-js/${aW}`},GE="X-Supabase-Api-Version",sW={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Koe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xoe=10*60*1e3;class qp extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Yoe extends qp{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Joe(t){return Re(t)&&t.name==="AuthApiError"}class ol extends qp{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class us extends qp{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class li extends us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function q1(t){return Re(t)&&t.name==="AuthSessionMissingError"}class pc extends us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cg extends us{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fg extends us{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Qoe(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class yN extends us{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zoe extends us{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class qE extends us{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function K1(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class bN extends us{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class KE extends us{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const e0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wN=` 	
\r=`.split(""),eae=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wN.length;e+=1)t[wN[e].charCodeAt(0)]=-2;for(let e=0;e<e0.length;e+=1)t[e0[e].charCodeAt(0)]=e;return t})();function xN(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(e0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(e0[r]),e.queuedBits-=6}}function uW(t,e,n){const r=eae[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function _N(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{rae(a,r,n)};for(let a=0;a<t.length;a+=1)uW(t.charCodeAt(a),i,o);return e.join("")}function tae(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nae(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}tae(r,e)}}function rae(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function hf(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)uW(t.charCodeAt(i),n,r);return new Uint8Array(e)}function iae(t){const e=[];return nae(t,n=>e.push(n)),new Uint8Array(e)}function pl(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>xN(i,n,r)),xN(null,n,r),e.join("")}function oae(t){return Math.round(Date.now()/1e3)+t}function aae(){return Symbol("auth-callback")}const tr=()=>typeof window<"u"&&typeof document<"u",Wu={tested:!1,writable:!1},lW=()=>{if(!tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wu.tested)return Wu.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wu.tested=!0,Wu.writable=!0}catch{Wu.tested=!0,Wu.writable=!1}return Wu.writable};function sae(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const cW=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uae=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Tc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},zu=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},er=async(t,e)=>{await t.removeItem(e)};class mw{constructor(){this.promise=new mw.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}mw.promiseConstructor=Promise;function hg(t){const e=t.split(".");if(e.length!==3)throw new KE("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Koe.test(e[r]))throw new KE("JWT not in base64url format");return{header:JSON.parse(_N(e[0])),payload:JSON.parse(_N(e[1])),signature:hf(e[2]),raw:{header:e[0],payload:e[1]}}}async function lae(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function cae(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function fae(t){return("0"+t.toString(16)).substr(-2)}function hae(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,fae).join("")}async function dae(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function pae(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await dae(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vc(t,e,n=!1){const r=hae();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Tc(t,`${e}-code-verifier`,i);const o=await pae(r);return[o,r===o?"plain":"s256"]}const vae=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mae(t){const e=t.headers.get(GE);if(!e||!e.match(vae))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gae(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yae(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bae=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mc(t){if(!bae.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function X1(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wae(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function SN(t){return JSON.parse(JSON.stringify(t))}const Qu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xae=[502,503,504];async function EN(t){var e;if(!uae(t))throw new qE(Qu(t),0);if(xae.includes(t.status))throw new qE(Qu(t),t.status);let n;try{n=await t.json()}catch(o){throw new ol(Qu(o),o)}let r;const i=mae(t);if(i&&i.getTime()>=sW["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new bN(Qu(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new li}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new bN(Qu(n),t.status,n.weak_password.reasons);throw new Yoe(Qu(n),t.status||500,r)}const _ae=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Me(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[GE]||(o[GE]=sW["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await Sae(t,e,n+s,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Sae(t,e,n,r,i,o){const a=_ae(e,r,i,o);let s;try{s=await t(n,Object.assign({},a))}catch(u){throw console.error(u),new qE(Qu(u),0)}if(s.ok||await EN(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(u){await EN(u)}}function uo(t){var e;let n=null;Aae(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=oae(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function CN(t){const e=uo(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Bs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Eae(t){return{data:t,error:null}}function Cae(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=dw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},u=Object.assign({},a);return{data:{properties:s,user:u},error:null}}function AN(t){return t}function Aae(t){return t.access_token&&t.refresh_token&&t.expires_in}const Y1=["global","local","others"];class Tae{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=cW(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Y1[0]){if(Y1.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Y1.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Bs})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=dw(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Cae,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bs})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,s,u;try{const l={nextPage:null,lastPage:0,total:0},c=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:AN});if(c.error)throw c.error;const f=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(u=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return d.length>0&&(d.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);l[`${m}Page`]=v}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Re(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){mc(e);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bs})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){mc(e);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Bs})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){mc(e);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Bs})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){mc(e.userId);try{const{data:n,error:r}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){mc(e.userId),mc(e.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,s,u;try{const l={nextPage:null,lastPage:0,total:0},c=await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:AN});if(c.error)throw c.error;const f=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,d=(u=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&u!==void 0?u:[];return d.length>0&&(d.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);l[`${m}Page`]=v}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(Re(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function TN(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const gc={debug:!!(globalThis&&lW()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fW extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Pae extends fW{}async function Oae(t,e,n){gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),gc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw gc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Pae(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(gc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function kae(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hW(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Rae(t){return parseInt(t,16)}function Iae(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Dae(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:u,resources:l,scheme:c,uri:f,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const d=hW(t.address),p=c?`${c}://${r}`:r,v=t.statement?`${t.statement}
`:"",m=`${p} wants you to sign in with your Ethereum account:
${d}

${v}`;let g=`URI: ${f}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),s&&(g+=`
Not Before: ${s.toISOString()}`),u&&(g+=`
Request ID: ${u}`),l){let y=`
Resources:`;for(const b of l){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);y+=`
- ${b}`}g+=y}return`${m}
${g}`}class wn extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class t0 extends wn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Nae({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new wn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new wn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new wn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new wn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new wn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new wn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new wn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new wn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(dW(a)){if(o.rp.id!==a)return new wn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new wn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new wn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Mae({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new wn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new wn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(dW(r)){if(n.rpId!==r)return new wn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new wn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class $ae{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const jae=new $ae;function Lae(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=dw(t,["challenge","user","excludeCredentials"]),o=hf(e).buffer,a=Object.assign(Object.assign({},n),{id:hf(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const l=r[u];s.excludeCredentials[u]=Object.assign(Object.assign({},l),{id:hf(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function Fae(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=dw(t,["challenge","allowCredentials"]),i=hf(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const s=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:hf(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function Bae(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:pl(new Uint8Array(t.response.attestationObject)),clientDataJSON:pl(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Uae(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:pl(new Uint8Array(i.authenticatorData)),clientDataJSON:pl(new Uint8Array(i.clientDataJSON)),signature:pl(new Uint8Array(i.signature)),userHandle:i.userHandle?pl(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dW(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function PN(){var t,e;return!!(tr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Vae(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new t0("Browser returned unexpected credential type",e)}:{data:null,error:new t0("Empty credential response",e)}}catch(e){return{data:null,error:Nae({error:e,options:t})}}}async function Wae(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new t0("Browser returned unexpected credential type",e)}:{data:null,error:new t0("Empty credential response",e)}}catch(e){return{data:null,error:Mae({error:e,options:t})}}}const zae={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Hae={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function n0(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const s=r[o];e(s)?r[o]=n0(s,a):r[o]=n0(a)}else r[o]=a}return r}function Gae(t,e){return n0(zae,t,e||{})}function qae(t,e){return n0(Hae,t,e||{})}class Kae{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){var a;try{const{data:s,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!s)return{data:null,error:u};const l=i??jae.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:c}=s.webauthn.credential_options.publicKey;if(!c.name){const f=r;if(f)c.name=`${c.id}:${f}`;else{const d=(await this.client.getUser()).data.user,p=((a=d==null?void 0:d.user_metadata)===null||a===void 0?void 0:a.name)||(d==null?void 0:d.email)||(d==null?void 0:d.id)||"User";c.name=`${c.id}:${p}`}}c.displayName||(c.displayName=c.name)}switch(s.webauthn.type){case"create":{const c=Gae(s.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:f,error:h}=await Vae({publicKey:c,signal:l});return f?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}case"request":{const c=qae(s.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:f,error:h}=await Wae(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:c,signal:l}));return f?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}}}catch(s){return Re(s)?{data:null,error:s}:{data:null,error:new ol("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new qp("rpId is required for WebAuthn authentication")};try{if(!PN())return{data:null,error:new ol("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(a){return Re(a)?{data:null,error:a}:{data:null,error:new ol("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new qp("rpId is required for WebAuthn registration")};try{if(!PN())return{data:null,error:new ol("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(c=>{var f;return(f=c.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:s};const{data:u,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:l}}catch(a){return Re(a)?{data:null,error:a}:{data:null,error:new ol("Unexpected error in register",a)}}}}kae();const Xae={url:Hoe,storageKey:Goe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qoe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function ON(t,e,n){return await n()}const yc={};class Kp{get jwks(){var e,n;return(n=(e=yc[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){yc[this.storageKey]=Object.assign(Object.assign({},yc[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=yc[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yc[this.storageKey]=Object.assign(Object.assign({},yc[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},Xae),e);if(this.storageKey=o.storageKey,this.instanceID=(n=Kp.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Kp.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&tr()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Tae({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=cW(o.fetch),this.lock=o.lock||ON,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&tr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Oae:this.lock=ON,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Kae(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:lW()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=TN(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=TN(this.memoryStorage)),tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(s){this._debug("#broadcastChannel","error",s)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${aW}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(tr()&&(n=sae(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),tr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Qoe(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?this._returnResult({error:n}):this._returnResult({error:new ol("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:uo}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(o){if(Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:c,password:f,options:h}=e;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await vc(this.storage,this.storageKey)),o=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:d,code_challenge_method:p},xform:uo})}else if("phone"in e){const{phone:c,password:f,options:h}=e;o=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:uo})}else throw new cg("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await er(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(o){if(await er(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:s}=e;n=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:CN})}else if("phone"in e){const{phone:o,password:a,options:s}=e;n=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:CN})}else throw new cg("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new pc;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,s,u,l,c,f,h;let d,p;if("message"in e)d=e.message,p=e.signature;else{const{chain:v,wallet:m,statement:g,options:y}=e;let b;if(tr())if(typeof m=="object")b=m;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")b=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=m}const _=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),x=await b.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=hW(x[0]);let E=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const A=await b.request({method:"eth_chainId"});E=Rae(A)}const C={domain:_.host,address:S,statement:g,uri:_.href,version:"1",chainId:E,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=y==null?void 0:y.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.resources};d=Dae(C),p=await b.request({method:"personal_sign",params:[Iae(d),S]})}try{const{data:v,error:m}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:p},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:uo});if(m)throw m;if(!v||!v.session||!v.user){const g=new pc;return this._returnResult({data:{user:null,session:null},error:g})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:m})}catch(v){if(Re(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,i,o,a,s,u,l,c,f,h,d;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:m,wallet:g,statement:y,options:b}=e;let _;if(tr())if(typeof g=="object")_=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const x=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),y?{statement:y}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),v=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(c=b==null?void 0:b.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:m,error:g}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:pl(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:uo});if(g)throw g;if(!m||!m.session||!m.user){const y=new pc;return this._returnResult({data:{user:null,session:null},error:y})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:g})}catch(m){if(Re(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const n=await zu(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new Zoe;const{data:o,error:a}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:uo});if(await er(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new pc;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await er(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,s=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:uo}),{data:u,error:l}=s;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){const c=new pc;return this._returnResult({data:{user:null,session:null},error:c})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:s,options:u}=e;let l=null,c=null;this.flowType==="pkce"&&([l,c]=await vc(this.storage,this.storageKey));const{error:f}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:l,code_challenge_method:c},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:s,options:u}=e,{data:l,error:c}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(o=u==null?void 0:u.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new cg("You must provide either an email or phone number.")}catch(s){if(await er(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:s}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:uo});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,l=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,a;try{let s=null,u=null;this.flowType==="pkce"&&([s,u]=await vc(this.storage,this.storageKey));const l=await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:u}),headers:this.headers,xform:Eae});return!((o=l.data)===null||o===void 0)&&o.url&&tr()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(s){if(await er(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new li;const{error:i}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await Me(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:s}=await Me(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new cg("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await zu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<G1:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await zu(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=X1()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=wae(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bs}):await this._useSession(async n=>{var r,i,o;const{data:a,error:s}=n;if(s)throw s;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new li}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Bs})})}catch(n){if(Re(n))return q1(n)&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new li;const a=i.session;let s=null,u=null;this.flowType==="pkce"&&e.email!=null&&([s,u]=await vc(this.storage,this.storageKey));const{data:l,error:c}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:u}),jwt:a.access_token,xform:Bs});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await er(this.storage,`${this.storageKey}-code-verifier`),Re(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new li;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=hg(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:s,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:u}=await this._getUser(e.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:s}=n;if(s)throw s;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new li;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!tr())throw new fg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yN("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:u,token_type:l}=e;if(!o||!s||!a||!l)throw new fg("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(s);let h=c+f;u&&(h=parseInt(u));const d=h-c;d*1e3<=Ac&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${f}s`);const p=h-f;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,c);const{data:v,error:m}=await this._getUser(o);if(m)throw m;const g={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:f,expires_at:h,refresh_token:a,token_type:l,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(Re(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await zu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o&&!q1(o))return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(Joe(s)&&(s.status===404||s.status===401||s.status===403)||q1(s)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=aae(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await vc(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await er(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,s,u,l,c;const{data:f,error:h}=o;if(h)throw h;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",d,{headers:this.headers,jwt:(c=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return tr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Re(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:s,token:u,access_token:l,nonce:c}=e,f=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:u,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:uo}),{data:h,error:d}=f;return d?this._returnResult({data:{user:null,session:null},error:d}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new pc}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:d}))}catch(i){if(await er(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await cae(async i=>(i>0&&await lae(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:uo})),(i,o)=>{const a=200*Math.pow(2,i);return o&&K1(o)&&Date.now()+a-r<Ac})}catch(r){if(this._debug(n,"error",r),Re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),tr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await zu(this.storage,this.storageKey);if(i&&this.userStorage){let a=await zu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Tc(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:X1()}else if(i&&!i.user&&!i.user){const a=await zu(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await er(this.storage,this.storageKey+"-user"),await Tc(this.storage,this.storageKey,i)):i.user=X1()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<G1;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${G1}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),K1(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new li;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new mw;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new li;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),Re(o)){const a={data:null,error:o};return K1(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,n)}catch(u){o.push(u)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await er(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Tc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=SN(i);await Tc(this.storage,this.storageKey,o)}else{const i=SN(n);await Tc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await er(this.storage,this.storageKey),await er(this.storage,this.storageKey+"-code-verifier"),await er(this.storage,this.storageKey+"-user"),this.userStorage&&await er(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ac);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ac);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ac}ms, refresh threshold is ${HE} ticks`),i<=HE&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fW)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await vc(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:l}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Bae(e.webauthn.credential_response):Uae(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:u}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:u}))})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Lae(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:Fae(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,i,o;if(e)try{const{payload:d}=hg(e);let p=null;d.aal&&(p=d.aal);let v=p;const{data:{user:m},error:g}=await this.getUser(e);if(g)return this._returnResult({data:null,error:g});((r=(n=m==null?void 0:m.factors)===null||n===void 0?void 0:n.filter(_=>_.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(v="aal2");const b=d.amr||[];return{data:{currentLevel:p,nextLevel:v,currentAuthenticationMethods:b},error:null}}catch(d){if(Re(d))return this._returnResult({data:null,error:d});throw d}const{data:{session:a},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=hg(a.access_token);let l=null;u.aal&&(l=u.aal);let c=l;((o=(i=a.user.factors)===null||i===void 0?void 0:i.filter(d=>d.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(c="aal2");const h=u.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Me(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new li})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new li});const a=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&tr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new li});const a=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&tr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new li})})}catch(e){if(Re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new li})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(s=>s.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===e),r&&this.jwks_cached_at+Xoe>i)return r;const{data:o,error:a}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(s=>s.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:d,error:p}=await this.getSession();if(p||!d.session)return this._returnResult({data:null,error:p});r=d.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:u}}=hg(r);n!=null&&n.allowExpired||gae(o.exp);const l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!l){const{error:d}=await this.getUser(r);if(d)throw d;return{data:{claims:o,header:i,signature:a},error:null}}const c=yae(i.alg),f=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,a,iae(`${s}.${u}`)))throw new KE("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}}Kp.nextInstanceID={};const Yae=Kp,Jae="2.93.3";let Fd="";typeof Deno<"u"?Fd="deno":typeof document<"u"?Fd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fd="react-native":Fd="node";const Qae={"X-Client-Info":`supabase-js-${Fd}/${Jae}`},Zae={headers:Qae},ese={schema:"public"},tse={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},nse={};function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}function rse(t,e){if(Xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ise(t){var e=rse(t,"string");return Xp(e)=="symbol"?e:e+""}function ose(t,e,n){return(e=ise(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kN(Object(n),!0).forEach(function(r){ose(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const ase=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),sse=()=>Headers,use=(t,e,n)=>{const r=ase(n),i=sse();return async(o,a)=>{var s;const u=(s=await e())!==null&&s!==void 0?s:t;let l=new i(a==null?void 0:a.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${u}`),r(o,un(un({},a),{},{headers:l}))}};function lse(t){return t.endsWith("/")?t:t+"/"}function cse(t,e){var n,r;const{db:i,auth:o,realtime:a,global:s}=t,{db:u,auth:l,realtime:c,global:f}=e,h={db:un(un({},u),i),auth:un(un({},l),o),realtime:un(un({},c),a),storage:{},global:un(un(un({},f),s),{},{headers:un(un({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function fse(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lse(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var hse=class extends Yae{constructor(t){super(t)}},dse=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=fse(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:ese,realtime:nse,auth:un(un({},tse),{},{storageKey:a}),global:Zae},u=cse(n??{},s);if(this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(c,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=u.auth)!==null&&l!==void 0?l:{},this.headers,u.global.fetch)}this.fetch=use(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(un({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new Jie(new URL("rest/v1",o).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new zoe(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Gie(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:a,lock:s,debug:u,throwOnError:l},c,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hse({url:this.authUrl.href,headers:un(un({},h),c),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:s,debug:u,throwOnError:l,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(d=>d.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new poe(this.realtimeUrl.href,un(un({},t),{},{params:un(un({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const pse=(t,e,n)=>new dse(t,e,n);function vse(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}vse()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mse="https://imnsqhyrckrwqxlaxdiy.supabase.co",gse="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbnNxaHlyY2tyd3F4bGF4ZGl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5OTQ0MTQsImV4cCI6MjA4NTU3MDQxNH0.pTjCHAMzI79jzECsSsov0wdveIwauwaqpv-6NnL8mPI",$i=pse(mse,gse,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),pW=k.createContext(void 0),yse=({children:t})=>{const[e,n]=k.useState(null),[r,i]=k.useState(null),[o,a]=k.useState(!0);k.useEffect(()=>{const{data:{subscription:c}}=$i.auth.onAuthStateChange((f,h)=>{i(h),n((h==null?void 0:h.user)??null),a(!1)});return $i.auth.getSession().then(({data:{session:f}})=>{i(f),n((f==null?void 0:f.user)??null),a(!1)}),()=>c.unsubscribe()},[]);const s=async(c,f,h)=>{const{error:d}=await $i.auth.signUp({email:c,password:f,options:{data:{username:h},emailRedirectTo:window.location.origin}});return{error:d}},u=async(c,f)=>{const{error:h}=await $i.auth.signInWithPassword({email:c,password:f});return{error:h}},l=async()=>{await $i.auth.signOut()};return N.jsx(pW.Provider,{value:{user:e,session:r,loading:o,signUp:s,signIn:u,signOut:l},children:t})},qT=()=>{const t=k.useContext(pW);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vW=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bse=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],s=t[n++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},wse={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,f=(o&3)<<4|s>>4;let h=(s&15)<<2|l>>6,d=l&63;u||(d=64,a||(h=64)),r.push(n[c],n[f],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vW(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bse(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||s==null||l==null||f==null)throw new xse;const h=o<<2|s>>4;if(r.push(h),l!==64){const d=s<<4&240|l>>2;if(r.push(d),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xse extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _se=function(t){const e=vW(t);return wse.encodeByteArray(e,!0)},mW=function(t){return _se(t).replace(/\./g,"")};function Sse(){try{return typeof indexedDB=="object"}catch{return!1}}function Ese(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cse="FirebaseError";class Nh extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Cse,Object.setPrototypeOf(this,Nh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gW.prototype.create)}}class gW{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?Ase(o,r):"Error",s=`${this.serviceName}: ${a} (${i}).`;return new Nh(i,s,r)}}function Ase(t,e){return t.replace(Tse,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Tse=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pse(t){return t&&t._delegate?t._delegate:t}class r0{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const Ose={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},kse=At.INFO,Rse={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},Ise=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Rse[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yW{constructor(e){this.name=e,this._logLevel=kse,this._logHandler=Ise,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ose[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}}const Dse=(t,e)=>e.some(n=>t instanceof n);let RN,IN;function Nse(){return RN||(RN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mse(){return IN||(IN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bW=new WeakMap,XE=new WeakMap,wW=new WeakMap,J1=new WeakMap,KT=new WeakMap;function $se(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(su(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&bW.set(n,t)}).catch(()=>{}),KT.set(e,t),e}function jse(t){if(XE.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});XE.set(t,e)}let YE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return XE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wW.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return su(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Lse(t){YE=t(YE)}function Fse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Q1(this),e,...n);return wW.set(r,e.sort?e.sort():[e]),su(r)}:Mse().includes(t)?function(...e){return t.apply(Q1(this),e),su(bW.get(this))}:function(...e){return su(t.apply(Q1(this),e))}}function Bse(t){return typeof t=="function"?Fse(t):(t instanceof IDBTransaction&&jse(t),Dse(t,Nse())?new Proxy(t,YE):t)}function su(t){if(t instanceof IDBRequest)return $se(t);if(J1.has(t))return J1.get(t);const e=Bse(t);return e!==t&&(J1.set(t,e),KT.set(e,t)),e}const Q1=t=>KT.get(t);function Use(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),s=su(a);return r&&a.addEventListener("upgradeneeded",u=>{r(su(a.result),u.oldVersion,u.newVersion,su(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),s.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),s}const Vse=["get","getKey","getAll","getAllKeys","count"],Wse=["put","add","delete","clear"],Z1=new Map;function DN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Z1.get(e))return Z1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Wse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Vse.includes(n)))return;const o=async function(a,...s){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(s.shift())),(await Promise.all([l[n](...s),i&&u.done]))[0]};return Z1.set(e,o),o}Lse(t=>({...t,get:(e,n,r)=>DN(e,n)||t.get(e,n,r),has:(e,n)=>!!DN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Hse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Hse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const JE="@firebase/app",NN="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new yW("@firebase/app"),Gse="@firebase/app-compat",qse="@firebase/analytics-compat",Kse="@firebase/analytics",Xse="@firebase/app-check-compat",Yse="@firebase/app-check",Jse="@firebase/auth",Qse="@firebase/auth-compat",Zse="@firebase/database",eue="@firebase/data-connect",tue="@firebase/database-compat",nue="@firebase/functions",rue="@firebase/functions-compat",iue="@firebase/installations",oue="@firebase/installations-compat",aue="@firebase/messaging",sue="@firebase/messaging-compat",uue="@firebase/performance",lue="@firebase/performance-compat",cue="@firebase/remote-config",fue="@firebase/remote-config-compat",hue="@firebase/storage",due="@firebase/storage-compat",pue="@firebase/firestore",vue="@firebase/ai",mue="@firebase/firestore-compat",gue="firebase",yue="12.8.0",bue={[JE]:"fire-core",[Gse]:"fire-core-compat",[Kse]:"fire-analytics",[qse]:"fire-analytics-compat",[Yse]:"fire-app-check",[Xse]:"fire-app-check-compat",[Jse]:"fire-auth",[Qse]:"fire-auth-compat",[Zse]:"fire-rtdb",[eue]:"fire-data-connect",[tue]:"fire-rtdb-compat",[nue]:"fire-fn",[rue]:"fire-fn-compat",[iue]:"fire-iid",[oue]:"fire-iid-compat",[aue]:"fire-fcm",[sue]:"fire-fcm-compat",[uue]:"fire-perf",[lue]:"fire-perf-compat",[cue]:"fire-rc",[fue]:"fire-rc-compat",[hue]:"fire-gcs",[due]:"fire-gcs-compat",[pue]:"fire-fst",[mue]:"fire-fst-compat",[vue]:"fire-vertex","fire-js":"fire-js",[gue]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wue=new Map,xue=new Map,MN=new Map;function $N(t,e){try{t.container.addComponent(e)}catch(n){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function i0(t){const e=t.name;if(MN.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;MN.set(e,t);for(const n of wue.values())$N(n,t);for(const n of xue.values())$N(n,t);return!0}function _ue(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sue={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},XT=new gW("app","Firebase",Sue);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eue=yue;function df(t,e,n){let r=bue[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(a.join(" "));return}i0(new r0(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cue="firebase-heartbeat-database",Aue=1,Yp="firebase-heartbeat-store";let e_=null;function xW(){return e_||(e_=Use(Cue,Aue,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yp)}catch(n){console.warn(n)}}}}).catch(t=>{throw XT.create("idb-open",{originalErrorMessage:t.message})})),e_}async function Tue(t){try{const n=(await xW()).transaction(Yp),r=await n.objectStore(Yp).get(_W(t));return await n.done,r}catch(e){if(e instanceof Nh)ns.warn(e.message);else{const n=XT.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ns.warn(n.message)}}}async function jN(t,e){try{const r=(await xW()).transaction(Yp,"readwrite");await r.objectStore(Yp).put(e,_W(t)),await r.done}catch(n){if(n instanceof Nh)ns.warn(n.message);else{const r=XT.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ns.warn(r.message)}}}function _W(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pue=1024,Oue=30;class kue{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Iue(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=LN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>Oue){const a=Due(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=LN(),{heartbeatsToSend:r,unsentEntries:i}=Rue(this._heartbeatsCache.heartbeats),o=mW(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ns.warn(n),""}}}function LN(){return new Date().toISOString().substring(0,10)}function Rue(t,e=Pue){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),FN(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),FN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Iue{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sse()?Ese().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Tue(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function FN(t){return mW(JSON.stringify({version:2,heartbeats:t})).length}function Due(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nue(t){i0(new r0("platform-logger",e=>new zse(e),"PRIVATE")),i0(new r0("heartbeat",e=>new kue(e),"PRIVATE")),df(JE,NN,t),df(JE,NN,"esm2020"),df("fire-js","")}Nue("");var Mue="firebase",$ue="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */df(Mue,$ue,"app");var BN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,C){function A(){}A.prototype=C.prototype,E.F=C.prototype,E.prototype=new A,E.prototype.constructor=E,E.D=function(T,P,R){for(var I=Array(arguments.length-2),M=2;M<arguments.length;M++)I[M-2]=arguments[M];return C.prototype[P].apply(T,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,C,A){A||(A=0);const T=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)T[P]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(P=0;P<16;++P)T[P]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=E.g[0],A=E.g[1],P=E.g[2];let R=E.g[3],I;I=C+(R^A&(P^R))+T[0]+3614090360&4294967295,C=A+(I<<7&4294967295|I>>>25),I=R+(P^C&(A^P))+T[1]+3905402710&4294967295,R=C+(I<<12&4294967295|I>>>20),I=P+(A^R&(C^A))+T[2]+606105819&4294967295,P=R+(I<<17&4294967295|I>>>15),I=A+(C^P&(R^C))+T[3]+3250441966&4294967295,A=P+(I<<22&4294967295|I>>>10),I=C+(R^A&(P^R))+T[4]+4118548399&4294967295,C=A+(I<<7&4294967295|I>>>25),I=R+(P^C&(A^P))+T[5]+1200080426&4294967295,R=C+(I<<12&4294967295|I>>>20),I=P+(A^R&(C^A))+T[6]+2821735955&4294967295,P=R+(I<<17&4294967295|I>>>15),I=A+(C^P&(R^C))+T[7]+4249261313&4294967295,A=P+(I<<22&4294967295|I>>>10),I=C+(R^A&(P^R))+T[8]+1770035416&4294967295,C=A+(I<<7&4294967295|I>>>25),I=R+(P^C&(A^P))+T[9]+2336552879&4294967295,R=C+(I<<12&4294967295|I>>>20),I=P+(A^R&(C^A))+T[10]+4294925233&4294967295,P=R+(I<<17&4294967295|I>>>15),I=A+(C^P&(R^C))+T[11]+2304563134&4294967295,A=P+(I<<22&4294967295|I>>>10),I=C+(R^A&(P^R))+T[12]+1804603682&4294967295,C=A+(I<<7&4294967295|I>>>25),I=R+(P^C&(A^P))+T[13]+4254626195&4294967295,R=C+(I<<12&4294967295|I>>>20),I=P+(A^R&(C^A))+T[14]+2792965006&4294967295,P=R+(I<<17&4294967295|I>>>15),I=A+(C^P&(R^C))+T[15]+1236535329&4294967295,A=P+(I<<22&4294967295|I>>>10),I=C+(P^R&(A^P))+T[1]+4129170786&4294967295,C=A+(I<<5&4294967295|I>>>27),I=R+(A^P&(C^A))+T[6]+3225465664&4294967295,R=C+(I<<9&4294967295|I>>>23),I=P+(C^A&(R^C))+T[11]+643717713&4294967295,P=R+(I<<14&4294967295|I>>>18),I=A+(R^C&(P^R))+T[0]+3921069994&4294967295,A=P+(I<<20&4294967295|I>>>12),I=C+(P^R&(A^P))+T[5]+3593408605&4294967295,C=A+(I<<5&4294967295|I>>>27),I=R+(A^P&(C^A))+T[10]+38016083&4294967295,R=C+(I<<9&4294967295|I>>>23),I=P+(C^A&(R^C))+T[15]+3634488961&4294967295,P=R+(I<<14&4294967295|I>>>18),I=A+(R^C&(P^R))+T[4]+3889429448&4294967295,A=P+(I<<20&4294967295|I>>>12),I=C+(P^R&(A^P))+T[9]+568446438&4294967295,C=A+(I<<5&4294967295|I>>>27),I=R+(A^P&(C^A))+T[14]+3275163606&4294967295,R=C+(I<<9&4294967295|I>>>23),I=P+(C^A&(R^C))+T[3]+4107603335&4294967295,P=R+(I<<14&4294967295|I>>>18),I=A+(R^C&(P^R))+T[8]+1163531501&4294967295,A=P+(I<<20&4294967295|I>>>12),I=C+(P^R&(A^P))+T[13]+2850285829&4294967295,C=A+(I<<5&4294967295|I>>>27),I=R+(A^P&(C^A))+T[2]+4243563512&4294967295,R=C+(I<<9&4294967295|I>>>23),I=P+(C^A&(R^C))+T[7]+1735328473&4294967295,P=R+(I<<14&4294967295|I>>>18),I=A+(R^C&(P^R))+T[12]+2368359562&4294967295,A=P+(I<<20&4294967295|I>>>12),I=C+(A^P^R)+T[5]+4294588738&4294967295,C=A+(I<<4&4294967295|I>>>28),I=R+(C^A^P)+T[8]+2272392833&4294967295,R=C+(I<<11&4294967295|I>>>21),I=P+(R^C^A)+T[11]+1839030562&4294967295,P=R+(I<<16&4294967295|I>>>16),I=A+(P^R^C)+T[14]+4259657740&4294967295,A=P+(I<<23&4294967295|I>>>9),I=C+(A^P^R)+T[1]+2763975236&4294967295,C=A+(I<<4&4294967295|I>>>28),I=R+(C^A^P)+T[4]+1272893353&4294967295,R=C+(I<<11&4294967295|I>>>21),I=P+(R^C^A)+T[7]+4139469664&4294967295,P=R+(I<<16&4294967295|I>>>16),I=A+(P^R^C)+T[10]+3200236656&4294967295,A=P+(I<<23&4294967295|I>>>9),I=C+(A^P^R)+T[13]+681279174&4294967295,C=A+(I<<4&4294967295|I>>>28),I=R+(C^A^P)+T[0]+3936430074&4294967295,R=C+(I<<11&4294967295|I>>>21),I=P+(R^C^A)+T[3]+3572445317&4294967295,P=R+(I<<16&4294967295|I>>>16),I=A+(P^R^C)+T[6]+76029189&4294967295,A=P+(I<<23&4294967295|I>>>9),I=C+(A^P^R)+T[9]+3654602809&4294967295,C=A+(I<<4&4294967295|I>>>28),I=R+(C^A^P)+T[12]+3873151461&4294967295,R=C+(I<<11&4294967295|I>>>21),I=P+(R^C^A)+T[15]+530742520&4294967295,P=R+(I<<16&4294967295|I>>>16),I=A+(P^R^C)+T[2]+3299628645&4294967295,A=P+(I<<23&4294967295|I>>>9),I=C+(P^(A|~R))+T[0]+4096336452&4294967295,C=A+(I<<6&4294967295|I>>>26),I=R+(A^(C|~P))+T[7]+1126891415&4294967295,R=C+(I<<10&4294967295|I>>>22),I=P+(C^(R|~A))+T[14]+2878612391&4294967295,P=R+(I<<15&4294967295|I>>>17),I=A+(R^(P|~C))+T[5]+4237533241&4294967295,A=P+(I<<21&4294967295|I>>>11),I=C+(P^(A|~R))+T[12]+1700485571&4294967295,C=A+(I<<6&4294967295|I>>>26),I=R+(A^(C|~P))+T[3]+2399980690&4294967295,R=C+(I<<10&4294967295|I>>>22),I=P+(C^(R|~A))+T[10]+4293915773&4294967295,P=R+(I<<15&4294967295|I>>>17),I=A+(R^(P|~C))+T[1]+2240044497&4294967295,A=P+(I<<21&4294967295|I>>>11),I=C+(P^(A|~R))+T[8]+1873313359&4294967295,C=A+(I<<6&4294967295|I>>>26),I=R+(A^(C|~P))+T[15]+4264355552&4294967295,R=C+(I<<10&4294967295|I>>>22),I=P+(C^(R|~A))+T[6]+2734768916&4294967295,P=R+(I<<15&4294967295|I>>>17),I=A+(R^(P|~C))+T[13]+1309151649&4294967295,A=P+(I<<21&4294967295|I>>>11),I=C+(P^(A|~R))+T[4]+4149444226&4294967295,C=A+(I<<6&4294967295|I>>>26),I=R+(A^(C|~P))+T[11]+3174756917&4294967295,R=C+(I<<10&4294967295|I>>>22),I=P+(C^(R|~A))+T[2]+718787259&4294967295,P=R+(I<<15&4294967295|I>>>17),I=A+(R^(P|~C))+T[9]+3951481745&4294967295,E.g[0]=E.g[0]+C&4294967295,E.g[1]=E.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+R&4294967295}r.prototype.v=function(E,C){C===void 0&&(C=E.length);const A=C-this.blockSize,T=this.C;let P=this.h,R=0;for(;R<C;){if(P==0)for(;R<=A;)i(this,E,R),R+=this.blockSize;if(typeof E=="string"){for(;R<C;)if(T[P++]=E.charCodeAt(R++),P==this.blockSize){i(this,T),P=0;break}}else for(;R<C;)if(T[P++]=E[R++],P==this.blockSize){i(this,T),P=0;break}}this.h=P,this.o+=C},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var C=1;C<E.length-8;++C)E[C]=0;C=this.o*8;for(var A=E.length-8;A<E.length;++A)E[A]=C&255,C/=256;for(this.v(E),E=Array(16),C=0,A=0;A<4;++A)for(let T=0;T<32;T+=8)E[C++]=this.g[A]>>>T&255;return E};function o(E,C){var A=s;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=C(E)}function a(E,C){this.h=C;const A=[];let T=!0;for(let P=E.length-1;P>=0;P--){const R=E[P]|0;T&&R==C||(A[P]=R,T=!1)}this.g=A}var s={};function u(E){return-128<=E&&E<128?o(E,function(C){return new a([C|0],C<0?-1:0)}):new a([E|0],E<0?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return m(l(-E));const C=[];let A=1;for(let T=0;E>=A;T++)C[T]=E/A|0,A*=4294967296;return new a(C,0)}function c(E,C){if(E.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(E.charAt(0)=="-")return m(c(E.substring(1),C));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=l(Math.pow(C,8));let T=f;for(let R=0;R<E.length;R+=8){var P=Math.min(8,E.length-R);const I=parseInt(E.substring(R,R+P),C);P<8?(P=l(Math.pow(C,P)),T=T.j(P).add(l(I))):(T=T.j(A),T=T.add(l(I)))}return T}var f=u(0),h=u(1),d=u(16777216);t=a.prototype,t.m=function(){if(v(this))return-m(this).m();let E=0,C=1;for(let A=0;A<this.g.length;A++){const T=this.i(A);E+=(T>=0?T:4294967296+T)*C,C*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(p(this))return"0";if(v(this))return"-"+m(this).toString(E);const C=l(Math.pow(E,6));var A=this;let T="";for(;;){const P=_(A,C).g;A=g(A,P.j(C));let R=((A.g.length>0?A.g[0]:A.h)>>>0).toString(E);if(A=P,p(A))return R+T;for(;R.length<6;)R="0"+R;T=R+T}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function p(E){if(E.h!=0)return!1;for(let C=0;C<E.g.length;C++)if(E.g[C]!=0)return!1;return!0}function v(E){return E.h==-1}t.l=function(E){return E=g(this,E),v(E)?-1:p(E)?0:1};function m(E){const C=E.g.length,A=[];for(let T=0;T<C;T++)A[T]=~E.g[T];return new a(A,~E.h).add(h)}t.abs=function(){return v(this)?m(this):this},t.add=function(E){const C=Math.max(this.g.length,E.g.length),A=[];let T=0;for(let P=0;P<=C;P++){let R=T+(this.i(P)&65535)+(E.i(P)&65535),I=(R>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);T=I>>>16,R&=65535,I&=65535,A[P]=I<<16|R}return new a(A,A[A.length-1]&-2147483648?-1:0)};function g(E,C){return E.add(m(C))}t.j=function(E){if(p(this)||p(E))return f;if(v(this))return v(E)?m(this).j(m(E)):m(m(this).j(E));if(v(E))return m(this.j(m(E)));if(this.l(d)<0&&E.l(d)<0)return l(this.m()*E.m());const C=this.g.length+E.g.length,A=[];for(var T=0;T<2*C;T++)A[T]=0;for(T=0;T<this.g.length;T++)for(let P=0;P<E.g.length;P++){const R=this.i(T)>>>16,I=this.i(T)&65535,M=E.i(P)>>>16,B=E.i(P)&65535;A[2*T+2*P]+=I*B,y(A,2*T+2*P),A[2*T+2*P+1]+=R*B,y(A,2*T+2*P+1),A[2*T+2*P+1]+=I*M,y(A,2*T+2*P+1),A[2*T+2*P+2]+=R*M,y(A,2*T+2*P+2)}for(E=0;E<C;E++)A[E]=A[2*E+1]<<16|A[2*E];for(E=C;E<2*C;E++)A[E]=0;return new a(A,0)};function y(E,C){for(;(E[C]&65535)!=E[C];)E[C+1]+=E[C]>>>16,E[C]&=65535,C++}function b(E,C){this.g=E,this.h=C}function _(E,C){if(p(C))throw Error("division by zero");if(p(E))return new b(f,f);if(v(E))return C=_(m(E),C),new b(m(C.g),m(C.h));if(v(C))return C=_(E,m(C)),new b(m(C.g),C.h);if(E.g.length>30){if(v(E)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var A=h,T=C;T.l(E)<=0;)A=x(A),T=x(T);var P=S(A,1),R=S(T,1);for(T=S(T,2),A=S(A,2);!p(T);){var I=R.add(T);I.l(E)<=0&&(P=P.add(A),R=I),T=S(T,1),A=S(A,1)}return C=g(E,P.j(C)),new b(P,C)}for(P=f;E.l(C)>=0;){for(A=Math.max(1,Math.floor(E.m()/C.m())),T=Math.ceil(Math.log(A)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),R=l(A),I=R.j(C);v(I)||I.l(E)>0;)A-=T,R=l(A),I=R.j(C);p(R)&&(R=h),P=P.add(R),E=g(E,I)}return new b(P,E)}t.B=function(E){return _(this,E).h},t.and=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let T=0;T<C;T++)A[T]=this.i(T)&E.i(T);return new a(A,this.h&E.h)},t.or=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let T=0;T<C;T++)A[T]=this.i(T)|E.i(T);return new a(A,this.h|E.h)},t.xor=function(E){const C=Math.max(this.g.length,E.g.length),A=[];for(let T=0;T<C;T++)A[T]=this.i(T)^E.i(T);return new a(A,this.h^E.h)};function x(E){const C=E.g.length+1,A=[];for(let T=0;T<C;T++)A[T]=E.i(T)<<1|E.i(T-1)>>>31;return new a(A,E.h)}function S(E,C){const A=C>>5;C%=32;const T=E.g.length-A,P=[];for(let R=0;R<T;R++)P[R]=C>0?E.i(R+A)>>>C|E.i(R+A+1)<<32-C:E.i(R+A);return new a(P,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=l,a.fromString=c,YT=a}).apply(typeof BN<"u"?BN:typeof self<"u"?self:typeof window<"u"?window:{});var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var t,e=Object.defineProperty;function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof dg=="object"&&dg];for(var O=0;O<w.length;++O){var D=w[O];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(w,O){if(O)e:{var D=r;w=w.split(".");for(var F=0;F<w.length-1;F++){var Y=w[F];if(!(Y in D))break e;D=D[Y]}w=w[w.length-1],F=D[w],O=O(F),O!=F&&O!=null&&e(D,w,{configurable:!0,writable:!0,value:O})}}i("Symbol.dispose",function(w){return w||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(w){return w||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(w){return w||function(O){var D=[],F;for(F in O)Object.prototype.hasOwnProperty.call(O,F)&&D.push([F,O[F]]);return D}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function s(w){var O=typeof w;return O=="object"&&w!=null||O=="function"}function u(w,O,D){return w.call.apply(w.bind,arguments)}function l(w,O,D){return l=u,l.apply(null,arguments)}function c(w,O){var D=Array.prototype.slice.call(arguments,1);return function(){var F=D.slice();return F.push.apply(F,arguments),w.apply(this,F)}}function f(w,O){function D(){}D.prototype=O.prototype,w.Z=O.prototype,w.prototype=new D,w.prototype.constructor=w,w.Ob=function(F,Y,ee){for(var pe=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)pe[Xe-2]=arguments[Xe];return O.prototype[Y].apply(F,pe)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?w=>w&&AsyncContext.Snapshot.wrap(w):w=>w;function d(w){const O=w.length;if(O>0){const D=Array(O);for(let F=0;F<O;F++)D[F]=w[F];return D}return[]}function p(w,O){for(let F=1;F<arguments.length;F++){const Y=arguments[F];var D=typeof Y;if(D=D!="object"?D:Y?Array.isArray(Y)?"array":D:"null",D=="array"||D=="object"&&typeof Y.length=="number"){D=w.length||0;const ee=Y.length||0;w.length=D+ee;for(let pe=0;pe<ee;pe++)w[D+pe]=Y[pe]}else w.push(Y)}}class v{constructor(O,D){this.i=O,this.j=D,this.h=0,this.g=null}get(){let O;return this.h>0?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}function m(w){a.setTimeout(()=>{throw w},0)}function g(){var w=E;let O=null;return w.g&&(O=w.g,w.g=w.g.next,w.g||(w.h=null),O.next=null),O}class y{constructor(){this.h=this.g=null}add(O,D){const F=b.get();F.set(O,D),this.h?this.h.next=F:this.g=F,this.h=F}}var b=new v(()=>new _,w=>w.reset());class _{constructor(){this.next=this.g=this.h=null}set(O,D){this.h=O,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,E=new y,C=()=>{const w=Promise.resolve(void 0);x=()=>{w.then(A)}};function A(){for(var w;w=g();){try{w.h.call(w.g)}catch(D){m(D)}var O=b;O.j(w),O.h<100&&(O.h++,w.next=O.g,O.g=w)}S=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(w,O){this.type=w,this.g=this.target=O,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var w=!1,O=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const D=()=>{};a.addEventListener("test",D,O),a.removeEventListener("test",D,O)}catch{}return w}();function I(w){return/^[\s\xa0]*$/.test(w)}function M(w,O){P.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w&&this.init(w,O)}f(M,P),M.prototype.init=function(w,O){const D=this.type=w.type,F=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;this.target=w.target||w.srcElement,this.g=O,O=w.relatedTarget,O||(D=="mouseover"?O=w.fromElement:D=="mouseout"&&(O=w.toElement)),this.relatedTarget=O,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=w.pointerType,this.state=w.state,this.i=w,w.defaultPrevented&&M.Z.h.call(this)},M.prototype.h=function(){M.Z.h.call(this);const w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var B="closure_listenable_"+(Math.random()*1e6|0),z=0;function U(w,O,D,F,Y){this.listener=w,this.proxy=null,this.src=O,this.type=D,this.capture=!!F,this.ha=Y,this.key=++z,this.da=this.fa=!1}function $(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function L(w,O,D){for(const F in w)O.call(D,w[F],F,w)}function H(w,O){for(const D in w)O.call(void 0,w[D],D,w)}function X(w){const O={};for(const D in w)O[D]=w[D];return O}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(w,O){let D,F;for(let Y=1;Y<arguments.length;Y++){F=arguments[Y];for(D in F)w[D]=F[D];for(let ee=0;ee<q.length;ee++)D=q[ee],Object.prototype.hasOwnProperty.call(F,D)&&(w[D]=F[D])}}function ae(w){this.src=w,this.g={},this.h=0}ae.prototype.add=function(w,O,D,F,Y){const ee=w.toString();w=this.g[ee],w||(w=this.g[ee]=[],this.h++);const pe=he(w,O,F,Y);return pe>-1?(O=w[pe],D||(O.fa=!1)):(O=new U(O,this.src,ee,!!F,Y),O.fa=D,w.push(O)),O};function fe(w,O){const D=O.type;if(D in w.g){var F=w.g[D],Y=Array.prototype.indexOf.call(F,O,void 0),ee;(ee=Y>=0)&&Array.prototype.splice.call(F,Y,1),ee&&($(O),w.g[D].length==0&&(delete w.g[D],w.h--))}}function he(w,O,D,F){for(let Y=0;Y<w.length;++Y){const ee=w[Y];if(!ee.da&&ee.listener==O&&ee.capture==!!D&&ee.ha==F)return Y}return-1}var de="closure_lm_"+(Math.random()*1e6|0),be={};function ne(w,O,D,F,Y){if(Array.isArray(O)){for(let ee=0;ee<O.length;ee++)ne(w,O[ee],D,F,Y);return null}return D=ft(D),w&&w[B]?w.J(O,D,s(F)?!!F.capture:!!F,Y):ue(w,O,D,!1,F,Y)}function ue(w,O,D,F,Y,ee){if(!O)throw Error("Invalid event type");const pe=s(Y)?!!Y.capture:!!Y;let Xe=ke(w);if(Xe||(w[de]=Xe=new ae(w)),D=Xe.add(O,D,F,pe,ee),D.proxy)return D;if(F=ce(),D.proxy=F,F.src=w,F.listener=D,w.addEventListener)R||(Y=pe),Y===void 0&&(Y=!1),w.addEventListener(O.toString(),F,Y);else if(w.attachEvent)w.attachEvent(ye(O.toString()),F);else if(w.addListener&&w.removeListener)w.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return D}function ce(){function w(D){return O.call(w.src,w.listener,D)}const O=De;return w}function Z(w,O,D,F,Y){if(Array.isArray(O))for(var ee=0;ee<O.length;ee++)Z(w,O[ee],D,F,Y);else F=s(F)?!!F.capture:!!F,D=ft(D),w&&w[B]?(w=w.i,ee=String(O).toString(),ee in w.g&&(O=w.g[ee],D=he(O,D,F,Y),D>-1&&($(O[D]),Array.prototype.splice.call(O,D,1),O.length==0&&(delete w.g[ee],w.h--)))):w&&(w=ke(w))&&(O=w.g[O.toString()],w=-1,O&&(w=he(O,D,F,Y)),(D=w>-1?O[w]:null)&&ge(D))}function ge(w){if(typeof w!="number"&&w&&!w.da){var O=w.src;if(O&&O[B])fe(O.i,w);else{var D=w.type,F=w.proxy;O.removeEventListener?O.removeEventListener(D,F,w.capture):O.detachEvent?O.detachEvent(ye(D),F):O.addListener&&O.removeListener&&O.removeListener(F),(D=ke(O))?(fe(D,w),D.h==0&&(D.src=null,O[de]=null)):$(w)}}}function ye(w){return w in be?be[w]:be[w]="on"+w}function De(w,O){if(w.da)w=!0;else{O=new M(O,this);const D=w.listener,F=w.ha||w.src;w.fa&&ge(w),w=D.call(F,O)}return w}function ke(w){return w=w[de],w instanceof ae?w:null}var tt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ft(w){return typeof w=="function"?w:(w[tt]||(w[tt]=function(O){return w.handleEvent(O)}),w[tt])}function je(){T.call(this),this.i=new ae(this),this.M=this,this.G=null}f(je,T),je.prototype[B]=!0,je.prototype.removeEventListener=function(w,O,D,F){Z(this,w,O,D,F)};function Ye(w,O){var D,F=w.G;if(F)for(D=[];F;F=F.G)D.push(F);if(w=w.M,F=O.type||O,typeof O=="string")O=new P(O,w);else if(O instanceof P)O.target=O.target||w;else{var Y=O;O=new P(F,w),J(O,Y)}Y=!0;let ee,pe;if(D)for(pe=D.length-1;pe>=0;pe--)ee=O.g=D[pe],Y=st(ee,F,!0,O)&&Y;if(ee=O.g=w,Y=st(ee,F,!0,O)&&Y,Y=st(ee,F,!1,O)&&Y,D)for(pe=0;pe<D.length;pe++)ee=O.g=D[pe],Y=st(ee,F,!1,O)&&Y}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var w=this.i;for(const O in w.g){const D=w.g[O];for(let F=0;F<D.length;F++)$(D[F]);delete w.g[O],w.h--}}this.G=null},je.prototype.J=function(w,O,D,F){return this.i.add(String(w),O,!1,D,F)},je.prototype.K=function(w,O,D,F){return this.i.add(String(w),O,!0,D,F)};function st(w,O,D,F){if(O=w.i.g[String(O)],!O)return!0;O=O.concat();let Y=!0;for(let ee=0;ee<O.length;++ee){const pe=O[ee];if(pe&&!pe.da&&pe.capture==D){const Xe=pe.listener,An=pe.ha||pe.src;pe.fa&&fe(w.i,pe),Y=Xe.call(An,F)!==!1&&Y}}return Y&&!F.defaultPrevented}function Pt(w,O){if(typeof w!="function")if(w&&typeof w.handleEvent=="function")w=l(w.handleEvent,w);else throw Error("Invalid listener argument");return Number(O)>2147483647?-1:a.setTimeout(w,O||0)}function Et(w){w.g=Pt(()=>{w.g=null,w.i&&(w.i=!1,Et(w))},w.l);const O=w.h;w.h=null,w.m.apply(null,O)}class fr extends T{constructor(O,D){super(),this.m=O,this.l=D,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function on(w){T.call(this),this.h=w,this.g={}}f(on,T);var fn=[];function Kt(w){L(w.g,function(O,D){this.g.hasOwnProperty(D)&&ge(O)},w),w.g={}}on.prototype.N=function(){on.Z.N.call(this),Kt(this)},on.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=a.JSON.stringify,ui=a.JSON.parse,no=class{stringify(w){return a.JSON.stringify(w,void 0)}parse(w){return a.JSON.parse(w,void 0)}};function kr(){}function Aa(){}var Rr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hr(){P.call(this,"d")}f(hr,P);function Wr(){P.call(this,"c")}f(Wr,P);var dr={},sc=null;function bs(){return sc=sc||new je}dr.Ia="serverreachability";function ju(w){P.call(this,dr.Ia,w)}f(ju,P);function $o(w){const O=bs();Ye(O,new ju(O))}dr.STAT_EVENT="statevent";function uc(w,O){P.call(this,dr.STAT_EVENT,w),this.stat=O}f(uc,P);function nt(w){const O=bs();Ye(O,new uc(O,w))}dr.Ja="timingevent";function Mt(w,O){P.call(this,dr.Ja,w),this.size=O}f(Mt,P);function hn(w,O){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){w()},O)}function Ie(){this.g=!0}Ie.prototype.ua=function(){this.g=!1};function Ve(w,O,D,F,Y,ee){w.info(function(){if(w.g)if(ee){var pe="",Xe=ee.split("&");for(let Ct=0;Ct<Xe.length;Ct++){var An=Xe[Ct].split("=");if(An.length>1){const zn=An[0];An=An[1];const Fo=zn.split("_");pe=Fo.length>=2&&Fo[1]=="type"?pe+(zn+"="+An+"&"):pe+(zn+"=redacted&")}}}else pe=null;else pe=ee;return"XMLHTTP REQ ("+F+") [attempt "+Y+"]: "+O+`
`+D+`
`+pe})}function Ke(w,O,D,F,Y,ee,pe){w.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+Y+"]: "+O+`
`+D+`
`+ee+" "+pe})}function gt(w,O,D,F){w.info(function(){return"XMLHTTP TEXT ("+O+"): "+_t(w,D)+(F?" "+F:"")})}function gn(w,O){w.info(function(){return"TIMEOUT: "+O})}Ie.prototype.info=function(){};function _t(w,O){if(!w.g)return O;if(!O)return null;try{const ee=JSON.parse(O);if(ee){for(w=0;w<ee.length;w++)if(Array.isArray(ee[w])){var D=ee[w];if(!(D.length<2)){var F=D[1];if(Array.isArray(F)&&!(F.length<1)){var Y=F[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let pe=1;pe<F.length;pe++)F[pe]=""}}}}return Xt(ee)}catch{return O}}var yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},dn;function Ta(){}f(Ta,kr),Ta.prototype.g=function(){return new XMLHttpRequest},dn=new Ta;function ro(w){return encodeURIComponent(String(w))}function jo(w){var O=1;w=w.split(":");const D=[];for(;O>0&&w.length;)D.push(w.shift()),O--;return w.length&&D.push(w.join(":")),D}function zr(w,O,D,F){this.j=w,this.i=O,this.l=D,this.S=F||1,this.V=new on(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new lc}function lc(){this.i=null,this.g="",this.h=!1}var mk={},Mx={};function $x(w,O,D){w.M=1,w.A=Am(Lo(O)),w.u=D,w.R=!0,gk(w,null)}function gk(w,O){w.F=Date.now(),Cm(w),w.B=Lo(w.A);var D=w.B,F=w.S;Array.isArray(F)||(F=[String(F)]),kk(D.i,"t",F),w.C=0,D=w.j.L,w.h=new lc,w.g=Kk(w.j,D?O:null,!w.u),w.P>0&&(w.O=new fr(l(w.Y,w,w.g),w.P)),O=w.V,D=w.g,F=w.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(fn[0]=Y.toString()),Y=fn);for(let ee=0;ee<Y.length;ee++){const pe=ne(D,Y[ee],F||O.handleEvent,!1,O.h||O);if(!pe)break;O.g[pe.key]=pe}O=w.J?X(w.J):{},w.u?(w.v||(w.v="POST"),O["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.B,w.v,w.u,O)):(w.v="GET",w.g.ea(w.B,w.v,null,O)),$o(),Ve(w.i,w.v,w.B,w.l,w.S,w.u)}zr.prototype.ba=function(w){w=w.target;const O=this.O;O&&_s(w)==3?O.j():this.Y(w)},zr.prototype.Y=function(w){try{if(w==this.g)e:{const Xe=_s(this.g),An=this.g.ya(),Ct=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||jk(this.g)))){this.K||Xe!=4||An==7||(An==8||Ct<=0?$o(3):$o(2)),jx(this);var O=this.g.ca();this.X=O;var D=oq(this);if(this.o=O==200,Ke(this.i,this.v,this.B,this.l,this.S,Xe,O),this.o){if(this.U&&!this.L){t:{if(this.g){var F,Y=this.g;if((F=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(F)){var ee=F;break t}}ee=null}if(w=ee)gt(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Lx(this,w);else{this.o=!1,this.m=3,nt(12),Lu(this),Jh(this);break e}}if(this.R){w=!0;let zn;for(;!this.K&&this.C<D.length;)if(zn=aq(this,D),zn==Mx){Xe==4&&(this.m=4,nt(14),w=!1),gt(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==mk){this.m=4,nt(15),gt(this.i,this.l,D,"[Invalid Chunk]"),w=!1;break}else gt(this.i,this.l,zn,null),Lx(this,zn);if(yk(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||D.length!=0||this.h.h||(this.m=1,nt(16),w=!1),this.o=this.o&&w,!w)gt(this.i,this.l,D,"[Invalid Chunked Response]"),Lu(this),Jh(this);else if(D.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+D.length),Gx(pe),pe.P=!0,nt(11))}}else gt(this.i,this.l,D,null),Lx(this,D);Xe==4&&Lu(this),this.o&&!this.K&&(Xe==4?zk(this.j,this):(this.o=!1,Cm(this)))}else wq(this.g),O==400&&D.indexOf("Unknown SID")>0?(this.m=3,nt(12)):(this.m=0,nt(13)),Lu(this),Jh(this)}}}catch{}finally{}};function oq(w){if(!yk(w))return w.g.la();const O=jk(w.g);if(O==="")return"";let D="";const F=O.length,Y=_s(w.g)==4;if(!w.h.i){if(typeof TextDecoder>"u")return Lu(w),Jh(w),"";w.h.i=new a.TextDecoder}for(let ee=0;ee<F;ee++)w.h.h=!0,D+=w.h.i.decode(O[ee],{stream:!(Y&&ee==F-1)});return O.length=0,w.h.g+=D,w.C=0,w.h.g}function yk(w){return w.g?w.v=="GET"&&w.M!=2&&w.j.Aa:!1}function aq(w,O){var D=w.C,F=O.indexOf(`
`,D);return F==-1?Mx:(D=Number(O.substring(D,F)),isNaN(D)?mk:(F+=1,F+D>O.length?Mx:(O=O.slice(F,F+D),w.C=F+D,O)))}zr.prototype.cancel=function(){this.K=!0,Lu(this)};function Cm(w){w.T=Date.now()+w.H,bk(w,w.H)}function bk(w,O){if(w.D!=null)throw Error("WatchDog timer not null");w.D=hn(l(w.aa,w),O)}function jx(w){w.D&&(a.clearTimeout(w.D),w.D=null)}zr.prototype.aa=function(){this.D=null;const w=Date.now();w-this.T>=0?(gn(this.i,this.B),this.M!=2&&($o(),nt(17)),Lu(this),this.m=2,Jh(this)):bk(this,this.T-w)};function Jh(w){w.j.I==0||w.K||zk(w.j,w)}function Lu(w){jx(w);var O=w.O;O&&typeof O.dispose=="function"&&O.dispose(),w.O=null,Kt(w.V),w.g&&(O=w.g,w.g=null,O.abort(),O.dispose())}function Lx(w,O){try{var D=w.j;if(D.I!=0&&(D.g==w||Fx(D.h,w))){if(!w.L&&Fx(D.h,w)&&D.I==3){try{var F=D.Ba.g.parse(O)}catch{F=null}if(Array.isArray(F)&&F.length==3){var Y=F;if(Y[0]==0){e:if(!D.v){if(D.g)if(D.g.F+3e3<w.F)Rm(D),Om(D);else break e;Hx(D),nt(18)}}else D.xa=Y[1],0<D.xa-D.K&&Y[2]<37500&&D.F&&D.A==0&&!D.C&&(D.C=hn(l(D.Va,D),6e3));_k(D.h)<=1&&D.ta&&(D.ta=void 0)}else Bu(D,11)}else if((w.L||D.g==w)&&Rm(D),!I(O))for(Y=D.Ba.g.parse(O),O=0;O<Y.length;O++){let Ct=Y[O];const zn=Ct[0];if(!(zn<=D.K))if(D.K=zn,Ct=Ct[1],D.I==2)if(Ct[0]=="c"){D.M=Ct[1],D.ba=Ct[2];const Fo=Ct[3];Fo!=null&&(D.ka=Fo,D.j.info("VER="+D.ka));const Uu=Ct[4];Uu!=null&&(D.za=Uu,D.j.info("SVER="+D.za));const Ss=Ct[5];Ss!=null&&typeof Ss=="number"&&Ss>0&&(F=1.5*Ss,D.O=F,D.j.info("backChannelRequestTimeoutMs_="+F)),F=D;const Es=w.g;if(Es){const Im=Es.g?Es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Im){var ee=F.h;ee.g||Im.indexOf("spdy")==-1&&Im.indexOf("quic")==-1&&Im.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Bx(ee,ee.h),ee.h=null))}if(F.G){const qx=Es.g?Es.g.getResponseHeader("X-HTTP-Session-Id"):null;qx&&(F.wa=qx,$t(F.J,F.G,qx))}}D.I=3,D.l&&D.l.ra(),D.aa&&(D.T=Date.now()-w.F,D.j.info("Handshake RTT: "+D.T+"ms")),F=D;var pe=w;if(F.na=qk(F,F.L?F.ba:null,F.W),pe.L){Sk(F.h,pe);var Xe=pe,An=F.O;An&&(Xe.H=An),Xe.D&&(jx(Xe),Cm(Xe)),F.g=pe}else Vk(F);D.i.length>0&&km(D)}else Ct[0]!="stop"&&Ct[0]!="close"||Bu(D,7);else D.I==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?Bu(D,7):zx(D):Ct[0]!="noop"&&D.l&&D.l.qa(Ct),D.A=0)}}$o(4)}catch{}}var sq=class{constructor(w,O){this.g=w,this.map=O}};function wk(w){this.l=w||10,a.PerformanceNavigationTiming?(w=a.performance.getEntriesByType("navigation"),w=w.length>0&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xk(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function _k(w){return w.h?1:w.g?w.g.size:0}function Fx(w,O){return w.h?w.h==O:w.g?w.g.has(O):!1}function Bx(w,O){w.g?w.g.add(O):w.h=O}function Sk(w,O){w.h&&w.h==O?w.h=null:w.g&&w.g.has(O)&&w.g.delete(O)}wk.prototype.cancel=function(){if(this.i=Ek(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function Ek(w){if(w.h!=null)return w.i.concat(w.h.G);if(w.g!=null&&w.g.size!==0){let O=w.i;for(const D of w.g.values())O=O.concat(D.G);return O}return d(w.i)}var Ck=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uq(w,O){if(w){w=w.split("&");for(let D=0;D<w.length;D++){const F=w[D].indexOf("=");let Y,ee=null;F>=0?(Y=w[D].substring(0,F),ee=w[D].substring(F+1)):Y=w[D],O(Y,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function ws(w){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let O;w instanceof ws?(this.l=w.l,Qh(this,w.j),this.o=w.o,this.g=w.g,Zh(this,w.u),this.h=w.h,Ux(this,Rk(w.i)),this.m=w.m):w&&(O=String(w).match(Ck))?(this.l=!1,Qh(this,O[1]||"",!0),this.o=ed(O[2]||""),this.g=ed(O[3]||"",!0),Zh(this,O[4]),this.h=ed(O[5]||"",!0),Ux(this,O[6]||"",!0),this.m=ed(O[7]||"")):(this.l=!1,this.i=new nd(null,this.l))}ws.prototype.toString=function(){const w=[];var O=this.j;O&&w.push(td(O,Ak,!0),":");var D=this.g;return(D||O=="file")&&(w.push("//"),(O=this.o)&&w.push(td(O,Ak,!0),"@"),w.push(ro(D).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.u,D!=null&&w.push(":",String(D))),(D=this.h)&&(this.g&&D.charAt(0)!="/"&&w.push("/"),w.push(td(D,D.charAt(0)=="/"?fq:cq,!0))),(D=this.i.toString())&&w.push("?",D),(D=this.m)&&w.push("#",td(D,dq)),w.join("")},ws.prototype.resolve=function(w){const O=Lo(this);let D=!!w.j;D?Qh(O,w.j):D=!!w.o,D?O.o=w.o:D=!!w.g,D?O.g=w.g:D=w.u!=null;var F=w.h;if(D)Zh(O,w.u);else if(D=!!w.h){if(F.charAt(0)!="/")if(this.g&&!this.h)F="/"+F;else{var Y=O.h.lastIndexOf("/");Y!=-1&&(F=O.h.slice(0,Y+1)+F)}if(Y=F,Y==".."||Y==".")F="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){F=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const ee=[];for(let pe=0;pe<Y.length;){const Xe=Y[pe++];Xe=="."?F&&pe==Y.length&&ee.push(""):Xe==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),F&&pe==Y.length&&ee.push("")):(ee.push(Xe),F=!0)}F=ee.join("/")}else F=Y}return D?O.h=F:D=w.i.toString()!=="",D?Ux(O,Rk(w.i)):D=!!w.m,D&&(O.m=w.m),O};function Lo(w){return new ws(w)}function Qh(w,O,D){w.j=D?ed(O,!0):O,w.j&&(w.j=w.j.replace(/:$/,""))}function Zh(w,O){if(O){if(O=Number(O),isNaN(O)||O<0)throw Error("Bad port number "+O);w.u=O}else w.u=null}function Ux(w,O,D){O instanceof nd?(w.i=O,pq(w.i,w.l)):(D||(O=td(O,hq)),w.i=new nd(O,w.l))}function $t(w,O,D){w.i.set(O,D)}function Am(w){return $t(w,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),w}function ed(w,O){return w?O?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function td(w,O,D){return typeof w=="string"?(w=encodeURI(w).replace(O,lq),D&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function lq(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var Ak=/[#\/\?@]/g,cq=/[#\?:]/g,fq=/[#\?]/g,hq=/[#\?@]/g,dq=/#/g;function nd(w,O){this.h=this.g=null,this.i=w||null,this.j=!!O}function Fu(w){w.g||(w.g=new Map,w.h=0,w.i&&uq(w.i,function(O,D){w.add(decodeURIComponent(O.replace(/\+/g," ")),D)}))}t=nd.prototype,t.add=function(w,O){Fu(this),this.i=null,w=cc(this,w);let D=this.g.get(w);return D||this.g.set(w,D=[]),D.push(O),this.h+=1,this};function Tk(w,O){Fu(w),O=cc(w,O),w.g.has(O)&&(w.i=null,w.h-=w.g.get(O).length,w.g.delete(O))}function Pk(w,O){return Fu(w),O=cc(w,O),w.g.has(O)}t.forEach=function(w,O){Fu(this),this.g.forEach(function(D,F){D.forEach(function(Y){w.call(O,Y,F,this)},this)},this)};function Ok(w,O){Fu(w);let D=[];if(typeof O=="string")Pk(w,O)&&(D=D.concat(w.g.get(cc(w,O))));else for(w=Array.from(w.g.values()),O=0;O<w.length;O++)D=D.concat(w[O]);return D}t.set=function(w,O){return Fu(this),this.i=null,w=cc(this,w),Pk(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[O]),this.h+=1,this},t.get=function(w,O){return w?(w=Ok(this,w),w.length>0?String(w[0]):O):O};function kk(w,O,D){Tk(w,O),D.length>0&&(w.i=null,w.g.set(cc(w,O),d(D)),w.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],O=Array.from(this.g.keys());for(let F=0;F<O.length;F++){var D=O[F];const Y=ro(D);D=Ok(this,D);for(let ee=0;ee<D.length;ee++){let pe=Y;D[ee]!==""&&(pe+="="+ro(D[ee])),w.push(pe)}}return this.i=w.join("&")};function Rk(w){const O=new nd;return O.i=w.i,w.g&&(O.g=new Map(w.g),O.h=w.h),O}function cc(w,O){return O=String(O),w.j&&(O=O.toLowerCase()),O}function pq(w,O){O&&!w.j&&(Fu(w),w.i=null,w.g.forEach(function(D,F){const Y=F.toLowerCase();F!=Y&&(Tk(this,F),kk(this,Y,D))},w)),w.j=O}function vq(w,O){const D=new Ie;if(a.Image){const F=new Image;F.onload=c(xs,D,"TestLoadImage: loaded",!0,O,F),F.onerror=c(xs,D,"TestLoadImage: error",!1,O,F),F.onabort=c(xs,D,"TestLoadImage: abort",!1,O,F),F.ontimeout=c(xs,D,"TestLoadImage: timeout",!1,O,F),a.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=w}else O(!1)}function mq(w,O){const D=new Ie,F=new AbortController,Y=setTimeout(()=>{F.abort(),xs(D,"TestPingServer: timeout",!1,O)},1e4);fetch(w,{signal:F.signal}).then(ee=>{clearTimeout(Y),ee.ok?xs(D,"TestPingServer: ok",!0,O):xs(D,"TestPingServer: server error",!1,O)}).catch(()=>{clearTimeout(Y),xs(D,"TestPingServer: error",!1,O)})}function xs(w,O,D,F,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),F(D)}catch{}}function gq(){this.g=new no}function Vx(w){this.i=w.Sb||null,this.h=w.ab||!1}f(Vx,kr),Vx.prototype.g=function(){return new Tm(this.i,this.h)};function Tm(w,O){je.call(this),this.H=w,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Tm,je),t=Tm.prototype,t.open=function(w,O){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=w,this.D=O,this.readyState=1,id(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const O={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};w&&(O.body=w),(this.H||a).fetch(new Request(this.D,O)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rd(this)),this.readyState=0},t.Pa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,id(this)),this.g&&(this.readyState=3,id(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ik(this)}else w.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ik(w){w.j.read().then(w.Ma.bind(w)).catch(w.ga.bind(w))}t.Ma=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var O=w.value?w.value:new Uint8Array(0);(O=this.B.decode(O,{stream:!w.done}))&&(this.response=this.responseText+=O)}w.done?rd(this):id(this),this.readyState==3&&Ik(this)}},t.Oa=function(w){this.g&&(this.response=this.responseText=w,rd(this))},t.Na=function(w){this.g&&(this.response=w,rd(this))},t.ga=function(){this.g&&rd(this)};function rd(w){w.readyState=4,w.l=null,w.j=null,w.B=null,id(w)}t.setRequestHeader=function(w,O){this.A.append(w,O)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],O=this.h.entries();for(var D=O.next();!D.done;)D=D.value,w.push(D[0]+": "+D[1]),D=O.next();return w.join(`\r
`)};function id(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(Tm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function Dk(w){let O="";return L(w,function(D,F){O+=F,O+=":",O+=D,O+=`\r
`}),O}function Wx(w,O,D){e:{for(F in D){var F=!1;break e}F=!0}F||(D=Dk(D),typeof w=="string"?D!=null&&ro(D):$t(w,O,D))}function pn(w){je.call(this),this.headers=new Map,this.L=w||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(pn,je);var yq=/^https?$/i,bq=["POST","PUT"];t=pn.prototype,t.Fa=function(w){this.H=w},t.ea=function(w,O,D,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);O=O?O.toUpperCase():"GET",this.D=w,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():dn.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(O,String(w),!0),this.B=!1}catch(ee){Nk(this,ee);return}if(w=D||"",D=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var Y in F)D.set(Y,F[Y]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ee of F.keys())D.set(ee,F.get(ee));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(D.keys()).find(ee=>ee.toLowerCase()=="content-type"),Y=a.FormData&&w instanceof a.FormData,!(Array.prototype.indexOf.call(bq,O,void 0)>=0)||F||Y||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,pe]of D)this.g.setRequestHeader(ee,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(w),this.v=!1}catch(ee){Nk(this,ee)}};function Nk(w,O){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=O,w.o=5,Mk(w),Pm(w)}function Mk(w){w.A||(w.A=!0,Ye(w,"complete"),Ye(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=w||7,Ye(this,"complete"),Ye(this,"abort"),Pm(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pm(this,!0)),pn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?$k(this):this.Xa())},t.Xa=function(){$k(this)};function $k(w){if(w.h&&typeof o<"u"){if(w.v&&_s(w)==4)setTimeout(w.Ca.bind(w),0);else if(Ye(w,"readystatechange"),_s(w)==4){w.h=!1;try{const ee=w.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var D;if(!(D=O)){var F;if(F=ee===0){let pe=String(w.D).match(Ck)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),F=!yq.test(pe?pe.toLowerCase():"")}D=F}if(D)Ye(w,"complete"),Ye(w,"success");else{w.o=6;try{var Y=_s(w)>2?w.g.statusText:""}catch{Y=""}w.l=Y+" ["+w.ca()+"]",Mk(w)}}finally{Pm(w)}}}}function Pm(w,O){if(w.g){w.m&&(clearTimeout(w.m),w.m=null);const D=w.g;w.g=null,O||Ye(w,"ready");try{D.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function _s(w){return w.g?w.g.readyState:0}t.ca=function(){try{return _s(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(w){if(this.g){var O=this.g.responseText;return w&&O.indexOf(w)==0&&(O=O.substring(w.length)),ui(O)}};function jk(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.F){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function wq(w){const O={};w=(w.g&&_s(w)>=2&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<w.length;F++){if(I(w[F]))continue;var D=jo(w[F]);const Y=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const ee=O[Y]||[];O[Y]=ee,ee.push(D)}H(O,function(F){return F.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function od(w,O,D){return D&&D.internalChannelParams&&D.internalChannelParams[w]||O}function Lk(w){this.za=0,this.i=[],this.j=new Ie,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=od("failFast",!1,w),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=od("baseRetryDelayMs",5e3,w),this.Za=od("retryDelaySeedMs",1e4,w),this.Ta=od("forwardChannelMaxRetries",2,w),this.va=od("forwardChannelRequestTimeoutMs",2e4,w),this.ma=w&&w.xmlHttpFactory||void 0,this.Ua=w&&w.Rb||void 0,this.Aa=w&&w.useFetchStreams||!1,this.O=void 0,this.L=w&&w.supportsCrossDomainXhr||!1,this.M="",this.h=new wk(w&&w.concurrentRequestLimit),this.Ba=new gq,this.S=w&&w.fastHandshake||!1,this.R=w&&w.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=w&&w.Pb||!1,w&&w.ua&&this.j.ua(),w&&w.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&w&&w.detectBufferingProxy||!1,this.ia=void 0,w&&w.longPollingTimeout&&w.longPollingTimeout>0&&(this.ia=w.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Lk.prototype,t.ka=8,t.I=1,t.connect=function(w,O,D,F){nt(0),this.W=w,this.H=O||{},D&&F!==void 0&&(this.H.OSID=D,this.H.OAID=F),this.F=this.X,this.J=qk(this,null,this.W),km(this)};function zx(w){if(Fk(w),w.I==3){var O=w.V++,D=Lo(w.J);if($t(D,"SID",w.M),$t(D,"RID",O),$t(D,"TYPE","terminate"),ad(w,D),O=new zr(w,w.j,O),O.M=2,O.A=Am(Lo(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(O.A.toString(),"")}catch{}!D&&a.Image&&(new Image().src=O.A,D=!0),D||(O.g=Kk(O.j,null),O.g.ea(O.A)),O.F=Date.now(),Cm(O)}Gk(w)}function Om(w){w.g&&(Gx(w),w.g.cancel(),w.g=null)}function Fk(w){Om(w),w.v&&(a.clearTimeout(w.v),w.v=null),Rm(w),w.h.cancel(),w.m&&(typeof w.m=="number"&&a.clearTimeout(w.m),w.m=null)}function km(w){if(!xk(w.h)&&!w.m){w.m=!0;var O=w.Ea;x||C(),S||(x(),S=!0),E.add(O,w),w.D=0}}function xq(w,O){return _k(w.h)>=w.h.j-(w.m?1:0)?!1:w.m?(w.i=O.G.concat(w.i),!0):w.I==1||w.I==2||w.D>=(w.Sa?0:w.Ta)?!1:(w.m=hn(l(w.Ea,w,O),Hk(w,w.D)),w.D++,!0)}t.Ea=function(w){if(this.m)if(this.m=null,this.I==1){if(!w){this.V=Math.floor(Math.random()*1e5),w=this.V++;const Y=new zr(this,this.j,w);let ee=this.o;if(this.U&&(ee?(ee=X(ee),J(ee,this.U)):ee=this.U),this.u!==null||this.R||(Y.J=ee,ee=null),this.S)e:{for(var O=0,D=0;D<this.i.length;D++){t:{var F=this.i[D];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(O+=F,O>4096){O=D;break e}if(O===4096||D===this.i.length-1){O=D+1;break e}}O=1e3}else O=1e3;O=Uk(this,Y,O),D=Lo(this.J),$t(D,"RID",w),$t(D,"CVER",22),this.G&&$t(D,"X-HTTP-Session-Id",this.G),ad(this,D),ee&&(this.R?O="headers="+ro(Dk(ee))+"&"+O:this.u&&Wx(D,this.u,ee)),Bx(this.h,Y),this.Ra&&$t(D,"TYPE","init"),this.S?($t(D,"$req",O),$t(D,"SID","null"),Y.U=!0,$x(Y,D,null)):$x(Y,D,O),this.I=2}}else this.I==3&&(w?Bk(this,w):this.i.length==0||xk(this.h)||Bk(this))};function Bk(w,O){var D;O?D=O.l:D=w.V++;const F=Lo(w.J);$t(F,"SID",w.M),$t(F,"RID",D),$t(F,"AID",w.K),ad(w,F),w.u&&w.o&&Wx(F,w.u,w.o),D=new zr(w,w.j,D,w.D+1),w.u===null&&(D.J=w.o),O&&(w.i=O.G.concat(w.i)),O=Uk(w,D,1e3),D.H=Math.round(w.va*.5)+Math.round(w.va*.5*Math.random()),Bx(w.h,D),$x(D,F,O)}function ad(w,O){w.H&&L(w.H,function(D,F){$t(O,F,D)}),w.l&&L({},function(D,F){$t(O,F,D)})}function Uk(w,O,D){D=Math.min(w.i.length,D);const F=w.l?l(w.l.Ka,w.l,w):null;e:{var Y=w.i;let Xe=-1;for(;;){const An=["count="+D];Xe==-1?D>0?(Xe=Y[0].g,An.push("ofs="+Xe)):Xe=0:An.push("ofs="+Xe);let Ct=!0;for(let zn=0;zn<D;zn++){var ee=Y[zn].g;const Fo=Y[zn].map;if(ee-=Xe,ee<0)Xe=Math.max(0,Y[zn].g-100),Ct=!1;else try{ee="req"+ee+"_"||"";try{var pe=Fo instanceof Map?Fo:Object.entries(Fo);for(const[Uu,Ss]of pe){let Es=Ss;s(Ss)&&(Es=Xt(Ss)),An.push(ee+Uu+"="+encodeURIComponent(Es))}}catch(Uu){throw An.push(ee+"type="+encodeURIComponent("_badmap")),Uu}}catch{F&&F(Fo)}}if(Ct){pe=An.join("&");break e}}pe=void 0}return w=w.i.splice(0,D),O.G=w,pe}function Vk(w){if(!w.g&&!w.v){w.Y=1;var O=w.Da;x||C(),S||(x(),S=!0),E.add(O,w),w.A=0}}function Hx(w){return w.g||w.v||w.A>=3?!1:(w.Y++,w.v=hn(l(w.Da,w),Hk(w,w.A)),w.A++,!0)}t.Da=function(){if(this.v=null,Wk(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var w=4*this.T;this.j.info("BP detection timer enabled: "+w),this.B=hn(l(this.Wa,this),w)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,nt(10),Om(this),Wk(this))};function Gx(w){w.B!=null&&(a.clearTimeout(w.B),w.B=null)}function Wk(w){w.g=new zr(w,w.j,"rpc",w.Y),w.u===null&&(w.g.J=w.o),w.g.P=0;var O=Lo(w.na);$t(O,"RID","rpc"),$t(O,"SID",w.M),$t(O,"AID",w.K),$t(O,"CI",w.F?"0":"1"),!w.F&&w.ia&&$t(O,"TO",w.ia),$t(O,"TYPE","xmlhttp"),ad(w,O),w.u&&w.o&&Wx(O,w.u,w.o),w.O&&(w.g.H=w.O);var D=w.g;w=w.ba,D.M=1,D.A=Am(Lo(O)),D.u=null,D.R=!0,gk(D,w)}t.Va=function(){this.C!=null&&(this.C=null,Om(this),Hx(this),nt(19))};function Rm(w){w.C!=null&&(a.clearTimeout(w.C),w.C=null)}function zk(w,O){var D=null;if(w.g==O){Rm(w),Gx(w),w.g=null;var F=2}else if(Fx(w.h,O))D=O.G,Sk(w.h,O),F=1;else return;if(w.I!=0){if(O.o)if(F==1){D=O.u?O.u.length:0,O=Date.now()-O.F;var Y=w.D;F=bs(),Ye(F,new Mt(F,D)),km(w)}else Vk(w);else if(Y=O.m,Y==3||Y==0&&O.X>0||!(F==1&&xq(w,O)||F==2&&Hx(w)))switch(D&&D.length>0&&(O=w.h,O.i=O.i.concat(D)),Y){case 1:Bu(w,5);break;case 4:Bu(w,10);break;case 3:Bu(w,6);break;default:Bu(w,2)}}}function Hk(w,O){let D=w.Qa+Math.floor(Math.random()*w.Za);return w.isActive()||(D*=2),D*O}function Bu(w,O){if(w.j.info("Error code "+O),O==2){var D=l(w.bb,w),F=w.Ua;const Y=!F;F=new ws(F||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qh(F,"https"),Am(F),Y?vq(F.toString(),D):mq(F.toString(),D)}else nt(2);w.I=0,w.l&&w.l.pa(O),Gk(w),Fk(w)}t.bb=function(w){w?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Gk(w){if(w.I=0,w.ja=[],w.l){const O=Ek(w.h);(O.length!=0||w.i.length!=0)&&(p(w.ja,O),p(w.ja,w.i),w.h.i.length=0,d(w.i),w.i.length=0),w.l.oa()}}function qk(w,O,D){var F=D instanceof ws?Lo(D):new ws(D);if(F.g!="")O&&(F.g=O+"."+F.g),Zh(F,F.u);else{var Y=a.location;F=Y.protocol,O=O?O+"."+Y.hostname:Y.hostname,Y=+Y.port;const ee=new ws(null);F&&Qh(ee,F),O&&(ee.g=O),Y&&Zh(ee,Y),D&&(ee.h=D),F=ee}return D=w.G,O=w.wa,D&&O&&$t(F,D,O),$t(F,"VER",w.ka),ad(w,F),F}function Kk(w,O,D){if(O&&!w.L)throw Error("Can't create secondary domain capable XhrIo object.");return O=w.Aa&&!w.ma?new pn(new Vx({ab:D})):new pn(w.ma),O.Fa(w.L),O}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xk(){}t=Xk.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ki(w,O){je.call(this),this.g=new Lk(O),this.l=w,this.h=O&&O.messageUrlParams||null,w=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(w?w["X-WebChannel-Content-Type"]=O.messageContentType:w={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.sa&&(w?w["X-WebChannel-Client-Profile"]=O.sa:w={"X-WebChannel-Client-Profile":O.sa}),this.g.U=w,(w=O&&O.Qb)&&!I(w)&&(this.g.u=w),this.A=O&&O.supportsCrossDomainXhr||!1,this.v=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!I(O)&&(this.g.G=O,w=this.h,w!==null&&O in w&&(w=this.h,O in w&&delete w[O])),this.j=new fc(this)}f(ki,je),ki.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ki.prototype.close=function(){zx(this.g)},ki.prototype.o=function(w){var O=this.g;if(typeof w=="string"){var D={};D.__data__=w,w=D}else this.v&&(D={},D.__data__=Xt(w),w=D);O.i.push(new sq(O.Ya++,w)),O.I==3&&km(O)},ki.prototype.N=function(){this.g.l=null,delete this.j,zx(this.g),delete this.g,ki.Z.N.call(this)};function Yk(w){hr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var O=w.__sm__;if(O){e:{for(const D in O){w=D;break e}w=void 0}(this.i=w)&&(w=this.i,O=O!==null&&w in O?O[w]:void 0),this.data=O}else this.data=w}f(Yk,hr);function Jk(){Wr.call(this),this.status=1}f(Jk,Wr);function fc(w){this.g=w}f(fc,Xk),fc.prototype.ra=function(){Ye(this.g,"a")},fc.prototype.qa=function(w){Ye(this.g,new Yk(w))},fc.prototype.pa=function(w){Ye(this.g,new Jk)},fc.prototype.oa=function(){Ye(this.g,"b")},ki.prototype.send=ki.prototype.o,ki.prototype.open=ki.prototype.m,ki.prototype.close=ki.prototype.close,yn.NO_ERROR=0,yn.TIMEOUT=8,yn.HTTP_ERROR=6,zt.COMPLETE="complete",Aa.EventType=Rr,Rr.OPEN="a",Rr.CLOSE="b",Rr.ERROR="c",Rr.MESSAGE="d",je.prototype.listen=je.prototype.J,pn.prototype.listenOnce=pn.prototype.K,pn.prototype.getLastError=pn.prototype.Ha,pn.prototype.getLastErrorCode=pn.prototype.ya,pn.prototype.getStatus=pn.prototype.ca,pn.prototype.getResponseJson=pn.prototype.La,pn.prototype.getResponseText=pn.prototype.la,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Fa}).apply(typeof dg<"u"?dg:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gw="12.8.0";function jue(t){gw=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new yW("@firebase/firestore");function So(t,...e){if(o0.logLevel<=At.DEBUG){const n=e.map(EW);o0.debug(`Firestore (${gw}): ${t}`,...n)}}function SW(t,...e){if(o0.logLevel<=At.ERROR){const n=e.map(EW);o0.error(`Firestore (${gw}): ${t}`,...n)}}function EW(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,CW(t,r,n)}function CW(t,e,n){let r=`FIRESTORE (${gw}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw SW(r),new Error(r)}function rp(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||CW(e,i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends Nh{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lue{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Fue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hi.UNAUTHENTICATED))}shutdown(){}}class Bue{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rp(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new ip;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ip,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},s=u=>{So("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>s(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?s(u):(So("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ip)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(So("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rp(typeof r.accessToken=="string",31837,{l:r}),new Lue(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rp(e===null||typeof e=="string",2055,{h:e}),new hi(e)}}class Uue{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Vue{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Uue(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wue{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_ue(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rp(this.o===void 0,3512);const r=o=>{o.error!=null&&So("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,So("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{So("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):So("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new UN(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rp(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new UN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zue(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function xu(t,e){return t<e?-1:t>e?1:0}function Gue(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return t_(i)===t_(o)?xu(i,o):t_(i)?1:-1}return xu(t.length,e.length)}const que=55296,Kue=57343;function t_(t){const e=t.charCodeAt(0);return e>=que&&e<=Kue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="__name__";class zo{constructor(e,n,r){n===void 0?n=0:n>e.length&&a0(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&a0(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=zo.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return xu(e.length,n.length)}static compareSegments(e,n){const r=zo.isNumericId(e),i=zo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?zo.extractNumericId(e).compare(zo.extractNumericId(n)):Gue(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return YT.fromString(e.substring(4,e.length-2))}}class wo extends zo{construct(e,n,r){return new wo(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new dt(ht.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new wo(n)}static emptyPath(){return new wo([])}}const Xue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class al extends zo{construct(e,n,r){return new al(e,n,r)}static isValidIdentifier(e){return Xue.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),al.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VN}static keyField(){return new al([VN])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new dt(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new dt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new dt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else s==="`"?(a=!a,i++):s!=="."||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new dt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new al(n)}static emptyPath(){return new al([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.path=e}static fromPath(e){return new vl(wo.fromString(e))}static fromName(e){return new vl(wo.fromString(e).popFirst(5))}static empty(){return new vl(wo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wo.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wo.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vl(new wo(e.slice()))}}function Yue(t,e,n,r){if(e===!0&&r===!0)throw new dt(ht.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jue(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(t,e){const n={typeString:t};return e&&(n.value=e),n}function im(t,e){if(!Jue(t))throw new dt(ht.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new dt(ht.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=-62135596800,zN=1e6;class Xo{static now(){return Xo.fromMillis(Date.now())}static fromDate(e){return Xo.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*zN);return new Xo(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new dt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<WN)throw new dt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zN}_compareTo(e){return this.seconds===e.seconds?xu(this.nanoseconds,e.nanoseconds):xu(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xo._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(im(e,Xo._jsonSchema))return new Xo(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-WN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xo._jsonSchemaVersion="firestore/timestamp/1.0",Xo._jsonSchema={type:En("string",Xo._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};function Que(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zue extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zue("Invalid base64 string: "+o):o}}(e);return new Vl(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new Vl(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xu(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vl.EMPTY_BYTE_STRING=new Vl("");const HN="(default)";class s0{constructor(e,n){this.projectId=e,this.database=n||HN}static empty(){return new s0("","")}get isDefaultDatabase(){return this.database===HN}isEqual(e){return e instanceof s0&&e.projectId===this.projectId&&e.database===this.database}}function ele(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new dt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new s0(t.options.projectId,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tle{constructor(e,n=null,r=[],i=[],o=null,a="F",s=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function nle(t){return new tle(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GN,ot;(ot=GN||(GN={}))[ot.OK=0]="OK",ot[ot.CANCELLED=1]="CANCELLED",ot[ot.UNKNOWN=2]="UNKNOWN",ot[ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ot[ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ot[ot.NOT_FOUND=5]="NOT_FOUND",ot[ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",ot[ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",ot[ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",ot[ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ot[ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ot[ot.ABORTED=10]="ABORTED",ot[ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",ot[ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",ot[ot.INTERNAL=13]="INTERNAL",ot[ot.UNAVAILABLE=14]="UNAVAILABLE",ot[ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new YT([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rle=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ile=1048576;function n_(){return typeof document<"u"?document:null}class ole{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&So("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ip,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,s=new JT(e,n,a,i,o);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dt(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var qN,KN;(KN=qN||(qN={})).Ma="default",KN.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ale(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sle="ComponentProvider",XN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ule="firestore.googleapis.com",YN=!0;class JN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new dt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ule,this.ssl=YN}else this.host=e.host,this.ssl=e.ssl??YN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rle;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ile)throw new dt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yue("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ale(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new dt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new dt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new dt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lle{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new dt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fue;switch(r.type){case"firstParty":return new Vue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new dt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=XN.get(n);r&&(So(sle,"Removing Datastore"),XN.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new QT(this.firestore,e,this._query)}}class na{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ZT(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new na(this.firestore,e,this._key)}toJSON(){return{type:na._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(im(n,na._jsonSchema))return new na(e,r||null,new vl(wo.fromString(n.referencePath)))}}na._jsonSchemaVersion="firestore/documentReference/1.0",na._jsonSchema={type:En("string",na._jsonSchemaVersion),referencePath:En("string")};class ZT extends QT{constructor(e,n,r){super(e,n,nle(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new na(this.firestore,null,new vl(e))}withConverter(e){return new ZT(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="AsyncQueue";class ZN{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ole(this,"async_queue_retry"),this._c=()=>{const r=n_();r&&So(QN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=n_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=n_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ip;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Que(e))throw e;So(QN,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,SW("INTERNAL UNHANDLED ERROR: ",eM(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=JT.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&a0(47125,{Pc:eM(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function eM(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class cle extends lle{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ZN,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ZN(e),this._firestoreClient=void 0,await e}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(Vl.fromBase64String(e))}catch(n){throw new dt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new La(Vl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:La._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(im(e,La._jsonSchema))return La.fromBase64String(e.bytes)}}La._jsonSchemaVersion="firestore/bytes/1.0",La._jsonSchema={type:En("string",La._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AW{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new dt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new al(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new dt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new dt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xu(this._lat,e._lat)||xu(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rl._jsonSchemaVersion}}static fromJSON(e){if(im(e,Rl._jsonSchema))return new Rl(e.latitude,e.longitude)}}Rl._jsonSchemaVersion="firestore/geoPoint/1.0",Rl._jsonSchema={type:En("string",Rl._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Il._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(im(e,Il._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Il(e.vectorValues);throw new dt(ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Il._jsonSchemaVersion="firestore/vectorValue/1.0",Il._jsonSchema={type:En("string",Il._jsonSchemaVersion),vectorValues:En("object")};function TW(t,e,n){if((e=Pse(e))instanceof AW)return e._internalPath;if(typeof e=="string")return hle(t,e);throw QE("Field path arguments must be of type string or ",t)}const fle=new RegExp("[~\\*/\\[\\]]");function hle(t,e,n){if(e.search(fle)>=0)throw QE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t);try{return new AW(...e.split("."))._internalPath}catch{throw QE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t)}}function QE(t,e,n,r,i){let o=`Function ${e}() called with invalid data`;o+=". ";let a="";return new dt(ht.INVALID_ARGUMENT,o+t+a)}const tM="@firebase/firestore",nM="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new na(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dle(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(TW("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dle extends PW{data(){return super.data()}}class pg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pf extends PW{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(TW("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pf._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pf._jsonSchemaVersion="firestore/documentSnapshot/1.0",pf._jsonSchema={type:En("string",pf._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class cy extends pf{data(e={}){return super.data(e)}}class op{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cy(this._firestore,this._userDataWriter,r.key,r,new pg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new dt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(s=>{const u=new cy(i._firestore,i._userDataWriter,s.doc.key,s.doc,new pg(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>o||s.type!==3).map(s=>{const u=new cy(i._firestore,i._userDataWriter,s.doc.key,s.doc,new pg(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return s.type!==0&&(l=a.indexOf(s.doc.key),a=a.delete(s.doc.key)),s.type!==1&&(a=a.add(s.doc),c=a.indexOf(s.doc.key)),{type:ple(s.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=op._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hue.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ple(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return a0(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */op._jsonSchemaVersion="firestore/querySnapshot/1.0",op._jsonSchema={type:En("string",op._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};(function(e,n=!0){jue(Eue),i0(new r0("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),s=new cle(new Bue(r.getProvider("auth-internal")),new Wue(a,r.getProvider("app-check-internal")),ele(a,i),a);return o={useFetchStreams:n,...o},s._setSettings(o),s},"PUBLIC").setMultipleInstances(!0)),df(tM,nM,e),df(tM,nM,"esm2020")})();const vle=()=>(console.log("Firebase config not provided, using Lovable Cloud only"),!1),mle=async t=>null,gle=async t=>null,eP=()=>{const{user:t}=qT(),[e,n]=k.useState(!1),r=k.useCallback(async l=>{if(!t)return{error:"Not authenticated"};n(!0);try{const{error:c}=await $i.from("student_progress").insert({user_id:t.id,level_number:l.levelNumber,game_type:l.gameType,score:l.score,is_completed:l.isCompleted,time_spent_seconds:l.timeSpentSeconds,attempts:l.attempts,completed_at:l.isCompleted?new Date().toISOString():null});if(c)throw c;return await gle({userId:t.id,levelNumber:l.levelNumber,gameType:l.gameType,score:l.score,isCompleted:l.isCompleted,timeSpentSeconds:l.timeSpentSeconds,attempts:l.attempts,completedAt:l.isCompleted?new Date:void 0}),{error:null}}catch(c){return console.error("Error saving progress:",c),{error:c}}finally{n(!1)}},[t]),i=k.useCallback(async(l,c,f)=>{if(!t)return console.log("Cannot log emotion: user not authenticated"),{error:"Not authenticated"};try{let h=f;if(!h){const{data:v}=await $i.from("profiles").select("username").eq("user_id",t.id).single();h=(v==null?void 0:v.username)||t.email||"Unknown"}console.log("Saving emotion to database:",{levelNumber:l,emotion:c.emotion,confidence:c.confidence,username:h});const{error:d,data:p}=await $i.from("emotion_logs").insert({user_id:t.id,level_number:l,emotion:c.emotion,confidence:c.confidence,username:h}).select();if(d)throw console.error("Supabase error saving emotion:",d),d;return console.log("Emotion saved successfully to Supabase:",p),await mle({userId:t.id,levelNumber:l,emotion:c.emotion,confidence:c.confidence}),{error:null,data:p}}catch(h){return console.error("Error logging emotion:",h),{error:h}}},[t]),o=k.useCallback(async()=>{if(!t)return{data:null,error:"Not authenticated"};try{const{data:l,error:c}=await $i.from("student_progress").select("*").eq("user_id",t.id).order("started_at",{ascending:!1});if(c)throw c;return{data:l,error:null}}catch(l){return console.error("Error getting progress:",l),{data:null,error:l}}},[t]),a=k.useCallback(async()=>{if(!t)return{data:null,error:"Not authenticated"};try{const{data:l,error:c}=await $i.from("emotion_logs").select("*").eq("user_id",t.id).order("captured_at",{ascending:!1});if(c)throw c;return{data:l,error:null}}catch(l){return console.error("Error getting emotion logs:",l),{data:null,error:l}}},[t]),s=k.useCallback(async l=>{if(!t)return{error:"Not authenticated"};try{const{error:c}=await $i.from("profiles").update({current_level:l}).eq("user_id",t.id);if(c)throw c;return{error:null}}catch(c){return console.error("Error updating level:",c),{error:c}}},[t]),u=k.useCallback(async()=>{if(!t)return{data:null,error:"Not authenticated"};try{const{data:l,error:c}=await $i.from("profiles").select("*").eq("user_id",t.id).single();if(c)throw c;return{data:l,error:null}}catch(l){return console.error("Error getting profile:",l),{data:null,error:l}}},[t]);return{loading:e,saveProgress:r,logEmotion:i,getProgress:o,getEmotionLogs:a,updateCurrentLevel:s,getProfile:u}},yle=fU("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ar=k.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const a=r?tX:"button";return N.jsx(a,{className:Gt(yle({variant:e,size:n,className:t})),ref:o,...i})});Ar.displayName="Button";const fy=k.forwardRef(({className:t,type:e,...n},r)=>N.jsx("input",{type:e,className:Gt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));fy.displayName="Input";const Dn=k.forwardRef(({className:t,...e},n)=>N.jsx("div",{ref:n,className:Gt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Dn.displayName="Card";const vf=k.forwardRef(({className:t,...e},n)=>N.jsx("div",{ref:n,className:Gt("flex flex-col space-y-1.5 p-6",t),...e}));vf.displayName="CardHeader";const mf=k.forwardRef(({className:t,...e},n)=>N.jsx("h3",{ref:n,className:Gt("text-2xl font-semibold leading-none tracking-tight",t),...e}));mf.displayName="CardTitle";const OW=k.forwardRef(({className:t,...e},n)=>N.jsx("p",{ref:n,className:Gt("text-sm text-muted-foreground",t),...e}));OW.displayName="CardDescription";const ar=k.forwardRef(({className:t,...e},n)=>N.jsx("div",{ref:n,className:Gt("p-6 pt-0",t),...e}));ar.displayName="CardContent";const ble=k.forwardRef(({className:t,...e},n)=>N.jsx("div",{ref:n,className:Gt("flex items-center p-6 pt-0",t),...e}));ble.displayName="CardFooter";const wle=()=>{const[t,e]=k.useState(!0),[n,r]=k.useState(""),[i,o]=k.useState(""),[a,s]=k.useState(""),[u,l]=k.useState(!1),{signIn:c,signUp:f}=qT(),{toast:h}=XA(),d=async p=>{p.preventDefault(),l(!0);try{if(t){const{error:v}=await c(n,i);h(v?{title:"   ",description:"      ",variant:"destructive"}:{title:" !",description:"   "})}else{if(!a.trim()){h({title:"",description:"   ",variant:"destructive"}),l(!1);return}const{error:v}=await f(n,i,a);h(v?{title:"   ",description:v.message,variant:"destructive"}:{title:"  !",description:"      "})}}catch{h({title:"",description:"   ",variant:"destructive"})}finally{l(!1)}};return N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:N.jsxs(Dn,{className:"border-2 shadow-xl",children:[N.jsxs(vf,{className:"text-center space-y-2",children:[N.jsx(it.div,{initial:{scale:0},animate:{scale:1},className:"text-6xl mb-4",children:""}),N.jsx(mf,{className:"text-3xl font-bold text-gradient",children:" "}),N.jsx(OW,{className:"text-lg",children:t?"  ":"  "})]}),N.jsxs(ar,{children:[N.jsxs("form",{onSubmit:d,className:"space-y-4",children:[!t&&N.jsx(it.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:N.jsx(fy,{type:"text",placeholder:" ",value:a,onChange:p=>s(p.target.value),className:"text-right text-lg py-6",required:!t})}),N.jsx(fy,{type:"email",placeholder:" ",value:n,onChange:p=>r(p.target.value),className:"text-right text-lg py-6",required:!0}),N.jsx(fy,{type:"password",placeholder:" ",value:i,onChange:p=>o(p.target.value),className:"text-right text-lg py-6",required:!0}),N.jsx(Ar,{type:"submit",className:"w-full btn-game gradient-primary text-xl py-6",disabled:u,children:u?"  ...":t?"  ":"  "})]}),N.jsx("div",{className:"mt-6 text-center",children:N.jsx("button",{type:"button",onClick:()=>e(!t),className:"text-primary hover:underline text-lg font-medium",children:t?"     ":"   "})})]})]})})},Xf=[{id:1,title:"  ",icon:"",color:"from-purple-500 to-pink-500",lesson:{title:"  ",description:"     .          .",keyPoints:["      ","    ","     ","    "]},gameType:"matching",matchingItems:[{id:"1",concept:"",image:"  "},{id:"2",concept:" ",image:" "},{id:"3",concept:" ",image:" "}],requiredScore:3},{id:2,title:" ",icon:"",color:"from-blue-500 to-cyan-500",lesson:{title:" ",description:"         .",keyPoints:[" :   "," :    "," :    "," :    "]},gameType:"mcq",mcqQuestions:[{question:"      ",options:[" "," "," "," "],correctIndex:1},{question:"      ",options:[" "," "," "," "],correctIndex:0},{question:"       ",options:[" "," "," "," "],correctIndex:2}],requiredScore:2},{id:3,title:" ",icon:"",color:"from-green-500 to-teal-500",lesson:{title:" ",description:"         .",keyPoints:["    ","   ","     ","     "]},gameType:"dragdrop",dragDropItems:[{id:"1",content:" ",correctOrder:1},{id:"2",content:" ",correctOrder:2},{id:"3",content:" ",correctOrder:3},{id:"4",content:" ",correctOrder:4}],requiredScore:4},{id:4,title:" ",icon:"",color:"from-orange-500 to-red-500",lesson:{title:" ",description:"      .",keyPoints:[" 2-4   ","     ","     ","    "]},gameType:"fillblank",fillBlankQuestions:[{sentence:"  ___    ",blank:"2-4",options:["10-15","2-4","1 ","20  "],correctIndex:1},{sentence:" ___    ",blank:"",options:["","","",""],correctIndex:1},{sentence:"    ___  ",blank:"",options:[""," ","",""],correctIndex:2}],requiredScore:2},{id:5,title:" ",icon:"",color:"from-yellow-500 to-amber-500",lesson:{title:" ",description:"         .",keyPoints:["   ","    ","   ","      "]},gameType:"matching",matchingItems:[{id:"1",concept:" ",image:" "},{id:"2",concept:" ",image:"  "},{id:"3",concept:" ",image:" "}],requiredScore:3},{id:6,title:" ",icon:"",color:"from-indigo-500 to-purple-500",lesson:{title:" ",description:"       .",keyPoints:[" :    3 ",":    ",":     ",":    "]},gameType:"mcq",mcqQuestions:[{question:"     ",options:[" 3 ","   3 "," 3 "," 3 "],correctIndex:1},{question:"    ",options:["  ","   ","  ","   "],correctIndex:1},{question:"    ",options:["  "," "," "," "],correctIndex:1}],requiredScore:2},{id:7,title:" ",icon:"",color:"from-teal-500 to-green-500",lesson:{title:" ",description:"        .",keyPoints:["  :  ","  : ","  :   ",":  "]},gameType:"dragdrop",dragDropItems:[{id:"1",content:" ",correctOrder:1},{id:"2",content:" ",correctOrder:2},{id:"3",content:"  ",correctOrder:3},{id:"4",content:"  ",correctOrder:4}],requiredScore:4},{id:8,title:" ",icon:"",color:"from-red-500 to-pink-500",lesson:{title:"   ",description:"      .",keyPoints:["  ","   ","   ","    "]},gameType:"fillblank",fillBlankQuestions:[{sentence:"   ___  ",blank:"",options:["","","",""],correctIndex:1},{sentence:"    ___ ",blank:"",options:["","","",""],correctIndex:2},{sentence:"      ___",blank:"",options:["","","",""],correctIndex:1}],requiredScore:2},{id:9,title:"  ",icon:"",color:"from-cyan-500 to-blue-500",lesson:{title:"  ",description:"       .",keyPoints:["  ","    ","   ","   "]},gameType:"mcq",mcqQuestions:[{question:"       ",options:[" "," "," "," "],correctIndex:1},{question:"   ",options:[" ","  "," "," "],correctIndex:1},{question:"    ",options:[" "," "," "," "],correctIndex:1}],requiredScore:2},{id:10,title:" ",icon:"",color:"from-amber-500 to-orange-500",lesson:{title:" ",description:"     !      .",keyPoints:["   ","   ","  ","  !"]},gameType:"dragdrop",dragDropItems:[{id:"1",content:"  ",correctOrder:1},{id:"2",content:"  ",correctOrder:2},{id:"3",content:"  ",correctOrder:3},{id:"4",content:"  ",correctOrder:4},{id:"5",content:"  ",correctOrder:5},{id:"6",content:" ",correctOrder:6}],requiredScore:6}],kW=t=>({matching:" ",mcq:"  ",fillblank:" ",dragdrop:" "})[t],xle=t=>({matching:"",mcq:"",fillblank:"",dragdrop:""})[t],_le=({currentLevel:t,completedLevels:e,onSelectStage:n})=>N.jsxs("div",{className:"max-w-4xl mx-auto",children:[N.jsx("div",{className:"text-center mb-8",children:N.jsx("h1",{className:"text-4xl font-bold text-gradient mb-2",children:"  "})}),N.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Xf.map((r,i)=>{const o=e.includes(r.id),a=r.id>t&&!o,s=r.id===t;return N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.05},whileHover:{scale:a?1:1.05},whileTap:{scale:a?1:.95},children:N.jsxs(Dn,{className:`cursor-pointer transition-all border-2 relative overflow-hidden ${a?"opacity-50 cursor-not-allowed bg-muted":o?"bg-success/10 border-success":s?"border-primary animate-pulse-glow":"hover:border-primary/50"}`,onClick:()=>!a&&n(r.id),children:[N.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${r.color} opacity-10`}),N.jsxs(ar,{className:"p-4 text-center relative",children:[N.jsx("div",{className:"text-4xl mb-2",children:r.icon}),N.jsx("p",{className:"font-bold text-sm mb-1 line-clamp-2",children:r.title}),N.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-muted-foreground",children:[N.jsx("span",{children:xle(r.gameType)}),N.jsx("span",{children:kW(r.gameType)})]}),N.jsx("div",{className:"mt-2",children:a?N.jsx("span",{className:"text-lg",children:""}):o?N.jsx("span",{className:"text-lg",children:""}):s?N.jsx("span",{className:"inline-block px-2 py-1 bg-primary text-primary-foreground text-xs rounded-full",children:""}):null})]})]})},r.id)})}),N.jsxs("div",{className:"mt-8 flex justify-center gap-6 text-sm text-muted-foreground",children:[N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{children:""}),N.jsx("span",{children:""})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{className:"w-3 h-3 rounded-full bg-primary animate-pulse"}),N.jsx("span",{children:""})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("span",{children:""}),N.jsx("span",{children:""})]})]})]}),Sle=({lesson:t,stageNumber:e,stageIcon:n,onStartGame:r})=>N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:N.jsxs(Dn,{className:"border-2 shadow-xl overflow-hidden",children:[N.jsxs(vf,{className:"gradient-primary text-primary-foreground pb-8",children:[N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("span",{className:"text-5xl",children:n}),N.jsxs("span",{className:"bg-white/20 px-4 py-2 rounded-full text-lg font-bold",children:[" ",e]})]}),N.jsx(mf,{className:"text-3xl font-bold mt-4",children:t.title})]}),N.jsxs(ar,{className:"p-6 space-y-6",children:[N.jsx("p",{className:"text-xl leading-relaxed text-muted-foreground",children:t.description}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[N.jsx("span",{children:""})," :"]}),N.jsx("ul",{className:"space-y-3",children:t.keyPoints.map((i,o)=>N.jsxs(it.li,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:o*.1},className:"flex items-start gap-3 bg-muted/50 p-4 rounded-xl",children:[N.jsx("span",{className:"text-2xl",children:""}),N.jsx("span",{className:"text-lg",children:i})]},o))})]}),N.jsx(it.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:N.jsxs(Ar,{onClick:r,className:"w-full btn-game gradient-secondary text-xl py-8",children:[N.jsx("span",{className:"text-2xl ml-2",children:""}),"  !"]})})]})]})}),Ele=({items:t,onComplete:e})=>{const[n,r]=k.useState(null),[i,o]=k.useState([]),[a,s]=k.useState(null),u=[...t].sort(()=>Math.random()-.5),l=f=>{i.includes(f)||(r(f),s(null))},c=k.useCallback(f=>{if(!(!n||i.includes(f)))if(n===f){const h=[...i,f];o(h),r(null),h.length===t.length&&setTimeout(()=>e(t.length),500)}else s(f),setTimeout(()=>s(null),500)},[n,i,t,e]);return N.jsxs("div",{className:"max-w-4xl mx-auto",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("h2",{className:"text-2xl font-bold mb-2",children:"  "}),N.jsx("p",{className:"text-muted-foreground text-lg",children:"      "}),N.jsx("div",{className:"mt-4 flex justify-center gap-2",children:t.map((f,h)=>N.jsx("div",{className:`w-4 h-4 rounded-full transition-all ${h<i.length?"bg-success":"bg-muted"}`},h))})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[N.jsxs("div",{className:"space-y-4",children:[N.jsx("h3",{className:"text-xl font-bold text-center mb-4",children:" "}),t.map(f=>N.jsx(it.div,{whileHover:{scale:i.includes(f.id)?1:1.02},whileTap:{scale:.98},children:N.jsx(Dn,{className:`cursor-pointer transition-all border-2 ${i.includes(f.id)?"bg-success/20 border-success opacity-50":n===f.id?"border-primary shadow-lg animate-pulse-glow":"hover:border-primary/50"}`,onClick:()=>l(f.id),children:N.jsx(ar,{className:"p-4 text-center",children:N.jsx("span",{className:"text-lg font-medium",children:f.concept})})})},f.id))]}),N.jsxs("div",{className:"space-y-4",children:[N.jsx("h3",{className:"text-xl font-bold text-center mb-4",children:" "}),u.map(f=>N.jsx(it.div,{whileHover:{scale:i.includes(f.id)?1:1.02},whileTap:{scale:.98},animate:a===f.id?{x:[0,-10,10,-10,10,0]}:{},children:N.jsx(Dn,{className:`cursor-pointer transition-all border-2 ${i.includes(f.id)?"bg-success/20 border-success opacity-50":a===f.id?"border-destructive bg-destructive/10":"hover:border-secondary/50"}`,onClick:()=>c(f.id),children:N.jsx(ar,{className:"p-4 text-center",children:N.jsx("span",{className:"text-lg font-medium",children:f.image})})})},f.id))]})]}),N.jsx(tm,{children:i.length===t.length&&N.jsx(it.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},className:"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm z-50",children:N.jsxs(Dn,{className:"p-8 text-center",children:[N.jsx("div",{className:"text-6xl mb-4",children:""}),N.jsx("h2",{className:"text-3xl font-bold mb-2",children:"!"}),N.jsx("p",{className:"text-xl text-muted-foreground",children:"   "})]})})})]})},Cle=({questions:t,onComplete:e})=>{const[n,r]=k.useState(0),[i,o]=k.useState(0),[a,s]=k.useState(null),[u,l]=k.useState(!1),[c,f]=k.useState(!1),h=t[n],d=v=>{if(u)return;s(v);const m=v===h.correctIndex;f(m),l(!0),m&&o(g=>g+1)},p=()=>{n<t.length-1?(r(v=>v+1),s(null),l(!1)):e(i+0)};return N.jsxs("div",{className:"max-w-2xl mx-auto",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("h2",{className:"text-2xl font-bold mb-2",children:"   "}),N.jsxs("p",{className:"text-muted-foreground text-lg",children:[" ",n+1,"  ",t.length]}),N.jsx("div",{className:"mt-4 flex justify-center gap-2",children:t.map((v,m)=>N.jsx("div",{className:`w-4 h-4 rounded-full transition-all ${m<n?"bg-success":m===n?"bg-primary":"bg-muted"}`},m))})]}),N.jsx(tm,{mode:"wait",children:N.jsx(it.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:N.jsx(Dn,{className:"border-2 shadow-xl",children:N.jsxs(ar,{className:"p-6",children:[N.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:h.question}),N.jsx("div",{className:"space-y-3",children:h.options.map((v,m)=>N.jsx(it.div,{whileHover:{scale:u?1:1.02},whileTap:{scale:.98},children:N.jsxs(Ar,{variant:"outline",className:`w-full py-6 text-lg justify-start transition-all ${u?m===h.correctIndex?"bg-success/20 border-success text-success-foreground":a===m?"bg-destructive/20 border-destructive":"":a===m?"border-primary bg-primary/10":""}`,onClick:()=>d(m),disabled:u,children:[N.jsx("span",{className:"ml-3 text-xl",children:m===0?"":m===1?"":m===2?"":""}),v]})},m))}),u&&N.jsxs(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center",children:[N.jsx("div",{className:`text-4xl mb-2 ${c?"animate-bounce-in":"animate-wiggle"}`,children:c?"":""}),N.jsx("p",{className:`text-xl font-bold ${c?"text-success":"text-destructive"}`,children:c?" ! ":" "}),!c&&N.jsxs("p",{className:"text-muted-foreground mt-2",children:[" : ",h.options[h.correctIndex]]}),N.jsx(Ar,{onClick:p,className:"mt-4 btn-game gradient-primary",children:n<t.length-1?"  ":" "})]})]})})},n)}),N.jsx("div",{className:"mt-6 text-center",children:N.jsxs("p",{className:"text-xl font-bold",children:[": ",N.jsx("span",{className:"text-success",children:i})," / ",t.length]})})]})},Ale=({questions:t,onComplete:e})=>{const[n,r]=k.useState(0),[i,o]=k.useState(0),[a,s]=k.useState(null),[u,l]=k.useState(!1),[c,f]=k.useState(!1),h=t[n],d=h.sentence.split("___"),p=m=>{if(u)return;s(m);const g=m===h.correctIndex;f(g),l(!0),g&&o(y=>y+1)},v=()=>{n<t.length-1?(r(m=>m+1),s(null),l(!1)):e(i)};return N.jsxs("div",{className:"max-w-2xl mx-auto",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("h2",{className:"text-2xl font-bold mb-2",children:"  "}),N.jsxs("p",{className:"text-muted-foreground text-lg",children:[" ",n+1,"  ",t.length]}),N.jsx("div",{className:"mt-4 flex justify-center gap-2",children:t.map((m,g)=>N.jsx("div",{className:`w-4 h-4 rounded-full transition-all ${g<n?"bg-success":g===n?"bg-primary":"bg-muted"}`},g))})]}),N.jsx(tm,{mode:"wait",children:N.jsx(it.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:N.jsx(Dn,{className:"border-2 shadow-xl",children:N.jsxs(ar,{className:"p-6",children:[N.jsxs("div",{className:"text-xl font-medium mb-8 text-center leading-relaxed bg-muted/50 p-6 rounded-xl",children:[d[0],N.jsx("span",{className:`mx-2 px-4 py-1 rounded-lg font-bold ${u?c?"bg-success text-success-foreground":"bg-destructive text-destructive-foreground":"bg-primary/20 text-primary border-2 border-dashed border-primary"}`,children:u?h.options[h.correctIndex]:""}),d[1]]}),N.jsx("div",{className:"grid grid-cols-2 gap-3",children:h.options.map((m,g)=>N.jsx(it.div,{whileHover:{scale:u?1:1.02},whileTap:{scale:.98},children:N.jsx(Ar,{variant:"outline",className:`w-full py-6 text-lg transition-all ${u?g===h.correctIndex?"bg-success/20 border-success":a===g?"bg-destructive/20 border-destructive":"":a===g?"border-primary bg-primary/10":""}`,onClick:()=>p(g),disabled:u,children:m})},g))}),u&&N.jsxs(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center",children:[N.jsx("div",{className:`text-4xl mb-2 ${c?"animate-bounce-in":"animate-wiggle"}`,children:c?"":""}),N.jsx("p",{className:`text-xl font-bold ${c?"text-success":"text-destructive"}`,children:c?" ! ":" "}),N.jsx(Ar,{onClick:v,className:"mt-4 btn-game gradient-primary",children:n<t.length-1?"  ":" "})]})]})})},n)}),N.jsx("div",{className:"mt-6 text-center",children:N.jsxs("p",{className:"text-xl font-bold",children:[": ",N.jsx("span",{className:"text-success",children:i})," / ",t.length]})})]})};function Tle(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return k.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const yw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Mh(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function tP(t){return"nodeType"in t}function ai(t){var e,n;return t?Mh(t)?t:tP(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function nP(t){const{Document:e}=ai(t);return t instanceof e}function om(t){return Mh(t)?!1:t instanceof ai(t).HTMLElement}function RW(t){return t instanceof ai(t).SVGElement}function $h(t){return t?Mh(t)?t.document:tP(t)?nP(t)?t:om(t)||RW(t)?t.ownerDocument:document:document:document}const ga=yw?k.useLayoutEffect:k.useEffect;function rP(t){const e=k.useRef(t);return ga(()=>{e.current=t}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function Ple(){const t=k.useRef(null),e=k.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=k.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Jp(t,e){e===void 0&&(e=[t]);const n=k.useRef(t);return ga(()=>{n.current!==t&&(n.current=t)},e),n}function am(t,e){const n=k.useRef();return k.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function u0(t){const e=rP(t),n=k.useRef(null),r=k.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function ZE(t){const e=k.useRef();return k.useEffect(()=>{e.current=t},[t]),e.current}let r_={};function sm(t,e){return k.useMemo(()=>{if(e)return e;const n=r_[t]==null?0:r_[t]+1;return r_[t]=n,t+"-"+n},[t,e])}function IW(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,a)=>{const s=Object.entries(a);for(const[u,l]of s){const c=o[u];c!=null&&(o[u]=c+t*l)}return o},{...e})}}const gf=IW(1),Qp=IW(-1);function Ole(t){return"clientX"in t&&"clientY"in t}function iP(t){if(!t)return!1;const{KeyboardEvent:e}=ai(t.target);return e&&t instanceof e}function kle(t){if(!t)return!1;const{TouchEvent:e}=ai(t.target);return e&&t instanceof e}function eC(t){if(kle(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Ole(t)?{x:t.clientX,y:t.clientY}:null}const Zp=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Zp.Translate.toString(t),Zp.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),rM="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Rle(t){return t.matches(rM)?t:t.querySelector(rM)}const Ile={display:"none"};function Dle(t){let{id:e,value:n}=t;return V.createElement("div",{id:e,style:Ile},n)}function Nle(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return V.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Mle(){const[t,e]=k.useState("");return{announce:k.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const DW=k.createContext(null);function $le(t){const e=k.useContext(DW);k.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function jle(){const[t]=k.useState(()=>new Set),e=k.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[k.useCallback(r=>{let{type:i,event:o}=r;t.forEach(a=>{var s;return(s=a[i])==null?void 0:s.call(a,o)})},[t]),e]}const Lle={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fle={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Ble(t){let{announcements:e=Fle,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Lle}=t;const{announce:o,announcement:a}=Mle(),s=sm("DndLiveRegion"),[u,l]=k.useState(!1);if(k.useEffect(()=>{l(!0)},[]),$le(k.useMemo(()=>({onDragStart(f){let{active:h}=f;o(e.onDragStart({active:h}))},onDragMove(f){let{active:h,over:d}=f;e.onDragMove&&o(e.onDragMove({active:h,over:d}))},onDragOver(f){let{active:h,over:d}=f;o(e.onDragOver({active:h,over:d}))},onDragEnd(f){let{active:h,over:d}=f;o(e.onDragEnd({active:h,over:d}))},onDragCancel(f){let{active:h,over:d}=f;o(e.onDragCancel({active:h,over:d}))}}),[o,e])),!u)return null;const c=V.createElement(V.Fragment,null,V.createElement(Dle,{id:r,value:i.draggable}),V.createElement(Nle,{id:s,announcement:a}));return n?ea.createPortal(c,n):c}var Nn;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Nn||(Nn={}));function l0(){}function iM(t,e){return k.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Ule(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return k.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Io=Object.freeze({x:0,y:0});function NW(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function MW(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function Vle(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function oM(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function $W(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function aM(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Wle=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=aM(e,e.left,e.top),o=[];for(const a of r){const{id:s}=a,u=n.get(s);if(u){const l=NW(aM(u),i);o.push({id:s,data:{droppableContainer:a,value:l}})}}return o.sort(MW)},zle=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=oM(e),o=[];for(const a of r){const{id:s}=a,u=n.get(s);if(u){const l=oM(u),c=i.reduce((h,d,p)=>h+NW(l[p],d),0),f=Number((c/4).toFixed(4));o.push({id:s,data:{droppableContainer:a,value:f}})}}return o.sort(MW)};function Hle(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),o=Math.min(e.top+e.height,t.top+t.height),a=i-r,s=o-n;if(r<i&&n<o){const u=e.width*e.height,l=t.width*t.height,c=a*s,f=c/(u+l-c);return Number(f.toFixed(4))}return 0}const Gle=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const o of r){const{id:a}=o,s=n.get(a);if(s){const u=Hle(s,e);u>0&&i.push({id:a,data:{droppableContainer:o,value:u}})}}return i.sort(Vle)};function qle(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function jW(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Io}function Kle(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((a,s)=>({...a,top:a.top+t*s.y,bottom:a.bottom+t*s.y,left:a.left+t*s.x,right:a.right+t*s.x}),{...n})}}const Xle=Kle(1);function Yle(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Jle(t,e,n){const r=Yle(e);if(!r)return t;const{scaleX:i,scaleY:o,x:a,y:s}=r,u=t.left-a-(1-i)*parseFloat(n),l=t.top-s-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),c=i?t.width/i:t.width,f=o?t.height/o:t.height;return{width:c,height:f,top:l,right:u+c,bottom:l+f,left:u}}const Qle={ignoreTransform:!1};function jh(t,e){e===void 0&&(e=Qle);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:l,transformOrigin:c}=ai(t).getComputedStyle(t);l&&(n=Jle(n,l,c))}const{top:r,left:i,width:o,height:a,bottom:s,right:u}=n;return{top:r,left:i,width:o,height:a,bottom:s,right:u}}function sM(t){return jh(t,{ignoreTransform:!0})}function Zle(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function ece(t,e){return e===void 0&&(e=ai(t).getComputedStyle(t)),e.position==="fixed"}function tce(t,e){e===void 0&&(e=ai(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=e[i];return typeof o=="string"?n.test(o):!1})}function bw(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(nP(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!om(i)||RW(i)||n.includes(i))return n;const o=ai(t).getComputedStyle(i);return i!==t&&tce(i,o)&&n.push(i),ece(i,o)?n:r(i.parentNode)}return t?r(t):n}function LW(t){const[e]=bw(t,1);return e??null}function i_(t){return!yw||!t?null:Mh(t)?t:tP(t)?nP(t)||t===$h(t).scrollingElement?window:om(t)?t:null:null}function FW(t){return Mh(t)?t.scrollX:t.scrollLeft}function BW(t){return Mh(t)?t.scrollY:t.scrollTop}function tC(t){return{x:FW(t),y:BW(t)}}var Kn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Kn||(Kn={}));function UW(t){return!yw||!t?!1:t===document.scrollingElement}function VW(t){const e={x:0,y:0},n=UW(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,o=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,s=t.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:a,isRight:s,maxScroll:r,minScroll:e}}const nce={x:.2,y:.2};function rce(t,e,n,r,i){let{top:o,left:a,right:s,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=nce);const{isTop:l,isBottom:c,isLeft:f,isRight:h}=VW(t),d={x:0,y:0},p={x:0,y:0},v={height:e.height*i.y,width:e.width*i.x};return!l&&o<=e.top+v.height?(d.y=Kn.Backward,p.y=r*Math.abs((e.top+v.height-o)/v.height)):!c&&u>=e.bottom-v.height&&(d.y=Kn.Forward,p.y=r*Math.abs((e.bottom-v.height-u)/v.height)),!h&&s>=e.right-v.width?(d.x=Kn.Forward,p.x=r*Math.abs((e.right-v.width-s)/v.width)):!f&&a<=e.left+v.width&&(d.x=Kn.Backward,p.x=r*Math.abs((e.left+v.width-a)/v.width)),{direction:d,speed:p}}function ice(t){if(t===document.scrollingElement){const{innerWidth:o,innerHeight:a}=window;return{top:0,left:0,right:o,bottom:a,width:o,height:a}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function WW(t){return t.reduce((e,n)=>gf(e,tC(n)),Io)}function oce(t){return t.reduce((e,n)=>e+FW(n),0)}function ace(t){return t.reduce((e,n)=>e+BW(n),0)}function sce(t,e){if(e===void 0&&(e=jh),!t)return;const{top:n,left:r,bottom:i,right:o}=e(t);LW(t)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const uce=[["x",["left","right"],oce],["y",["top","bottom"],ace]];let oP=class{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=bw(n),i=WW(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[o,a,s]of uce)for(const u of a)Object.defineProperty(this,u,{get:()=>{const l=s(r),c=i[o]-l;return this.rect[u]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}};class ap{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function lce(t){const{EventTarget:e}=ai(t);return t instanceof e?t:$h(t)}function o_(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var ji;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ji||(ji={}));function uM(t){t.preventDefault()}function cce(t){t.stopPropagation()}var rt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(rt||(rt={}));const zW={start:[rt.Space,rt.Enter],cancel:[rt.Esc],end:[rt.Space,rt.Enter,rt.Tab]},fce=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case rt.Right:return{...n,x:n.x+25};case rt.Left:return{...n,x:n.x-25};case rt.Down:return{...n,y:n.y+25};case rt.Up:return{...n,y:n.y-25}}};class aP{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ap($h(n)),this.windowListeners=new ap(ai(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ji.Resize,this.handleCancel),this.windowListeners.add(ji.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ji.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&sce(r),n(Io)}handleKeyDown(e){if(iP(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=zW,coordinateGetter:a=fce,scrollBehavior:s="smooth"}=i,{code:u}=e;if(o.end.includes(u)){this.handleEnd(e);return}if(o.cancel.includes(u)){this.handleCancel(e);return}const{collisionRect:l}=r.current,c=l?{x:l.left,y:l.top}:Io;this.referenceCoordinates||(this.referenceCoordinates=c);const f=a(e,{active:n,context:r.current,currentCoordinates:c});if(f){const h=Qp(f,c),d={x:0,y:0},{scrollableAncestors:p}=r.current;for(const v of p){const m=e.code,{isTop:g,isRight:y,isLeft:b,isBottom:_,maxScroll:x,minScroll:S}=VW(v),E=ice(v),C={x:Math.min(m===rt.Right?E.right-E.width/2:E.right,Math.max(m===rt.Right?E.left:E.left+E.width/2,f.x)),y:Math.min(m===rt.Down?E.bottom-E.height/2:E.bottom,Math.max(m===rt.Down?E.top:E.top+E.height/2,f.y))},A=m===rt.Right&&!y||m===rt.Left&&!b,T=m===rt.Down&&!_||m===rt.Up&&!g;if(A&&C.x!==f.x){const P=v.scrollLeft+h.x,R=m===rt.Right&&P<=x.x||m===rt.Left&&P>=S.x;if(R&&!h.y){v.scrollTo({left:P,behavior:s});return}R?d.x=v.scrollLeft-P:d.x=m===rt.Right?v.scrollLeft-x.x:v.scrollLeft-S.x,d.x&&v.scrollBy({left:-d.x,behavior:s});break}else if(T&&C.y!==f.y){const P=v.scrollTop+h.y,R=m===rt.Down&&P<=x.y||m===rt.Up&&P>=S.y;if(R&&!h.x){v.scrollTo({top:P,behavior:s});return}R?d.y=v.scrollTop-P:d.y=m===rt.Down?v.scrollTop-x.y:v.scrollTop-S.y,d.y&&v.scrollBy({top:-d.y,behavior:s});break}}this.handleMove(e,gf(Qp(f,this.referenceCoordinates),d))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}aP.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=zW,onActivation:i}=e,{active:o}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const s=o.activatorNode.current;return s&&t.target!==s?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function lM(t){return!!(t&&"distance"in t)}function cM(t){return!!(t&&"delay"in t)}class sP{constructor(e,n,r){var i;r===void 0&&(r=lce(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:o}=e,{target:a}=o;this.props=e,this.events=n,this.document=$h(a),this.documentListeners=new ap(this.document),this.listeners=new ap(r),this.windowListeners=new ap(ai(a)),this.initialCoordinates=(i=eC(o))!=null?i:Io,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ji.Resize,this.handleCancel),this.windowListeners.add(ji.DragStart,uM),this.windowListeners.add(ji.VisibilityChange,this.handleCancel),this.windowListeners.add(ji.ContextMenu,uM),this.documentListeners.add(ji.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(cM(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(lM(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ji.Click,cce,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ji.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:a,options:{activationConstraint:s}}=o;if(!i)return;const u=(n=eC(e))!=null?n:Io,l=Qp(i,u);if(!r&&s){if(lM(s)){if(s.tolerance!=null&&o_(l,s.tolerance))return this.handleCancel();if(o_(l,s.distance))return this.handleStart()}if(cM(s)&&o_(l,s.tolerance))return this.handleCancel();this.handlePending(s,l);return}e.cancelable&&e.preventDefault(),a(u)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===rt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const hce={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class uP extends sP{constructor(e){const{event:n}=e,r=$h(n.target);super(e,hce,r)}}uP.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const dce={move:{name:"mousemove"},end:{name:"mouseup"}};var nC;(function(t){t[t.RightClick=2]="RightClick"})(nC||(nC={}));class pce extends sP{constructor(e){super(e,dce,$h(e.event.target))}}pce.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===nC.RightClick?!1:(r==null||r({event:n}),!0)}}];const a_={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class vce extends sP{constructor(e){super(e,a_)}static setup(){return window.addEventListener(a_.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(a_.move.name,e)};function e(){}}}vce.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var sp;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(sp||(sp={}));var c0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(c0||(c0={}));function mce(t){let{acceleration:e,activator:n=sp.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:a=5,order:s=c0.TreeOrder,pointerCoordinates:u,scrollableAncestors:l,scrollableAncestorRects:c,delta:f,threshold:h}=t;const d=yce({delta:f,disabled:!o}),[p,v]=Ple(),m=k.useRef({x:0,y:0}),g=k.useRef({x:0,y:0}),y=k.useMemo(()=>{switch(n){case sp.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case sp.DraggableRect:return i}},[n,i,u]),b=k.useRef(null),_=k.useCallback(()=>{const S=b.current;if(!S)return;const E=m.current.x*g.current.x,C=m.current.y*g.current.y;S.scrollBy(E,C)},[]),x=k.useMemo(()=>s===c0.TreeOrder?[...l].reverse():l,[s,l]);k.useEffect(()=>{if(!o||!l.length||!y){v();return}for(const S of x){if((r==null?void 0:r(S))===!1)continue;const E=l.indexOf(S),C=c[E];if(!C)continue;const{direction:A,speed:T}=rce(S,C,y,e,h);for(const P of["x","y"])d[P][A[P]]||(T[P]=0,A[P]=0);if(T.x>0||T.y>0){v(),b.current=S,p(_,a),m.current=T,g.current=A;return}}m.current={x:0,y:0},g.current={x:0,y:0},v()},[e,_,r,v,o,a,JSON.stringify(y),JSON.stringify(d),p,l,x,c,JSON.stringify(h)])}const gce={x:{[Kn.Backward]:!1,[Kn.Forward]:!1},y:{[Kn.Backward]:!1,[Kn.Forward]:!1}};function yce(t){let{delta:e,disabled:n}=t;const r=ZE(e);return am(i=>{if(n||!r||!i)return gce;const o={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Kn.Backward]:i.x[Kn.Backward]||o.x===-1,[Kn.Forward]:i.x[Kn.Forward]||o.x===1},y:{[Kn.Backward]:i.y[Kn.Backward]||o.y===-1,[Kn.Forward]:i.y[Kn.Forward]||o.y===1}}},[n,e,r])}function bce(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return am(i=>{var o;return e==null?null:(o=r??i)!=null?o:null},[r,e])}function wce(t,e){return k.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...o]},[]),[t,e])}var ev;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ev||(ev={}));var rC;(function(t){t.Optimized="optimized"})(rC||(rC={}));const fM=new Map;function xce(t,e){let{dragging:n,dependencies:r,config:i}=e;const[o,a]=k.useState(null),{frequency:s,measure:u,strategy:l}=i,c=k.useRef(t),f=m(),h=Jp(f),d=k.useCallback(function(g){g===void 0&&(g=[]),!h.current&&a(y=>y===null?g:y.concat(g.filter(b=>!y.includes(b))))},[h]),p=k.useRef(null),v=am(g=>{if(f&&!n)return fM;if(!g||g===fM||c.current!==t||o!=null){const y=new Map;for(let b of t){if(!b)continue;if(o&&o.length>0&&!o.includes(b.id)&&b.rect.current){y.set(b.id,b.rect.current);continue}const _=b.node.current,x=_?new oP(u(_),_):null;b.rect.current=x,x&&y.set(b.id,x)}return y}return g},[t,o,n,f,u]);return k.useEffect(()=>{c.current=t},[t]),k.useEffect(()=>{f||d()},[n,f]),k.useEffect(()=>{o&&o.length>0&&a(null)},[JSON.stringify(o)]),k.useEffect(()=>{f||typeof s!="number"||p.current!==null||(p.current=setTimeout(()=>{d(),p.current=null},s))},[s,f,d,...r]),{droppableRects:v,measureDroppableContainers:d,measuringScheduled:o!=null};function m(){switch(l){case ev.Always:return!1;case ev.BeforeDragging:return n;default:return!n}}}function HW(t,e){return am(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function _ce(t,e){return HW(t,e)}function Sce(t){let{callback:e,disabled:n}=t;const r=rP(e),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return k.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function ww(t){let{callback:e,disabled:n}=t;const r=rP(e),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return k.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Ece(t){return new oP(jh(t),t)}function hM(t,e,n){e===void 0&&(e=Ece);const[r,i]=k.useState(null);function o(){i(u=>{if(!t)return null;if(t.isConnected===!1){var l;return(l=u??n)!=null?l:null}const c=e(t);return JSON.stringify(u)===JSON.stringify(c)?u:c})}const a=Sce({callback(u){if(t)for(const l of u){const{type:c,target:f}=l;if(c==="childList"&&f instanceof HTMLElement&&f.contains(t)){o();break}}}}),s=ww({callback:o});return ga(()=>{o(),t?(s==null||s.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),a==null||a.disconnect())},[t]),r}function Cce(t){const e=HW(t);return jW(t,e)}const dM=[];function Ace(t){const e=k.useRef(t),n=am(r=>t?r&&r!==dM&&t&&e.current&&t.parentNode===e.current.parentNode?r:bw(t):dM,[t]);return k.useEffect(()=>{e.current=t},[t]),n}function Tce(t){const[e,n]=k.useState(null),r=k.useRef(t),i=k.useCallback(o=>{const a=i_(o.target);a&&n(s=>s?(s.set(a,tC(a)),new Map(s)):null)},[]);return k.useEffect(()=>{const o=r.current;if(t!==o){a(o);const s=t.map(u=>{const l=i_(u);return l?(l.addEventListener("scroll",i,{passive:!0}),[l,tC(l)]):null}).filter(u=>u!=null);n(s.length?new Map(s):null),r.current=t}return()=>{a(t),a(o)};function a(s){s.forEach(u=>{const l=i_(u);l==null||l.removeEventListener("scroll",i)})}},[i,t]),k.useMemo(()=>t.length?e?Array.from(e.values()).reduce((o,a)=>gf(o,a),Io):WW(t):Io,[t,e])}function pM(t,e){e===void 0&&(e=[]);const n=k.useRef(null);return k.useEffect(()=>{n.current=null},e),k.useEffect(()=>{const r=t!==Io;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Qp(t,n.current):Io}function Pce(t){k.useEffect(()=>{if(!yw)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function Oce(t,e){return k.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=a=>{o(a,e)},n},{}),[t,e])}function GW(t){return k.useMemo(()=>t?Zle(t):null,[t])}const vM=[];function kce(t,e){e===void 0&&(e=jh);const[n]=t,r=GW(n?ai(n):null),[i,o]=k.useState(vM);function a(){o(()=>t.length?t.map(u=>UW(u)?r:new oP(e(u),u)):vM)}const s=ww({callback:a});return ga(()=>{s==null||s.disconnect(),a(),t.forEach(u=>s==null?void 0:s.observe(u))},[t]),i}function Rce(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return om(e)?e:t}function Ice(t){let{measure:e}=t;const[n,r]=k.useState(null),i=k.useCallback(l=>{for(const{target:c}of l)if(om(c)){r(f=>{const h=e(c);return f?{...f,width:h.width,height:h.height}:h});break}},[e]),o=ww({callback:i}),a=k.useCallback(l=>{const c=Rce(l);o==null||o.disconnect(),c&&(o==null||o.observe(c)),r(c?e(c):null)},[e,o]),[s,u]=u0(a);return k.useMemo(()=>({nodeRef:s,rect:n,setRef:u}),[n,s,u])}const Dce=[{sensor:uP,options:{}},{sensor:aP,options:{}}],Nce={current:{}},hy={draggable:{measure:sM},droppable:{measure:sM,strategy:ev.WhileDragging,frequency:rC.Optimized},dragOverlay:{measure:jh}};class up extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Mce={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new up,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:l0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:hy,measureDroppableContainers:l0,windowRect:null,measuringScheduled:!1},$ce={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:l0,draggableNodes:new Map,over:null,measureDroppableContainers:l0},xw=k.createContext($ce),qW=k.createContext(Mce);function jce(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new up}}}function Lce(t,e){switch(e.type){case Nn.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Nn.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Nn.DragEnd:case Nn.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Nn.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new up(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Nn.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const a=new up(t.droppable.containers);return a.set(n,{...o,disabled:i}),{...t,droppable:{...t.droppable,containers:a}}}case Nn.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new up(t.droppable.containers);return o.delete(n),{...t,droppable:{...t.droppable,containers:o}}}default:return t}}function Fce(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=k.useContext(xw),o=ZE(r),a=ZE(n==null?void 0:n.id);return k.useEffect(()=>{if(!e&&!r&&o&&a!=null){if(!iP(o)||document.activeElement===o.target)return;const s=i.get(a);if(!s)return;const{activatorNode:u,node:l}=s;if(!u.current&&!l.current)return;requestAnimationFrame(()=>{for(const c of[u.current,l.current]){if(!c)continue;const f=Rle(c);if(f){f.focus();break}}})}},[r,e,i,a,o]),null}function Bce(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,o)=>o({transform:i,...r}),n):n}function Uce(t){return k.useMemo(()=>({draggable:{...hy.draggable,...t==null?void 0:t.draggable},droppable:{...hy.droppable,...t==null?void 0:t.droppable},dragOverlay:{...hy.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function Vce(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const o=k.useRef(!1),{x:a,y:s}=typeof i=="boolean"?{x:i,y:i}:i;ga(()=>{if(!a&&!s||!e){o.current=!1;return}if(o.current||!r)return;const l=e==null?void 0:e.node.current;if(!l||l.isConnected===!1)return;const c=n(l),f=jW(c,r);if(a||(f.x=0),s||(f.y=0),o.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=LW(l);h&&h.scrollBy({top:f.y,left:f.x})}},[e,a,s,r,n])}const KW=k.createContext({...Io,scaleX:1,scaleY:1});var Ms;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ms||(Ms={}));const Wce=k.memo(function(e){var n,r,i,o;let{id:a,accessibility:s,autoScroll:u=!0,children:l,sensors:c=Dce,collisionDetection:f=Gle,measuring:h,modifiers:d,...p}=e;const v=k.useReducer(Lce,void 0,jce),[m,g]=v,[y,b]=jle(),[_,x]=k.useState(Ms.Uninitialized),S=_===Ms.Initialized,{draggable:{active:E,nodes:C,translate:A},droppable:{containers:T}}=m,P=E!=null?C.get(E):null,R=k.useRef({initial:null,translated:null}),I=k.useMemo(()=>{var nt;return E!=null?{id:E,data:(nt=P==null?void 0:P.data)!=null?nt:Nce,rect:R}:null},[E,P]),M=k.useRef(null),[B,z]=k.useState(null),[U,$]=k.useState(null),L=Jp(p,Object.values(p)),H=sm("DndDescribedBy",a),X=k.useMemo(()=>T.getEnabled(),[T]),q=Uce(h),{droppableRects:J,measureDroppableContainers:ae,measuringScheduled:fe}=xce(X,{dragging:S,dependencies:[A.x,A.y],config:q.droppable}),he=bce(C,E),de=k.useMemo(()=>U?eC(U):null,[U]),be=uc(),ne=_ce(he,q.draggable.measure);Vce({activeNode:E!=null?C.get(E):null,config:be.layoutShiftCompensation,initialRect:ne,measure:q.draggable.measure});const ue=hM(he,q.draggable.measure,ne),ce=hM(he?he.parentElement:null),Z=k.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ge=T.getNodeFor((n=Z.current.over)==null?void 0:n.id),ye=Ice({measure:q.dragOverlay.measure}),De=(r=ye.nodeRef.current)!=null?r:he,ke=S?(i=ye.rect)!=null?i:ue:null,tt=!!(ye.nodeRef.current&&ye.rect),ft=Cce(tt?null:ue),je=GW(De?ai(De):null),Ye=Ace(S?ge??he:null),st=kce(Ye),Pt=Bce(d,{transform:{x:A.x-ft.x,y:A.y-ft.y,scaleX:1,scaleY:1},activatorEvent:U,active:I,activeNodeRect:ue,containerNodeRect:ce,draggingNodeRect:ke,over:Z.current.over,overlayNodeRect:ye.rect,scrollableAncestors:Ye,scrollableAncestorRects:st,windowRect:je}),Et=de?gf(de,A):null,fr=Tce(Ye),on=pM(fr),fn=pM(fr,[ue]),Kt=gf(Pt,on),Xt=ke?Xle(ke,Pt):null,ui=I&&Xt?f({active:I,collisionRect:Xt,droppableRects:J,droppableContainers:X,pointerCoordinates:Et}):null,no=$W(ui,"id"),[kr,Aa]=k.useState(null),Rr=tt?Pt:gf(Pt,fn),hr=qle(Rr,(o=kr==null?void 0:kr.rect)!=null?o:null,ue),Wr=k.useRef(null),dr=k.useCallback((nt,Mt)=>{let{sensor:hn,options:Ie}=Mt;if(M.current==null)return;const Ve=C.get(M.current);if(!Ve)return;const Ke=nt.nativeEvent,gt=new hn({active:M.current,activeNode:Ve,event:Ke,options:Ie,context:Z,onAbort(_t){if(!C.get(_t))return;const{onDragAbort:zt}=L.current,dn={id:_t};zt==null||zt(dn),y({type:"onDragAbort",event:dn})},onPending(_t,yn,zt,dn){if(!C.get(_t))return;const{onDragPending:ro}=L.current,jo={id:_t,constraint:yn,initialCoordinates:zt,offset:dn};ro==null||ro(jo),y({type:"onDragPending",event:jo})},onStart(_t){const yn=M.current;if(yn==null)return;const zt=C.get(yn);if(!zt)return;const{onDragStart:dn}=L.current,Ta={activatorEvent:Ke,active:{id:yn,data:zt.data,rect:R}};ea.unstable_batchedUpdates(()=>{dn==null||dn(Ta),x(Ms.Initializing),g({type:Nn.DragStart,initialCoordinates:_t,active:yn}),y({type:"onDragStart",event:Ta}),z(Wr.current),$(Ke)})},onMove(_t){g({type:Nn.DragMove,coordinates:_t})},onEnd:gn(Nn.DragEnd),onCancel:gn(Nn.DragCancel)});Wr.current=gt;function gn(_t){return async function(){const{active:zt,collisions:dn,over:Ta,scrollAdjustedTranslate:ro}=Z.current;let jo=null;if(zt&&ro){const{cancelDrop:zr}=L.current;jo={activatorEvent:Ke,active:zt,collisions:dn,delta:ro,over:Ta},_t===Nn.DragEnd&&typeof zr=="function"&&await Promise.resolve(zr(jo))&&(_t=Nn.DragCancel)}M.current=null,ea.unstable_batchedUpdates(()=>{g({type:_t}),x(Ms.Uninitialized),Aa(null),z(null),$(null),Wr.current=null;const zr=_t===Nn.DragEnd?"onDragEnd":"onDragCancel";if(jo){const lc=L.current[zr];lc==null||lc(jo),y({type:zr,event:jo})}})}}},[C]),sc=k.useCallback((nt,Mt)=>(hn,Ie)=>{const Ve=hn.nativeEvent,Ke=C.get(Ie);if(M.current!==null||!Ke||Ve.dndKit||Ve.defaultPrevented)return;const gt={active:Ke};nt(hn,Mt.options,gt)===!0&&(Ve.dndKit={capturedBy:Mt.sensor},M.current=Ie,dr(hn,Mt))},[C,dr]),bs=wce(c,sc);Pce(c),ga(()=>{ue&&_===Ms.Initializing&&x(Ms.Initialized)},[ue,_]),k.useEffect(()=>{const{onDragMove:nt}=L.current,{active:Mt,activatorEvent:hn,collisions:Ie,over:Ve}=Z.current;if(!Mt||!hn)return;const Ke={active:Mt,activatorEvent:hn,collisions:Ie,delta:{x:Kt.x,y:Kt.y},over:Ve};ea.unstable_batchedUpdates(()=>{nt==null||nt(Ke),y({type:"onDragMove",event:Ke})})},[Kt.x,Kt.y]),k.useEffect(()=>{const{active:nt,activatorEvent:Mt,collisions:hn,droppableContainers:Ie,scrollAdjustedTranslate:Ve}=Z.current;if(!nt||M.current==null||!Mt||!Ve)return;const{onDragOver:Ke}=L.current,gt=Ie.get(no),gn=gt&&gt.rect.current?{id:gt.id,rect:gt.rect.current,data:gt.data,disabled:gt.disabled}:null,_t={active:nt,activatorEvent:Mt,collisions:hn,delta:{x:Ve.x,y:Ve.y},over:gn};ea.unstable_batchedUpdates(()=>{Aa(gn),Ke==null||Ke(_t),y({type:"onDragOver",event:_t})})},[no]),ga(()=>{Z.current={activatorEvent:U,active:I,activeNode:he,collisionRect:Xt,collisions:ui,droppableRects:J,draggableNodes:C,draggingNode:De,draggingNodeRect:ke,droppableContainers:T,over:kr,scrollableAncestors:Ye,scrollAdjustedTranslate:Kt},R.current={initial:ke,translated:Xt}},[I,he,ui,Xt,C,De,ke,J,T,kr,Ye,Kt]),mce({...be,delta:A,draggingRect:Xt,pointerCoordinates:Et,scrollableAncestors:Ye,scrollableAncestorRects:st});const ju=k.useMemo(()=>({active:I,activeNode:he,activeNodeRect:ue,activatorEvent:U,collisions:ui,containerNodeRect:ce,dragOverlay:ye,draggableNodes:C,droppableContainers:T,droppableRects:J,over:kr,measureDroppableContainers:ae,scrollableAncestors:Ye,scrollableAncestorRects:st,measuringConfiguration:q,measuringScheduled:fe,windowRect:je}),[I,he,ue,U,ui,ce,ye,C,T,J,kr,ae,Ye,st,q,fe,je]),$o=k.useMemo(()=>({activatorEvent:U,activators:bs,active:I,activeNodeRect:ue,ariaDescribedById:{draggable:H},dispatch:g,draggableNodes:C,over:kr,measureDroppableContainers:ae}),[U,bs,I,ue,g,H,C,kr,ae]);return V.createElement(DW.Provider,{value:b},V.createElement(xw.Provider,{value:$o},V.createElement(qW.Provider,{value:ju},V.createElement(KW.Provider,{value:hr},l)),V.createElement(Fce,{disabled:(s==null?void 0:s.restoreFocus)===!1})),V.createElement(Ble,{...s,hiddenTextDescribedById:H}));function uc(){const nt=(B==null?void 0:B.autoScrollEnabled)===!1,Mt=typeof u=="object"?u.enabled===!1:u===!1,hn=S&&!nt&&!Mt;return typeof u=="object"?{...u,enabled:hn}:{enabled:hn}}}),zce=k.createContext(null),mM="button",Hce="Draggable";function Gce(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const o=sm(Hce),{activators:a,activatorEvent:s,active:u,activeNodeRect:l,ariaDescribedById:c,draggableNodes:f,over:h}=k.useContext(xw),{role:d=mM,roleDescription:p="draggable",tabIndex:v=0}=i??{},m=(u==null?void 0:u.id)===e,g=k.useContext(m?KW:zce),[y,b]=u0(),[_,x]=u0(),S=Oce(a,e),E=Jp(n);ga(()=>(f.set(e,{id:e,key:o,node:y,activatorNode:_,data:E}),()=>{const A=f.get(e);A&&A.key===o&&f.delete(e)}),[f,e]);const C=k.useMemo(()=>({role:d,tabIndex:v,"aria-disabled":r,"aria-pressed":m&&d===mM?!0:void 0,"aria-roledescription":p,"aria-describedby":c.draggable}),[r,d,v,m,p,c.draggable]);return{active:u,activatorEvent:s,activeNodeRect:l,attributes:C,isDragging:m,listeners:r?void 0:S,node:y,over:h,setNodeRef:b,setActivatorNodeRef:x,transform:g}}function qce(){return k.useContext(qW)}const Kce="Droppable",Xce={timeout:25};function Yce(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const o=sm(Kce),{active:a,dispatch:s,over:u,measureDroppableContainers:l}=k.useContext(xw),c=k.useRef({disabled:n}),f=k.useRef(!1),h=k.useRef(null),d=k.useRef(null),{disabled:p,updateMeasurementsFor:v,timeout:m}={...Xce,...i},g=Jp(v??r),y=k.useCallback(()=>{if(!f.current){f.current=!0;return}d.current!=null&&clearTimeout(d.current),d.current=setTimeout(()=>{l(Array.isArray(g.current)?g.current:[g.current]),d.current=null},m)},[m]),b=ww({callback:y,disabled:p||!a}),_=k.useCallback((C,A)=>{b&&(A&&(b.unobserve(A),f.current=!1),C&&b.observe(C))},[b]),[x,S]=u0(_),E=Jp(e);return k.useEffect(()=>{!b||!x.current||(b.disconnect(),f.current=!1,b.observe(x.current))},[x,b]),k.useEffect(()=>(s({type:Nn.RegisterDroppable,element:{id:r,key:o,disabled:n,node:x,rect:h,data:E}}),()=>s({type:Nn.UnregisterDroppable,key:o,id:r})),[r]),k.useEffect(()=>{n!==c.current.disabled&&(s({type:Nn.SetDroppableDisabled,id:r,key:o,disabled:n}),c.current.disabled=n)},[r,o,n,s]),{active:a,rect:h,isOver:(u==null?void 0:u.id)===r,node:x,over:u,setNodeRef:S}}function lP(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function Jce(t,e){return t.reduce((n,r,i)=>{const o=e.get(r);return o&&(n[i]=o),n},Array(t.length))}function vg(t){return t!==null&&t>=0}function Qce(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Zce(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const XW=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const o=lP(e,r,n),a=e[i],s=o[i];return!s||!a?null:{x:s.left-a.left,y:s.top-a.top,scaleX:s.width/a.width,scaleY:s.height/a.height}},mg={scaleX:1,scaleY:1},efe=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:a}=t;const s=(e=o[n])!=null?e:r;if(!s)return null;if(i===n){const l=o[a];return l?{x:0,y:n<a?l.top+l.height-(s.top+s.height):l.top-s.top,...mg}:null}const u=tfe(o,i,n);return i>n&&i<=a?{x:0,y:-s.height-u,...mg}:i<n&&i>=a?{x:0,y:s.height+u,...mg}:{x:0,y:0,...mg}};function tfe(t,e,n){const r=t[e],i=t[e-1],o=t[e+1];return r?n<e?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const YW="Sortable",JW=V.createContext({activeIndex:-1,containerId:YW,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:XW,disabled:{draggable:!1,droppable:!1}});function nfe(t){let{children:e,id:n,items:r,strategy:i=XW,disabled:o=!1}=t;const{active:a,dragOverlay:s,droppableRects:u,over:l,measureDroppableContainers:c}=qce(),f=sm(YW,n),h=s.rect!==null,d=k.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),p=a!=null,v=a?d.indexOf(a.id):-1,m=l?d.indexOf(l.id):-1,g=k.useRef(d),y=!Qce(d,g.current),b=m!==-1&&v===-1||y,_=Zce(o);ga(()=>{y&&p&&c(d)},[y,d,p,c]),k.useEffect(()=>{g.current=d},[d]);const x=k.useMemo(()=>({activeIndex:v,containerId:f,disabled:_,disableTransforms:b,items:d,overIndex:m,useDragOverlay:h,sortedRects:Jce(d,u),strategy:i}),[v,f,_.draggable,_.droppable,b,d,m,u,h,i]);return V.createElement(JW.Provider,{value:x},e)}const rfe=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return lP(n,r,i).indexOf(e)},ife=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:o,newIndex:a,previousItems:s,previousContainerId:u,transition:l}=t;return!l||!r||s!==o&&i===a?!1:n?!0:a!==i&&e===u},ofe={duration:200,easing:"ease"},QW="transform",afe=Zp.Transition.toString({property:QW,duration:0,easing:"linear"}),sfe={roleDescription:"sortable"};function ufe(t){let{disabled:e,index:n,node:r,rect:i}=t;const[o,a]=k.useState(null),s=k.useRef(n);return ga(()=>{if(!e&&n!==s.current&&r.current){const u=i.current;if(u){const l=jh(r.current,{ignoreTransform:!0}),c={x:u.left-l.left,y:u.top-l.top,scaleX:u.width/l.width,scaleY:u.height/l.height};(c.x||c.y)&&a(c)}}n!==s.current&&(s.current=n)},[e,n,r,i]),k.useEffect(()=>{o&&a(null)},[o]),o}function lfe(t){let{animateLayoutChanges:e=ife,attributes:n,disabled:r,data:i,getNewIndex:o=rfe,id:a,strategy:s,resizeObserverConfig:u,transition:l=ofe}=t;const{items:c,containerId:f,activeIndex:h,disabled:d,disableTransforms:p,sortedRects:v,overIndex:m,useDragOverlay:g,strategy:y}=k.useContext(JW),b=cfe(r,d),_=c.indexOf(a),x=k.useMemo(()=>({sortable:{containerId:f,index:_,items:c},...i}),[f,i,_,c]),S=k.useMemo(()=>c.slice(c.indexOf(a)),[c,a]),{rect:E,node:C,isOver:A,setNodeRef:T}=Yce({id:a,data:x,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...u}}),{active:P,activatorEvent:R,activeNodeRect:I,attributes:M,setNodeRef:B,listeners:z,isDragging:U,over:$,setActivatorNodeRef:L,transform:H}=Gce({id:a,data:x,attributes:{...sfe,...n},disabled:b.draggable}),X=Tle(T,B),q=!!P,J=q&&!p&&vg(h)&&vg(m),ae=!g&&U,fe=ae&&J?H:null,de=J?fe??(s??y)({rects:v,activeNodeRect:I,activeIndex:h,overIndex:m,index:_}):null,be=vg(h)&&vg(m)?o({id:a,items:c,activeIndex:h,overIndex:m}):_,ne=P==null?void 0:P.id,ue=k.useRef({activeId:ne,items:c,newIndex:be,containerId:f}),ce=c!==ue.current.items,Z=e({active:P,containerId:f,isDragging:U,isSorting:q,id:a,index:_,items:c,newIndex:ue.current.newIndex,previousItems:ue.current.items,previousContainerId:ue.current.containerId,transition:l,wasDragging:ue.current.activeId!=null}),ge=ufe({disabled:!Z,index:_,node:C,rect:E});return k.useEffect(()=>{q&&ue.current.newIndex!==be&&(ue.current.newIndex=be),f!==ue.current.containerId&&(ue.current.containerId=f),c!==ue.current.items&&(ue.current.items=c)},[q,be,f,c]),k.useEffect(()=>{if(ne===ue.current.activeId)return;if(ne!=null&&ue.current.activeId==null){ue.current.activeId=ne;return}const De=setTimeout(()=>{ue.current.activeId=ne},50);return()=>clearTimeout(De)},[ne]),{active:P,activeIndex:h,attributes:M,data:x,rect:E,index:_,newIndex:be,items:c,isOver:A,isSorting:q,isDragging:U,listeners:z,node:C,overIndex:m,over:$,setNodeRef:X,setActivatorNodeRef:L,setDroppableNodeRef:T,setDraggableNodeRef:B,transform:ge??de,transition:ye()};function ye(){if(ge||ce&&ue.current.newIndex===_)return afe;if(!(ae&&!iP(R)||!l)&&(q||Z))return Zp.Transition.toString({...l,property:QW})}}function cfe(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function f0(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const ffe=[rt.Down,rt.Right,rt.Up,rt.Left],hfe=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:a,scrollableAncestors:s}}=e;if(ffe.includes(t.code)){if(t.preventDefault(),!n||!r)return;const u=[];o.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=i.get(f.id);if(h)switch(t.code){case rt.Down:r.top<h.top&&u.push(f);break;case rt.Up:r.top>h.top&&u.push(f);break;case rt.Left:r.left>h.left&&u.push(f);break;case rt.Right:r.left<h.left&&u.push(f);break}});const l=zle({active:n,collisionRect:r,droppableRects:i,droppableContainers:u,pointerCoordinates:null});let c=$W(l,"id");if(c===(a==null?void 0:a.id)&&l.length>1&&(c=l[1].id),c!=null){const f=o.get(n.id),h=o.get(c),d=h?i.get(h.id):null,p=h==null?void 0:h.node.current;if(p&&d&&f&&h){const m=bw(p).some((S,E)=>s[E]!==S),g=ZW(f,h),y=dfe(f,h),b=m||!g?{x:0,y:0}:{x:y?r.width-d.width:0,y:y?r.height-d.height:0},_={x:d.left,y:d.top};return b.x&&b.y?_:Qp(_,b)}}}};function ZW(t,e){return!f0(t)||!f0(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function dfe(t,e){return!f0(t)||!f0(e)||!ZW(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const pfe=({id:t,content:e,isCorrect:n,showResult:r})=>{const{attributes:i,listeners:o,setNodeRef:a,transform:s,transition:u,isDragging:l}=lfe({id:t}),c={transform:Zp.Transform.toString(s),transition:u};return N.jsx(it.div,{ref:a,style:c,...i,...o,className:`cursor-grab active:cursor-grabbing ${l?"z-50":""}`,whileHover:{scale:1.02},layout:!0,children:N.jsx(Dn,{className:`border-2 transition-all ${r?n?"bg-success/20 border-success":"bg-destructive/20 border-destructive":l?"shadow-xl border-primary":"hover:border-primary/50"}`,children:N.jsxs(ar,{className:"p-4 flex items-center gap-4",children:[N.jsx("span",{className:"text-2xl",children:""}),N.jsx("span",{className:"text-lg font-medium flex-1",children:e}),r&&N.jsx("span",{className:"text-2xl",children:n?"":""})]})})})},vfe=({items:t,onComplete:e})=>{const[n,r]=k.useState(()=>[...t].sort(()=>Math.random()-.5)),[i,o]=k.useState(!1),[a,s]=k.useState(0),u=Ule(iM(uP),iM(aP,{coordinateGetter:hfe})),l=k.useCallback(p=>{const{active:v,over:m}=p;m&&v.id!==m.id&&r(g=>{const y=g.findIndex(_=>_.id===v.id),b=g.findIndex(_=>_.id===m.id);return lP(g,y,b)})},[]),c=()=>{let p=0;n.forEach((v,m)=>{v.correctOrder===m+1&&p++}),s(p),o(!0)},f=()=>{e(a)},h=()=>{r([...t].sort(()=>Math.random()-.5)),o(!1),s(0)},d=(p,v)=>p.correctOrder===v+1;return N.jsxs("div",{className:"max-w-2xl mx-auto",children:[N.jsxs("div",{className:"text-center mb-8",children:[N.jsx("h2",{className:"text-2xl font-bold mb-2",children:"  "}),N.jsx("p",{className:"text-muted-foreground text-lg",children:"   "})]}),N.jsx(Wce,{sensors:u,collisionDetection:Wle,onDragEnd:l,children:N.jsx(nfe,{items:n.map(p=>p.id),strategy:efe,children:N.jsx("div",{className:"space-y-3",children:n.map((p,v)=>N.jsx(pfe,{id:p.id,content:p.content,isCorrect:d(p,v),showResult:i},p.id))})})}),N.jsx("div",{className:"mt-8 text-center space-y-4",children:i?N.jsxs(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[N.jsx("div",{className:`text-4xl mb-4 ${a===t.length?"animate-bounce-in":""}`,children:a===t.length?"":""}),N.jsxs("p",{className:"text-2xl font-bold mb-4",children:[": ",N.jsx("span",{className:"text-success",children:a})," / ",t.length]}),a===t.length?N.jsx(Ar,{onClick:f,className:"btn-game gradient-success text-xl",children:"!  "}):N.jsxs("div",{className:"space-x-4 space-x-reverse",children:[N.jsx(Ar,{onClick:h,variant:"outline",className:"btn-game",children:"   "}),N.jsx(Ar,{onClick:f,className:"btn-game gradient-primary",children:" "})]})]}):N.jsx(Ar,{onClick:c,className:"btn-game gradient-primary text-xl",children:"   "})})]})},mfe=({videoRef:t,currentEmotion:e,isActive:n,isLoading:r=!1,emotionsCount:i=0})=>N.jsx(it.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed bottom-4 left-4 z-40",children:N.jsxs(Dn,{className:"overflow-hidden shadow-xl border-2 border-primary/20",children:[N.jsxs("div",{className:"relative",children:[N.jsx("video",{ref:t,className:"w-32 h-24 object-cover",style:{transform:"scaleX(-1)"},autoPlay:!0,muted:!0,playsInline:!0}),r&&N.jsxs("div",{className:"absolute inset-0 bg-background/80 flex flex-col items-center justify-center",children:[N.jsx(YX,{className:"w-6 h-6 animate-spin text-primary"}),N.jsx("span",{className:"text-xs mt-1",children:" ..."})]}),!n&&!r&&N.jsx("div",{className:"absolute inset-0 bg-background/80 flex items-center justify-center",children:N.jsx("span",{className:"text-2xl",children:""})}),i>0&&N.jsx("div",{className:"absolute top-1 right-1 bg-primary text-primary-foreground text-xs px-1.5 py-0.5 rounded-full",children:i})]}),N.jsx(tm,{mode:"wait",children:e?N.jsxs(it.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-2 bg-card text-center",children:[N.jsx("span",{className:"text-2xl",children:e.emoji}),N.jsx("p",{className:"text-sm font-medium",children:e.arabicLabel}),N.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(e.confidence*100),"%"]})]},e.emotion):n?N.jsxs(it.div,{initial:{opacity:0},animate:{opacity:1},className:"p-2 bg-card text-center",children:[N.jsx("span",{className:"text-lg",children:""}),N.jsx("p",{className:"text-xs text-muted-foreground",children:" ..."})]}):null})]})});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var e6=function(t,e){return(e6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};function Do(t,e){function n(){this.constructor=t}e6(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Ee(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(c){o(c)}}function s(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(a,s)}u((r=r.apply(t,[])).next())})}function Ce(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(f){c=[6,f],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var gfe=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var i=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+i+"."),this.set(e,i)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,i=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];return yfe(r,a[0],a[1]),a.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var a=o.split(":"),s=a[0],u=a[1];e.urlFlags[s]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(s,u)})}},t}();function yfe(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function re(){return t6}var t6=null,h0=new Map,iC=new Map;function n6(t,e){var n=i6(t,e);return h0.get(n)}function bfe(t){return iC.get(t)}function gM(t){for(var e=h0.entries(),n=[];;){var r=e.next(),i=r.done,o=r.value;if(i)break;var a=o[0],s=o[1];a.split("_")[0]===t&&n.push(s)}return n}function r6(t){var e=t.kernelName,n=t.backendName,r=i6(e,n);if(h0.has(r))throw new Error("The kernel '"+e+"' for backend '"+n+"' is already registered");h0.set(r,t)}function wfe(t){var e=t.kernelName;iC.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),iC.set(e,t)}function i6(t,e){return e+"_"+t}function oC(t,e,n){return Math.max(t,Math.min(e,n))}function o6(t){return t%2==0?t:t+1}function xfe(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function W(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function mt(t,e,n){n===void 0&&(n=""),W(Jn(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function Lh(t){W(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Yf(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||ca(t)&&!n)for(var r=0;r<t.length;++r)Yf(t[r],e,n);else e.push(t);return e}function Ae(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function Jn(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function mn(t){return t%1==0}function _fe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function aC(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function yf(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function yM(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,i){var o=0,a=function(){if(t())r();else{o++;var s=e(o);n!=null&&o>=n?i():setTimeout(a,s)}};a()})}function Sfe(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var o=t.slice();return o[r]=e/n,o}function Vn(t,e){var n=e.length;return W((t=t==null?e.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),W(t.every(function(r){return mn(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function sl(t,e){for(var n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||i?null:Vn(e,t).sort(),a=0,s=0;s<t.length;++s){if(o!=null){if(o[a]===s&&t[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+t[s]+"' is not 1");(o[a]==null||o[a]>s)&&t[s]===1&&(n.push(t[s]),r.push(s)),o[a]<=s&&a++}t[s]!==1&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function tv(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function d0(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function Efe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function Cfe(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function Afe(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function ca(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function a6(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function Tfe(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=n.length}),e}function cP(t){return typeof t=="string"||t instanceof String}function Pfe(t){return typeof t=="boolean"}function Ofe(t){return typeof t=="number"}function um(t){return Array.isArray(t)?um(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Ofe(t)?"float32":cP(t)?"string":Pfe(t)?"bool":"float32"}function sC(t){return!!(t&&t.constructor&&t.call&&t.apply)}function uC(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function fa(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function s6(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Yf(t)),n&&Efe(t,e),function(o,a){return o instanceof Float32Array&&a==="float32"||o instanceof Int32Array&&a==="int32"||o instanceof Uint8Array&&a==="bool"}(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function bM(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,i){return r*i});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function r(i,o,a){var s=new Array;if(o.length===1)for(var u=o[0],l=0;l<u;l++)s[l]=a[i+l];else{u=o[0];var c=o.slice(1),f=c.reduce(function(h,d){return h*d});for(l=0;l<u;l++)s[l]=r(i+l*f,c,a)}return s}(0,t,e)}function u6(t,e){for(var n=lm(t,e),r=0;r<n.length;r++)n[r]=1;return n}function lm(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function Yo(){return re().platform.now()}function l6(t){t.forEach(function(e){W(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function kfe(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",re().platform.encode(t,e)}function p0(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",re().platform.decode(t,e)}function wM(t,e,n){if(e===0)return 0;if(e===1)return t[0];for(var r=t[t.length-1],i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function Rfe(t,e,n){if(e===0)return[];if(e===1)return[t];for(var r=new Array(e),i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}var Ife=function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Dfe)}return t.prototype.profileKernel=function(e,n,r){var i,o=this,a=this.backendTimer.time(function(){i=r()});return i.forEach(function(s){s.data().then(function(u){(function(l,c,f){if(c!=="float32")return!1;for(var h=0;h<l.length;h++){var d=l[h];if(isNaN(d)||!isFinite(d))return console.warn("Found "+d+" in the result of '"+f+"'"),!0}})(u,s.dtype,e),a.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),o.logger.logKernelProfile(e,s,u,l.kernelMs,n,c)})})}),i},t}(),Dfe=function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,i,o,a){var s=typeof i=="number"?yf(i+"ms",9):i.error,u=yf(e,25),l=n.rank,c=n.size,f=yf(n.shape.toString(),14),h="";for(var d in o){var p=o[d].shape||n.shape,v=p.length;h+=d+": "+v+"D "+(v>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+l+"D "+f+"	%c"+c+"	%c"+h+"	%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),xM=20,bd=3,s_=7;function Nfe(t,e,n,r){var i=fa(e),o=function(l,c,f,h){var d=Ae(c),p=h[h.length-1],v=new Array(p).fill(0),m=c.length,g=f==="complex64"?xd(l):l;if(m>1)for(var y=0;y<d/p;y++)for(var b=y*p,_=0;_<p;_++)v[_]=Math.max(v[_],wd(g[b+_],0,f).length);return v}(t,e,n,i),a=e.length,s=function l(c,f,h,d,p,v){v===void 0&&(v=!0);var m=h==="complex64"?2:1,g=f[0],y=f.length;if(y===0)return h==="complex64"?[wd(xd(c)[0],0,h)]:h==="bool"?[c6(c[0])]:[c[0].toString()];if(y===1){if(g>xM){var b=bd*m,_=Array.from(c.slice(0,b)),x=Array.from(c.slice((g-bd)*m,g*m));return h==="complex64"&&(_=xd(_),x=xd(x)),["["+_.map(function(B,z){return wd(B,p[z],h)}).join(", ")+", ..., "+x.map(function(B,z){return wd(B,p[g-bd+z],h)}).join(", ")+"]"]}return["["+(h==="complex64"?xd(c):Array.from(c)).map(function(B,z){return wd(B,p[z],h)}).join(", ")+"]"]}var S=f.slice(1),E=d.slice(1),C=d[0]*m,A=[];if(g>xM){for(var T=0;T<bd;T++){var P=(R=T*C)+C;A.push.apply(A,l(c.slice(R,P),S,h,E,p,!1))}for(A.push("..."),T=g-bd;T<g;T++)P=(R=T*C)+C,A.push.apply(A,l(c.slice(R,P),S,h,E,p,T===g-1))}else for(T=0;T<g;T++){var R;P=(R=T*C)+C,A.push.apply(A,l(c.slice(R,P),S,h,E,p,T===g-1))}var I=y===2?",":"";for(A[0]="["+A[0]+I,T=1;T<A.length-1;T++)A[T]=" "+A[T]+I;var M=`,
`;for(T=2;T<y;T++)M+=`
`;return A[A.length-1]=" "+A[A.length-1]+"]"+(v?"":M),A}(t,e,n,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+a),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(l){return"    "+l}).join(`
`)),u.join(`
`)}function wd(t,e,n){return yf(Array.isArray(t)?parseFloat(t[0].toFixed(s_))+" + "+parseFloat(t[1].toFixed(s_))+"j":cP(t)?"'"+t+"'":n==="bool"?c6(t):parseFloat(t.toFixed(s_)).toString(),e)}function c6(t){return t===0?"false":"true"}function xd(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var nv=function(){function t(e,n,r){var i=this;if(this.dtype=n,this.shape=e.slice(),this.size=Ae(e),r!=null){var o=r.length;W(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||d0(n,this.size),this.strides=fa(e)}return t.prototype.set=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),W(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var o=this.locToIndex(r);this.values[o]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,i=0,o=e;i<o.length;i++){var a=o[i];if(a<0||a>=this.shape[r]){var s="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return Qo().makeTensor(this.values,this.shape,this.dtype)},t}(),Qo=null,te=null,f6=null,Qt=function(){function t(e,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=Ae(e),this.strides=fa(e),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),W(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,i){return this.throwIfDisposed(),this.reshape([e,n,r,i])},t.prototype.as5D=function(e,n,r,i,o){return this.throwIfDisposed(),this.reshape([e,n,r,i,o])},t.prototype.asType=function(e){return this.throwIfDisposed(),te.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return Ee(this,void 0,void 0,function(){var e;return Ce(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,te.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return te.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return Ee(this,void 0,void 0,function(){var e;return Ce(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,bM(this.shape,e)]}})})},t.prototype.arraySync=function(){return bM(this.shape,this.dataSync())},t.prototype.data=function(){return Ee(this,void 0,void 0,function(){var e,n;return Ce(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=Qo().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map(function(i){return p0(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var e=Qo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(n){return p0(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return Ee(this,void 0,void 0,function(){var e;return Ce(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Qo().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(Qo().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),te.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),te.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),te.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),te.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),te.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),te.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),te.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),Nfe(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),te.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),te.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),te.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),te.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),te.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),te.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),te.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),te.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),te.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),te.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),te.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),te.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,i,o){return r===void 0&&(r=.001),f6("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,o,i,r)},t.prototype.batchNorm=function(e,n,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),te.batchNorm(this,e,n,r,i,o)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),te.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),te.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),te.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),te.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),te.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),te.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),te.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),te.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),te.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),te.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),te.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),te.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),te.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),te.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),te.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),te.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),te.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),te.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),te.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),te.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),te.div(this,e)},t.prototype.divNoNan=function(e){return this.throwIfDisposed(),te.divNoNan(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),te.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),te.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),te.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),te.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),te.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),te.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),te.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),te.modStrict(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),te.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),te.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),te.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),te.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),te.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),te.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),te.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),te.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),te.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),te.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),te.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),te.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),te.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),te.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),te.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),te.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),te.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),te.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),te.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),te.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),te.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),te.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),te.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),te.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),te.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),te.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),te.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),te.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),te.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),te.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),te.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),te.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),te.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),te.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),te.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),te.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),te.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),te.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),te.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),te.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),te.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),te.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),te.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),te.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),te.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),te.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),te.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),te.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),te.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),te.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),te.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),te.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),te.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),te.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),te.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),te.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),te.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),te.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),te.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),te.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),te.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),te.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),te.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),te.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),te.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),te.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,i,o,a){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),te.conv1d(this,e,n,r,i,o,a)},t.prototype.conv2d=function(e,n,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),te.conv2d(this,e,n,r,i,o,a)},t.prototype.conv2dTranspose=function(e,n,r,i,o){return this.throwIfDisposed(),te.conv2dTranspose(this,e,n,r,i,o)},t.prototype.depthwiseConv2D=function(e,n,r,i,o,a){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),te.depthwiseConv2d(this,e,n,r,i,o,a)},t.prototype.separableConv2d=function(e,n,r,i,o,a){return o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC"),this.throwIfDisposed(),te.separableConv2d(this,e,n,r,i,o,a)},t.prototype.avgPool=function(e,n,r,i){return this.throwIfDisposed(),te.avgPool(this,e,n,r,i)},t.prototype.maxPool=function(e,n,r,i){return this.throwIfDisposed(),te.maxPool(this,e,n,r,i)},t.prototype.localResponseNormalization=function(e,n,r,i){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5),te.localResponseNormalization(this,e,n,r,i)},t.prototype.pool=function(e,n,r,i,o){return this.throwIfDisposed(),te.pool(this,e,n,r,i,o)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Qo().makeVariable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),te.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),te.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),te.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),te.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,i,o,a,s,u){return i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),te.stridedSlice(this,e,n,r,i,o,a,s,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),te.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),te.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),te.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),te.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),te.spectral.irfft(this)},t}();Object.defineProperty(Qt,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var _M,lC,cC,fC,hC,Jf=function(t){function e(n,r,i,o){var a=t.call(this,n.shape,n.dtype,n.dataId,o)||this;return a.trainable=r,a.name=i,a}return Do(e,t),e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Jn(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Qo().disposeTensor(this),this.dataId=n.dataId,Qo().incRef(this,null)},e.prototype.dispose=function(){Qo().disposeVariable(this),this.isDisposedInternal=!0},e}(Qt);Object.defineProperty(Jf,Symbol.hasInstance,{value:function(t){return t instanceof Qt&&t.assign!=null&&t.assign instanceof Function}}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(_M||(_M={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(lC||(lC={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(cC||(cC={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(fC||(fC={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(hC||(hC={}));var Mfe={float32:fC,int32:lC,bool:cC,complex64:hC};function sr(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return Mfe[t][e]}function u_(t){return sr(t,"int32")}function rn(t,e){if(t.dtype===e.dtype)return[t,e];var n=sr(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function $fe(t,e){W(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function h6(t){var e=[];return function n(r,i,o){if(r!=null){if(r instanceof Qt)return void i.push(r);if(a=r,!(!Array.isArray(a)&&typeof a!="object")){var a,s=r;for(var u in s){var l=s[u];o.has(l)||(o.add(l),n(l,i,o))}}}}(t,e,new Set),e}var l_,SM=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),jfe=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new SM}return t.prototype.ready=function(){return Ee(this,void 0,void 0,function(){var e,n,r;return Ce(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,i.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return Ee(this,void 0,void 0,function(){var n,r,i;return Ce(this,function(o){switch(o.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Ife(this.backendInstance),[2,!0]}})})},t.prototype.setupRegisteredKernels=function(){var e=this;gM(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(e.backendInstance)})},t.prototype.disposeRegisteredKernels=function(e){var n=this;gM(e).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[e])})},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,a=i.then(function(s){return!(o<n.pendingBackendInitId)&&(n.registry[e]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(o<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+e+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],i=this.initializeBackend(r),o=i.success,a=i.asyncInit;if(a||o)return{name:r,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){var r=this.state.tensorInfo.get(n),i=r.backend,o=this.readSync(n);i.disposeData(n),r.backend=e,e.move(n,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.prototype.tidy=function(e,n){var r,i=this,o=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var i=r();return n(),i}catch(o){throw n(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[n],function(i){return{x:function(){return i.toFloat()}}},[]),n},t.prototype.runKernel=function(e,n,r,i,o){return this.runKernelFunc(null,n,null,e,r,i,o)},t.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.prototype.checkKernelForMemLeak=function(e,n,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(u){o+=u.dtype==="complex64"?3:1});var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=i-n-o-a;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+e+"'")},t.prototype.runKernelFunc=function(e,n,r,i,o,a,s){var u,l=this;a===void 0&&(a=[]),s===void 0&&(s=[]);var c=[],f=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var h,d=function(y){f&&(c=y.map(function(b){return l.keep(l.clone(b))}))},p=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=n6(i,this.backendName);return h=g!=null?function(){var y=l.backend.numDataIds();m=g.kernelFunc({inputs:n,attrs:o,backend:l.backend});var b=Array.isArray(m)?m:[m];l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,y,b);var _=b.map(function(S){var E=S.dataId,C=S.shape,A=S.dtype;return l.makeTensorFromDataId(E,C,A)}),x=_.filter(function(S,E){return s[E]});return d((a||[]).slice().concat(x)),_}:function(){var y=l.backend.numDataIds();m=l.tidy(function(){return e(l.backend,d)});var b=Array.isArray(m)?m:[m];return l.shouldCheckForMemLeaks()&&l.checkKernelForMemLeak(i,y,b),b},this.scopedRun(function(){return l.state.kernelDepth++},function(){return l.state.kernelDepth--},function(){u=l.ENV.getBool("DEBUG")?l.profiler.profileKernel(i,n,function(){return h()}):h()}),f&&this.addTapeNode(i,n,u,r,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(y){return n[y].shape}),outputShapes:u.map(function(y){return y.shape})}),Array.isArray(m)?u:u[0]},t.prototype.makeTensor=function(e,n,r,i){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var o=e;r==="string"&&cP(e[0])&&(o=e.map(function(c){return kfe(c)}));var a=i.write(o,n,r),s=new Qt(n,r,a,this.nextTensorId());if(this.incRef(s,i),r==="string"){var u=this.state.tensorInfo.get(a),l=Tfe(o);this.state.numBytes+=l-u.bytes,u.bytes=l}return s},t.prototype.makeTensorFromDataId=function(e,n,r,i){var o=new Qt(n,r=r||"float32",e,this.nextTensorId());return this.incRef(o,i),o},t.prototype.makeVariable=function(e,n,r,i){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==e.dtype&&(e=e.asType(i));var o=new Jf(e,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},t.prototype.incRef=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*a6(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Jf||this.track(e)},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return Ee(this,void 0,void 0,function(){var n,r;return Ce(this,function(i){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r,i,o){var a=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:o},u=bfe(e);u!=null&&(i=u.gradFunc),i!=null&&(s.gradient=function(l){return l=l.map(function(c,f){if(c==null){var h=r[f],d=lm(h.size,h.dtype);return a.makeTensor(d,h.shape,h.dtype)}return c}),i(l.length>1?l:l[0],o)}),this.state.activeTape.push(s)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=h6(e),i=new Set(r.map(function(u){return u.id})),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||i.has(a.id)||a.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},t.prototype.gradients=function(e,n,r,i){var o=this;if(i===void 0&&(i=!1),W(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var a=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",e)});W(a instanceof Qt,function(){return"The result y returned by f() must be a tensor."});var s=function(u,l,c){for(var f={},h={},d=0;d<l.length;d++)f[l[d].id]=!0;for(d=0;d<u.length;d++){var p=(S=u[d]).inputs;for(var v in p){for(var m=p[v],g=!1,y=0;y<l.length;y++)if(f[m.id]){S.outputs.forEach(function(T){return f[T.id]=!0}),g=!0,h[S.id]=!0;break}if(g)break}}var b={};b[c.id]=!0;var _={};for(d=u.length-1;d>=0;d--)for(p=(S=u[d]).inputs,y=0;y<S.outputs.length;y++)if(b[S.outputs[y].id]){for(var v in p)b[p[v].id]=!0,_[S.id]=!0;break}var x=[];for(d=0;d<u.length;d++){var S;if(h[(S=u[d]).id]&&_[S.id]){var E={};for(var v in S.inputs){var C=S.inputs[v];f[C.id]&&(E[v]=C)}var A=Object.assign({},S);A.inputs=E,A.outputs=S.outputs,x.push(A)}}return x}(this.state.activeTape,n,a);if(!i&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[a.id]=r??(u=a.shape,l=u6(Ae(u),"float32"),K.makeTensor(l,u,"float32")),function(h,d,p){for(var v=function(g){var y=d[g],b=[];if(y.outputs.forEach(function(E){var C=h[E.id];C!=null?b.push(C):b.push(null)}),y.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+y.kernelName+".");var _=y.gradient(b),x=function(E){if(!(E in _))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(_)+".");var C=p(function(){return _[E]()});if(C.dtype!=="float32")throw new Error("Error in gradient for op "+y.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+C.dtype+"'");var A=y.inputs[E];if(!Jn(C.shape,A.shape))throw new Error("Error in gradient for op "+y.kernelName+". The gradient of input '"+E+"' has shape '"+C.shape+"', which does not match the shape of the input '"+A.shape+"'");if(h[A.id]==null)h[A.id]=C;else{var T=h[A.id];h[A.id]=T.add(C),T.dispose()}};for(var S in y.inputs)x(S)},m=d.length-1;m>=0;m--)v(m)}(c,s,function(h){return o.tidy(h)});var f=n.map(function(h){return c[h.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(h){for(var d=0,p=h.saved;d<p.length;d++)p[d].dispose()}),o.state.activeTape=null),{value:a,grads:f}})},t.prototype.customGrad=function(e){var n=this;return W(sC(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];W(i.every(function(s){return s instanceof Qt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var a={};return i.forEach(function(s,u){a[u]=s}),n.runKernelFunc(function(s,u){return W((r=e.apply(void 0,i.concat([u]))).value instanceof Qt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),W(sC(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},a,function(s,u){var l=r.gradFunc(s,u),c=Array.isArray(l)?l:[l];W(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),W(c.every(function(h){return h instanceof Qt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return c.forEach(function(h,d){f[d]=function(){return h}}),f})}},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.time=function(e){return Ee(this,void 0,void 0,function(){var n,r;return Ce(this,function(i){switch(i.label){case 0:return n=Yo(),[4,this.backend.time(e)];case 1:return(r=i.sent()).wallMs=Yo()-n,[2,r]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new SM,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),K=function(){var t=function(){if(l_==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}l_=n}return l_}();if(t._tfengine==null){var e=new gfe(t);t._tfengine=new jfe(e)}return function(n){t6=n}(t._tfengine.ENV),Qo=function(){return t._tfengine},t._tfengine}();function d6(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Oa=re();Oa.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Oa.registerFlag("IS_BROWSER",function(){return d6()}),Oa.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Oa.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Oa.registerFlag("PROD",function(){return!1}),Oa.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Oa.getBool("DEBUG")}),Oa.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Oa.registerFlag("IS_TEST",function(){return!1});var rv,wi,mi,Zu={},c_={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Lfe(t,e){Zu[t]=e}function xa(t){t in Zu||(Zu[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete Zu[n]},!1),n===1?r.getContext("webgl",c_)||r.getContext("experimental-webgl",c_):r.getContext("webgl2",c_)}(t));var e=Zu[t];return e.isContextLost()?(delete Zu[t],xa(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Zu[t])}function _w(t,e){return[e,t]}function lp(t){var e=Ae(t);return aC(Math.ceil(e/4))}function cm(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function fP(t,e){var n,r,i,o,a,s,u,l,c,f=t;return re().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,i=f.RGBA16F,o=f.RGBA32F,a=f.RED,s=4,u=1,l=f.HALF_FLOAT,c=f.FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,o=f.RGBA,a=t.RGBA,s=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function Te(t,e,n){var r=n();return e&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+Vfe(i,o))}(t),r}(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(rv||(rv={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(wi||(wi={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(mi||(mi={}));var Ffe=596e-10,Bfe=65504;function Ufe(t){return!!(re().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Ffe<Math.abs(t)&&Math.abs(t)<Bfe)}function Vfe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function gg(t,e,n){return ls(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function Wfe(t,e,n){var r=ls(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Te(t,e,function(){return t.shaderSource(r,n)}),Te(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function zfe(t,e,n){var r=ls(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Te(t,e,function(){return t.shaderSource(r,n)}),Te(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,o){var a=Hfe.exec(o);if(a==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var s=+a[1],u=i.split(`
`),l=u.length.toString().length+2,c=u.map(function(m,g){return yf((g+1).toString(),l)+m}),f=0,h=0;h<c.length;h++)f=Math.max(c[h].length,f);var d=c.slice(0,s-1),p=c.slice(s-1,s),v=c.slice(s);console.log(d.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+yf(p[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(v.join(`
`))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var f_,h_,Hfe=/ERROR: [0-9]+:([0-9]+):/g;function Gfe(t,e){return ls(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function qfe(t,e,n){if(Te(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function d_(t,e,n){if(Te(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Kfe(t,e,n){var r=ls(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Te(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),Te(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Xfe(t,e,n){var r=ls(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return Te(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),Te(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function Yfe(t,e){return ls(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function Jfe(t,e){var n=re().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function Qfe(t,e){return ls(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function EM(t,e,n,r,i,o,a,s){var u=t.getAttribLocation(n,r);return u!==-1&&(Te(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),Te(t,e,function(){return t.vertexAttribPointer(u,o,t.FLOAT,!1,a,s)}),Te(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function Zfe(t,e,n,r){ihe(t,r),Te(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function ehe(t,e,n,r){return ls(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function the(t,e,n){return t.getUniformLocation(e,n)}function nhe(t,e,n,r,i,o){Te(t,e,function(){return Zfe(t,e,r,o)}),Te(t,e,function(){return t.uniform1i(i,o)})}function p_(t,e,n,r){Te(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),Te(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function CM(t,e,n){Te(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),Te(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function yg(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+rhe(t,e))}function rhe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function ls(t,e,n,r){var i=Te(t,e,function(){return n()});if(i==null)throw new Error(r);return i}function ihe(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function v0(t,e){return e===void 0&&(e=2),Ae(t.slice(0,t.length-e))}function m0(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function v_(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[v0(t)].concat(m0(t))),e}function ohe(t,e){var n;e===void 0&&(e=!1);var r=re().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?o6(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=sl(t);t=i.newShape}var o=Ae(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var a=v0(t),s=2,u=2;return t.length&&(s=(n=m0(t))[0],u=n[1]),aC(o=a*(s/2)*(u/2)).map(function(l){return 2*l})}return aC(o)}function bg(t){return t%2==0}function wg(t,e){if(Jn(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||bg(n)&&bg(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&bg(t[0])&&bg(e[0])}function ahe(t){if(f_==null){var e=xa(t);f_=e.getParameter(e.MAX_TEXTURE_SIZE)}return f_}function she(t){if(h_==null){var e=xa(t);h_=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,h_)}function uhe(t){if(t===0)return 0;var e=xa(t);return Hi(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:Hi(e,"EXT_disjoint_timer_query")?1:0}function Hi(t,e){return t.getExtension(e)!=null}function AM(t){try{if(xa(t)!=null)return!0}catch{return!1}return!1}function lhe(t){if(t===0)return!1;var e=xa(t);if(t===1){if(!Hi(e,"OES_texture_float"))return!1}else if(!Hi(e,"EXT_color_buffer_float"))return!1;return dC(e)}function che(t){if(t===0)return!1;var e=xa(t);if(t!==1){if(Hi(e,"EXT_color_buffer_float"))return dC(e);if(Hi(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=fP(r,i),a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(a),r.deleteFramebuffer(s),u}(e,n)}return!1}return!!Hi(e,"OES_texture_float")&&!!Hi(e,"WEBGL_color_buffer_float")&&dC(e)}function dC(t){var e=fP(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function fhe(t){return t===2&&xa(t).fenceSync!=null}var Le=re();function p6(t){re().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function we(t,e){return K.tidy(t,e)}function ti(t){h6(t).forEach(function(e){return e.dispose()})}function hhe(t){return K.keep(t)}function g0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];re().getBool("IS_TEST")||console.warn.apply(console,t)}function Ou(t,e){var n=t;if(ca(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||ca(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&re().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,a,s){if(s=s||[],!Array.isArray(o)&&!ca(o))return void W(a.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+a[0]+" elements"});W(a.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),W(o.length===a[0],function(){return"Element arr["+s.join("][")+"] should have "+a[0]+" elements, but has "+o.length+" elements"});for(var u=a.slice(1),l=0;l<o.length;++l)i(o[l],u,s.concat(l))}(t,r,[]),r}function TM(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function j(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof Qt)return TM(r,t.dtype,e,n),t;var i=um(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),TM(r,i,e,n),t==null||!ca(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=Ou(t,i);ca(t)||Array.isArray(t)||(t=[t]);var s=i!=="string"?s6(t,i,re().getBool("DEBUG")):Yf(t,[],!0);return K.makeTensor(s,a,i)}function y0(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,o){return j(i,e+"["+o+"]",n)},r)}function v6(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function dhe(t,e,n){for(var r=t.length+e.length,i=[],o=0,a=0,s=0;s<r;s++)n.indexOf(s)===-1?i.push(t[o++]):i.push(e[a++]);return i}function br(t,e){for(var n=[],r=t.length,i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);return[n,e.map(function(o){return t[o]})]}function ri(t,e){return dhe(t,e.map(function(n){return 1}),e)}function pi(t,e,n){W(v6(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function _a(t,e){if(v6(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(i){return n.push(i)}),n}function hP(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function Sa(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function phe(t,e){var n=t[0].length;t.forEach(function(i,o){W(i.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+n+")"})}),W(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(i,o){for(var a=0;a<n;a++)W(a===e||i[a]===r[a],function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Qf(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function G(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];K.startScope(n);try{var s=r.apply(void 0,o);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),K.endScope(s),s}catch(u){throw K.endScope(null),u}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}Le.registerFlag("HAS_WEBGL",function(){return Le.getNumber("WEBGL_VERSION")>0}),Le.registerFlag("WEBGL_VERSION",function(){return AM(2)?2:AM(1)?1:0}),Le.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Le.get("WEBGL_VERSION")===2}),Le.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Le.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Le.registerFlag("WEBGL_PACK",function(){return Le.getBool("HAS_WEBGL")}),Le.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_CLIP",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Le.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_PACK_REDUCE",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_CONV_IM2COL",function(){return Le.getBool("WEBGL_PACK")}),Le.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return ahe(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return she(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=Le.getNumber("WEBGL_VERSION");return t===0?0:uhe(t)}),Le.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Le.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),Le.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return lhe(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Le.getBool("WEBGL_FORCE_F16_TEXTURES")&&Le.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Le.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return che(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return fhe(Le.getNumber("WEBGL_VERSION"))}),Le.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Le.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),f6=p6;var or=G({complex_:function(t,e){var n=j(t,"real","complex"),r=j(e,"imag","complex");return mt(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),K.runKernelFunc(function(i){return i.complex(n,r)},{$real:n,$imag:r})}}),Ui=G({real_:function(t){var e=j(t,"input","real");return K.runKernelFunc(function(n){return n.real(e)},{$input:e})}}),Zo=G({imag_:function(t){var e=j(t,"input","imag");return K.runKernelFunc(function(n){return n.imag(e)},{$input:e})}});function ur(t,e,n){return ku(t,e,Ou(t,n),n)}function ku(t,e,n,r){if(r==null&&(r=um(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ca(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){l6(e);var i=Ae(e),o=Ae(n);W(i===o,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+o});for(var a=0;a<n.length;++a){var s=n[a],u=a!==n.length-1||s!==Ae(e.slice(a));W(n[a]===e[a]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return ca(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?s6(t,r,re().getBool("DEBUG")):Yf(t,[],!0),K.makeTensor(t,e,r)}function me(t,e){if((ca(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&ca(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ku(t,[],[],e)}function Sn(t,e){Lh(t);var n=Ou(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ku(t,null,n,e)}function uu(t,e,n){if(Lh(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Ou(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ku(t,e,r,n)}function dP(t,e,n){if(Lh(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Ou(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ku(t,e,r,n)}function qr(t,e,n){if(Lh(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Ou(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ku(t,e,r,n)}function vhe(t,e,n){if(Lh(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Ou(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ku(t,e,r,n)}function mhe(t,e,n){if(Lh(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Ou(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ku(t,e=e||r,r,n)}function ghe(t,e,n,r){return e===void 0&&(e=!0),K.makeVariable(t,e,n,r)}function Fh(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Fh(t,"float32"),r=Bt(t,"float32");return or(n,r)}var i=u6(Ae(t),e);return K.makeTensor(i,t,e)}function Bt(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=Bt(t,"float32"),r=Bt(t,"float32");return or(n,r)}var i=lm(Ae(t),e);return K.makeTensor(i,t,e)}function ha(t,e,n){return K.runKernelFunc(function(r){return r.fill(t,e,n)},{})}function yhe(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return K.runKernelFunc(function(r){return r.linspace(t,e,n)},{})}function b0(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return Bt([0],r);var i=lm(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return Sn(i,r)}var m6=G({onesLike_:function(t){var e=j(t,"x","onesLike");if(e.dtype==="complex64"){var n=m6(Ui(e)),r=at(Zo(e));return or(n,r)}return K.runKernelFunc(function(i){return i.onesLike(e)},{$x:e},function(i,o){return{$x:function(){return at(i)}}})}}),at=G({zerosLike_:function(t){var e=j(t,"x","zerosLike");return K.runKernelFunc(function(n){return n.zerosLike(e)},{$x:e},function(n,r){return{$x:function(){return at(n)}}})}}),Ln=G({concat_:function(t,e){e===void 0&&(e=0),W(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=y0(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),e=Vn(e,n[0].shape)[0];var r=Qf(n.map(function(s){return s.shape}),e);if(Ae(r)===0)return ur([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var i=n.map(function(s){return s.shape});phe(i,e);var o=n,a={axis:e};return K.runKernelFunc(function(s){return s.concat(n,e)},o,function(s){var u=i.map(function(l){return l[e]});return pP(s,u,e).map(function(l){return function(){return l}})},"Concat",a)}}),bhe=G({concat1d_:function(t){return Ln(t,0)}}),whe=G({concat2d_:function(t,e){return Ln(t,e)}}),xhe=G({concat3d_:function(t,e){return Ln(t,e)}}),_he=G({concat4d_:function(t,e){return Ln(t,e)}}),pP=G({split_:function(t,e,n){n===void 0&&(n=0);var r,i=j(t,"x","split");return n=Vn(n,i.shape)[0],typeof e=="number"?(W(i.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[n]/e)):(W(i.shape[n]===e.reduce(function(o,a){return o+a}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),K.runKernelFunc(function(o){return o.split(i,r,n)},{$x:i},function(o){return{$x:function(){return Ln(o,n)}}})}});function Ql(t,e){return t(e={exports:{}},e.exports),e.exports}var She=Ql(function(t){(function(e,n,r){function i(s){var u,l=this,c=(u=4022871197,function(f){f=f.toString();for(var h=0;h<f.length;h++){var d=.02519603282416938*(u+=f.charCodeAt(h));d-=u=d>>>0,u=(d*=u)>>>0,u+=4294967296*(d-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var f=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=0|f)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function o(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function a(s,u){var l=new i(s),c=u&&u.state,f=l.next;return f.int32=function(){return 4294967296*l.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.alea=a})(0,t)}),Ehe=Ql(function(t){(function(e,n,r){function i(s){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function a(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.xor128=a})(0,t)}),Che=Ql(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:l+=s;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.xorwow=a})(0,t)}),Ahe=Ql(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.x,h=u.i;return l=f[h],c=(l^=l>>>7)^l<<24,c^=(l=f[h+1&7])^l>>>10,c^=(l=f[h+3&7])^l>>>3,c^=(l=f[h+4&7])^l<<7,l=f[h+7&7],c^=(l^=l<<13)^l<<9,f[h]=c,u.i=h+1&7,c},function(l,c){var f,h=[];if(c===(0|c))h[0]=c;else for(c=""+c,f=0;f<c.length;++f)h[7&f]=h[7&f]<<15^c.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8?h[7]=-1:h[f],l.x=h,l.i=0,f=256;f>0;--f)l.next()}(u,s)}function o(s,u){return u.x=s.x.slice(),u.i=s.i,u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.x&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.xorshift7=a})(0,t)}),The=Ql(function(t){(function(e,n,r){function i(s){var u=this;u.next=function(){var l,c,f=u.w,h=u.X,d=u.i;return u.w=f=f+1640531527|0,c=h[d+34&127],l=h[d=d+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=h[d]=c^l,u.i=d,c+(f^f>>>16)|0},function(l,c){var f,h,d,p,v,m=[],g=128;for(c===(0|c)?(h=c,c=null):(c+="\0",h=0,g=Math.max(g,c.length)),d=0,p=-32;p<g;++p)c&&(h^=c.charCodeAt((p+32)%c.length)),p===0&&(v=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(v=v+1640531527|0,d=(f=m[127&p]^=h+v)==0?d+1:0);for(d>=128&&(m[127&(c&&c.length||0)]=-1),d=127,p=512;p>0;--p)h=m[d+34&127],f=m[d=d+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,m[d]=h^f;l.w=v,l.X=m,l.i=d}(u,s)}function o(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function a(s,u){s==null&&(s=+new Date);var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(c.X&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.xor4096=a})(0,t)}),Phe=Ql(function(t){(function(e,n,r){function i(s){var u=this,l="";u.next=function(){var f=u.b,h=u.c,d=u.d,p=u.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^h,u.c=h=h-d|0,u.d=d<<16^h>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):l+=s;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function o(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function a(s,u){var l=new i(s),c=u&&u.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&o(c,l),f.state=function(){return o(l,{})}),f}n&&n.exports?n.exports=a:this.tychei=a})(0,t)}),el=Ql(function(t){(function(e,n){var r,i=this,o=256,a=6,s="random",u=n.pow(o,a),l=n.pow(2,52),c=2*l,f=o-1;function h(g,y,b){var _=[],x=v(function C(A,T){var P,R=[],I=typeof A;if(T&&I=="object")for(P in A)try{R.push(C(A[P],T-1))}catch{}return R.length?R:I=="string"?A:A+"\0"}((y=y==1?{entropy:!0}:y||{}).entropy?[g,m(e)]:g??function(){try{var C;return r&&(C=r.randomBytes)?C=C(o):(C=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(C)),m(C)}catch{var A=i.navigator,T=A&&A.plugins;return[+new Date,i,T,i.screen,m(e)]}}(),3),_),S=new d(_),E=function(){for(var C=S.g(a),A=u,T=0;C<l;)C=(C+T)*o,A*=o,T=S.g(1);for(;C>=c;)C/=2,A/=2,T>>>=1;return(C+T)/A};return E.int32=function(){return 0|S.g(4)},E.quick=function(){return S.g(4)/4294967296},E.double=E,v(m(S.S),e),(y.pass||b||function(C,A,T,P){return P&&(P.S&&p(P,S),C.state=function(){return p(S,{})}),T?(n[s]=C,A):C})(E,x,"global"in y?y.global:this==n,y.state)}function d(g){var y,b=g.length,_=this,x=0,S=_.i=_.j=0,E=_.S=[];for(b||(g=[b++]);x<o;)E[x]=x++;for(x=0;x<o;x++)E[x]=E[S=f&S+g[x%b]+(y=E[x])],E[S]=y;(_.g=function(C){for(var A,T=0,P=_.i,R=_.j,I=_.S;C--;)A=I[P=f&P+1],T=T*o+I[f&(I[P]=I[R=f&R+A])+(I[R]=A)];return _.i=P,_.j=R,T})(o)}function p(g,y){return y.i=g.i,y.j=g.j,y.S=g.S.slice(),y}function v(g,y){for(var b,_=g+"",x=0;x<_.length;)y[f&x]=f&(b^=19*y[f&x])+_.charCodeAt(x++);return m(y)}function m(g){return String.fromCharCode.apply(0,g)}if(n["seed"+s]=h,v(n.random(),e),t.exports){t.exports=h;try{r=require("crypto")}catch{}}})([],Math)});el.alea=She,el.xor128=Ehe,el.xorwow=Che,el.xorshift7=Ahe,el.xor4096=The,el.tychei=Phe;var Sw=el.alea,vP=function(){function t(e,n,r,i,o){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=Sw(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,i=!1;!i;){var o=void 0,a=void 0,s=void 0;do s=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*a*u,this.truncated&&!this.isValidTruncated(n)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),Ohe=function(){function t(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;var o=i||Math.random();this.randu=Sw(o.toString()),this.randn=new vP(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,i,o,a;;){do i=this.randn.nextValue(),a=1+this.c*i;while(a<=0);if(a*=a*a,n=1-.331*(e=i*i)*e,r=.5*e+this.d*(1-a+Math.log(a)),(o=this.randu())<n||Math.log(o)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),khe=function(){function t(e,n,r,i){var o=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=Sw(i)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function Ue(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",l6(t),new nv(t,e,n)}function Rhe(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var g6=G({batchToSpaceND_:function(t,e,n){var r=j(t,"x","batchToSpaceND"),i=e.reduce(function(o,a){return o*a});return W(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),W(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),W(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),K.runKernelFunc(function(o){return o.batchToSpaceND(r,e,n)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(e,n)}}})}}),Ihe=G({broadcastTo_:function(t,e){var n=j(t,"broadcastTo","x"),r=n.shape;if(e.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<n.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+n.rank+".");if(e.length>n.rank){for(var i=n.shape.slice();i.length<e.length;)i.unshift(1);n=n.reshape(i)}for(var o=Array.from(e),a=e.length-1;a>=0;a--)if(n.shape[a]===e[a])o[a]=1;else if(n.shape[a]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var s=o.map(function(u,l){return u>1?l:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():K.runKernelFunc(function(u){return u.tile(n,o)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),Dhe=G({cast_:function(t,e){var n=j(t,"x","cast");if(!Cfe(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return K.runKernelFunc(function(i){return i.cast(n,e)},{x:n},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),Nhe=G({clone_:function(t){var e=j(t,"x","clone",null);return K.runKernelFunc(function(){return K.makeTensorFromDataId(e.dataId,e.shape,e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}}),Mhe=G({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var i=j(t,"x","cumsum"),o=_a([e|=0],i.rank),a=i;o!=null&&(a=i.transpose(o));var s=Sa(1,i.rank)[0],u=K.runKernelFunc(function(l){return l.cumsum(a,s,n,r)},{permutedX:a},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return o!=null&&(u=u.transpose(o)),u}}),$he=G({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=j(t,"x","depthToSpace"),i=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];return W(i*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+e+`  for depthToSpace with input shape
      `+r.shape}),W(o*e>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+` for depthToSpace with input shape
          `+r.shape}),W(a%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+a+" for depthToSpace with input shape "+r.shape}),K.runKernelFunc(function(s){return s.depthToSpace(r,e,n)},{$x:r})}}),Bi=G({expandDims_:function(t,e){e===void 0&&(e=0);var n=j(t,"x","expandDims",null);W(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(W(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),Eo(n,r)}}),y6=G({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var i=Ue([t,e],r),o=t<=e?t:e,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(t,e);if(n==null)return s;if(n.length===1)return bf(Bi(s,0),[n[0],1,1]);if(n.length===2)return bf(Bi(Bi(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return bf(Bi(Bi(Bi(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),jhe=G({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var i=j(t,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=a===1?i.as2D(1,-1):i,u=K.runKernelFunc(function(l){return l.multinomial(s,r,e,n)},{logits2D:s});return a===1?u.as1D():u}}),pC=G({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=j(t,"indices","oneHot","int32"),o=i.shape.concat([e]);return i=i.flatten(),K.runKernelFunc(function(a){return a.oneHot(i,e,n,r)},{$indices:i},function(a){return{$indices:function(){return Bt(i.shape,"float32")}}}).reshape(o)}}),Zl=G({pad_:function(t,e,n){n===void 0&&(n=0);var r=j(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:e,constantValue:n};return K.runKernelFunc(function(o){return o.pad(r,e,n)},{x:r},function(o){var a=e.map(function(s){return s[0]});return{x:function(){return o.slice(a,r.shape)}}},"PadV2",i)}}),Lhe=G({pad1d_:function(t,e,n){return n===void 0&&(n=0),W(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Zl(t,[e],n)}}),Fhe=G({pad2d_:function(t,e,n){return n===void 0&&(n=0),W(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Zl(t,e,n)}}),Bhe=G({pad3d_:function(t,e,n){return n===void 0&&(n=0),W(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Zl(t,e,n)}}),Uhe=G({pad4d_:function(t,e,n){return n===void 0&&(n=0),W(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Zl(t,e,n)}}),Vhe=G({rand_:function(t,e,n){var r=Ae(t),i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=e();return K.makeTensor(i,t,n)}}),Whe=G({randomNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new vP(e,n,r,!1,i),a=Ue(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),zhe=G({randomGamma_:function(t,e,n,r,i){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new Ohe(e,n,r,i),a=Ue(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),b6=G({randomUniform_:function(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var o=Ue(t,r),a=new khe(e,n,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),Eo=G({reshape_:function(t,e){var n=j(t,"x","reshape",null);e=Sfe(e,n.size),W(n.size===Ae(e),function(){return"new shape and old shape must have the same number of elements."});var r={shape:e};return K.runKernelFunc(function(i){return i.reshape(n,e)},{x:n},function(i){return{x:function(){return i.reshape(n.shape)}}},"Reshape",r)}}),w6=G({spaceToBatchND_:function(t,e,n){var r=j(t,"x","spaceToBatchND");return W(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),W(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),W(r.shape.reduce(function(i,o,a){return a>0&&a<=e.length?i&&(o+n[a-1][0]+n[a-1][1])%e[a-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),K.runKernelFunc(function(i){return i.spaceToBatchND(r,e,n)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(e,n)}}})}}),x6=G({squeeze_:function(t,e){var n=j(t,"x","squeeze");return Eo(n,sl(n.shape,e).newShape)}}),Ci=G({stack_:function(t,e){e===void 0&&(e=0);var n=y0(t,"tensors","stack");if(W(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,i=n[0].shape,o=n[0].dtype;W(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){mt(i,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){W(o===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=n.map(function(s){return s.expandDims(e)});return Ln(a,e)}}),bf=G({tile_:function(t,e){var n=j(t,"x","tile",null);W(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."});var r=[n],i={reps:e};return K.runKernelFunc(function(o,a){var s=o.tile(n,e);return a([n]),s},{x:n},function(o,a){var s=a[0];return{x:function(){var u=at(s);if(s.rank===1)for(var l=0;l<e[0];++l)u=u.add(o.slice([l*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(l=0;l<e[0];++l)for(var c=0;c<e[1];++c)u=u.add(o.slice([l*s.shape[0],c*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(var f=0;f<e[2];++f)u=u.add(o.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(l=0;l<e[0];++l)for(c=0;c<e[1];++c)for(f=0;f<e[2];++f)for(var h=0;h<e[3];++h)u=u.add(o.slice([l*s.shape[0],c*s.shape[1],f*s.shape[2],h*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",i,r)}}),Hhe=G({truncatedNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new vP(e,n,r,!0,i),a=Ue(t,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),Fn=G({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=j(t,"x","unstack");W(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length);var r={axis:e};return K.runKernelFunc(function(i){return i.unstack(n,e)},{x:n},function(i){return{x:function(){return Ci(i,e)}}},"Unpack",r)}}),Ghe=function(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c,f;return Ce(this,function(h){switch(h.label){case 0:return n=j(t,"x","setdiff1d"),r=j(e,"y","setdiff1d"),W(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),W(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),W(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(o=h.sent(),a=new Set(o),s=0,c=0;c<i.length;c++)a.has(i[c])||s++;for(u=new nv([s],n.dtype),l=new nv([s],"int32"),c=0,f=0;c<i.length;c++)a.has(i[c])||(u.values[f]=i[c],l.values[f]=c,f++);return[2,[u.toTensor(),l.toTensor()]]}})})};function w0(t,e,n,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=e.length,a=0;a<o;++a)i=i.concat([t[a+1]/e[a],e[a]]);i=i.concat(t.slice(o+1))}return i}function x0(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var o=[],a=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?a.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function _0(t,e,n,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(var o=1;o<t.length;++o)o<=e.length?r?i.push(e[o-1]*t[o]):i.push(t[o]/e[o-1]):i.push(t[o]);return i}function _6(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function S6(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function E6(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,o=0;o<n.length-1;++o)i*=n[o];var a=t.shape,s=n.slice();s.pop();var u=1;for(o=r;o<t.rank;++o)u*=a[o],s.push(a[o]);var l=fa(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[s,i,u,l]}var C6=30;function m_(t){return t<=C6?t:uC(t,Math.floor(Math.sqrt(t)))}function qhe(t,e,n){var r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+e.shape+", shape: "+t+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(o+" update.rank < "+i+". ");if(t.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+t.length-r)throw new Error(o+" update.rank != "+(i+t.length-r));for(var a=0;a<i;++a)if(n.shape[a]!==e.shape[a])throw new Error(o+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+e.shape[a]+").");for(a=0;a<n.rank-i;++a)if(n.shape[a+i]!==t[a+r])throw new Error(o+" updates.shape["+(a+i)+"] ("+n.shape[a+i]+") != shape["+(a+i)+"] ("+t[a+i]+")")}function Khe(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}qhe(n,e,t)}function S0(t,e,n){for(var r=e.shape.length,i=r>1?e.shape[r-1]:1,o=n.length,a=1,s=i;s<o;++s)a*=n[s];var u=i<1?1:i;return{sliceRank:i,numUpdates:Ae(e.shape)/u,sliceSize:a,strides:fa(n.slice(0,i)).concat([1]),outputSize:Ae(n)}}function Xhe(t,e,n){W(t.rank===e.length,function(){return"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."}),W(t.rank===n.length,function(){return"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+")."});for(var r=function(o){W(e[o]+n[o]<=t.shape[o],function(){return"Error in slice"+t.rank+"D: begin["+o+"] + size["+o+"] ("+(e[o]+n[o])+") would overflow input.shape["+o+"] ("+t.shape[o]+")"})},i=0;i<t.rank;++i)r(i)}function PM(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function mP(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Yhe(t,e,n,r,i){var o=e[i],a=n[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=oC(0,o,s-1)}function Jhe(t,e,n,r,i){var o=e[i],a=n[i]||1;(t&1<<i||o==null)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),o=a>0?oC(0,o,s):oC(-1,o,s-1)}function A6(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function T6(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Qhe(t,e){W(sC(t),function(){return"The f passed in variableGrads(f) must be a function"}),W(e==null||Array.isArray(e)&&e.every(function(c){return c instanceof Jf}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=e!=null;if(!n)for(var r in e=[],K.registeredVariables)e.push(K.registeredVariables[r]);var i=n?e.filter(function(c){return!c.trainable}):null,o=e.length;W((e=e.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var a=K.gradients(t,e,null,!0),s=a.value,u=a.grads;W(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),W(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var l={};return e.forEach(function(c,f){u[f]!=null&&(l[c.name]=u[f])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:s,grads:l}}function Ew(t){return K.customGrad(t)}var cs=G({softmax_:function(t,e){e===void 0&&(e=-1);var n=j(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return K.runKernelFunc(function(r,i){var o=r.softmax(n,e);return i([o]),o},{logits:n},function(r,i){var o=i[0],a=r.mul(o);return{logits:function(){return a.sub(a.sum([e],!0).mul(o))}}},"Softmax",{dim:e},[],[!0])}}),Zhe=G({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=j(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return Ew(function(r,i){var o=r.max(e,!0),a=r.sub(o),s=a.toFloat().sub(a.exp().sum(e,!0).log());return i([s]),{value:s,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(e,!0).mul(c))}}})(n)}}),P6=function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.dataIdsCount++,this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.prototype.numDataIds=function(){return this.dataIdsCount},t}(),O6=function(){function t(){}return t.prototype.time=function(e){return Q("time")},t.prototype.read=function(e){return Q("read")},t.prototype.readSync=function(e){return Q("readSync")},t.prototype.numDataIds=function(){return Q("numDataIds")},t.prototype.disposeData=function(e){return Q("disposeData")},t.prototype.write=function(e,n,r){return Q("write")},t.prototype.move=function(e,n,r,i){return Q("move")},t.prototype.memory=function(){return Q("memory")},t.prototype.floatPrecision=function(){return Q("floatPrecision")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,i){return Q("batchMatMul")},t.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,Q("fusedBatchMatMul")},t.prototype.slice=function(e,n,r){return Q("slice")},t.prototype.stridedSlice=function(e,n,r,i){return Q("stridedSlice")},t.prototype.unstack=function(e,n){return Q("unstack")},t.prototype.reverse=function(e,n){return Q("reverse")},t.prototype.concat=function(e,n){return Q("concat")},t.prototype.neg=function(e){return Q("neg")},t.prototype.add=function(e,n){return Q("add")},t.prototype.addN=function(e){return Q("addN")},t.prototype.subtract=function(e,n){return Q("subtract")},t.prototype.multiply=function(e,n){return Q("multiply")},t.prototype.realDivide=function(e,n){return Q("realDivide")},t.prototype.floorDiv=function(e,n){return Q("floorDiv")},t.prototype.sum=function(e,n){return Q("sum")},t.prototype.prod=function(e,n){return Q("prod")},t.prototype.unsortedSegmentSum=function(e,n,r){return Q("unsortedSegmentSum")},t.prototype.argMin=function(e,n){return Q("argMin")},t.prototype.argMax=function(e,n){return Q("argMax")},t.prototype.equal=function(e,n){return Q("equal")},t.prototype.notEqual=function(e,n){return Q("notEqual")},t.prototype.less=function(e,n){return Q("less")},t.prototype.lessEqual=function(e,n){return Q("lessEqual")},t.prototype.greater=function(e,n){return Q("greater")},t.prototype.greaterEqual=function(e,n){return Q("greaterEqual")},t.prototype.logicalNot=function(e){return Q("logicalNot")},t.prototype.logicalAnd=function(e,n){return Q("logicalAnd")},t.prototype.logicalOr=function(e,n){return Q("logicalOr")},t.prototype.where=function(e){return Q("where")},t.prototype.select=function(e,n,r){return Q("select")},t.prototype.topk=function(e,n,r){return Q("topk")},t.prototype.min=function(e,n){return Q("min")},t.prototype.minimum=function(e,n){return Q("minimum")},t.prototype.mod=function(e,n){return Q("mod")},t.prototype.max=function(e,n){return Q("max")},t.prototype.maximum=function(e,n){return Q("maximum")},t.prototype.all=function(e,n){return Q("all")},t.prototype.any=function(e,n){return Q("any")},t.prototype.squaredDifference=function(e,n){return Q("squaredDifference")},t.prototype.ceil=function(e){return Q("ceil")},t.prototype.floor=function(e){return Q("floor")},t.prototype.round=function(e){return Q("round")},t.prototype.sign=function(e){return Q("sign")},t.prototype.isNaN=function(e){return Q("isNaN")},t.prototype.isInf=function(e){return Q("isInf")},t.prototype.isFinite=function(e){return Q("isFinite")},t.prototype.pow=function(e,n){return Q("pow")},t.prototype.exp=function(e){return Q("exp")},t.prototype.expm1=function(e){return Q("expm1")},t.prototype.softmax=function(e,n){return Q("softmax")},t.prototype.log=function(e){return Q("log")},t.prototype.log1p=function(e){return Q("log1p")},t.prototype.sqrt=function(e){return Q("sqrt")},t.prototype.rsqrt=function(e){return Q("rsqrt")},t.prototype.square=function(e){return Q("square")},t.prototype.reciprocal=function(e){return Q("reciprocal")},t.prototype.relu=function(e){return Q("relu")},t.prototype.relu6=function(e){return Q("relu6")},t.prototype.prelu=function(e,n){return Q("prelu")},t.prototype.elu=function(e){return Q("elu")},t.prototype.eluDer=function(e,n){return Q("eluDer")},t.prototype.selu=function(e){return Q("selu")},t.prototype.int=function(e){return Q("int")},t.prototype.clip=function(e,n,r){return Q("clip")},t.prototype.abs=function(e){return Q("abs")},t.prototype.complexAbs=function(e){return Q("complexAbs")},t.prototype.sigmoid=function(e){return Q("sigmoid")},t.prototype.softplus=function(e){return Q("softplus")},t.prototype.sin=function(e){return Q("sin")},t.prototype.cos=function(e){return Q("cos")},t.prototype.tan=function(e){return Q("tan")},t.prototype.asin=function(e){return Q("asin")},t.prototype.acos=function(e){return Q("acos")},t.prototype.atan=function(e){return Q("atan")},t.prototype.atan2=function(e,n){return Q("atan2")},t.prototype.sinh=function(e){return Q("sinh")},t.prototype.cosh=function(e){return Q("cosh")},t.prototype.tanh=function(e){return Q("tanh")},t.prototype.asinh=function(e){return Q("asinh")},t.prototype.acosh=function(e){return Q("acosh")},t.prototype.atanh=function(e){return Q("atanh")},t.prototype.erf=function(e){return Q("erf")},t.prototype.step=function(e,n){return Q("step")},t.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Q("fusedConv2d")},t.prototype.conv2d=function(e,n,r){return Q("conv2d")},t.prototype.conv2dDerInput=function(e,n,r){return Q("conv2dDerInput")},t.prototype.conv2dDerFilter=function(e,n,r){return Q("conv2dDerFilter")},t.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Q("fusedDepthwiseConv2D")},t.prototype.depthwiseConv2D=function(e,n,r){return Q("depthwiseConv2D")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){return Q("depthwiseConv2DDerInput")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){return Q("depthwiseConv2DDerFilter")},t.prototype.conv3d=function(e,n,r){return Q("conv3d")},t.prototype.conv3dDerInput=function(e,n,r){return Q("conv3dDerInput")},t.prototype.conv3dDerFilter=function(e,n,r){return Q("conv3dDerFilter")},t.prototype.maxPool=function(e,n){return Q("maxPool")},t.prototype.maxPoolBackprop=function(e,n,r,i){return Q("maxPoolBackprop")},t.prototype.avgPool=function(e,n){return Q("avgPool")},t.prototype.avgPoolBackprop=function(e,n,r){return Q("avgPoolBackprop")},t.prototype.avgPool3d=function(e,n){return Q("avgPool3d")},t.prototype.avgPool3dBackprop=function(e,n,r){return Q("avgPool3dBackprop")},t.prototype.maxPool3d=function(e,n){return Q("maxPool3d")},t.prototype.maxPool3dBackprop=function(e,n,r,i){return Q("maxPool3dBackprop")},t.prototype.reshape=function(e,n){return Q("reshape")},t.prototype.cast=function(e,n){return Q("cast")},t.prototype.tile=function(e,n){return Q("tile")},t.prototype.pad=function(e,n,r){return Q("pad")},t.prototype.transpose=function(e,n){return Q("transpose")},t.prototype.gather=function(e,n,r){return Q("gather")},t.prototype.gatherND=function(e,n){return Q("gatherND")},t.prototype.scatterND=function(e,n,r){return Q("scatterND")},t.prototype.batchToSpaceND=function(e,n,r){return Q("batchToSpaceND")},t.prototype.spaceToBatchND=function(e,n,r){return Q("spaceToBatchND")},t.prototype.resizeBilinear=function(e,n,r,i){return Q("resizeBilinear")},t.prototype.resizeBilinearBackprop=function(e,n,r){return Q("resizeBilinearBackprop")},t.prototype.resizeNearestNeighbor=function(e,n,r,i){return Q("resizeNearestNeighbor")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){return Q("resizeNearestNeighborBackprop")},t.prototype.batchNormalization=function(e,n,r,i,o,a){return Q("batchNormalization")},t.prototype.localResponseNormalization4D=function(e,n,r,i,o){return Q("localResponseNormalization4D")},t.prototype.LRNGrad=function(e,n,r,i,o,a,s){return Q("LRNGrad")},t.prototype.multinomial=function(e,n,r,i){return Q("multinomial")},t.prototype.oneHot=function(e,n,r,i){return Q("oneHot")},t.prototype.cumsum=function(e,n,r,i){return Q("cumsum")},t.prototype.nonMaxSuppression=function(e,n,r,i,o){return Q("nonMaxSuppression")},t.prototype.fft=function(e){return Q("fft")},t.prototype.ifft=function(e){return Q("ifft")},t.prototype.complex=function(e,n){return Q("complex")},t.prototype.real=function(e){return Q("real")},t.prototype.imag=function(e){return Q("imag")},t.prototype.cropAndResize=function(e,n,r,i,o,a){return Q("cropAndResize")},t.prototype.depthToSpace=function(e,n,r){return Q("depthToSpace")},t.prototype.split=function(e,n,r){return Q("split")},t.prototype.sparseToDense=function(e,n,r,i){return Q("sparseToDense")},t.prototype.diag=function(e){return Q("diag")},t.prototype.fill=function(e,n,r){return Q("fill")},t.prototype.onesLike=function(e){return Q("onesLike")},t.prototype.zerosLike=function(e){return Q("zerosLike")},t.prototype.linspace=function(e,n,r){return Q("linspace")},t.prototype.dispose=function(){return Q("dispose")},t}();function Q(t){throw new Error("'"+t+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Ys(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var o=n-1-i,a=t[o]||1;(e[e.length-1-i]||1)>1&&a===1&&r.unshift(o)}return r}function Bn(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],o=e.length-r-1,a=e[o];(i==null||i===1&&a>1)&&n.unshift(o)}return n}function Ze(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var o=t[t.length-i-1];o==null&&(o=1);var a=e[e.length-i-1];if(a==null&&(a=1),o===1)n.unshift(a);else if(a===1)n.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(o)}}return n}function iv(t,e,n,r,i,o,a){a===void 0&&(a="channelsLast");var s,u=A0(e),l=u[0],c=u[1];if(a==="channelsLast")s=[l,c,t[3],t[3]];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);s=[l,c,t[1],t[1]]}return ec(t,s,n,r,i,o,!1,a)}function E0(t,e,n,r,i,o,a){a===void 0&&(a="NDHWC");var s,u,l=vC(e),c=l[0],f=l[1],h=l[2];if(a==="NDHWC")u="channelsLast",s=[c,f,h,t[4],t[4]];else{if(a!=="NCDHW")throw new Error("Unknown dataFormat "+a);u="channelsFirst",s=[c,f,h,t[1],t[1]]}return C0(t,s,n,r,i,!1,u,o)}function ec(t,e,n,r,i,o,a,s){a===void 0&&(a=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3];if(s==="channelsLast")l=t[0],c=t[1],f=t[2],h=t[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],h=t[1],c=t[2],f=t[3]}var d,p=e[0],v=e[1],m=e[3],g=A0(n),y=g[0],b=g[1],_=A0(r),x=_[0],S=_[1],E=wf(p,x),C=wf(v,S),A=function(M,B,z,U,$,L,H,X){var q,J,ae;if(typeof M=="number"){q={top:M,bottom:M,left:M,right:M,type:M===0?"VALID":"NUMBER"};var fe=function(ce,Z,ge,ye,De){ye==null&&(ye=k6(ce,Z,ge));var ke=ce[0],tt=ce[1],ft=cp((ke-Z+2*ye)/ge+1,De);W(mn(ft),function(){return"The output # of rows ("+ft+") must be an integer. Change the stride and/or zero pad parameters"});var je=cp((tt-Z+2*ye)/ge+1,De);return W(mn(je),function(){return"The output # of columns ("+je+") must be an integer. Change the stride and/or zero pad parameters"}),[ft,je]}([B,z],L,U,M,X);J=fe[0],ae=fe[1]}else if(M==="same"){J=Math.ceil(B/U),ae=Math.ceil(z/$);var he=Math.max(0,(J-1)*U+L-B),de=Math.max(0,(ae-1)*$+H-z),be=Math.floor(he/2),ne=he-be,ue=Math.floor(de/2);q={top:be,bottom:ne,left:ue,right:de-ue,type:"SAME"}}else{if(M!=="valid")throw Error("Unknown padding parameter: "+M);q={top:0,bottom:0,left:0,right:0,type:"VALID"},J=Math.ceil((B-L+1)/U),ae=Math.ceil((z-H+1)/$)}return{padInfo:q,outHeight:J,outWidth:ae}}(i,c,f,y,b,E,C,o),T=A.padInfo,P=A.outHeight,R=A.outWidth,I=a?m*h:m;return s==="channelsFirst"?d=[l,I,P,R]:s==="channelsLast"&&(d=[l,P,R,I]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:h,outHeight:P,outWidth:R,outChannels:I,padInfo:T,strideHeight:y,strideWidth:b,filterHeight:p,filterWidth:v,effectiveFilterHeight:E,effectiveFilterWidth:C,dilationHeight:x,dilationWidth:S,inShape:t,outShape:d,filterShape:e}}function C0(t,e,n,r,i,o,a,s){o===void 0&&(o=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3],d=u[4];if(a==="channelsLast")l=t[0],c=t[1],f=t[2],h=t[3],d=t[4];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],d=t[1],c=t[2],f=t[3],h=t[4]}var p,v=e[0],m=e[1],g=e[2],y=e[4],b=vC(n),_=b[0],x=b[1],S=b[2],E=vC(r),C=E[0],A=E[1],T=E[2],P=wf(v,C),R=wf(m,A),I=wf(g,T),M=function(H,X,q,J,ae,fe,he,de,be,ne,ue){var ce,Z,ge,ye;if(typeof H=="number"){ce={top:H,bottom:H,left:H,right:H,front:H,back:H,type:H===0?"VALID":"NUMBER"};var De=function(fr,on,fn,Kt,Xt,ui){Xt==null&&(Xt=k6(fr,on,Kt));var no=fr[0],kr=fr[1],Aa=fr[2],Rr=cp((no-on+2*Xt)/Kt+1,ui);W(mn(Rr),function(){return"The output # of depths ("+Rr+") must be an integer. Change the stride and/or zero pad parameters"});var hr=cp((kr-on+2*Xt)/Kt+1,ui);W(mn(hr),function(){return"The output # of rows ("+hr+") must be an integer. Change the stride and/or zero pad parameters"});var Wr=cp((Aa-on+2*Xt)/Kt+1,ui);return W(mn(Wr),function(){return"The output # of columns ("+Wr+") must be an integer. Change the stride and/or zero pad parameters"}),[Rr,hr,Wr,fn]}([X,q,J,1],de,1,ae,H,ue);Z=De[0],ge=De[1],ye=De[2]}else if(H==="same"){Z=Math.ceil(X/ae),ge=Math.ceil(q/fe),ye=Math.ceil(J/he);var ke=(Z-1)*ae+de-X,tt=(ge-1)*fe+be-q,ft=(ye-1)*he+ne-J,je=Math.floor(ke/2),Ye=ke-je,st=Math.floor(tt/2),Pt=tt-st,Et=Math.floor(ft/2);ce={top:st,bottom:Pt,left:Et,right:ft-Et,front:je,back:Ye,type:"SAME"}}else{if(H!=="valid")throw Error("Unknown padding parameter: "+H);ce={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Z=Math.ceil((X-de+1)/ae),ge=Math.ceil((q-be+1)/fe),ye=Math.ceil((J-ne+1)/he)}return{padInfo:ce,outDepth:Z,outHeight:ge,outWidth:ye}}(i,c,f,h,_,x,S,P,R,I,s),B=M.padInfo,z=M.outDepth,U=M.outHeight,$=M.outWidth,L=o?y*d:y;return a==="channelsFirst"?p=[l,L,z,U,$]:a==="channelsLast"&&(p=[l,z,U,$,L]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:f,inWidth:h,inChannels:d,outDepth:z,outHeight:U,outWidth:$,outChannels:L,padInfo:B,strideDepth:_,strideHeight:x,strideWidth:S,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:P,effectiveFilterHeight:R,effectiveFilterWidth:I,dilationDepth:C,dilationHeight:A,dilationWidth:T,inShape:t,outShape:p,filterShape:e}}function k6(t,e,n,r){r===void 0&&(r=1);var i=wf(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function A0(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function vC(t){return typeof t=="number"?[t,t,t]:t}function wf(t,e){return e<=1?t:t+(t-1)*(e-1)}function cp(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Zf(t){var e=A0(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function ii(t,e){return Zf(t)||Zf(e)}function gP(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function R6(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=Bt(t.shape),i=t.toFloat(),o=n.complex(i,r);return r.dispose(),i.dispose(),o}if(!Afe(t.dtype,e))return K.makeTensorFromDataId(t.dataId,t.shape,e);if(t.dtype==="complex64"){var a=n.real(t);return o=a.cast(e),a.dispose(),o}if(e==="int32")return n.int(t);if(e==="bool"){var s=me(0,t.dtype);return o=n.notEqual(t,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function mC(t,e){return K.makeTensorFromDataId(t.dataId,e,t.dtype)}function I6(t,e,n){var r=(e-t)/(n-1),i=lm(n,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Sn(i,"float32")}function gC(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function OM(t,e){return{real:t[2*e],imag:t[2*e+1]}}function ede(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function tde(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function nde(t,e,n){var r=function(o,a,s){return function(u,l,c){for(var f=0,h=u.length,d=0,p=!1;f<h;){var v=c(l,u[d=f+(h-f>>>1)]);v>0?f=d+1:(h=d,p=!v)}return p?f:-f-1}(o,a,s||rde)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function rde(t,e){return t>e?1:t<e?-1:0}function yP(t,e,n,r,i){return D6(t,e,n,r,i,0).selectedIndices}function bP(t,e,n,r,i,o){var a=D6(t,e,n,r,i,o);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function D6(t,e,n,r,i,o,a,s){s===void 0&&(s=!1);for(var u=Array.from(e).map(function(_,x){return{score:_,boxIndex:x,suppressBeginIndex:0}}).filter(function(_){return _.score>i}).sort(kM),l=o>0?-.5/o:0,c=[],f=[];c.length<n&&u.length>0;){var h=u.pop(),d=h.score,p=h.boxIndex,v=h.suppressBeginIndex;if(d<i)break;for(var m=!1,g=c.length-1;g>=v;--g){var y=ide(t,p,c[g]);if(y>=r){m=!0;break}if(h.score=h.score*ode(r,l,y),h.score<=i)break}h.suppressBeginIndex=c.length,m||(h.score===d?(c.push(p),f.push(h.score)):h.score>i&&nde(u,h,kM))}var b=c.length;return s&&(c.fill(0,b),f.fill(0,b)),{selectedIndices:Sn(c,"int32"),selectedScores:Sn(f,"float32"),numValidOutputs:me(b,"int32")}}function ide(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),d=(s-o)*(u-a),p=(f-l)*(h-c);if(d<=0||p<=0)return 0;var v=Math.max(o,l),m=Math.max(a,c),g=Math.min(s,f),y=Math.min(u,h),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(d+p-b)}function ode(t,e,n){var r=Math.exp(e*n*n);return n<=t?r:0}function kM(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function N6(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(o){i[n]=o;var a=t.slice(r,i);return r[n]+=o,a})}function M6(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=Ue(n,t.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(t.rank),s=0;s<a.length;s++)a[s]=o[s]%t.shape[s];var u=t.locToIndex(a);i.values[r]=t.values[u]}return i.toTensor()}function $6(t,e,n,r,i){for(var o=e[e.length-1],a=[t.length/o,o],s=a[0],u=a[1],l=tv(n,s*r),c=tv("int32",s*r),f=0;f<s;f++){for(var h=f*u,d=t.subarray(h,h+u),p=[],v=0;v<d.length;v++)p.push({value:d[v],index:v});p.sort(function(_,x){return x.value-_.value});var m=f*r,g=l.subarray(m,m+r),y=c.subarray(m,m+r);for(v=0;v<r;v++)g[v]=p[v].value,y[v]=p[v].index}var b=e.slice();return b[b.length-1]=r,[ur(l,b,n),ur(c,b,"int32")]}function wP(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=Ue(t,"int32"),o=Ue([n.length,t.length],"int32");for(r=0;r<n.length;r++){var a=i.indexToLoc(n[r]),s=r*t.length;o.values.set(a,s)}return o.toTensor()}var ade=function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(i,o){return"T"+o});var n=[];this.variableNames.forEach(function(i){n.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},sde=function(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map(function(i,o){return"T"+o});var n=[];this.variableNames.forEach(function(i){n.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},ude=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.inSize,a=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function j6(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function Kr(t,e){return e===1?[t]:j6(t,e)}function _r(){var t,e,n,r,i,o,a,s,u,l;return re().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",l=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,l=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function ml(t,e,n){n===void 0&&(n="index");var r=fa(e);return r.map(function(i,o){return"int "+t[o]+" = "+n+" / "+i+"; "+(o===r.length-1?"int "+t[o+1]+" = "+n+" - "+t[o]+" * "+i:"index -= "+t[o]+" * "+i)+";"}).join("")}function xP(t){var e=fa(t).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var L6=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function lde(t,e,n,r){var i=[];t.forEach(function(d){var p=Ae(d.shapeInfo.logicalShape);d.shapeInfo.isUniform?i.push("uniform float "+d.name+(p>1?"["+p+"]":"")+";"):(i.push("uniform sampler2D "+d.name+";"),i.push("uniform int offset"+d.name+";"))});var o,a,s=i.join(`
`),u=t.map(function(d){return function(p,v,m){m===void 0&&(m=!1);var g="";g+=m?F6(p):Pc(p);var y=p.shapeInfo.logicalShape,b=v.logicalShape;return y.length<=b.length&&(g+=m?function(_,x){var S,E=_.name,C=E.charAt(0).toUpperCase()+E.slice(1),A="get"+C+"AtOutCoords",T=_.shapeInfo.logicalShape.length,P=x.logicalShape.length,R=Ys(_.shapeInfo.logicalShape,x.logicalShape),I=Nt(P),M=P-T,B=["x","y","z","w","u","v"];S=T===0?"":P<2&&R.length>=1?"coords = 0;":R.map(function(q){return"coords."+B[q+M]+" = 0;"}).join(`
`);var z="";z=P<2&&T>0?"coords":_.shapeInfo.logicalShape.map(function(q,J){return"coords."+B[J+M]}).join(", ");var U="return outputValue;",$=Ae(_.shapeInfo.logicalShape)===1,L=Ae(x.logicalShape)===1;if(T!==1||$||L){if($&&!L)U=P===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(R.length){var H=T-2,X=T-1;R.indexOf(H)>-1&&R.indexOf(X)>-1?U="return vec4(outputValue.x);":R.indexOf(H)>-1?U="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":R.indexOf(X)>-1&&(U="return vec4(outputValue.xx, outputValue.zz);")}}else U=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+A+`() {
      `+I+` coords = getOutputCoords();
      `+S+`
      vec4 outputValue = get`+C+"("+z+`);
      `+U+`
    }
  `}(p,v):function(_,x){var S=_.name,E=S.charAt(0).toUpperCase()+S.slice(1),C="get"+E+"AtOutCoords",A=x.texShape,T=_.shapeInfo.texShape,P=_.shapeInfo.logicalShape.length,R=x.logicalShape.length;if(!_.shapeInfo.isUniform&&P===R&&_.shapeInfo.flatOffset==null&&Jn(T,A))return`
      float `+C+`() {
        return sampleTexture(`+S+`, resultUV);
      }
    `;var I,M=Nt(R),B=Ys(_.shapeInfo.logicalShape,x.logicalShape),z=R-P,U=["x","y","z","w","u","v"];I=P===0?"":R<2&&B.length>=1?"coords = 0;":B.map(function(L){return"coords."+U[L+z]+" = 0;"}).join(`
`);var $="";return $=R<2&&P>0?"coords":_.shapeInfo.logicalShape.map(function(L,H){return"coords."+U[H+z]}).join(", "),`
    float `+C+`() {
      `+M+` coords = getOutputCoords();
      `+I+`
      return get`+E+"("+$+`);
    }
  `}(p,v)),g}(d,e,r)}).join(`
`),l=e.texShape,c=_r(),f=function(d){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+d.texture2D+`(textureSampler, uv).r;
    }
  `}(c),h=function(d){return d.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+d.varyingFs+` vec2 resultUV;
    `+d.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+d.defineSpecialNaN+`
    `+d.defineSpecialInf+`
    `+d.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+cde+`
    `+fde+`
    `+hde+`
  `}(c);return e.isPacked?(o=function(d,p){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(_,x){var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];return S[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return 2 * (resTexRC.x * `+S[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(_,x){var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)];if(Jn(_,x))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `;var E=Math.ceil(_[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(d,p);case 3:return v=d,m=p,g=[Math.ceil(m[0]/2),Math.ceil(m[1]/2)],y=Math.ceil(v[2]/2),b=y*Math.ceil(v[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;

      int b = index / `+b+`;
      index -= b * `+b+`;

      int r = 2 * (index / `+y+`);
      int c = imod(index, `+y+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(_,x){for(var S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)],E=Math.ceil(_[_.length-1]/2),C=E*Math.ceil(_[_.length-2]/2),A=C,T="",P="b, r, c",R=2;R<_.length-1;R++)A*=_[_.length-R-1],T=`
      int b`+R+" = index / "+A+`;
      index -= b`+R+" * "+A+`;
    `+T,P="b"+R+", "+P;return`
    ivec`+_.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+T+`

      int b = index / `+C+`;
      index -= b * `+C+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+_.length+"("+P+`);
    }
  `}(d,p)}var v,m,g,y,b}(e.logicalShape,l),a=function(d){return`
    void setOutput(vec4 val) {
      `+d.output+` = val;
    }
  `}(c)):(o=function(d,p){switch(d.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(g,y){return y[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+y[1]+`.0);
      }
    `:y[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+y[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      return resTexRC.x * `+y[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(g,y){return Jn(g,y)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+y[0]+", "+y[1]+`));
      }
    `:g[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:g[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+y[0]+", "+y[1]+`));
        int index = resTexRC.x * `+y[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      int r = index / `+g[1]+`;
      int c = index - r * `+g[1]+`;
      return ivec2(r, c);
    }
  `}(d,p);case 3:return v=p,m=ml(["r","c","d"],d),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;
      `+m+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(g,y){var b=ml(["r","c","d","d2"],g);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;
      `+b+`
      return ivec4(r, c, d, d2);
    }
  `}(d,p);case 5:return function(g,y){var b=ml(["r","c","d","d2","d3"],g);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+y[0]+`,
                             `+y[1]+`));

      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+b+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(d,p);case 6:return function(g,y){var b=ml(["r","c","d","d2","d3","d4"],g);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      `+b+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(d,p);default:throw new Error(d.length+"-D output sampling is not yet supported")}var v,m}(e.logicalShape,l),a=function(d){return`
    void setOutput(float val) {
      `+d.output+` = vec4(val, 0, 0, 0);
    }
  `}(c)),r&&(h+=dde),[h,f,a,s,o,u,n].join(`
`)}function Pc(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=n.shapeInfo.texShape,a=o[0],s=o[1];if(a===1&&s===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,l=u[0],c=u[1],f=Hu(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+l+", "+c+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 1:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+bc(n)+`
      }
    `;var o=n.shapeInfo.texShape,a=o[0],s=o[1];if(s===1&&a===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Hu(r);return s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+a+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+a+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(t);case 2:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=n.shapeInfo.texShape;if(a!=null&&Jn(r,a)){var s=a[0],u=a[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var l=sl(r),c=l.newShape,f=l.keptDims,h=c;if(h.length<r.length){var d=Oc(n,h);return`
      `+Pc(d)+`
      float `+o+`(int row, int col) {
        return `+o+"("+kc(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+bc(n)+`
      }
    `;var p=a[0],v=a[1],m=Hu(i);return v===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+m+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:p===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+m+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+v+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+m+`;
    vec2 uv = uvFromFlat(`+p+", "+v+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(t);case 3:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[1]*r[2],s=r[2],u=sl(r),l=u.newShape,c=u.keptDims,f=l;if(f.length<r.length){var h=Oc(n,f);return`
        `+Pc(h)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+kc(["row","col","depth"],c)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+a+", "+s+`, 1)));
        `+bc(n)+`
      }
    `;var d=n.shapeInfo.texShape,p=d[0],v=d[1],m=n.shapeInfo.flatOffset;if(v===a&&m==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+v+".0, "+p+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(v===s&&m==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+v+".0, "+p+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var g=Hu(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+a+" + col * "+s+" + depth + "+g+`;
        vec2 uv = uvFromFlat(`+p+", "+v+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(t);case 4:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[3],s=r[2]*a,u=r[1]*s,l=sl(r),c=l.newShape,f=l.keptDims;if(c.length<r.length){var h=Oc(n,c);return`
      `+Pc(h)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+kc(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+a+`, 1)));
        `+bc(n)+`
      }
    `;var d=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,v=p[0],m=p[1];if(m===u&&d==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+m+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(m===a&&d==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+m+".0, "+v+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var g=Hu(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+a+` + depth2;
      vec2 uv = uvFromFlat(`+v+", "+m+", index + "+g+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 5:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=r[4],s=r[3]*a,u=r[2]*s,l=r[1]*u,c=sl(r),f=c.newShape,h=c.keptDims;if(f.length<r.length){var d=Oc(n,f);return`
      `+Pc(d)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+kc(["row","col","depth","depth2","depth3"],h)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+l+", "+u+", "+s+", "+a+`)) +
          depth3;
        `+bc(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,m=v[0],g=v[1];if(g===l&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+a+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(g===a&&p==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var y=Hu(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+l+" + col * "+u+" + depth * "+s+` +
          depth2 * `+a+" + depth3 + "+y+`;
      vec2 uv = uvFromFlat(`+m+", "+g+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);case 6:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),a=sl(r),s=a.newShape,u=a.keptDims;if(s.length<r.length){var l=Oc(n,s);return`
      `+Pc(l)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+kc(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var c=r[5],f=r[4]*c,h=r[3]*f,d=r[2]*h,p=r[1]*d;if(n.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+d+", "+h+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+c+`, 1)));
        `+bc(n)+`
      }
    `;var v=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,g=m[0],y=m[1];if(y===p&&v==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+d+", "+h+", "+f+", "+c+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(y===c&&v==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+g+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var b=Hu(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+d+" + depth * "+h+` +
          depth2 * `+f+" + depth3 * "+c+" + depth4 + "+b+`;
      vec2 uv = uvFromFlat(`+g+", "+y+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function F6(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=_r(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),s=i.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=_r();return`
    vec4 `+a+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+l.texture2D+"("+o+`, uv);
    }
  `}(t);case 2:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],f=_r();if(u!=null&&Jn(o,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);

        return `+f.texture2D+"("+a+`, uv);
      }
    `;var h=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],d=Math.ceil(o[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+d+", "+h[0]+", "+h[1]+`, row, col);
      return `+f.texture2D+"("+a+`, uv);
    }
  `}(t);case 3:return function(i){var o=i.shapeInfo.logicalShape,a=i.name,s="get"+a.charAt(0).toUpperCase()+a.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(o[0]===1){var c=o.slice(1),f=Oc(i,c);return`
        `+F6(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+kc(["b","row","col"],[1,2])+`);
        }
      `}var h=l[0],d=l[1],p=Math.ceil(o[2]/2),v=p*Math.ceil(o[1]/2),m=_r();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+h+", "+d+", "+v+", "+p+`, b, row, col);
      return `+m.texture2D+"("+a+`, uv);
    }
  `}(t);default:return function(i){for(var o=i.shapeInfo.logicalShape,a=o.length,s=i.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],f=c[0],h=c[1],d=Math.ceil(o[a-1]/2),p=d*Math.ceil(o[a-2]/2),v="int b, int row, int col",m="b * "+p+" + (row / 2) * "+d+" + (col / 2)",g=2;g<a-1;g++)v="int b"+g+", "+v,p*=o[a-g-1],m="b"+g+" * "+p+" + "+m;var y=_r();return`
    vec4 `+u+"("+v+`) {
      int index = `+m+`;
      int texR = index / `+h+`;
      int texC = index - texR * `+h+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+h+", "+f+`);
      return `+y.texture2D+"("+s+`, uv);
    }
  `}(t)}}var cde=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,fde=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hde=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,dde=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Hu(t){return"offset"+t}function bc(t){var e=t.name,n=Ae(t.shapeInfo.logicalShape);return n<2?"return "+e+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function Nt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Oc(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function kc(t,e){return e.map(function(n){return t[n]}).join(", ")}var pde=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,W(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],o=Math.ceil(i/e);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var a,s,u=this.outputShape,l=u.length,c=Nt(l),f=Kr("coords",l);if(o===1){var h=Nt(s=l+1);a=`
        `+h+" sourceLocR = "+h+"("+f.join()+`, 0);
        ++`+f[l-1]+`;
        `+h+" sourceLocG = "+h+"("+f.join()+`, 0);
        ++`+f[l-2]+`;
        `+h+" sourceLocA = "+h+"("+f.join()+`, 0);
        --`+f[l-1]+`;
        `+h+" sourceLocB = "+h+"("+f.join()+`, 0);
        --`+f[l-2]+";"}else s=l,a=`
        `+c+` sourceLocR = coords;
        ++`+f[l-1]+`;
        `+c+` sourceLocG = coords;
        ++`+f[l-2]+`;
        `+c+` sourceLocA = coords;
        --`+f[l-1]+`;
        `+c+` sourceLocB = coords;
        --`+f[l-2]+";";var d=["x","y","z","w","u","v"].slice(0,s),p="."+d[s-1],v=d.map(function(C){return"int "+C}),m=Kr("sourceLocR",s-1).concat("inIdx.r"),g=Kr("sourceLocG",s-1).concat("inIdx.g"),y=Kr("sourceLocB",s-1).concat("inIdx.b"),b=Kr("sourceLocA",s-1).concat("inIdx.a"),_=n==="max"?"greaterThan":"lessThan",x=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+m.join()+`),
                             getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+b.join()+")));",S=`vec4(
            getAChannel(`+m.join()+`),
            hasNextCol ? getAChannel(`+g.join()+`) : 0.,
            hasNextRow ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+b.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+v.join()+`) {
        return getChannel(getBestIndicesA(`+d.join()+`),
                                          vec2(`+d.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+v.join()+`) {
        return getChannel(getA(`+d.join()+`),
                               vec2(`+d.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+c+` coords = getOutputCoords();
        bool hasNextCol = `+f[l-1]+" < "+(u[l-1]-1)+`;
        bool hasNextRow = `+f[l-2]+" < "+(u[l-2]-1)+`;
        `+a+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+S+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+x+`
          vec4 candidate = `+S+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+_+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},vde=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=s-1-t.padInfo.top,c=u-1-t.padInfo.left,f=1/(e*n);this.userCode=`
      const ivec2 pads = ivec2(`+l+", "+c+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+a+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},mde=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=c-1-t.padInfo.front,p=f-1-t.padInfo.top,v=h-1-t.padInfo.left,m=1/(e*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+p+", "+v+`);
      const float avgMultiplier = float(`+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},gde=function(t,e,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Ze(t,e),Ze(t,n);var a="0.0";r!=null&&(Ze(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";i!=null&&(Ze(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+a+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},yde=function(t,e,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ze(t,e),Ze(t,n);var a="vec4(0.0)";r!=null&&(Ze(t,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";i!=null&&(Ze(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = `+a+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},bde="return areal * breal - aimag * bimag;",wde="return areal * bimag + aimag * breal;",RM=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ze(e,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+t+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},g_="return a + b;",y_="return a - b;",IM="return a * b;",B6="return (a < 0.) ? b * a : a;",an=function(t,e,n){this.variableNames=["A","B"],this.outputShape=Ze(e,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+t+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},U6=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Ia=function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ze(e,n);var i=this.outputShape.length,o="";if(r)if(i===0||Ae(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Nt(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var a=Kr("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+a[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+a[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+t+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},xde=function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),_de=function(){function t(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),Sde=function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},Ede=function(t){this.outputShape=[],this.outputShape=Qf(t,1),this.variableNames=t.map(function(s,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var i=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var o=e.length,a=e[e.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},Cde=function(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Qf(t,e);var n=this.outputShape,r=n.length,i=Nt(r),o=Kr("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(m,g){return"T"+g});var s=new Array(t.length-1);s[0]=t[0][e];for(var u=1;u<s.length;u++)s[u]=s[u-1]+t[u][e];var l=a[e],c=a.slice(-2),f=a.join(),h="if ("+l+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+c.join()+`));
        }`;for(u=1;u<s.length;u++){var d=s[u-1];h+=`
        if (`+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+xg(a,l,d)+`),
            vec2(`+xg(c,l,d)+`));
        }`}var p=s.length,v=s[s.length-1];h+=`
        return getChannel(
          getT`+p+"("+xg(a,l,v)+`),
          vec2(`+xg(c,l,v)+"));",this.userCode=`
      float getValue(`+a.map(function(m){return"int "+m})+`) {
        `+h+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+n[r-2]+` &&
            `+o[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function xg(t,e,n){var r=t.indexOf(e);return t.map(function(i,o){return o===r?i+" - "+n:i}).join()}var Ade=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Tde=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dataFormat==="channelsLast",a=e-1-t.padInfo.top,s=n-1-t.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+c+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+l+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Pde=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yF = 0; yF < `+t.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+i+`;

            if (xF < 0 || xF >= `+t.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+t.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+o+`;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+t.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+a+`;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Ode=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+l+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+t.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+a+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+t.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},kde=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+t.batchSize+`; b++) {
          for (int yR = 0; yR < `+t.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+t.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+i+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},Rde=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=e-1-t.padInfo.top,a=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},DM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,o=t.padInfo.left,a=t.strideHeight,s=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,h=4*Math.floor(t.inChannels/4),d=t.inChannels%4,p=t.dataFormat==="channelsLast",v=p?1:2,m=p?2:3,g=p?3:1,y="",b="";n&&(y=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,b="result = activation(result);");var _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+y+`

      const ivec2 strides = ivec2(`+a+", "+s+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+g+`];

        ivec2 xRCCorner =
            ivec2(coords[`+v+"], coords["+m+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+c+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+l+`;

            if (xC < 0 || xC >= `+t.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+h+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(d===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+h+`) *
                    getW(wR, wC, `+h+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+h+`, xR, xC) *
                    getW(wR, wC, `+h+`, d2);
              }

            } else if (`+(d===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(d===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+h+`, d2),
                getW(wR, wC, `+h+` + 1, d2),
                getW(wR, wC, `+h+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+h+`),
                  getX(batch, xR, xC, `+h+` + 1),
                  getX(batch, xR, xC, `+h+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+h+`, xR, xC),
                  getX(batch, `+h+` + 1, xR, xC),
                  getX(batch, `+h+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+_+`
        `+b+`
        setOutput(result);
      }
    `},Ide=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,f=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+e+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+c+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`; wC++) {
              int xC = xCCorner + wC * `+l+`;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+d+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+d+`) *
                  getW(wF, wR, wC, `+d+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+d+`),
                  getX(batch, xF, xR, xC, `+d+` + 1),
                  getX(batch, xF, xR, xC, `+d+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+d+`, d2),
                  getW(wF, wR, wC, `+d+` + 1, d2),
                  getW(wF, wR, wC, `+d+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},NM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=t.outChannels/t.inChannels,v="",m="";n&&(v=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,m="result = activation(result);");var g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+v+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+h+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+d+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+g+`
        `+m+`
        setOutput(result);
      }
    `},MM=function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;for(var i=t.inHeight,o=t.inWidth,a=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterHeight,d=t.filterWidth,p=d,v="int xR; int xC; int xCOffset;",m=0;m<h;m++)for(var g=0;g<d;g++)v+=`
          vec4 xTexelR`+m+"C"+2*g+` = vec4(0.);
          vec4 wR`+m+"C"+g+` = vec4(0.);
          vec4 xR`+m+"C"+g+" = vec4(0.);";for(m=0;m<h;m++)for(var y=0;y<p;y++){if(v+=`
          xR = xRCorner + `+m*c+`;
          xC = xCCorner + `+(g=2*y)*f+`;
        `,l===1){if(g<d&&(v+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+m+"C"+g+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+`.xy);
                } else {
                  xR`+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xR`+m+"C"+g+" = xTexelR"+m+"C"+g+`;
              `,g+1<d)){var b=s%2==0?o6(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(v+=`
                  xCOffset = xC + `+s%2+" + "+b+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(v+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+m+"C"+g+` = vec4(0.);
                    }
                  `),v+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.xy);
                `):v+=`
                  xCOffset = xC + `+b+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+`;
                `}}else g<d&&(v+=`
              if(xR >= 0 && xR < `+i+`) {
            `,s%2==1?(v+=`
                xCOffset = xC + 1 - `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
              `,g+1<d&&(v+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+l+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+`.xy, final.xy);
                `)):(v+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+m+"C"+g+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+m+"C"+g+` = vec4(0.);
                }

                xCOffset = xC + `+l+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+m+"C"+(g+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+m+"C"+(g+2)+` = vec4(0.);
                }

                xR`+m+"C"+g+` = vec4(
                  xTexelR`+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+`.xy);
              `,g+1<d&&(v+=`
                  xR`+m+"C"+(g+1)+` = vec4(
                    xTexelR`+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+`.zw);
                `)),v+="}");g<d&&(v+=`
            vec4 wTexelR`+m+"C"+g+" = getW("+m+", "+g+`, d1, q);
            wR`+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+`.xz);
          `,g+1<d&&(v+=`
              vec4 wTexelR`+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+`, d1, q);
              wR`+m+"C"+(g+1)+` =
                vec4(wTexelR`+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<h;m++)for(g=0;g<d;g++)v+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var _="",x="";n&&(_=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,x="result = activation(result);");var S=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+_+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+v+`

        vec4 result = dotProd;
        `+S+`
        `+x+`
        setOutput(result);
      }
    `},Dde=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],a=t[1],s=t[2],u=t[3],l=e[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var h=r==="bilinear"?1:0,d=[a-1+".0",s-1+".0"],p=d[0],v=d[1],m=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],g=m[0],y=m[1],b=m[2],_=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],x=_[0],S=_[1],E=_[2];this.userCode=`
      const float height_ratio = float(`+g+`);
      const float width_ratio = float(`+x+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+y+`;
        float width_scale = `+S+`;

        float in_y = `+b+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+v+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+h+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},Nde=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Nt(r)+` coords = getOutputCoords();
        int end = `+$M(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+$M(r,"coords")+` = idx;
          val += getX(`+function(a,s){if(a===1)return""+s;if(a===2)return s+".x, "+s+".y";if(a===3)return s+".x, "+s+".y, "+s+".z";if(a===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+a+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function $M(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var Mde=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=rv.DENSE;var e=lp(t),n=_r();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ml(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},$de=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=rv.DENSE;var e=lp(t),n=_r();this.outputShape=t,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ml(["r","c","d"],t)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},jde=function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),Lde=function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Fde=function(t){this.variableNames=["A"],this.outTexUsage=wi.DOWNLOAD;var e=_r();this.outputShape=t,this.userCode=`
      `+L6+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},Bde=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=wi.DOWNLOAD;var e=_r();this.outputShape=t,this.userCode=`
      `+L6+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},Ude=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=_r(),i=e[0],o=e[1];this.outputShape=t;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode=`
      `+xP(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+a+`, 0., 0., 0.);
      }
    `},Vde=function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=_r(),i=e[0],o=e[1];this.outputShape=t;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;a+=`
          localCoords = coords;
          if(localCoords[2] + `+l+" < "+t[2]+`) {
            localCoords[2] += `+l+`;
            if(localCoords[1] + `+u+" < "+t[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+c+`] = values[0];
              } else if(offset == 1) {
                result[`+c+`] = values[1];
              } else if(offset == 2) {
                result[`+c+`] = values[2];
              } else {
                result[`+c+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+xP(t)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+a+`

        `+r.output+" = "+s+`;
      }
    `},Wde="return real * expR - imag * expI;",zde="return real * expI + imag * expR;",jM=function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+t+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},Hde=function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(n.valueLoc,e)}},t}(),Gde=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=Nt(this.rank),o=function(a,s){var u=a.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],f=0;f<a.length;f++)f===s?c.push("int(getIndices("+l[f]+"))"):c.push(""+l[f]);return c.join()}(t,n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},qde=function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=Nt(e.length),i=Nt(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Kde(t,e){var n=_r();return Wfe(t,e,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Xde(t,e){return Kfe(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Yde(t,e){return Xfe(t,e,new Uint16Array([0,1,2,2,1,3]))}function fm(t,e,n,r,i,o,a){Jfe(n,r);var s=Yfe(t,e),u=t.TEXTURE_2D;return Te(t,e,function(){return t.bindTexture(u,s)}),Te(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),Te(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),Te(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),Te(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),Te(t,e,function(){return t.texImage2D(u,0,i,n,r,0,o,a,null)}),Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),s}function Jde(t,e,n,r,i){var o=_w(n,r);return fm(t,e,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function Qde(t,e,n,r,i){var o=_w(n,r);return fm(t,e,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function Zde(t,e,n,r,i){var o=_w(n,r);return fm(t,e,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function epe(t,e,n,r,i){var o=cm(n,r);return fm(t,e,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function tpe(t,e,n,r,i){var o=cm(n,r);return fm(t,e,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function npe(t,e,n,r){return Te(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),EM(t,e,n,"clipSpacePos",r,3,20,0)&&EM(t,e,n,"uv",r,2,20,12)}function rpe(t,e,n,r,i,o,a){var s,u,l;Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(r*i*4),u=t.FLOAT,l=a.internalFormatPackedFloat),s.set(o),Te(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,i,0,t.RGBA,u,s)}),Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function ipe(t,e,n,r){Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Te(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):Te(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),Te(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function ope(t,e,n,r,i){var o=t.createBuffer();Te(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var a=16*n*r;return Te(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)}),Te(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),Te(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function ape(t,e,n){var r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function spe(t,e,n,r,i){var o=_w(n,r),a=o[0],s=o[1],u=new Uint8Array(n*r*4);return Te(t,e,function(){return t.readPixels(0,0,a,s,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function upe(t,e,n,r,i,o,a,s){var u=t,l=new Float32Array(function(c,f){var h=cm(c,f);return h[0]*h[1]*4}(o,a));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function lpe(t,e,n,r){var i=new Float32Array(n*r*4);return Te(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)}),i}var cpe=function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=re().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,Lfe(n,e)):this.gl=xa(n);var r="WEBGL_color_buffer_float";if(re().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=gg(this.gl,this.debug,"OES_texture_float"),Hi(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=gg(this.gl,this.debug,"OES_texture_half_float");else if(re().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Hi(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=gg(this.gl,this.debug,"EXT_color_buffer_half_float");else if(re().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Hi(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Hi(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Xde(this.gl,this.debug),this.indexBuffer=Yde(this.gl,this.debug),this.framebuffer=Qfe(this.gl,this.debug),this.textureConfig=fP(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return re().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;Te(n,this.debug,function(){return n.finish()}),Te(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),Te(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),Te(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),Te(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),Te(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),Jde(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),Qde(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),Zde(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),ipe(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,i){this.throwIfDisposed(),rpe(this.gl,this.debug,e,n,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),tpe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),epe(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(CM(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Te(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return spe(i.gl,i.debug,n,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,i,o,a){return upe(this.gl,e,0,0,0,o,a,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return ape(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var i=ope(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,i=this;if(re().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var s=o.clientWaitSync(a,0,0);return s===o.ALREADY_SIGNALED||s===o.CONDITION_SATISFIED},n=a}else re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(n,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return lpe(i.gl,i.debug,n,r)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=zfe(n,this.debug,e),i=Kde(n,this.debug),o=Gfe(n,this.debug);return Te(n,this.debug,function(){return n.attachShader(o,i)}),Te(n,this.debug,function(){return n.attachShader(o,r)}),qfe(n,this.debug,o),this.debug&&d_(n,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=npe(n,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&Te(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&d_(this.gl,this.debug,this.program),Te(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?ehe(this.gl,this.debug,e,n):the(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),Te(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),nhe(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var i=cm(n,r),o=i[0],a=i[1];this.setOutputMatrixTextureDriver(e,o,a)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&d_(this.gl,this.debug,this.program),yg(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Te(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Te(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=gg(this.gl,this.debug,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return Ee(this,void 0,void 0,function(){var n=this;return Ce(this,function(r){switch(r.label){case 0:return[4,yM(function(){return n.disposed||n.isQueryAvailable(e,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||yM(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),p_(this.gl,this.debug,e,this.framebuffer),this.debug&&yg(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(p_(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&yg(this.gl)):CM(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var i=this.gl;p_(i,this.debug,e,this.framebuffer),this.debug&&yg(i),this.outputTexture=e,Te(i,this.debug,function(){return i.viewport(0,0,n,r)}),Te(i,this.debug,function(){return i.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,i){var o=this;this.throwIfDisposed(),Te(this.gl,this.debug,function(){return o.gl.scissor(e,n,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function LM(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var i=n.logicalShape,o=e[r],a=o.shape;if(!Jn(i,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+a+" must match");if(!n.isUniform||!o.isUniform){var s=n.texShape,u=o.isUniform?null:o.texData.texShape;if(!Jn(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var fpe=function(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var r=n.filterWidth,i=n.inChannels,o=n.strideWidth,a=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,f=n.dataFormat,h=s.left,d=s.top,p=i*r,v=_r(),m=f==="channelsLast",g=m?0:1,y=m?1:2,b="",_=0;_<=1;_++)for(var x=0;x<=1;x++)b+=`
          blockIndex = rc.y + `+x+`;
          pos = rc.x + `+_+`;

          if(blockIndex < `+t[1]+" && pos < "+t[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+a+" - "+d+`;
            d0 = offsetY + `+c+" * (pos / "+p+`);

            if(d0 < `+e[g]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+o+". - "+h+`.);
              d1 = offsetX + `+l+" * (int(mod(float(pos), "+p+".) / "+i+`.));

              if(d1 < `+e[y]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+m+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*_+x)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*_+x)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+b+`

        `+v.output+` = result;
      }
    `},hpe=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var o,a=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+a+"; j <= "+a+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},dpe=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},ppe=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,a=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+a+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+a+"; j <= "+a+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},vpe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,a=i-1-t.padInfo.top,s=o-1-t.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},mpe=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=s-1-t.padInfo.front,f=u-1-t.padInfo.top,h=l-1-t.padInfo.left,d=s*u*l-1;this.userCode=`
      const ivec3 pads = ivec3(`+c+", "+f+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+t.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+t.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+l+`;
                wC += `+a+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+t.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+d+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+l+` +
                  wR * `+l+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},b_=function(t,e,n,r,i,o,a){n===void 0&&(n=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),a===void 0&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var s=n?t[1]:t[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",p="";o&&(d=a?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,p="result = activation(result);");var v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+d+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+l+`);
          vec4 b = getMatrixB(rc.x, `+c+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+h[0]+`);
          result += (`+f[1]+" * "+h[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+v+`

        `+p+`

        setOutput(result);
      }
    `},gpe=function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t}(),ype=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},bpe=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;var e=t.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Kr("rc",e),r=Nt(e),i=function(s,u,l){if(s===1)return"rc > "+u[0];for(var c="",f=s-2;f<s;f++)c+=l[f]+" >= "+u[f],f<s-1&&(c+="||");return c}(e,t,n),o=function(s,u,l,c){if(s===1)return"";var f=c.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+l+`;
  `}(e,t[t.length-1],t[t.length-2],n),a=function(s,u){var l=s.length,c=function(f,h){for(var d=[],p=0;p<=1;p++)for(var v=0;v<=1;v++){for(var m=(p===0?"r":"rp1")+", "+(v===0?"c":"cp1"),g=2;g<f;g++)m=h[h.length-1-g]+","+m;d.push(m)}return d}(l,u);return l===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+c[0]+`),
          cEdge ? 0. : getA(`+c[1]+`),
          rEdge ? 0. : getA(`+c[2]+`),
          rEdge || cEdge ? 0. : getA(`+c[3]+")"}(t,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+a+`));
          }
        }
      `}},wpe=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,i=Nt(r),o=e.map(function(u){return u[0]}).join(","),a=e.map(function(u,l){return u[0]+t[l]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+a+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},xpe=function(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map(function(m,g){return m[0]+t[g]+m[1]});for(var r=t.length,i=Nt(r),o=e.map(function(m){return m[0]}).join(","),a=e.map(function(m,g){return m[0]+t[g]}).join(","),s=Kr("rc",r),u=Kr("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[i+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+l+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+l+") {"],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",p=0,v=r===1?2:4;p<v;p++)d+=`
        `+f[p]+`
        if (`+h+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+i+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+c+`);
        }
      `;d+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+a+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+d+`
        setOutput(result);
      }
    `},w_=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var h=e==="avg",d="0.0";if(h||(d="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+c+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+l+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+t.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+l+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(p="avgValue / count");var v=4*Math.floor(r/4),m=r%4,g=`
      if (`+h+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+c+", "+f+`);
      const float initializationValue = `+d+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+d+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+a+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+t.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+g+`
          }

          int xC = xCCorner + `+v+`;
          if (`+(m===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(m===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+g+`
          } else if (`+(m===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+g+`
          }
        }
        setOutput(`+p+`);
      }
    `}},x_=function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,a=t.strideWidth,s=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var m=e==="avg",g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+a+`);
        const ivec3 pads = ivec3(`+d+", "+p+", "+v+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+c+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+t.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+t.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+h+`;
                  wC += `+l+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+t.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+h+` +
                      wR * `+h+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var y=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(y="avgValue / count");var b=4*Math.floor(r/4),_=r%4,x=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+a+`);
      const ivec3 pads = ivec3(`+d+", "+p+", "+v+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+t.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+c+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+t.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+t.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+b+`; wC += 4) {
              int xC = xCCorner + wC * `+l+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+l+`, ch)
              );

              `+x+`
            }

            int xC = xCCorner + `+b+`;
            if (`+(_===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+x+`
            } else if (`+(_===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                initializationValue,
                initializationValue
              );

              `+x+`
            } else if (`+(_===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+l+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+l+`, ch),
                initializationValue
              );

              `+x+`
            }
          }
          setOutput(`+y+`);
        }
      }
    `}},_pe=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/n);this.outputShape=[r,o];var a="0.0",s="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",s="min"):e==="max"&&(a="-1.0 / 1e-20",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,h="vec4";e==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");var d="";i%n>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+a+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+a+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===2)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(c===3)+`) {
          `+h+" values = "+h+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},Spe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ml(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+xP(t)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+t[1]+`;
        int cols = `+t[2]+`;

        `+n+`

        setOutput(result);
      }
    `},Epe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?i-1:i,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],d=1/f,p=1/h,v=2*Math.ceil(d)+2,m=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+m+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},Cpe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?o-1:o,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},Ape=function(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?o-1:o,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`,
          `+u[1]/l[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+a+`.0,
                                     `+a+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},Tpe=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],a=t.shape,s=a[1],u=a[2],l=[n&&s>1?i-1:i,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],d=1/f,p=1/h,v=2*Math.ceil(d)+2,m=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+h+`);

        const float invHeightScale = float(`+d+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+v+`);
        const int winWidth = int(`+m+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+l[0]+`) *
                (float(dyR) / float(`+c[0]+`));

            float sourceFracCol =
                float(`+l[1]+`) *
                  (float(dyC) / float(`+c[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},Ppe=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],a=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?o-1:o,r&&n>1?a-1:a],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/l[0]+`,
          `+u[1]/l[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+a+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+c+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},Ope=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(o,a){return function(s){return e.indexOf(s)!==-1&&t[s]!==1?t[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(a)}).join(","),i=Nt(n);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+t[0]+` - coord - 1));
        }
      `},kpe=function(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=Kr("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],a=Nt(n);function s(u){var l=t.map(function(c,f){return function(h,d){return e.indexOf(h)!==-1&&t[h]!==1?t[h]+" - "+d[h]+" - 1":""+d[h]}(f,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+t[0]+` - rc - 1),
            `+t[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+t[0]+` - (rc  + 1) - 1),
                `+t[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+a+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},FM=function(t,e,n,r,i,o,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=Nt(i.length),u=Nt(o.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var h="getUpdates("+f+")",d=e>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+t+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+c+`);
              flattenedIndex += index * `+d+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+h+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},Rpe=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),u=n%4,l=`
        sumValue += dot(values, segFilter);
    `,c="";i%n>0&&(c=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var f="";i%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+c+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+l+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+l+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+l+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+l+`
        }
        setOutput(sumValue);
      }
    `},Ipe=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],u=0;u<e.length;u++)s.push(""+o[u]),u<t&&a.push(""+o[u]);r=a.join(),i=s.join()}var l=Nt(n);this.userCode=`
      void main() {
        `+l+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},Dpe=function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=Nt(this.rank),i="uniform int start["+this.rank+"];",o=function(a){if(a===1)return"sourceLoc";if(a<=6)return __.slice(0,a).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+a+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map(function(a,s){return"sourceLoc."+__[s]+" = start["+s+"] + coords."+__[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+n+`
        setOutput(getSource(`+o+`));
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),__=["x","y","z","w","u","v"],Npe=function(){function t(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var n=Nt(this.rank),r=Kr("coords",this.rank),i=Kr("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",a="getChannel(getSource("+i.join()+"), "+o+")",s=`
      result.x = `+a+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+a+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+a+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+a+`;
        }
      }
    `,l=this.rank<=4?`sourceLoc = coords +
            `+n+"("+e.map(function(c,f){return"start["+f+"]"}).join()+");":e.map(function(c,f){return i[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+l+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),Mpe=function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=Nt(n.length),o=Nt(n.length),a="";if(r===1)a="coords * strides + begin";else{var s=0;a=n.map(function(u,l){return s++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(s-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+t+`);
      `+i+" strides = "+i+"("+e+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+a+`));
      }
    `},$pe=function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var i,o=BM(n,r),a=UM(e,o,r);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return this.numUsedTextures++,this.log(),o===mi.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===mi.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===mi.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===mi.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===mi.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),i},t.prototype.releaseTexture=function(e,n,r,i){if(this.freeTextures!=null){var o=UM(n,BM(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],s=a.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(s,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(i){e.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function BM(t,e){if(t===wi.UPLOAD)return mi.PACKED_2X2_FLOAT32;if(t===wi.RENDER||t==null)return function(n){return re().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?mi.PACKED_2X2_FLOAT32:mi.UNPACKED_FLOAT32:n?mi.PACKED_2X2_FLOAT16:mi.UNPACKED_FLOAT16}(e);if(t===wi.DOWNLOAD||t===wi.PIXELS)return mi.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function UM(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var jpe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=Nt(this.rank),o=function(a){var s=a.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+a[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<a.length;c++)l.push("imod("+u[c]+", "+a[c]+")");return l.join()}(t);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},Lpe=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=Nt(this.rank),o=function(a){var s=a.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(s),c=0;c<a.length;c++)l[a[c]]=u[c];return l.join()}(e);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},Fpe=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Nt(this.rank),o=j6("rc",this.rank),a=new Array(this.rank);for(r=0;r<e.length;r++)a[e[r]]=o[r];var s="vec2("+a.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+a.join()+"), "+s+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+l+`;
      if(`+u+`) {
        result[1] = `+l+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+l+`;
        if(`+u+`) {
          result[3] = `+l+`;
        }
      }
      setOutput(result);
    }
    `},_P=1.7580993408473768,SP=1.0507009873554805,Ge=function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},No="if (isnan(x)) return x;",Bpe="return x;",VM="return abs(x);",V6=No+`
  return (x < 0.0) ? 0.0 : x;
`,W6=No+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,z6="return (x >= 0.0) ? x : (exp(x) - 1.0);",Upe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+_P+`;
  float scale = `+SP+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,WM="return -x;",zM="return ceil(x);",HM="return floor(x);",GM="return exp(x);",qM="return exp(x) - 1.0;",Vpe=No+`
  return sin(x);
`,Wpe=No+`
  return cos(x);
`,zpe=No+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Hpe=No+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Gpe=No+`
  return atan(x);
`,qpe=No+"return log(x + sqrt(x * x + 1.0));",Kpe=No+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Xpe=No+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,_g="return x;",Ype="return x;",H6=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,G6=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,q6=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,_d=function(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Jpe=function(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;var e=t.length,n=Kr("rc",e),r=Nt(e),i=function(s,u){if(s===1)return"rc";for(var l="",c=0;c<s;c++)l+=u[c],c<s-1&&(l+=",");return l}(e,n),o=n.slice(-2),a=e<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+a+`));
      }
    `},Sg={};function Eg(t,e){if(e===void 0&&(e=!1),t==="linear")return e?Ype:Bpe;if(t==="relu")return e?H6:V6;if(t==="elu")return e?q6:z6;if(t==="relu6")return e?G6:W6;if(t==="prelu")return e?U6:B6;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var Qpe=600,Zpe=function(t){function e(n){var r,i=t.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!re().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var o=xa(re().getNumber("WEBGL_VERSION"));i.binaryCache=((r=re().getNumber("WEBGL_VERSION"))in Sg||(Sg[r]={}),Sg[r]),i.gpgpu=new cpe(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=n,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=n.gl.canvas;return i.textureManager=new $pe(i.gpgpu),i.numMBBeforeWarning=re().global.screen==null?1024:re().global.screen.height*re().global.screen.width*window.devicePixelRatio*Qpe/1024/1024,i.texData=new P6(i,K),i}return Do(e,t),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(n,r,i){if(re().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:n,usage:wi.UPLOAD}),o},e.prototype.move=function(n,r,i,o){if(re().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:i,dtype:o,values:r,usage:wi.UPLOAD})},e.prototype.readSync=function(n){var r=this.texData.get(n),i=r.values,o=r.dtype,a=r.complexTensors,s=r.slice,u=r.shape,l=r.isPacked;if(s!=null){var c=void 0;c=l?new _d(u,_g):new Ge(u,_g);var f=this.runWebGLProgram(c,[{dataId:n,shape:u,dtype:o}],o),h=this.readSync(f.dataId);return this.disposeData(f.dataId),h}if(i!=null)return this.convertAndCacheOnCPU(n);if(o==="string")return i;var d,p,v=this.activeTimers!=null;return v&&(d=Yo()),o==="complex64"?p=gC(a.real.dataSync(),a.imag.dataSync()):p=this.getValuesFromTexture(n),v&&(this.downloadWaitMs+=Yo()-d),this.convertAndCacheOnCPU(n,p)},e.prototype.read=function(n){return Ee(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,_,x,S,E,C;return Ce(this,function(A){switch(A.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(T){return r.push(T)})];if(i=this.texData.get(n),o=i.values,a=i.shape,s=i.slice,u=i.dtype,l=i.complexTensors,c=i.isPacked,s!=null)return f=void 0,f=c?new _d(a,_g):new Ge(a,_g),h=this.runWebGLProgram(f,[{dataId:n,shape:a,dtype:u}],u),d=this.read(h.dataId),this.disposeData(h.dataId),[2,d];if(o!=null)return[2,this.convertAndCacheOnCPU(n)];if(!re().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&re().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&re().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(n),m=this.texData.get(v.dataId),p=(C=this.gpgpu).createBufferFromTexture.apply(C,[m.texture].concat(lp(a)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:A.sent(),A.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([l.real.data(),l.imag.data()])];case 3:return y=A.sent(),b=y[0],_=y[1],g=gC(b,_),[3,5];case 4:p==null?g=this.getValuesFromTexture(n):(x=Ae(a),g=this.gpgpu.downloadFloat32MatrixFromBuffer(p,x)),A.label=5;case 5:return v!=null&&this.disposeData(v.dataId),S=this.convertAndCacheOnCPU(n,g),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(T){return T(S)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,S]}})})},e.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var i=n[r];if(!Ufe(i))throw re().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(n){var r,i=this.texData.get(n),o=i.shape,a=i.dtype,s=i.isPacked,u=Ae(o);if(re().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(n),c=this.texData.get(l.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[c.texture].concat(lp(o))).subarray(0,u);return this.disposeData(l.dataId),f}var h=re().getBool("WEBGL_PACK")&&s===!0,d=h?v_(o):o,p=h?new Bde(d):new Fde(d),v=this.runWebGLProgram(p,[{shape:d,dtype:a,dataId:n}],"float32"),m=this.texData.get(v.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,u);return this.disposeData(v.dataId),g},e.prototype.time=function(n){return Ee(this,void 0,void 0,function(){var r,i,o,a,s,u,l;return Ce(this,function(c){switch(c.label){case 0:return r=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,n(),a=Yf(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=Yf(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(a)]:[3,2];case 1:return l=c.sent(),u.kernelMs=xfe(l),u.getExtraProfileInfo=function(){return l.map(function(f,h){return{name:s[h],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},c.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Yo(),endMs:null}},e.prototype.endTimer=function(n){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=Yo(),n)},e.prototype.getQueryTime=function(n){return Ee(this,void 0,void 0,function(){var r;return Ce(this,function(i){return re().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},e.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},e.prototype.releaseGPUData=function(n){var r=this.texData.get(n),i=r.texture,o=r.dtype,a=r.texShape,s=r.usage,u=r.isPacked,l=r.slice,c=l&&l.origDataId||n,f=this.dataRefCount.get(c);f>1?this.dataRefCount.set(c,f-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(i,a,s,u)));var h=this.texData.get(n);h.texture=null,h.texShape=null,h.isPacked=!1,h.slice=null},e.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},e.prototype.getDataInfo=function(n){return this.texData.get(n)},e.prototype.getCPUBackend=function(){return re().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=K.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(n,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(o){return i.texData.get(o.dataId).texture==null&&o.size<r})},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(n,r){var i=this.makeOutput(n.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:K.keep(n.clone()),imag:K.keep(r.clone())},i},e.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,i);if(Ae(i)===0)return ur([],i,n.dtype);var o=this.texData.get(n.dataId).isPacked,a=A6(n.shape,r,i);if(o||!a){var s=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Npe(i):new Dpe(i),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,i)},e.prototype.shallowSlice=function(n,r,i){var o=this.texData.get(n.dataId),a=this.makeOutput(i,n.dtype),s=this.texData.get(a.dataId);Object.assign(s,o),s.shape=i,s.dtype=n.dtype;var u=T6(r,n.strides);o.slice&&(u+=o.slice.flatOffset),s.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||n.dataId};var l=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,l+1),a},e.prototype.stridedSlice=function(n,r,i,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,i,o);var a=mP(r,i,o);if(a.some(function(u){return u===0}))return ur([],a);var s=new Mpe(r,o,a);return this.compileAndRun(s,[n])},e.prototype.reverse=function(n,r){var i=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kpe(n.shape,r):new Ope(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var i=n.map(function(d){return Ui(d)}),o=n.map(function(d){return Zo(d)});return or(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>re().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var a=Math.floor(n.length/2),s=this.concat(n.slice(0,a),r),u=this.concat(n.slice(a),r);return this.concat([s,u],r)}if(re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var l=new Cde(n.map(function(d){return d.shape}),r);return this.compileAndRun(l,n)}var c=Qf(n.map(function(d){return d.shape}),r),f=n.map(function(d){return d.as2D(-1,Ae(d.shape.slice(r)))}),h=new Ede(f.map(function(d){return d.shape}));return this.compileAndRun(h,f).reshape(c)},e.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,WM,n.dtype);var r=new Ge(n.shape,WM);return this.compileAndRun(r,[n])},e.prototype.batchMatMul=function(n,r,i,o){var a=i?n.shape[2]:n.shape[1],s=o?r.shape[1]:r.shape[2],u=i?n.shape[1]:n.shape[2],l=n.shape[0];if((a===1||s===1)&&u>1e3){i&&(n=n.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var c=s===1?n:n.as3D(l,u,1),f=s===1?2:1,h=s===1?r.as3D(l,1,u):r;return this.multiply(c,h).sum(f,!0)}var d=sr(n.dtype,r.dtype),p=new b_(n.shape,[l,a,s],i,o);return this.compileAndRun(p,[n,r],d)},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,o=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=o?r.shape[2]:r.shape[1],f=a?i.shape[1]:i.shape[2],h=r.shape[0],d=sr(r.dtype,i.dtype),p=s!=null,v=l!=null,m=u?Eg(u,!0):null,g=new b_(r.shape,[h,c,f],o,a,p,m,v),y=[r,i];return s&&y.push(s),l&&y.push(l),this.compileAndRun(g,y,d)},e.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var i=this.texData.get(n.dataId),o=this.texData.get(r.dataId),a=new RM(bde,n.shape,r.shape),s=new RM(wde,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],l=this.compileAndRun(a,u),c=this.compileAndRun(s,u),f=this.complex(l,c);return l.dispose(),c.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,IM,n.dtype);var h=new an(IM,n.shape,r.shape);return this.compileAndRun(h,[n,r],n.dtype)},e.prototype.batchNormalization=function(n,r,i,o,a,s){var u=[n,r,i],l=null;s!=null&&(l=s.shape,u.push(s));var c=null;if(a!=null&&(c=a.shape,u.push(a)),re().getBool("WEBGL_PACK_NORMALIZATION")){var f=new yde(n.shape,r.shape,i.shape,l,c,o);return this.compileAndRun(f,u)}var h=new gde(n.shape,r.shape,i.shape,l,c,o);return this.compileAndRun(h,u)},e.prototype.localResponseNormalization4D=function(n,r,i,o,a){var s=re().getBool("WEBGL_PACK_NORMALIZATION")?new ppe(n.shape,r,i,o,a):new hpe(n.shape,r,i,o,a);return this.compileAndRun(s,[n])},e.prototype.LRNGrad=function(n,r,i,o,a,s,u){var l=new dpe(r.shape,o,a,s,u);return this.compileAndRun(l,[r,i,n])},e.prototype.tile=function(n,r){if(n.dtype==="string"){var i=this.readSync(n.dataId).map(function(a){return p0(a)});return M6(Ue(n.shape,n.dtype,i),r)}var o=new jpe(n.shape,r);return this.compileAndRun(o,[n])},e.prototype.pad=function(n,r,i){var o=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xpe(n.shape,r,i):new wpe(n.shape,r,i);return this.compileAndRun(o,[n])},e.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var i=re().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Fpe(n.shape,r):new Lpe(n.shape,r);return this.compileAndRun(i,[n])},e.prototype.gather=function(n,r,i){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,i);var o=new Gde(n.shape,r.size,i);return this.compileAndRun(o,[n,r])},e.prototype.batchToSpaceND=function(n,r,i){W(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(f,h){return f*h}),a=w0(n.shape,r,o),s=x0(a.length,r.length),u=_0(n.shape,r,o),l=_6(i,r.length),c=S6(u,i,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){W(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(h,d){return h*d}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=w0(u.shape,r,o,!1),c=x0(l.length,r.length,!1),f=_0(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.reduce=function(n,r,i){var o=n.shape[0],a=n.shape[1],s=m_(a),u=new _pe({windowSize:s,inSize:a,batchSize:o},r),l=this.compileAndRun(u,[n],i);return l.shape[1]===1?l:this.reduce(l,r,i)},e.prototype.argReduce=function(n,r,i){i===void 0&&(i=null);var o=n.shape[0],a=n.shape[1];i!=null&&(o=i.shape[0],a=i.shape[1]);var s=m_(a),u=new ude({windowSize:s,inSize:a,batchSize:o},r,i==null),l=[n];i!=null&&l.push(i);var c=this.compileAndRun(u,l,"int32");return c.shape[1]===1?c:this.argReduce(n,r,c)},e.prototype.argReducePacked=function(n,r,i){i===void 0&&(i=null);var o=i!=null?i.shape:n.shape,a=m_(o[o.length-1]),s=new pde(o,a,r,i==null),u=i==null?[n]:[n,i],l=this.compileAndRun(s,u,"int32");return l.rank===n.rank?this.argReducePacked(n,r,l):l},e.prototype.sum=function(n,r){pi("sum",r,n.rank);var i=br(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a),u=u_(n.dtype);return this.reduce(s,"sum",u).reshape(o)},e.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var i=br(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a),u=u_(n.dtype);return this.reduce(s,"prod",u).reshape(o)},e.prototype.unsortedSegmentSum=function(n,r,i){var o=0,a=_a([o],n.rank),s=n;a!=null&&(s=n.transpose(a),o=Sa(1,n.rank)[0]);var u=function(d,p,v){for(var m=[],g=d.length,y=0;y<g;y++)y!==p?m.push(d[y]):m.push(v);return m}(s.shape,o,i),l=Ae([s.shape[o]]),c=s.as2D(-1,l),f=u_(n.dtype),h=this.segOpCompute(c,"unsortedSegmentSum",r,f,i).reshape(u);return a!=null&&(h=h.transpose(hP(a))),h},e.prototype.segOpCompute=function(n,r,i,o,a){var s=n.shape[0],u=n.shape[1],l=function(h,d){var p,v=!1;for(h<=C6?(p=h,v=!0):p=uC(h,Math.floor(Math.sqrt(h)));!v;)p>d||p===h?v=!0:p=uC(h,p+1);return p}(u,a),c=new Rpe({windowSize:l,inSize:u,batchSize:s,numSegments:a}),f=this.compileAndRun(c,[n,i],o);return f.shape[1]===a?f:(i=b0(0,a).tile([u/l]),this.segOpCompute(f,r,i,o,a))},e.prototype.argMinMaxReduce=function(n,r,i){var o=[r];if(pi("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,n.rank),!re().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var a=br(n.shape,o),s=a[0],u=Ae(a[1]),l=n.as2D(-1,u);return this.argReduce(l,i).reshape(s)}return this.argReducePacked(n,i)},e.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},e.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},e.prototype.cumsum=function(n,r,i,o){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var a=new Nde(n.shape,i,o);return this.compileAndRun(a,[n])},e.prototype.equal=function(n,r){if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var i=new an("return float(a == b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.notEqual=function(n,r){if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new an("return float(a != b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new an("return float(a < b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.lessEqual=function(n,r){if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new an("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new an("return float(a > b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.greaterEqual=function(n,r){if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new an("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalNot=function(n){var r=new Ge(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},e.prototype.logicalAnd=function(n,r){if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new an("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.logicalOr=function(n,r){if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new an("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r],"bool")},e.prototype.select=function(n,r,i){var o=new Ipe(n.rank,r.shape,r.rank);return this.compileAndRun(o,[n,r,i],sr(r.dtype,i.dtype))},e.prototype.where=function(n){g0("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return wP(n.shape,r)},e.prototype.topk=function(n,r,i){return $6(n.dataSync(),n.shape,n.dtype,r)},e.prototype.min=function(n,r){pi("min",r,n.rank);var i=br(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a);return this.reduce(s,"min",s.dtype).reshape(o)},e.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ia(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.mod=function(n,r){var i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ia(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);pi("max",r,n.rank);var i=br(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a);return this.reduce(s,"max",s.dtype).reshape(o)},e.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ia(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.all=function(n,r){pi("all",r,n.rank);var i=br(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a);return this.reduce(s,"all",s.dtype).reshape(o)},e.prototype.any=function(n,r){pi("any",r,n.rank);var i=br(n.shape,r),o=i[0],a=Ae(i[1]),s=n.as2D(-1,a);return this.reduce(s,"any",s.dtype).reshape(o)},e.prototype.realDivide=function(n,r){if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new an(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"float32")},e.prototype.floorDiv=function(n,r){if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new an(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(i,[n,r],"int32")},e.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,g_);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var i=sr(n.dtype,r.dtype);if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,g_,i);var o=new an(g_,n.shape,r.shape);return this.compileAndRun(o,[n,r],i)},e.prototype.packedUnaryOp=function(n,r,i){var o=new _d(n.shape,r);return this.compileAndRun(o,[n],i)},e.prototype.packedBinaryOp=function(n,r,i,o,a){a===void 0&&(a=!1);var s=new Ia(i,n.shape,r.shape,a);return this.compileAndRun(s,[n,r],o)},e.prototype.complexSeparableBinaryOp=function(n,r,i){var o=this,a=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[a.complexTensors.real,s.complexTensors.real],[a.complexTensors.imag,s.complexTensors.imag]].map(function(h){var d=h[0],p=h[1],v=o.makeComplexComponentTensorInfo(n,d),m=o.makeComplexComponentTensorInfo(r,p),g=new an(i,n.shape,r.shape);return o.compileAndRun(g,[v,m],sr(d.dtype,p.dtype))}),l=u[0],c=u[1],f=this.complex(l,c);return l.dispose(),c.dispose(),f},e.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},e.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>re().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),i=this.addN(n.slice(0,r)),o=this.addN(n.slice(r));return this.addN([i,o])}var a=n.map(function(l){return l.dtype}).reduce(function(l,c){return sr(l,c)}),s=n.map(function(l){return l.shape}),u=re().getBool("WEBGL_PACK")?new sde(n[0].shape,s):new ade(n[0].shape,s);return this.compileAndRun(u,n,a)},e.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,y_);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var i=sr(n.dtype,r.dtype);if(re().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,y_,n.dtype);var o=new an(y_,n.shape,r.shape);return this.compileAndRun(o,[n,r],i)},e.prototype.pow=function(n,r){var i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ia(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),o=sr(n.dtype,r.dtype);return this.compileAndRun(i,[n,r],o)},e.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,zM,n.dtype);var r=new Ge(n.shape,zM);return this.compileAndRun(r,[n])},e.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,HM,n.dtype);var r=new Ge(n.shape,HM);return this.compileAndRun(r,[n])},e.prototype.sign=function(n){var r=new Ge(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},e.prototype.isNaN=function(n){var r=new Ge(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isInf=function(n){var r=new Ge(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.isFinite=function(n){var r=new Ge(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},e.prototype.round=function(n){var r=new Ge(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},e.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,GM,n.dtype);var r=new Ge(n.shape,GM);return this.compileAndRun(r,[n])},e.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,qM,n.dtype);var r=new Ge(n.shape,qM);return this.compileAndRun(r,[n])},e.prototype.softmax=function(n,r){var i=Vn([r],n.shape),o=this.max(n,i),a=ri(o.shape,i),s=this.subtract(n,o.reshape(a)),u=this.exp(s),l=this.sum(u,i).reshape(a);return this.realDivide(u,l)},e.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new Ge(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},e.prototype.log1p=function(n){var r=new Ge(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},e.prototype.sqrt=function(n){var r=new Ge(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},e.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new Ge(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},e.prototype.reciprocal=function(n){var r=new Ge(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},e.prototype.relu=function(n){var r;return r=re().getBool("WEBGL_PACK")?new _d(n.shape,H6):new Ge(n.shape,V6),this.compileAndRun(r,[n])},e.prototype.relu6=function(n){var r;return r=re().getBool("WEBGL_PACK")?new _d(n.shape,G6):new Ge(n.shape,W6),this.compileAndRun(r,[n])},e.prototype.prelu=function(n,r){var i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ia(U6,n.shape,r.shape):new an(B6,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.elu=function(n){if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,q6,n.dtype);var r=new Ge(n.shape,z6);return this.compileAndRun(r,[n])},e.prototype.eluDer=function(n,r){var i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ia(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new an("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.selu=function(n){var r=new Ge(n.shape,Upe);return this.compileAndRun(r,[n])},e.prototype.int=function(n){var r=new Ge(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},e.prototype.clip=function(n,r,i){var o,a=(o=re().getBool("WEBGL_PACK_CLIP")?new _de(n.shape):new xde(n.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[n],null,a)},e.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(re().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,VM,n.dtype);var r=new Ge(n.shape,VM);return this.compileAndRun(r,[n])},e.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),i=new Sde(n.shape),o=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(i,o)},e.prototype.sigmoid=function(n){var r=new Ge(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},e.prototype.softplus=function(n){var r=new Ge(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},e.prototype.sin=function(n){var r=new Ge(n.shape,Vpe);return this.compileAndRun(r,[n])},e.prototype.cos=function(n){var r=new Ge(n.shape,Wpe);return this.compileAndRun(r,[n])},e.prototype.tan=function(n){var r=new Ge(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},e.prototype.asin=function(n){var r=new Ge(n.shape,zpe);return this.compileAndRun(r,[n])},e.prototype.acos=function(n){var r=new Ge(n.shape,Hpe);return this.compileAndRun(r,[n])},e.prototype.atan=function(n){var r=new Ge(n.shape,Gpe);return this.compileAndRun(r,[n])},e.prototype.atan2=function(n,r){var i=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ia(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new an(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(i,[n,r])},e.prototype.sinh=function(n){var r=new Ge(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.cosh=function(n){var r=new Ge(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},e.prototype.tanh=function(n){var r=new Ge(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},e.prototype.asinh=function(n){var r=new Ge(n.shape,qpe);return this.compileAndRun(r,[n])},e.prototype.acosh=function(n){var r=new Ge(n.shape,Kpe);return this.compileAndRun(r,[n])},e.prototype.atanh=function(n){var r=new Ge(n.shape,Xpe);return this.compileAndRun(r,[n])},e.prototype.erf=function(n){var r=new Ge(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},e.prototype.step=function(n,r){var i=new Ge(n.shape,function(o){return o===void 0&&(o=0),No+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(i,[n])},e.prototype.conv2dByMatMul=function(n,r,i,o,a,s){var u=n.shape,l=this.texData.get(n.dataId),c=i.inChannels,f=u[0]*u[1]*u[2],h=i.outChannels,d=i.dataFormat==="channelsLast",p=(f===1||h===1)&&c>1e3,v=u[2]%2!=0&&!!l.isPacked;if(p||!re().getBool("WEBGL_LAZILY_UNPACK")||!re().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!v){var m=d?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],g=this.reshape(n,[1,m,i.inChannels]),y=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:g,b:y,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),i.outShape)}var b=d?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),_={dataId:n.dataId,shape:[1,b,i.inChannels],dtype:n.dtype},x=l.shape;l.shape=l.shape.slice(),l.shape[l.shape.length-2]++,W(wg(l.shape,_.shape),function(){return"packed reshape "+l.shape+" to "+_.shape+" isn't free"});var S=this.reshape(r,[1,i.inChannels,i.outChannels]),E=this.fusedBatchMatMul({a:_,b:S,transposeA:!1,transposeB:!1,bias:o,activation:a,preluActivationWeights:s}),C=this.texData.get(E.dataId);return W(C.isPacked,function(){return"batchMatMul result is expected to be packed"}),l.shape=x,C.shape=i.outShape,K.makeTensorFromDataId(E.dataId,i.outShape,E.dtype)},e.prototype.conv2dWithIm2Row=function(n,r,i,o,a,s){var u=i.filterWidth,l=i.filterHeight,c=i.inChannels,f=i.outWidth,h=i.outHeight,d=i.dataFormat==="channelsLast",p=u*l*c,v=h*f,m=[p,v],g=n.squeeze([0]),y=r.reshape([1,p,-1]),b=new fpe(m,g.shape,i),_=this.compileAndRun(b,[g]).reshape([1,m[0],m[1]]),x=o!=null,S=s!=null,E=a?Eg(a,!0):null,C=new b_(_.shape,[1,v,i.outChannels],!0,!1,x,E,S),A=[_,y];o&&A.push(o),S&&A.push(s);var T=this.compileAndRun(C,A);return d?T.reshape([1,h,f,i.outChannels]):T.reshape([1,i.outChannels,h,f])},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,o=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,o,a,s,u);if(re().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,o,a,s,u);var l=a!=null,c=u!=null,f=s?Eg(s,!1):null,h=new DM(o,l,f,c),d=[r,i];return a&&d.push(a),u&&d.push(u),this.compileAndRun(h,d)},e.prototype.conv2d=function(n,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,i);if(re().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,i);var o=new DM(i);return this.compileAndRun(o,[n,r])},e.prototype.conv2dDerInput=function(n,r,i){var o=new Tde(i);return this.compileAndRun(o,[n,r])},e.prototype.conv2dDerFilter=function(n,r,i){var o=new Ade(i);return this.compileAndRun(o,[n,r])},e.prototype.fusedDepthwiseConv2D=function(n){var r,i=n.input,o=n.filter,a=n.convInfo,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=re().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1,f=u?Eg(u,c):null,h=[i,o],d=s!=null,p=l!=null;return d&&h.push(s),p&&h.push(l),c?(r=new MM(a,d,f,p),this.compileAndRun(r,h)):(r=new NM(a,d,f,p),this.compileAndRun(r,h))},e.prototype.depthwiseConv2D=function(n,r,i){var o;return re().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new MM(i),this.compileAndRun(o,[n,r])):(o=new NM(i),this.compileAndRun(o,[n,r]))},e.prototype.depthwiseConv2DDerInput=function(n,r,i){var o=new Rde(i);return this.compileAndRun(o,[n,r])},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){var o=new kde(i);return this.compileAndRun(o,[n,r])},e.prototype.conv3d=function(n,r,i){var o=new Ide(i);return this.compileAndRun(o,[n,r])},e.prototype.conv3dDerInput=function(n,r,i){var o=new Ode(i);return this.compileAndRun(o,[n,r])},e.prototype.conv3dDerFilter=function(n,r,i){var o=new Pde(i);return this.compileAndRun(o,[n,r])},e.prototype.maxPool=function(n,r){var i=new w_(r,"max",!1);return this.compileAndRun(i,[n])},e.prototype.avgPool=function(n,r){var i=new w_(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPoolBackprop=function(n,r,i,o){var a=new w_(o,"max",!0),s=this.compileAndRun(a,[r]),u=new vpe(o),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.avgPoolBackprop=function(n,r,i){var o=new vde(i);return this.compileAndRun(o,[n],r.dtype)},e.prototype.cast=function(n,r){return R6(n,r,this)},e.prototype.unstack=function(n,r){for(var i=n.shape[r],o=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(o[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(o);return c},e.prototype.avgPool3d=function(n,r){var i=new x_(r,"avg",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.avgPool3dBackprop=function(n,r,i){var o=new mde(i);return this.compileAndRun(o,[n],r.dtype)},e.prototype.maxPool3d=function(n,r){var i=new x_(r,"max",!1);return this.compileAndRun(i,[n],"float32")},e.prototype.maxPool3dBackprop=function(n,r,i,o){var a=new x_(o,"max",!0),s=this.compileAndRun(a,[r]),u=new mpe(o),l=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),l},e.prototype.reshape=function(n,r){var i=this.texData.get(n.dataId);if(i.isPacked&&!wg(n.shape,r)&&(i.texture===null||!wg(i.shape,r))){var o=this.packedReshape(n,r);return K.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return mC(n,r)},e.prototype.resizeBilinear=function(n,r,i,o){var a=re().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ape(n.shape,r,i,o):new Cpe(n.shape,r,i,o);return this.compileAndRun(a,[n],"float32")},e.prototype.resizeBilinearBackprop=function(n,r,i){var o=new Epe(n,r,i);return this.compileAndRun(o,[n])},e.prototype.resizeNearestNeighbor=function(n,r,i,o){var a=new Ppe(n.shape,r,i,o);return this.compileAndRun(a,[n])},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){var o=new Tpe(n,r,i);return this.compileAndRun(o,[n])},e.prototype.multinomial=function(n,r,i,o){var a=r?n:cs(n),s=a.shape[0],u=a.shape[1],l=new gpe(s,u,i),c=l.getCustomSetupFunc(o);return this.compileAndRun(l,[a],"int32",c)},e.prototype.oneHot=function(n,r,i,o){var a=new ype(n.size,r,i,o);return this.compileAndRun(a,[n])},e.prototype.diag=function(n){var r=new Lde(n.size);return this.compileAndRun(r,[n])},e.prototype.nonMaxSuppression=function(n,r,i,o,a){return g0("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),yP(n.dataSync(),r.dataSync(),i,o,a)},e.prototype.cropAndResize=function(n,r,i,o,a,s){var u=new Dde(n.shape,r.shape,o,a,s);return this.compileAndRun(u,[n,r,i],"float32")},e.prototype.depthToSpace=function(n,r,i){W(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=n.shape[0],a=i==="NHWC"?n.shape[1]:n.shape[2],s=i==="NHWC"?n.shape[2]:n.shape[3],u=i==="NHWC"?n.shape[3]:n.shape[1],l=a*r,c=s*r,f=u/(r*r),h=new jde(i==="NHWC"?[o,l,c,f]:[o,f,l,c],r,i);return this.compileAndRun(h,[n])},e.prototype.split=function(n,r,i){return N6(n,r,i)},e.prototype.scatterND=function(n,r,i){var o=S0(0,n,i),a=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,f=[c/u,u],h=n.reshape([s,a]),d=r.reshape([s,u]);if(c===0)return mC(ur([]),i);var p=me(0),v=new FM(s,a,h.rank,d.rank,l,f);return this.compileAndRun(v,[d,h,p]).reshape(i)},e.prototype.sparseToDense=function(n,r,i,o){var a=S0(0,n,i),s=a.sliceRank,u=a.numUpdates,l=a.strides,c=a.outputSize,f=new FM(u,s,n.rank,r.rank,l,[c,1]);return this.compileAndRun(f,[r,n,o]).reshape(i)},e.prototype.fft=function(n){return this.fftImpl(n,!1)},e.prototype.ifft=function(n){return this.fftImpl(n,!0)},e.prototype.fftImpl=function(n,r){var i=this.texData.get(n.dataId),o=new jM(Wde,n.shape,r),a=new jM(zde,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],u=this.compileAndRun(o,s),l=this.compileAndRun(a,s),c=this.complex(u,l).as2D(n.shape[0],n.shape[1]);return u.dispose(),l.dispose(),c},e.prototype.gatherND=function(n,r){var i=r.shape,o=i[i.length-1],a=E6(n,r),s=a[0],u=a[1],l=a[2],c=a[3],f=r.reshape([u,o]),h=n.reshape([n.size/l,l]),d=new qde(o,c,[u,l]);return this.compileAndRun(d,[h,f]).reshape(s)},e.prototype.fill=function(n,r,i){if((i=i||um(r))==="string"){var o=d0(i,Ae(n));return o.fill(r),K.makeTensor(o,n,i,this)}var a=new Hde(n,r),s=a.getCustomSetupFunc(r);return this.compileAndRun(a,[],i,s)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},e.prototype.linspace=function(n,r,i){return I6(n,r,i)},e.prototype.makeTensorInfo=function(n,r){var i=this.write(null,n,r);return this.texData.get(i).usage=null,{dataId:i,shape:n,dtype:r}},e.prototype.makeOutput=function(n,r){var i=this.makeTensorInfo(n,r).dataId;return K.makeTensorFromDataId(i,n,r,this)},e.prototype.unpackTensor=function(n){var r=new Jpe(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},e.prototype.packTensor=function(n){var r=new bpe(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},e.prototype.packedReshape=function(n,r){var i=[v0(n.shape)].concat(m0(n.shape)),o={dtype:n.dtype,shape:i,dataId:n.dataId},a=[v0(r)].concat(m0(r)),s=new Spe(a,i),u=this.runWebGLProgram(s,[o],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},e.prototype.decode=function(n){var r,i=this.texData.get(n),o=i.isPacked,a=i.shape,s=i.dtype,u=v_(a);return r=o?new $de(u):new Mde(u),{dtype:s,shape:a,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},e.prototype.runWebGLProgram=function(n,r,i,o,a){var s=this;a===void 0&&(a=!1);var u=this.makeTensorInfo(n.outputShape,i),l=this.texData.get(u.dataId);if(n.packedOutput&&(l.isPacked=!0),n.outPackingScheme===rv.DENSE){var c=lp(n.outputShape);l.texShape=c.map(function(b){return 2*b})}if(n.outTexUsage!=null&&(l.usage=n.outTexUsage),Ae(u.shape)===0)return l.values=tv(u.dtype,0),u;var f=[],h=r.map(function(b){if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var _=s.texData.get(b.dataId);if(_.texture==null){if(!n.packedInputs&&Ae(b.shape)<=re().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:_.values};n.packedInputs&&(_.isPacked=!0,_.shape=b.shape)}else if(!!_.isPacked!=!!n.packedInputs)b=_.isPacked?s.unpackTensor(b):s.packTensor(b),f.push(b),_=s.texData.get(b.dataId);else if(_.isPacked&&!wg(_.shape,b.shape)){var x=b,S=b.shape;b.shape=_.shape,b=s.packedReshape(b,S),f.push(b),_=s.texData.get(b.dataId),x.shape=S}return s.uploadToGPU(b.dataId),{shape:b.shape,texData:_,isUniform:!1}});this.uploadToGPU(u.dataId);var d,p={shape:u.shape,texData:l,isUniform:!1},v=function(b,_,x){var S="";_.concat(x).forEach(function(A){var T=A.texData!=null&&A.texData.slice!=null&&A.texData.slice.flatOffset>0,P=A.isUniform?"uniform":A.texData.texShape;S+=A.shape+"_"+P+"_"+T});var E=b.userCode,C=b.constructor.name;return C+="_"+S+"_"+E}(n,h,p),m=this.getAndSaveBinary(v,function(){return function(b,_,x,S){var E=_.userCode,C=x.map(function($,L){var H={logicalShape:$.shape,texShape:$.isUniform?null:$.texData.texShape,isUniform:$.isUniform,isPacked:!$.isUniform&&$.texData.isPacked,flatOffset:null};return $.texData!=null&&$.texData.slice!=null&&$.texData.slice.flatOffset>0&&(H.flatOffset=$.texData.slice.flatOffset),{name:_.variableNames[L],shapeInfo:H}}),A=C.map(function($){return $.shapeInfo}),T={logicalShape:S.shape,texShape:S.texData.texShape,isUniform:!1,isPacked:S.texData.isPacked,flatOffset:null},P=lde(C,T,E,_.packedInputs),R=b.createProgram(P),I=null,M=b.getUniformLocation(R,"NAN",!1);re().getNumber("WEBGL_VERSION")===1&&(I=b.getUniformLocation(R,"INFINITY",!1));for(var B={},z=0;z<_.variableNames.length;z++){var U=_.variableNames[z];B[U]=b.getUniformLocation(R,U,!1),B["offset"+U]=b.getUniformLocation(R,"offset"+U,!1)}return{program:_,source:P,webGLProgram:R,uniformLocations:B,inShapeInfos:A,outShapeInfo:T,infLoc:I,nanLoc:M}}(s.gpgpu,n,h,p)}),g=this.activeTimers!=null;if(g&&(d=this.startTimer()),function(b,_,x,S,E){LM(_.inShapeInfos,x),LM([_.outShapeInfo],[S]);var C=S.texData.texture,A=S.texData.texShape;S.texData.isPacked?b.setOutputPackedMatrixTexture(C,A[0],A[1]):b.setOutputMatrixTexture(C,A[0],A[1]),b.setProgram(_.webGLProgram),re().getNumber("WEBGL_VERSION")===1&&_.infLoc!==null&&b.gl.uniform1f(_.infLoc,1/0),_.nanLoc!==null&&b.gl.uniform1f(_.nanLoc,NaN),x.forEach(function(T,P){var R=_.program.variableNames[P],I=_.uniformLocations[R],M=_.uniformLocations["offset"+R];if(I!=null)if(T.isUniform)if(Ae(T.shape)<2)b.gl.uniform1f(I,T.uniformValues[0]);else{var B=T.uniformValues;B instanceof Float32Array||(B=new Float32Array(B)),b.gl.uniform1fv(I,B)}else T.texData.slice!=null&&M!=null&&b.gl.uniform1i(M,T.texData.slice.flatOffset),b.setInputMatrixTexture(T.texData.texture,I,P)}),E!=null&&E(b,_.webGLProgram),b.executeProgram()}(this.gpgpu,m,h,p,o),f.forEach(function(b){return s.disposeData(b.dataId)}),g&&(d=this.endTimer(d),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(d)})),!re().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&a===!1){var y=this.unpackTensor(u);return this.disposeData(u.dataId),y}return u},e.prototype.compileAndRun=function(n,r,i,o,a){a===void 0&&(a=!1),i=i||r[0].dtype;var s=this.runWebGLProgram(n,r,i,o,a);return K.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},e.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var n=this;this.disposed||(re().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=we(function(){if(!re().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=re().getBool("DEBUG");re().set("DEBUG",!1);var i=n.abs(me(1e-8)).dataSync()[0];if(re().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(n){var r,i=this.texData.get(n),o=i.shape,a=i.dtype,s=i.values,u=i.texture,l=i.usage,c=i.isPacked;if(u==null){var f,h=this.activeTimers!=null;h&&(f=Yo());var d=i.texShape;if(d==null&&(d=ohe(o,c),i.texShape=d),s!=null){var p=v_(o),v=void 0,m=d[1],g=d[0],y=s instanceof Uint8Array;c?(m=(r=cm(d[0],d[1]))[0],g=r[1],v=new Vde(p,[g,m],y)):v=new Ude(p,[g,m],y);var b=this.makeTensorInfo([g,m],a);this.texData.get(b.dataId).usage=y?wi.PIXELS:wi.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),m,g,s);var _=this.runWebGLProgram(v,[b],a,null,!0),x=this.texData.get(_.dataId);i.texture=x.texture,i.texShape=x.texShape,i.isPacked=x.isPacked,i.usage=x.usage,this.disposeData(b.dataId),this.texData.delete(_.dataId),i.values=null,h&&(this.uploadWaitMs+=Yo()-f)}else{var S=this.acquireTexture(d,l,a,c);i.texture=S}}},e.prototype.convertAndCacheOnCPU=function(n,r){var i=this.texData.get(n),o=i.dtype;return this.releaseGPUData(n),r!=null&&(i.values=function(a,s){if(s==="float32"||s==="complex64")return a;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(a.length):new Uint8Array(a.length),l=0;l<u.length;++l)u[l]=Math.round(a[l]);return u}throw new Error("Unknown dtype "+s)}(r,o)),i.values},e.prototype.acquireTexture=function(n,r,i,o){if(this.numBytesInGPU+=this.computeBytes(n,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,o)},e.prototype.computeBytes=function(n,r){return n[0]*n[1]*a6(r)},e}(O6);d6()&&K.registerBackend("webgl",function(){return new Zpe},2);var eve=G({square_:function(t){var e=j(t,"x","square"),n=[e];return K.runKernelFunc(function(r,i){return i([e]),r.square(e)},{x:e},null,"Square",{},n,[])}}),ov="SquaredDifference",K6=G({squaredDifference_:function(t,e){var n,r=j(t,"a","squaredDifference"),i=j(e,"b","squaredDifference");n=rn(r,i),r=n[0],i=n[1],Ze(r.shape,i.shape);var o={a:r,b:i},a=[r,i];return K.runKernelFunc(function(s,u){var l=s.squaredDifference(r,i);return u([r,i]),l},o,function(s,u){var l=u[0],c=u[1],f=me(2);return{a:function(){return s.mul(l.sub(c).mul(f))},b:function(){return s.mul(c.sub(l).mul(f))}}},ov,{},a,[])}}),tve=G({abs_:function(t){var e=j(t,"x","abs");return e.dtype==="complex64"?K.runKernelFunc(function(n){return n.complexAbs(e)},{$x:e}):K.runKernelFunc(function(n,r){var i=n.abs(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.toFloat().step(-1))}}},"Abs")}}),nve=G({acos_:function(t){var e=j(t,"x","acos");return K.runKernelFunc(function(n,r){var i=n.acos(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(me(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),rve=G({acosh_:function(t){var e=j(t,"x","acosh");return K.runKernelFunc(function(n,r){var i=n.acosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),ive=G({asin_:function(t){var e=j(t,"x","asin");return K.runKernelFunc(function(n,r){var i=n.asin(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(me(1).sub(i.toFloat().square()).sqrt())}}})}}),ove=G({asinh_:function(t){var e=j(t,"x","asinh");return K.runKernelFunc(function(n,r){var i=n.asinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(me(1).add(i.toFloat().square()).sqrt())}}})}}),ave=G({atan_:function(t){var e=j(t,"x","atan");return K.runKernelFunc(function(n,r){var i=n.atan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().square().add(1))}}})}}),sve=G({atanh_:function(t){var e=j(t,"x","atanh");return K.runKernelFunc(function(n,r){var i=n.atanh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(me(1).sub(i.toFloat().square()))}}})}}),uve=G({ceil_:function(t){var e=j(t,"x","ceil");return K.runKernelFunc(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return at(n)}}})}}),EP=G({clipByValue_:function(t,e,n){var r=j(t,"x","clipByValue");W(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."});var i=[r],o={min:e,max:n};return K.runKernelFunc(function(a,s){var u=a.clip(r,e,n);return s([r]),u},{x:r},function(a,s){var u=s[0];return{x:function(){return a.where(u.greaterEqual(e).logicalAnd(u.lessEqual(n)),at(a))}}},"ClipByValue",o,i)}}),lve=G({cos_:function(t){var e=j(t,"x","cos"),n=[e];return K.runKernelFunc(function(r,i){var o=r.cos(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),cve=G({cosh_:function(t){var e=j(t,"x","cosh");return K.runKernelFunc(function(n,r){var i=n.cosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(n)}}})}}),fve=G({erf_:function(t){var e=j(t,"x","erf");return W(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),K.runKernelFunc(function(n,r){var i=n.erf(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),yC=G({exp_:function(t){var e=j(t,"x","exp");return K.runKernelFunc(function(n,r){var i=n.exp(e);return r([i]),i},{x:e},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),hve=G({expm1_:function(t){var e=j(t,"x","expm1");return K.runKernelFunc(function(n,r){var i=n.expm1(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.exp())}}})}}),dve=G({floor_:function(t){var e=j(t,"x","floor");return K.runKernelFunc(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return at(n)}}})}}),pve=G({log_:function(t){var e=j(t,"x","log"),n=[e];return K.runKernelFunc(function(r,i){var o=r.log(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},n)}}),vve=G({log1p_:function(t){var e=j(t,"x","log1p");return K.runKernelFunc(function(n,r){var i=n.log1p(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.add(1))}}})}}),mve=G({logSigmoid_:function(t){var e=j(t,"x","logSigmoid");return K.runKernelFunc(function(n,r){var i=n.softplus(e.neg()).neg();return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.neg().sigmoid())}}})}}),T0=G({neg_:function(t){var e=j(t,"x","neg"),n=[e];return K.runKernelFunc(function(r){return r.neg(e)},{x:e},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),gve=G({reciprocal_:function(t){var e=j(t,"x","reciprocal");return K.runKernelFunc(function(n,r){var i=n.reciprocal(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.square().neg())}}})}}),yve=G({round_:function(t){var e=j(t,"x","round");return K.runKernelFunc(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return at(n)}}})}}),X6=G({rsqrt_:function(t){var e=j(t,"x","rsqrt"),n=[e];return K.runKernelFunc(function(r,i){var o=r.rsqrt(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),Y6=G({sigmoid_:function(t){var e=j(t,"x","sigmoid");return K.runKernelFunc(function(n,r){var i=n.sigmoid(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mul(i.mul(me(1).sub(i)))}}},"Sigmoid")}}),bve=G({sign_:function(t){var e=j(t,"x","sign");return K.runKernelFunc(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return at(n)}}})}}),wve=G({isNaN_:function(t){var e=j(t,"x","isNaN");return K.runKernelFunc(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return at(n)}}})}}),xve=G({isInf_:function(t){var e=j(t,"x","isInf");return K.runKernelFunc(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return at(n)}}})}}),_ve=G({isFinite_:function(t){var e=j(t,"x","isFinite");return K.runKernelFunc(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return at(n)}}})}}),Sve=G({sin_:function(t){var e=j(t,"x","sin"),n=[e];return K.runKernelFunc(function(r,i){var o=r.sin(e);return i([e]),o},{x:e},function(r,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},n)}}),Eve=G({sinh_:function(t){var e=j(t,"x","sinh");return K.runKernelFunc(function(n,r){var i=n.sinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(n)}}})}}),Cve=G({softplus_:function(t){var e=j(t,"x","softplus");return K.runKernelFunc(function(n,r){var i=n.softplus(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.sigmoid())}}})}}),Ave=G({sqrt_:function(t){var e=j(t,"x","sqrt");return K.runKernelFunc(function(n,r){var i=n.sqrt(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().sqrt().mul(2))}}})}}),Tve=G({step_:function(t,e){e===void 0&&(e=0);var n=j(t,"x","step");return K.runKernelFunc(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return at(r)}}})}}),Pve=G({tan_:function(t){var e=j(t,"x","tan");return K.runKernelFunc(function(n,r){var i=n.tan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.cos().square())}}})}}),Ove=G({tanh_:function(t){var e=j(t,"x","tanh");return K.runKernelFunc(function(n,r){var i=n.tanh(e);return r([i]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return me(1).sub(i.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function J6(t,e,n,r,i,o){var a,s,u=j(t,"x","batchNorm"),l=j(e,"mean","batchNorm"),c=j(n,"variance","batchNorm");return i!=null&&(a=j(i,"scale","batchNorm")),r!=null&&(s=j(r,"offset","batchNorm")),W(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),W(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),W(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),a!=null&&W(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),s!=null&&W(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),hm(u,l,c,s,a,o)}function Q6(t,e,n,r,i,o){var a,s,u=j(t,"x","batchNorm"),l=j(e,"mean","batchNorm"),c=j(n,"variance","batchNorm");return i!=null&&(a=j(i,"scale","batchNorm")),r!=null&&(s=j(r,"offset","batchNorm")),W(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),W(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),W(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),a!=null&&W(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),s!=null&&W(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),hm(u,l,c,s,a,o)}function Z6(t,e,n,r,i,o){var a,s,u=j(t,"x","batchNorm"),l=j(e,"mean","batchNorm"),c=j(n,"variance","batchNorm");return i!=null&&(a=j(i,"scale","batchNorm")),r!=null&&(s=j(r,"offset","batchNorm")),W(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),W(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),W(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),a!=null&&W(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),s!=null&&W(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),hm(u,l,c,s,a,o)}function hm(t,e,n,r,i,o){o==null&&(o=.001);var a,s,u,l=j(t,"x","batchNorm"),c=j(e,"mean","batchNorm"),f=j(n,"variance","batchNorm");i!=null&&(a=j(i,"scale","batchNorm")),r!=null&&(s=j(r,"offset","batchNorm")),W(c.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),W(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),W(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var h=[l,c,f,a];return K.runKernelFunc(function(d,p){var v=d.batchNormalization(u,Cg(c),Cg(f),o,Cg(a),Cg(s));return p([l,c,f,a]),v},{x:l,mean:c,variance:f,scale:a,offset:s},function(d,p){var v=p,m=v[0],g=v[1],y=v[2],b=v[3],_=b??me(1),x=Bn(g.shape,u.shape),S=[];if(g.rank===1){for(var E=0;E<u.shape.length-1;++E)S.push(u.shape[E]);S.push(1)}var C=m.sub(g),A=d.mul(_),T=X6(y.add(me(o))),P=T.mul(T).mul(T).mul(me(-.5));return{x:function(){return g.rank===1?d.mul(bf(T.as4D(1,1,1,g.shape[0]),S)).mul(_).reshape(m.shape):d.mul(T).mul(_).reshape(m.shape)},mean:function(){var R=T.mul(me(-1)).mul(A);return g.rank===1&&(R=R.sum(x)),R.reshape(g.shape)},variance:function(){var R=P.mul(C).mul(A);return g.rank===1&&(R=R.sum(x)),R.reshape(g.shape)},scale:function(){var R=C.mul(T),I=d.mul(R);return g.rank===1&&(I=I.sum(x)),I.reshape(g.shape)},offset:function(){var R=d;return g.rank===1&&(R=R.sum(x)),R.reshape(g.shape)}}},"BatchNormalization",{varianceEpsilon:o},h).reshape(l.shape)}function Cg(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function Cw(){p6("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var kve=G({batchNormalization2d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),Cw(),J6(t,e,n,o,i,r)}}),Rve=G({batchNormalization3d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),Cw(),Q6(t,e,n,o,i,r)}}),Ive=G({batchNormalization4d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),Cw(),Z6(t,e,n,o,i,r)}}),Dve=G({batchNormalization_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),Cw(),hm(t,e,n,o,i,r)}}),ez=G({batchNorm_:hm}),Nve=G({batchNorm2d_:J6}),Mve=G({batchNorm3d_:Q6}),$ve=G({batchNorm4d_:Z6}),Aw=G({logicalAnd_:function(t,e){var n=j(t,"a","logicalAnd","bool"),r=j(e,"b","logicalAnd","bool");return Ze(n.shape,r.shape),K.runKernelFunc(function(i){return i.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),jve=G({logicalNot_:function(t){var e=j(t,"x","logicalNot","bool");return K.runKernelFunc(function(n){return n.logicalNot(e)},{$x:e})}}),tz=G({logicalOr_:function(t,e){var n=j(t,"a","logicalOr","bool"),r=j(e,"b","logicalOr","bool");return Ze(n.shape,r.shape),K.runKernelFunc(function(i){return i.logicalOr(n,r)},{$a:n,$b:r})}}),Lve=G({logicalXor_:function(t,e){var n=j(t,"a","logicalXor","bool"),r=j(e,"b","logicalXor","bool");return Ze(n.shape,r.shape),tz(t,e).logicalAnd(Aw(t,e).logicalNot())}}),Wl=G({where_:function(t,e,n){var r=j(e,"a","where"),i=j(n,"b","where"),o=j(t,"condition","where","bool");return mt(r.shape,i.shape,"Error in where: "),o.rank===1?W(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):mt(o.shape,i.shape,"Error in where: "),K.runKernelFunc(function(a,s){var u=a.select(o,r,i);return s([o]),u},{$condition:o,$a:r,$b:i},function(a,s){var u=s[0];return{$condition:function(){return at(u).toFloat()},$a:function(){return a.mul(u.cast(a.dtype))},$b:function(){return a.mul(u.logicalNot().cast(a.dtype))}}})}}),nz=function(t){return Ee(this,void 0,void 0,function(){var e,n,r;return Ce(this,function(i){switch(i.label){case 0:return[4,(e=j(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=wP(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},Je=G({add_:function(t,e){var n,r=j(t,"a","add"),i=j(e,"b","add");n=rn(r,i),r=n[0],i=n[1];var o=Ze(r.shape,i.shape);return K.runKernelFunc(function(a){return a.add(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,u=Bn(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Bn(i.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(i.shape)}}},"Add")}}),Fve=G({addN_:function(t){W(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),W(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(i,o){return j(i,"tensors"+o,"addN")}),n=e[0];e.forEach(function(i){if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(i){if(!Jn(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return K.runKernelFunc(function(i){return i.addN(e)},r,function(i){var o={};return e.forEach(function(a,s){o[s]=function(){return i.clone()}}),o},"AddN")}}),Bve=G({addStrict_:function(t,e){var n=j(t,"a","addStrict"),r=j(e,"b","addStrict");return mt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Uve=G({atan2_:function(t,e){var n,r=j(t,"a","atan2"),i=j(e,"b","atan2");n=rn(r,i),r=n[0],i=n[1];var o=Ze(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.atan2(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Je(u.square(),l.square()),f=a.mul(l.div(c)),h=Bn(u.shape,o);return h.length>0&&(f=f.sum(h)),f.reshape(u.shape)},$b:function(){var c=Je(u.square(),l.square()),f=T0(a.mul(u.div(c))),h=Bn(l.shape,o);return h.length>0&&(f=f.sum(h)),f.reshape(l.shape)}}})}}),xo=G({div_:function(t,e){var n,r=j(t,"a","div"),i=j(e,"b","div");if(n=rn(r,i),r=n[0],i=n[1],r.dtype==="int32"&&i.dtype==="int32")return rz(r,i);var o=Ze(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.realDivide(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),f=Bn(u.shape,o);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Bn(l.shape,o);f.length>0&&(c=c.sum(f).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"Div")}}),Vve=G({divNoNan_:function(t,e){var n,r=j(t,"a","div"),i=j(e,"b","div");r=(n=rn(r,i))[0],i=n[1];var o=xo(r,i),a=at(o),s=i.equal(a);return Wl(s,a,o)}}),Wve=G({divStrict_:function(t,e){var n=j(t,"a","div"),r=j(e,"b","div");return mt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),rz=G({floorDiv_:function(t,e){var n,r=j(t,"a","floorDiv"),i=j(e,"b","floorDiv");n=rn(r,i),r=n[0],i=n[1];var o=Ze(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.floorDiv(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.div(l.toFloat()),f=Bn(u.shape,o);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Bn(l.shape,o);f.length>0&&(c=c.sum(f).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}},"FloorDiv")}}),CP=G({maximum_:function(t,e){var n,r=j(t,"a","maximum"),i=j(e,"b","maximum");return n=rn(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Ze(r.shape,i.shape),K.runKernelFunc(function(o,a){var s=o.maximum(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],u=a[1];return{a:function(){return o.mul(s.greaterEqual(u).toFloat())},b:function(){return o.mul(s.less(u).toFloat())}}},"Maximum")}}),zve=G({maximumStrict_:function(t,e){var n=j(t,"a","maximumStrict"),r=j(e,"b","maximumStrict");return mt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),iz=G({minimum_:function(t,e){var n,r=j(t,"a","minimum"),i=j(e,"b","minimum");return n=rn(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Ze(r.shape,i.shape),K.runKernelFunc(function(o,a){var s=o.minimum(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],u=a[1];return{a:function(){return o.mul(s.lessEqual(u).toFloat())},b:function(){return o.mul(s.greater(u).toFloat())}}},"Minimum")}}),Hve=G({minimumStrict_:function(t,e){var n=j(t,"a","minimumStrict"),r=j(e,"b","minimumStrict");return mt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Gve=G({mod_:function(t,e){var n,r=j(t,"a","mod"),i=j(e,"b","mod");n=rn(r,i),r=n[0],i=n[1];var o=Ze(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.mod(r,i);return s([r,i]),u},{$a:r,$b:i},function(a,s){var u=s[0],l=s[1];return{$a:function(){var c=Bn(u.shape,o);return c.length>0?a.sum(c).reshape(u.shape):a},$b:function(){var c=a.mul(u.div(l).floor().neg()),f=Bn(l.shape,o);return f.length>0?c.sum(f).reshape(l.shape):c}}})}}),qve=G({modStrict_:function(t,e){var n=j(t,"a","modStrict"),r=j(e,"b","modStrict");return mt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Tr=G({mul_:function(t,e){var n,r=j(t,"a","mul"),i=j(e,"b","mul");n=rn(r,i),r=n[0],i=n[1];var o=Ze(r.shape,i.shape);return K.runKernelFunc(function(a,s){var u=a.multiply(r,i);return s([r,i]),u},{a:r,b:i},function(a,s){var u=s[0],l=s[1];return{a:function(){var c=a.mul(l.toFloat()),f=Bn(u.shape,o);return f.length>0?c.sum(f).reshape(u.shape):c},b:function(){var c=a.mul(u.toFloat()),f=Bn(l.shape,o);return f.length>0?c.sum(f).reshape(l.shape):c}}},"Mul")}}),Kve=G({mulStrict_:function(t,e){var n=j(t,"a","mul"),r=j(e,"b","mul");return mt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),P0=G({pow_:function(t,e){var n,r=j(t,"base","pow"),i=j(e,"exp","pow");n=rn(r,i),r=n[0],i=n[1];var o=Ze(r.shape,i.shape),a=[r,i];return K.runKernelFunc(function(s,u){var l=s.pow(r,i);return u([r,i,l]),l},{a:r,b:i},function(s,u){var l=u[0],c=u[1],f=u[2];return{a:function(){var h=c.toFloat(),d=s.mul(h.mul(l.pow(h.sub(me(1))))),p=Bn(l.shape,o);return p.length>0&&(d=d.sum(p)),d.reshape(l.shape)},b:function(){var h=l.greater(0),d=l.log().where(h,at(l)),p=s.mul(f.mul(d)),v=Bn(c.shape,o);return v.length>0&&(p=p.sum(v)),p.reshape(c.shape)}}},"Pow",{},a,[!0])}}),Xve=G({powStrict_:function(t,e){return mt(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Yve=G({squaredDifferenceStrict_:function(t,e){var n=j(t,"a","squaredDifferenceStrict"),r=j(e,"b","squaredDifferenceStrict");return mt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Un=G({sub_:function(t,e){var n,r=j(t,"a","sub"),i=j(e,"b","sub");n=rn(r,i),r=n[0],i=n[1];var o=Ze(r.shape,i.shape);return K.runKernelFunc(function(a){return a.subtract(r,i)},{a:r,b:i},function(a){return{a:function(){var s=a,u=Bn(r.shape,o);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=a,u=Bn(i.shape,o);return u.length>0&&(s=s.sum(u)),s.neg().reshape(i.shape)}}},"Sub")}}),Jve=G({subStrict_:function(t,e){var n=j(t,"a","subStrict"),r=j(e,"b","subStrict");return mt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),oz=G({equal_:function(t,e){var n,r=j(t,"a","equal"),i=j(e,"b","equal");return n=rn(r,i),r=n[0],i=n[1],Ze(r.shape,i.shape),K.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),Qve=G({equalStrict_:function(t,e){var n=j(t,"a","equalStrict"),r=j(e,"b","equalStrict");return mt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Zve=G({greater_:function(t,e){var n,r=j(t,"a","greater"),i=j(e,"b","greater");return n=rn(r,i),r=n[0],i=n[1],Ze(r.shape,i.shape),K.runKernelFunc(function(o){return o.greater(r,i)},{a:r,b:i},null,"Greater")}}),az=G({greaterEqual_:function(t,e){var n,r=j(t,"a","greaterEqual"),i=j(e,"b","greaterEqual");return n=rn(r,i),r=n[0],i=n[1],Ze(r.shape,i.shape),K.runKernelFunc(function(o,a){var s=o.greaterEqual(r,i);return a([r,i]),s},{a:r,b:i},function(o,a){var s=a[0],u=a[1];return{a:function(){return at(s)},b:function(){return at(u)}}},"GreaterEqual")}}),eme=G({greaterEqualStrict_:function(t,e){var n=j(t,"a","greaterEqualStrict"),r=j(e,"b","greaterEqualStrict");return mt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),tme=G({greaterStrict_:function(t,e){var n=j(t,"a","greaterStrict"),r=j(e,"b","greaterStrict");return mt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),nme=G({less_:function(t,e){var n,r=j(t,"a","less"),i=j(e,"b","less");return n=rn(r,i),r=n[0],i=n[1],Ze(r.shape,i.shape),K.runKernelFunc(function(o){return o.less(r,i)},{a:r,b:i},null,"Less")}}),rme=G({lessEqual_:function(t,e){var n,r=j(t,"a","lessEqual"),i=j(e,"b","lessEqual");return n=rn(r,i),r=n[0],i=n[1],Ze(r.shape,i.shape),K.runKernelFunc(function(o,a){var s=o.lessEqual(r,i);return a([r,i]),s},{a:r,b:i},null,"LessEqual")}}),ime=G({lessEqualStrict_:function(t,e){var n=j(t,"a","lessEqualStrict"),r=j(e,"b","lessEqualStrict");return mt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),ome=G({lessStrict_:function(t,e){var n=j(t,"a","lessStrict"),r=j(e,"b","lessStrict");return mt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),ame=G({notEqual_:function(t,e){var n,r=j(t,"a","notEqual"),i=j(e,"b","notEqual");return n=rn(r,i),r=n[0],i=n[1],Ze(r.shape,i.shape),K.runKernelFunc(function(o){return o.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),sme=G({notEqualStrict_:function(t,e){var n=j(t,"a","notEqualStrict"),r=j(e,"b","notEqualStrict");return mt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function KM(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function XM(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var AP=G({gather_:function(t,e,n){n===void 0&&(n=0);var r=j(t,"x","gather"),i=j(e,"indices","gather","int32");n=Vn(n,r.shape)[0];var o=function(a,s,u){for(var l=a.shape[u],c=[],f=1,h=1,d=0;d<u;d++)c.push(a.shape[d]),f*=a.shape[d];for(d=0;d<s.rank;d++)c.push(s.shape[d]);for(d=u+1;d<a.rank;d++)c.push(a.shape[d]),h*=a.shape[d];return{batchSize:f,sliceSize:h,dimSize:l,outputShape:c}}(r,i,n);return K.runKernelFunc(function(a,s){var u=a.gather(r,i.flatten(),n);return s([i]),u},{x:r,indices:i},function(a,s){var u=s[0];return{x:function(){var l=r.shape,c=u.size,f=l.slice(0,n),h=f.length,d=l.slice(n,l.length).slice(1),p=d.length,v=KM(0,h),m=KM(h+1,h+1+p),g=XM([f,[c],d]),y=a.reshape(g),b=u.reshape([c]),_=XM([[h],v,m]),x=y.transpose(_),S=sz(x,b,r.shape[n]),E=hP(_);return S=S.transpose(E)},indices:function(){return u}}},"Gather",{axis:n}).reshape(o.outputShape)}}),sz=G({unsortedSegmentSum_:function(t,e,n){var r=j(t,"x","unsortedSegmentSum"),i=j(e,"segmentIds","unsortedSegmentSum","int32");return W(mn(n),function(){return"numSegments must be of dtype int"}),K.runKernelFunc(function(o,a){var s=o.unsortedSegmentSum(r,i,n);return a([i]),s},{$x:r},function(o,a){var s=a[0];return{$x:function(){return function(u,l){for(var c=CP(l,at(l)),f=AP(u,c),h=az(l,me(0,"int32")),d=f.rank-h.rank,p=0;p<d;++p)h=Bi(h,p+1);h=Aw(h,Fh(f.shape,"bool"));var v=at(f);return Wl(h,f,v)}(o,s)}}})}}),ume=function(t,e,n){return Ee(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,f,h,d,p,v;return Ce(this,function(m){switch(m.label){case 0:for(r=j(t,"tensor","boolMask"),i=j(e,"mask","boolMask","bool"),o=n??0,a=i.rank,s=r.shape,W(a>0,function(){return"mask cannot be scalar"}),mt(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+a;l++)u*=s[l];return c=s.slice(0,o).concat([u],s.slice(o+a)),f=r.reshape(c),h=i.reshape([-1]),[4,nz(h)];case 1:return d=m.sent(),p=d.squeeze([1]),v=AP(f,p,o),t!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),f.dispose(),h.dispose(),d.dispose(),[2,v]}})})};function uz(t,e,n,r,i,o,a){o===void 0&&(o="NHWC"),W(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var s=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),s=[1,t[0],t[1],t[2]]),W(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),W(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),W(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=o==="NHWC"?s[3]:s[1],f=o==="NHWC"?u.shape[3]:u.shape[1];W(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),W(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),a!=null&&W(mn(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var h=gP(o),d=ec(s,n.shape,r,1,i,a,!1,h),p=K.runKernelFunc(function(v,m){var g=v.conv2dDerInput(u,n,d);return m([n,u]),g},{dy4D:u,filter:n},function(v,m){var g=m[0],y=m[1];return{dy4D:function(){return Zi(v,g,r,i,o,1,a)},filter:function(){return TP(v,y,g.shape,r,i,o,a)}}});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function S_(t){var e=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function lz(t,e,n,r,i){W(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var o=t,a=e,s=!1;e.rank===4&&(s=!0,a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var u=o[4],l=a.shape[4];W(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),W(a.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),W(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),W(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),W(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=C0(o,n.shape,r,1,i),f=K.runKernelFunc(function(h){return h.conv3dDerInput(a,n,c)},{dy5D:a});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var lme=G({conv1d_:function(t,e,n,r,i,o,a){i===void 0&&(i="NWC"),o===void 0&&(o=1);var s=j(t,"x","conv1d"),u=j(e,"filter","conv1d"),l=s,c=!1;s.rank===2&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),W(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),W(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),a!=null&&W(mn(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),W(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),W(ii(n,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"}),W(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),d=Zi(h,f,[1,n],r,"NHWC",[1,o],a);return c?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Zi=G({conv2d_:function(t,e,n,r,i,o,a){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var s=j(t,"x","conv2d"),u=j(e,"filter","conv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),W(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),W(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),a!=null&&W(mn(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var f=i==="NHWC"?l.shape[3]:l.shape[1];W(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),W(ii(n,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"});var h=gP(i),d=ec(l.shape,u.shape,n,o,r,a,!1,h),p=[u,l],v=K.runKernelFunc(function(m,g){var y=m.conv2d(l,u,d);return g([u,l]),y},{x:l,filter:u},function(m,g){var y=g,b=y[0],_=y[1];return W(Zf(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return cz(_.shape,m,b,n,r,i)},filter:function(){return TP(_,m,b.shape,n,r,i)}}},"Conv2D",d,p);return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),cme=G({conv3d_:function(t,e,n,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var a=j(t,"x","conv3d"),s=j(e,"filter","conv3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),W(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),W(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),W(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),W(function(h,d){return S_(h)||S_(d)}(n,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),W(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=C0(u.shape,s.shape,n,o,r),f=K.runKernelFunc(function(h,d){var p=h.conv3d(u,s,c);return d([u,s]),p},{x:u,$filter:s},function(h,d){W(S_(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var p=d[0],v=d[1];return{x:function(){return lz(p.shape,h,v,n,r)},$filter:function(){return function(m,g,y,b,_){var x=m;m.rank===4&&(x=m.as5D(1,m.shape[0],m.shape[1],m.shape[2],m.shape[3]));var S=g;S.rank===4&&(S=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),W(x.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+x.shape+"."}),W(S.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+S.shape+"."}),W(y.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+y+"."}),W(x.shape[4]===y[3],function(){return"Error in conv3dDerFilter: depth of input "+x.shape[4]+") must match input depth in filter ("+y[3]+"."}),W(S.shape[4]===y[4],function(){return"Error in conv3dDerFilter: depth of dy ("+S.shape[4]+") must match output depth for filter ("+y[4]+")."});var E=C0(x.shape,y,b,1,_);return K.runKernelFunc(function(C){return C.conv3dDerFilter(x,S,E)},{x5D:x,dy5D:S})}(p,h,v.shape,n,r)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),TP=G({conv2dDerFilter_:function(t,e,n,r,i,o,a){o===void 0&&(o="NHWC");var s=t;t.rank===3&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),W(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),W(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),W(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=o==="NHWC"?s.shape[3]:s.shape[1],c=o==="NHWC"?u.shape[3]:u.shape[1];W(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),W(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),a!=null&&W(mn(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var f=gP(o),h=ec(s.shape,n,r,1,i,a,!1,f);return K.runKernelFunc(function(d){return d.conv2dDerFilter(s,u,h)},{x4D:s,dy4D:u})}}),cz=G({conv2dDerInput_:uz}),Tw=G({depthwiseConv2d_:function(t,e,n,r,i,o,a){o===void 0&&(o=[1,1]);var s=j(t,"x","depthwiseConv2d"),u=j(e,"filter","depthwiseConv2d"),l=s,c=!1;s.rank===3&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),W(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),W(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),W(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),o==null&&(o=[1,1]),W(ii(n,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),a!=null&&W(mn(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var f=ec(l.shape,u.shape,n,o,r,a,!0),h=[l,u],d=K.runKernelFunc(function(p,v){var m=p.depthwiseConv2D(l,u,f);return v([l,u]),m},{x:l,filter:u},function(p,v){W(Zf(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var m=v[0],g=v[1];return{x:function(){return fz(m.shape,p,g,f)},filter:function(){return hz(m,p,g.shape,f)}}},"DepthwiseConv2dNative",f,h);return c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),fz=G({depthwiseConv2dDerInput_:function(t,e,n,r){var i=e,o=!1;e.rank===3&&(o=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=K.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),hz=G({depthwiseConv2dDerFilter_:function(t,e,n,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=e;return o.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),K.runKernelFunc(function(a){return a.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),PP=G({separableConv2d_:function(t,e,n,r,i,o,a){o===void 0&&(o=[1,1]),a===void 0&&(a="NHWC");var s=j(t,"x","separableConv2d"),u=j(e,"depthwiseFilter","separableConv2d"),l=j(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(s.rank===3&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");W(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),W(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),W(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),W(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),W(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var h=u.shape[2],d=u.shape[3];W(l.shape[2]===h*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*d+", but got "+l.shape[2]+"."});var p=Tw(c,u,r,i,a,o),v=Zi(p,l,1,"valid",a);return f?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),fme=G({conv2dTranspose_:function(t,e,n,r,i,o){return uz(n,j(t,"x","conv2dTranspose"),j(e,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),hme=G({conv3dTranspose_:function(t,e,n,r,i){return lz(n,j(t,"x","conv3dTranspose"),j(e,"filter","conv3dTranspose"),r,i)}}),Pw=G({matMul_:function(t,e,n,r){var i;n===void 0&&(n=!1),r===void 0&&(r=!1);var o=j(t,"a","matMul"),a=j(e,"b","matMul");i=rn(o,a),o=i[0],a=i[1];var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?a.shape[a.rank-1]:a.shape[a.rank-2],l=n?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],f=o.shape.slice(0,-2),h=a.shape.slice(0,-2),d=Ae(f),p=Ae(h);W(o.rank>=2&&a.rank>=2&&o.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."}),W(Jn(f,h),function(){return"Error in matMul: outer dimensions ("+f+") and ("+h+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."}),W(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var v=o.shape.slice(0,-2).concat([l,c]),m=n?o.as3D(d,s,l):o.as3D(d,l,s),g=r?a.as3D(p,c,u):a.as3D(p,u,c),y={transposeA:n,transposeB:r};return K.runKernelFunc(function(b,_){var x=b.batchMatMul(m,g,n,r);return _([m,g]),x},{a:m,b:g},function(b,_){var x=_,S=x[0],E=x[1];return n||r?!n&&r?{a:function(){return b.matMul(E,!1,!1)},b:function(){return b.matMul(S,!0,!1)}}:n&&!r?{a:function(){return E.matMul(b,!1,!0)},b:function(){return S.matMul(b,!1,!1)}}:{a:function(){return E.matMul(b,!0,!0)},b:function(){return b.matMul(S,!0,!0)}}:{a:function(){return b.matMul(E,!1,!0)},b:function(){return S.matMul(b,!0,!1)}}},"BatchMatMul",y).reshape(v)}}),dme=G({dot_:function(t,e){var n=j(t,"t1","dot"),r=j(e,"t2","dot");W(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];return W(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),pme=G({outerProduct_:function(t,e){var n=j(t,"v1","outerProduct"),r=j(e,"v2","outerProduct");return W(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),dm=G({reverse_:function(t,e){var n=j(t,"x","reverse");if(n.rank===0)return n.clone();var r=Vn(e,n.shape);return K.runKernelFunc(function(i){return i.reverse(n,r)},{$x:n},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(n)}}),vme=G({reverse1d_:function(t){var e=j(t,"x","reverse");return W(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),dm(e,0)}}),mme=G({reverse2d_:function(t,e){var n=j(t,"x","reverse");return W(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),dm(n,e)}}),gme=G({reverse3d_:function(t,e){var n=j(t,"x","reverse");return W(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),dm(n,e)}}),yme=G({reverse4d_:function(t,e){var n=j(t,"x","reverse");return W(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),dm(n,e)}});function dz(t,e,n,r,i,o){var a=j(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),W(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),W(ii(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),o!=null&&W(mn(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=iv(s.shape,e,n,r,i,o);if(l.filterWidth===1&&l.filterHeight===1&&Jn(l.inShape,l.outShape))return a.clone();var c=[s],f=K.runKernelFunc(function(h,d){var p=h.maxPool(s,l);return d([s,p]),p},{x:s},function(h,d){var p=d[0],v=d[1];return{x:function(){return function(m,g,y,b,_,x,S,E){var C=j(m,"dy","maxPoolBackprop"),A=j(g,"input","maxPoolBackprop"),T=j(y,"output","maxPoolBackprop");W(A.rank===C.rank,function(){return"Rank of input ("+A.rank+") does not match rank of dy ("+C.rank+")"}),W(ii(_,x),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+x+"'"}),W(C.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+C.rank+"."}),W(A.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+A.rank+"."});var P=iv(A.shape,b,_,x,S,E);return K.runKernelFunc(function(R){return R.maxPoolBackprop(C,A,T,P)},{$dy:C,$input:A})}(h,p,v,e,n,r,i)}}},"MaxPool",l,c);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function pz(t,e,n,r,i,o){var a=j(t,"x","avgPool","float32");W(ii(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),W(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),o!=null&&W(mn(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=iv(s.shape,e,n,r,i,o);if(l.filterWidth===1&&l.filterHeight===1&&Jn(l.inShape,l.outShape))return a.clone();var c=K.runKernelFunc(function(f){return f.avgPool(s,l)},{x:s},function(f){return{x:function(){return function(h,d,p,v,m,g){var y=j(h,"dy","avgPoolBackprop"),b=j(d,"input","avgPoolBackprop");W(b.rank===y.rank,function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+y.rank+")"}),W(ii(v,m),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+m+"'"});var _=b,x=y,S=!1;b.rank===3&&(S=!0,_=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),x=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),W(x.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+x.rank+"."}),W(_.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+_.rank+"."});var E=iv(_.shape,p,v,m,g),C=K.runKernelFunc(function(A){return A.avgPoolBackprop(x,_,E)},{dy4D:x,input4D:_});return S?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}(f,s,e,n,r,i)}}},"AvgPool",l);return c=c.cast(a.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Hn=G({maxPool_:function(t,e,n,r,i){return dz(t,e,n,1,r,i)}}),pm=G({avgPool_:function(t,e,n,r,i){return pz(t,e,n,1,r,i)}}),bme=G({pool_:function(t,e,n,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var a=j(t,"x","maxPool"),s=a,u=!1;a.rank===3&&(u=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),W(ii(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var l,c=iv(s.shape,e,o,i,r),f=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(_,x){var S=_.map(function(A,T){return A+(A-1)*(x[T]-1)}).map(function(A){return A-1}),E=S.map(function(A){return Math.floor(A/2)}),C=S.map(function(A,T){return A-E[T]});return S.map(function(A,T){return[E[T],C[T]]})}([c.filterHeight,c.filterWidth],f):[[0,0],[0,0]];var h=f[0]===1&&f[1]===1,d=function(_,x,S){var E=S.map(function(M){return M[0]}),C=S.map(function(M){return M[1]}),A=_.concat(E,C),T=x.map(function(M,B){return(M-A[B]%M)%M}),P=C.map(function(M,B){return M+T[B]}),R=x.map(function(M,B){return[E[B],P[B]]}),I=x.map(function(M,B){return[0,T[B]]});return[R,I]}([c.inHeight,c.inWidth],f,l),p=d[0],v=d[1],m=h?r:"valid",g=h?s:w6(s,f,p),y=(n==="avg"?function(){return pz(g,e,o,1,m)}:function(){return dz(g,e,o,1,m)})(),b=h?y:g6(y,f,v);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),wme=G({maxPool3d_:function(t,e,n,r,i,o,a){o===void 0&&(o="NDHWC");var s=j(t,"x","maxPool3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),W(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),W(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),W(ii(n,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),i!=null&&W(mn(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=E0(u.shape,e,n,a,r,i,o),f=K.runKernelFunc(function(h,d){var p=h.maxPool3d(u,c);return d([u,p]),p},{x:u},function(h,d){var p=d[0],v=d[1];return{x:function(){return function(m,g,y,b,_,x,S,E){var C=j(m,"dy","maxPool3dBackprop"),A=j(g,"input","maxPool3dBackprop"),T=j(y,"output","maxPool3dBackprop"),P=C,R=A,I=T,M=!1;A.rank===4&&(M=!0,P=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),R=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),I=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3])),W(P.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),W(R.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+R.rank+"."}),W(I.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+I.rank+"."}),x==null&&(x=[1,1,1]),W(ii(_,x),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+_+" and dilations '"+x+"'"}),E!=null&&W(mn(S),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+S+"."});var B=E0(R.shape,b,_,x,S,E),z=K.runKernelFunc(function(U){return U.maxPool3dBackprop(P,R,I,B)},{dy5D:P,input5D:R});return M?z.as4D(z.shape[1],z.shape[2],z.shape[3],z.shape[4]):z}(h,p,v,e,n,a,r,i)}}});return l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),xme=G({avgPool3d_:function(t,e,n,r,i,o,a){o===void 0&&(o="NDHWC");var s=j(t,"x","avgPool3d","float32"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),a==null&&(a=[1,1,1]),W(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),W(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),W(ii(n,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),i!=null&&W(mn(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=E0(u.shape,e,n,a,r,i,o),f=K.runKernelFunc(function(h){return h.avgPool3d(u,c)},{x:u},function(h){return{x:function(){return function(d,p,v,m,g,y,b){var _=j(d,"dy","avgPool3dBackprop"),x=j(p,"input","avgPool3dBackprop"),S=_,E=x,C=!1;x.rank===4&&(C=!0,S=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]),E=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3])),W(S.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+S.rank+"."}),W(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),g==null&&(g=[1,1,1]),W(ii(m,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"}),b!=null&&W(mn(y),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+y+"."});var A=E0(E.shape,v,m,g,y,b),T=K.runKernelFunc(function(P){return P.avgPool3dBackprop(S,E,A)},{dy5D:S,input5D:E});return C?T.as4D(T.shape[1],T.shape[2],T.shape[3],T.shape[4]):T}(h,u,e,n,a,r,i)}}});return f=f.cast(u.dtype),l?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),ya=G({slice_:function(t,e,n){var r,i,o=j(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(o.rank-1).fill(0)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(0)):e.slice()).forEach(function(u){W(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=n==null?new Array(o.rank).fill(-1):typeof n=="number"?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map(function(u,l){return u>=0?u:(W(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+l+"."}),o.shape[l]-r[l])}),Xhe(o,r,i);var a=o.shape,s={begin:r,size:i};return K.runKernelFunc(function(u){return u.slice(o,r,i)},{x:o},function(u){for(var l=[],c=0;c<u.rank;c++)l.push([r[c],a[c]-r[c]-i[c]]);return{x:function(){return u.pad(l)}}},"Slice",s)}}),_me=G({slice1d_:function(t,e,n){var r=j(t,"x","slice1d");return W(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),ya(r,[e],[n])}}),Sme=G({slice2d_:function(t,e,n){var r=j(t,"x","slice2d");return W(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),ya(r,e,n)}}),vz=G({slice3d_:function(t,e,n){var r=j(t,"x","slice3d");return W(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),ya(r,e,n)}}),Eme=G({slice4d_:function(t,e,n){var r=j(t,"x","slice4d");return W(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),ya(r,e,n)}});function mz(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(ri(e.shape,r))),t.rank<n.rank&&(t=t.reshape(ri(t.shape,r))),{x:function(){var o=t.mul(n.equal(e).cast(t.dtype));return i==null?o:o.transpose(i)}}}var Cme=G({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","all","bool"),i=Vn(e,r.shape),o=i,a=_a(o,r.rank);a!=null&&(r=r.transpose(a),o=Sa(o.length,r.rank));var s=K.runKernelFunc(function(l){return l.all(r,o)},{$x:r});if(n){var u=ri(s.shape,i);return s.reshape(u)}return s}}),Ame=G({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","any","bool"),i=Vn(e,r.shape),o=i,a=_a(o,r.rank);a!=null&&(r=r.transpose(a),o=Sa(o.length,r.rank));var s=K.runKernelFunc(function(l){return l.any(r,o)},{$x:r});if(n){var u=ri(s.shape,i);return s.reshape(u)}return s}}),Tme=G({argMax_:function(t,e){e===void 0&&(e=0);var n=j(t,"x","argMax");e==null&&(e=0);var r=Vn(e,n.shape),i=_a(r,n.rank);i!=null&&(n=n.transpose(i),r=Sa(r.length,n.rank));var o={axis:r[0]},a=[n];return K.runKernelFunc(function(s,u){var l=s.argMax(n,r[0]);return u([n]),l},{x:n},function(s,u){var l=u[0];return{x:function(){return at(l)}}},"ArgMax",o,a)}}),Pme=G({argMin_:function(t,e){e===void 0&&(e=0);var n=j(t,"x","argMin");e==null&&(e=0);var r=Vn(e,n.shape),i=_a(r,n.rank);return i!=null&&(n=n.transpose(i),r=Sa(r.length,n.rank)),K.runKernelFunc(function(o,a){var s=o.argMin(n,r[0]);return a([n]),s},{$x:n},function(o,a){var s=a[0];return{$x:function(){return at(s)}}})}}),Ome=G({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","logSumExp"),i=Vn(e,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(n){var u=ri(s.shape,i);return s.reshape(u)}return s}}),Ow=G({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","max"),i=r,o=Vn(e,r.shape),a=o,s=_a(a,r.rank);s!=null&&(r=r.transpose(s),a=Sa(a.length,r.rank));var u=[r],l=K.runKernelFunc(function(f,h){var d=f.max(r,a);return h([i,d]),d},{x:r},function(f,h){return mz(f,h[1],h[0],o,s)},"Max",{axes:a},u,[!0]);if(n){var c=ri(l.shape,o);l=l.reshape(c)}return l}}),kme=G({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","mean"),i=Vn(e,r.shape),o=Ae(br(r.shape,i)[1]);return Ew(function(a){var s=me(o);return{value:(s.dtype===a.dtype?a:a.cast(s.dtype)).div(s).sum(e,n),gradFunc:function(u){var l=a.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(Fh(a.shape,"float32")).div(o)}}})(r)}}),Rme=G({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","min"),i=r,o=Vn(e,r.shape),a=o,s=_a(a,r.rank);s!=null&&(r=r.transpose(s),a=Sa(a.length,r.rank));var u=[r],l=K.runKernelFunc(function(f,h){var d=f.min(r,a);return h([i,d]),d},{x:r},function(f,h){return mz(f,h[1],h[0],o,s)},"Min",{axes:a},u,[!0]);if(n){var c=ri(l.shape,o);l=l.reshape(c)}return l}}),Ime=G({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=Vn(e,(t=j(t,"x","moments")).shape),i=t.mean(r,n),o=i.shape;n||(o=ri(i.shape,r));var a=t.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(r,n)}}}),gz=G({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=Vn(e,r.shape);return Ew(function(o){var a=_a(i,o.rank),s=i,u=o;a!=null&&(u=o.transpose(a),s=Sa(s.length,o.rank));var l=function(d){var p=o.shape.slice();return i.forEach(function(v){p[v]=1}),d.reshape(p).mul(Fh(o.shape,"float32"))},c={axes:s},f=K.runKernelFunc(function(d){return d.sum(u,s)},{x:u},function(d){return{x:function(){return l(d)}}},"Sum",c);if(n){var h=ri(f.shape,i);f=f.reshape(h)}return{value:f,gradFunc:l}})(r)}}),Dme=G({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=j(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=Vn(e,r.shape),o=_a(i,r.rank),a=i,s=r;o!=null&&(s=r.transpose(o),a=Sa(a.length,r.rank));var u=K.runKernelFunc(function(c){return c.prod(s,a)},{permutedX:s});if(n){var l=ri(u.shape,i);u=u.reshape(l)}return u}}),yz=G({elu_:function(t){var e=j(t,"x","elu");return K.runKernelFunc(function(n,r){var i=n.elu(e);return r([i]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return K.runKernelFunc(function(o){return o.eluDer(n,i)},{dy:n,y:i})}}})}}),Nme=G({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=j(t,"x","leakyRelu");return CP(me(e).mul(n),n)}}),bz=G({prelu_:function(t,e){var n=j(t,"x","prelu"),r=j(e,"alpha","prelu");return K.runKernelFunc(function(i,o){var a=i.prelu(n,r);return o([n,r]),a},{x:n,alpha:r},function(i,o){var a=o[0],s=o[1],u=a.greater(0);return{x:function(){return Wl(u,i,i.mul(s))},alpha:function(){var l=Wl(u,at(i),i.mul(a)),c=Bn(s.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Prelu")}}),en=G({relu_:function(t){var e=j(t,"x","relu");return e.dtype==="bool"?e.toInt():K.runKernelFunc(function(n,r){var i=n.relu(e);return r([e]),i},{x:e},function(n,r){var i=r[0];return{x:function(){return n.mulStrict(i.step().toFloat())}}},"Relu")}}),wz=G({relu6_:function(t){var e=j(t,"x","relu6");return e.dtype==="bool"?e.toInt():K.runKernelFunc(function(n,r){var i=n.relu6(e);return r([e]),i},{x:e},function(n,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return n.mulStrict(o.toFloat())}}},"Relu6")}}),Mme=G({selu_:function(t){var e=j(t,"x","selu");return K.runKernelFunc(function(n,r){var i=n.selu(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){var o=i.greater(me(0)),a=me(_P),s=me(SP),u=n.mul(s),l=n.mul(a).mul(i.toFloat().exp());return Wl(o,u,l)}}})}}),_u=G({transpose_:function(t,e){var n=j(t,"x","transpose");if(e==null&&(e=n.shape.map(function(i,o){return o}).reverse()),W(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(i){W(i>=0&&i<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1)return n.clone();var r={perm:e};return K.runKernelFunc(function(i){return i.transpose(n,e)},{x:n},function(i){var o=hP(e);return{x:function(){return i.transpose(o)}}},"Transpose",r)}}),$me=G({localResponseNormalization_:function(t,e,n,r,i){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=j(t,"x","localResponseNormalization");W(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),W(mn(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var a=o,s=!1;o.rank===3&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=K.runKernelFunc(function(l,c){var f=l.localResponseNormalization4D(a,e,n,r,i);return c([a,f]),f},{x4D:a},function(l,c){var f=c[0],h=c[1];return{x4D:function(){return K.runKernelFunc(function(d){return d.LRNGrad(l,f,h,e,n,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),xz=G({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var i=function s(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return s(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(me(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=j(t,"x","norm"),e,n),o=i.shape;if(r){var a=Vn(n,t.shape);o=ri(i.shape,a)}return i.reshape(o)}}),jme=G({basicLSTMCell_:function(t,e,n,r,i,o){var a=j(t,"forgetBias","basicLSTMCell"),s=j(e,"lstmKernel","basicLSTMCell"),u=j(n,"lstmBias","basicLSTMCell"),l=j(r,"data","basicLSTMCell"),c=j(i,"c","basicLSTMCell"),f=j(o,"h","basicLSTMCell"),h=l.concat(f,1).matMul(s).add(u),d=h.shape[0],p=h.shape[1]/4,v=[d,p],m=h.slice([0,0],v),g=h.slice([0,p],v),y=h.slice([0,2*p],v),b=h.slice([0,3*p],v),_=m.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(a.add(y).sigmoid())),x=_.tanh().mulStrict(b.sigmoid());return[_,x]}}),Lme=G({multiRNNCell_:function(t,e,n,r){for(var i=j(e,"data","multiRNNCell"),o=y0(n,"c","multiRNNCell"),a=y0(r,"h","multiRNNCell"),s=i,u=[],l=0;l<t.length;l++){var c=t[l](s,o[l],a[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],h=[];for(l=0;l<u.length;l+=2)f.push(u[l]),h.push(u[l+1]);return[f,h]}}),Fme=G({movingAverage_:function(t,e,n,r,i){i===void 0&&(i=!0);var o=j(t,"v","movingAverage"),a=j(e,"x","movingAverage"),s=j(n,"decay","movingAverage");$fe(o,a),W(Jn(o.shape,a.shape),function(){return"Shape mismatch in v and x"});var u=me(1),l=u.sub(s),c=a.sub(o).mul(l);if(i){W(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=j(r,"step","movingAverage");c=c.div(u.sub(P0(s,f)))}return o.add(c)}}),Bme=G({stridedSlice_:function(t,e,n,r,i,o,a,s,u){if(i===void 0&&(i=0),o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),a!==0)throw new Error("ellipsis mask is not yet supported");var l=j(t,"x","stridedSlice"),c=PM(s),f=l.shape.slice();c.forEach(function(m){e[m]=0,n[m]=1,f.splice(m,0,1)}),l=l.reshape(f);for(var h=0;h<l.rank;h++)e[h]=Yhe(i,e,r,l.shape,h),n[h]=Jhe(o,n,r,l.shape,h),r[h]=r[h]||1;var d=PM(u);d.forEach(function(m){n[m]=e[m]+1,r[m]=1});var p=mP(e,n,r),v=p.filter(function(m,g){return d.indexOf(g)===-1});return r.every(function(m){return m===1})?ya(l,e,p).reshape(v):K.runKernelFunc(function(m){return m.stridedSlice(l,e,n,r)},{$x:l}).reshape(v)}}),Ume=G({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=j(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var o=K.runKernelFunc(function(a){return a.topk(r,e,n)},{$x:r});return{values:o[0],indices:o[1]}}}),Vme=G({scatterND_:function(t,e,n){var r=j(t,"indices","scatterND","int32"),i=j(e,"updates","scatterND");return Khe(i,r,n),K.runKernelFunc(function(o){return o.scatterND(r,i,n)},{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),OP=G({fft_:function(t){W(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return K.runKernelFunc(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),O0=G({ifft_:function(t){W(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return K.runKernelFunc(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),kP=G({rfft_:function(t,e){W(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],i=t.size/r;if(e!=null&&e<r){var o=t.shape.map(function(g){return 0}),a=t.shape.map(function(g){return g});a[t.shape.length-1]=e,n=t.slice(o,a),r=e}else if(e!=null&&e>r){var s=t.shape.map(function(g){return g});s[t.shape.length-1]=e-r,n=t.concat(Bt(s),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=or(n,u).as2D(i,r),c=OP(l),f=Math.floor(r/2)+1,h=Ui(c),d=Zo(c),p=h.split([f,r-f],h.shape.length-1),v=d.split([f,r-f],d.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=f,or(p[0],v[0]).reshape(m)}}),_z=G({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=O0(r);return Ui(i)}var o=[n,2*(e-1)],a=Ui(t).as2D(n,e),s=Zo(t).as2D(n,e),u=a.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(me(-1)),c=a.concat(u,1),f=s.concat(l,1);return r=or(c,f).as2D(o[0],o[1]),i=O0(r),Ui(i)}}),Wme=Object.freeze({fft:OP,ifft:O0,rfft:kP,irfft:_z}),zme=G({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var i=j(t,"sparseIndices","sparseToDense","int32"),o=j(e,"sparseValues","sparseToDense"),a=j(r,"defaultValue","sparseToDense",o.dtype);return function(s,u,l,c){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,h=s.rank>1?s.shape[1]:1;if(l.length!==h)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+h+".");var d=u.size;if(u.rank!==0&&(u.rank!==1||d!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,a),K.runKernelFunc(function(s){return s.sparseToDense(i,o,n,a)},{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),Hme=G({gatherND_:function(t,e){var n=j(e,"indices","gatherND","int32"),r=j(t,"x","gatherND");return K.runKernelFunc(function(i){return i.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),Gme=G({diag_:function(t){var e=j(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return K.runKernelFunc(function(r){return r.diag(e)},{$x:e}).reshape(n)}}),qme=G({dropout_:function(t,e,n,r){var i=j(t,"x","dropout");if(W(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),W(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof Qt?i.clone():i;var o=function(u,l){if(l==null)return u.shape.slice();if(Jn(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],f=0;f<u.shape.length;f++)l[f]==null&&u.shape[f]!=null?c.push(u.shape[f]):c.push(l[f]);return c}return l}(i,n),a=1-e,s=b6(o,0,1,"float32",r).add(a).floor().div(a);return i.mul(s)}});function Sz(t,e,n){for(var r=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var a=2*Math.PI*o/(t+r-1);i[o]=e-n*Math.cos(a)}return Sn(i,"float32")}var RP=G({hannWindow_:function(t){return Sz(t,.5,.5)}}),Ez=G({hammingWindow_:function(t){return Sz(t,.54,.46)}}),IP=G({frame_:function(t,e,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,a=[];o+e<=t.size;)a.push(ya(t,o,e)),o+=n;if(r)for(;o<t.size;){var s=o+e-t.size,u=Ln([ya(t,o,e-s),ha([s],i)]);a.push(u),o+=n}return a.length===0?uu([],[0,e]):Ln(a).as2D(a.length,e)}}),Cz=G({stft_:function(t,e,n,r,i){var o;i===void 0&&(i=RP),r==null&&(o=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=IP(t,e,n),s=Tr(a,i(e)),u=[],l=0;l<a.shape[0];l++)u.push(kP(s.slice([l,0],[1,e]),r));return Ln(u)}}),Kme=Object.freeze({hannWindow:RP,hammingWindow:Ez,frame:IP,stft:Cz}),Sr,Xme=function(t,e,n){return n===void 0&&(n=1),Ee(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,f,h,d,p,v,m;return Ce(this,function(g){switch(g.label){case 0:return r=j(t,"predictions","inTopK"),i=j(e,"targets","inTopK"),W(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),W(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),mt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],W(n>0&&n<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n}),[4,r.data()];case 1:return a=g.sent(),[4,i.data()];case 2:for(s=g.sent(),u=[a.length/o,o],c=u[1],f=tv("bool",l=u[0]),h=0;h<l;h++){for(d=h*c,p=a.subarray(d,d+c),v=[],m=0;m<p.length;m++)v.push({value:p[m],index:m});for(v.sort(function(y,b){return b.value-y.value}),f[h]=0,m=0;m<n;m++)if(v[m].index===s[h]){f[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),[2,ur(f,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Sr||(Sr={}));var Yme=G({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=Sr.SUM_BY_NONZERO_WEIGHTS);var i=j(t,"labels","absoluteDifference"),o=j(e,"predictions","absoluteDifference"),a=null;n!=null&&(a=j(n,"weights","absoluteDifference")),mt(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return fs(s,a,r)}}),fs=G({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=Sr.SUM_BY_NONZERO_WEIGHTS);var r=j(t,"losses","computeWeightedLoss"),i=null;e!=null&&(i=j(e,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(n===Sr.NONE)return o;if(n===Sr.SUM)return o.sum();if(n===Sr.MEAN){if(i==null)return o.mean();var a=r.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(me(a)):s}if(n===Sr.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(me(r.size));var u=i.mul(Fh(r.shape)).notEqual(me(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),Jme=G({cosineDistance_:function(t,e,n,r,i){i===void 0&&(i=Sr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"labels","cosineDistance"),a=j(e,"predictions","cosineDistance"),s=null;r!=null&&(s=j(r,"weights","cosineDistance")),mt(o.shape,a.shape,"Error in cosineDistance: ");var u=me(1).sub(o.mul(a).sum(n,!0));return fs(u,s,i)}}),Qme=G({hingeLoss_:function(t,e,n,r){r===void 0&&(r=Sr.SUM_BY_NONZERO_WEIGHTS);var i=j(t,"labels","hingeLoss"),o=j(e,"predictions","hingeLoss"),a=null;n!=null&&(a=j(n,"weights","hingeLoss")),mt(i.shape,o.shape,"Error in hingeLoss: ");var s=me(1);i=me(2).mul(i).sub(s);var u=s.sub(i.mul(o)).relu();return fs(u,a,r)}}),Zme=G({huberLoss_:function(t,e,n,r,i){r===void 0&&(r=1),i===void 0&&(i=Sr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"labels","huberLoss"),a=j(e,"predictions","huberLoss"),s=null;n!=null&&(s=j(n,"weights","huberLoss")),mt(o.shape,a.shape,"Error in huberLoss: ");var u=me(r),l=a.sub(o).abs(),c=iz(l,u),f=l.sub(c),h=me(.5).mul(c.square()).add(u.mul(f));return fs(h,s,i)}}),ege=G({logLoss_:function(t,e,n,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=Sr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"labels","logLoss"),a=j(e,"predictions","logLoss"),s=null;n!=null&&(s=j(n,"weights","logLoss")),mt(o.shape,a.shape,"Error in logLoss: ");var u=me(1),l=me(r),c=o.mul(a.add(l).log()).neg().sub(u.sub(o).mul(u.sub(a).add(l).log()));return fs(c,s,i)}}),tge=G({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=Sr.SUM_BY_NONZERO_WEIGHTS);var i=j(t,"labels","meanSquaredError"),o=j(e,"predictions","meanSquaredError"),a=null;n!=null&&(a=j(n,"weights","meanSquaredError")),mt(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return fs(s,a,r)}}),nge=G({sigmoidCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=Sr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"multiClassLabels","sigmoidCrossEntropy"),a=j(e,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=j(n,"weights","sigmoidCrossEntropy")),mt(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=me(r),l=me(1),c=me(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var f=function(h,d){var p=j(h,"labels","sigmoidCrossEntropyWithLogits"),v=j(d,"logits","sigmoidCrossEntropyWithLogits");mt(p.shape,v.shape,"Error in sigmoidCrossEntropyWithLogits: ");var m=v.relu(),g=v.mul(p),y=v.abs().neg().exp().log1p();return m.sub(g).add(y)}(o,a);return fs(f,s,i)}}),rge=G({softmaxCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=Sr.SUM_BY_NONZERO_WEIGHTS);var o=j(t,"onehotLabels","softmaxCrossEntropy"),a=j(e,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=j(n,"weights","softmaxCrossEntropy")),mt(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var u=me(r),l=me(1),c=me(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var f=function(h,d,p){if(p===void 0&&(p=-1),p===-1&&(p=d.rank-1),p!==d.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+d.rank+" and dim was "+p);return Ew(function(v,m,g){var y=m.logSumExp([p],!0),b=m.toFloat().sub(y);return g([v,b]),{value:b.mul(v).neg().sum([p]),gradFunc:function(_,x){var S=x[0],E=x[1],C=ri(_.shape,[p]);return[_.reshape(C).mul(S.toFloat().sub(E.exp())),_.reshape(C).mul(E.exp().sub(S.toFloat()))]}}})(h,d)}(o,a);return fs(f,s,i)}}),ige=Object.freeze({get Reduction(){return Sr},absoluteDifference:Yme,computeWeightedLoss:fs,cosineDistance:Jme,hingeLoss:Qme,huberLoss:Zme,logLoss:ege,meanSquaredError:tge,sigmoidCrossEntropy:nge,softmaxCrossEntropy:rge});function YM(t,e){return e===void 0&&(e=!1),K.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=y6(n),o=t.clone(),a=uu([[1]],[1,1]),s=a.clone(),u=n>=r?r:n,l=function(f){var h,d=o,p=s,v=i;h=K.tidy(function(){var m=o.slice([f,f],[n-f,1]),g=m.norm(),y=o.slice([f,f],[1,1]),b=uu([[-1]]).where(y.greater(0),uu([[1]])),_=y.sub(b.mul(g)),x=m.div(_);s=x.shape[0]===1?a.clone():a.concat(x.slice([1,0],[x.shape[0]-1,x.shape[1]]),0);var S=b.matMul(_).div(g).neg(),E=o.slice([f,0],[n-f,r]),C=S.mul(s);if(f===0)o=E.sub(C.matMul(s.transpose().matMul(E)));else{var A=E.sub(C.matMul(s.transpose().matMul(E)));o=o.slice([0,0],[f,r]).concat(A,0)}var T=i.slice([0,f],[n,i.shape[1]-f]);if(f===0)i=T.sub(T.matMul(s).matMul(C.transpose()));else{var P=T.sub(T.matMul(s).matMul(C.transpose()));i=i.slice([0,0],[n,f]).concat(P,1)}return[s,o,i]}),s=h[0],o=h[1],i=h[2],ti([d,p,v])},c=0;c<u;++c)l(c);return!e&&n>r&&(i=i.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[i,o]})}var oge=G({bandPart_:function(t,e,n){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=j(t,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),a=o[0],s=o[1];if(!(e<=a))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+a+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");e<0&&(e=a),n<0&&(n=s);var u=b0(0,a,1,"int32").reshape([-1,1]),l=b0(0,s,1,"int32"),c=Un(u,l),f=Aw(c.lessEqual(me(+e,"int32")),c.greaterEqual(me(-n,"int32"))),h=Bt([a,s],r.dtype);return Ci(Fn(r.reshape([-1,a,s])).map(function(d){return Wl(f,d,h)})).reshape(i)}}),age=G({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,W(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){W(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},i=1;i<t.length;++i)r(i)}else e=!0,t=pP(t,t.shape[0],0).map(function(u){return x6(u,[0])});W(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],a=t,s=function(u){o.push(K.tidy(function(){var l=a[u];if(u>0)for(var c=0;c<u;++c){var f=gz(o[c].mulStrict(l)).mul(o[c]);l=l.sub(f)}return l.div(xz(l,"euclidean"))}))};for(i=0;i<t.length;++i)s(i);return e?Ci(o,0):o}}),sge=G({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return YM(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(a,s){return a*s}),r=Fn(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(function(a){var s=YM(a,e),u=s[0],l=s[1];i.push(u),o.push(l)}),[Ci(i,0).reshape(t.shape),Ci(o,0).reshape(t.shape)]}}),uge=Object.freeze({bandPart:oge,gramSchmidt:age,qr:sge});function kw(t,e,n,r,i,o){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);var a=t.shape[0];return n=Math.min(n,a),W(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),W(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),W(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),W(e.rank===1,function(){return"scores must be a 1D tensor"}),W(e.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+e.shape[0]}),W(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var lge=G({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=j(t,"images","resizeBilinear");W(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),W(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=K.runKernelFunc(function(l,c){return c([i]),l.resizeBilinear(i,a,s,n)},{x:i},function(l,c){return{x:function(){return K.runKernelFunc(function(f){return f.resizeBilinearBackprop(l,c[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:s});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),cge=G({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=j(t,"images","resizeNearestNeighbor");W(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),W(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),W(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=e[0],s=e[1],u=K.runKernelFunc(function(l,c){return c([i]),l.resizeNearestNeighbor(i,a,s,n)},{batchImages:i},function(l,c){return{batchImages:function(){return K.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),fge=G({nonMaxSuppression_:function(t,e,n,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=j(t,"boxes","nonMaxSuppression"),a=j(e,"scores","nonMaxSuppression"),s=kw(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:i};return K.runKernelFunc(function(l){return l.nonMaxSuppression(o,a,n,r,i)},{boxes:o,scores:a},null,"NonMaxSuppressionV3",u)}}),hge=function(t,e,n,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),Ee(this,void 0,void 0,function(){var o,a,s,u,l,c,f;return Ce(this,function(h){switch(h.label){case 0:return o=j(t,"boxes","nonMaxSuppressionAsync"),a=j(e,"scores","nonMaxSuppressionAsync"),s=kw(o,a,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],f=yP(l,c,n,r,i),o!==t&&o.dispose(),a!==e&&a.dispose(),[2,f]}})})},dge=G({nonMaxSuppressionWithScore_:function(t,e,n,r,i,o){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var a=j(t,"boxes","nonMaxSuppression"),s=j(e,"scores","nonMaxSuppression"),u=kw(a,s,n,r,i,o),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},c=K.runKernel("NonMaxSuppressionV5",{boxes:a,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),pge=function(t,e,n,r,i,o){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),Ee(this,void 0,void 0,function(){var a,s,u,l,c,f,h;return Ce(this,function(d){switch(d.label){case 0:return a=j(t,"boxes","nonMaxSuppressionAsync"),s=j(e,"scores","nonMaxSuppressionAsync"),u=kw(a,s,n,r,i,o),n=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([a.data(),s.data()])];case 1:return l=d.sent(),c=l[0],f=l[1],h=bP(c,f,n,r,i,o),a!==t&&a.dispose(),s!==e&&s.dispose(),[2,h]}})})},vge=G({cropAndResize_:function(t,e,n,r,i,o){var a=j(t,"image","cropAndResize"),s=j(e,"boxes","cropAndResize","float32"),u=j(n,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var l=s.shape[0];return W(a.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),W(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."}),W(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."}),W(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),W(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),W(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),K.runKernelFunc(function(c,f){return c.cropAndResize(a,s,u,r,i,o)},{images:a,boxes:s,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),DP=Object.freeze({resizeBilinear:lge,resizeNearestNeighbor:cge,nonMaxSuppression:fge,nonMaxSuppressionAsync:hge,nonMaxSuppressionWithScore:dge,nonMaxSuppressionWithScoreAsync:pge,cropAndResize:vge}),NP=function(t,e){return!(t>0)||e==="linear"},MP=function(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return t.mul(e.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},$P=function(t,e){var n=e,r=Bn(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},jP=function(t,e,n){if(e==="linear")return t;if(e==="relu")return en(t);if(e==="elu")return yz(t);if(e==="relu6")return wz(t);if(e==="prelu")return bz(t,n);throw new Error("Unknown fused activation "+e+".")},mge=G({fusedMatMul_:function(t){var e,n=t.a,r=t.b,i=t.transposeA,o=i!==void 0&&i,a=t.transposeB,s=a!==void 0&&a,u=t.bias,l=t.activation,c=l===void 0?"linear":l,f=t.preluActivationWeights;if(NP(K.state.gradientDepth,c)===!1){var h=Pw(n,r,o,s);return u!=null&&(h=Je(h,u)),jP(h,c,f)}var d=j(n,"a","fused matMul"),p=j(r,"b","fused matMul");e=rn(d,p),d=e[0],p=e[1];var v=o?d.shape[d.rank-2]:d.shape[d.rank-1],m=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=o?d.shape[d.rank-1]:d.shape[d.rank-2],y=s?p.shape[p.rank-2]:p.shape[p.rank-1],b=d.shape.slice(0,-2),_=p.shape.slice(0,-2),x=Ae(b),S=Ae(_);W(d.rank>=2&&p.rank>=2&&d.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+p.rank+"."}),W(Jn(b,_),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+_+") of Tensors with shapes "+d.shape+" and "+p.shape+" must match."}),W(v===m,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+m+") of Tensors with shapes "+d.shape+" and "+p.shape+" and transposeA="+o+" and transposeB="+s+" must match."});var E,C,A=d.shape.slice(0,-2).concat([g,y]),T=o?d.as3D(x,v,g):d.as3D(x,g,v),P=s?p.as3D(S,y,m):p.as3D(S,m,y);u!=null&&Ze(A,(E=rn(E=j(u,"bias","fused matMul"),d)[0]).shape),f!=null&&(C=j(f,"prelu weights","fused matMul"));var R={a:T,b:P};u!=null&&(R.bias=E),f!=null&&(R.preluActivationWeights=C);var I=[T,P];return K.runKernelFunc(function(M,B){var z=M.fusedBatchMatMul({a:T,b:P,transposeA:o,transposeB:s,bias:E,activation:c,preluActivationWeights:C});return B([T,P,z]),z},R,function(M,B){var z=B[0],U=B[1],$=B[2],L=MP(M,$,c),H={};return u!=null&&(H={bias:function(){return $P(E,L)}}),Object.assign(o||s?!o&&s?{a:function(){return L.matMul(U,!1,!1)},b:function(){return L.matMul(z,!0,!1)}}:o&&!s?{a:function(){return U.matMul(L,!1,!0)},b:function(){return z.matMul(L,!1,!1)}}:{a:function(){return U.matMul(L,!0,!0)},b:function(){return L.matMul(z,!0,!0)}}:{a:function(){return L.matMul(U,!1,!0)},b:function(){return z.matMul(L,!0,!1)}},H)},"_FusedMatMul",{transposeA:o,transposeB:s,activation:c},I,[!0]).reshape(A)}}),gge=G({fusedConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,h=f===void 0?"linear":f,d=t.preluActivationWeights;if(h=h||"linear",NP(K.state.gradientDepth,h)===!1){var p=Zi(e,n,r,i,a,u,l);return c!=null&&(p=Je(p,c)),jP(p,h,d)}var v=j(e,"x","conv2d"),m=j(n,"filter","conv2d"),g=v,y=!1;v.rank===3&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),W(g.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),W(m.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),l!=null&&W(mn(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),W(g.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),W(ii(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),W(a==="NHWC",function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var b,_,x=ec(g.shape,m.shape,r,u,i,l);c!=null&&(b=rn(b=j(c,"bias","fused conv2d"),v)[0],Ze(x.outShape,b.shape)),d!=null&&(_=j(d,"prelu weights","fused conv2d"));var S={x:g,filter:m};c!=null&&(S.bias=b),d!=null&&(S.preluActivationWeights=_);var E=[m,g],C=K.runKernelFunc(function(A,T){var P=A.fusedConv2d({input:g,filter:m,convInfo:x,bias:b,activation:h,preluActivationWeights:_});return T([m,g,P]),P},S,function(A,T){var P=T,R=P[0],I=P[1],M=P[2],B=MP(A,M,h);W(Zf(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var z={};return c!=null&&(z={bias:function(){return $P(b,B)}}),Object.assign({x:function(){return cz(I.shape,B,R,r,i)},filter:function(){return TP(I,B,R.shape,r,i)}},z)},"FusedConv2D",{convInfo:x,activation:h},E,[!0]);return y?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),yge=G({fusedDepthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,a=o===void 0?"NHWC":o,s=t.dilations,u=s===void 0?[1,1]:s,l=t.dimRoundingMode,c=t.bias,f=t.activation,h=f===void 0?"linear":f,d=t.preluActivationWeights;if(NP(K.state.gradientDepth,h)===!1){var p=Tw(e,n,r,i,a,u,l);return c!=null&&(p=Je(p,c)),jP(p,h,d)}var v=j(e,"x","depthwiseConv2d"),m=j(n,"filter","depthwiseConv2d"),g=v,y=!1;v.rank===3&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),W(g.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),W(m.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),W(g.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),u==null&&(u=[1,1]),W(ii(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),l!=null&&W(mn(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+i+"."});var b,_,x=ec(g.shape,m.shape,r,u,i,l,!0);c!=null&&(b=rn(b=j(c,"bias","fused conv2d"),v)[0],Ze(x.outShape,b.shape)),d!=null&&(_=j(d,"prelu weights","fused depthwiseConv2d"));var S={x:g,filter:m};c!=null&&(S.bias=b),d!=null&&(S.preluActivationWeights=_);var E=[m,g],C=K.runKernelFunc(function(A,T){var P=A.fusedDepthwiseConv2D({input:g,filter:m,convInfo:x,bias:b,activation:h,preluActivationWeights:_});return T([m,g,P]),P},S,function(A,T){W(Zf(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var P=T[0],R=T[1],I=T[2],M=MP(A,I,h),B={};return c!=null&&(B={bias:function(){return $P(b,M)}}),Object.assign({x:function(){return fz(R.shape,M,P,x)},filter:function(){return hz(R,M,P.shape,x)}},B)},"FusedDepthwiseConv2D",{convInfo:x,activation:h},E,[!0]);return y?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),bge=Object.freeze({matMul:mge,conv2d:gge,depthwiseConv2d:yge}),wge=Object.freeze({image:DP,linalg:uge,losses:ige,spectral:Wme,fused:bge,signal:Kme,square:eve,squaredDifference:K6,conv1d:lme,conv2d:Zi,conv3d:cme,depthwiseConv2d:Tw,separableConv2d:PP,conv2dTranspose:fme,conv3dTranspose:hme,op:G,batchNormalization2d:kve,batchNormalization3d:Rve,batchNormalization4d:Ive,batchNormalization:Dve,batchNorm:ez,batchNorm2d:Nve,batchNorm3d:Mve,batchNorm4d:$ve,booleanMaskAsync:ume,complex:or,real:Ui,imag:Zo,concat:Ln,concat1d:bhe,concat2d:whe,concat3d:xhe,concat4d:_he,split:pP,matMul:Pw,dot:dme,outerProduct:pme,reverse:dm,reverse1d:vme,reverse2d:mme,reverse3d:gme,reverse4d:yme,maxPool:Hn,avgPool:pm,pool:bme,maxPool3d:wme,avgPool3d:xme,slice:ya,slice1d:_me,slice2d:Sme,slice3d:vz,slice4d:Eme,abs:tve,acos:nve,acosh:rve,asin:ive,asinh:ove,atan:ave,atanh:sve,ceil:uve,clipByValue:EP,cos:lve,cosh:cve,erf:fve,exp:yC,expm1:hve,floor:dve,log:pve,log1p:vve,logSigmoid:mve,neg:T0,reciprocal:gve,round:yve,rsqrt:X6,sigmoid:Y6,sign:bve,isNaN:wve,isInf:xve,isFinite:_ve,sin:Sve,sinh:Eve,softplus:Cve,sqrt:Ave,step:Tve,tan:Pve,tanh:Ove,all:Cme,any:Ame,argMax:Tme,argMin:Pme,logSumExp:Ome,max:Ow,mean:kme,min:Rme,moments:Ime,sum:gz,prod:Dme,equal:oz,equalStrict:Qve,greater:Zve,greaterEqual:az,greaterEqualStrict:eme,greaterStrict:tme,less:nme,lessEqual:rme,lessEqualStrict:ime,lessStrict:ome,notEqual:ame,notEqualStrict:sme,add:Je,addN:Fve,addStrict:Bve,atan2:Uve,div:xo,divNoNan:Vve,divStrict:Wve,floorDiv:rz,maximum:CP,maximumStrict:zve,minimum:iz,minimumStrict:Hve,mod:Gve,modStrict:qve,mul:Tr,mulStrict:Kve,pow:P0,powStrict:Xve,squaredDifferenceStrict:Yve,sub:Un,subStrict:Jve,elu:yz,leakyRelu:Nme,prelu:bz,relu:en,relu6:wz,selu:Mme,logicalAnd:Aw,logicalNot:jve,logicalOr:tz,logicalXor:Lve,where:Wl,whereAsync:nz,buffer:Ue,print:Rhe,batchToSpaceND:g6,broadcastTo:Ihe,cast:Dhe,clone:Nhe,cumsum:Mhe,depthToSpace:$he,expandDims:Bi,eye:y6,multinomial:jhe,oneHot:pC,pad:Zl,pad1d:Lhe,pad2d:Fhe,pad3d:Bhe,pad4d:Uhe,rand:Vhe,randomNormal:Whe,randomGamma:zhe,randomUniform:b6,reshape:Eo,spaceToBatchND:w6,squeeze:x6,stack:Ci,tile:bf,truncatedNormal:Hhe,unstack:Fn,setdiff1dAsync:Ghe,fill:ha,linspace:yhe,ones:Fh,range:b0,scalar:me,tensor:ur,tensor1d:Sn,tensor2d:uu,tensor3d:dP,tensor4d:qr,tensor5d:vhe,tensor6d:mhe,variable:ghe,zeros:Bt,onesLike:m6,zerosLike:at,transpose:_u,softmax:cs,logSoftmax:Zhe,localResponseNormalization:$me,norm:xz,gather:AP,unsortedSegmentSum:sz,basicLSTMCell:jme,multiRNNCell:Lme,movingAverage:Fme,stridedSlice:Bme,topk:Ume,scatterND:Vme,fft:OP,ifft:O0,rfft:kP,irfft:_z,sparseToDense:zme,gatherND:Hme,diag:Gme,dropout:qme,hannWindow:RP,hammingWindow:Ez,frame:IP,stft:Cz,inTopKAsync:Xme});function se(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(n){n!=null&&W(n.dtype!=="complex64",function(){return e+" does not support complex64 tensors."})})}function E_(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var xge=function(t){function e(){var n=t.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new P6(n,K),n}return Do(e,t),e.prototype.write=function(n,r,i){this.firstUse&&(this.firstUse=!1,re().get("IS_NODE")&&g0(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:n,dtype:i}),o},e.prototype.move=function(n,r,i,o){this.data.set(n,{values:r,dtype:o})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(n){return Ee(this,void 0,void 0,function(){return Ce(this,function(r){return[2,this.readSync(n)]})})},e.prototype.readSync=function(n){var r=this.data.get(n),i=r.dtype,o=r.complexTensors;return i==="complex64"?gC(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(n).values},e.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),i=r;if(n.dtype==="string")try{i=r.map(function(o){return p0(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ue(n.shape,n.dtype,i)},e.prototype.makeOutput=function(n,r,i){var o=this.write(n,r,i);return K.makeTensorFromDataId(o,r,i,this)},e.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},e.prototype.time=function(n){return Ee(this,void 0,void 0,function(){var r;return Ce(this,function(i){return r=Yo(),n(),[2,{kernelMs:Yo()-r}]})})},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(n,r){var i=this.makeOutput(null,n.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:K.keep(n.clone()),imag:K.keep(r.clone())},i},e.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},e.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},e.prototype.slice=function(n,r,i){if(se(n,"slice"),A6(n.shape,r,i)){var o=T6(r,n.strides),a=Ae(i);return ur(this.readSync(n.dataId).subarray(o,o+a),i,n.dtype)}for(var s=Ue(i,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l).map(function(f,h){return f+r[h]});s.values[l]=u.get.apply(u,c)}return s.toTensor()},e.prototype.stridedSlice=function(n,r,i,o){se(n,"stridedSlice");var a=mP(r,i,o);if(a.some(function(d){return d===0}))return ur([],a);for(var s=Ue(a,n.dtype),u=this.bufferSync(n),l=0;l<s.size;l++){for(var c=s.indexToLoc(l),f=new Array(c.length),h=0;h<f.length;h++)f[h]=c[h]*o[h]+r[h];s.set.apply(s,[u.get.apply(u,f)].concat(c))}return s.toTensor()},e.prototype.diag=function(n){for(var r=this.readSync(n.dataId),i=Ue([n.size,n.size],n.dtype),o=i.values,a=0;a<r.length;a++)o[a*n.size+a]=r[a];return i.toTensor()},e.prototype.unstack=function(n,r){for(var i=n.shape[r],o=new Array(n.rank-1),a=0,s=0;s<n.rank;s++)s!==r&&(o[a++]=n.shape[s]);var u=new Array(n.rank).fill(0),l=n.shape.slice();l[r]=1;var c=new Array(i);for(s=0;s<c.length;s++)u[r]=s,c[s]=this.slice(n,u,l).reshape(o);return c},e.prototype.reverse=function(n,r){se(n,"reverse");for(var i=Ue(n.shape,n.dtype),o=this.bufferSync(n),a=function(u){var l=i.indexToLoc(u),c=l.slice();r.forEach(function(f){return c[f]=n.shape[f]-1-c[f]}),i.set.apply(i,[o.get.apply(o,c)].concat(l))},s=0;s<i.size;s++)a(s);return i.toTensor()},e.prototype.concat=function(n,r){var i=this;if(n[0].dtype==="complex64"){var o=n.map(function(d){return Ui(d)}),a=n.map(function(d){return Zo(d)});return or(this.concat(o,r),this.concat(a,r))}var s=n.map(function(d){var p=Ae(d.shape.slice(r));return d.as2D(-1,p)}),u=Qf(s.map(function(d){return d.shape}),1),l=Ue(u,n[0].dtype).values;if(s[0].shape[0]===1){var c=0;s.forEach(function(d){l.set(i.readSync(d.dataId),c),c+=d.size})}else{var f=0;s.forEach(function(d){for(var p=i.readSync(d.dataId),v=0,m=0;m<d.shape[0];++m)for(var g=m*u[1]+f,y=0;y<d.shape[1];++y)l[g+y]=p[v++];f+=d.shape[1]})}var h=Qf(n.map(function(d){return d.shape}),r);return ur(l,h,n[0].dtype)},e.prototype.neg=function(n){return se(n,"neg"),this.multiply(me(-1),n)},e.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i+a,imag:o+s}}):this.broadcastedBinaryOp(n,r,sr(n.dtype,r.dtype),function(i,o){return i+o})},e.prototype.addN=function(n){var r=this;se(n,"addN");for(var i=n.map(function(c){return r.readSync(c.dataId)}),o=Ue(n[0].shape,n[0].dtype),a=o.values,s=0;s<n.length;s++)for(var u=i[s],l=0;l<a.length;l++)a[l]+=u[l];return o.toTensor()},e.prototype.softmax=function(n,r){var i=Vn([r],n.shape),o=this.max(n,i),a=ri(o.shape,i),s=this.subtract(n,o.reshape(a)),u=this.exp(s),l=this.sum(u,i).reshape(a);return this.realDivide(u,l)},e.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i-a,imag:o-s}}):this.broadcastedBinaryOp(n,r,sr(n.dtype,r.dtype),function(i,o){return i-o})},e.prototype.pow=function(n,r){return se([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return Math.pow(i,o)})},e.prototype.batchMatMul=function(n,r,i,o){se([n,r],"matMul");for(var a=i?n.shape[1]:n.shape[2],s=i?n.shape[2]:n.shape[1],u=o?r.shape[1]:r.shape[2],l=n.shape[0],c=this.readSync(n.dataId),f=this.readSync(r.dataId),h=i?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],d=h[0],p=h[1],v=h[2],m=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],g=m[0],y=m[1],b=m[2],_=s*u,x=Ue([l,s,u],n.dtype),S=x.values,E=this.blockSize,C=0;C<l;C++)for(var A=0;A<s;A+=E)for(var T=0;T<u;T+=E)for(var P=0;P<a;P+=E)for(var R=Math.min(A+E,s),I=Math.min(T+E,u),M=Math.min(P+E,a),B=A;B<R;B++)for(var z=T;z<I;z++){for(var U=0,$=P;$<M;$++)U+=c[C*d+B*p+$*v]*f[$*g+z*y+C*b];S[C*_+(B*u+z)]+=U}return x.toTensor()},e.prototype.fusedBatchMatMul=function(n){var r=n.a,i=n.b,o=n.transposeA,a=n.transposeB,s=n.bias,u=n.activation,l=n.preluActivationWeights,c=this.batchMatMul(r,i,o,a);return s&&(c=this.add(c,s)),u&&(c=E_(this,c,u,l)),c},e.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(i,o,a,s){return{real:i*a-o*s,imag:i*s+o*a}}):this.broadcastedBinaryOp(n,r,sr(n.dtype,r.dtype),function(i,o){return i*o})},e.prototype.realDivide=function(n,r){return se([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(i,o){return i/o})},e.prototype.floorDiv=function(n,r){return se([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(i,o){return Math.floor(i/o)})},e.prototype.sum=function(n,r){se(n,"sum"),pi("sum",r,n.rank);for(var i=br(n.shape,r),o=i[0],a=i[1],s=Bt(o,sr(n.dtype,"int32")),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=0,p=0;p<u;++p)d+=c[h+p];l[f]=d}return s},e.prototype.prod=function(n,r){se(n,"sum");for(var i=br(n.shape,r),o=i[0],a=i[1],s=Bt(o,sr(n.dtype,"int32")),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=1,p=0;p<u;++p)d*=c[h+p];l[f]=d}return s},e.prototype.unsortedSegmentSum=function(n,r,i){se(n,"unsortedSegmentSum");for(var o=[],a=n.rank-r.rank,s=0;s<a;++s)r=r.expandDims(s+1);for(s=0;s<i;++s){var u=me(s,"int32"),l=oz(u,r).asType("float32").mul(n).sum(0);o.push(l)}return Ci(o)},e.prototype.argMin=function(n,r){se(n,"argMin");var i=[r];pi("argMin",i,n.rank);for(var o=br(n.shape,i),a=o[0],s=o[1],u=Bt(a,"int32"),l=Ae(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),h=0;h<c.length;++h){for(var d=h*l,p=f[d],v=0,m=0;m<l;++m){var g=f[d+m];g<p&&(p=g,v=m)}c[h]=v}return u},e.prototype.argMax=function(n,r){se(n,"argMax");var i=[r];pi("argMax",i,n.rank);for(var o=br(n.shape,i),a=o[0],s=o[1],u=Bt(a,"int32"),l=Ae(s),c=this.readSync(u.dataId),f=this.readSync(n.dataId),h=0;h<c.length;++h){for(var d=h*l,p=f[d],v=0,m=0;m<l;++m){var g=f[d+m];g>p&&(p=g,v=m)}c[h]=v}return u},e.prototype.cumsum=function(n,r,i,o){if(se(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var a=sr(n.dtype,"int32"),s=Bt(n.shape,a),u=this.readSync(s.dataId),l=this.readSync(n.dataId),c=n.shape[n.rank-1],f=o?function(m,g){return m+c-g-1}:function(m,g){return m+g},h=0;h<l.length;h+=c)for(var d=0;d<c;d++){var p=f(h,d);if(d===0)u[p]=i?0:l[p];else{var v=f(h,d-1);u[p]=i?l[v]+u[v]:l[p]+u[v]}}return s},e.prototype.equal=function(n,r){return se([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i===o?1:0})},e.prototype.notEqual=function(n,r){return se([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i!==o?1:0})},e.prototype.less=function(n,r){return se([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i<o?1:0})},e.prototype.lessEqual=function(n,r){return se([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i<=o?1:0})},e.prototype.greater=function(n,r){return se([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i>o?1:0})},e.prototype.greaterEqual=function(n,r){return se([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i>=o?1:0})},e.prototype.logicalNot=function(n){se(n,"logicalNot");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,n.shape,"bool")},e.prototype.logicalAnd=function(n,r){return se([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i&&o})},e.prototype.logicalOr=function(n,r){return se([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(i,o){return i||o})},e.prototype.select=function(n,r,i){se([n,r,i],"select");for(var o=this.readSync(n.dataId),a=this.readSync(r.dataId),s=this.readSync(i.dataId),u=Bt(r.shape,sr(r.dtype,i.dtype)),l=this.readSync(u.dataId),c=0,f=n.rank===0||n.rank>1||r.rank===1?1:Ae(r.shape.slice(1)),h=0;h<o.length;h++)for(var d=0;d<f;d++)o[h]===1?l[c++]=a[h]:l[c++]=s[h];return u},e.prototype.where=function(n){se([n],"where");var r=this.readSync(n.dataId);return wP(n.shape,r)},e.prototype.topk=function(n,r,i){return se(n,"topk"),$6(this.readSync(n.dataId),n.shape,n.dtype,r)},e.prototype.min=function(n,r){se(n,"min"),pi("min",r,n.rank);for(var i=br(n.shape,r),o=i[0],a=i[1],s=Bt(o,n.dtype),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],p=0;p<u;++p){var v=c[h+p];v<d&&(d=v)}l[f]=d}return s},e.prototype.minimum=function(n,r){return se([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return Math.min(i,o)})},e.prototype.mod=function(n,r){return se([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){var a=i%o;return i<0&&o<0||i>=0&&o>=0?a:(a+o)%o})},e.prototype.max=function(n,r){se(n,"max"),pi("max",r,n.rank);for(var i=br(n.shape,r),o=i[0],a=i[1],s=Bt(o,n.dtype),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],p=0;p<u;++p){var v=c[h+p];v>d&&(d=v)}l[f]=d}return s},e.prototype.maximum=function(n,r){return se([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return Math.max(i,o)})},e.prototype.all=function(n,r){se(n,"all"),pi("all",r,n.rank);for(var i=br(n.shape,r),o=i[0],a=i[1],s=Bt(o,n.dtype),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],p=0;p<u;++p){var v=c[h+p];d=d&&v}l[f]=d}return s},e.prototype.any=function(n,r){se(n,"any"),pi("any",r,n.rank);for(var i=br(n.shape,r),o=i[0],a=i[1],s=Bt(o,n.dtype),u=Ae(a),l=this.readSync(s.dataId),c=this.readSync(n.dataId),f=0;f<l.length;++f){for(var h=f*u,d=c[h],p=0;p<u;++p){var v=c[h+p];d=d||v}l[f]=d}return s},e.prototype.squaredDifference=function(n,r){return se([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){var a=i-o;return a*a})},e.prototype.ceil=function(n){se(n,"ceil");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,n.shape,"float32")},e.prototype.floor=function(n){se(n,"floor");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,n.shape,"float32")},e.prototype.sign=function(n){se(n,"x");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?i[o]=-1:r[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,n.shape,"float32")},e.prototype.isNaN=function(n){se(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isInf=function(n){se(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.isFinite=function(n){se(n,"x");for(var r=this.readSync(n.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,n.shape,"bool")},e.prototype.round=function(n){se(n,"round");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=Math.floor(r[o]);r[o]-a<.5?i[o]=Math.floor(r[o]):r[o]-a>.5?i[o]=Math.ceil(r[o]):i[o]=a%2==0?a:a+1}return this.makeOutput(i,n.shape,"float32")},e.prototype.exp=function(n){se(n,"exp");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,n.shape,"float32")},e.prototype.expm1=function(n){se(n,"expm1");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,n.shape,"float32")},e.prototype.log=function(n){se(n,"log");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log(a)}return this.makeOutput(i,n.shape,"float32")},e.prototype.log1p=function(n){se(n,"log1p");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.log1p(a)}return this.makeOutput(i,n.shape,"float32")},e.prototype.sqrt=function(n){se(n,"sqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=Math.sqrt(a)}return this.makeOutput(i,n.shape,"float32")},e.prototype.rsqrt=function(n){se(n,"rsqrt");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var a=r[o];i[o]=1/Math.sqrt(a)}return this.makeOutput(i,n.shape,"float32")},e.prototype.reciprocal=function(n){se(n,"reciprocal");for(var r=this.readSync(n.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,n.shape,"float32")},e.prototype.linear=function(n){return n},e.prototype.relu=function(n){se(n,"relu");for(var r=Bt(n.shape,n.dtype),i=this.readSync(r.dataId),o=this.readSync(n.dataId),a=0;a<o.length;++a)i[a]=Math.max(0,o[a]);return r},e.prototype.relu6=function(n){se(n,"relu");for(var r=Bt(n.shape,n.dtype),i=this.readSync(r.dataId),o=this.readSync(n.dataId),a=0;a<o.length;++a)i[a]=Math.min(Math.max(0,o[a]),6);return r},e.prototype.prelu=function(n,r){return se([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return i<0?o*i:i})},e.prototype.elu=function(n){se(n,"elu");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var a=i[o];r[o]=a>=0?a:Math.exp(a)-1}return this.makeOutput(r,n.shape,"float32")},e.prototype.eluDer=function(n,r){se([n,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),a=this.readSync(n.dataId),s=0;s<o.length;++s){var u=o[s];i[s]=u>=1?a[s]:a[s]*(u+1)}return this.makeOutput(i,r.shape,"float32")},e.prototype.selu=function(n){se(n,"selu");for(var r=_P,i=SP,o=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(o,n.shape,"float32")},e.prototype.clip=function(n,r,i){se(n,"clip");for(var o=new Float32Array(n.size),a=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>i?i:u<r?r:u}return this.makeOutput(o,n.shape,"float32")},e.prototype.abs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<n.size;++o){var a=i[2*o],s=i[2*o+1];r[o]=Math.hypot(a,s)}return this.makeOutput(r,n.shape,"float32")},e.prototype.int=function(n){se(n,"int");for(var r=new Int32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,n.shape,"int32")},e.prototype.sigmoid=function(n){se(n,"sigmoid");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,n.shape,"float32")},e.prototype.softplus=function(n){se(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var s=o[a]>-r,u=o[a]<r,l=Math.exp(o[a]),c=void 0;c=u?l:s?o[a]:Math.log(1+l),i[a]=c}return this.makeOutput(i,n.shape,"float32")},e.prototype.sin=function(n){se(n,"sin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cos=function(n){se(n,"cos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tan=function(n){se(n,"tan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asin=function(n){se(n,"asin");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acos=function(n){se(n,"acos");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan=function(n){se(n,"atan");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atan2=function(n,r){return se([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(i,o){return Math.atan2(i,o)})},e.prototype.sinh=function(n){se(n,"sinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.cosh=function(n){se(n,"cosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.tanh=function(n){se(n,"tanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=_fe(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.asinh=function(n){se(n,"asinh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.acosh=function(n){se(n,"acosh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.atanh=function(n){se(n,"atanh");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,n.shape,"float32")},e.prototype.erf=function(n){se(n,"erf");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=0;o<i.length;++o){var a=Math.sign(i[o]),s=Math.abs(i[o]),u=1/(1+.3275911*s);r[o]=a*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},e.prototype.step=function(n,r){r===void 0&&(r=0),se(n,"step");for(var i=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var s=o[a];isNaN(s)?i[a]=NaN:i[a]=s>0?1:r}return this.makeOutput(i,n.shape,"float32")},e.prototype.fusedConv2d=function(n){var r=n.input,i=n.filter,o=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.conv2d(r,i,o);return a&&(l=this.add(l,a)),s&&(l=E_(this,l,s,u)),l},e.prototype.conv2d=function(n,r,i){se([n,r],"conv2d");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.dataFormat==="channelsLast",h=Ue(i.outShape,n.dtype),d=n.strides[0],p=f?n.strides[1]:n.strides[2],v=f?n.strides[2]:1,m=f?1:n.strides[1],g=h.strides[0],y=f?h.strides[1]:h.strides[2],b=f?h.strides[2]:1,_=f?1:h.strides[1],x=this.readSync(n.dataId),S=this.readSync(r.dataId),E=h.values,C=0;C<i.batchSize;++C)for(var A=C*d,T=C*g,P=0;P<i.outHeight;++P)for(var R=T+P*y,I=P*i.strideHeight-c,M=0;M<o;M++){var B=I+M*s;if(!(B<0||B>=i.inHeight))for(var z=M*r.strides[0],U=A+B*p,$=0;$<i.outWidth;++$)for(var L=R+$*b,H=$*i.strideWidth-l,X=0;X<a;X++){var q=H+X*u;if(!(q<0||q>=i.inWidth))for(var J=U+q*v,ae=z+X*r.strides[1],fe=0;fe<i.inChannels;++fe){for(var he=x[J+fe*m],de=0;de<i.outChannels;++de)E[L+de*_]+=he*S[ae+de];ae+=i.outChannels}}}return h.toTensor()},e.prototype.conv3d=function(n,r,i){for(var o=i.filterDepth,a=i.filterHeight,s=i.filterWidth,u=i.dilationDepth,l=i.dilationHeight,c=i.dilationWidth,f=i.padInfo.front,h=i.padInfo.left,d=i.padInfo.top,p=Ue(i.outShape,n.dtype),v=this.readSync(n.dataId),m=this.readSync(r.dataId),g=p.values,y=0;y<i.batchSize;++y)for(var b=y*n.strides[0],_=y*p.strides[0],x=0;x<i.outDepth;++x)for(var S=_+x*p.strides[1],E=x*i.strideDepth-f,C=0;C<o;C++){var A=E+C*u;if(!(A<0||A>=i.inDepth))for(var T=C*r.strides[0],P=b+A*n.strides[1],R=0;R<i.outHeight;++R)for(var I=S+R*p.strides[2],M=R*i.strideHeight-d,B=0;B<a;B++){var z=M+B*l;if(!(z<0||z>=i.inHeight))for(var U=T+B*r.strides[1],$=P+z*n.strides[2],L=0;L<i.outWidth;++L)for(var H=I+L*i.outChannels,X=L*i.strideWidth-h,q=0;q<s;q++){var J=X+q*c;if(!(J<0||J>=i.inWidth))for(var ae=U+q*r.strides[2],fe=$+J*i.inChannels,he=ae,de=0;de<i.inChannels;++de){for(var be=v[fe+de],ne=0;ne<i.outChannels;++ne)g[H+ne]+=be*m[he+ne];he+=i.outChannels}}}}return p.toTensor()},e.prototype.conv2dDerInput=function(n,r,i){se([n,r],"conv2dDerInput");for(var o=Ue(i.inShape,"float32"),a=o.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),l=r.strides,c=l[0],f=l[1],h=l[2],d=i.batchSize,p=i.filterHeight,v=i.filterWidth,m=i.inChannels,g=i.inHeight,y=i.inWidth,b=i.outChannels,_=i.outHeight,x=i.outWidth,S=i.strideHeight,E=i.strideWidth,C=i.dataFormat,A=p-1-i.padInfo.top,T=v-1-i.padInfo.left,P=C==="channelsLast",R=o.strides[0],I=P?o.strides[1]:o.strides[2],M=P?o.strides[2]:1,B=P?1:o.strides[1],z=n.strides[0],U=P?n.strides[1]:n.strides[2],$=P?n.strides[2]:1,L=P?1:n.strides[1],H=0;H<d;++H)for(var X=0;X<m;++X)for(var q=0;q<g;++q)for(var J=q-A,ae=Math.max(0,Math.ceil(J/S)),fe=Math.min(_,(p+J)/S),he=0;he<y;++he){for(var de=he-T,be=Math.max(0,Math.ceil(de/E)),ne=Math.min(x,(v+de)/E),ue=0,ce=ae;ce<fe;++ce)for(var Z=ce*S-J,ge=be;ge<ne;++ge)for(var ye=z*H+U*ce+$*ge,De=c*(p-1-Z)+f*(v-1-(ge*E-de))+h*X,ke=0;ke<b;++ke)ue+=s[ye+L*ke]*u[De+ke];a[R*H+I*q+M*he+B*X]=ue}return o.toTensor()},e.prototype.conv3dDerInput=function(n,r,i){for(var o=Ue(i.inShape,"float32"),a=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],f=s[3],h=this.readSync(n.dataId),d=n.strides,p=d[0],v=d[1],m=d[2],g=d[3],y=this.readSync(r.dataId),b=r.strides,_=b[0],x=b[1],S=b[2],E=b[3],C=i.batchSize,A=i.filterDepth,T=i.filterHeight,P=i.filterWidth,R=i.inChannels,I=i.inDepth,M=i.inHeight,B=i.inWidth,z=i.outChannels,U=i.outDepth,$=i.outHeight,L=i.outWidth,H=i.strideDepth,X=i.strideHeight,q=i.strideWidth,J=A-1-i.padInfo.front,ae=T-1-i.padInfo.top,fe=P-1-i.padInfo.left,he=0;he<C;++he)for(var de=0;de<R;++de)for(var be=0;be<I;++be)for(var ne=be-J,ue=Math.max(0,Math.ceil(ne/H)),ce=Math.min(U,(A+ne)/H),Z=0;Z<M;++Z)for(var ge=Z-ae,ye=Math.max(0,Math.ceil(ge/X)),De=Math.min($,(T+ge)/X),ke=0;ke<B;++ke){for(var tt=ke-fe,ft=Math.max(0,Math.ceil(tt/q)),je=Math.min(L,(P+tt)/q),Ye=0,st=ue;st<ce;++st)for(var Pt=st*H-ne,Et=ye;Et<De;++Et)for(var fr=Et*X-ge,on=ft;on<je;++on)for(var fn=p*he+v*st+m*Et+g*on,Kt=_*(A-1-Pt)+x*(T-1-fr)+S*(P-1-(on*q-tt))+E*de,Xt=0;Xt<z;++Xt)Ye+=h[fn+Xt]*y[Kt+Xt];a[u*he+l*be+c*Z+f*ke+de]=Ye}return o.toTensor()},e.prototype.conv2dDerFilter=function(n,r,i){se([n,r],"conv2dDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dataFormat==="channelsLast",c=Ue(i.filterShape,"float32"),f=i.padInfo.left,h=i.padInfo.top,d=this.bufferSync(n),p=this.bufferSync(r),v=0;v<s;++v)for(var m=Math.max(0,Math.ceil((h-v)/o)),g=Math.min(i.outHeight,(i.inHeight+h-v)/o),y=0;y<u;++y)for(var b=Math.max(0,Math.ceil((f-y)/a)),_=Math.min(i.outWidth,(i.inWidth+f-y)/a),x=0;x<i.inChannels;++x)for(var S=0;S<i.outChannels;++S){for(var E=0,C=0;C<i.batchSize;++C)for(var A=m;A<g;++A)for(var T=v+A*o-h,P=b;P<_;++P){var R=y+P*a-f;E+=l?d.get(C,T,R,x)*p.get(C,A,P,S):d.get(C,x,T,R)*p.get(C,S,A,P)}c.set(E,v,y,x,S)}return c.toTensor()},e.prototype.conv3dDerFilter=function(n,r,i){for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=Ue(i.filterShape,"float32"),h=f.values,d=f.strides,p=d[0],v=d[1],m=d[2],g=d[3],y=this.readSync(r.dataId),b=r.strides,_=b[0],x=b[1],S=b[2],E=b[3],C=this.readSync(n.dataId),A=n.strides,T=A[0],P=A[1],R=A[2],I=A[3],M=i.padInfo.front,B=i.padInfo.left,z=i.padInfo.top,U=0;U<u;++U)for(var $=Math.max(0,Math.ceil((M-U)/o)),L=Math.min(i.outDepth,(i.inDepth+M-U)/o),H=U*p,X=0;X<l;++X)for(var q=Math.max(0,Math.ceil((z-X)/a)),J=Math.min(i.outHeight,(i.inHeight+z-X)/a),ae=X*v+H,fe=0;fe<c;++fe)for(var he=Math.max(0,Math.ceil((B-fe)/s)),de=Math.min(i.outWidth,(i.inWidth+B-fe)/s),be=fe*m+ae,ne=0;ne<i.inChannels;++ne)for(var ue=ne*g+be,ce=0;ce<i.outChannels;++ce){for(var Z=0,ge=0;ge<i.batchSize;++ge)for(var ye=ge*T,De=ge*_,ke=$;ke<L;++ke)for(var tt=(U+ke*o-M)*P+ye,ft=ke*x+De,je=q;je<J;++je)for(var Ye=(X+je*a-z)*R+tt,st=je*S+ft,Pt=he;Pt<de;++Pt){var Et=Pt*E+st;Z+=C[(fe+Pt*s-B)*I+Ye+ne]*y[Et+ce]}h[ue+ce]=Z}return f.toTensor()},e.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,i=n.filter,o=n.convInfo,a=n.bias,s=n.activation,u=n.preluActivationWeights,l=this.depthwiseConv2D(r,i,o);return a&&(l=this.add(l,a)),s&&(l=E_(this,l,s,u)),l},e.prototype.depthwiseConv2D=function(n,r,i){se([n,r],"depthwiseConv2D");for(var o=i.filterHeight,a=i.filterWidth,s=i.dilationHeight,u=i.dilationWidth,l=i.padInfo.left,c=i.padInfo.top,f=i.outChannels/i.inChannels,h=Ue(i.outShape,n.dtype),d=this.readSync(n.dataId),p=this.readSync(r.dataId),v=h.values,m=0;m<i.batchSize;++m)for(var g=m*n.strides[0],y=m*h.strides[0],b=0;b<i.outHeight;++b)for(var _=y+b*h.strides[1],x=b*i.strideHeight-l,S=0;S<o;++S){var E=x+S*s;if(!(E<0||E>=i.inHeight))for(var C=S*r.strides[0],A=g+E*n.strides[1],T=0;T<i.outWidth;++T)for(var P=_+T*h.strides[2],R=T*i.strideWidth-c,I=0;I<a;++I){var M=R+I*u;if(!(M<0||M>=i.inWidth))for(var B=C+I*r.strides[1],z=A+M*i.inChannels,U=P,$=B,L=0;L<i.inChannels;++L){for(var H=d[z+L],X=0;X<f;++X)v[U+X]+=H*p[$+X];U+=f,$+=f}}}return h.toTensor()},e.prototype.depthwiseConv2DDerInput=function(n,r,i){se([n,r],"depthwiseConv2DDerInput");for(var o=Ue(i.inShape,"float32"),a=o.values,s=o.strides,u=s[0],l=s[1],c=s[2],f=this.readSync(n.dataId),h=n.strides,d=h[0],p=h[1],v=h[2],m=this.readSync(r.dataId),g=r.strides,y=g[0],b=g[1],_=g[2],x=i.batchSize,S=i.filterHeight,E=i.filterWidth,C=i.inChannels,A=i.inHeight,T=i.inWidth,P=i.outChannels,R=i.outHeight,I=i.outWidth,M=i.strideHeight,B=i.strideWidth,z=S-1-i.padInfo.top,U=E-1-i.padInfo.left,$=P/C,L=0;L<x;++L)for(var H=0;H<C;++H)for(var X=0;X<A;++X)for(var q=X-z,J=Math.max(0,Math.ceil(q/M)),ae=Math.min(R,(S+q)/M),fe=0;fe<T;++fe){for(var he=fe-U,de=Math.max(0,Math.ceil(he/B)),be=Math.min(I,(E+he)/B),ne=0,ue=J;ue<ae;++ue)for(var ce=ue*M-q,Z=de;Z<be;++Z)for(var ge=d*L+p*ue+v*Z,ye=y*(S-1-ce)+b*(E-1-(Z*B-he))+_*H,De=0;De<$;++De)ne+=f[ge+(H*$+De)]*m[ye+De];a[u*L+l*X+c*fe+H]=ne}return o.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(n,r,i){se([n,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=Ue(i.filterShape,"float32"),c=i.padInfo.left,f=i.padInfo.top,h=i.outChannels/i.inChannels,d=this.bufferSync(n),p=this.bufferSync(r),v=0;v<s;++v)for(var m=Math.max(0,Math.ceil((f-v)/o)),g=Math.min(i.outHeight,(i.inHeight+f-v)/o),y=0;y<u;++y)for(var b=Math.max(0,Math.ceil((c-y)/a)),_=Math.min(i.outWidth,(i.inWidth+c-y)/a),x=0;x<i.outChannels;++x){for(var S=Math.trunc(x/h),E=x%h,C=0,A=0;A<i.batchSize;++A)for(var T=m;T<g;++T)for(var P=v+T*o-f,R=b;R<_;++R){var I=y+R*a-c;C+=d.get(A,P,I,S)*p.get(A,T,R,x)}l.set(C,v,y,S,E)}return l.toTensor()},e.prototype.tile=function(n,r){return se(n,"tile"),M6(this.bufferSync(n),r)},e.prototype.pad=function(n,r,i){se(n,"pad");var o=r.map(function(h,d){return h[0]+n.shape[d]+h[1]}),a=r.map(function(h){return h[0]}),s=this.bufferSync(n),u=Ue(o,n.dtype);i!==0&&u.values.fill(i);for(var l=0;l<n.size;l++){var c=s.indexToLoc(l),f=c.map(function(h,d){return h+a[d]});u.set.apply(u,[s.get.apply(s,c)].concat(f))}return u.toTensor()},e.prototype.transpose=function(n,r){se(n,"transpose");for(var i=new Array(n.rank),o=0;o<i.length;o++)i[o]=n.shape[r[o]];var a=this.readSync(n.dataId),s=Ue(i,n.dtype),u=this.bufferSync(n);for(o=0;o<n.size;++o){for(var l=u.indexToLoc(o),c=new Array(l.length),f=0;f<c.length;f++)c[f]=l[r[f]];var h=s.locToIndex(c);s.values[h]=a[o]}return s.toTensor()},e.prototype.gather=function(n,r,i){se([n,r],"gather");var o=n.shape.slice(),a=this.readSync(r.dataId);o[i]=a.length;for(var s=Ue(o,n.dtype),u=this.bufferSync(n),l=0;l<s.size;++l){var c=s.indexToLoc(l),f=c.slice();f[i]=a[c[i]];var h=u.locToIndex(f);s.values[l]=u.values[h]}return s.toTensor()},e.prototype.batchToSpaceND=function(n,r,i){se([n],"batchToSpaceND");var o=r.reduce(function(f,h){return f*h}),a=w0(n.shape,r,o),s=x0(a.length,r.length),u=_0(n.shape,r,o),l=_6(i,r.length),c=S6(u,i,r.length);return n.reshape(a).transpose(s).reshape(u).slice(l,c)},e.prototype.spaceToBatchND=function(n,r,i){se([n],"spaceToBatchND");var o=r.reduce(function(h,d){return h*d}),a=[[0,0]];a.push.apply(a,i);for(var s=1+r.length;s<n.shape.length;++s)a.push([0,0]);var u=n.pad(a),l=w0(u.shape,r,o,!1),c=x0(l.length,r.length,!1),f=_0(u.shape,r,o,!1);return u.reshape(l).transpose(c).reshape(f)},e.prototype.pool=function(n,r,i){se(n,"pool");for(var o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,d=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),v=Ue(r.outShape,n.dtype),m=v.values,g=r.outShape[1]*r.outShape[2]*r.outShape[3],y=r.outShape[2]*r.outShape[3],b=r.outShape[3],_=0;_<r.batchSize;++_)for(var x=_*g,S=_*n.strides[0],E=0;E<r.inChannels;++E)for(var C=0;C<r.outHeight;++C)for(var A=C*o-f,T=Math.max(0,A),P=Math.min(r.inHeight,l+A),R=x+C*y,I=0;I<r.outWidth;++I){for(var M=I*a-h,B=Math.max(0,M),z=Math.min(r.inWidth,c+M),U=d,$=0,L=0,H=T;H<P;H+=s){for(var X=S+H*n.strides[1],q=B;q<z;q+=u){var J=p[X+q*n.strides[2]+E];i==="max"&&J>U?U=J:i==="avg"&&($+=J,L++)}if(isNaN(U))break}m[R+I*b+E]=i==="avg"?$/L:U}return v.toTensor()},e.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},e.prototype.maxPoolPositions=function(n,r){for(var i=Ue(r.outShape,"int32"),o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,f=r.padInfo.top,h=r.padInfo.left,d=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var v=0;v<r.inChannels;++v)for(var m=0;m<r.outHeight;++m){for(var g=m*o-f,y=g;y<0;)y+=s;for(var b=Math.min(r.inHeight,l+g),_=0;_<r.outWidth;++_){for(var x=_*a-h,S=x;S<0;)S+=u;for(var E=Math.min(r.inWidth,c+x),C=Number.NEGATIVE_INFINITY,A=-1,T=y;T<b;T+=s)for(var P=T-g,R=S;R<E;R+=u){var I=R-x,M=d.get(p,T,R,v);M>C&&(C=M,A=P*c+I)}i.set(A,p,m,_,v)}}return i.toTensor()},e.prototype.maxPoolBackprop=function(n,r,i,o){se([r,i],"maxPoolBackprop");for(var a=this.maxPoolPositions(r,o),s=o.strideHeight,u=o.strideWidth,l=o.dilationHeight,c=o.dilationWidth,f=o.effectiveFilterHeight,h=o.effectiveFilterWidth,d=h-1-o.padInfo.left,p=f-1-o.padInfo.top,v=Ue(r.shape,"float32"),m=this.bufferSync(a),g=this.bufferSync(n),y=0;y<o.batchSize;++y)for(var b=0;b<o.inChannels;++b)for(var _=0;_<o.inHeight;++_)for(var x=0;x<o.inWidth;++x){for(var S=_-p,E=x-d,C=0,A=0;A<f;A+=l){var T=(S+A)/s;if(!(T<0||T>=o.outHeight||Math.floor(T)!==T))for(var P=0;P<h;P+=c){var R=(E+P)/u;if(!(R<0||R>=o.outWidth||Math.floor(R)!==R)){var I=f*h-1-m.get(y,T,R,b)===A*h+P?1:0;I!==0&&(C+=g.get(y,T,R,b)*I)}}}v.set(C,y,_,x,b)}return v.toTensor()},e.prototype.avgPoolBackprop=function(n,r,i){se([n,r],"avgPoolBackprop");for(var o=i.strideHeight,a=i.strideWidth,s=i.filterHeight,u=i.filterWidth,l=i.dilationHeight,c=i.dilationWidth,f=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=h-1-i.padInfo.left,p=f-1-i.padInfo.top,v=Ue(r.shape,"float32"),m=1/(s*u),g=this.bufferSync(n),y=0;y<i.batchSize;++y)for(var b=0;b<i.inChannels;++b)for(var _=0;_<i.inHeight;++_)for(var x=0;x<i.inWidth;++x){for(var S=_-p,E=x-d,C=0,A=0;A<f;A+=l){var T=(S+A)/o;if(!(T<0||T>=i.outHeight||Math.floor(T)!==T))for(var P=0;P<h;P+=c){var R=(E+P)/a;R<0||R>=i.outWidth||Math.floor(R)!==R||(C+=g.get(y,T,R,b))}}v.set(C*m,y,_,x,b)}return v.toTensor()},e.prototype.pool3d=function(n,r,i){se(n,"pool3d");for(var o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,v=r.padInfo.top,m=r.padInfo.left,g=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=this.readSync(n.dataId),b=Ue(r.outShape,n.dtype),_=b.values,x=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],S=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],C=r.outShape[4],A=0;A<r.batchSize;++A)for(var T=A*x,P=A*n.strides[0],R=0;R<r.inChannels;++R)for(var I=0;I<r.outDepth;++I){for(var M=I*o-p,B=M;B<0;)B+=u;for(var z=Math.min(r.inDepth,f+M),U=T+I*S,$=0;$<r.outHeight;++$){for(var L=$*a-v,H=L;H<0;)H+=l;for(var X=Math.min(r.inHeight,h+L),q=U+$*E,J=0;J<r.outWidth;++J){for(var ae=J*s-m,fe=ae;fe<0;)fe+=c;for(var he=Math.min(r.inWidth,d+ae),de=q+J*C,be=g,ne=0,ue=0,ce=B;ce<z;ce+=u){for(var Z=P+ce*n.strides[1],ge=H;ge<X;ge+=l){for(var ye=Z+ge*n.strides[2],De=fe;De<he;De+=c){var ke=y[ye+De*n.strides[3]+R];if(i==="max"&&ke>be?be=ke:i==="avg"&&(ne+=ke,ue++),isNaN(be))break}if(isNaN(be))break}if(isNaN(be))break}_[de+R]=i==="avg"?ne/ue:be}}}return b.toTensor()},e.prototype.avgPool3d=function(n,r){return se(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(n,r,i){se([n,r],"avgPool3dBackprop");for(var o=i.strideDepth,a=i.strideHeight,s=i.strideWidth,u=i.filterDepth,l=i.filterHeight,c=i.filterWidth,f=i.dilationDepth,h=i.dilationHeight,d=i.dilationWidth,p=i.effectiveFilterDepth,v=i.effectiveFilterHeight,m=i.effectiveFilterWidth,g=p-1-i.padInfo.front,y=m-1-i.padInfo.left,b=v-1-i.padInfo.top,_=Ue(r.shape,"float32"),x=1/(u*l*c),S=this.bufferSync(n),E=0;E<i.batchSize;++E)for(var C=0;C<i.inChannels;++C)for(var A=0;A<i.inDepth;++A)for(var T=0;T<i.inHeight;++T)for(var P=0;P<i.inWidth;++P){for(var R=A-g,I=T-b,M=P-y,B=0,z=0;z<p;z+=f){var U=(R+z)/o;if(!(U<0||U>=i.outDepth||Math.floor(U)!==U))for(var $=0;$<v;$+=h){var L=(I+$)/a;if(!(L<0||L>=i.outHeight||Math.floor(L)!==L))for(var H=0;H<m;H+=d){var X=(M+H)/s;X<0||X>=i.outWidth||Math.floor(X)!==X||(B+=S.get(E,U,L,X,C))}}}_.set(B*x,E,A,T,P,C)}return _.toTensor()},e.prototype.maxPool3d=function(n,r){return se(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(n,r){for(var i=Ue(r.outShape,"int32"),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,f=r.effectiveFilterDepth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.front,v=r.padInfo.top,m=r.padInfo.left,g=this.bufferSync(n),y=0;y<r.batchSize;++y)for(var b=0;b<r.inChannels;++b)for(var _=0;_<r.outDepth;++_){for(var x=_*o-p,S=x;S<0;)S+=u;for(var E=Math.min(r.inDepth,f+x),C=0;C<r.outHeight;++C){for(var A=C*a-v,T=A;T<0;)T+=l;for(var P=Math.min(r.inHeight,h+A),R=0;R<r.outWidth;++R){for(var I=R*s-m,M=I;M<0;)M+=c;for(var B=Math.min(r.inWidth,d+I),z=Number.NEGATIVE_INFINITY,U=-1,$=S;$<E;$+=u)for(var L=$-x,H=T;H<P;H+=l)for(var X=H-A,q=M;q<B;q+=c){var J=q-I,ae=g.get(y,$,H,q,b);ae>=z&&(z=ae,U=L*h*d+X*h+J)}i.set(U,y,_,C,R,b)}}}return i.toTensor()},e.prototype.maxPool3dBackprop=function(n,r,i,o){se([r,i],"maxPool3dBackprop");for(var a=this.maxPool3dPositions(r,o),s=o.strideDepth,u=o.strideHeight,l=o.strideWidth,c=o.dilationDepth,f=o.dilationHeight,h=o.dilationWidth,d=o.effectiveFilterDepth,p=o.effectiveFilterHeight,v=o.effectiveFilterWidth,m=d-1-o.padInfo.front,g=v-1-o.padInfo.left,y=p-1-o.padInfo.top,b=Ue(r.shape,"float32"),_=this.bufferSync(a),x=this.bufferSync(n),S=0;S<o.batchSize;++S)for(var E=0;E<o.inChannels;++E)for(var C=0;C<o.inDepth;++C)for(var A=0;A<o.inHeight;++A)for(var T=0;T<o.inWidth;++T){for(var P=C-m,R=A-y,I=T-g,M=0,B=0;B<d;B+=c){var z=(P+B)/s;if(!(z<0||z>=o.outDepth||Math.floor(z)!==z))for(var U=0;U<p;U+=f){var $=(R+U)/u;if(!($<0||$>=o.outHeight||Math.floor($)!==$))for(var L=0;L<v;L+=h){var H=(I+L)/l;if(!(H<0||H>=o.outWidth||Math.floor(H)!==H)){var X=d*p*v-1-_.get(S,z,$,H,E)===B*p*v+U*v+L?1:0;X!==0&&(M+=x.get(S,z,$,H,E)*X)}}}}b.set(M,S,C,A,T,E)}return b.toTensor()},e.prototype.cast=function(n,r){return R6(n,r,this)},e.prototype.reshape=function(n,r){return mC(n,r)},e.prototype.avgPool=function(n,r){return se(n,"avgPool"),this.pool(n,r,"avg").toFloat()},e.prototype.resizeBilinear=function(n,r,i,o){se(n,"resizeBilinear");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],f=this.readSync(n.dataId),h=new Float32Array(Ae([s,r,i,c])),d=[o&&r>1?u-1:u,o&&i>1?l-1:l],p=[o&&r>1?r-1:r,o&&i>1?i-1:i],v=0,m=d[0]/p[0],g=d[1]/p[1],y=0;y<s;y++)for(var b=0;b<r;b++)for(var _=m*b,x=Math.floor(_),S=_-x,E=Math.min(u-1,Math.ceil(_)),C=y*n.strides[0]+x*n.strides[1],A=y*n.strides[0]+E*n.strides[1],T=0;T<i;T++)for(var P=g*T,R=Math.floor(P),I=P-R,M=Math.min(l-1,Math.ceil(P)),B=C+R*n.strides[2],z=A+R*n.strides[2],U=C+M*n.strides[2],$=A+M*n.strides[2],L=0;L<c;L++){var H=f[B+L],X=f[z+L],q=H+(f[U+L]-H)*I,J=q+(X+(f[$+L]-X)*I-q)*S;h[v++]=J}return ur(h,[s,r,i,c])},e.prototype.resizeBilinearBackprop=function(n,r,i){se([n,r],"resizeBilinearBackprop");for(var o=r.shape,a=o[0],s=o[1],u=o[2],l=o[3],c=n.shape,f=c[1],h=c[2],d=new Float32Array(a*s*u*l),p=[i&&f>1?s-1:s,i&&h>1?u-1:u],v=[i&&f>1?f-1:f,i&&h>1?h-1:h],m=p[0]/v[0],g=p[1]/v[1],y=this.readSync(n.dataId),b=0,_=0;_<a;_++)for(var x=_*r.strides[0],S=0;S<f;S++)for(var E=S*m,C=Math.floor(E),A=Math.min(Math.ceil(E),s-1),T=x+C*r.strides[1],P=x+A*r.strides[1],R=E-C,I=1-R,M=0;M<h;M++)for(var B=M*g,z=Math.floor(B),U=Math.min(Math.ceil(B),u-1),$=B-z,L=1-$,H=T+z*r.strides[2],X=T+U*r.strides[2],q=P+z*r.strides[2],J=P+U*r.strides[2],ae=I*L,fe=I*$,he=R*L,de=R*$,be=0;be<l;be++){var ne=y[b++];d[H+be]+=ne*ae,d[X+be]+=ne*fe,d[q+be]+=ne*he,d[J+be]+=ne*de}return qr(d,[a,u,s,l],r.dtype)},e.prototype.resizeNearestNeighbor=function(n,r,i,o){se(n,"resizeNearestNeighbor");for(var a=n.shape,s=a[0],u=a[1],l=a[2],c=a[3],f=this.readSync(n.dataId),h=new Float32Array(s*r*i*c),d=[o&&r>1?u-1:u,o&&i>1?l-1:l],p=[o&&r>1?r-1:r,o&&i>1?i-1:i],v=d[0]/p[0],m=d[1]/p[1],g=0,y=0;y<s;y++)for(var b=y*n.strides[0],_=0;_<r;_++)for(var x=v*_,S=b+Math.min(u-1,o?Math.round(x):Math.floor(x))*n.strides[1],E=0;E<i;E++)for(var C=m*E,A=S+Math.min(l-1,o?Math.round(C):Math.floor(C))*n.strides[2],T=0;T<c;T++){var P=f[A+T];h[g++]=P}return ur(h,[s,r,i,c],n.dtype)},e.prototype.resizeNearestNeighborBackprop=function(n,r,i){se([n,r],"resizeNearestNeighborBackprop");for(var o=r.shape,a=o[0],s=o[1],u=o[2],l=o[3],c=n.shape,f=c[1],h=c[2],d=new Float32Array(a*s*u*l),p=this.readSync(n.dataId),v=[i&&f>1?s-1:s,i&&h>1?u-1:u],m=[i&&f>1?f-1:f,i&&h>1?h-1:h],g=v[0]/m[0],y=v[1]/m[1],b=1/g,_=1/y,x=2*Math.ceil(b)+2,S=2*Math.ceil(_)+2,E=0;E<a;E++)for(var C=E*r.strides[0],A=0;A<s;A++)for(var T=C+A*r.strides[1],P=Math.floor(A*b),R=Math.floor(P-x/2),I=0;I<u;I++)for(var M=T+I*r.strides[2],B=Math.floor(I*_),z=Math.floor(B-S/2),U=0;U<l;U++){for(var $=0,L=0;L<x;L++){var H=L+R;if(!(H<0||H>=f)){var X=C+H*n.strides[1],q=H*g;if(A===Math.min(s-1,i?Math.round(q):Math.floor(q)))for(var J=0;J<S;J++){var ae=J+z;if(!(ae<0||ae>=h)){var fe=X+ae*n.strides[2],he=ae*y;I===Math.min(u-1,i?Math.round(he):Math.floor(he))&&($+=p[fe+U])}}}}d[M+U]=$}return qr(d,r.shape,r.dtype)},e.prototype.batchNormalization=function(n,r,i,o,a,s){se([n,r,i,a,s],"batchNorm");for(var u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=this.readSync(i.dataId),f=a?this.readSync(a.dataId):new Float32Array([1]),h=s?this.readSync(s.dataId):new Float32Array([0]),d=new Float32Array(u.length),p=h.length,v=f.length,m=c.length,g=l.length,y=0,b=0,_=0,x=0,S=0;S<u.length;++S)d[S]=h[y++]+(u[S]-l[b++])*f[_++]/Math.sqrt(c[x++]+o),y>=p&&(y=0),b>=g&&(b=0),_>=v&&(_=0),x>=m&&(x=0);return qr(d,n.shape)},e.prototype.localResponseNormalization4D=function(n,r,i,o,a){se(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,l=this.readSync(n.dataId),c=n.size,f=new Float32Array(c);function h(m){for(var g=m%s,y=m-g+Math.max(0,g-r),b=m-g+Math.min(g+r,u),_=0;y<=b;y++){var x=l[y];_+=x*x}return _}for(var d=0;d<c;d++){var p=h(d),v=l[d]*Math.pow(i+o*p,-a);f[d]=v}return qr(f,n.shape)},e.prototype.LRNGrad=function(n,r,i,o,a,s,u){se(n,"LRNGrad");for(var l=n.shape[3],c=this.readSync(n.dataId),f=this.readSync(r.dataId),h=this.readSync(i.dataId),d=new Float32Array(n.size),p=n.size,v=0;v<p;v++){for(var m=v%l,g=v-m+Math.max(0,m-o),y=v-m+Math.min(l,m+o+1),b=0,_=g;_<y;_++)b+=Math.pow(f[_],2);for(b=s*b+a,_=g;_<y;_++){var x=-2*s*u*f[_]*h[v]/b;v===_&&(x+=Math.pow(b,-u)),x*=c[v],d[_]+=x}}return qr(d,n.shape)},e.prototype.multinomial=function(n,r,i,o){se(n,"multinomial");for(var a=r?n:cs(n),s=a.shape[0],u=a.shape[1],l=Bt([s,i],"int32"),c=this.readSync(l.dataId),f=this.readSync(a.dataId),h=0;h<s;++h){var d=h*u,p=new Float32Array(u-1);p[0]=f[d];for(var v=1;v<p.length;++v)p[v]=p[v-1]+f[d+v];for(var m=Sw(o.toString()),g=h*i,y=0;y<i;++y){var b=m();c[g+y]=p.length;for(var _=0;_<p.length;_++)if(b<p[_]){c[g+y]=_;break}}}return l},e.prototype.oneHot=function(n,r,i,o){se(n,"oneHot");var a=new Float32Array(n.size*r);a.fill(o);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(a[u*r+s[u]]=i);return uu(a,[n.size,r],"int32")},e.prototype.nonMaxSuppression=function(n,r,i,o,a){return se(n,"nonMaxSuppression"),yP(this.readSync(n.dataId),this.readSync(r.dataId),i,o,a)},e.prototype.fft=function(n){return this.fftBatch(n,!1)},e.prototype.ifft=function(n){return this.fftBatch(n,!0)},e.prototype.fftBatch=function(n,r){for(var i=n.shape[0],o=n.shape[1],a=Ue(n.shape,"float32"),s=Ue(n.shape,"float32"),u=Ui(n).as2D(i,o),l=Zo(n).as2D(i,o),c=0;c<i;c++)for(var f=u.slice([c,0],[1,o]),h=l.slice([c,0],[1,o]),d=or(f,h),p=this.readSync(this.fftImpl(d,r).dataId),v=0;v<o;v++){var m=OM(p,v);a.values[c*o+v]=m.real,s.values[c*o+v]=m.imag}return or(a.toTensor(),s.toTensor()).as2D(i,o)},e.prototype.fftImpl=function(n,r){var i=n.as1D(),o=i.size;if(this.isExponentOf2(o)){var a=this.fftRadix2(i,o,r).as2D(n.shape[0],n.shape[1]);return r&&(a=or(Ui(a).div(me(o)),Zo(a).div(me(o)))),a}var s=this.readSync(n.dataId),u=function(l){for(var c=new Float32Array(l.length/2),f=new Float32Array(l.length/2),h=0;h<l.length;h+=2)c[h/2]=l[h],f[h/2]=l[h+1];return{real:c,imag:f}}(this.fourierTransformByMatmul(s,o,r));return or(u.real,u.imag).as2D(n.shape[0],n.shape[1])},e.prototype.isExponentOf2=function(n){return(n&n-1)==0},e.prototype.fftRadix2=function(n,r,i){if(r===1)return n;var o=this.readSync(n.dataId),a=r/2,s=function(g){for(var y=Math.ceil(g.length/4),b=new Float32Array(y),_=new Float32Array(y),x=0;x<g.length;x+=4)b[Math.floor(x/4)]=g[x],_[Math.floor(x/4)]=g[x+1];return{real:b,imag:_}}(o),u=or(s.real,s.imag).as1D(),l=function(g){for(var y=Math.floor(g.length/4),b=new Float32Array(y),_=new Float32Array(y),x=2;x<g.length;x+=4)b[Math.floor(x/4)]=g[x],_[Math.floor(x/4)]=g[x+1];return{real:b,imag:_}}(o),c=or(l.real,l.imag).as1D();u=this.fftRadix2(u,a,i),c=this.fftRadix2(c,a,i);var f=function(g,y){for(var b=new Float32Array(g/2),_=new Float32Array(g/2),x=0;x<Math.ceil(g/2);x++){var S=(y?2:-2)*Math.PI*(x/g);b[x]=Math.cos(S),_[x]=Math.sin(S)}return{real:b,imag:_}}(r,i),h=or(f.real,f.imag).mul(c),d=u.add(h),p=u.sub(h),v=Ui(d).concat(Ui(p)),m=Zo(d).concat(Zo(p));return or(v,m).as1D()},e.prototype.fourierTransformByMatmul=function(n,r,i){for(var o=new Float32Array(2*r),a=0;a<r;a++){for(var s=0,u=0,l=0;l<r;l++){var c=tde(a*l,r,i),f=OM(n,l);s+=f.real*c.real-f.imag*c.imag,u+=f.real*c.imag+f.imag*c.real}i&&(s/=r,u/=r),ede(o,s,u,a)}return o},e.prototype.depthToSpace=function(n,r,i){W(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),W(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=n.shape[0],a=n.shape[1],s=n.shape[2],u=n.shape[3],l=a*r,c=s*r,f=u/(r*r),h=this.readSync(n.dataId),d=new Float32Array(o*l*c*f),p=0,v=0;v<o;++v)for(var m=0;m<l;++m)for(var g=Math.floor(m/r),y=m%r,b=0;b<c;++b)for(var _=Math.floor(b/r),x=(y*r+b%r)*f,S=0;S<f;++S){var E=S+x+u*(_+s*(g+a*v));d[p++]=h[E]}return qr(d,[o,l,c,f])},e.prototype.broadcastedBinaryOp=function(n,r,i,o){var a=Ze(n.shape,r.shape),s=Ue(a,i),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Ys(n.shape,a),f=Ys(r.shape,a),h=s.values;if(c.length+f.length===0)for(var d=0;d<h.length;++d)h[d]=o(u[d%u.length],l[d%l.length]);else{var p=this.bufferSync(n),v=this.bufferSync(r),m=function(g){var y=s.indexToLoc(g),b=y.slice(-n.rank);c.forEach(function(E){return b[E]=0});var _=p.locToIndex(b),x=y.slice(-r.rank);f.forEach(function(E){return x[E]=0});var S=v.locToIndex(x);h[g]=o(u[_],l[S])};for(d=0;d<h.length;++d)m(d)}return s.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(n,r,i){var o=Ze(n.shape,r.shape),a=Ue(o,"float32"),s=Ue(o,"float32"),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=Ys(n.shape,o),f=Ys(r.shape,o),h=a.values,d=s.values;if(c.length+f.length===0)for(var p=0;p<h.length;p++){var v=p%u.length,m=p%l.length,g=i(u[2*v],u[2*v+1],l[2*m],l[2*m+1]);h[p]=g.real,d[p]=g.imag}else{var y=this.bufferSync(this.data.get(n.dataId).complexTensors.real),b=this.bufferSync(this.data.get(r.dataId).complexTensors.real),_=function(x){var S=a.indexToLoc(x),E=S.slice(-n.rank);c.forEach(function(R){return E[R]=0});var C=y.locToIndex(E),A=S.slice(-r.rank);f.forEach(function(R){return A[R]=0});var T=b.locToIndex(A),P=i(u[2*C],u[2*C+1],l[2*T],l[2*T+1]);h[x]=P.real,d[x]=P.imag};for(p=0;p<h.length;p++)_(p)}return this.complex(a.toTensor(),s.toTensor())},e.prototype.split=function(n,r,i){return N6(n,r,i)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(n,r,i,o,a,s){for(var u=n.shape,l=u[0],c=u[1],f=u[2],h=u[3],d=r.shape[0],p=o[0],v=o[1],m=Ue([d,p,v,h],"float32"),g=this.readSync(r.dataId),y=this.readSync(i.dataId),b=this.readSync(n.dataId),_=n.strides,x=m.strides,S=0;S<d;S++){var E=4*S,C=g[E],A=g[E+1],T=g[E+2],P=g[E+3],R=y[S];if(!(R>=l))for(var I=p>1?(T-C)*(c-1)/(p-1):0,M=v>1?(P-A)*(f-1)/(v-1):0,B=0;B<p;B++){var z=p>1?C*(c-1)+B*I:.5*(C+T)*(c-1);if(z<0||z>c-1)for(var U=0;U<v;U++)for(var $=0;$<h;$++){var L=$+U*x[2]+B*x[1]+S*x[0];m.values[L]=s}else if(a==="bilinear"){var H=Math.floor(z),X=Math.ceil(z),q=z-H;for(U=0;U<v;U++)if((ce=v>1?A*(f-1)+U*M:.5*(A+P)*(f-1))<0||ce>f-1)for($=0;$<h;$++)L=$+U*x[2]+B*x[1]+S*x[0],m.values[L]=s;else{var J=Math.floor(ce),ae=Math.ceil(ce),fe=ce-J;for($=0;$<h;$++){var he=b[L=$+J*_[2]+H*_[1]+R*_[0]],de=b[L=$+ae*_[2]+H*_[1]+R*_[0]],be=b[L=$+J*_[2]+X*_[1]+R*_[0]],ne=he+(de-he)*fe,ue=be+(b[L=$+ae*_[2]+X*_[1]+R*_[0]]-be)*fe;L=$+U*x[2]+B*x[1]+S*x[0],m.values[L]=ne+(ue-ne)*q}}}else for(U=0;U<v;++U){var ce;if((ce=v>1?A*(f-1)+U*M:.5*(A+P)*(f-1))<0||ce>f-1)for($=0;$<h;$++)L=$+U*x[2]+B*x[1]+S*x[0],m.values[L]=s;else{var Z=Math.round(ce),ge=Math.round(z);for($=0;$<h;$++){var ye=$+Z*_[2]+ge*_[1]+R*_[0],De=$+U*x[2]+B*x[1]+S*x[0];m.values[De]=b[ye]}}}}}return m.toTensor()},e.prototype.sparseToDense=function(n,r,i,o){var a=S0(0,n,i),s=a.sliceRank,u=a.numUpdates,l=a.sliceSize,c=a.strides,f=a.outputSize;return this.scatter(n,r,i,f,l,u,s,c,o,!1)},e.prototype.gatherND=function(n,r){var i=r.shape,o=i[i.length-1],a=E6(n,r),s=a[0],u=a[1],l=a[2],c=a[3];if(u===0)return ur([],s,n.dtype);for(var f=new nv([u,l],n.dtype),h=this.readSync(r.dataId),d=this.readSync(n.dataId),p=0;p<u;p++){for(var v=[],m=0,g=0;g<o;g++){var y=h[p*o+g];m+=y*c[g],v.push(y)}if(m<0||m>=n.size/l)throw new Error("Invalid indices: "+v+" does not index into "+n.shape);for(var b=0;b<l;b++)f.values[p*l+b]=d[m*l+b]}return f.toTensor().reshape(s)},e.prototype.scatterND=function(n,r,i){var o=S0(0,n,i),a=o.sliceRank,s=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize,f=me(0);return this.scatter(n,r,i,c,u,s,a,l,f,!0)},e.prototype.fill=function(n,r,i){var o=d0(i=i||um(r),Ae(n));return o.fill(r),K.makeTensor(o,n,i,this)},e.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},e.prototype.zerosLike=function(n){var r=d0(n.dtype,Ae(n.shape));return this.makeOutput(r,n.shape,n.dtype)},e.prototype.linspace=function(n,r,i){return I6(n,r,i)},e.prototype.scatter=function(n,r,i,o,a,s,u,l,c,f){var h=[o/a,a],d=this.readSync(n.dataId),p=this.readSync(r.dataId);if(o===0)return ur([],i,r.dtype);var v=new nv(h,r.dtype);v.values.fill(this.readSync(c.dataId)[0]);for(var m=0;m<s;m++){for(var g=[],y=0,b=0;b<u;b++){var _=d[m*u+b];g.push(_),y+=_*l[b]}if(y<0||y>=o/a)throw new Error("Invalid indices: "+g+" does not index into "+i);for(var x=0;x<a;x++)f?v.values[y*a+x]+=p[m*a+x]:v.values[y*a+x]=r.rank===0?p[0]:p[m*a+x]}return v.toTensor().reshape(i)},e}(O6);K.registerBackend("cpu",function(){return new xge},1);for(var C_=0,JM=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e,o=i.boxes,a=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=n;se(o,"NonMaxSuppressionWithScore");var d=bP(h.data.get(o.dataId).values,h.data.get(a.dataId).values,u,l,c,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n;se(r,"square");for(var o=i.data.get(r.dataId).values,a=new Float32Array(o.length),s=0;s<o.length;++s){var u=o[s];a[s]=u*u}return{dataId:i.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:ov,backendName:"cpu",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,o=r.b,a=n;se([i,o],ov);var s=a.data.get(i.dataId).values,u=a.data.get(o.dataId).values,l=function(h,d,p,v,m,g){var y=Ze(h,d),b=y.length,_=fa(y),x=tv(m,Ae(y)),S=h.length,E=d.length,C=fa(h),A=fa(d),T=Ys(h,y),P=Ys(d,y);if(T.length+P.length===0)for(var R=0;R<x.length;++R)x[R]=g(p[R%p.length],v[R%v.length]);else{var I=function(M){var B=Rfe(M,b,_),z=B.slice(-S);T.forEach(function(H){return z[H]=0});var U=wM(z,S,C),$=B.slice(-E);P.forEach(function(H){return $[H]=0});var L=wM($,E,A);x[M]=g(p[U],v[L])};for(R=0;R<x.length;++R)I(R)}return[x,y]}(i.shape,o.shape,s,u,i.dtype,function(h,d){var p=h-d;return p*p}),c=l[0],f=l[1];return{dataId:a.write(c,f,i.dtype),shape:f,dtype:i.dtype}}}];C_<JM.length;C_++)r6(JM[C_]);var wc,_ge=function(t){this.variableNames=["A"];var e=_r(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Sge=function(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=_r(),n=t[0],r=t[1];this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var A_=0,QM=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs,i=e.pixels,o=r.numChannels,a=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],l=u[0],c=u[1],f=[c,l],h=[c,l,o];(s||a)&&(wc==null&&(wc=document.createElement("canvas").getContext("2d")),wc.canvas.width=l,wc.canvas.height=c,wc.drawImage(i,0,0,l,c),i=wc.canvas);var d=n.makeTensorInfo(f,"int32");n.texData.get(d.dataId).usage=wi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);var p=re().getBool("WEBGL_PACK")?new Sge(h):new _ge(h),v=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),v}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=t.attrs;g0("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=e,o=i.boxes,a=i.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,f=s.softNmsSigma,h=n,d=bP(h.readSync(o.dataId),h.readSync(a.dataId),u,l,c,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e.x,i=n,o=new Ge(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:ov,backendName:"webgl",kernelFunc:function(t){var e=t.inputs,n=t.backend,r=e,i=r.a,o=r.b,a=n,s=re().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ia("return (a - b) * (a - b);",i.shape,o.shape):new an("return (a - b) * (a - b);",i.shape,o.shape);return a.compileAndRun(s,[i,o])}}];A_<QM.length;A_++)r6(QM[A_]);for(var T_=0,ZM=[{kernelName:"Square",gradFunc:function(t,e){var n=e[0];return{x:function(){return t.mul(n.toFloat().mul(2))}}}},{kernelName:ov,gradFunc:function(t,e){var n=e[0],r=e[1],i=me(2);return{a:function(){return Tr(t,Tr(i,Un(n,r)))},b:function(){return Tr(t,Tr(i,Un(r,n)))}}}}];T_<ZM.length;T_++)wfe(ZM[T_]);var Ege=function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t}();re().get("IS_BROWSER")&&re().setPlatform("browser",new Ege);var P_,Cge=function(){return require("node-fetch")},Age=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return re().global.fetch!=null?re().global.fetch(e,n):(P_==null&&(P_=Cge()),P_(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t}();re().get("IS_NODE")&&re().setPlatform("node",new Age);var bC={float32:4,int32:4,uint16:2,uint8:1,bool:1},k0=4;function Az(t,e){for(var n={},r=0,i=function(s){var u=s.name,l=s.dtype,c=s.shape,f=Ae(c),h=void 0;if("quantization"in s){var d=s.quantization;if(d.dtype!=="uint8"&&d.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+d.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=bC[d.dtype],v=t.slice(r,r+f*p),m=d.dtype==="uint8"?new Uint8Array(v):new Uint16Array(v);if(l==="float32")h=Float32Array.from(m,function(S){return S*d.scale+d.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=Int32Array.from(m,function(S){return Math.round(S*d.scale+d.min)})}r+=f*p}else if(l==="string"){var g=Ae(s.shape);h=[];for(var y=0;y<g;y++){var b=new Uint32Array(t.slice(r,r+k0))[0];r+=k0;var _=new Uint8Array(t.slice(r,r+b));h.push(_),r+=b}}else{var x=bC[l];if(v=t.slice(r,r+f*x),l==="float32")h=new Float32Array(v);else if(l==="int32")h=new Int32Array(v);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=new Uint8Array(v)}r+=f*x}n[u]=ur(h,c,l)},o=0,a=e;o<a.length;o++)i(a[o]);return n}function Tge(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(o){if(e+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var wC=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function e$(t){return wC?Buffer.byteLength(t):new Blob([t]).size}function LP(t){var e=0;t.forEach(function(i){e+=i.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function t$(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function vm(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:e$(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:e$(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var xi=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var a=o(e,r);a!==null&&i.push(a)}),i},t}(),xf="://",lu=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){W(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(xf)&&(e=e.slice(0,e.indexOf(xf))),W(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();W(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function dy(t){if(t.indexOf(xf)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+lu.getSchemes().join(","));return{scheme:t.split(xf)[0],path:t.split(xf)[1]}}function n$(t,e,n){return n===void 0&&(n=!1),Ee(this,void 0,void 0,function(){var r,i,o,a,s,u,l,c,f;return Ce(this,function(h){switch(h.label){case 0:return W(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),W((r=xi.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),W(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],W((o=xi.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),W(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),a=o[0],s=dy(t).scheme,u=dy(t).path,l=s===dy(t).scheme,[4,i.load()];case 1:return c=h.sent(),n&&l?[4,lu.getManager(s).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,a.save(c)];case 4:return f=h.sent(),!n||l?[3,6]:[4,lu.getManager(s).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var gl="models_store",Js="model_info_store";function Tz(){if(!re().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window||self,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function xC(t){var e=t.result;e.createObjectStore(gl,{keyPath:"modelPath"}),e.createObjectStore(Js,{keyPath:"modelPath"})}var _f=function(){function t(e){if(this.indexedDB=Tz(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return Ee(this,void 0,void 0,function(){return Ce(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(i,o){var a=r.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return xC(a)},a.onsuccess=function(){var s=a.result;if(n==null){var u=s.transaction(gl,"readonly"),l=u.objectStore(gl).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return s.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(v){return s.close(),o(l.error)},u.oncomplete=function(){return s.close()}}else{var c,f=vm(n),h=s.transaction(Js,"readwrite"),d=h.objectStore(Js),p=d.put({modelPath:r.modelPath,modelArtifactsInfo:f});p.onsuccess=function(){var v=(c=s.transaction(gl,"readwrite")).objectStore(gl).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});v.onsuccess=function(){return i({modelArtifactsInfo:f})},v.onerror=function(m){var g=(d=h.objectStore(Js)).delete(r.modelPath);g.onsuccess=function(){return s.close(),o(v.error)},g.onerror=function(y){return s.close(),o(v.error)}}},p.onerror=function(v){return s.close(),o(p.error)},h.oncomplete=function(){c==null?s.close():c.oncomplete=function(){return s.close()}}}},a.onerror=function(s){return o(a.error)}})},t.URL_SCHEME="indexeddb://",t}(),r$=function(t){return re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(_f.URL_SCHEME)?(e=t.slice(_f.URL_SCHEME.length),new _f(e)):null;var e};xi.registerSaveRouter(r$),xi.registerLoadRouter(r$);var Pge=function(){function t(){this.indexedDB=Tz()}return t.prototype.listModels=function(){return Ee(this,void 0,void 0,function(){var e=this;return Ce(this,function(n){return[2,new Promise(function(r,i){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return xC(o)},o.onsuccess=function(){var a=o.result,s=a.transaction(Js,"readonly"),u=s.objectStore(Js).getAll();u.onsuccess=function(){for(var l={},c=0,f=u.result;c<f.length;c++){var h=f[c];l[h.modelPath]=h.modelArtifactsInfo}r(l)},u.onerror=function(l){return a.close(),i(u.error)},s.oncomplete=function(){return a.close()}},o.onerror=function(a){return i(o.error)}})]})})},t.prototype.removeModel=function(e){return Ee(this,void 0,void 0,function(){var n=this;return Ce(this,function(r){var i;return e=(i=e).startsWith(_f.URL_SCHEME)?i.slice(_f.URL_SCHEME.length):i,[2,new Promise(function(o,a){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return xC(s)},s.onsuccess=function(){var u,l=s.result,c=l.transaction(Js,"readwrite"),f=c.objectStore(Js),h=f.get(e);h.onsuccess=function(){if(h.result==null)return l.close(),a(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var d=f.delete(e),p=function(){var v=(u=l.transaction(gl,"readwrite")).objectStore(gl).delete(e);v.onsuccess=function(){return o(h.result.modelArtifactsInfo)},v.onerror=function(m){return a(h.error)}};d.onsuccess=p,d.onerror=function(v){return p(),l.close(),a(h.error)}},h.onerror=function(d){return l.close(),a(h.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},s.onerror=function(u){return a(s.error)}})]})})},t}();if(re().getBool("IS_BROWSER"))try{lu.registerManager(_f.URL_SCHEME,new Pge)}catch{}var Fa="/",Rc="tensorflowjs_models",Pz="info",Oge="model_topology",kge="weight_specs",Rge="weight_data",Ige="model_metadata";function Oz(t){return{info:[Rc,t,Pz].join(Fa),topology:[Rc,t,Oge].join(Fa),weightSpecs:[Rc,t,kge].join(Fa),weightData:[Rc,t,Rge].join(Fa),modelMetadata:[Rc,t,Ige].join(Fa)}}function Dge(t){var e=t.split(Fa);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(Fa)}var Sf=function(){function t(e){if(!re().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Oz(this.modelPath)}return t.prototype.save=function(e){return Ee(this,void 0,void 0,function(){var n,r,i;return Ce(this,function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=vm(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(a){if(wC)return Buffer.from(a).toString("base64");for(var s=new Uint8Array(a),u="",l=0,c=s.length;l<c;l++)u+=String.fromCharCode(s[l]);return btoa(u)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,a,s;return Ce(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(a=JSON.parse(o),n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,n.userDefinedMetadata=a.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(wC){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var f=atob(l),h=new Uint8Array(f.length),d=0;d<f.length;++d)h.set([f.charCodeAt(d)],d);return h.buffer}(s),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),i$=function(t){return re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Sf.URL_SCHEME)?(e=t.slice(Sf.URL_SCHEME.length),new Sf(e)):null;var e};xi.registerSaveRouter(i$),xi.registerLoadRouter(i$);var Nge=function(){function t(){W(re().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),W(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,a;return Ce(this,function(s){for(e={},n=Rc+Fa,r=Fa+Pz,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(n)&&o.endsWith(r)&&(a=Dge(o),e[a]=JSON.parse(this.LS.getItem(o)));return[2,e]})})},t.prototype.removeModel=function(e){return Ee(this,void 0,void 0,function(){var n,r;return Ce(this,function(i){var o;if(e=(o=e).startsWith(Sf.URL_SCHEME)?o.slice(Sf.URL_SCHEME.length):o,n=Oz(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(re().getBool("IS_BROWSER"))try{lu.registerManager(Sf.URL_SCHEME,new Nge)}catch{}var Mge="model",$ge=".json",jge=".weights.bin";function o$(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var O_=function(){function t(e){if(!re().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=Mge),this.modelTopologyFileName=e+$ge,this.weightDataFileName=e+jge}return t.prototype.save=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,s;return Ce(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(a=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,o$(function(){return a.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,o$(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:vm(e)}]}})})},t.URL_SCHEME="downloads://",t}(),Lge=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return Ee(this,void 0,void 0,function(){var e,n,r=this;return Ce(this,function(i){return e=this.files[0],n=this.files.slice(1),[2,new Promise(function(o,a){var s=new FileReader;s.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&o({modelTopology:c});var f=l.weightsManifest;if(f!=null){var h;try{h=r.checkManifestAndWeightFiles(f,n)}catch(m){return void a(m)}var d=[],p=[],v=[];f.forEach(function(m){m.paths.forEach(function(g){p.push(g),v.push(null)}),d.push.apply(d,m.weights)}),f.forEach(function(m){m.paths.forEach(function(g){var y=new FileReader;y.onload=function(b){var _=b.target.result,x=p.indexOf(g);v[x]=_,v.indexOf(null)===-1&&o({modelTopology:c,weightSpecs:d,weightData:LP(v),format:l.format,generatedBy:l.generatedBy,convertedBy:l.convertedBy,userDefinedMetadata:l.userDefinedMetadata})},y.onerror=function(b){return a("Failed to weights data from file of path '"+g+"'.")},y.readAsArrayBuffer(h[g])})})}else a(new Error("weightManifest field is missing from file "+e.name))}else a(new Error("modelTopology field is missing from file "+e.name))},s.onerror=function(u){return a("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(e)})]})})},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],i=n.map(function(u){return t$(u.name)}),o={},a=0,s=e;a<s.length;a++)s[a].paths.forEach(function(u){var l=t$(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");o[u]=n[i.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return o},t}();function a$(t,e,n,r){(function(o){W(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,a){W(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),W(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+a}),W(a>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+a})}(n=n??0,r=r??1);var i=0;return Promise.all(t.map(function(o){return o.then(function(a){var s=n+ ++i/t.length*(r-n);return e(s),a}),o}))}function kz(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c;return Ce(this,function(f){switch(f.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?re().platform.fetch:e.fetchFunc,r=t.map(function(h){return n(h,e.requestInit,{isBinary:!0})}),i=0,o=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return a=f.sent(),[3,4];case 2:return[4,a$(r,e.onProgress,i,o)];case 3:a=f.sent(),f.label=4;case 4:return s=a.map(function(h){return h.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return c=f.sent(),[3,8];case 6:return[4,a$(s,e.onProgress,u,l)];case 7:c=f.sent(),f.label=8;case 8:return[2,c]}})})}function s$(t){var e=this;return function(n,r,i){return r===void 0&&(r=""),Ee(e,void 0,void 0,function(){var o,a,s,u,l,c,f,h,d,p;return Ce(this,function(v){switch(v.label){case 0:if(o=n.map(function(){return!1}),a={},s=i!=null?i.map(function(){return!1}):[],u=[],n.forEach(function(m,g){var y=0;m.weights.forEach(function(b){var _="quantization"in b?b.quantization.dtype:b.dtype,x=bC[_]*Ae(b.shape),S=function(){o[g]=!0,a[g]==null&&(a[g]=[]),a[g].push({manifestEntry:b,groupOffset:y,sizeBytes:x})};i!=null?i.forEach(function(E,C){E===b.name&&(S(),s[C]=!0)}):S(),u.push(b.name),y+=x})}),!s.every(function(m){return m}))throw l=i.filter(function(m,g){return!s[g]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return c=o.reduce(function(m,g,y){return g&&m.push(y),m},[]),f=[],c.forEach(function(m){n[m].paths.forEach(function(g){var y=r+(r.endsWith("/")?"":"/")+g;f.push(y)})}),[4,t(f)];case 1:return h=v.sent(),d={},p=0,c.forEach(function(m){for(var g=n[m].paths.length,y=0,b=0;b<g;b++)y+=h[p+b].byteLength;for(var _=new ArrayBuffer(y),x=new Uint8Array(_),S=0,E=0;E<g;E++){var C=new Uint8Array(h[p+E]);x.set(C,S),S+=C.byteLength}a[m].forEach(function(A){var T=Az(_.slice(A.groupOffset,A.groupOffset+A.sizeBytes),[A.manifestEntry]);for(var P in T)d[P]=T[P]}),p+=g}),[2,d]}})})}}xi.registerSaveRouter(function(t){return re().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(O_.URL_SCHEME)?function(e){return e===void 0&&(e="model"),new O_(e)}(t.slice(O_.URL_SCHEME.length)):null});var Rz=function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(W(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=re().platform.fetch,W(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&W(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o;return Ce(this,function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:vm(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return Ee(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,l,c,f,h;return Ce(this,function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return n=d.sent(),[3,5];case 4:throw d.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=n.modelTopology,o=n.weightsManifest,a=n.generatedBy,s=n.convertedBy,u=n.format,l=n.userDefinedMetadata,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:h=d.sent(),c=h[0],f=h[1],d.label=7;case 7:return[2,{modelTopology:i,weightSpecs:c,weightData:f,userDefinedMetadata:l,generatedBy:a,convertedBy:s,format:u}]}})})},t.prototype.loadWeights=function(e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c,f,h;return Ce(this,function(d){switch(d.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var v=p.lastIndexOf("/"),m=p.lastIndexOf("?"),g=p.substring(0,v),y=m>v?p.substring(m):"";return[g+"/",y]}(n),i=r[0],o=r[1],a=this.weightPathPrefix||i,s=[],u=0,l=e;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return f=[],e.forEach(function(p){p.paths.forEach(function(v){f.push(a+v+o)})}),[4,kz(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=d.sent(),[2,[s,LP(h)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function _C(t){return t.match(Rz.URL_SCHEME_REGEX)!=null}var u$=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return _C(n)}):_C(t))?SC(t,{onProgress:e}):null};function SC(t,e){return new Rz(t,e)}xi.registerSaveRouter(u$),xi.registerLoadRouter(u$);var k_=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return Ee(this,void 0,void 0,function(){return Ce(this,function(e){return[2,this.modelArtifacts]})})},t}(),Fge=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){return[2,this.saveHandler(e)]})})},t}(),Iz=Object.freeze({browserFiles:function(t){return new Lge(t)},browserHTTPRequest:function(t,e){return SC(t,e)},concatenateArrayBuffers:LP,decodeWeights:Az,encodeWeights:function(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,s=this;return Ce(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),o=function(l){var c=i[l],f=Array.isArray(t)?t[l].tensor:t[c];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+f.dtype);var h={name:c,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var d=new Promise(function(p){return Ee(s,void 0,void 0,function(){var v,m,g,y,b,_,x;return Ce(this,function(S){switch(S.label){case 0:return[4,f.bytes()];case 1:for(v=S.sent(),m=v.reduce(function(E,C){return E+C.length},0)+k0*v.length,g=new Uint8Array(m),y=0,b=0;b<v.length;b++)_=v[b],x=new Uint8Array(new Uint32Array([_.length]).buffer),g.set(x,y),y+=k0,g.set(_,y),y+=_.length;return p(g),[2]}})})});r.push(d)}else r.push(f.data());e!=null&&(h.group=e),n.push(h)},a=0;a<i.length;++a)o(a);return[4,Promise.all(r)];case 1:return[2,{data:Tge(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new k_(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new k_({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new k_({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return xi.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:vm,getSaveHandlers:function(t){return xi.getSaveHandlers(t)},http:SC,isHTTPScheme:_C,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),Ee(this,void 0,void 0,function(){return Ce(this,function(i){return[2,s$(function(o){return kz(o,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return xi.registerLoadRouter(t)},registerSaveRouter:function(t){return xi.registerSaveRouter(t)},weightsLoaderFactory:s$,withSaveHandler:function(t){return new Fge(t)},copyModel:function(t,e){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){return[2,n$(t,e,!1)]})})},listModels:function(){return Ee(this,void 0,void 0,function(){var t,e,n,r,i,o,a;return Ce(this,function(s){switch(s.label){case 0:t=lu.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(i=r[n],[4,lu.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())e[i+xf+a]=o[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){return[2,n$(t,e,!0)]})})},removeModel:function(t){return Ee(this,void 0,void 0,function(){var e;return Ce(this,function(n){return e=dy(t),[2,lu.getManager(e.scheme).removeModel(e.path)]})})}}),xc;G({confusionMatrix_:function(t,e,n){var r=j(t,"labels","confusionMatrix"),i=j(e,"predictions","confusionMatrix");W(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),W(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),W(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),W(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),W(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var o=pC(r.asType("int32"),n),a=pC(i.asType("int32"),n);return o.transpose().matMul(a).asType("int32")}});var Bge=G({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)o=!0;else{if(t.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+t.constructor.name);a=!0}if(i&&i&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(n6("FromPixels",K.backendName)!=null)return K.runKernel("FromPixels",{pixels:t},{numChannels:e});var s,u,l=i?[t.videoWidth,t.videoHeight]:[t.width,t.height],c=l[0],f=l[1];if(a?s=t.getContext("2d").getImageData(0,0,c,f).data:r||n?s=t.data:(o||i)&&(xc==null&&(xc=document.createElement("canvas").getContext("2d")),xc.canvas.width=c,xc.canvas.height=f,xc.drawImage(t,0,0,c,f),s=xc.getImageData(0,0,c,f).data),e===4)u=new Int32Array(s);else{var h=c*f;u=new Int32Array(h*e);for(var d=0;d<h;d++)for(var p=0;p<e;++p)u[d*e+p]=s[4*d+p]}return dP(u,[f,c,e],"int32")}}),FP=Object.freeze({toPixels:function(t,e){return Ee(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,_,x,S,E,C;return Ce(this,function(A){switch(A.label){case 0:if(n=j(t,"img","toPixels"),t instanceof Qt||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],o=r[1],(a=n.rank===2?1:n.shape[2])>4||a===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=A.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=A.sent(),f=c[0],h=c[1],d=f[0],p=h[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(d<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+d+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(d<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+d+" - "+p+"].")}for(v=n.dtype==="float32"?255:1,m=new Uint8ClampedArray(o*i*4),g=0;g<i*o;++g)y=void 0,b=void 0,_=void 0,x=void 0,a===1?(y=s[g]*v,b=s[g]*v,_=s[g]*v,x=255):a===3?(y=s[3*g]*v,b=s[3*g+1]*v,_=s[3*g+2]*v,x=255):a===4&&(y=s[4*g]*v,b=s[4*g+1]*v,_=s[4*g+2]*v,x=s[4*g+3]*v),m[(S=4*g)+0]=Math.round(y),m[S+1]=Math.round(b),m[S+2]=Math.round(_),m[S+3]=Math.round(x);return e!=null&&(e.width=o,e.height=i,E=e.getContext("2d"),C=new ImageData(m,o,i),E.putImageData(C,0,0)),n!==t&&n.dispose(),[2,m]}})})},fromPixels:Bge}),Uge=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t}(),Vge=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function tc(t){W(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),W(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),W(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),Vge.register(t)}var nc=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Do(e,t),e.prototype.minimize=function(n,r,i){r===void 0&&(r=!1);var o=this.computeGradients(n,i),a=o.value,s=o.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:s[l.name]}});this.applyGradients(u)}else this.applyGradients(s);return ti(s),r?a:(a.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return Qhe(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&ti(this.iterations_)},e.prototype.saveIterations=function(){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:me(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(n){return Ee(this,void 0,void 0,function(){return Ce(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(n){return Ee(this,void 0,void 0,function(){var r;return Ce(this,function(i){switch(i.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,n.slice(1)]}})})},e}(Uge);Object.defineProperty(nc,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var Wge=function(t){function e(n,r,i){i===void 0&&(i=null);var o=t.call(this)||this;return o.learningRate=n,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=K.backend.epsilon()),o}return Do(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=K.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:we(function(){return at(a).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:we(function(){return at(a).variable(!1)})});var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[o].variable,l=r.accumulatedUpdates[o].variable;we(function(){var c=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),h=l.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(c),l.assign(h);var d=f.mul(-r.learningRate).add(a);a.assign(d)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(ti(this.accumulatedGrads.map(function(n){return n.variable})),ti(this.accumulatedUpdates.map(function(n){return n.variable})))},e.prototype.getWeights=function(){return Ee(this,void 0,void 0,function(){var n;return Ce(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Ee(this,void 0,void 0,function(){var r;return Ce(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(nc);tc(Wge);var zge=function(t){function e(n,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=n,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Do(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=K.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:we(function(){return ha(a.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var u=r.accumulatedGrads[o].variable;we(function(){var l=u.add(s.square());u.assign(l);var c=s.div(l.add(K.backend.epsilon()).sqrt()).mul(-r.learningRate).add(a);a.assign(c)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&ti(this.accumulatedGrads.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return Ee(this,void 0,void 0,function(){return Ce(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(nc);tc(zge);var Hge=function(t){function e(n,r,i,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=i,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],we(function(){a.accBeta1=me(r).variable(),a.accBeta2=me(i).variable()}),o==null&&(a.epsilon=K.backend.epsilon()),a}return Do(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n);we(function(){var o=Un(1,r.accBeta1),a=Un(1,r.accBeta2);i.forEach(function(s,u){var l=K.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:we(function(){return at(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:we(function(){return at(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,h=r.accumulatedSecondMoment[u].variable,d=f.mul(r.beta1).add(c.mul(1-r.beta1)),p=h.mul(r.beta2).add(c.square().mul(1-r.beta2)),v=d.div(o),m=p.div(a);f.assign(d),h.assign(p);var g=v.div(m.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(g)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&ti(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&ti(this.accumulatedSecondMoment.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Ee(this,void 0,void 0,function(){var n;return Ce(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Ee(this,void 0,void 0,function(){var r,i=this;return Ce(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),we(function(){i.accBeta1.assign(P0(i.beta1,i.iterations_+1)),i.accBeta2.assign(P0(i.beta2,i.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(nc);tc(Hge);var Gge=function(t){function e(n,r,i,o,a){o===void 0&&(o=null),a===void 0&&(a=0);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=i,s.epsilon=o,s.decay=a,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],we(function(){s.iteration=me(0).variable(),s.accBeta1=me(r).variable()}),o==null&&(s.epsilon=K.backend.epsilon()),s}return Do(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n);we(function(){var o=Un(1,r.accBeta1),a=xo(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(s,u){var l=K.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:at(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:at(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[s];if(c!=null){var f=r.accumulatedFirstMoment[u].variable,h=r.accumulatedWeightedInfNorm[u].variable,d=f.mul(r.beta1).add(c.mul(1-r.beta1)),p=h.mul(r.beta2),v=c.abs(),m=p.maximum(v);f.assign(d),h.assign(m);var g=a.div(o).mul(d.div(m.add(r.epsilon))).add(l);l.assign(g)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&ti(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&ti(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(n){return Ee(this,void 0,void 0,function(){return Ce(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(nc);tc(Gge);var Dz=function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Do(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=Array.isArray(n)?n[o].tensor:n[i];if(a!=null){var s=K.registeredVariables[i];we(function(){var u=r.c.mul(a).add(s);s.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=hhe(me(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},e.prototype.setWeights=function(n){return Ee(this,void 0,void 0,function(){return Ce(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e}(nc);tc(Dz);var qge=function(t){function e(n,r,i){i===void 0&&(i=!1);var o=t.call(this,n)||this;return o.learningRate=n,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=me(o.momentum),o}return Do(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=K.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:we(function(){return at(a).variable(!1)})});var s=r.accumulations[o].variable,u=Array.isArray(n)?n[o].tensor:n[i];u!=null&&we(function(){var l,c=r.m.mul(s).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(a):r.c.mul(c).add(a),s.assign(c),a.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&ti(this.accumulations.map(function(n){return n.variable}))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return Ee(this,void 0,void 0,function(){return Ce(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return Ee(this,void 0,void 0,function(){return Ce(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(Dz);tc(qge);var Kge=function(t){function e(n,r,i,o,a){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),a===void 0&&(a=!1);var s=t.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=i,s.epsilon=o,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=a,o==null&&(s.epsilon=K.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Do(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var a=K.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:we(function(){return at(a).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:we(function(){return at(a).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:we(function(){return at(a).variable(!1)})});var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var u=r.accumulatedMeanSquares[o].variable,l=r.accumulatedMoments[o].variable;we(function(){var c=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[o].variable,h=f.mul(r.decay).add(s.mul(1-r.decay)),d=l.mul(r.momentum).add(s.mul(r.learningRate).div(c.sub(h.square().add(r.epsilon)).sqrt()));u.assign(c),f.assign(h),l.assign(d);var p=a.sub(d);a.assign(p)}else{var v=u.mul(r.decay).add(s.square().mul(1-r.decay));d=l.mul(r.momentum).add(s.mul(r.learningRate).div(v.add(r.epsilon).sqrt())),u.assign(v),l.assign(d),p=a.sub(d),a.assign(p)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&ti(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&ti(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&ti(this.accumulatedMoments.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return Ee(this,void 0,void 0,function(){var n;return Ce(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return Ee(this,void 0,void 0,function(){var r;return Ce(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(nc);tc(Kge);Qt.prototype.squaredDifference=function(t){return K6(this,t)},te=wge;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var EC=function(t,e){return EC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},EC(t,e)};function Be(t,e){EC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var xr=function(){return xr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},xr.apply(this,arguments)};function Pe(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(f){a(f)}}function u(c){try{l(r.throw(c))}catch(f){a(f)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,[])).next())})}function Oe(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(c){l=[6,c],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function fp(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var Ef=function(){function t(e,n){if(!Dl(e)||!Dl(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:n}));this._width=e,this._height=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.reverse=function(){return new t(1/this.width,1/this.height)},t}();function Rw(t,e){return t instanceof Qt&&t.shape.length===e}function Xge(t){return Rw(t,2)}function Iw(t){return Rw(t,3)}function cu(t){return Rw(t,4)}function Yge(t){return t%1!==0}function l$(t){return t%2===0}function Jge(t,e){e===void 0&&(e=2);var n=Math.pow(10,e);return Math.floor(t*n)/n}function c$(t){return t&&t.width&&t.height}function Qge(t,e){var n=t.width,r=t.height,i=e/Math.max(r,n);return new Ef(Math.round(n*i),Math.round(r*i))}function BP(t){return t.reduce(function(e,n){return e.add(n)},new pt(0,0)).div(new pt(t.length,t.length))}function av(t,e,n){return Array(t).fill(0).map(function(r,i){return e+i*n})}function Dl(t){return!!t&&t!==1/0&&t!==-1/0&&!isNaN(t)||t===0}function f$(t){return Dl(t)&&0<=t&&t<=1}var pt=function(){function t(e,n){this._x=e,this._y=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.mul=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.div=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.abs=function(){return new t(Math.abs(this.x),Math.abs(this.y))},t.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t}(),Su=function(){function t(e,n){n===void 0&&(n=!0);var r=e||{},i=[r.left,r.top,r.right,r.bottom].every(Dl),o=[r.x,r.y,r.width,r.height].every(Dl);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=a[0],u=a[1],l=a[2],c=a[3];t.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return t.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Dl)},t.assertIsValidBox=function(e,n,r){if(r===void 0&&(r=!1),!t.isRect(e))throw new Error(n+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(n+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return new pt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return new pt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return new pt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return new pt(this.right,this.bottom)},enumerable:!0,configurable:!0}),t.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(a){return Math.round(a)}),n=e[0],r=e[1],i=e[2],o=e[3];return new t({x:n,y:r,width:i,height:o})},t.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(a){return Math.floor(a)}),n=e[0],r=e[1],i=e[2],o=e[3];return new t({x:n,y:r,width:i,height:o})},t.prototype.toSquare=function(){var e=this,n=e.x,r=e.y,i=e.width,o=e.height,a=Math.abs(i-o);return i<o&&(n-=a/2,i+=a),o<i&&(r-=a/2,o+=a),new t({x:n,y:r,width:i,height:o})},t.prototype.rescale=function(e){var n=c$(e)?e.width:e,r=c$(e)?e.height:e;return new t({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},t.prototype.pad=function(e,n){var r=[this.x-e/2,this.y-n/2,this.width+e,this.height+n],i=r[0],o=r[1],a=r[2],s=r[3];return new t({x:i,y:o,width:a,height:s})},t.prototype.clipAtImageBorders=function(e,n){var r=this,i=r.x,o=r.y,a=r.right,s=r.bottom,u=Math.max(i,0),l=Math.max(o,0),c=a-u,f=s-l,h=Math.min(c,e-u),d=Math.min(f,n-l);return new t({x:u,y:l,width:h,height:d}).floor()},t.prototype.shift=function(e,n){var r=this,i=r.width,o=r.height,a=this.x+e,s=this.y+n;return new t({x:a,y:s,width:i,height:o})},t.prototype.padAtBorders=function(e,n){var r=this.width+1,i=this.height+1,o=1,a=1,s=r,u=i,l=this.left,c=this.top,f=this.right,h=this.bottom;return f>n&&(s=-f+n+r,f=n),h>e&&(u=-h+e+i,h=e),l<1&&(u=2-l,l=1),c<1&&(u=2-c,c=1),{dy:a,edy:u,dx:o,edx:s,y:c,ey:h,x:l,ex:f,w:r,h:i}},t.prototype.calibrate=function(e){return new t({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},t}(),Dw=function(t){Be(e,t);function e(n,r,i,o,a){return a===void 0&&(a=!1),t.call(this,{left:n,top:r,right:i,bottom:o},a)||this}return e}(Su),Nz=function(){function t(e,n,r,i,o){this._imageDims=new Ef(o.width,o.height),this._score=e,this._classScore=n,this._className=r,this._box=new Su(i).rescale(this._imageDims)}return Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativeBox",{get:function(){return new Su(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new t(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:n})},t}(),Ea=function(t){Be(e,t);function e(n,r,i){return t.call(this,n,n,"",r,i)||this}return e.prototype.forSize=function(n,r){var i=t.prototype.forSize.call(this,n,r),o=i.score,a=i.relativeBox,s=i.imageDims;return new e(o,a,s)},e}(Nz);function Zge(t,e,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left)),i=Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)),o=r*i;return n?o/(t.area+e.area-o):o/Math.min(t.area,e.area)}function eye(t){var e=t.map(function(s){return s.x}),n=t.map(function(s){return s.y}),r=e.reduce(function(s,u){return u<s?u:s},1/0),i=n.reduce(function(s,u){return u<s?u:s},1/0),o=e.reduce(function(s,u){return s<u?u:s},0),a=n.reduce(function(s,u){return s<u?u:s},0);return new Dw(r,i,o,a)}function sv(t,e,n,r){r===void 0&&(r=!0);for(var i=e.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),o=[],a=function(){var s=i.pop();o.push(s);for(var u=i,l=[],c=0;c<u.length;c++){var f=u[c],h=t[s],d=t[f];l.push(Zge(h,d,r))}i=i.filter(function(p,v){return l[v]<=n})};i.length>0;)a();return o}function mm(t,e){return we(function(){var n=e[0],r=e[1],i=e[2],o=ha(fp(t.shape.slice(0,3),[1]),n),a=ha(fp(t.shape.slice(0,3),[1]),r),s=ha(fp(t.shape.slice(0,3),[1]),i),u=Ln([o,a,s],3);return Un(t,u)})}function tye(t,e){return e===void 0&&(e=!1),we(function(){var n=t.shape.slice(1),r=n[0],i=n[1];if(r===i)return t;var o=Math.abs(r-i),a=Math.round(o*(e?.5:1)),s=r>i?2:1,u=function(d){var p=t.shape.slice();return p[s]=d,ha(p,0)},l=u(a),c=o-l.shape[s],f=e&&c?u(c):null,h=[f,t,l].filter(function(d){return!!d}).map(function(d){return d.toFloat()});return Ln(h,s)})}function R_(t){return 1/(1+Math.exp(-t))}var UP=function(t){Be(e,t);function e(n,r,i,o,a){return a===void 0&&(a=!1),t.call(this,{x:n,y:r,width:i,height:o},a)||this}return e}(Su),nye=.5,rye=.43,iye=.45,R0=function(){function t(e,n,r){r===void 0&&(r=new pt(0,0));var i=n.width,o=n.height;this._imgDims=new Ef(i,o),this._shift=r,this._positions=e.map(function(a){return a.mul(new pt(i,o)).add(r)})}return Object.defineProperty(t.prototype,"shift",{get:function(){return new pt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(n){return n.sub(e._shift).div(new pt(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),t.prototype.forSize=function(e,n){return new this.constructor(this.relativePositions,{width:e,height:n})},t.prototype.shiftBy=function(e,n){return new this.constructor(this.relativePositions,this._imgDims,new pt(e,n))},t.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},t.prototype.align=function(e,n){if(n===void 0&&(n={}),e){var r=e instanceof Ea?e.box.floor():new Su(e);return this.shiftBy(r.x,r.y).align(null,n)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),o=i.useDlibAlignment,a=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(a)},t.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),n=e[0],r=e[1],i=e[2],o=function(f){return i.sub(f).magnitude()},a=(o(n)+o(r))/2,s=Math.floor(a/iye),u=BP(e),l=Math.floor(Math.max(0,u.x-nye*s)),c=Math.floor(Math.max(0,u.y-rye*s));return new UP(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))},t.prototype.alignMinBbox=function(e){var n=eye(this.positions);return n.pad(n.width*e,n.height*e)},t.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},t}(),oye=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],BP([n[3],n[4]])]},e}(R0),aye=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(BP)},e}(R0),h$=function(){function t(e,n){this._label=e,this._distance=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+Jge(this.distance)+")":"")},t}(),d$=function(t){Be(e,t);function e(n,r){var i=t.call(this,n)||this;return i._label=r,i}return e.assertIsValidLabeledBox=function(n,r){if(Su.assertIsValidBox(n,r),!Dl(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e}(Su),Ag=function(){function t(e,n){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=n}return Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},t.fromJSON=function(e){var n=e.descriptors.map(function(r){return new Float32Array(r)});return new t(e.label,n)},t}();(function(t){Be(e,t);function e(n,r,i,o){var a=t.call(this,n,r)||this;return a._score=i,a._classScore=o,a}return e.assertIsValidPredictedBox=function(n,r){if(d$.assertIsValidLabeledBox(n,r),!f$(n.score)||!f$(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(d$);function sye(t){return t.detection instanceof Ea}function VP(t,e){var n={detection:e};return Object.assign({},t,n)}function Mz(){var t=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:t,readFile:e}}function $z(t){var e="";if(!t)try{t=require("fs")}catch(r){e=r.toString()}var n=t?function(r){return new Promise(function(i,o){t.readFile(r,function(a,s){return a?o(a):i(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:n}}function jz(){var t=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,n=function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=$z();return xr({Canvas:t||function(){function a(){}return a}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function a(){}return a}(),Image:e||function(){function a(){}return a}(),ImageData:global.ImageData||function(){function a(){}return a}(),Video:global.HTMLVideoElement||function(){function a(){}return a}(),createCanvasElement:n,createImageElement:r,fetch:i},o)}function Lz(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function Fz(){return typeof global=="object"&&typeof require=="function"&&typeof iq<"u"&&typeof process<"u"&&!!process.version}var kn;function uye(){if(!kn)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return kn}function CC(t){kn=t}function WP(){Lz()&&CC(Mz()),Fz()&&CC(jz())}function lye(t){if(kn||WP(),!kn)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=t.Canvas,n=e===void 0?kn.Canvas:e,r=t.Image,i=r===void 0?kn.Image:r;kn.Canvas=n,kn.Image=i,kn.createCanvasElement=t.createCanvasElement||function(){return new n},kn.createImageElement=t.createImageElement||function(){return new i},kn.ImageData=t.ImageData||kn.ImageData,kn.Video=t.Video||kn.Video,kn.fetch=t.fetch||kn.fetch,kn.readFile=t.readFile||kn.readFile}var Or={getEnv:uye,setEnv:CC,initialize:WP,createBrowserEnv:Mz,createFileSystem:$z,createNodejsEnv:jz,monkeyPatch:lye,isBrowser:Lz,isNodejs:Fz};WP();function Bz(t){return!Or.isNodejs()&&typeof t=="string"?document.getElementById(t):t}function zl(t){var e=Or.getEnv(),n=e.Canvas,r=e.CanvasRenderingContext2D;if(t instanceof r)return t;var i=Bz(t);if(!(i instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var p$;(function(t){t.TOP_LEFT="TOP_LEFT",t.TOP_RIGHT="TOP_RIGHT",t.BOTTOM_LEFT="BOTTOM_LEFT",t.BOTTOM_RIGHT="BOTTOM_RIGHT"})(p$||(p$={}));function Uz(t){var e=Or.getEnv(),n=e.Image,r=e.Video;return t instanceof n&&t.complete||t instanceof r&&t.readyState>=3}function cye(t){return new Promise(function(e,n){if(t instanceof Or.getEnv().Canvas||Uz(t))return e();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),e(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),n(o))}t.addEventListener("load",r),t.addEventListener("error",i)})}function Vz(t){var e=Or.getEnv(),n=e.Image,r=e.Video;return t instanceof n?new Ef(t.naturalWidth,t.naturalHeight):t instanceof r?new Ef(t.videoWidth,t.videoHeight):new Ef(t.width,t.height)}function Nw(t){var e=t.width,n=t.height,r=Or.getEnv().createCanvasElement,i=r();return i.width=e,i.height=n,i}function zP(t,e){var n=Or.getEnv().ImageData;if(!(t instanceof n)&&!Uz(t))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=Vz(t),i=r.width,o=r.height,a=Nw({width:i,height:o});return t instanceof n?zl(a).putImageData(t,0,0):zl(a).drawImage(t,0,0,i,o),a}function fye(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,o,a,s;return Oe(this,function(u){switch(u.label){case 0:return n=Or.getEnv().createCanvasElement(),r=t.shape.slice(cu(t)?1:0),i=r[0],o=r[1],a=r[2],s=we(function(){return t.as3D(i,o,a).toInt()}),[4,FP.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function v$(t){var e=Or.getEnv(),n=e.Image,r=e.Canvas,i=e.Video;return t instanceof n||t instanceof r||t instanceof i}function hye(t,e,n){n===void 0&&(n=!1);var r=Or.getEnv(),i=r.Image,o=r.Canvas;if(!(t instanceof i||t instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=Vz(t),s=e/Math.max(a.height,a.width),u=s*a.width,l=s*a.height,c=Nw({width:e,height:e}),f=t instanceof o?t:zP(t),h=Math.abs(u-l)/2,d=n&&u<l?h:0,p=n&&l<u?h:0;return zl(c).drawImage(f,d,p,u,l),c}var I0=function(){function t(e,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=n,this._batchSize=e.length,e.forEach(function(i,o){if(Iw(i)){r._imageTensors[o]=i,r._inputDimensions[o]=i.shape;return}if(cu(i)){var a=i.shape[0];if(a!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+a+" passed, but not supported in input array");r._imageTensors[o]=i,r._inputDimensions[o]=i.shape.slice(1);return}var s=i instanceof Or.getEnv().Canvas?i:zP(i);r._canvases[o]=s,r._inputDimensions[o]=[s.height,s.width,3]})}return Object.defineProperty(t.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reshapedInputDimensions",{get:function(){var e=this;return av(this.batchSize,0,1).map(function(n,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),t.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},t.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},t.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},t.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},t.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(e),r=this.getInputHeight(e);return Qge({width:n,height:r},this.inputSize)},t.prototype.toBatchTensor=function(e,n){var r=this;return n===void 0&&(n=!0),this._inputSize=e,we(function(){var i=av(r.batchSize,0,1).map(function(a){var s=r.getInput(a);if(s instanceof Qt){var u=cu(s)?s:s.expandDims();return u=tye(u,n),(u.shape[1]!==e||u.shape[2]!==e)&&(u=DP.resizeBilinear(u,[e,e])),u.as3D(e,e,3)}if(s instanceof Or.getEnv().Canvas)return FP.fromPixels(hye(s,e,n));throw new Error("toBatchTensor - at batchIdx "+a+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),o=Ci(i.map(function(a){return a.toFloat()})).as4D(r.batchSize,e,e,3);return o})},t}();function Qn(t){return Pe(this,void 0,void 0,function(){var e,n,r;return Oe(this,function(i){switch(i.label){case 0:if(t instanceof I0)return[2,t];if(e=Array.isArray(t)?t:[t],!e.length)throw new Error("toNetInput - empty array passed as input");return n=function(o){return Array.isArray(t)?" at input index "+o+":":""},r=e.map(Bz),r.forEach(function(o,a){if(!v$(o)&&!Iw(o)&&!cu(o))throw typeof e[a]=="string"?new Error("toNetInput -"+n(a)+" string passed, but could not resolve HTMLElement for element id "+e[a]):new Error("toNetInput -"+n(a)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(cu(o)){var s=o.shape[0];if(s!==1)throw new Error("toNetInput -"+n(a)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return v$(o)&&cye(o)}))];case 1:return i.sent(),[2,new I0(r,Array.isArray(t))]}})})}function HP(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,o,a,s,u;return Oe(this,function(l){switch(l.label){case 0:return n=Or.getEnv().Canvas,r=t,t instanceof n?[3,5]:[4,Qn(t)];case 1:if(i=l.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=i.getInput(0),o instanceof n?(a=o,[3,4]):[3,2];case 2:return[4,fye(o)];case 3:a=l.sent(),l.label=4;case 4:r=a,l.label=5;case 5:return s=zl(r),u=e.map(function(c){return c instanceof Ea?c.forSize(r.width,r.height).box.floor():c}).map(function(c){return c.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(c){var f=c.x,h=c.y,d=c.width,p=c.height,v=Nw({width:d,height:p});return zl(v).putImageData(s.getImageData(f,h,d,p),0,0),v})]}})})}function GP(t,e){return Pe(this,void 0,void 0,function(){return Oe(this,function(n){if(!Iw(t)&&!cu(t))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(cu(t)&&t.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,we(function(){var r=t.shape.slice(cu(t)?1:0),i=r[0],o=r[1],a=r[2],s=e.map(function(l){return l instanceof Ea?l.forSize(o,i).box:l}).map(function(l){return l.clipAtImageBorders(o,i)}),u=s.map(function(l){var c=l.x,f=l.y,h=l.width,d=l.height;return vz(t.as3D(i,o,a),[f,c,0],[d,h,a])});return u})]})})}function dye(t,e){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return n=Or.getEnv().fetch,[4,n(t,e)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function pye(t){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){switch(e.label){case 0:return[4,dye(t)];case 1:return[2,e.sent().json()]}})})}function Wz(t,e){var n=e+"-weights_manifest.json";if(!t)return{modelBaseUri:"",manifestUri:n};if(t==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=t.startsWith("http://")?"http://":t.startsWith("https://")?"https://":"";t=t.replace(r,"");var i=t.split("/").filter(function(s){return s}),o=t.endsWith(".json")?i[i.length-1]:n,a=r+(t.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return a=t.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:a==="/"?"/"+o:a+"/"+o}}function vye(t,e){return Pe(this,void 0,void 0,function(){var n,r,i,o;return Oe(this,function(a){switch(a.label){case 0:return n=Wz(t,e),r=n.manifestUri,i=n.modelBaseUri,[4,pye(r)];case 1:return o=a.sent(),[2,Iz.loadWeights(o,i)]}})})}var hs=function(){function t(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),t.prototype.getParamFromPath=function(e){var n=this.traversePropertyPath(e),r=n.obj,i=n.objProp;return r[i]},t.prototype.reassignParamFromPath=function(e,n){var r=this.traversePropertyPath(e),i=r.obj,o=r.objProp;i[o].dispose(),i[o]=n},t.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},t.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof Jf})},t.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof Jf)})},t.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(n){var r=n.path,i=n.tensor;e.reassignParamFromPath(r,i.variable())})},t.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(n){var r=n.path,i=n.tensor,o=ur(i.dataSync());i.dispose(),e.reassignParamFromPath(r,o)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(n){if(e&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},t.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var n=e.tensor;return Array.from(n.dataSync())}).reduce(function(e,n){return e.concat(n)}))},t.prototype.load=function(e){return Pe(this,void 0,void 0,function(){return Oe(this,function(n){switch(n.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return n.sent(),[2]}})})},t.prototype.loadFromUri=function(e){return Pe(this,void 0,void 0,function(){var n;return Oe(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,vye(e,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},t.prototype.loadFromDisk=function(e){return Pe(this,void 0,void 0,function(){var n,r,i,o,a,s,u,l,c,f;return Oe(this,function(h){switch(h.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=Or.getEnv().readFile,r=Wz(e,this.getDefaultModelName()),i=r.manifestUri,o=r.modelBaseUri,a=function(d){return Promise.all(d.map(function(p){return n(p).then(function(v){return v.buffer})}))},s=Iz.weightsLoaderFactory(a),c=(l=JSON).parse,[4,n(i)];case 1:return u=c.apply(l,[h.sent().toString()]),[4,s(u,o)];case 2:return f=h.sent(),this.loadFromWeightMap(f),[2]}})})},t.prototype.loadFromWeightMap=function(e){var n=this.extractParamsFromWeigthMap(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.extractWeights=function(e){var n=this.extractParams(e),r=n.paramMappings,i=n.params;this._paramMappings=r,this._params=i},t.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=e.split("/").reduce(function(o,a){if(!o.nextObj.hasOwnProperty(a))throw new Error("traversePropertyPath - object does not have property "+a+", for path "+e);return{obj:o.nextObj,objProp:a,nextObj:o.nextObj[a]}},{nextObj:this.params}),r=n.obj,i=n.objProp;if(!r||!i||!(r[i]instanceof Qt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:i}},t}();function _i(t,e,n){return we(function(){var r=PP(t,e.depthwise_filter,e.pointwise_filter,n,"same");return r=Je(r,e.bias),r})}function I_(t,e,n){return n===void 0&&(n=!1),we(function(){var r=en(n?Je(Zi(t,e.conv0.filters,[2,2],"same"),e.conv0.bias):_i(t,e.conv0,[2,2])),i=_i(r,e.conv1,[1,1]),o=en(Je(r,i)),a=_i(o,e.conv2,[1,1]);return en(Je(r,Je(i,a)))})}function Tg(t,e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),we(function(){var i=en(n?Je(Zi(t,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):_i(t,e.conv0,r?[2,2]:[1,1])),o=_i(i,e.conv1,[1,1]),a=en(Je(i,o)),s=_i(a,e.conv2,[1,1]),u=en(Je(i,Je(o,s))),l=_i(u,e.conv3,[1,1]);return en(Je(i,Je(o,Je(s,l))))})}function To(t,e,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),we(function(){var i=Je(Zi(t,e.filters,[1,1],n),e.bias);return r?en(i):i})}function ds(t,e){Object.keys(t).forEach(function(n){e.some(function(r){return r.originalPath===n})||t[n].dispose()})}function Mw(t,e){return function(n,r,i,o){var a=qr(t(n*r*i*i),[i,i,n,r]),s=Sn(t(r));return e.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}}function qP(t,e){return function(n,r,i){var o=uu(t(n*r),[n,r]),a=Sn(t(r));return e.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:a}}}var zz=function(){function t(e,n,r){this.depthwise_filter=e,this.pointwise_filter=n,this.bias=r}return t}();function KP(t,e){return function(n,r,i){var o=qr(t(9*n),[3,3,n,1]),a=qr(t(n*r),[1,1,n,r]),s=Sn(t(r));return e.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new zz(o,a,s)}}function XP(t){return function(e){var n=t(e+"/depthwise_filter",4),r=t(e+"/pointwise_filter",4),i=t(e+"/bias",1);return new zz(n,r,i)}}function Ru(t,e){return function(n,r,i){var o=t[n];if(!Rw(o,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+o);return e.push({originalPath:n,paramPath:i||n}),o}}function ps(t){var e=t;function n(i){var o=e.slice(0,i);return e=e.slice(i),o}function r(){return e}return{extractWeights:n,getRemainingWeights:r}}function Hz(t,e){var n=Mw(t,e),r=KP(t,e);function i(a,s,u,l){l===void 0&&(l=!1);var c=l?n(a,s,3,u+"/conv0"):r(a,s,u+"/conv0"),f=r(s,s,u+"/conv1"),h=r(s,s,u+"/conv2");return{conv0:c,conv1:f,conv2:h}}function o(a,s,u,l){l===void 0&&(l=!1);var c=i(a,s,u,l),f=c.conv0,h=c.conv1,d=c.conv2,p=r(s,s,u+"/conv3");return{conv0:f,conv1:h,conv2:d,conv3:p}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function mye(t){var e=[],n=ps(t),r=n.extractWeights,i=n.getRemainingWeights,o=Hz(r,e).extractDenseBlock4Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2"),l=o(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:a,dense1:s,dense2:u,dense3:l}}}function Gz(t){return function(e){var n=t(e+"/filters",4),r=t(e+"/bias",1);return{filters:n,bias:r}}}function qz(t,e){var n=Ru(t,e),r=Gz(n),i=XP(n);function o(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2");return{conv0:l,conv1:c,conv2:f}}function a(s,u){u===void 0&&(u=!1);var l=u?r(s+"/conv0"):i(s+"/conv0"),c=i(s+"/conv1"),f=i(s+"/conv2"),h=i(s+"/conv3");return{conv0:l,conv1:c,conv2:f,conv3:h}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function gye(t){var e=[],n=qz(t,e).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return ds(t,e),{params:r,paramMappings:e}}var Kz=function(t){Be(e,t);function e(){return t.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return we(function(){var i=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=mm(i,o).div(me(255)),s=Tg(a,r.dense0,!0);return s=Tg(s,r.dense1),s=Tg(s,r.dense2),s=Tg(s,r.dense3),s=pm(s,[7,7],[2,2],"valid"),s})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Qn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(n){return gye(n)},e.prototype.extractParams=function(n){return mye(n)},e}(hs);function ra(t,e){return we(function(){return Je(Pw(t,e.weights),e.bias)})}function yye(t,e,n){var r=[],i=ps(t),o=i.extractWeights,a=i.getRemainingWeights,s=qP(o,r),u=s(e,n,"fc");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:u}}}function bye(t){var e=[],n=Ru(t,e);function r(o){var a=n(o+"/weights",2),s=n(o+"/bias",1);return{weights:a,bias:s}}var i={fc:r("fc")};return ds(t,e),{params:i,paramMappings:e}}function Xz(t){var e={},n={};return Object.keys(t).forEach(function(r){var i=r.startsWith("fc")?n:e;i[r]=t[r]}),{featureExtractorMap:e,classifierMap:n}}var Yz=function(t){Be(e,t);function e(n,r){var i=t.call(this,n)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return we(function(){var o=n instanceof I0?r.faceFeatureExtractor.forwardInput(n):n;return ra(o.as2D(o.shape[0],-1),i.fc)})},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},e.prototype.extractClassifierParams=function(n){return yye(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(n){var r=Xz(n),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),bye(o)},e.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*r+i,a=n.slice(0,n.length-o),s=n.slice(n.length-o);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(s)},e}(hs),m$=["neutral","happy","sad","angry","fearful","disgusted","surprised"],wye=function(){function t(e){var n=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);m$.forEach(function(r,i){n[r]=e[i]})}return t.prototype.asSortedArray=function(){var e=this;return m$.map(function(n){return{expression:n,probability:e[n]}}).sort(function(n,r){return r.probability-n.probability})},t}(),xye=function(t){Be(e,t);function e(n){return n===void 0&&(n=new Kz),t.call(this,"FaceExpressionNet",n)||this}return e.prototype.forwardInput=function(n){var r=this;return we(function(){return cs(r.runNet(n))})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Qn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictExpressions=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,a,s=this;return Oe(this,function(u){switch(u.label){case 0:return[4,Qn(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(Fn(i).map(function(l){return Pe(s,void 0,void 0,function(){var c;return Oe(this,function(f){switch(f.label){case 0:return[4,l.data()];case 1:return c=f.sent(),l.dispose(),[2,c]}})})}))];case 3:return o=u.sent(),i.dispose(),a=o.map(function(l){return new wye(l)}),[2,r.isBatchInput?a:a[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e}(Yz);function Jz(t,e){var n={expressions:e};return Object.assign({},t,n)}function _ye(t){return sye(t)&&t.landmarks instanceof R0&&t.unshiftedLandmarks instanceof R0&&t.alignedRect instanceof Ea}function YP(t,e){var n=t.detection.box,r=e.shiftBy(n.x,n.y),i=r.align(),o=t.detection.imageDims,a=new Ea(t.detection.score,i.rescale(o.reverse()),o),s={landmarks:r,unshiftedLandmarks:e,alignedRect:a};return Object.assign({},t,s)}function Sye(t,e){var n=Mw(t,e),r=KP(t,e);function i(a,s,u){var l=r(a,s,u+"/separable_conv0"),c=r(s,s,u+"/separable_conv1"),f=n(a,s,1,u+"/expansion_conv");return{separable_conv0:l,separable_conv1:c,expansion_conv:f}}function o(a,s){var u=r(a,a,s+"/separable_conv0"),l=r(a,a,s+"/separable_conv1"),c=r(a,a,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:o}}function Eye(t,e){var n=[],r=ps(t),i=r.extractWeights,o=r.getRemainingWeights,a=Sye(i,n),s=a.extractConvParams,u=a.extractSeparableConvParams,l=a.extractReductionBlockParams,c=a.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),h=l(32,64,"entry_flow/reduction_block_0"),d=l(64,128,"entry_flow/reduction_block_1"),p={conv_in:f,reduction_block_0:h,reduction_block_1:d},v={};av(e,0,1).forEach(function(b){v["main_block_"+b]=c(128,"middle_flow/main_block_"+b)});var m=l(128,256,"exit_flow/reduction_block"),g=u(256,512,"exit_flow/separable_conv"),y={reduction_block:m,separable_conv:g};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:v,exit_flow:y}}}function Cye(t,e){var n=Ru(t,e),r=Gz(n),i=XP(n);function o(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:l,expansion_conv:c}}function a(s){var u=i(s+"/separable_conv0"),l=i(s+"/separable_conv1"),c=i(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:l,separable_conv2:c}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:a}}function Aye(t,e){var n=[],r=Cye(t,n),i=r.extractConvParams,o=r.extractSeparableConvParams,a=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=i("entry_flow/conv_in"),l=a("entry_flow/reduction_block_0"),c=a("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:l,reduction_block_1:c},h={};av(e,0,1).forEach(function(m){h["main_block_"+m]=s("middle_flow/main_block_"+m)});var d=a("exit_flow/reduction_block"),p=o("exit_flow/separable_conv"),v={reduction_block:d,separable_conv:p};return ds(t,n),{params:{entry_flow:f,middle_flow:h,exit_flow:v},paramMappings:n}}function Qz(t,e,n){return Je(Zi(t,e.filters,n,"same"),e.bias)}function D_(t,e,n){n===void 0&&(n=!0);var r=n?en(t):t;return r=_i(r,e.separable_conv0,[1,1]),r=_i(en(r),e.separable_conv1,[1,1]),r=Hn(r,[3,3],[2,2],"same"),r=Je(r,Qz(t,e.expansion_conv,[2,2])),r}function Tye(t,e){var n=_i(en(t),e.separable_conv0,[1,1]);return n=_i(en(n),e.separable_conv1,[1,1]),n=_i(en(n),e.separable_conv2,[1,1]),n=Je(n,t),n}var Pye=function(t){Be(e,t);function e(n){var r=t.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return e.prototype.forwardInput=function(n){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return we(function(){var o=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],s=mm(o,a).div(me(256)),u=en(Qz(s,i.entry_flow.conv_in,[2,2]));return u=D_(u,i.entry_flow.reduction_block_0,!1),u=D_(u,i.entry_flow.reduction_block_1),av(r._numMainBlocks,0,1).forEach(function(l){u=Tye(u,i.middle_flow["main_block_"+l])}),u=D_(u,i.exit_flow.reduction_block),u=en(_i(u,i.exit_flow.separable_conv,[1,1])),u})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Qn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Aye(n,this._numMainBlocks)},e.prototype.extractParams=function(n){return Eye(n,this._numMainBlocks)},e}(hs);function Oye(t){var e=[],n=ps(t),r=n.extractWeights,i=n.getRemainingWeights,o=qP(r,e),a=o(512,1,"fc/age"),s=o(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{fc:{age:a,gender:s}}}}function kye(t){var e=[],n=Ru(t,e);function r(o){var a=n(o+"/weights",2),s=n(o+"/bias",1);return{weights:a,bias:s}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return ds(t,e),{params:i,paramMappings:e}}var D0;(function(t){t.FEMALE="female",t.MALE="male"})(D0||(D0={}));var Rye=function(t){Be(e,t);function e(n){n===void 0&&(n=new Pye(2));var r=t.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(n){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return we(function(){var o=n instanceof I0?r.faceFeatureExtractor.forwardInput(n):n,a=pm(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),s=ra(a,i.fc.age).as1D(),u=ra(a,i.fc.gender);return{age:s,gender:u}})},e.prototype.forwardInput=function(n){var r=this;return we(function(){var i=r.runNet(n),o=i.age,a=i.gender;return{age:o,gender:cs(a)}})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Qn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.predictAgeAndGender=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,a,s,u,l=this;return Oe(this,function(c){switch(c.label){case 0:return[4,Qn(n)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return i=c.sent(),o=Fn(i.age),a=Fn(i.gender),s=o.map(function(f,h){return{ageTensor:f,genderTensor:a[h]}}),[4,Promise.all(s.map(function(f){var h=f.ageTensor,d=f.genderTensor;return Pe(l,void 0,void 0,function(){var p,v,m,g,y;return Oe(this,function(b){switch(b.label){case 0:return[4,h.data()];case 1:return p=b.sent()[0],[4,d.data()];case 2:return v=b.sent()[0],m=v>.5,g=m?D0.MALE:D0.FEMALE,y=m?v:1-v,h.dispose(),d.dispose(),[2,{age:p,gender:g,genderProbability:y}]}})})}))];case 3:return u=c.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),t.prototype.dispose.call(this,n)},e.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},e.prototype.extractClassifierParams=function(n){return Oye(n)},e.prototype.extractParamsFromWeigthMap=function(n){var r=Xz(n),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),kye(o)},e.prototype.extractParams=function(n){var r=1539,i=n.slice(0,n.length-r),o=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},e}(hs),Zz=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.postProcess=function(n,r,i){var o=i.map(function(s){var u=s.width,l=s.height,c=r/Math.max(l,u);return{width:u*c,height:l*c}}),a=o.length;return we(function(){var s=function(h,d){return Ci([ha([68],h),ha([68],d)],1).as2D(1,136).as1D()},u=function(h,d){var p=o[h],v=p.width,m=p.height;return d(v,m)?Math.abs(v-m)/2:0},l=function(h){return u(h,function(d,p){return d<p})},c=function(h){return u(h,function(d,p){return p<d})},f=n.mul(ha([a,136],r)).sub(Ci(Array.from(Array(a),function(h,d){return s(l(d),c(d))}))).div(Ci(Array.from(Array(a),function(h,d){return s(o[d].width,o[d].height)})));return f})},e.prototype.forwardInput=function(n){var r=this;return we(function(){var i=r.runNet(n);return r.postProcess(i,n.inputSize,n.inputDimensions.map(function(o){var a=o[0],s=o[1];return{height:a,width:s}}))})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Qn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.detectLandmarks=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,a=this;return Oe(this,function(s){switch(s.label){case 0:return[4,Qn(n)];case 1:return r=s.sent(),i=we(function(){return Fn(a.forwardInput(r))}),[4,Promise.all(i.map(function(u,l){return Pe(a,void 0,void 0,function(){var c,f,h,d,p;return Oe(this,function(v){switch(v.label){case 0:return h=(f=Array).from,[4,u.data()];case 1:return c=h.apply(f,[v.sent()]),d=c.filter(function(m,g){return l$(g)}),p=c.filter(function(m,g){return!l$(g)}),[2,new aye(Array(68).fill(0).map(function(m,g){return new pt(d[g],p[g])}),{height:r.getInputHeight(l),width:r.getInputWidth(l)})]}})})}))];case 2:return o=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e}(Yz),eH=function(t){Be(e,t);function e(n){return n===void 0&&(n=new Kz),t.call(this,"FaceLandmark68Net",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e}(Zz);function Iye(t){var e=[],n=qz(t,e).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return ds(t,e),{params:r,paramMappings:e}}function Dye(t){var e=[],n=ps(t),r=n.extractWeights,i=n.getRemainingWeights,o=Hz(r,e).extractDenseBlock3Params,a=o(3,32,"dense0",!0),s=o(32,64,"dense1"),u=o(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:e,params:{dense0:a,dense1:s,dense2:u}}}var Nye=function(t){Be(e,t);function e(){return t.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return we(function(){var i=n.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=mm(i,o).div(me(255)),s=I_(a,r.dense0,!0);return s=I_(s,r.dense1),s=I_(s,r.dense2),s=pm(s,[14,14],[2,2],"valid"),s})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Qn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Iye(n)},e.prototype.extractParams=function(n){return Dye(n)},e}(hs),Mye=function(t){Be(e,t);function e(n){return n===void 0&&(n=new Nye),t.call(this,"FaceLandmark68TinyNet",n)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e}(Zz);(function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(eH);function $ye(t,e){return Je(Tr(t,e.weights),e.biases)}function JP(t,e,n,r,i){i===void 0&&(i="same");var o=e.conv,a=o.filters,s=o.bias,u=Zi(t,a,n,i);return u=Je(u,s),u=$ye(u,e.scale),r?en(u):u}function jye(t,e){return JP(t,e,[1,1],!0)}function tH(t,e){return JP(t,e,[1,1],!1)}function nH(t,e){return JP(t,e,[2,2],!0,"valid")}function Lye(t,e){function n(s,u,l){var c=t(s),f=c.length/(u*l*l);if(Yge(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+c.length+", numFilters: "+u+", filterSize: "+l);return we(function(){return _u(qr(c,[u,f,l,l]),[2,3,1,0])})}function r(s,u,l,c){var f=n(s,u,l),h=Sn(t(u));return e.push({paramPath:c+"/filters"},{paramPath:c+"/bias"}),{filters:f,bias:h}}function i(s,u){var l=Sn(t(s)),c=Sn(t(s));return e.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:l,biases:c}}function o(s,u,l,c){var f=r(s,u,l,c+"/conv"),h=i(u,c+"/scale");return{conv:f,scale:h}}function a(s,u,l,c,f){f===void 0&&(f=!1);var h=o((f?.5:1)*s,u,l,c+"/conv1"),d=o(s,u,l,c+"/conv2");return{conv1:h,conv2:d}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function Fye(t){var e=ps(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],o=Lye(n,i),a=o.extractConvLayerParams,s=o.extractResidualLayerParams,u=a(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),h=s(36864,64,3,"conv64_down",!0),d=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),v=s(36864,64,3,"conv64_3"),m=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),_=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),S=s(589824,256,3,"conv256_down_out"),E=we(function(){return _u(uu(n(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var C={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:f,conv64_down:h,conv64_1:d,conv64_2:p,conv64_3:v,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:_,conv256_2:x,conv256_down_out:S,fc:E};return{params:C,paramMappings:i}}function Bye(t,e){var n=Ru(t,e);function r(a){var s=n(a+"/scale/weights",1),u=n(a+"/scale/biases",1);return{weights:s,biases:u}}function i(a){var s=n(a+"/conv/filters",4),u=n(a+"/conv/bias",1),l=r(a);return{conv:{filters:s,bias:u},scale:l}}function o(a){return{conv1:i(a+"/conv1"),conv2:i(a+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function Uye(t){var e=[],n=Bye(t,e),r=n.extractConvLayerParams,i=n.extractResidualLayerParams,o=r("conv32_down"),a=i("conv32_1"),s=i("conv32_2"),u=i("conv32_3"),l=i("conv64_down"),c=i("conv64_1"),f=i("conv64_2"),h=i("conv64_3"),d=i("conv128_down"),p=i("conv128_1"),v=i("conv128_2"),m=i("conv256_down"),g=i("conv256_1"),y=i("conv256_2"),b=i("conv256_down_out"),_=t.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!Xge(_))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+_);var x={conv32_down:o,conv32_1:a,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:f,conv64_3:h,conv128_down:d,conv128_1:p,conv128_2:v,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:_};return ds(t,e),{params:x,paramMappings:e}}function Uo(t,e){var n=jye(t,e.conv1);return n=tH(n,e.conv2),n=Je(n,t),n=en(n),n}function Pg(t,e){var n=nH(t,e.conv1);n=tH(n,e.conv2);var r=pm(t,2,2,"valid"),i=Bt(r.shape),o=r.shape[3]!==n.shape[3],a=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(a){var s=fp(n.shape);s[1]=1;var u=Bt(s);n=Ln([n,u],1);var l=fp(n.shape);l[2]=1;var c=Bt(l);n=Ln([n,c],2)}return r=o?Ln([r,i],3):r,n=Je(r,n),n=en(n),n}var Vye=function(t){Be(e,t);function e(){return t.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return we(function(){var i=n.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],a=mm(i,o).div(me(256)),s=nH(a,r.conv32_down);s=Hn(s,3,2,"valid"),s=Uo(s,r.conv32_1),s=Uo(s,r.conv32_2),s=Uo(s,r.conv32_3),s=Pg(s,r.conv64_down),s=Uo(s,r.conv64_1),s=Uo(s,r.conv64_2),s=Uo(s,r.conv64_3),s=Pg(s,r.conv128_down),s=Uo(s,r.conv128_1),s=Uo(s,r.conv128_2),s=Pg(s,r.conv256_down),s=Uo(s,r.conv256_1),s=Uo(s,r.conv256_2),s=Pg(s,r.conv256_down_out);var u=s.mean([1,2]),l=Pw(u,r.fc);return l})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Qn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.computeFaceDescriptor=function(n){return Pe(this,void 0,void 0,function(){var r,i,o,a=this;return Oe(this,function(s){switch(s.label){case 0:return[4,Qn(n)];case 1:return r=s.sent(),i=we(function(){return Fn(a.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return o=s.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Uye(n)},e.prototype.extractParams=function(n){return Fye(n)},e}(hs);function rH(t,e){var n={descriptor:e};return Object.assign({},t,n)}function iH(t,e){var n={age:e};return Object.assign({},t,n)}function oH(t,e,n){var r={gender:e,genderProbability:n};return Object.assign({},t,r)}var aH=function(){function t(e){var n=e===void 0?{}:e,r=n.minFaceSize,i=n.scaleFactor,o=n.maxNumScales,a=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(t.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),t}();function Wye(t,e){function n(u,l){var c=qr(t(9*u),[3,3,u,1]),f=Sn(t(u)),h=Sn(t(u)),d=Sn(t(u)),p=Sn(t(u));return e.push({paramPath:l+"/filters"},{paramPath:l+"/batch_norm_scale"},{paramPath:l+"/batch_norm_offset"},{paramPath:l+"/batch_norm_mean"},{paramPath:l+"/batch_norm_variance"}),{filters:c,batch_norm_scale:f,batch_norm_offset:h,batch_norm_mean:d,batch_norm_variance:p}}function r(u,l,c,f,h){var d=qr(t(u*l*c*c),[c,c,u,l]),p=Sn(t(l));return e.push({paramPath:f+"/filters"},{paramPath:f+"/"+(h?"batch_norm_offset":"bias")}),{filters:d,bias:p}}function i(u,l,c,f){var h=r(u,l,c,f,!0),d=h.filters,p=h.bias;return{filters:d,batch_norm_offset:p}}function o(u,l,c){var f=n(u,c+"/depthwise_conv"),h=i(u,l,1,c+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:h}}function a(){var u=i(3,32,3,"mobilenetv1/conv_0"),l=o(32,64,"mobilenetv1/conv_1"),c=o(64,128,"mobilenetv1/conv_2"),f=o(128,128,"mobilenetv1/conv_3"),h=o(128,256,"mobilenetv1/conv_4"),d=o(256,256,"mobilenetv1/conv_5"),p=o(256,512,"mobilenetv1/conv_6"),v=o(512,512,"mobilenetv1/conv_7"),m=o(512,512,"mobilenetv1/conv_8"),g=o(512,512,"mobilenetv1/conv_9"),y=o(512,512,"mobilenetv1/conv_10"),b=o(512,512,"mobilenetv1/conv_11"),_=o(512,1024,"mobilenetv1/conv_12"),x=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:h,conv_5:d,conv_6:p,conv_7:v,conv_8:m,conv_9:g,conv_10:y,conv_11:b,conv_12:_,conv_13:x}}function s(){var u=i(1024,256,1,"prediction_layer/conv_0"),l=i(256,512,3,"prediction_layer/conv_1"),c=i(512,128,1,"prediction_layer/conv_2"),f=i(128,256,3,"prediction_layer/conv_3"),h=i(256,128,1,"prediction_layer/conv_4"),d=i(128,256,3,"prediction_layer/conv_5"),p=i(256,64,1,"prediction_layer/conv_6"),v=i(64,128,3,"prediction_layer/conv_7"),m=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),g=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),y=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),b=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),_=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),x=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),C=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),A=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),T=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),P=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),R={box_encoding_predictor:m,class_predictor:g},I={box_encoding_predictor:y,class_predictor:b},M={box_encoding_predictor:_,class_predictor:x},B={box_encoding_predictor:S,class_predictor:E},z={box_encoding_predictor:C,class_predictor:A},U={box_encoding_predictor:T,class_predictor:P};return{conv_0:u,conv_1:l,conv_2:c,conv_3:f,conv_4:h,conv_5:d,conv_6:p,conv_7:v,box_predictor_0:R,box_predictor_1:I,box_predictor_2:M,box_predictor_3:B,box_predictor_4:z,box_predictor_5:U}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:s}}function zye(t){var e=[],n=ps(t),r=n.extractWeights,i=n.getRemainingWeights,o=Wye(r,e),a=o.extractMobilenetV1Params,s=o.extractPredictionLayerParams,u=a(),l=s(),c=dP(r(5118*4),[1,5118,4]),f={extra_dim:c};if(e.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:f},paramMappings:e}}function Hye(t,e){var n=Ru(t,e);function r(l,c,f){var h=n(l+"/Conv2d_"+c+"_pointwise/weights",4,f+"/filters"),d=n(l+"/Conv2d_"+c+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:h,batch_norm_offset:d}}function i(l){var c="mobilenetv1/conv_"+l,f="MobilenetV1/Conv2d_"+l+"_depthwise",h=c+"/depthwise_conv",d=c+"/pointwise_conv",p=n(f+"/depthwise_weights",4,h+"/filters"),v=n(f+"/BatchNorm/gamma",1,h+"/batch_norm_scale"),m=n(f+"/BatchNorm/beta",1,h+"/batch_norm_offset"),g=n(f+"/BatchNorm/moving_mean",1,h+"/batch_norm_mean"),y=n(f+"/BatchNorm/moving_variance",1,h+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:v,batch_norm_offset:m,batch_norm_mean:g,batch_norm_variance:y},pointwise_conv:r("MobilenetV1",l,d)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function a(l,c){var f=n(l+"/weights",4,c+"/filters"),h=n(l+"/biases",1,c+"/bias");return{filters:f,bias:h}}function s(l){var c=a("Prediction/BoxPredictor_"+l+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+l+"/box_encoding_predictor"),f=a("Prediction/BoxPredictor_"+l+"/ClassPredictor","prediction_layer/box_predictor_"+l+"/class_predictor");return{box_encoding_predictor:c,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function Gye(t){var e=[],n=Hye(t,e),r=n.extractMobilenetV1Params,i=n.extractPredictionLayerParams,o=t["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Iw(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var a={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return ds(t,e),{params:a,paramMappings:e}}function Wo(t,e,n){return we(function(){var r=Zi(t,e.filters,n,"same");return r=Je(r,e.batch_norm_offset),EP(r,0,6)})}var qye=.0010000000474974513;function Kye(t,e,n){return we(function(){var r=Tw(t,e.filters,n,"same");return r=ez(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,qye),EP(r,0,6)})}function Xye(t){return[2,4,6,12].some(function(e){return e===t})?[2,2]:[1,1]}function Yye(t,e){return we(function(){var n=null,r=Wo(t,e.conv_0,[2,2]),i=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(i.forEach(function(o,a){var s=a+1,u=Xye(s);r=Kye(r,o.depthwise_conv,u),r=Wo(r,o.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function Jye(t,e,n,r,i){var o=t.shape[0],a=Math.min(n,o),s=e.map(function(c,f){return{score:c,boxIndex:f}}).filter(function(c){return c.score>i}).sort(function(c,f){return f.score-c.score}),u=function(c){return c<=r?1:0},l=[];return s.forEach(function(c){if(!(l.length>=a)){for(var f=c.score,h=l.length-1;h>=0;--h){var d=Qye(t,c.boxIndex,l[h]);if(d!==0&&(c.score*=u(d),c.score<=i))break}f===c.score&&l.push(c.boxIndex)}}),l}function Qye(t,e,n){var r=t.arraySync(),i=Math.min(r[e][0],r[e][2]),o=Math.min(r[e][1],r[e][3]),a=Math.max(r[e][0],r[e][2]),s=Math.max(r[e][1],r[e][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),h=(a-i)*(s-o),d=(c-u)*(f-l);if(h<=0||d<=0)return 0;var p=Math.max(i,u),v=Math.max(o,l),m=Math.min(a,c),g=Math.min(s,f),y=Math.max(m-p,0)*Math.max(g-v,0);return y/(h+d-y)}function Zye(t){var e=Fn(_u(t,[1,0])),n=[Un(e[2],e[0]),Un(e[3],e[1])],r=[Je(e[0],xo(n[0],me(2))),Je(e[1],xo(n[1],me(2)))];return{sizes:n,centers:r}}function e0e(t,e){var n=Zye(t),r=n.sizes,i=n.centers,o=Fn(_u(e,[1,0])),a=xo(Tr(yC(xo(o[2],me(5))),r[0]),me(2)),s=Je(Tr(xo(o[0],me(10)),r[0]),i[0]),u=xo(Tr(yC(xo(o[3],me(5))),r[1]),me(2)),l=Je(Tr(xo(o[1],me(10)),r[1]),i[1]);return _u(Ci([Un(s,a),Un(l,u),Je(s,a),Je(l,u)]),[1,0])}function t0e(t,e,n){return we(function(){var r=t.shape[0],i=e0e(Eo(bf(n.extra_dim,[r,1,1]),[-1,4]),Eo(t,[-1,4]));i=Eo(i,[r,i.shape[0]/r,4]);var o=Y6(ya(e,[0,0,1],[-1,-1,-1])),a=ya(o,[0,0,0],[-1,-1,1]);a=Eo(a,[r,a.shape[1]]);var s=Fn(i),u=Fn(a);return{boxes:s,scores:u}})}function _c(t,e){return we(function(){var n=t.shape[0],r=Eo(To(t,e.box_encoding_predictor),[n,-1,1,4]),i=Eo(To(t,e.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function n0e(t,e,n){return we(function(){var r=Wo(t,n.conv_0,[1,1]),i=Wo(r,n.conv_1,[2,2]),o=Wo(i,n.conv_2,[1,1]),a=Wo(o,n.conv_3,[2,2]),s=Wo(a,n.conv_4,[1,1]),u=Wo(s,n.conv_5,[2,2]),l=Wo(u,n.conv_6,[1,1]),c=Wo(l,n.conv_7,[2,2]),f=_c(e,n.box_predictor_0),h=_c(t,n.box_predictor_1),d=_c(i,n.box_predictor_2),p=_c(a,n.box_predictor_3),v=_c(u,n.box_predictor_4),m=_c(c,n.box_predictor_5),g=Ln([f.boxPredictionEncoding,h.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding],1),y=Ln([f.classPrediction,h.classPrediction,d.classPrediction,p.classPrediction,v.classPrediction,m.classPrediction],1);return{boxPredictions:g,classPredictions:y}})}var $w=function(){function t(e){var n=e===void 0?{}:e,r=n.minConfidence,i=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(t.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),t}(),sH=function(t){Be(e,t);function e(){return t.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return we(function(){var i=n.toBatchTensor(512,!1).toFloat(),o=Un(Tr(i,me(.007843137718737125)),me(1)),a=Yye(o,r.mobilenetv1),s=n0e(a.out,a.conv11,r.prediction_layer),u=s.boxPredictions,l=s.classPredictions;return t0e(u,l,r.output_layer)})},e.prototype.forward=function(n){return Pe(this,void 0,void 0,function(){var r;return Oe(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Qn(n)];case 1:return[2,r.apply(this,[i.sent()])]}})})},e.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,_,x,S,E,C;return Oe(this,function(A){switch(A.label){case 0:return i=new $w(r),o=i.maxResults,a=i.minConfidence,[4,Qn(n)];case 1:for(s=A.sent(),u=this.forwardInput(s),l=u.boxes,c=u.scores,f=l[0],h=c[0],d=1;d<l.length;d++)l[d].dispose(),c[d].dispose();return m=(v=Array).from,[4,h.data()];case 2:return p=m.apply(v,[A.sent()]),g=.5,y=Jye(f,p,o,g,a),b=s.getReshapedInputDimensions(0),_=s.inputSize,x=_/b.width,S=_/b.height,E=f.arraySync(),C=y.map(function(T){var P=[Math.max(0,E[T][0]),Math.min(1,E[T][2])].map(function(U){return U*S}),R=P[0],I=P[1],M=[Math.max(0,E[T][1]),Math.min(1,E[T][3])].map(function(U){return U*x}),B=M[0],z=M[1];return new Ea(p[T],new UP(B,R,z-B,I-R),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),h.dispose(),[2,C]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(n){return Gye(n)},e.prototype.extractParams=function(n){return zye(n)},e}(hs);(function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(sH);var r0e=.4,i0e=[new pt(.738768,.874946),new pt(2.42204,2.65704),new pt(4.30971,7.04493),new pt(10.246,4.59428),new pt(12.6868,11.8741)],o0e=[new pt(1.603231,2.094468),new pt(6.041143,7.080126),new pt(2.882459,3.518061),new pt(4.266906,5.178857),new pt(9.041765,10.66308)],a0e=[117.001,114.697,97.404],s0e="tiny_yolov2_model",u0e="tiny_yolov2_separable_conv_model",Og=function(t){return typeof t=="number"};function l0e(t){if(!t)throw new Error("invalid config: "+t);if(typeof t.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+t.withSeparableConvs);if(!Og(t.iouThreshold)||t.iouThreshold<0||t.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+t.iouThreshold);if(!Array.isArray(t.classes)||!t.classes.length||!t.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(t.classes));if(!Array.isArray(t.anchors)||!t.anchors.length||!t.anchors.map(function(e){return e||{}}).every(function(e){return Og(e.x)&&Og(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(t.anchors));if(t.meanRgb&&(!Array.isArray(t.meanRgb)||t.meanRgb.length!==3||!t.meanRgb.every(Og)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(t.meanRgb))}function QP(t){return we(function(){var e=Tr(t,me(.10000000149011612));return Je(en(Un(t,e)),e)})}function Ps(t,e){return we(function(){var n=Zl(t,[[0,0],[1,1],[1,1],[0,0]]);return n=Zi(n,e.conv.filters,[1,1],"valid"),n=Un(n,e.bn.sub),n=Tr(n,e.bn.truediv),n=Je(n,e.conv.bias),QP(n)})}function Os(t,e){return we(function(){var n=Zl(t,[[0,0],[1,1],[1,1],[0,0]]);return n=PP(n,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),n=Je(n,e.bias),QP(n)})}function c0e(t,e){var n=Mw(t,e);function r(a,s){var u=Sn(t(a)),l=Sn(t(a));return e.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:l}}function i(a,s,u){var l=n(a,s,3,u+"/conv"),c=r(s,u+"/bn");return{conv:l,bn:c}}var o=KP(t,e);return{extractConvParams:n,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function f0e(t,e,n,r){var i=ps(t),o=i.extractWeights,a=i.getRemainingWeights,s=[],u=c0e(o,s),l=u.extractConvParams,c=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,h;if(e.withSeparableConvs){var d=r[0],p=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],_=r[7],x=r[8],S=e.isFirstLayerConv2d?l(d,p,3,"conv0"):f(d,p,"conv0"),E=f(p,v,"conv1"),C=f(v,m,"conv2"),A=f(m,g,"conv3"),T=f(g,y,"conv4"),P=f(y,b,"conv5"),R=_?f(b,_,"conv6"):void 0,I=x?f(_,x,"conv7"):void 0,M=l(x||_||b,5*n,1,"conv8");h={conv0:S,conv1:E,conv2:C,conv3:A,conv4:T,conv5:P,conv6:R,conv7:I,conv8:M}}else{var d=r[0],p=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],_=r[7],x=r[8],S=c(d,p,"conv0"),E=c(p,v,"conv1"),C=c(v,m,"conv2"),A=c(m,g,"conv3"),T=c(g,y,"conv4"),P=c(y,b,"conv5"),R=c(b,_,"conv6"),I=c(_,x,"conv7"),M=l(x,5*n,1,"conv8");h={conv0:S,conv1:E,conv2:C,conv3:A,conv4:T,conv5:P,conv6:R,conv7:I,conv8:M}}if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:h,paramMappings:s}}function h0e(t,e){var n=Ru(t,e);function r(s){var u=n(s+"/sub",1),l=n(s+"/truediv",1);return{sub:u,truediv:l}}function i(s){var u=n(s+"/filters",4),l=n(s+"/bias",1);return{filters:u,bias:l}}function o(s){var u=i(s+"/conv"),l=r(s+"/bn");return{conv:u,bn:l}}var a=XP(n);return{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function d0e(t,e){var n=[],r=h0e(t,n),i=r.extractConvParams,o=r.extractConvWithBatchNormParams,a=r.extractSeparableConvParams,s;if(e.withSeparableConvs){var u=e.filterSizes&&e.filterSizes.length||9;s={conv0:e.isFirstLayerConv2d?i("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:u>7?a("conv6"):void 0,conv7:u>8?a("conv7"):void 0,conv8:i("conv8")}}else s={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return ds(t,n),{params:s,paramMappings:n}}var g$;(function(t){t[t.XS=224]="XS",t[t.SM=320]="SM",t[t.MD=416]="MD",t[t.LG=608]="LG"})(g$||(g$={}));var ZP=function(){function t(e){var n=e===void 0?{}:e,r=n.inputSize,i=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(t.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),t}(),uH=function(t){Be(e,t);function e(n){var r=t.call(this,"TinyYolov2")||this;return l0e(n),r._config=n,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(n,r){var i=Ps(n,r.conv0);return i=Hn(i,[2,2],[2,2],"same"),i=Ps(i,r.conv1),i=Hn(i,[2,2],[2,2],"same"),i=Ps(i,r.conv2),i=Hn(i,[2,2],[2,2],"same"),i=Ps(i,r.conv3),i=Hn(i,[2,2],[2,2],"same"),i=Ps(i,r.conv4),i=Hn(i,[2,2],[2,2],"same"),i=Ps(i,r.conv5),i=Hn(i,[2,2],[1,1],"same"),i=Ps(i,r.conv6),i=Ps(i,r.conv7),To(i,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(n,r){var i=this.config.isFirstLayerConv2d?QP(To(n,r.conv0,"valid",!1)):Os(n,r.conv0);return i=Hn(i,[2,2],[2,2],"same"),i=Os(i,r.conv1),i=Hn(i,[2,2],[2,2],"same"),i=Os(i,r.conv2),i=Hn(i,[2,2],[2,2],"same"),i=Os(i,r.conv3),i=Hn(i,[2,2],[2,2],"same"),i=Os(i,r.conv4),i=Hn(i,[2,2],[2,2],"same"),i=Os(i,r.conv5),i=Hn(i,[2,2],[1,1],"same"),i=r.conv6?Os(i,r.conv6):i,i=r.conv7?Os(i,r.conv7):i,To(i,r.conv8,"valid",!1)},e.prototype.forwardInput=function(n,r){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return we(function(){var a=n.toBatchTensor(r,!1).toFloat();return a=i.config.meanRgb?mm(a,i.config.meanRgb):a,a=a.div(me(256)),i.config.withSeparableConvs?i.runMobilenet(a,o):i.runTinyYolov2(a,o)})},e.prototype.forward=function(n,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Qn(n)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},e.prototype.detect=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h,d,p,v,m,g,y=this;return Oe(this,function(b){switch(b.label){case 0:return i=new ZP(r),o=i.inputSize,a=i.scoreThreshold,[4,Qn(n)];case 1:return s=b.sent(),[4,this.forwardInput(s,o)];case 2:return u=b.sent(),l=we(function(){return Fn(u)[0].expandDims()}),c={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(l,s.getReshapedInputDimensions(0),a)];case 3:return f=b.sent(),u.dispose(),l.dispose(),h=f.map(function(_){return _.box}),d=f.map(function(_){return _.score}),p=f.map(function(_){return _.classScore}),v=f.map(function(_){return y.config.classes[_.label]}),m=sv(h.map(function(_){return _.rescale(o)}),d,this.config.iouThreshold,!0),g=m.map(function(_){return new Nz(d[_],p[_],v[_],h[_],c)}),[2,g]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(n){return d0e(n,this.config)},e.prototype.extractParams=function(n){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return f0e(n,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(n,r,i){return Pe(this,void 0,void 0,function(){var o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,_,x,S,E,C,A,T,P,R,I,M,B,z,U,$=this;return Oe(this,function(L){switch(L.label){case 0:return o=r.width,a=r.height,s=Math.max(o,a),u=s/o,l=s/a,c=n.shape[1],f=this.config.anchors.length,h=we(function(){var H=n.reshape([c,c,f,$.boxEncodingSize]),X=H.slice([0,0,0,0],[c,c,f,4]),q=H.slice([0,0,0,4],[c,c,f,1]),J=$.withClassScores?cs(H.slice([0,0,0,5],[c,c,f,$.config.classes.length]),3):me(0);return[X,q,J]}),d=h[0],p=h[1],v=h[2],m=[],[4,p.array()];case 1:return g=L.sent(),[4,d.array()];case 2:y=L.sent(),b=0,L.label=3;case 3:if(!(b<c))return[3,12];_=0,L.label=4;case 4:if(!(_<c))return[3,11];x=0,L.label=5;case 5:return x<f?(S=R_(g[b][_][x][0]),!i||S>i?(E=(_+R_(y[b][_][x][0]))/c*u,C=(b+R_(y[b][_][x][1]))/c*l,A=Math.exp(y[b][_][x][2])*this.config.anchors[x].x/c*u,T=Math.exp(y[b][_][x][3])*this.config.anchors[x].y/c*l,P=E-A/2,R=C-T/2,I={row:b,col:_,anchor:x},this.withClassScores?[4,this.extractPredictedClass(v,I)]:[3,7]):[3,9]):[3,10];case 6:return U=L.sent(),[3,8];case 7:U={classScore:1,label:0},L.label=8;case 8:M=U,B=M.classScore,z=M.label,m.push(xr({box:new Dw(P,R,P+A,R+T),score:S,classScore:S*B,label:z},I)),L.label=9;case 9:return x++,[3,5];case 10:return _++,[3,4];case 11:return b++,[3,3];case 12:return d.dispose(),p.dispose(),v.dispose(),[2,m]}})})},e.prototype.extractPredictedClass=function(n,r){return Pe(this,void 0,void 0,function(){var i,o,a,s;return Oe(this,function(u){switch(u.label){case 0:return i=r.row,o=r.col,a=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(l,c){return s[i][o][a][c]}).map(function(l,c){return{classScore:l,label:c}}).reduce(function(l,c){return l.classScore>c.classScore?l:c})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e}(hs),p0e=function(t){Be(e,t);function e(n){n===void 0&&(n=!0);var r=this,i=Object.assign({},{withSeparableConvs:n,iouThreshold:r0e,classes:["face"]},n?{anchors:o0e,meanRgb:a0e}:{anchors:i0e,withClassScores:!0});return r=t.call(this,i)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return[4,this.detect(n,r)];case 1:return i=o.sent(),[2,i.map(function(a){return new Ea(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?u0e:s0e},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(uH),lH=function(t){Be(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return e}(ZP),gm=function(){function t(){}return t.prototype.then=function(e){return Pe(this,void 0,void 0,function(){var n;return Oe(this,function(r){switch(r.label){case 0:return n=e,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},t.prototype.run=function(){return Pe(this,void 0,void 0,function(){return Oe(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},t}();function jw(t,e,n,r,i){return i===void 0&&(i=function(o){var a=o.alignedRect;return a}),Pe(this,void 0,void 0,function(){var o,a,s,u,l;return Oe(this,function(c){switch(c.label){case 0:return o=t.map(function(f){return _ye(f)?i(f):f.detection}),s=r,s?[3,5]:e instanceof Qt?[4,GP(e,o)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,HP(e,o)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return a=s,[4,n(a)];case 6:return l=c.sent(),a.forEach(function(f){return f instanceof Qt&&f.dispose()}),[2,l]}})})}function eO(t,e,n,r,i){return Pe(this,void 0,void 0,function(){var o=this;return Oe(this,function(a){return[2,jw([t],e,function(s){return Pe(o,void 0,void 0,function(){return Oe(this,function(u){return[2,n(s[0])]})})},r,i)]})})}function v0e(t){return we(function(){return Ci(Fn(t,3).reverse(),3)})}var kg=2,N0=12;function m0e(t,e){var n=Mw(t,e),r=qP(t,e);function i(l,c){var f=Sn(t(l));return e.push({paramPath:c}),f}function o(l,c,f){f===void 0&&(f=!1);var h=n(l[0],l[1],3,c+"/conv1"),d=i(l[1],c+"/prelu1_alpha"),p=n(l[1],l[2],3,c+"/conv2"),v=i(l[2],c+"/prelu2_alpha"),m=n(l[2],l[3],f?2:3,c+"/conv3"),g=i(l[3],c+"/prelu3_alpha");return{conv1:h,prelu1_alpha:d,conv2:p,prelu2_alpha:v,conv3:m,prelu3_alpha:g}}function a(){var l=o([3,10,16,32],"pnet"),c=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return xr(xr({},l),{conv4_1:c,conv4_2:f})}function s(){var l=o([3,28,48,64],"rnet",!0),c=r(576,128,"rnet/fc1"),f=i(128,"rnet/prelu4_alpha"),h=r(128,2,"rnet/fc2_1"),d=r(128,4,"rnet/fc2_2");return xr(xr({},l),{fc1:c,prelu4_alpha:f,fc2_1:h,fc2_2:d})}function u(){var l=o([3,32,64,64],"onet"),c=n(64,128,2,"onet/conv4"),f=i(128,"onet/prelu4_alpha"),h=r(1152,256,"onet/fc1"),d=i(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),v=r(256,4,"onet/fc2_2"),m=r(256,10,"onet/fc2_3");return xr(xr({},l),{conv4:c,prelu4_alpha:f,fc1:h,prelu5_alpha:d,fc2_1:p,fc2_2:v,fc2_3:m})}return{extractPNetParams:a,extractRNetParams:s,extractONetParams:u}}function g0e(t){var e=ps(t),n=e.extractWeights,r=e.getRemainingWeights,i=[],o=m0e(n,i),a=o.extractPNetParams,s=o.extractRNetParams,u=o.extractONetParams,l=a(),c=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:f},paramMappings:i}}function y0e(t,e){var n=Ru(t,e);function r(c){var f=n(c+"/weights",4,c+"/filters"),h=n(c+"/bias",1);return{filters:f,bias:h}}function i(c){var f=n(c+"/weights",2),h=n(c+"/bias",1);return{weights:f,bias:h}}function o(c){return n(c,1)}function a(c){var f=r(c+"/conv1"),h=o(c+"/prelu1_alpha"),d=r(c+"/conv2"),p=o(c+"/prelu2_alpha"),v=r(c+"/conv3"),m=o(c+"/prelu3_alpha");return{conv1:f,prelu1_alpha:h,conv2:d,prelu2_alpha:p,conv3:v,prelu3_alpha:m}}function s(){var c=a("pnet"),f=r("pnet/conv4_1"),h=r("pnet/conv4_2");return xr(xr({},c),{conv4_1:f,conv4_2:h})}function u(){var c=a("rnet"),f=i("rnet/fc1"),h=o("rnet/prelu4_alpha"),d=i("rnet/fc2_1"),p=i("rnet/fc2_2");return xr(xr({},c),{fc1:f,prelu4_alpha:h,fc2_1:d,fc2_2:p})}function l(){var c=a("onet"),f=r("onet/conv4"),h=o("onet/prelu4_alpha"),d=i("onet/fc1"),p=o("onet/prelu5_alpha"),v=i("onet/fc2_1"),m=i("onet/fc2_2"),g=i("onet/fc2_3");return xr(xr({},c),{conv4:f,prelu4_alpha:h,fc1:d,prelu5_alpha:p,fc2_1:v,fc2_2:m,fc2_3:g})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function b0e(t){var e=[],n=y0e(t,e),r=n.extractPNetParams,i=n.extractRNetParams,o=n.extractONetParams,a=r(),s=i(),u=o();return ds(t,e),{params:{pnet:a,rnet:s,onet:u},paramMappings:e}}function AC(t,e){var n=e[0],r=e[1];return{height:Math.floor(n*t),width:Math.floor(r*t)}}function w0e(t,e,n){for(var r=n[0],i=n[1],o=N0/t,a=[],s=Math.min(r,i)*o,u=0;s>=12;)a.push(o*Math.pow(e,u)),s=s*e,u+=1;return a}var tO=function(t){Be(e,t);function e(n,r,i,o){return t.call(this,{left:n,top:r,right:i,bottom:o},!0)||this}return e}(Su);function cH(t){return we(function(){return Tr(Un(t,me(127.5)),me(.0078125))})}function Cf(t,e){return we(function(){return Je(en(t),Tr(e,T0(en(T0(t)))))})}function nO(t,e,n){return n===void 0&&(n=!1),we(function(){var r=To(t,e.conv1,"valid");return r=Cf(r,e.prelu1_alpha),r=Hn(r,n?[2,2]:[3,3],[2,2],"same"),r=To(r,e.conv2,"valid"),r=Cf(r,e.prelu2_alpha),r=n?r:Hn(r,[3,3],[2,2],"valid"),r=To(r,e.conv3,"valid"),r=Cf(r,e.prelu3_alpha),r})}function x0e(t,e){return we(function(){var n=nO(t,e,!0),r=To(n,e.conv4_1,"valid"),i=Bi(Ow(r,3),3),o=cs(Un(r,i),3),a=To(n,e.conv4_2,"valid");return{prob:o,regions:a}})}function _0e(t,e){return we(function(){var n=AC(e,t.shape.slice(1)),r=n.height,i=n.width,o=DP.resizeBilinear(t,[r,i]),a=cH(o);return _u(a,[0,2,1,3])})}function S0e(t,e,n,r){for(var i=[],o=t.arraySync(),a=0;a<t.shape[0];a++)for(var s=0;s<t.shape[1];s++)o[a][s]>=r&&i.push(new pt(s,a));var u=i.map(function(l){var c=new Dw(Math.round((l.y*kg+1)/n),Math.round((l.x*kg+1)/n),Math.round((l.y*kg+N0)/n),Math.round((l.x*kg+N0)/n)),f=o[l.y][l.x],h=e.arraySync(),d=new tO(h[l.y][l.x][0],h[l.y][l.x][1],h[l.y][l.x][2],h[l.y][l.x][3]);return{cell:c,score:f,region:d}});return u}function E0e(t,e,n,r,i){i.stage1=[];var o=e.map(function(h){return we(function(){var d={scale:h},p=_0e(t,h),v=Date.now(),m=x0e(p,r),g=m.prob,y=m.regions;d.pnet=Date.now()-v;var b=Fn(Fn(g,3)[1])[0],_=Fn(y)[0];return{scoresTensor:b,regionsTensor:_,scale:h,statsForScale:d}})}),a=o.map(function(h){var d=h.scoresTensor,p=h.regionsTensor,v=h.scale,m=h.statsForScale,g=S0e(d,p,v,n);if(d.dispose(),p.dispose(),!g.length)return i.stage1.push(m),[];var y=Date.now(),b=sv(g.map(function(_){return _.cell}),g.map(function(_){return _.score}),.5);return m.nms=Date.now()-y,m.numBoxes=b.length,i.stage1.push(m),b.map(function(_){return g[_]})}),s=a.reduce(function(h,d){return h.concat(d)},[]),u=[],l=[];if(s.length>0){var c=Date.now(),f=sv(s.map(function(h){return h.cell}),s.map(function(h){return h.score}),.7);i.stage1_nms=Date.now()-c,l=f.map(function(h){return s[h].score}),u=f.map(function(h){return s[h]}).map(function(h){var d=h.cell,p=h.region;return new Dw(d.left+p.left*d.width,d.top+p.top*d.height,d.right+p.right*d.width,d.bottom+p.bottom*d.height).toSquare().round()})}return{boxes:u,scores:l}}function fH(t,e,n){var r=n.width,i=n.height;return Pe(this,void 0,void 0,function(){var o,a,s,u=this;return Oe(this,function(l){switch(l.label){case 0:return o=zl(t),[4,Promise.all(e.map(function(c){return Pe(u,void 0,void 0,function(){var f,h,d,p,v,m,g,y;return Oe(this,function(b){return f=c.padAtBorders(t.height,t.width),h=f.y,d=f.ey,p=f.x,v=f.ex,m=p-1,g=h-1,y=o.getImageData(m,g,v-m,d-g),[2,Or.isNodejs()?zP(y):createImageBitmap(y)]})})}))];case 1:return a=l.sent(),s=[],a.forEach(function(c){var f=Nw({width:r,height:i}),h=zl(f);h.drawImage(c,0,0,r,i);for(var d=h.getImageData(0,0,r,i).data,p=[],v=0;v<d.length;v+=4)p.push(d[v+2]),p.push(d[v+1]),p.push(d[v]);s.push(p)}),[2,s.map(function(c){var f=we(function(){var h=_u(qr(c,[1,r,i,3]),[0,2,1,3]).toFloat();return cH(h)});return f})]}})})}function C0e(t,e){return we(function(){var n=nO(t,e),r=Eo(n,[n.shape[0],e.fc1.weights.shape[0]]),i=ra(r,e.fc1),o=Cf(i,e.prelu4_alpha),a=ra(o,e.fc2_1),s=Bi(Ow(a,1),1),u=cs(Un(a,s),1),l=ra(o,e.fc2_2),c=Fn(u,1)[1];return{scores:c,regions:l}})}function A0e(t,e,n,r,i){return Pe(this,void 0,void 0,function(){var o,a,s,u,l,c,f,h,d,p,v,m,g,y;return Oe(this,function(b){switch(b.label){case 0:return o=Date.now(),[4,fH(t,e,{width:24,height:24})];case 1:return a=b.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(_){var x=C0e(_,r);return _.dispose(),x}),i.stage2_rnet=Date.now()-o,u=s.length>1?Ln(s.map(function(_){return _.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[b.sent()]),u.dispose(),h=l.map(function(_,x){return{score:_,idx:x}}).filter(function(_){return _.score>n}).map(function(_){var x=_.idx;return x}),d=h.map(function(_){return e[_]}),p=h.map(function(_){return l[_]}),v=[],m=[],d.length>0&&(o=Date.now(),g=sv(d,p,.7),i.stage2_nms=Date.now()-o,y=g.map(function(_){var x=s[h[_]].regions.arraySync();return new tO(x[0][0],x[0][1],x[0][2],x[0][3])}),m=g.map(function(_){return p[_]}),v=g.map(function(_,x){return d[_].calibrate(y[x])})),s.forEach(function(_){_.regions.dispose(),_.scores.dispose()}),[2,{boxes:v,scores:m}]}})})}function T0e(t,e){return we(function(){var n=nO(t,e);n=Hn(n,[2,2],[2,2],"same"),n=To(n,e.conv4,"valid"),n=Cf(n,e.prelu4_alpha);var r=Eo(n,[n.shape[0],e.fc1.weights.shape[0]]),i=ra(r,e.fc1),o=Cf(i,e.prelu5_alpha),a=ra(o,e.fc2_1),s=Bi(Ow(a,1),1),u=cs(Un(a,s),1),l=ra(o,e.fc2_2),c=ra(o,e.fc2_3),f=Fn(u,1)[1];return{scores:f,regions:l,points:c}})}function P0e(t,e,n,r,i){return Pe(this,void 0,void 0,function(){var o,a,s,u,l,c,f,h,d,p,v,m,g,y,b;return Oe(this,function(_){switch(_.label){case 0:return o=Date.now(),[4,fH(t,e,{width:48,height:48})];case 1:return a=_.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),s=a.map(function(x){var S=T0e(x,r);return x.dispose(),S}),i.stage3_onet=Date.now()-o,u=s.length>1?Ln(s.map(function(x){return x.scores})):s[0].scores,f=(c=Array).from,[4,u.data()];case 2:return l=f.apply(c,[_.sent()]),u.dispose(),h=l.map(function(x,S){return{score:x,idx:S}}).filter(function(x){return x.score>n}).map(function(x){var S=x.idx;return S}),d=h.map(function(x){var S=s[x].regions.arraySync();return new tO(S[0][0],S[0][1],S[0][2],S[0][3])}),p=h.map(function(x,S){return e[x].calibrate(d[S])}),v=h.map(function(x){return l[x]}),m=[],g=[],y=[],p.length>0&&(o=Date.now(),b=sv(p,v,.7,!1),i.stage3_nms=Date.now()-o,m=b.map(function(x){return p[x]}),g=b.map(function(x){return v[x]}),y=b.map(function(x,S){return Array(5).fill(0).map(function(E,C){var A=s[x].points.arraySync();return new pt(A[0][C]*(m[S].width+1)+m[S].left,A[0][C+5]*(m[S].height+1)+m[S].top)})})),s.forEach(function(x){x.regions.dispose(),x.scores.dispose(),x.points.dispose()}),[2,{boxes:m,scores:g,points:y}]}})})}var O0e=function(t){Be(e,t);function e(){return t.call(this,"Mtcnn")||this}return e.prototype.load=function(n){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.load.call(this,n)]})})},e.prototype.loadFromDisk=function(n){return Pe(this,void 0,void 0,function(){return Oe(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,t.prototype.loadFromDisk.call(this,n)]})})},e.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i,o,a,s,u,l,c,f,h,d,p,v,m,g,y,b,_,x,S,E,C;return Oe(this,function(A){switch(A.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(o=n.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},s=Date.now(),u=we(function(){return v0e(Bi(FP.fromPixels(o)).toFloat())}),l=function(T){return u.dispose(),a.total=Date.now()-s,T},c=u.shape.slice(1),f=c[0],h=c[1],d=new aH(r),p=d.minFaceSize,v=d.scaleFactor,m=d.maxNumScales,g=d.scoreThresholds,y=d.scaleSteps,b=(y||w0e(p,v,[f,h])).filter(function(T){var P=AC(T,[f,h]);return Math.min(P.width,P.height)>N0}).slice(0,m),a.scales=b,a.pyramid=b.map(function(T){return AC(T,[f,h])}),_=Date.now(),[4,E0e(u,b,g[0],i.pnet,a)];case 1:return x=A.sent(),a.total_stage1=Date.now()-_,x.boxes.length?(a.stage2_numInputBoxes=x.boxes.length,_=Date.now(),[4,A0e(o,x.boxes,g[1],i.rnet,a)]):[2,l({results:[],stats:a})];case 2:return S=A.sent(),a.total_stage2=Date.now()-_,S.boxes.length?(a.stage3_numInputBoxes=S.boxes.length,_=Date.now(),[4,P0e(o,S.boxes,g[2],i.onet,a)]):[2,l({results:[],stats:a})];case 3:return E=A.sent(),a.total_stage3=Date.now()-_,C=E.boxes.map(function(T,P){return YP(VP({},new Ea(E.scores[P],new UP(T.left/h,T.top/f,T.width/h,T.height/f),{height:f,width:h})),new oye(E.points[P].map(function(R){return R.sub(new pt(T.left,T.top)).div(new pt(T.width,T.height))}),{width:T.width,height:T.height}))}),[2,l({results:C,stats:a})]}})})},e.prototype.forward=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Qn(n)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},e.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Qn(n)];case 1:return[2,i.apply(this,[o.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(n){return b0e(n)},e.prototype.extractParams=function(n){return g0e(n)},e}(hs),k0e=.4,R0e=[new pt(1.603231,2.094468),new pt(6.041143,7.080126),new pt(2.882459,3.518061),new pt(4.266906,5.178857),new pt(9.041765,10.66308)],I0e=[117.001,114.697,97.404],D0e=function(t){Be(e,t);function e(){var n=this,r={withSeparableConvs:!0,iouThreshold:k0e,classes:["face"],anchors:R0e,meanRgb:I0e,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=t.call(this,r)||this,n}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(n,r){return Pe(this,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return[4,this.detect(n,r)];case 1:return i=o.sent(),[2,i.map(function(a){return new Ea(a.score,a.relativeBox,{width:a.imageWidth,height:a.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(n){return t.prototype.extractParamsFromWeigthMap.call(this,n)},e}(uH),Yr={ssdMobilenetv1:new sH,tinyFaceDetector:new D0e,tinyYolov2:new p0e,mtcnn:new O0e,faceLandmark68Net:new eH,faceLandmark68TinyNet:new Mye,faceRecognitionNet:new Vye,faceExpressionNet:new xye,ageGenderNet:new Rye},hH=function(t){Be(e,t);function e(n,r,i){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o.extractedFaces=i,o}return e}(gm),rO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i=this;return Oe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,jw(n,this.input,function(a){return Pe(i,void 0,void 0,function(){return Oe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return Yr.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,n.map(function(a,s){return Jz(a,r[s])})]}})})},e.prototype.withAgeAndGender=function(){return new sO(this,this.input)},e}(hH),iO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,eO(n,this.input,function(o){return Yr.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,Jz(n,r)]}})})},e.prototype.withAgeAndGender=function(){return new uO(this,this.input)},e}(hH),oO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new lO(this,this.input)},e.prototype.withFaceDescriptors=function(){return new fO(this,this.input)},e}(rO),aO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new cO(this,this.input)},e.prototype.withFaceDescriptor=function(){return new hO(this,this.input)},e}(iO),dH=function(t){Be(e,t);function e(n,r,i){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o.extractedFaces=i,o}return e}(gm),sO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i=this;return Oe(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,jw(n,this.input,function(a){return Pe(i,void 0,void 0,function(){return Oe(this,function(s){switch(s.label){case 0:return[4,Promise.all(a.map(function(u){return Yr.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,n.map(function(a,s){var u=r[s],l=u.age,c=u.gender,f=u.genderProbability;return iH(oH(a,c,f),l)})]}})})},e.prototype.withFaceExpressions=function(){return new rO(this,this.input)},e}(dH),uO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i,o,a;return Oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,eO(n,this.input,function(u){return Yr.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),i=r.age,o=r.gender,a=r.genderProbability,[2,iH(oH(n,o,a),i)]}})})},e.prototype.withFaceExpressions=function(){return new iO(this,this.input)},e}(dH),lO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new oO(this,this.input)},e.prototype.withFaceDescriptors=function(){return new fO(this,this.input)},e}(sO),cO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new aO(this,this.input)},e.prototype.withFaceDescriptor=function(){return new hO(this,this.input)},e}(uO),pH=function(t){Be(e,t);function e(n,r){var i=t.call(this)||this;return i.parentTask=n,i.input=r,i}return e}(gm),fO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),[4,jw(n,this.input,function(o){return Promise.all(o.map(function(a){return Yr.faceRecognitionNet.computeFaceDescriptor(a)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(o,a){return rH(n[a],o)})]}})})},e.prototype.withFaceExpressions=function(){return new oO(this,this.input)},e.prototype.withAgeAndGender=function(){return new lO(this,this.input)},e}(pH),hO=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return n=i.sent(),n?[4,eO(n,this.input,function(o){return Yr.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,rH(n,r)]}})})},e.prototype.withFaceExpressions=function(){return new aO(this,this.input)},e.prototype.withAgeAndGender=function(){return new cO(this,this.input)},e}(pH),vH=function(t){Be(e,t);function e(n,r,i){var o=t.call(this)||this;return o.parentTask=n,o.input=r,o.useTinyLandmarkNet=i,o}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Yr.faceLandmark68TinyNet:Yr.faceLandmark68Net},enumerable:!0,configurable:!0}),e}(gm),N0e=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i,o,a,s=this;return Oe(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(l){return l.detection}),this.input instanceof Qt?[4,GP(this.input,r)]:[3,3];case 2:return o=u.sent(),[3,5];case 3:return[4,HP(this.input,r)];case 4:o=u.sent(),u.label=5;case 5:return i=o,[4,Promise.all(i.map(function(l){return s.landmarkNet.detectLandmarks(l)}))];case 6:return a=u.sent(),i.forEach(function(l){return l instanceof Qt&&l.dispose()}),[2,n.map(function(l,c){return YP(l,a[c])})]}})})},e.prototype.withFaceExpressions=function(){return new oO(this,this.input)},e.prototype.withAgeAndGender=function(){return new lO(this,this.input)},e.prototype.withFaceDescriptors=function(){return new fO(this,this.input)},e}(vH),M0e=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i,o,a;return Oe(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof Qt?[4,GP(this.input,[r])]:[3,3]):[2];case 2:return o=s.sent(),[3,5];case 3:return[4,HP(this.input,[r])];case 4:o=s.sent(),s.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return a=s.sent(),i.forEach(function(u){return u instanceof Qt&&u.dispose()}),[2,YP(n,a)]}})})},e.prototype.withFaceExpressions=function(){return new aO(this,this.input)},e.prototype.withAgeAndGender=function(){return new cO(this,this.input)},e.prototype.withFaceDescriptor=function(){return new hO(this,this.input)},e}(vH),mH=function(t){Be(e,t);function e(n,r){r===void 0&&(r=new $w);var i=t.call(this)||this;return i.input=n,i.options=r,i}return e}(gm),$0e=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r,i,o;return Oe(this,function(a){switch(a.label){case 0:return n=this,r=n.input,i=n.options,i instanceof aH?[4,Yr.mtcnn.forward(r,i)]:[3,2];case 1:return[2,a.sent().map(function(s){return s.detection})];case 2:if(o=i instanceof lH?function(s){return Yr.tinyFaceDetector.locateFaces(s,i)}:i instanceof $w?function(s){return Yr.ssdMobilenetv1.locateFaces(s,i)}:i instanceof ZP?function(s){return Yr.tinyYolov2.locateFaces(s,i)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return Pe(n,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i.map(function(a){return VP({},a)}))]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new N0e(this.runAndExtendWithFaceDetections(),this.input,n)},e.prototype.withFaceExpressions=function(){return new rO(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new sO(this.runAndExtendWithFaceDetections(),this.input)},e}(mH),j0e=function(t){Be(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.run=function(){return Pe(this,void 0,void 0,function(){var n,r;return Oe(this,function(i){switch(i.label){case 0:return[4,new $0e(this.input,this.options)];case 1:return n=i.sent(),r=n[0],n.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return Pe(n,void 0,void 0,function(){var i;return Oe(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i?VP({},i):void 0)]}})})})},e.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new M0e(this.runAndExtendWithFaceDetection(),this.input,n)},e.prototype.withFaceExpressions=function(){return new iO(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new uO(this.runAndExtendWithFaceDetection(),this.input)},e}(mH);function L0e(t,e){return e===void 0&&(e=new $w),new j0e(t,e)}function F0e(t,e){if(t.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(t),r=Array.from(e);return Math.sqrt(n.map(function(i,o){return i-r[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}(function(){function t(e,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=r.map(function(a){if(a instanceof Ag)return a;if(a instanceof Float32Array)return new Ag(o(),[a]);if(a.descriptor&&a.descriptor instanceof Float32Array)return new Ag(o(),[a.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(t.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),t.prototype.computeMeanDistance=function(e,n){return n.map(function(r){return F0e(r,e)}).reduce(function(r,i){return r+i},0)/(n.length||1)},t.prototype.matchDescriptor=function(e){var n=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,o=r.label;return new h$(o,n.computeMeanDistance(e,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},t.prototype.findBestMatch=function(e){var n=this.matchDescriptor(e);return n.distance<this.distanceThreshold?n:new h$("unknown",n.distance)},t.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},t.fromJSON=function(e){var n=e.labeledDescriptors.map(function(r){return Ag.fromJSON(r)});return new t(n,e.distanceThreshold)},t})();const y$={happy:{arabic:"",emoji:""},neutral:{arabic:"",emoji:""},sad:{arabic:"",emoji:""},angry:{arabic:"",emoji:""},surprised:{arabic:"",emoji:""},fearful:{arabic:"",emoji:""},disgusted:{arabic:"",emoji:""}},B0e=()=>{const[t,e]=k.useState(!1),[n,r]=k.useState(!0),[i,o]=k.useState(null),[a,s]=k.useState(null),[u,l]=k.useState([]),c=k.useRef(null),f=k.useRef(null),h=k.useRef(null),d=k.useCallback(async()=>{try{r(!0),console.log("Loading face-api models...");const y="https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model";await Promise.all([Yr.tinyFaceDetector.loadFromUri(y),Yr.faceExpressionNet.loadFromUri(y)]),e(!0),o(null),console.log("Face-api models loaded successfully")}catch(y){o("      "),console.error("Error loading models:",y)}finally{r(!1)}},[]),p=k.useCallback(async()=>{try{console.log("Starting camera...");const y=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:320,height:240}});f.current=y;let b=0;for(;!c.current&&b<30;)await new Promise(_=>setTimeout(_,100)),b++;return c.current?(c.current.srcObject=y,await new Promise((_,x)=>{const S=c.current;S.onloadedmetadata=()=>{S.play().then(()=>{console.log("Camera started, video playing, dimensions:",S.videoWidth,"x",S.videoHeight),_()}).catch(x)},S.onerror=x,setTimeout(()=>_(),5e3)}),!0):(console.error("Video element not found after waiting"),!1)}catch(y){return o("    .   ."),console.error("Error accessing camera:",y),!1}},[]),v=k.useCallback(()=>{f.current&&(f.current.getTracks().forEach(y=>y.stop()),f.current=null),h.current&&(clearInterval(h.current),h.current=null)},[]),m=k.useCallback(async()=>{var b;if(!c.current||!t)return console.log("Cannot detect: video or model not ready",{video:!!c.current,model:t,videoReady:(b=c.current)==null?void 0:b.readyState}),null;const y=c.current;if(y.readyState<2||y.videoWidth===0||y.videoHeight===0)return console.log("Video not ready yet, readyState:",y.readyState,"dimensions:",y.videoWidth,"x",y.videoHeight),null;try{console.log("Detecting emotion... video dimensions:",y.videoWidth,"x",y.videoHeight);const _=await L0e(y,new lH({inputSize:224,scoreThreshold:.3})).withFaceExpressions();if(_&&_.expressions){const x=_.expressions,S=Object.entries(x).sort(([,R],[,I])=>I-R),[E,C]=S[0],A=E,T=y$[A]||y$.neutral,P={emotion:A,confidence:C,arabicLabel:T.arabic,emoji:T.emoji};return console.log(" Emotion detected:",P.emotion,"confidence:",Math.round(P.confidence*100)+"%"),s(P),l(R=>[...R.slice(-50),P]),P}else console.log(" No face detected in frame")}catch(_){console.error("Error detecting emotion:",_)}return null},[t]),g=k.useCallback((y=5e3)=>{console.log("Starting emotion detection with interval:",y,"ms"),h.current&&clearInterval(h.current);const b=async()=>{const _=await m();console.log("Detection result:",_?_.emotion:"no face")};setTimeout(()=>{b()},2e3),h.current=setInterval(()=>{b()},y)},[m]);return k.useEffect(()=>(d(),()=>{v()}),[d,v]),{videoRef:c,isModelLoaded:t,isLoading:n,error:i,currentEmotion:a,emotionHistory:u,loadModels:d,startCamera:p,stopCamera:v,detectEmotion:m,startDetection:g,clearHistory:()=>l([])}},U0e=({stageId:t,onBack:e,onComplete:n})=>{const[r,i]=k.useState("lesson"),[o,a]=k.useState(0),[s,u]=k.useState("pending"),l=k.useRef([]),c=Xf.find(P=>P.id===t),{videoRef:f,currentEmotion:h,isModelLoaded:d,isLoading:p,startCamera:v,stopCamera:m,startDetection:g,emotionHistory:y}=B0e(),{saveProgress:b,logEmotion:_}=eP(),{toast:x}=XA(),S=k.useCallback(async()=>{console.log("Requesting camera permission..."),u("granted"),await new Promise(R=>setTimeout(R,200)),await v()?(d||(console.log("Waiting for models to load..."),await new Promise(R=>setTimeout(R,2e3))),g(5e3),x({title:"  ",description:"    "}),console.log("Camera started successfully, detection started")):(u("denied"),x({title:"  ",description:"   ",variant:"destructive"}),console.log("Camera permission denied"))},[v,g,x,d]);k.useEffect(()=>()=>{m(),l.current=[]},[m]),k.useEffect(()=>{h&&r==="game"&&(l.current.push(h.emotion),console.log("Emotion collected:",h.emotion,"Total:",l.current.length))},[h,r]);const E=k.useCallback(()=>{const P=l.current;if(P.length===0)return null;const R={};P.forEach(B=>{R[B]=(R[B]||0)+1});let I=0,M="neutral";return Object.entries(R).forEach(([B,z])=>{z>I&&(I=z,M=B)}),console.log("Emotion frequency:",R,"Dominant:",M),M},[]),C=k.useCallback(()=>{i("game"),a(Date.now()),l.current=[],s==="pending"&&S()},[s,S]),A=k.useCallback(async P=>{var B,z;i("complete"),m();const R=Math.round((Date.now()-o)/1e3),I=c?P>=c.requiredScore:!1,M=E();if(console.log("Game complete! Dominant emotion:",M,"Collected emotions:",l.current.length),M){const U={happy:{arabic:"",emoji:""},neutral:{arabic:"",emoji:""},sad:{arabic:"",emoji:""},angry:{arabic:"",emoji:""},surprised:{arabic:"",emoji:""},fearful:{arabic:"",emoji:""},disgusted:{arabic:"",emoji:""}},$=l.current.filter(J=>J===M).length,L=l.current.length,H=L>0?$/L:.5,X={emotion:M,confidence:H,arabicLabel:((B=U[M])==null?void 0:B.arabic)||"",emoji:((z=U[M])==null?void 0:z.emoji)||""},q=await _(t,X);console.log("Emotion saved to database:",q),x({title:` : ${X.emoji} ${X.arabicLabel}`,description:`     ${t}`})}else console.log("No emotions collected during this game");l.current=[],await b({levelNumber:t,gameType:(c==null?void 0:c.gameType)||"unknown",score:P,isCompleted:I,timeSpentSeconds:R,attempts:1}),setTimeout(()=>{n(P)},2e3)},[t,c,o,b,m,n,E,_,x]);if(!c)return N.jsxs("div",{className:"text-center p-8",children:[N.jsx("p",{className:"text-xl",children:"  "}),N.jsx(Ar,{onClick:e,className:"mt-4",children:""})]});const T=()=>{switch(c.gameType){case"matching":return c.matchingItems&&N.jsx(Ele,{items:c.matchingItems,onComplete:A});case"mcq":return c.mcqQuestions&&N.jsx(Cle,{questions:c.mcqQuestions,onComplete:A});case"fillblank":return c.fillBlankQuestions&&N.jsx(Ale,{questions:c.fillBlankQuestions,onComplete:A});case"dragdrop":return c.dragDropItems&&N.jsx(vfe,{items:c.dragDropItems,onComplete:A});default:return null}};return N.jsxs("div",{className:"min-h-screen p-4 pb-20",children:[N.jsx("div",{className:"max-w-4xl mx-auto mb-4",children:N.jsx(Ar,{variant:"ghost",onClick:e,className:"text-lg",children:"  "})}),r==="lesson"&&N.jsx(Sle,{lesson:c.lesson,stageNumber:c.id,stageIcon:c.icon,onStartGame:C}),r==="game"&&T(),r==="complete"&&N.jsx(it.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed inset-0 flex items-center justify-center bg-background/90 backdrop-blur-sm z-50",children:N.jsxs("div",{className:"text-center p-8",children:[N.jsx("div",{className:"text-8xl mb-4 animate-bounce-in",children:""}),N.jsx("h2",{className:"text-4xl font-bold mb-2",children:"!"}),N.jsxs("p",{className:"text-xl text-muted-foreground",children:["  ",c.id]})]})}),s==="granted"&&r==="game"&&N.jsx(mfe,{videoRef:f,currentEmotion:h,isActive:d,isLoading:p,emotionsCount:l.current.length})]})};var V0e=Array.isArray,si=V0e,W0e=typeof Nm=="object"&&Nm&&Nm.Object===Object&&Nm,gH=W0e,z0e=gH,H0e=typeof self=="object"&&self&&self.Object===Object&&self,G0e=z0e||H0e||Function("return this")(),Ca=G0e,q0e=Ca,K0e=q0e.Symbol,ym=K0e,b$=ym,yH=Object.prototype,X0e=yH.hasOwnProperty,Y0e=yH.toString,Sd=b$?b$.toStringTag:void 0;function J0e(t){var e=X0e.call(t,Sd),n=t[Sd];try{t[Sd]=void 0;var r=!0}catch{}var i=Y0e.call(t);return r&&(e?t[Sd]=n:delete t[Sd]),i}var Q0e=J0e,Z0e=Object.prototype,ebe=Z0e.toString;function tbe(t){return ebe.call(t)}var nbe=tbe,w$=ym,rbe=Q0e,ibe=nbe,obe="[object Null]",abe="[object Undefined]",x$=w$?w$.toStringTag:void 0;function sbe(t){return t==null?t===void 0?abe:obe:x$&&x$ in Object(t)?rbe(t):ibe(t)}var vs=sbe;function ube(t){return t!=null&&typeof t=="object"}var ms=ube,lbe=vs,cbe=ms,fbe="[object Symbol]";function hbe(t){return typeof t=="symbol"||cbe(t)&&lbe(t)==fbe}var Bh=hbe,dbe=si,pbe=Bh,vbe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mbe=/^\w*$/;function gbe(t,e){if(dbe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||pbe(t)?!0:mbe.test(t)||!vbe.test(t)||e!=null&&t in Object(e)}var dO=gbe;function ybe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Iu=ybe;const Uh=wt(Iu);var bbe=vs,wbe=Iu,xbe="[object AsyncFunction]",_be="[object Function]",Sbe="[object GeneratorFunction]",Ebe="[object Proxy]";function Cbe(t){if(!wbe(t))return!1;var e=bbe(t);return e==_be||e==Sbe||e==xbe||e==Ebe}var pO=Cbe;const ze=wt(pO);var Abe=Ca,Tbe=Abe["__core-js_shared__"],Pbe=Tbe,N_=Pbe,_$=function(){var t=/[^.]+$/.exec(N_&&N_.keys&&N_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Obe(t){return!!_$&&_$ in t}var kbe=Obe,Rbe=Function.prototype,Ibe=Rbe.toString;function Dbe(t){if(t!=null){try{return Ibe.call(t)}catch{}try{return t+""}catch{}}return""}var bH=Dbe,Nbe=pO,Mbe=kbe,$be=Iu,jbe=bH,Lbe=/[\\^$.*+?()[\]{}|]/g,Fbe=/^\[object .+?Constructor\]$/,Bbe=Function.prototype,Ube=Object.prototype,Vbe=Bbe.toString,Wbe=Ube.hasOwnProperty,zbe=RegExp("^"+Vbe.call(Wbe).replace(Lbe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Hbe(t){if(!$be(t)||Mbe(t))return!1;var e=Nbe(t)?zbe:Fbe;return e.test(jbe(t))}var Gbe=Hbe;function qbe(t,e){return t==null?void 0:t[e]}var Kbe=qbe,Xbe=Gbe,Ybe=Kbe;function Jbe(t,e){var n=Ybe(t,e);return Xbe(n)?n:void 0}var rc=Jbe,Qbe=rc,Zbe=Qbe(Object,"create"),Lw=Zbe,S$=Lw;function ewe(){this.__data__=S$?S$(null):{},this.size=0}var twe=ewe;function nwe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var rwe=nwe,iwe=Lw,owe="__lodash_hash_undefined__",awe=Object.prototype,swe=awe.hasOwnProperty;function uwe(t){var e=this.__data__;if(iwe){var n=e[t];return n===owe?void 0:n}return swe.call(e,t)?e[t]:void 0}var lwe=uwe,cwe=Lw,fwe=Object.prototype,hwe=fwe.hasOwnProperty;function dwe(t){var e=this.__data__;return cwe?e[t]!==void 0:hwe.call(e,t)}var pwe=dwe,vwe=Lw,mwe="__lodash_hash_undefined__";function gwe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=vwe&&e===void 0?mwe:e,this}var ywe=gwe,bwe=twe,wwe=rwe,xwe=lwe,_we=pwe,Swe=ywe;function Vh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Vh.prototype.clear=bwe;Vh.prototype.delete=wwe;Vh.prototype.get=xwe;Vh.prototype.has=_we;Vh.prototype.set=Swe;var Ewe=Vh;function Cwe(){this.__data__=[],this.size=0}var Awe=Cwe;function Twe(t,e){return t===e||t!==t&&e!==e}var vO=Twe,Pwe=vO;function Owe(t,e){for(var n=t.length;n--;)if(Pwe(t[n][0],e))return n;return-1}var Fw=Owe,kwe=Fw,Rwe=Array.prototype,Iwe=Rwe.splice;function Dwe(t){var e=this.__data__,n=kwe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Iwe.call(e,n,1),--this.size,!0}var Nwe=Dwe,Mwe=Fw;function $we(t){var e=this.__data__,n=Mwe(e,t);return n<0?void 0:e[n][1]}var jwe=$we,Lwe=Fw;function Fwe(t){return Lwe(this.__data__,t)>-1}var Bwe=Fwe,Uwe=Fw;function Vwe(t,e){var n=this.__data__,r=Uwe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var Wwe=Vwe,zwe=Awe,Hwe=Nwe,Gwe=jwe,qwe=Bwe,Kwe=Wwe;function Wh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wh.prototype.clear=zwe;Wh.prototype.delete=Hwe;Wh.prototype.get=Gwe;Wh.prototype.has=qwe;Wh.prototype.set=Kwe;var Bw=Wh,Xwe=rc,Ywe=Ca,Jwe=Xwe(Ywe,"Map"),mO=Jwe,E$=Ewe,Qwe=Bw,Zwe=mO;function exe(){this.size=0,this.__data__={hash:new E$,map:new(Zwe||Qwe),string:new E$}}var txe=exe;function nxe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var rxe=nxe,ixe=rxe;function oxe(t,e){var n=t.__data__;return ixe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Uw=oxe,axe=Uw;function sxe(t){var e=axe(this,t).delete(t);return this.size-=e?1:0,e}var uxe=sxe,lxe=Uw;function cxe(t){return lxe(this,t).get(t)}var fxe=cxe,hxe=Uw;function dxe(t){return hxe(this,t).has(t)}var pxe=dxe,vxe=Uw;function mxe(t,e){var n=vxe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var gxe=mxe,yxe=txe,bxe=uxe,wxe=fxe,xxe=pxe,_xe=gxe;function zh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zh.prototype.clear=yxe;zh.prototype.delete=bxe;zh.prototype.get=wxe;zh.prototype.has=xxe;zh.prototype.set=_xe;var gO=zh,wH=gO,Sxe="Expected a function";function yO(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Sxe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(yO.Cache||wH),n}yO.Cache=wH;var xH=yO;const Exe=wt(xH);var Cxe=xH,Axe=500;function Txe(t){var e=Cxe(t,function(r){return n.size===Axe&&n.clear(),r}),n=e.cache;return e}var Pxe=Txe,Oxe=Pxe,kxe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rxe=/\\(\\)?/g,Ixe=Oxe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(kxe,function(n,r,i,o){e.push(i?o.replace(Rxe,"$1"):r||n)}),e}),Dxe=Ixe;function Nxe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var bO=Nxe,C$=ym,Mxe=bO,$xe=si,jxe=Bh,Lxe=1/0,A$=C$?C$.prototype:void 0,T$=A$?A$.toString:void 0;function _H(t){if(typeof t=="string")return t;if($xe(t))return Mxe(t,_H)+"";if(jxe(t))return T$?T$.call(t):"";var e=t+"";return e=="0"&&1/t==-Lxe?"-0":e}var Fxe=_H,Bxe=Fxe;function Uxe(t){return t==null?"":Bxe(t)}var SH=Uxe,Vxe=si,Wxe=dO,zxe=Dxe,Hxe=SH;function Gxe(t,e){return Vxe(t)?t:Wxe(t,e)?[t]:zxe(Hxe(t))}var EH=Gxe,qxe=Bh,Kxe=1/0;function Xxe(t){if(typeof t=="string"||qxe(t))return t;var e=t+"";return e=="0"&&1/t==-Kxe?"-0":e}var Vw=Xxe,Yxe=EH,Jxe=Vw;function Qxe(t,e){e=Yxe(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Jxe(e[n++])];return n&&n==r?t:void 0}var wO=Qxe,Zxe=wO;function e1e(t,e,n){var r=t==null?void 0:Zxe(t,e);return r===void 0?n:r}var CH=e1e;const Ai=wt(CH);function t1e(t){return t==null}var n1e=t1e;const Qe=wt(n1e);var r1e=vs,i1e=si,o1e=ms,a1e="[object String]";function s1e(t){return typeof t=="string"||!i1e(t)&&o1e(t)&&r1e(t)==a1e}var u1e=s1e;const Hl=wt(u1e);var AH={exports:{}},xt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xO=Symbol.for("react.element"),_O=Symbol.for("react.portal"),Ww=Symbol.for("react.fragment"),zw=Symbol.for("react.strict_mode"),Hw=Symbol.for("react.profiler"),Gw=Symbol.for("react.provider"),qw=Symbol.for("react.context"),l1e=Symbol.for("react.server_context"),Kw=Symbol.for("react.forward_ref"),Xw=Symbol.for("react.suspense"),Yw=Symbol.for("react.suspense_list"),Jw=Symbol.for("react.memo"),Qw=Symbol.for("react.lazy"),c1e=Symbol.for("react.offscreen"),TH;TH=Symbol.for("react.module.reference");function eo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case xO:switch(t=t.type,t){case Ww:case Hw:case zw:case Xw:case Yw:return t;default:switch(t=t&&t.$$typeof,t){case l1e:case qw:case Kw:case Qw:case Jw:case Gw:return t;default:return e}}case _O:return e}}}xt.ContextConsumer=qw;xt.ContextProvider=Gw;xt.Element=xO;xt.ForwardRef=Kw;xt.Fragment=Ww;xt.Lazy=Qw;xt.Memo=Jw;xt.Portal=_O;xt.Profiler=Hw;xt.StrictMode=zw;xt.Suspense=Xw;xt.SuspenseList=Yw;xt.isAsyncMode=function(){return!1};xt.isConcurrentMode=function(){return!1};xt.isContextConsumer=function(t){return eo(t)===qw};xt.isContextProvider=function(t){return eo(t)===Gw};xt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===xO};xt.isForwardRef=function(t){return eo(t)===Kw};xt.isFragment=function(t){return eo(t)===Ww};xt.isLazy=function(t){return eo(t)===Qw};xt.isMemo=function(t){return eo(t)===Jw};xt.isPortal=function(t){return eo(t)===_O};xt.isProfiler=function(t){return eo(t)===Hw};xt.isStrictMode=function(t){return eo(t)===zw};xt.isSuspense=function(t){return eo(t)===Xw};xt.isSuspenseList=function(t){return eo(t)===Yw};xt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ww||t===Hw||t===zw||t===Xw||t===Yw||t===c1e||typeof t=="object"&&t!==null&&(t.$$typeof===Qw||t.$$typeof===Jw||t.$$typeof===Gw||t.$$typeof===qw||t.$$typeof===Kw||t.$$typeof===TH||t.getModuleId!==void 0)};xt.typeOf=eo;AH.exports=xt;var f1e=AH.exports,h1e=vs,d1e=ms,p1e="[object Number]";function v1e(t){return typeof t=="number"||d1e(t)&&h1e(t)==p1e}var PH=v1e;const m1e=wt(PH);var g1e=PH;function y1e(t){return g1e(t)&&t!=+t}var b1e=y1e;const bm=wt(b1e);var jr=function(e){return e===0?0:e>0?1:-1},yl=function(e){return Hl(e)&&e.indexOf("%")===e.length-1},ve=function(e){return m1e(e)&&!bm(e)},w1e=function(e){return Qe(e)},jn=function(e){return ve(e)||Hl(e)},x1e=0,wm=function(e){var n=++x1e;return"".concat(e||"").concat(n)},Lr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ve(e)&&!Hl(e))return r;var o;if(yl(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return bm(o)&&(o=r),i&&o>n&&(o=n),o},Ic=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},_1e=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},$s=function(e,n){return ve(e)&&ve(n)?function(r){return e+r*(n-e)}:function(){return n}};function TC(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ai(r,e))===n})}var S1e=function(e,n){return ve(e)&&ve(n)?e-n:Hl(e)&&Hl(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Af(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function PC(t){"@babel/helpers - typeof";return PC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PC(t)}var E1e=["viewBox","children"],C1e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],P$=["points","pathLength"],M_={svg:E1e,polygon:P$,polyline:P$},SO=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],M0=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),!Uh(r))return null;var i={};return Object.keys(r).forEach(function(o){SO.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},A1e=function(e,n,r){return function(i){return e(n,r,i),null}},Gl=function(e,n,r){if(!Uh(e)||PC(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];SO.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=A1e(a,n,r))}),i},T1e=["children"],P1e=["children"];function O$(t,e){if(t==null)return{};var n=O1e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function O1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var k$={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ha=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},R$=null,$_=null,EO=function t(e){if(e===R$&&Array.isArray($_))return $_;var n=[];return k.Children.forEach(e,function(r){Qe(r)||(f1e.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),$_=n,R$=e,n};function Xi(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Ha(i)}):r=[Ha(e)],EO(t).forEach(function(i){var o=Ai(i,"type.displayName")||Ai(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function di(t,e){var n=Xi(t,e);return n&&n[0]}var I$=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ve(r)||r<=0||!ve(i)||i<=0)},k1e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],R1e=function(e){return e&&e.type&&Hl(e.type)&&k1e.indexOf(e.type)>=0},I1e=function(e,n,r,i){var o,a=(o=M_==null?void 0:M_[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!ze(e)&&(i&&a.includes(n)||C1e.includes(n))||r&&SO.includes(n)},Fe=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(k.isValidElement(e)&&(i=e.props),!Uh(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;I1e((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},OC=function t(e,n){if(e===n)return!0;var r=k.Children.count(e);if(r!==k.Children.count(n))return!1;if(r===0)return!0;if(r===1)return D$(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!D$(o,a))return!1}return!0},D$=function(e,n){if(Qe(e)&&Qe(n))return!0;if(!Qe(e)&&!Qe(n)){var r=e.props||{},i=r.children,o=O$(r,T1e),a=n.props||{},s=a.children,u=O$(a,P1e);return i&&s?Af(o,u)&&OC(i,s):!i&&!s?Af(o,u):!1}return!1},N$=function(e,n){var r=[],i={};return EO(e).forEach(function(o,a){if(R1e(o))r.push(o);else if(o){var s=Ha(o.type),u=n[s]||{},l=u.handler,c=u.once;if(l&&(!c||!i[s])){var f=l(o,s,a);r.push(f),i[s]=!0}}}),r},D1e=function(e){var n=e&&e.type;return n&&k$[n]?k$[n]:null},N1e=function(e,n){return EO(n).indexOf(e)},M1e=["children","width","height","viewBox","className","style","title","desc"];function kC(){return kC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kC.apply(this,arguments)}function $1e(t,e){if(t==null)return{};var n=j1e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function j1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function RC(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,u=t.desc,l=$1e(t,M1e),c=i||{width:n,height:r,x:0,y:0},f=qe("recharts-surface",o);return V.createElement("svg",kC({},Fe(l,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),V.createElement("title",null,s),V.createElement("desc",null,u),e)}var L1e=["children","className"];function IC(){return IC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},IC.apply(this,arguments)}function F1e(t,e){if(t==null)return{};var n=B1e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function B1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var yt=V.forwardRef(function(t,e){var n=t.children,r=t.className,i=F1e(t,L1e),o=qe("recharts-layer",r);return V.createElement("g",IC({className:o},Fe(i,!0),{ref:e}),n)}),Ga=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function U1e(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var V1e=U1e,W1e=V1e;function z1e(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:W1e(t,e,n)}var H1e=z1e,G1e="\\ud800-\\udfff",q1e="\\u0300-\\u036f",K1e="\\ufe20-\\ufe2f",X1e="\\u20d0-\\u20ff",Y1e=q1e+K1e+X1e,J1e="\\ufe0e\\ufe0f",Q1e="\\u200d",Z1e=RegExp("["+Q1e+G1e+Y1e+J1e+"]");function e_e(t){return Z1e.test(t)}var OH=e_e;function t_e(t){return t.split("")}var n_e=t_e,kH="\\ud800-\\udfff",r_e="\\u0300-\\u036f",i_e="\\ufe20-\\ufe2f",o_e="\\u20d0-\\u20ff",a_e=r_e+i_e+o_e,s_e="\\ufe0e\\ufe0f",u_e="["+kH+"]",DC="["+a_e+"]",NC="\\ud83c[\\udffb-\\udfff]",l_e="(?:"+DC+"|"+NC+")",RH="[^"+kH+"]",IH="(?:\\ud83c[\\udde6-\\uddff]){2}",DH="[\\ud800-\\udbff][\\udc00-\\udfff]",c_e="\\u200d",NH=l_e+"?",MH="["+s_e+"]?",f_e="(?:"+c_e+"(?:"+[RH,IH,DH].join("|")+")"+MH+NH+")*",h_e=MH+NH+f_e,d_e="(?:"+[RH+DC+"?",DC,IH,DH,u_e].join("|")+")",p_e=RegExp(NC+"(?="+NC+")|"+d_e+h_e,"g");function v_e(t){return t.match(p_e)||[]}var m_e=v_e,g_e=n_e,y_e=OH,b_e=m_e;function w_e(t){return y_e(t)?b_e(t):g_e(t)}var x_e=w_e,__e=H1e,S_e=OH,E_e=x_e,C_e=SH;function A_e(t){return function(e){e=C_e(e);var n=S_e(e)?E_e(e):void 0,r=n?n[0]:e.charAt(0),i=n?__e(n,1).join(""):e.slice(1);return r[t]()+i}}var T_e=A_e,P_e=T_e,O_e=P_e("toUpperCase"),k_e=O_e;const Zw=wt(k_e);function Rt(t){return function(){return t}}const $H=Math.cos,$0=Math.sin,Mo=Math.sqrt,j0=Math.PI,ex=2*j0,MC=Math.PI,$C=2*MC,tl=1e-6,R_e=$C-tl;function jH(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function I_e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return jH;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class D_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?jH:I_e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,u=r-e,l=i-n,c=a-e,f=s-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>tl)if(!(Math.abs(f*u-l*c)>tl)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,p=i-s,v=u*u+l*l,m=d*d+p*p,g=Math.sqrt(v),y=Math.sqrt(h),b=o*Math.tan((MC-Math.acos((v+h-m)/(2*g*y)))/2),_=b/y,x=b/g;Math.abs(_-1)>tl&&this._append`L${e+_*c},${n+_*f}`,this._append`A${o},${o},0,0,${+(f*d>c*p)},${this._x1=e+x*u},${this._y1=n+x*l}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=e+s,c=n+u,f=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>tl||Math.abs(this._y1-c)>tl)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%$C+$C),h>R_e?this._append`A${r},${r},0,1,${f},${e-s},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>tl&&this._append`A${r},${r},0,${+(h>=MC)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function CO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new D_e(e)}function AO(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function LH(t){this._context=t}LH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function tx(t){return new LH(t)}function FH(t){return t[0]}function BH(t){return t[1]}function UH(t,e){var n=Rt(!0),r=null,i=tx,o=null,a=CO(s);t=typeof t=="function"?t:t===void 0?FH:Rt(t),e=typeof e=="function"?e:e===void 0?BH:Rt(e);function s(u){var l,c=(u=AO(u)).length,f,h=!1,d;for(r==null&&(o=i(d=a())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(f,l,u),+e(f,l,u));if(d)return o=null,d+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Rt(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:Rt(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Rt(!!u),s):n},s.curve=function(u){return arguments.length?(i=u,r!=null&&(o=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=o=null:o=i(r=u),s):r},s}function Rg(t,e,n){var r=null,i=Rt(!0),o=null,a=tx,s=null,u=CO(l);t=typeof t=="function"?t:t===void 0?FH:Rt(+t),e=typeof e=="function"?e:Rt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?BH:Rt(+n);function l(f){var h,d,p,v=(f=AO(f)).length,m,g=!1,y,b=new Array(v),_=new Array(v);for(o==null&&(s=a(y=u())),h=0;h<=v;++h){if(!(h<v&&i(m=f[h],h,f))===g)if(g=!g)d=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=h-1;p>=d;--p)s.point(b[p],_[p]);s.lineEnd(),s.areaEnd()}g&&(b[h]=+t(m,h,f),_[h]=+e(m,h,f),s.point(r?+r(m,h,f):b[h],n?+n(m,h,f):_[h]))}if(y)return s=null,y+""||null}function c(){return UH().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Rt(+f),r=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Rt(+f),l):t},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Rt(+f),l):r},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Rt(+f),n=null,l):e},l.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Rt(+f),l):e},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Rt(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(t).y(e)},l.lineY1=function(){return c().x(t).y(n)},l.lineX1=function(){return c().x(r).y(e)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Rt(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}class VH{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function N_e(t){return new VH(t,!0)}function M_e(t){return new VH(t,!1)}const TO={draw(t,e){const n=Mo(e/j0);t.moveTo(n,0),t.arc(0,0,n,0,ex)}},$_e={draw(t,e){const n=Mo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},WH=Mo(1/3),j_e=WH*2,L_e={draw(t,e){const n=Mo(e/j_e),r=n*WH;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},F_e={draw(t,e){const n=Mo(e),r=-n/2;t.rect(r,r,n,n)}},B_e=.8908130915292852,zH=$0(j0/10)/$0(7*j0/10),U_e=$0(ex/10)*zH,V_e=-$H(ex/10)*zH,W_e={draw(t,e){const n=Mo(e*B_e),r=U_e*n,i=V_e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=ex*o/5,s=$H(a),u=$0(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},j_=Mo(3),z_e={draw(t,e){const n=-Mo(e/(j_*3));t.moveTo(0,n*2),t.lineTo(-j_*n,-n),t.lineTo(j_*n,-n),t.closePath()}},Ri=-.5,Ii=Mo(3)/2,jC=1/Mo(12),H_e=(jC/2+1)*3,G_e={draw(t,e){const n=Mo(e/H_e),r=n/2,i=n*jC,o=r,a=n*jC+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(Ri*r-Ii*i,Ii*r+Ri*i),t.lineTo(Ri*o-Ii*a,Ii*o+Ri*a),t.lineTo(Ri*s-Ii*u,Ii*s+Ri*u),t.lineTo(Ri*r+Ii*i,Ri*i-Ii*r),t.lineTo(Ri*o+Ii*a,Ri*a-Ii*o),t.lineTo(Ri*s+Ii*u,Ri*u-Ii*s),t.closePath()}};function q_e(t,e){let n=null,r=CO(i);t=typeof t=="function"?t:Rt(t||TO),e=typeof e=="function"?e:Rt(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:Rt(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:Rt(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function L0(){}function F0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function HH(t){this._context=t}HH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:F0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:F0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function K_e(t){return new HH(t)}function GH(t){this._context=t}GH.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:F0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function X_e(t){return new GH(t)}function qH(t){this._context=t}qH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:F0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Y_e(t){return new qH(t)}function KH(t){this._context=t}KH.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function J_e(t){return new KH(t)}function M$(t){return t<0?-1:1}function $$(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(M$(o)+M$(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function j$(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function L_(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function B0(t){this._context=t}B0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:L_(this,this._t0,j$(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,L_(this,j$(this,n=$$(this,t,e)),n);break;default:L_(this,this._t0,n=$$(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function XH(t){this._context=new YH(t)}(XH.prototype=Object.create(B0.prototype)).point=function(t,e){B0.prototype.point.call(this,e,t)};function YH(t){this._context=t}YH.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function Q_e(t){return new B0(t)}function Z_e(t){return new XH(t)}function JH(t){this._context=t}JH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=L$(t),i=L$(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function L$(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function eSe(t){return new JH(t)}function nx(t,e){this._context=t,this._t=e}nx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function tSe(t){return new nx(t,.5)}function nSe(t){return new nx(t,0)}function rSe(t){return new nx(t,1)}function eh(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function LC(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function iSe(t,e){return t[e]}function oSe(t){const e=[];return e.key=t,e}function aSe(){var t=Rt([]),e=LC,n=eh,r=iSe;function i(o){var a=Array.from(t.apply(this,arguments),oSe),s,u=a.length,l=-1,c;for(const f of o)for(s=0,++l;s<u;++s)(a[s][l]=[0,+r(f,a[s].key,l,o)]).data=f;for(s=0,c=AO(e(a));s<u;++s)a[c[s]].index=s;return n(a,c),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:Rt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:Rt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?LC:typeof o=="function"?o:Rt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??eh,i):n},i}function sSe(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}eh(t,e)}}function uSe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}eh(t,e)}}function lSe(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,u=0,l=0;s<a;++s){for(var c=t[e[s]],f=c[r][1]||0,h=c[r-1][1]||0,d=(f-h)/2,p=0;p<s;++p){var v=t[e[p]],m=v[r][1]||0,g=v[r-1][1]||0;d+=m-g}u+=f,l+=d*f}i[r-1][1]+=i[r-1][0]=n,u&&(n-=l/u)}i[r-1][1]+=i[r-1][0]=n,eh(t,e)}}function uv(t){"@babel/helpers - typeof";return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(t)}var cSe=["type","size","sizeType"];function FC(){return FC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FC.apply(this,arguments)}function F$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F$(Object(n),!0).forEach(function(r){fSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fSe(t,e,n){return e=hSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hSe(t){var e=dSe(t,"string");return uv(e)=="symbol"?e:e+""}function dSe(t,e){if(uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pSe(t,e){if(t==null)return{};var n=vSe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var QH={symbolCircle:TO,symbolCross:$_e,symbolDiamond:L_e,symbolSquare:F_e,symbolStar:W_e,symbolTriangle:z_e,symbolWye:G_e},mSe=Math.PI/180,gSe=function(e){var n="symbol".concat(Zw(e));return QH[n]||TO},ySe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*mSe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bSe=function(e,n){QH["symbol".concat(Zw(e))]=n},PO=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,u=pSe(e,cSe),l=B$(B$({},u),{},{type:r,size:o,sizeType:s}),c=function(){var m=gSe(r),g=q_e().type(m).size(ySe(o,s,r));return g()},f=l.className,h=l.cx,d=l.cy,p=Fe(l,!0);return h===+h&&d===+d&&o===+o?V.createElement("path",FC({},p,{className:qe("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(d,")"),d:c()})):null};PO.registerSymbol=bSe;function th(t){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(t)}function BC(){return BC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BC.apply(this,arguments)}function U$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wSe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(n),!0).forEach(function(r){lv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _Se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e8(r.key),r)}}function SSe(t,e,n){return e&&_Se(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ESe(t,e,n){return e=U0(e),CSe(t,ZH()?Reflect.construct(e,n||[],U0(t).constructor):e.apply(t,n))}function CSe(t,e){if(e&&(th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ASe(t)}function ASe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZH=function(){return!!t})()}function U0(t){return U0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},U0(t)}function TSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UC(t,e)}function UC(t,e){return UC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},UC(t,e)}function lv(t,e,n){return e=e8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e8(t){var e=PSe(t,"string");return th(e)=="symbol"?e:e+""}function PSe(t,e){if(th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Di=32,OO=function(t){function e(){return xSe(this,e),ESe(this,e,arguments)}return TSe(e,t),SSe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=Di/2,a=Di/6,s=Di/3,u=r.inactive?i:r.color;if(r.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:Di,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(Di,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return V.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Di/8,"h").concat(Di,"v").concat(Di*3/4,"h").concat(-Di,"z"),className:"recharts-legend-icon"});if(V.isValidElement(r.legendIcon)){var l=wSe({},r);return delete l.legendIcon,V.cloneElement(r.legendIcon,l)}return V.createElement(PO,{fill:u,cx:o,cy:o,size:Di,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,u=i.formatter,l=i.inactiveColor,c={x:0,y:0,width:Di,height:Di},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(d,p){var v=d.formatter||u,m=qe(lv(lv({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",d.inactive));if(d.type==="none")return null;var g=ze(d.value)?null:d.value;Ga(!ze(d.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=d.inactive?l:d.color;return V.createElement("li",BC({className:m,style:f,key:"legend-item-".concat(p)},Gl(r.props,d,p)),V.createElement(RC,{width:a,height:a,viewBox:c,style:h},r.renderIcon(d)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},v?v(g,d,p):g))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(k.PureComponent);lv(OO,"displayName","Legend");lv(OO,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var OSe=Bw;function kSe(){this.__data__=new OSe,this.size=0}var RSe=kSe;function ISe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var DSe=ISe;function NSe(t){return this.__data__.get(t)}var MSe=NSe;function $Se(t){return this.__data__.has(t)}var jSe=$Se,LSe=Bw,FSe=mO,BSe=gO,USe=200;function VSe(t,e){var n=this.__data__;if(n instanceof LSe){var r=n.__data__;if(!FSe||r.length<USe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new BSe(r)}return n.set(t,e),this.size=n.size,this}var WSe=VSe,zSe=Bw,HSe=RSe,GSe=DSe,qSe=MSe,KSe=jSe,XSe=WSe;function Hh(t){var e=this.__data__=new zSe(t);this.size=e.size}Hh.prototype.clear=HSe;Hh.prototype.delete=GSe;Hh.prototype.get=qSe;Hh.prototype.has=KSe;Hh.prototype.set=XSe;var t8=Hh,YSe="__lodash_hash_undefined__";function JSe(t){return this.__data__.set(t,YSe),this}var QSe=JSe;function ZSe(t){return this.__data__.has(t)}var eEe=ZSe,tEe=gO,nEe=QSe,rEe=eEe;function V0(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new tEe;++e<n;)this.add(t[e])}V0.prototype.add=V0.prototype.push=nEe;V0.prototype.has=rEe;var n8=V0;function iEe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var r8=iEe;function oEe(t,e){return t.has(e)}var i8=oEe,aEe=n8,sEe=r8,uEe=i8,lEe=1,cEe=2;function fEe(t,e,n,r,i,o){var a=n&lEe,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t),c=o.get(e);if(l&&c)return l==e&&c==t;var f=-1,h=!0,d=n&cEe?new aEe:void 0;for(o.set(t,e),o.set(e,t);++f<s;){var p=t[f],v=e[f];if(r)var m=a?r(v,p,f,e,t,o):r(p,v,f,t,e,o);if(m!==void 0){if(m)continue;h=!1;break}if(d){if(!sEe(e,function(g,y){if(!uEe(d,y)&&(p===g||i(p,g,n,r,o)))return d.push(y)})){h=!1;break}}else if(!(p===v||i(p,v,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var o8=fEe,hEe=Ca,dEe=hEe.Uint8Array,pEe=dEe;function vEe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var mEe=vEe;function gEe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var kO=gEe,V$=ym,W$=pEe,yEe=vO,bEe=o8,wEe=mEe,xEe=kO,_Ee=1,SEe=2,EEe="[object Boolean]",CEe="[object Date]",AEe="[object Error]",TEe="[object Map]",PEe="[object Number]",OEe="[object RegExp]",kEe="[object Set]",REe="[object String]",IEe="[object Symbol]",DEe="[object ArrayBuffer]",NEe="[object DataView]",z$=V$?V$.prototype:void 0,F_=z$?z$.valueOf:void 0;function MEe(t,e,n,r,i,o,a){switch(n){case NEe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case DEe:return!(t.byteLength!=e.byteLength||!o(new W$(t),new W$(e)));case EEe:case CEe:case PEe:return yEe(+t,+e);case AEe:return t.name==e.name&&t.message==e.message;case OEe:case REe:return t==e+"";case TEe:var s=wEe;case kEe:var u=r&_Ee;if(s||(s=xEe),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=SEe,a.set(t,e);var c=bEe(s(t),s(e),r,i,o,a);return a.delete(t),c;case IEe:if(F_)return F_.call(t)==F_.call(e)}return!1}var $Ee=MEe;function jEe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var a8=jEe,LEe=a8,FEe=si;function BEe(t,e,n){var r=e(t);return FEe(t)?r:LEe(r,n(t))}var UEe=BEe;function VEe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var WEe=VEe;function zEe(){return[]}var HEe=zEe,GEe=WEe,qEe=HEe,KEe=Object.prototype,XEe=KEe.propertyIsEnumerable,H$=Object.getOwnPropertySymbols,YEe=H$?function(t){return t==null?[]:(t=Object(t),GEe(H$(t),function(e){return XEe.call(t,e)}))}:qEe,JEe=YEe;function QEe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var ZEe=QEe,eCe=vs,tCe=ms,nCe="[object Arguments]";function rCe(t){return tCe(t)&&eCe(t)==nCe}var iCe=rCe,G$=iCe,oCe=ms,s8=Object.prototype,aCe=s8.hasOwnProperty,sCe=s8.propertyIsEnumerable,uCe=G$(function(){return arguments}())?G$:function(t){return oCe(t)&&aCe.call(t,"callee")&&!sCe.call(t,"callee")},RO=uCe,W0={exports:{}};function lCe(){return!1}var cCe=lCe;W0.exports;(function(t,e){var n=Ca,r=cCe,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||r;t.exports=l})(W0,W0.exports);var u8=W0.exports,fCe=9007199254740991,hCe=/^(?:0|[1-9]\d*)$/;function dCe(t,e){var n=typeof t;return e=e??fCe,!!e&&(n=="number"||n!="symbol"&&hCe.test(t))&&t>-1&&t%1==0&&t<e}var IO=dCe,pCe=9007199254740991;function vCe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pCe}var DO=vCe,mCe=vs,gCe=DO,yCe=ms,bCe="[object Arguments]",wCe="[object Array]",xCe="[object Boolean]",_Ce="[object Date]",SCe="[object Error]",ECe="[object Function]",CCe="[object Map]",ACe="[object Number]",TCe="[object Object]",PCe="[object RegExp]",OCe="[object Set]",kCe="[object String]",RCe="[object WeakMap]",ICe="[object ArrayBuffer]",DCe="[object DataView]",NCe="[object Float32Array]",MCe="[object Float64Array]",$Ce="[object Int8Array]",jCe="[object Int16Array]",LCe="[object Int32Array]",FCe="[object Uint8Array]",BCe="[object Uint8ClampedArray]",UCe="[object Uint16Array]",VCe="[object Uint32Array]",Ft={};Ft[NCe]=Ft[MCe]=Ft[$Ce]=Ft[jCe]=Ft[LCe]=Ft[FCe]=Ft[BCe]=Ft[UCe]=Ft[VCe]=!0;Ft[bCe]=Ft[wCe]=Ft[ICe]=Ft[xCe]=Ft[DCe]=Ft[_Ce]=Ft[SCe]=Ft[ECe]=Ft[CCe]=Ft[ACe]=Ft[TCe]=Ft[PCe]=Ft[OCe]=Ft[kCe]=Ft[RCe]=!1;function WCe(t){return yCe(t)&&gCe(t.length)&&!!Ft[mCe(t)]}var zCe=WCe;function HCe(t){return function(e){return t(e)}}var l8=HCe,z0={exports:{}};z0.exports;(function(t,e){var n=gH,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(z0,z0.exports);var GCe=z0.exports,qCe=zCe,KCe=l8,q$=GCe,K$=q$&&q$.isTypedArray,XCe=K$?KCe(K$):qCe,c8=XCe,YCe=ZEe,JCe=RO,QCe=si,ZCe=u8,e2e=IO,t2e=c8,n2e=Object.prototype,r2e=n2e.hasOwnProperty;function i2e(t,e){var n=QCe(t),r=!n&&JCe(t),i=!n&&!r&&ZCe(t),o=!n&&!r&&!i&&t2e(t),a=n||r||i||o,s=a?YCe(t.length,String):[],u=s.length;for(var l in t)(e||r2e.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||e2e(l,u)))&&s.push(l);return s}var o2e=i2e,a2e=Object.prototype;function s2e(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||a2e;return t===n}var u2e=s2e;function l2e(t,e){return function(n){return t(e(n))}}var f8=l2e,c2e=f8,f2e=c2e(Object.keys,Object),h2e=f2e,d2e=u2e,p2e=h2e,v2e=Object.prototype,m2e=v2e.hasOwnProperty;function g2e(t){if(!d2e(t))return p2e(t);var e=[];for(var n in Object(t))m2e.call(t,n)&&n!="constructor"&&e.push(n);return e}var y2e=g2e,b2e=pO,w2e=DO;function x2e(t){return t!=null&&w2e(t.length)&&!b2e(t)}var rx=x2e,_2e=o2e,S2e=y2e,E2e=rx;function C2e(t){return E2e(t)?_2e(t):S2e(t)}var NO=C2e,A2e=UEe,T2e=JEe,P2e=NO;function O2e(t){return A2e(t,P2e,T2e)}var k2e=O2e,X$=k2e,R2e=1,I2e=Object.prototype,D2e=I2e.hasOwnProperty;function N2e(t,e,n,r,i,o){var a=n&R2e,s=X$(t),u=s.length,l=X$(e),c=l.length;if(u!=c&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in e:D2e.call(e,h)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var v=!0;o.set(t,e),o.set(e,t);for(var m=a;++f<u;){h=s[f];var g=t[h],y=e[h];if(r)var b=a?r(y,g,h,e,t,o):r(g,y,h,t,e,o);if(!(b===void 0?g===y||i(g,y,n,r,o):b)){v=!1;break}m||(m=h=="constructor")}if(v&&!m){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof x=="function"&&x instanceof x)&&(v=!1)}return o.delete(t),o.delete(e),v}var M2e=N2e,$2e=rc,j2e=Ca,L2e=$2e(j2e,"DataView"),F2e=L2e,B2e=rc,U2e=Ca,V2e=B2e(U2e,"Promise"),W2e=V2e,z2e=rc,H2e=Ca,G2e=z2e(H2e,"Set"),h8=G2e,q2e=rc,K2e=Ca,X2e=q2e(K2e,"WeakMap"),Y2e=X2e,VC=F2e,WC=mO,zC=W2e,HC=h8,GC=Y2e,d8=vs,Gh=bH,Y$="[object Map]",J2e="[object Object]",J$="[object Promise]",Q$="[object Set]",Z$="[object WeakMap]",ej="[object DataView]",Q2e=Gh(VC),Z2e=Gh(WC),eAe=Gh(zC),tAe=Gh(HC),nAe=Gh(GC),nl=d8;(VC&&nl(new VC(new ArrayBuffer(1)))!=ej||WC&&nl(new WC)!=Y$||zC&&nl(zC.resolve())!=J$||HC&&nl(new HC)!=Q$||GC&&nl(new GC)!=Z$)&&(nl=function(t){var e=d8(t),n=e==J2e?t.constructor:void 0,r=n?Gh(n):"";if(r)switch(r){case Q2e:return ej;case Z2e:return Y$;case eAe:return J$;case tAe:return Q$;case nAe:return Z$}return e});var rAe=nl,B_=t8,iAe=o8,oAe=$Ee,aAe=M2e,tj=rAe,nj=si,rj=u8,sAe=c8,uAe=1,ij="[object Arguments]",oj="[object Array]",Ig="[object Object]",lAe=Object.prototype,aj=lAe.hasOwnProperty;function cAe(t,e,n,r,i,o){var a=nj(t),s=nj(e),u=a?oj:tj(t),l=s?oj:tj(e);u=u==ij?Ig:u,l=l==ij?Ig:l;var c=u==Ig,f=l==Ig,h=u==l;if(h&&rj(t)){if(!rj(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new B_),a||sAe(t)?iAe(t,e,n,r,i,o):oAe(t,e,u,n,r,i,o);if(!(n&uAe)){var d=c&&aj.call(t,"__wrapped__"),p=f&&aj.call(e,"__wrapped__");if(d||p){var v=d?t.value():t,m=p?e.value():e;return o||(o=new B_),i(v,m,n,r,o)}}return h?(o||(o=new B_),aAe(t,e,n,r,i,o)):!1}var fAe=cAe,hAe=fAe,sj=ms;function p8(t,e,n,r,i){return t===e?!0:t==null||e==null||!sj(t)&&!sj(e)?t!==t&&e!==e:hAe(t,e,n,r,p8,i)}var MO=p8,dAe=t8,pAe=MO,vAe=1,mAe=2;function gAe(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(l===void 0&&!(u in t))return!1}else{var f=new dAe;if(r)var h=r(l,c,u,t,e,f);if(!(h===void 0?pAe(c,l,vAe|mAe,r,f):h))return!1}}return!0}var yAe=gAe,bAe=Iu;function wAe(t){return t===t&&!bAe(t)}var v8=wAe,xAe=v8,_Ae=NO;function SAe(t){for(var e=_Ae(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,xAe(i)]}return e}var EAe=SAe;function CAe(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var m8=CAe,AAe=yAe,TAe=EAe,PAe=m8;function OAe(t){var e=TAe(t);return e.length==1&&e[0][2]?PAe(e[0][0],e[0][1]):function(n){return n===t||AAe(n,t,e)}}var kAe=OAe;function RAe(t,e){return t!=null&&e in Object(t)}var IAe=RAe,DAe=EH,NAe=RO,MAe=si,$Ae=IO,jAe=DO,LAe=Vw;function FAe(t,e,n){e=DAe(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=LAe(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&jAe(i)&&$Ae(a,i)&&(MAe(t)||NAe(t)))}var BAe=FAe,UAe=IAe,VAe=BAe;function WAe(t,e){return t!=null&&VAe(t,e,UAe)}var zAe=WAe,HAe=MO,GAe=CH,qAe=zAe,KAe=dO,XAe=v8,YAe=m8,JAe=Vw,QAe=1,ZAe=2;function eTe(t,e){return KAe(t)&&XAe(e)?YAe(JAe(t),e):function(n){var r=GAe(n,t);return r===void 0&&r===e?qAe(n,t):HAe(e,r,QAe|ZAe)}}var tTe=eTe;function nTe(t){return t}var qh=nTe;function rTe(t){return function(e){return e==null?void 0:e[t]}}var iTe=rTe,oTe=wO;function aTe(t){return function(e){return oTe(e,t)}}var sTe=aTe,uTe=iTe,lTe=sTe,cTe=dO,fTe=Vw;function hTe(t){return cTe(t)?uTe(fTe(t)):lTe(t)}var dTe=hTe,pTe=kAe,vTe=tTe,mTe=qh,gTe=si,yTe=dTe;function bTe(t){return typeof t=="function"?t:t==null?mTe:typeof t=="object"?gTe(t)?vTe(t[0],t[1]):pTe(t):yTe(t)}var Du=bTe;function wTe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var xTe=wTe;function _Te(t){return t!==t}var STe=_Te;function ETe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var CTe=ETe,ATe=xTe,TTe=STe,PTe=CTe;function OTe(t,e,n){return e===e?PTe(t,e,n):ATe(t,TTe,n)}var kTe=OTe,RTe=kTe;function ITe(t,e){var n=t==null?0:t.length;return!!n&&RTe(t,e,0)>-1}var DTe=ITe;function NTe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var MTe=NTe;function $Te(){}var jTe=$Te,U_=h8,LTe=jTe,FTe=kO,BTe=1/0,UTe=U_&&1/FTe(new U_([,-0]))[1]==BTe?function(t){return new U_(t)}:LTe,VTe=UTe,WTe=n8,zTe=DTe,HTe=MTe,GTe=i8,qTe=VTe,KTe=kO,XTe=200;function YTe(t,e,n){var r=-1,i=zTe,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=HTe;else if(o>=XTe){var l=e?null:qTe(t);if(l)return KTe(l);a=!1,i=GTe,u=new WTe}else u=e?[]:s;e:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,a&&f===f){for(var h=u.length;h--;)if(u[h]===f)continue e;e&&u.push(f),s.push(c)}else i(u,f,n)||(u!==s&&u.push(f),s.push(c))}return s}var JTe=YTe,QTe=Du,ZTe=JTe;function ePe(t,e){return t&&t.length?ZTe(t,QTe(e)):[]}var tPe=ePe;const uj=wt(tPe);function g8(t,e,n){return e===!0?uj(t,n):ze(e)?uj(t,e):t}function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}var nPe=["ref"];function lj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ka(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lj(Object(n),!0).forEach(function(r){ix(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b8(r.key),r)}}function iPe(t,e,n){return e&&cj(t.prototype,e),n&&cj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function oPe(t,e,n){return e=H0(e),aPe(t,y8()?Reflect.construct(e,n||[],H0(t).constructor):e.apply(t,n))}function aPe(t,e){if(e&&(nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sPe(t)}function sPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y8=function(){return!!t})()}function H0(t){return H0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},H0(t)}function uPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qC(t,e)}function qC(t,e){return qC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},qC(t,e)}function ix(t,e,n){return e=b8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b8(t){var e=lPe(t,"string");return nh(e)=="symbol"?e:e+""}function lPe(t,e){if(nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cPe(t,e){if(t==null)return{};var n=fPe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hPe(t){return t.value}function dPe(t,e){if(V.isValidElement(t))return V.cloneElement(t,e);if(typeof t=="function")return V.createElement(t,e);e.ref;var n=cPe(e,nPe);return V.createElement(OO,n)}var fj=1,Tf=function(t){function e(){var n;rPe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=oPe(this,e,[].concat(i)),ix(n,"lastBoundingBox",{width:-1,height:-1}),n}return uPe(e,t),iPe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>fj||Math.abs(i.height-this.lastBoundingBox.height)>fj)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ka({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,u=i.margin,l=i.chartWidth,c=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var d=this.getBBoxSnapshot();f={left:((l||0)-d.width)/2}}else f=a==="right"?{right:u&&u.right||0}:{left:u&&u.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var p=this.getBBoxSnapshot();h={top:((c||0)-p.height)/2}}else h=s==="bottom"?{bottom:u&&u.bottom||0}:{top:u&&u.top||0};return ka(ka({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,u=i.wrapperStyle,l=i.payloadUniqBy,c=i.payload,f=ka(ka({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(u)),u);return V.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(d){r.wrapperNode=d}},dPe(o,ka(ka({},this.props),{},{payload:g8(c,l,hPe)})))}}],[{key:"getWithHeight",value:function(r,i){var o=ka(ka({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&ve(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(k.PureComponent);ix(Tf,"displayName","Legend");ix(Tf,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var hj=ym,pPe=RO,vPe=si,dj=hj?hj.isConcatSpreadable:void 0;function mPe(t){return vPe(t)||pPe(t)||!!(dj&&t&&t[dj])}var gPe=mPe,yPe=a8,bPe=gPe;function w8(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=bPe),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?w8(s,e-1,n,r,i):yPe(i,s):r||(i[i.length]=s)}return i}var x8=w8;function wPe(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}var xPe=wPe,_Pe=xPe,SPe=_Pe(),EPe=SPe,CPe=EPe,APe=NO;function TPe(t,e){return t&&CPe(t,e,APe)}var _8=TPe,PPe=rx;function OPe(t,e){return function(n,r){if(n==null)return n;if(!PPe(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var kPe=OPe,RPe=_8,IPe=kPe,DPe=IPe(RPe),$O=DPe,NPe=$O,MPe=rx;function $Pe(t,e){var n=-1,r=MPe(t)?Array(t.length):[];return NPe(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var S8=$Pe;function jPe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var LPe=jPe,pj=Bh;function FPe(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=pj(t),a=e!==void 0,s=e===null,u=e===e,l=pj(e);if(!s&&!l&&!o&&t>e||o&&a&&u&&!s&&!l||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}var BPe=FPe,UPe=BPe;function VPe(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=UPe(i[r],o[r]);if(u){if(r>=s)return u;var l=n[r];return u*(l=="desc"?-1:1)}}return t.index-e.index}var WPe=VPe,V_=bO,zPe=wO,HPe=Du,GPe=S8,qPe=LPe,KPe=l8,XPe=WPe,YPe=qh,JPe=si;function QPe(t,e,n){e.length?e=V_(e,function(o){return JPe(o)?function(a){return zPe(a,o.length===1?o[0]:o)}:o}):e=[YPe];var r=-1;e=V_(e,KPe(HPe));var i=GPe(t,function(o,a,s){var u=V_(e,function(l){return l(o)});return{criteria:u,index:++r,value:o}});return qPe(i,function(o,a){return XPe(o,a,n)})}var ZPe=QPe;function eOe(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var tOe=eOe,nOe=tOe,vj=Math.max;function rOe(t,e,n){return e=vj(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=vj(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),nOe(t,this,s)}}var iOe=rOe;function oOe(t){return function(){return t}}var aOe=oOe,sOe=rc,uOe=function(){try{var t=sOe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),E8=uOe,lOe=aOe,mj=E8,cOe=qh,fOe=mj?function(t,e){return mj(t,"toString",{configurable:!0,enumerable:!1,value:lOe(e),writable:!0})}:cOe,hOe=fOe,dOe=800,pOe=16,vOe=Date.now;function mOe(t){var e=0,n=0;return function(){var r=vOe(),i=pOe-(r-n);if(n=r,i>0){if(++e>=dOe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var gOe=mOe,yOe=hOe,bOe=gOe,wOe=bOe(yOe),xOe=wOe,_Oe=qh,SOe=iOe,EOe=xOe;function COe(t,e){return EOe(SOe(t,e,_Oe),t+"")}var AOe=COe,TOe=vO,POe=rx,OOe=IO,kOe=Iu;function ROe(t,e,n){if(!kOe(n))return!1;var r=typeof e;return(r=="number"?POe(n)&&OOe(e,n.length):r=="string"&&e in n)?TOe(n[e],t):!1}var ox=ROe,IOe=x8,DOe=ZPe,NOe=AOe,gj=ox,MOe=NOe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&gj(t,e[0],e[1])?e=[]:n>2&&gj(e[0],e[1],e[2])&&(e=[e[0]]),DOe(t,IOe(e,1),[])}),$Oe=MOe;const jO=wt($Oe);function cv(t){"@babel/helpers - typeof";return cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(t)}function KC(){return KC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KC.apply(this,arguments)}function jOe(t,e){return UOe(t)||BOe(t,e)||FOe(t,e)||LOe()}function LOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FOe(t,e){if(t){if(typeof t=="string")return yj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yj(t,e)}}function yj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BOe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function UOe(t){if(Array.isArray(t))return t}function bj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bj(Object(n),!0).forEach(function(r){VOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VOe(t,e,n){return e=WOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WOe(t){var e=zOe(t,"string");return cv(e)=="symbol"?e:e+""}function zOe(t,e){if(cv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(cv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HOe(t){return Array.isArray(t)&&jn(t[0])&&jn(t[1])?t.join(" ~ "):t}var GOe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,u=e.labelStyle,l=u===void 0?{}:u,c=e.payload,f=e.formatter,h=e.itemSorter,d=e.wrapperClassName,p=e.labelClassName,v=e.label,m=e.labelFormatter,g=e.accessibilityLayer,y=g===void 0?!1:g,b=function(){if(c&&c.length){var R={padding:0,margin:0},I=(h?jO(c,h):c).map(function(M,B){if(M.type==="none")return null;var z=W_({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},s),U=M.formatter||f||HOe,$=M.value,L=M.name,H=$,X=L;if(U&&H!=null&&X!=null){var q=U($,L,M,B,c);if(Array.isArray(q)){var J=jOe(q,2);H=J[0],X=J[1]}else H=q}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:z},jn(X)?V.createElement("span",{className:"recharts-tooltip-item-name"},X):null,jn(X)?V.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,V.createElement("span",{className:"recharts-tooltip-item-value"},H),V.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:R},I)}return null},_=W_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),x=W_({margin:0},l),S=!Qe(v),E=S?v:"",C=qe("recharts-default-tooltip",d),A=qe("recharts-tooltip-label",p);S&&m&&c!==void 0&&c!==null&&(E=m(v,c));var T=y?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",KC({className:C,style:_},T),V.createElement("p",{className:A,style:x},V.isValidElement(E)?E:"".concat(E)),b())};function fv(t){"@babel/helpers - typeof";return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fv(t)}function Dg(t,e,n){return e=qOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qOe(t){var e=KOe(t,"string");return fv(e)=="symbol"?e:e+""}function KOe(t,e){if(fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ed="recharts-tooltip-wrapper",XOe={visibility:"hidden"};function YOe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return qe(Ed,Dg(Dg(Dg(Dg({},"".concat(Ed,"-right"),ve(n)&&e&&ve(e.x)&&n>=e.x),"".concat(Ed,"-left"),ve(n)&&e&&ve(e.x)&&n<e.x),"".concat(Ed,"-bottom"),ve(r)&&e&&ve(e.y)&&r>=e.y),"".concat(Ed,"-top"),ve(r)&&e&&ve(e.y)&&r<e.y))}function wj(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,u=t.viewBox,l=t.viewBoxDimension;if(o&&ve(o[r]))return o[r];var c=n[r]-s-i,f=n[r]+i;if(e[r])return a[r]?c:f;if(a[r]){var h=c,d=u[r];return h<d?Math.max(f,u[r]):Math.max(c,u[r])}var p=f+s,v=u[r]+l;return p>v?Math.max(c,u[r]):Math.max(f,u[r])}function JOe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function QOe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,u=t.viewBox,l,c,f;return a.height>0&&a.width>0&&n?(c=wj({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),f=wj({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),l=JOe({translateX:c,translateY:f,useTranslate3d:s})):l=XOe,{cssProperties:l,cssClasses:YOe({translateX:c,translateY:f,coordinate:n})}}function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function xj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _j(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xj(Object(n),!0).forEach(function(r){YC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZOe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A8(r.key),r)}}function tke(t,e,n){return e&&eke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nke(t,e,n){return e=G0(e),rke(t,C8()?Reflect.construct(e,n||[],G0(t).constructor):e.apply(t,n))}function rke(t,e){if(e&&(rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ike(t)}function ike(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C8=function(){return!!t})()}function G0(t){return G0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},G0(t)}function oke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XC(t,e)}function XC(t,e){return XC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XC(t,e)}function YC(t,e,n){return e=A8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A8(t){var e=ake(t,"string");return rh(e)=="symbol"?e:e+""}function ake(t,e){if(rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sj=1,ske=function(t){function e(){var n;ZOe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=nke(this,e,[].concat(i)),YC(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),YC(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,u,l,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(u=n.props.coordinate)===null||u===void 0?void 0:u.x)!==null&&s!==void 0?s:0,y:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&l!==void 0?l:0}})}}),n}return oke(e,t),tke(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Sj||Math.abs(r.height-this.state.lastBoundingBox.height)>Sj)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,u=i.animationEasing,l=i.children,c=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,d=i.offset,p=i.position,v=i.reverseDirection,m=i.useTranslate3d,g=i.viewBox,y=i.wrapperStyle,b=QOe({allowEscapeViewBox:a,coordinate:c,offsetTopLeft:d,position:p,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:g}),_=b.cssClasses,x=b.cssProperties,S=_j(_j({transition:h&&o?"transform ".concat(s,"ms ").concat(u):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&f?"visible":"hidden",position:"absolute",top:0,left:0},y);return V.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(C){r.wrapperNode=C}},l)}}])}(k.PureComponent),uke=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},qa={isSsr:uke(),get:function(e){return qa[e]},set:function(e,n){if(typeof e=="string")qa[e]=n;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(i){qa[i]=e[i]})}}};function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function Ej(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ej(Object(n),!0).forEach(function(r){LO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ej(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P8(r.key),r)}}function fke(t,e,n){return e&&cke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hke(t,e,n){return e=q0(e),dke(t,T8()?Reflect.construct(e,n||[],q0(t).constructor):e.apply(t,n))}function dke(t,e){if(e&&(ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pke(t)}function pke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T8=function(){return!!t})()}function q0(t){return q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},q0(t)}function vke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JC(t,e)}function JC(t,e){return JC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JC(t,e)}function LO(t,e,n){return e=P8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P8(t){var e=mke(t,"string");return ih(e)=="symbol"?e:e+""}function mke(t,e){if(ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gke(t){return t.dataKey}function yke(t,e){return V.isValidElement(t)?V.cloneElement(t,e):typeof t=="function"?V.createElement(t,e):V.createElement(GOe,e)}var Ho=function(t){function e(){return lke(this,e),hke(this,e,arguments)}return vke(e,t),fke(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,u=i.animationEasing,l=i.content,c=i.coordinate,f=i.filterNull,h=i.isAnimationActive,d=i.offset,p=i.payload,v=i.payloadUniqBy,m=i.position,g=i.reverseDirection,y=i.useTranslate3d,b=i.viewBox,_=i.wrapperStyle,x=p??[];f&&x.length&&(x=g8(p.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),v,gke));var S=x.length>0;return V.createElement(ske,{allowEscapeViewBox:a,animationDuration:s,animationEasing:u,isAnimationActive:h,active:o,coordinate:c,hasPayload:S,offset:d,position:m,reverseDirection:g,useTranslate3d:y,viewBox:b,wrapperStyle:_},yke(l,Cj(Cj({},this.props),{},{payload:x})))}}])}(k.PureComponent);LO(Ho,"displayName","Tooltip");LO(Ho,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!qa.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var bke=Ca,wke=function(){return bke.Date.now()},xke=wke,_ke=/\s/;function Ske(t){for(var e=t.length;e--&&_ke.test(t.charAt(e)););return e}var Eke=Ske,Cke=Eke,Ake=/^\s+/;function Tke(t){return t&&t.slice(0,Cke(t)+1).replace(Ake,"")}var Pke=Tke,Oke=Pke,Aj=Iu,kke=Bh,Tj=NaN,Rke=/^[-+]0x[0-9a-f]+$/i,Ike=/^0b[01]+$/i,Dke=/^0o[0-7]+$/i,Nke=parseInt;function Mke(t){if(typeof t=="number")return t;if(kke(t))return Tj;if(Aj(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Aj(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Oke(t);var n=Ike.test(t);return n||Dke.test(t)?Nke(t.slice(2),n?2:8):Rke.test(t)?Tj:+t}var O8=Mke,$ke=Iu,z_=xke,Pj=O8,jke="Expected a function",Lke=Math.max,Fke=Math.min;function Bke(t,e,n){var r,i,o,a,s,u,l=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(jke);e=Pj(e)||0,$ke(n)&&(c=!!n.leading,f="maxWait"in n,o=f?Lke(Pj(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h);function d(S){var E=r,C=i;return r=i=void 0,l=S,a=t.apply(C,E),a}function p(S){return l=S,s=setTimeout(g,e),c?d(S):a}function v(S){var E=S-u,C=S-l,A=e-E;return f?Fke(A,o-C):A}function m(S){var E=S-u,C=S-l;return u===void 0||E>=e||E<0||f&&C>=o}function g(){var S=z_();if(m(S))return y(S);s=setTimeout(g,v(S))}function y(S){return s=void 0,h&&r?d(S):(r=i=void 0,a)}function b(){s!==void 0&&clearTimeout(s),l=0,r=u=i=s=void 0}function _(){return s===void 0?a:y(z_())}function x(){var S=z_(),E=m(S);if(r=arguments,i=this,u=S,E){if(s===void 0)return p(u);if(f)return clearTimeout(s),s=setTimeout(g,e),d(u)}return s===void 0&&(s=setTimeout(g,e)),a}return x.cancel=b,x.flush=_,x}var Uke=Bke,Vke=Uke,Wke=Iu,zke="Expected a function";function Hke(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(zke);return Wke(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Vke(t,e,{leading:r,maxWait:e,trailing:i})}var Gke=Hke;const k8=wt(Gke);function hv(t){"@babel/helpers - typeof";return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(t)}function Oj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ng(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oj(Object(n),!0).forEach(function(r){qke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qke(t,e,n){return e=Kke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kke(t){var e=Xke(t,"string");return hv(e)=="symbol"?e:e+""}function Xke(t,e){if(hv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yke(t,e){return eRe(t)||Zke(t,e)||Qke(t,e)||Jke()}function Jke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qke(t,e){if(t){if(typeof t=="string")return kj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kj(t,e)}}function kj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function eRe(t){if(Array.isArray(t))return t}var R8=k.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,u=s===void 0?"100%":s,l=t.minWidth,c=l===void 0?0:l,f=t.minHeight,h=t.maxHeight,d=t.children,p=t.debounce,v=p===void 0?0:p,m=t.id,g=t.className,y=t.onResize,b=t.style,_=b===void 0?{}:b,x=k.useRef(null),S=k.useRef();S.current=y,k.useImperativeHandle(e,function(){return Object.defineProperty(x.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),x.current},configurable:!0})});var E=k.useState({containerWidth:i.width,containerHeight:i.height}),C=Yke(E,2),A=C[0],T=C[1],P=k.useCallback(function(I,M){T(function(B){var z=Math.round(I),U=Math.round(M);return B.containerWidth===z&&B.containerHeight===U?B:{containerWidth:z,containerHeight:U}})},[]);k.useEffect(function(){var I=function(L){var H,X=L[0].contentRect,q=X.width,J=X.height;P(q,J),(H=S.current)===null||H===void 0||H.call(S,q,J)};v>0&&(I=k8(I,v,{trailing:!0,leading:!1}));var M=new ResizeObserver(I),B=x.current.getBoundingClientRect(),z=B.width,U=B.height;return P(z,U),M.observe(x.current),function(){M.disconnect()}},[P,v]);var R=k.useMemo(function(){var I=A.containerWidth,M=A.containerHeight;if(I<0||M<0)return null;Ga(yl(a)||yl(u),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,u),Ga(!n||n>0,"The aspect(%s) must be greater than zero.",n);var B=yl(a)?I:a,z=yl(u)?M:u;n&&n>0&&(B?z=B/n:z&&(B=z*n),h&&z>h&&(z=h)),Ga(B>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,z,a,u,c,f,n);var U=!Array.isArray(d)&&Ha(d.type).endsWith("Chart");return V.Children.map(d,function($){return V.isValidElement($)?k.cloneElement($,Ng({width:B,height:z},U?{style:Ng({height:"100%",width:"100%",maxHeight:z,maxWidth:B},$.props.style)}:{})):$})},[n,d,u,h,f,c,A,a]);return V.createElement("div",{id:m?"".concat(m):void 0,className:qe("recharts-responsive-container",g),style:Ng(Ng({},_),{},{width:a,height:u,minWidth:c,minHeight:f,maxHeight:h}),ref:x},R)}),ax=function(e){return null};ax.displayName="Cell";function dv(t){"@babel/helpers - typeof";return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dv(t)}function Rj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rj(Object(n),!0).forEach(function(r){tRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tRe(t,e,n){return e=nRe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nRe(t){var e=rRe(t,"string");return dv(e)=="symbol"?e:e+""}function rRe(t,e){if(dv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sc={widthCache:{},cacheCount:0},iRe=2e3,oRe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Ij="recharts_measurement_span";function aRe(t){var e=QC({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var hp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||qa.isSsr)return{width:0,height:0};var r=aRe(n),i=JSON.stringify({text:e,copyStyle:r});if(Sc.widthCache[i])return Sc.widthCache[i];try{var o=document.getElementById(Ij);o||(o=document.createElement("span"),o.setAttribute("id",Ij),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=QC(QC({},oRe),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),u={width:s.width,height:s.height};return Sc.widthCache[i]=u,++Sc.cacheCount>iRe&&(Sc.cacheCount=0,Sc.widthCache={}),u}catch{return{width:0,height:0}}},sRe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function pv(t){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(t)}function K0(t,e){return fRe(t)||cRe(t,e)||lRe(t,e)||uRe()}function uRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lRe(t,e){if(t){if(typeof t=="string")return Dj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dj(t,e)}}function Dj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cRe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function fRe(t){if(Array.isArray(t))return t}function hRe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pRe(r.key),r)}}function dRe(t,e,n){return e&&Nj(t.prototype,e),n&&Nj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pRe(t){var e=vRe(t,"string");return pv(e)=="symbol"?e:e+""}function vRe(t,e){if(pv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$j=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mRe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,gRe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,I8={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},yRe=Object.keys(I8),Yc="NaN";function bRe(t,e){return t*I8[e]}var Mg=function(){function t(e,n){hRe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!mRe.test(n)&&(this.num=NaN,this.unit=""),yRe.includes(n)&&(this.num=bRe(e,n),this.unit="px")}return dRe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=gRe.exec(n))!==null&&r!==void 0?r:[],o=K0(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function D8(t){if(t.includes(Yc))return Yc;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=Mj.exec(e))!==null&&n!==void 0?n:[],i=K0(r,4),o=i[1],a=i[2],s=i[3],u=Mg.parse(o??""),l=Mg.parse(s??""),c=a==="*"?u.multiply(l):u.divide(l);if(c.isNaN())return Yc;e=e.replace(Mj,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=$j.exec(e))!==null&&f!==void 0?f:[],d=K0(h,4),p=d[1],v=d[2],m=d[3],g=Mg.parse(p??""),y=Mg.parse(m??""),b=v==="+"?g.add(y):g.subtract(y);if(b.isNaN())return Yc;e=e.replace($j,b.toString())}return e}var jj=/\(([^()]*)\)/;function wRe(t){for(var e=t;e.includes("(");){var n=jj.exec(e),r=K0(n,2),i=r[1];e=e.replace(jj,D8(i))}return e}function xRe(t){var e=t.replace(/\s+/g,"");return e=wRe(e),e=D8(e),e}function _Re(t){try{return xRe(t)}catch{return Yc}}function H_(t){var e=_Re(t.slice(5,-1));return e===Yc?"":e}var SRe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ERe=["dx","dy","angle","className","breakAll"];function ZC(){return ZC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZC.apply(this,arguments)}function Lj(t,e){if(t==null)return{};var n=CRe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CRe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Fj(t,e){return ORe(t)||PRe(t,e)||TRe(t,e)||ARe()}function ARe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TRe(t,e){if(t){if(typeof t=="string")return Bj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bj(t,e)}}function Bj(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PRe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function ORe(t){if(Array.isArray(t))return t}var N8=/[ \f\n\r\t\v\u2028\u2029]+/,M8=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];Qe(n)||(r?o=n.toString().split(""):o=n.toString().split(N8));var a=o.map(function(u){return{word:u,width:hp(u,i).width}}),s=r?0:hp("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},kRe=function(e,n,r,i,o){var a=e.maxLines,s=e.children,u=e.style,l=e.breakAll,c=ve(a),f=s,h=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(z,U){var $=U.word,L=U.width,H=z[z.length-1];if(H&&(i==null||o||H.width+L+r<Number(i)))H.words.push($),H.width+=L+r;else{var X={words:[$],width:L};z.push(X)}return z},[])},d=h(n),p=function(B){return B.reduce(function(z,U){return z.width>U.width?z:U})};if(!c)return d;for(var v="",m=function(B){var z=f.slice(0,B),U=M8({breakAll:l,style:u,children:z+v}).wordsWithComputedWidth,$=h(U),L=$.length>a||p($).width>Number(i);return[L,$]},g=0,y=f.length-1,b=0,_;g<=y&&b<=f.length-1;){var x=Math.floor((g+y)/2),S=x-1,E=m(S),C=Fj(E,2),A=C[0],T=C[1],P=m(x),R=Fj(P,1),I=R[0];if(!A&&!I&&(g=x+1),A&&I&&(y=x-1),!A&&I){_=T;break}b++}return _||d},Uj=function(e){var n=Qe(e)?[]:e.toString().split(N8);return[{words:n}]},RRe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!qa.isSsr){var u,l,c=M8({breakAll:a,children:i,style:o});if(c){var f=c.wordsWithComputedWidth,h=c.spaceWidth;u=f,l=h}else return Uj(i);return kRe({breakAll:a,children:i,maxLines:s,style:o},u,l,n,r)}return Uj(i)},Vj="#808080",ql=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,u=e.capHeight,l=u===void 0?"0.71em":u,c=e.scaleToFit,f=c===void 0?!1:c,h=e.textAnchor,d=h===void 0?"start":h,p=e.verticalAnchor,v=p===void 0?"end":p,m=e.fill,g=m===void 0?Vj:m,y=Lj(e,SRe),b=k.useMemo(function(){return RRe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:f,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,f,y.style,y.width]),_=y.dx,x=y.dy,S=y.angle,E=y.className,C=y.breakAll,A=Lj(y,ERe);if(!jn(r)||!jn(o))return null;var T=r+(ve(_)?_:0),P=o+(ve(x)?x:0),R;switch(v){case"start":R=H_("calc(".concat(l,")"));break;case"middle":R=H_("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(l," / 2))"));break;default:R=H_("calc(".concat(b.length-1," * -").concat(s,")"));break}var I=[];if(f){var M=b[0].width,B=y.width;I.push("scale(".concat((ve(B)?B/M:1)/M,")"))}return S&&I.push("rotate(".concat(S,", ").concat(T,", ").concat(P,")")),I.length&&(A.transform=I.join(" ")),V.createElement("text",ZC({},Fe(A,!0),{x:T,y:P,className:qe("recharts-text",E),textAnchor:d,fill:g.includes("url")?Vj:g}),b.map(function(z,U){var $=z.words.join(C?"":" ");return V.createElement("tspan",{x:T,dy:U===0?R:s,key:"".concat($,"-").concat(U)},$)}))};function fu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function IRe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function FO(t){let e,n,r;t.length!==2?(e=fu,n=(s,u)=>fu(t(s),u),r=(s,u)=>t(s)-u):(e=t===fu||t===IRe?t:DRe,n=t,r=t);function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function a(s,u,l=0,c=s.length){const f=i(s,u,l,c-1);return f>l&&r(s[f-1],u)>-r(s[f],u)?f-1:f}return{left:i,center:a,right:o}}function DRe(){return 0}function $8(t){return t===null?NaN:+t}function*NRe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const MRe=FO(fu),xm=MRe.right;FO($8).center;class Wj extends Map{constructor(e,n=LRe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(zj(this,e))}has(e){return super.has(zj(this,e))}set(e,n){return super.set($Re(this,e),n)}delete(e){return super.delete(jRe(this,e))}}function zj({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function $Re({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function jRe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function LRe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function FRe(t=fu){if(t===fu)return j8;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function j8(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const BRe=Math.sqrt(50),URe=Math.sqrt(10),VRe=Math.sqrt(2);function X0(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=BRe?10:o>=URe?5:o>=VRe?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?X0(t,e,n*2):[s,u,l]}function e2(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?X0(e,t,n):X0(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)u[l]=(o-l)/-a;else for(let l=0;l<s;++l)u[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)u[l]=(i+l)/-a;else for(let l=0;l<s;++l)u[l]=(i+l)*a;return u}function t2(t,e,n){return e=+e,t=+t,n=+n,X0(t,e,n)[2]}function n2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?t2(e,t,n):t2(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Hj(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Gj(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function L8(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?j8:FRe(i);r>n;){if(r-n>600){const u=r-n+1,l=e-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),d=Math.max(n,Math.floor(e-l*f/u+h)),p=Math.min(r,Math.floor(e+(u-l)*f/u+h));L8(t,e,d,p,i)}const o=t[e];let a=n,s=r;for(Cd(t,n,e),i(t[r],o)>0&&Cd(t,n,r);a<s;){for(Cd(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Cd(t,n,s):(++s,Cd(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Cd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function WRe(t,e,n){if(t=Float64Array.from(NRe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Gj(t);if(e>=1)return Hj(t);var r,i=(r-1)*e,o=Math.floor(i),a=Hj(L8(t,o).subarray(0,o+1)),s=Gj(t.subarray(o+1));return a+(s-a)*(i-o)}}function zRe(t,e,n=$8){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function HRe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function to(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function gs(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const r2=Symbol("implicit");function BO(){var t=new Wj,e=[],n=[],r=r2;function i(o){let a=t.get(o);if(a===void 0){if(r!==r2)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new Wj;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return BO(e,n).unknown(r)},to.apply(i,arguments),i}function vv(){var t=BO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,u=0,l=0,c=.5;delete t.unknown;function f(){var h=e().length,d=i<r,p=d?i:r,v=d?r:i;o=(v-p)/Math.max(1,h-u+l*2),s&&(o=Math.floor(o)),p+=(v-p-o*(h-u))*c,a=o*(1-u),s&&(p=Math.round(p),a=Math.round(a));var m=HRe(h).map(function(g){return p+o*g});return n(d?m.reverse():m)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,f()):s},t.padding=function(h){return arguments.length?(u=Math.min(1,l=+h),f()):u},t.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},t.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return vv(e(),[r,i]).round(s).paddingInner(u).paddingOuter(l).align(c)},to.apply(f(),arguments)}function F8(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return F8(e())},t}function dp(){return F8(vv.apply(null,arguments).paddingInner(1))}function UO(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function B8(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _m(){}var mv=.7,Y0=1/mv,Pf="\\s*([+-]?\\d+)\\s*",gv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GRe=/^#([0-9a-f]{3,8})$/,qRe=new RegExp(`^rgb\\(${Pf},${Pf},${Pf}\\)$`),KRe=new RegExp(`^rgb\\(${da},${da},${da}\\)$`),XRe=new RegExp(`^rgba\\(${Pf},${Pf},${Pf},${gv}\\)$`),YRe=new RegExp(`^rgba\\(${da},${da},${da},${gv}\\)$`),JRe=new RegExp(`^hsl\\(${gv},${da},${da}\\)$`),QRe=new RegExp(`^hsla\\(${gv},${da},${da},${gv}\\)$`),qj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};UO(_m,yv,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Kj,formatHex:Kj,formatHex8:ZRe,formatHsl:eIe,formatRgb:Xj,toString:Xj});function Kj(){return this.rgb().formatHex()}function ZRe(){return this.rgb().formatHex8()}function eIe(){return U8(this).formatHsl()}function Xj(){return this.rgb().formatRgb()}function yv(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=GRe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Yj(e):n===3?new Jr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?$g(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?$g(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=qRe.exec(t))?new Jr(e[1],e[2],e[3],1):(e=KRe.exec(t))?new Jr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=XRe.exec(t))?$g(e[1],e[2],e[3],e[4]):(e=YRe.exec(t))?$g(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=JRe.exec(t))?Zj(e[1],e[2]/100,e[3]/100,1):(e=QRe.exec(t))?Zj(e[1],e[2]/100,e[3]/100,e[4]):qj.hasOwnProperty(t)?Yj(qj[t]):t==="transparent"?new Jr(NaN,NaN,NaN,0):null}function Yj(t){return new Jr(t>>16&255,t>>8&255,t&255,1)}function $g(t,e,n,r){return r<=0&&(t=e=n=NaN),new Jr(t,e,n,r)}function tIe(t){return t instanceof _m||(t=yv(t)),t?(t=t.rgb(),new Jr(t.r,t.g,t.b,t.opacity)):new Jr}function i2(t,e,n,r){return arguments.length===1?tIe(t):new Jr(t,e,n,r??1)}function Jr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}UO(Jr,i2,B8(_m,{brighter(t){return t=t==null?Y0:Math.pow(Y0,t),new Jr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?mv:Math.pow(mv,t),new Jr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Jr(Nl(this.r),Nl(this.g),Nl(this.b),J0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jj,formatHex:Jj,formatHex8:nIe,formatRgb:Qj,toString:Qj}));function Jj(){return`#${bl(this.r)}${bl(this.g)}${bl(this.b)}`}function nIe(){return`#${bl(this.r)}${bl(this.g)}${bl(this.b)}${bl((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qj(){const t=J0(this.opacity);return`${t===1?"rgb(":"rgba("}${Nl(this.r)}, ${Nl(this.g)}, ${Nl(this.b)}${t===1?")":`, ${t})`}`}function J0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bl(t){return t=Nl(t),(t<16?"0":"")+t.toString(16)}function Zj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _o(t,e,n,r)}function U8(t){if(t instanceof _o)return new _o(t.h,t.s,t.l,t.opacity);if(t instanceof _m||(t=yv(t)),!t)return new _o;if(t instanceof _o)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new _o(a,s,u,t.opacity)}function rIe(t,e,n,r){return arguments.length===1?U8(t):new _o(t,e,n,r??1)}function _o(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}UO(_o,rIe,B8(_m,{brighter(t){return t=t==null?Y0:Math.pow(Y0,t),new _o(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?mv:Math.pow(mv,t),new _o(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Jr(G_(t>=240?t-240:t+120,i,r),G_(t,i,r),G_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new _o(eL(this.h),jg(this.s),jg(this.l),J0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=J0(this.opacity);return`${t===1?"hsl(":"hsla("}${eL(this.h)}, ${jg(this.s)*100}%, ${jg(this.l)*100}%${t===1?")":`, ${t})`}`}}));function eL(t){return t=(t||0)%360,t<0?t+360:t}function jg(t){return Math.max(0,Math.min(1,t||0))}function G_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const VO=t=>()=>t;function iIe(t,e){return function(n){return t+n*e}}function oIe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function aIe(t){return(t=+t)==1?V8:function(e,n){return n-e?oIe(e,n,t):VO(isNaN(e)?n:e)}}function V8(t,e){var n=e-t;return n?iIe(t,n):VO(isNaN(t)?e:t)}const tL=function t(e){var n=aIe(e);function r(i,o){var a=n((i=i2(i)).r,(o=i2(o)).r),s=n(i.g,o.g),u=n(i.b,o.b),l=V8(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function sIe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function uIe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function lIe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Kh(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function cIe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Q0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function fIe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Kh(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var o2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,q_=new RegExp(o2.source,"g");function hIe(t){return function(){return t}}function dIe(t){return function(e){return t(e)+""}}function pIe(t,e){var n=o2.lastIndex=q_.lastIndex=0,r,i,o,a=-1,s=[],u=[];for(t=t+"",e=e+"";(r=o2.exec(t))&&(i=q_.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:Q0(r,i)})),n=q_.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?u[0]?dIe(u[0].x):hIe(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function Kh(t,e){var n=typeof e,r;return e==null||n==="boolean"?VO(e):(n==="number"?Q0:n==="string"?(r=yv(e))?(e=r,tL):pIe:e instanceof yv?tL:e instanceof Date?cIe:uIe(e)?sIe:Array.isArray(e)?lIe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?fIe:Q0)(t,e)}function WO(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function vIe(t,e){e===void 0&&(e=t,t=Kh);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function mIe(t){return function(){return t}}function Z0(t){return+t}var nL=[0,1];function Fr(t){return t}function a2(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:mIe(isNaN(e)?NaN:.5)}function gIe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function yIe(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=a2(i,r),o=n(a,o)):(r=a2(r,i),o=n(o,a)),function(s){return o(r(s))}}function bIe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=a2(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var u=xm(t,s,1,r)-1;return o[u](i[u](s))}}function Sm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function sx(){var t=nL,e=nL,n=Kh,r,i,o,a=Fr,s,u,l;function c(){var h=Math.min(t.length,e.length);return a!==Fr&&(a=gIe(t[0],t[h-1])),s=h>2?bIe:yIe,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?o:(u||(u=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((l||(l=s(e,t.map(r),Q0)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Z0),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=WO,c()},f.clamp=function(h){return arguments.length?(a=h?!0:Fr,c()):a!==Fr},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,c()}}function zO(){return sx()(Fr,Fr)}function wIe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function eb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function oh(t){return t=eb(Math.abs(t)),t?t[1]:NaN}function xIe(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function _Ie(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var SIe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bv(t){if(!(e=SIe.exec(t)))throw new Error("invalid format: "+t);var e;return new HO({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}bv.prototype=HO.prototype;function HO(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}HO.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function EIe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var W8;function CIe(t,e){var n=eb(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(W8=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+eb(t,Math.max(0,e+o-1))[0]}function rL(t,e){var n=eb(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const iL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:wIe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>rL(t*100,e),r:rL,s:CIe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oL(t){return t}var aL=Array.prototype.map,sL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function AIe(t){var e=t.grouping===void 0||t.thousands===void 0?oL:xIe(aL.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?oL:_Ie(aL.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=bv(f);var h=f.fill,d=f.align,p=f.sign,v=f.symbol,m=f.zero,g=f.width,y=f.comma,b=f.precision,_=f.trim,x=f.type;x==="n"?(y=!0,x="g"):iL[x]||(b===void 0&&(b=12),_=!0,x="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var S=v==="$"?n:v==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=v==="$"?r:/[%p]/.test(x)?a:"",C=iL[x],A=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function T(P){var R=S,I=E,M,B,z;if(x==="c")I=C(P)+I,P="";else{P=+P;var U=P<0||1/P<0;if(P=isNaN(P)?u:C(Math.abs(P),b),_&&(P=EIe(P)),U&&+P==0&&p!=="+"&&(U=!1),R=(U?p==="("?p:s:p==="-"||p==="("?"":p)+R,I=(x==="s"?sL[8+W8/3]:"")+I+(U&&p==="("?")":""),A){for(M=-1,B=P.length;++M<B;)if(z=P.charCodeAt(M),48>z||z>57){I=(z===46?i+P.slice(M+1):P.slice(M))+I,P=P.slice(0,M);break}}}y&&!m&&(P=e(P,1/0));var $=R.length+P.length+I.length,L=$<g?new Array(g-$+1).join(h):"";switch(y&&m&&(P=e(L+P,L.length?g-I.length:1/0),L=""),d){case"<":P=R+P+I+L;break;case"=":P=R+L+P+I;break;case"^":P=L.slice(0,$=L.length>>1)+R+P+I+L.slice($);break;default:P=L+R+P+I;break}return o(P)}return T.toString=function(){return f+""},T}function c(f,h){var d=l((f=bv(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(oh(h)/3)))*3,v=Math.pow(10,-p),m=sL[8+p/3];return function(g){return d(v*g)+m}}return{format:l,formatPrefix:c}}var Lg,GO,z8;TIe({thousands:",",grouping:[3],currency:["$",""]});function TIe(t){return Lg=AIe(t),GO=Lg.format,z8=Lg.formatPrefix,Lg}function PIe(t){return Math.max(0,-oh(Math.abs(t)))}function OIe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(oh(e)/3)))*3-oh(Math.abs(t)))}function kIe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,oh(e)-oh(t))+1}function H8(t,e,n,r){var i=n2(t,e,n),o;switch(r=bv(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=OIe(i,a))&&(r.precision=o),z8(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=kIe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=PIe(i))&&(r.precision=o-(r.type==="%")*2);break}}return GO(r)}function Nu(t){var e=t.domain;return t.ticks=function(n){var r=e();return e2(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return H8(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],u,l,c=10;for(s<a&&(l=a,a=s,s=l,l=i,i=o,o=l);c-- >0;){if(l=t2(a,s,n),l===u)return r[i]=a,r[o]=s,e(r);if(l>0)a=Math.floor(a/l)*l,s=Math.ceil(s/l)*l;else if(l<0)a=Math.ceil(a*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function tb(){var t=zO();return t.copy=function(){return Sm(t,tb())},to.apply(t,arguments),Nu(t)}function G8(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Z0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return G8(t).unknown(e)},t=arguments.length?Array.from(t,Z0):[0,1],Nu(n)}function q8(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function uL(t){return Math.log(t)}function lL(t){return Math.exp(t)}function RIe(t){return-Math.log(-t)}function IIe(t){return-Math.exp(-t)}function DIe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function NIe(t){return t===10?DIe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function MIe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function cL(t){return(e,n)=>-t(-e,n)}function qO(t){const e=t(uL,lL),n=e.domain;let r=10,i,o;function a(){return i=MIe(r),o=NIe(r),n()[0]<0?(i=cL(i),o=cL(o),t(RIe,IIe)):t(uL,lL),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),p,v;const m=s==null?10:+s;let g=[];if(!(r%1)&&d-h<m){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(p=1;p<r;++p)if(v=h<0?p/o(-h):p*o(h),!(v<l)){if(v>c)break;g.push(v)}}else for(;h<=d;++h)for(p=r-1;p>=1;--p)if(v=h>0?p/o(-h):p*o(h),!(v<l)){if(v>c)break;g.push(v)}g.length*2<m&&(g=e2(l,c,m))}else g=e2(h,d,Math.min(d-h,m)).map(o);return f?g.reverse():g},e.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=bv(u)).precision==null&&(u.trim=!0),u=GO(u)),s===1/0)return u;const l=Math.max(1,r*s/e.ticks().length);return c=>{let f=c/o(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},e.nice=()=>n(q8(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function K8(){const t=qO(sx()).domain([1,10]);return t.copy=()=>Sm(t,K8()).base(t.base()),to.apply(t,arguments),t}function fL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function hL(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function KO(t){var e=1,n=t(fL(e),hL(e));return n.constant=function(r){return arguments.length?t(fL(e=+r),hL(e)):e},Nu(n)}function X8(){var t=KO(sx());return t.copy=function(){return Sm(t,X8()).constant(t.constant())},to.apply(t,arguments)}function dL(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function $Ie(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function jIe(t){return t<0?-t*t:t*t}function XO(t){var e=t(Fr,Fr),n=1;function r(){return n===1?t(Fr,Fr):n===.5?t($Ie,jIe):t(dL(n),dL(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Nu(e)}function YO(){var t=XO(sx());return t.copy=function(){return Sm(t,YO()).exponent(t.exponent())},to.apply(t,arguments),t}function LIe(){return YO.apply(null,arguments).exponent(.5)}function pL(t){return Math.sign(t)*t*t}function FIe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Y8(){var t=zO(),e=[0,1],n=!1,r;function i(o){var a=FIe(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(pL(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Z0)).map(pL)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return Y8(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},to.apply(i,arguments),Nu(i)}function J8(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=zRe(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[xm(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(fu),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return J8().domain(t).range(e).unknown(r)},to.apply(o,arguments)}function Q8(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(u){return u!=null&&u<=u?i[xm(r,u,0,n)]:o}function s(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,s()):[t,e]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,s()):i.slice()},a.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[t,r[0]]:l>=n?[r[n-1],e]:[r[l-1],r[l]]},a.unknown=function(u){return arguments.length&&(o=u),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Q8().domain([t,e]).range(i).unknown(o)},to.apply(Nu(a),arguments)}function Z8(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[xm(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Z8().domain(t).range(e).unknown(n)},to.apply(i,arguments)}const K_=new Date,X_=new Date;function Wn(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const u=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return u;let l;do u.push(l=new Date(+o)),e(o,s),t(o);while(l<o&&o<a);return u},i.filter=o=>Wn(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(K_.setTime(+o),X_.setTime(+a),t(K_),t(X_),Math.floor(n(K_,X_))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const nb=Wn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);nb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):nb);nb.range;const Va=1e3,Gi=Va*60,Wa=Gi*60,rs=Wa*24,JO=rs*7,vL=rs*30,Y_=rs*365,wl=Wn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Va)},(t,e)=>(e-t)/Va,t=>t.getUTCSeconds());wl.range;const QO=Wn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Va)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getMinutes());QO.range;const ZO=Wn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getUTCMinutes());ZO.range;const ek=Wn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Va-t.getMinutes()*Gi)},(t,e)=>{t.setTime(+t+e*Wa)},(t,e)=>(e-t)/Wa,t=>t.getHours());ek.range;const tk=Wn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Wa)},(t,e)=>(e-t)/Wa,t=>t.getUTCHours());tk.range;const Em=Wn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Gi)/rs,t=>t.getDate()-1);Em.range;const ux=Wn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/rs,t=>t.getUTCDate()-1);ux.range;const e9=Wn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/rs,t=>Math.floor(t/rs));e9.range;function ic(t){return Wn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Gi)/JO)}const lx=ic(0),rb=ic(1),BIe=ic(2),UIe=ic(3),ah=ic(4),VIe=ic(5),WIe=ic(6);lx.range;rb.range;BIe.range;UIe.range;ah.range;VIe.range;WIe.range;function oc(t){return Wn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/JO)}const cx=oc(0),ib=oc(1),zIe=oc(2),HIe=oc(3),sh=oc(4),GIe=oc(5),qIe=oc(6);cx.range;ib.range;zIe.range;HIe.range;sh.range;GIe.range;qIe.range;const nk=Wn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());nk.range;const rk=Wn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());rk.range;const is=Wn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());is.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});is.range;const os=Wn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());os.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});os.range;function t9(t,e,n,r,i,o){const a=[[wl,1,Va],[wl,5,5*Va],[wl,15,15*Va],[wl,30,30*Va],[o,1,Gi],[o,5,5*Gi],[o,15,15*Gi],[o,30,30*Gi],[i,1,Wa],[i,3,3*Wa],[i,6,6*Wa],[i,12,12*Wa],[r,1,rs],[r,2,2*rs],[n,1,JO],[e,1,vL],[e,3,3*vL],[t,1,Y_]];function s(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:u(l,c,f),p=d?d.range(l,+c+1):[];return h?p.reverse():p}function u(l,c,f){const h=Math.abs(c-l)/f,d=FO(([,,m])=>m).right(a,h);if(d===a.length)return t.every(n2(l/Y_,c/Y_,f));if(d===0)return nb.every(Math.max(n2(l,c,f),1));const[p,v]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return p.every(v)}return[s,u]}const[KIe,XIe]=t9(os,rk,cx,e9,tk,ZO),[YIe,JIe]=t9(is,nk,lx,Em,ek,QO);function J_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Q_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ad(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function QIe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,l=Td(i),c=Pd(i),f=Td(o),h=Pd(o),d=Td(a),p=Pd(a),v=Td(s),m=Pd(s),g=Td(u),y=Pd(u),b={a:U,A:$,b:L,B:H,c:null,d:xL,e:xL,f:xDe,g:RDe,G:DDe,H:yDe,I:bDe,j:wDe,L:n9,m:_De,M:SDe,p:X,q,Q:EL,s:CL,S:EDe,u:CDe,U:ADe,V:TDe,w:PDe,W:ODe,x:null,X:null,y:kDe,Y:IDe,Z:NDe,"%":SL},_={a:J,A:ae,b:fe,B:he,c:null,d:_L,e:_L,f:LDe,g:KDe,G:YDe,H:MDe,I:$De,j:jDe,L:i9,m:FDe,M:BDe,p:de,q:be,Q:EL,s:CL,S:UDe,u:VDe,U:WDe,V:zDe,w:HDe,W:GDe,x:null,X:null,y:qDe,Y:XDe,Z:JDe,"%":SL},x={a:T,A:P,b:R,B:I,c:M,d:bL,e:bL,f:pDe,g:yL,G:gL,H:wL,I:wL,j:cDe,L:dDe,m:lDe,M:fDe,p:A,q:uDe,Q:mDe,s:gDe,S:hDe,u:rDe,U:iDe,V:oDe,w:nDe,W:aDe,x:B,X:z,y:yL,Y:gL,Z:sDe,"%":vDe};b.x=S(n,b),b.X=S(r,b),b.c=S(e,b),_.x=S(n,_),_.X=S(r,_),_.c=S(e,_);function S(ne,ue){return function(ce){var Z=[],ge=-1,ye=0,De=ne.length,ke,tt,ft;for(ce instanceof Date||(ce=new Date(+ce));++ge<De;)ne.charCodeAt(ge)===37&&(Z.push(ne.slice(ye,ge)),(tt=mL[ke=ne.charAt(++ge)])!=null?ke=ne.charAt(++ge):tt=ke==="e"?" ":"0",(ft=ue[ke])&&(ke=ft(ce,tt)),Z.push(ke),ye=ge+1);return Z.push(ne.slice(ye,ge)),Z.join("")}}function E(ne,ue){return function(ce){var Z=Ad(1900,void 0,1),ge=C(Z,ne,ce+="",0),ye,De;if(ge!=ce.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(ue&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(ye=Q_(Ad(Z.y,0,1)),De=ye.getUTCDay(),ye=De>4||De===0?ib.ceil(ye):ib(ye),ye=ux.offset(ye,(Z.V-1)*7),Z.y=ye.getUTCFullYear(),Z.m=ye.getUTCMonth(),Z.d=ye.getUTCDate()+(Z.w+6)%7):(ye=J_(Ad(Z.y,0,1)),De=ye.getDay(),ye=De>4||De===0?rb.ceil(ye):rb(ye),ye=Em.offset(ye,(Z.V-1)*7),Z.y=ye.getFullYear(),Z.m=ye.getMonth(),Z.d=ye.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),De="Z"in Z?Q_(Ad(Z.y,0,1)).getUTCDay():J_(Ad(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(De+5)%7:Z.w+Z.U*7-(De+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,Q_(Z)):J_(Z)}}function C(ne,ue,ce,Z){for(var ge=0,ye=ue.length,De=ce.length,ke,tt;ge<ye;){if(Z>=De)return-1;if(ke=ue.charCodeAt(ge++),ke===37){if(ke=ue.charAt(ge++),tt=x[ke in mL?ue.charAt(ge++):ke],!tt||(Z=tt(ne,ce,Z))<0)return-1}else if(ke!=ce.charCodeAt(Z++))return-1}return Z}function A(ne,ue,ce){var Z=l.exec(ue.slice(ce));return Z?(ne.p=c.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function T(ne,ue,ce){var Z=d.exec(ue.slice(ce));return Z?(ne.w=p.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function P(ne,ue,ce){var Z=f.exec(ue.slice(ce));return Z?(ne.w=h.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function R(ne,ue,ce){var Z=g.exec(ue.slice(ce));return Z?(ne.m=y.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function I(ne,ue,ce){var Z=v.exec(ue.slice(ce));return Z?(ne.m=m.get(Z[0].toLowerCase()),ce+Z[0].length):-1}function M(ne,ue,ce){return C(ne,e,ue,ce)}function B(ne,ue,ce){return C(ne,n,ue,ce)}function z(ne,ue,ce){return C(ne,r,ue,ce)}function U(ne){return a[ne.getDay()]}function $(ne){return o[ne.getDay()]}function L(ne){return u[ne.getMonth()]}function H(ne){return s[ne.getMonth()]}function X(ne){return i[+(ne.getHours()>=12)]}function q(ne){return 1+~~(ne.getMonth()/3)}function J(ne){return a[ne.getUTCDay()]}function ae(ne){return o[ne.getUTCDay()]}function fe(ne){return u[ne.getUTCMonth()]}function he(ne){return s[ne.getUTCMonth()]}function de(ne){return i[+(ne.getUTCHours()>=12)]}function be(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var ue=S(ne+="",b);return ue.toString=function(){return ne},ue},parse:function(ne){var ue=E(ne+="",!1);return ue.toString=function(){return ne},ue},utcFormat:function(ne){var ue=S(ne+="",_);return ue.toString=function(){return ne},ue},utcParse:function(ne){var ue=E(ne+="",!0);return ue.toString=function(){return ne},ue}}}var mL={"-":"",_:" ",0:"0"},Zn=/^\s*\d+/,ZIe=/^%/,eDe=/[\\^$*+?|[\]().{}]/g;function ct(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function tDe(t){return t.replace(eDe,"\\$&")}function Td(t){return new RegExp("^(?:"+t.map(tDe).join("|")+")","i")}function Pd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function nDe(t,e,n){var r=Zn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function rDe(t,e,n){var r=Zn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function iDe(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function oDe(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function aDe(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function gL(t,e,n){var r=Zn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function yL(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function sDe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function uDe(t,e,n){var r=Zn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function lDe(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function bL(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function cDe(t,e,n){var r=Zn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wL(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function fDe(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function hDe(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function dDe(t,e,n){var r=Zn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function pDe(t,e,n){var r=Zn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vDe(t,e,n){var r=ZIe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function mDe(t,e,n){var r=Zn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function gDe(t,e,n){var r=Zn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function xL(t,e){return ct(t.getDate(),e,2)}function yDe(t,e){return ct(t.getHours(),e,2)}function bDe(t,e){return ct(t.getHours()%12||12,e,2)}function wDe(t,e){return ct(1+Em.count(is(t),t),e,3)}function n9(t,e){return ct(t.getMilliseconds(),e,3)}function xDe(t,e){return n9(t,e)+"000"}function _De(t,e){return ct(t.getMonth()+1,e,2)}function SDe(t,e){return ct(t.getMinutes(),e,2)}function EDe(t,e){return ct(t.getSeconds(),e,2)}function CDe(t){var e=t.getDay();return e===0?7:e}function ADe(t,e){return ct(lx.count(is(t)-1,t),e,2)}function r9(t){var e=t.getDay();return e>=4||e===0?ah(t):ah.ceil(t)}function TDe(t,e){return t=r9(t),ct(ah.count(is(t),t)+(is(t).getDay()===4),e,2)}function PDe(t){return t.getDay()}function ODe(t,e){return ct(rb.count(is(t)-1,t),e,2)}function kDe(t,e){return ct(t.getFullYear()%100,e,2)}function RDe(t,e){return t=r9(t),ct(t.getFullYear()%100,e,2)}function IDe(t,e){return ct(t.getFullYear()%1e4,e,4)}function DDe(t,e){var n=t.getDay();return t=n>=4||n===0?ah(t):ah.ceil(t),ct(t.getFullYear()%1e4,e,4)}function NDe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+ct(e/60|0,"0",2)+ct(e%60,"0",2)}function _L(t,e){return ct(t.getUTCDate(),e,2)}function MDe(t,e){return ct(t.getUTCHours(),e,2)}function $De(t,e){return ct(t.getUTCHours()%12||12,e,2)}function jDe(t,e){return ct(1+ux.count(os(t),t),e,3)}function i9(t,e){return ct(t.getUTCMilliseconds(),e,3)}function LDe(t,e){return i9(t,e)+"000"}function FDe(t,e){return ct(t.getUTCMonth()+1,e,2)}function BDe(t,e){return ct(t.getUTCMinutes(),e,2)}function UDe(t,e){return ct(t.getUTCSeconds(),e,2)}function VDe(t){var e=t.getUTCDay();return e===0?7:e}function WDe(t,e){return ct(cx.count(os(t)-1,t),e,2)}function o9(t){var e=t.getUTCDay();return e>=4||e===0?sh(t):sh.ceil(t)}function zDe(t,e){return t=o9(t),ct(sh.count(os(t),t)+(os(t).getUTCDay()===4),e,2)}function HDe(t){return t.getUTCDay()}function GDe(t,e){return ct(ib.count(os(t)-1,t),e,2)}function qDe(t,e){return ct(t.getUTCFullYear()%100,e,2)}function KDe(t,e){return t=o9(t),ct(t.getUTCFullYear()%100,e,2)}function XDe(t,e){return ct(t.getUTCFullYear()%1e4,e,4)}function YDe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?sh(t):sh.ceil(t),ct(t.getUTCFullYear()%1e4,e,4)}function JDe(){return"+0000"}function SL(){return"%"}function EL(t){return+t}function CL(t){return Math.floor(+t/1e3)}var Ec,a9,s9;QDe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function QDe(t){return Ec=QIe(t),a9=Ec.format,Ec.parse,s9=Ec.utcFormat,Ec.utcParse,Ec}function ZDe(t){return new Date(t)}function eNe(t){return t instanceof Date?+t:+new Date(+t)}function ik(t,e,n,r,i,o,a,s,u,l){var c=zO(),f=c.invert,h=c.domain,d=l(".%L"),p=l(":%S"),v=l("%I:%M"),m=l("%I %p"),g=l("%a %d"),y=l("%b %d"),b=l("%B"),_=l("%Y");function x(S){return(u(S)<S?d:s(S)<S?p:a(S)<S?v:o(S)<S?m:r(S)<S?i(S)<S?g:y:n(S)<S?b:_)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?h(Array.from(S,eNe)):h().map(ZDe)},c.ticks=function(S){var E=h();return t(E[0],E[E.length-1],S??10)},c.tickFormat=function(S,E){return E==null?x:l(E)},c.nice=function(S){var E=h();return(!S||typeof S.range!="function")&&(S=e(E[0],E[E.length-1],S??10)),S?h(q8(E,S)):c},c.copy=function(){return Sm(c,ik(t,e,n,r,i,o,a,s,u,l))},c}function tNe(){return to.apply(ik(YIe,JIe,is,nk,lx,Em,ek,QO,wl,a9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function nNe(){return to.apply(ik(KIe,XIe,os,rk,cx,ux,tk,ZO,wl,s9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function fx(){var t=0,e=1,n,r,i,o,a=Fr,s=!1,u;function l(f){return f==null||isNaN(f=+f)?u:a(i===0?.5:(f=(o(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([t,e]=f,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),l):[t,e]},l.clamp=function(f){return arguments.length?(s=!!f,l):s},l.interpolator=function(f){return arguments.length?(a=f,l):a};function c(f){return function(h){var d,p;return arguments.length?([d,p]=h,a=f(d,p),l):[a(0),a(1)]}}return l.range=c(Kh),l.rangeRound=c(WO),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return o=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),l}}function Mu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function u9(){var t=Nu(fx()(Fr));return t.copy=function(){return Mu(t,u9())},gs.apply(t,arguments)}function l9(){var t=qO(fx()).domain([1,10]);return t.copy=function(){return Mu(t,l9()).base(t.base())},gs.apply(t,arguments)}function c9(){var t=KO(fx());return t.copy=function(){return Mu(t,c9()).constant(t.constant())},gs.apply(t,arguments)}function ok(){var t=XO(fx());return t.copy=function(){return Mu(t,ok()).exponent(t.exponent())},gs.apply(t,arguments)}function rNe(){return ok.apply(null,arguments).exponent(.5)}function f9(){var t=[],e=Fr;function n(r){if(r!=null&&!isNaN(r=+r))return e((xm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(fu),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>WRe(t,o/r))},n.copy=function(){return f9(e).domain(t)},gs.apply(n,arguments)}function hx(){var t=0,e=.5,n=1,r=1,i,o,a,s,u,l=Fr,c,f=!1,h;function d(v){return isNaN(v=+v)?h:(v=.5+((v=+c(v))-o)*(r*v<r*o?s:u),l(f?Math.max(0,Math.min(1,v)):v))}d.domain=function(v){return arguments.length?([t,e,n]=v,i=c(t=+t),o=c(e=+e),a=c(n=+n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,d):[t,e,n]},d.clamp=function(v){return arguments.length?(f=!!v,d):f},d.interpolator=function(v){return arguments.length?(l=v,d):l};function p(v){return function(m){var g,y,b;return arguments.length?([g,y,b]=m,l=vIe(v,[g,y,b]),d):[l(0),l(.5),l(1)]}}return d.range=p(Kh),d.rangeRound=p(WO),d.unknown=function(v){return arguments.length?(h=v,d):h},function(v){return c=v,i=v(t),o=v(e),a=v(n),s=i===o?0:.5/(o-i),u=o===a?0:.5/(a-o),r=o<i?-1:1,d}}function h9(){var t=Nu(hx()(Fr));return t.copy=function(){return Mu(t,h9())},gs.apply(t,arguments)}function d9(){var t=qO(hx()).domain([.1,1,10]);return t.copy=function(){return Mu(t,d9()).base(t.base())},gs.apply(t,arguments)}function p9(){var t=KO(hx());return t.copy=function(){return Mu(t,p9()).constant(t.constant())},gs.apply(t,arguments)}function ak(){var t=XO(hx());return t.copy=function(){return Mu(t,ak()).exponent(t.exponent())},gs.apply(t,arguments)}function iNe(){return ak.apply(null,arguments).exponent(.5)}const AL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:vv,scaleDiverging:h9,scaleDivergingLog:d9,scaleDivergingPow:ak,scaleDivergingSqrt:iNe,scaleDivergingSymlog:p9,scaleIdentity:G8,scaleImplicit:r2,scaleLinear:tb,scaleLog:K8,scaleOrdinal:BO,scalePoint:dp,scalePow:YO,scaleQuantile:J8,scaleQuantize:Q8,scaleRadial:Y8,scaleSequential:u9,scaleSequentialLog:l9,scaleSequentialPow:ok,scaleSequentialQuantile:f9,scaleSequentialSqrt:rNe,scaleSequentialSymlog:c9,scaleSqrt:LIe,scaleSymlog:X8,scaleThreshold:Z8,scaleTime:tNe,scaleUtc:nNe,tickFormat:H8},Symbol.toStringTag,{value:"Module"}));var oNe=Bh;function aNe(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!oNe(a):n(a,s)))var s=a,u=o}return u}var dx=aNe;function sNe(t,e){return t>e}var v9=sNe,uNe=dx,lNe=v9,cNe=qh;function fNe(t){return t&&t.length?uNe(t,cNe,lNe):void 0}var hNe=fNe;const px=wt(hNe);function dNe(t,e){return t<e}var m9=dNe,pNe=dx,vNe=m9,mNe=qh;function gNe(t){return t&&t.length?pNe(t,mNe,vNe):void 0}var yNe=gNe;const vx=wt(yNe);var bNe=bO,wNe=Du,xNe=S8,_Ne=si;function SNe(t,e){var n=_Ne(t)?bNe:xNe;return n(t,wNe(e))}var ENe=SNe,CNe=x8,ANe=ENe;function TNe(t,e){return CNe(ANe(t,e),1)}var PNe=TNe;const ONe=wt(PNe);var kNe=MO;function RNe(t,e){return kNe(t,e)}var INe=RNe;const mx=wt(INe);var Xh=1e9,DNe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},uk,qt=!0,Qi="[DecimalError] ",Ml=Qi+"Invalid argument: ",sk=Qi+"Exponent out of range: ",Yh=Math.floor,rl=Math.pow,NNe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yi,Gn=1e7,Ut=7,g9=9007199254740991,ob=Yh(g9/Ut),_e={};_e.absoluteValue=_e.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};_e.comparedTo=_e.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};_e.decimalPlaces=_e.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ut;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};_e.dividedBy=_e.div=function(t){return Ka(this,new this.constructor(t))};_e.dividedToIntegerBy=_e.idiv=function(t){var e=this,n=e.constructor;return Tt(Ka(e,new n(t),0,1),n.precision)};_e.equals=_e.eq=function(t){return!this.cmp(t)};_e.exponent=function(){return Cn(this)};_e.greaterThan=_e.gt=function(t){return this.cmp(t)>0};_e.greaterThanOrEqualTo=_e.gte=function(t){return this.cmp(t)>=0};_e.isInteger=_e.isint=function(){return this.e>this.d.length-2};_e.isNegative=_e.isneg=function(){return this.s<0};_e.isPositive=_e.ispos=function(){return this.s>0};_e.isZero=function(){return this.s===0};_e.lessThan=_e.lt=function(t){return this.cmp(t)<0};_e.lessThanOrEqualTo=_e.lte=function(t){return this.cmp(t)<1};_e.logarithm=_e.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(yi))throw Error(Qi+"NaN");if(n.s<1)throw Error(Qi+(n.s?"NaN":"-Infinity"));return n.eq(yi)?new r(0):(qt=!1,e=Ka(wv(n,o),wv(t,o),o),qt=!0,Tt(e,i))};_e.minus=_e.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?w9(e,t):y9(e,(t.s=-t.s,t))};_e.modulo=_e.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Qi+"NaN");return n.s?(qt=!1,e=Ka(n,t,0,1).times(t),qt=!0,n.minus(e)):Tt(new r(n),i)};_e.naturalExponential=_e.exp=function(){return b9(this)};_e.naturalLogarithm=_e.ln=function(){return wv(this)};_e.negated=_e.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};_e.plus=_e.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?y9(e,t):w9(e,(t.s=-t.s,t))};_e.precision=_e.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ml+t);if(e=Cn(i)+1,r=i.d.length-1,n=r*Ut+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};_e.squareRoot=_e.sqrt=function(){var t,e,n,r,i,o,a,s=this,u=s.constructor;if(s.s<1){if(!s.s)return new u(0);throw Error(Qi+"NaN")}for(t=Cn(s),qt=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=ia(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Yh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=a=n+3;;)if(o=r,r=o.plus(Ka(s,o,a+2)).times(.5),ia(o.d).slice(0,a)===(e=ia(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Tt(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return qt=!0,Tt(r,n)};_e.times=_e.mul=function(t){var e,n,r,i,o,a,s,u,l,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,n=c.e+t.e,u=h.length,l=d.length,u<l&&(o=h,h=d,d=o,a=u,u=l,l=a),o=[],a=u+l,r=a;r--;)o.push(0);for(r=l;--r>=0;){for(e=0,i=u+r;i>r;)s=o[i]+d[r]*h[i-r-1]+e,o[i--]=s%Gn|0,e=s/Gn|0;o[i]=(o[i]+e)%Gn|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,qt?Tt(t,f.precision):t};_e.toDecimalPlaces=_e.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ba(t,0,Xh),e===void 0?e=r.rounding:ba(e,0,8),Tt(n,t+Cn(n)+1,e))};_e.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Kl(r,!0):(ba(t,0,Xh),e===void 0?e=i.rounding:ba(e,0,8),r=Tt(new i(r),t+1,e),n=Kl(r,!0,t+1)),n};_e.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Kl(i):(ba(t,0,Xh),e===void 0?e=o.rounding:ba(e,0,8),r=Tt(new o(i),t+Cn(i)+1,e),n=Kl(r.abs(),!1,t+Cn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};_e.toInteger=_e.toint=function(){var t=this,e=t.constructor;return Tt(new e(t),Cn(t)+1,e.rounding)};_e.toNumber=function(){return+this};_e.toPower=_e.pow=function(t){var e,n,r,i,o,a,s=this,u=s.constructor,l=12,c=+(t=new u(t));if(!t.s)return new u(yi);if(s=new u(s),!s.s){if(t.s<1)throw Error(Qi+"Infinity");return s}if(s.eq(yi))return s;if(r=u.precision,t.eq(yi))return Tt(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=c<0?-c:c)<=g9){for(i=new u(yi),e=Math.ceil(r/Ut+4),qt=!1;n%2&&(i=i.times(s),PL(i.d,e)),n=Yh(n/2),n!==0;)s=s.times(s),PL(s.d,e);return qt=!0,t.s<0?new u(yi).div(i):Tt(i,r)}}else if(o<0)throw Error(Qi+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,qt=!1,i=t.times(wv(s,r+l)),qt=!0,i=b9(i),i.s=o,i};_e.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=Cn(i),r=Kl(i,n<=o.toExpNeg||n>=o.toExpPos)):(ba(t,1,Xh),e===void 0?e=o.rounding:ba(e,0,8),i=Tt(new o(i),t,e),n=Cn(i),r=Kl(i,t<=n||n<=o.toExpNeg,t)),r};_e.toSignificantDigits=_e.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ba(t,1,Xh),e===void 0?e=r.rounding:ba(e,0,8)),Tt(new r(n),t,e)};_e.toString=_e.valueOf=_e.val=_e.toJSON=_e[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Cn(t),n=t.constructor;return Kl(t,e<=n.toExpNeg||e>=n.toExpPos)};function y9(t,e){var n,r,i,o,a,s,u,l,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),qt?Tt(e,f):e;if(u=t.d,l=e.d,a=t.e,i=e.e,u=u.slice(),o=a-i,o){for(o<0?(r=u,o=-o,s=l.length):(r=l,i=a,s=u.length),a=Math.ceil(f/Ut),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=u.length,o=l.length,s-o<0&&(o=s,r=l,l=u,u=r),n=0;o;)n=(u[--o]=u[o]+l[o]+n)/Gn|0,u[o]%=Gn;for(n&&(u.unshift(n),++i),s=u.length;u[--s]==0;)u.pop();return e.d=u,e.e=i,qt?Tt(e,f):e}function ba(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ml+t)}function ia(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=Ut-r.length,n&&(o+=js(n)),o+=r;a=t[e],r=a+"",n=Ut-r.length,n&&(o+=js(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var Ka=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%Gn|0,a=o/Gn|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,u;if(o!=a)u=o>a?1:-1;else for(s=u=0;s<o;s++)if(r[s]!=i[s]){u=r[s]>i[s]?1:-1;break}return u}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*Gn+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,u,l,c,f,h,d,p,v,m,g,y,b,_,x,S,E,C,A=r.constructor,T=r.s==i.s?1:-1,P=r.d,R=i.d;if(!r.s)return new A(r);if(!i.s)throw Error(Qi+"Division by zero");for(u=r.e-i.e,E=R.length,x=P.length,d=new A(T),p=d.d=[],l=0;R[l]==(P[l]||0);)++l;if(R[l]>(P[l]||0)&&--u,o==null?y=o=A.precision:a?y=o+(Cn(r)-Cn(i))+1:y=o,y<0)return new A(0);if(y=y/Ut+2|0,l=0,E==1)for(c=0,R=R[0],y++;(l<x||c)&&y--;l++)b=c*Gn+(P[l]||0),p[l]=b/R|0,c=b%R|0;else{for(c=Gn/(R[0]+1)|0,c>1&&(R=t(R,c),P=t(P,c),E=R.length,x=P.length),_=E,v=P.slice(0,E),m=v.length;m<E;)v[m++]=0;C=R.slice(),C.unshift(0),S=R[0],R[1]>=Gn/2&&++S;do c=0,s=e(R,v,E,m),s<0?(g=v[0],E!=m&&(g=g*Gn+(v[1]||0)),c=g/S|0,c>1?(c>=Gn&&(c=Gn-1),f=t(R,c),h=f.length,m=v.length,s=e(f,v,h,m),s==1&&(c--,n(f,E<h?C:R,h))):(c==0&&(s=c=1),f=R.slice()),h=f.length,h<m&&f.unshift(0),n(v,f,m),s==-1&&(m=v.length,s=e(R,v,E,m),s<1&&(c++,n(v,E<m?C:R,m))),m=v.length):s===0&&(c++,v=[0]),p[l++]=c,s&&v[0]?v[m++]=P[_]||0:(v=[P[_]],m=1);while((_++<x||v[0]!==void 0)&&y--)}return p[0]||p.shift(),d.e=u,Tt(d,a?o+Cn(d)+1:o)}}();function b9(t,e){var n,r,i,o,a,s,u=0,l=0,c=t.constructor,f=c.precision;if(Cn(t)>16)throw Error(sk+Cn(t));if(!t.s)return new c(yi);for(e==null?(qt=!1,s=f):s=e,a=new c(.03125);t.abs().gte(.1);)t=t.times(a),l+=5;for(r=Math.log(rl(2,l))/Math.LN10*2+5|0,s+=r,n=i=o=new c(yi),c.precision=s;;){if(i=Tt(i.times(t),s),n=n.times(++u),a=o.plus(Ka(i,n,s)),ia(a.d).slice(0,s)===ia(o.d).slice(0,s)){for(;l--;)o=Tt(o.times(o),s);return c.precision=f,e==null?(qt=!0,Tt(o,f)):o}o=a}}function Cn(t){for(var e=t.e*Ut,n=t.d[0];n>=10;n/=10)e++;return e}function Z_(t,e,n){if(e>t.LN10.sd())throw qt=!0,n&&(t.precision=n),Error(Qi+"LN10 precision limit exceeded");return Tt(new t(t.LN10),e)}function js(t){for(var e="";t--;)e+="0";return e}function wv(t,e){var n,r,i,o,a,s,u,l,c,f=1,h=10,d=t,p=d.d,v=d.constructor,m=v.precision;if(d.s<1)throw Error(Qi+(d.s?"NaN":"-Infinity"));if(d.eq(yi))return new v(0);if(e==null?(qt=!1,l=m):l=e,d.eq(10))return e==null&&(qt=!0),Z_(v,l);if(l+=h,v.precision=l,n=ia(p),r=n.charAt(0),o=Cn(d),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)d=d.times(t),n=ia(d.d),r=n.charAt(0),f++;o=Cn(d),r>1?(d=new v("0."+n),o++):d=new v(r+"."+n.slice(1))}else return u=Z_(v,l+2,m).times(o+""),d=wv(new v(r+"."+n.slice(1)),l-h).plus(u),v.precision=m,e==null?(qt=!0,Tt(d,m)):d;for(s=a=d=Ka(d.minus(yi),d.plus(yi),l),c=Tt(d.times(d),l),i=3;;){if(a=Tt(a.times(c),l),u=s.plus(Ka(a,new v(i),l)),ia(u.d).slice(0,l)===ia(s.d).slice(0,l))return s=s.times(2),o!==0&&(s=s.plus(Z_(v,l+2,m).times(o+""))),s=Ka(s,new v(f),l),v.precision=m,e==null?(qt=!0,Tt(s,m)):s;s=u,i+=2}}function TL(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Yh(n/Ut),t.d=[],r=(n+1)%Ut,n<0&&(r+=Ut),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ut;r<i;)t.d.push(+e.slice(r,r+=Ut));e=e.slice(r),r=Ut-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),qt&&(t.e>ob||t.e<-ob))throw Error(sk+n)}else t.s=0,t.e=0,t.d=[0];return t}function Tt(t,e,n){var r,i,o,a,s,u,l,c,f=t.d;for(a=1,o=f[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=Ut,i=e,l=f[c=0];else{if(c=Math.ceil((r+1)/Ut),o=f.length,c>=o)return t;for(l=o=f[c],a=1;o>=10;o/=10)a++;r%=Ut,i=r-Ut+a}if(n!==void 0&&(o=rl(10,a-i-1),s=l/o%10|0,u=e<0||f[c+1]!==void 0||l%o,u=n<4?(s||u)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||u||n==6&&(r>0?i>0?l/rl(10,a-i):0:f[c-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return u?(o=Cn(t),f.length=1,e=e-o-1,f[0]=rl(10,(Ut-e%Ut)%Ut),t.e=Yh(-e/Ut)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=c,o=1,c--):(f.length=c+1,o=rl(10,Ut-r),f[c]=i>0?(l/rl(10,a-i)%rl(10,i)|0)*o:0),u)for(;;)if(c==0){(f[0]+=o)==Gn&&(f[0]=1,++t.e);break}else{if(f[c]+=o,f[c]!=Gn)break;f[c--]=0,o=1}for(r=f.length;f[--r]===0;)f.pop();if(qt&&(t.e>ob||t.e<-ob))throw Error(sk+Cn(t));return t}function w9(t,e){var n,r,i,o,a,s,u,l,c,f,h=t.constructor,d=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),qt?Tt(e,d):e;if(u=t.d,f=e.d,r=e.e,l=t.e,u=u.slice(),a=l-r,a){for(c=a<0,c?(n=u,a=-a,s=f.length):(n=f,r=l,s=u.length),i=Math.max(Math.ceil(d/Ut),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=u.length,s=f.length,c=i<s,c&&(s=i),i=0;i<s;i++)if(u[i]!=f[i]){c=u[i]<f[i];break}a=0}for(c&&(n=u,u=f,f=n,e.s=-e.s),s=u.length,i=f.length-s;i>0;--i)u[s++]=0;for(i=f.length;i>a;){if(u[--i]<f[i]){for(o=i;o&&u[--o]===0;)u[o]=Gn-1;--u[o],u[i]+=Gn}u[i]-=f[i]}for(;u[--s]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,qt?Tt(e,d):e):new h(0)}function Kl(t,e,n){var r,i=Cn(t),o=ia(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+js(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+js(-i-1)+o,n&&(r=n-a)>0&&(o+=js(r))):i>=a?(o+=js(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+js(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=js(r))),t.s<0?"-"+o:o}function PL(t,e){if(t.length>e)return t.length=e,!0}function x9(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Ml+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return TL(a,o.toString())}else if(typeof o!="string")throw Error(Ml+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,NNe.test(o))TL(a,o);else throw Error(Ml+o)}if(i.prototype=_e,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=x9,i.config=i.set=MNe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function MNe(t){if(!t||typeof t!="object")throw Error(Qi+"Object expected");var e,n,r,i=["precision",1,Xh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Yh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ml+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ml+n+": "+r);return this}var uk=x9(DNe);yi=new uk(1);const St=uk;function $Ne(t){return BNe(t)||FNe(t)||LNe(t)||jNe()}function jNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LNe(t,e){if(t){if(typeof t=="string")return s2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s2(t,e)}}function FNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function BNe(t){if(Array.isArray(t))return s2(t)}function s2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var UNe=function(e){return e},_9={"@@functional/placeholder":!0},S9=function(e){return e===_9},OL=function(e){return function n(){return arguments.length===0||arguments.length===1&&S9(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},VNe=function t(e,n){return e===1?n:OL(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==_9}).length;return a>=e?n.apply(void 0,i):t(e-a,OL(function(){for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];var c=i.map(function(f){return S9(f)?u.shift():f});return n.apply(void 0,$Ne(c).concat(u))}))})},gx=function(e){return VNe(e.length,e)},u2=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},WNe=gx(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),zNe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return UNe;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,u){return u(s)},o.apply(void 0,arguments))}},l2=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},E9=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,u){return s===n[u]})||(n=o,r=e.apply(void 0,o)),r}};function HNe(t){var e;return t===0?e=1:e=Math.floor(new St(t).abs().log(10).toNumber())+1,e}function GNe(t,e,n){for(var r=new St(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var qNe=gx(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),KNe=gx(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),XNe=gx(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const yx={rangeStep:GNe,getDigitCount:HNe,interpolateNumber:qNe,uninterpolateNumber:KNe,uninterpolateTruncation:XNe};function c2(t){return QNe(t)||JNe(t)||C9(t)||YNe()}function YNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JNe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function QNe(t){if(Array.isArray(t))return f2(t)}function xv(t,e){return tMe(t)||eMe(t,e)||C9(t,e)||ZNe()}function ZNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C9(t,e){if(t){if(typeof t=="string")return f2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f2(t,e)}}function f2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eMe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(u){i=!0,o=u}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function tMe(t){if(Array.isArray(t))return t}function A9(t){var e=xv(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function T9(t,e,n){if(t.lte(0))return new St(0);var r=yx.getDigitCount(t.toNumber()),i=new St(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new St(Math.ceil(o.div(a).toNumber())).add(n).mul(a),u=s.mul(i);return e?u:new St(Math.ceil(u))}function nMe(t,e,n){var r=1,i=new St(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new St(10).pow(yx.getDigitCount(t)-1),i=new St(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new St(Math.floor(t)))}else t===0?i=new St(Math.floor((e-1)/2)):n||(i=new St(Math.floor(t)));var a=Math.floor((e-1)/2),s=zNe(WNe(function(u){return i.add(new St(u-a).mul(r)).toNumber()}),u2);return s(0,e)}function P9(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new St(0),tickMin:new St(0),tickMax:new St(0)};var o=T9(new St(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new St(0):(a=new St(t).add(e).div(2),a=a.sub(new St(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),u=Math.ceil(new St(e).sub(a).div(o).toNumber()),l=s+u+1;return l>n?P9(t,e,n,r,i+1):(l<n&&(u=e>0?u+(n-l):u,s=e>0?s:s+(n-l)),{step:o,tickMin:a.sub(new St(s).mul(o)),tickMax:a.add(new St(u).mul(o))})}function rMe(t){var e=xv(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=A9([n,r]),u=xv(s,2),l=u[0],c=u[1];if(l===-1/0||c===1/0){var f=c===1/0?[l].concat(c2(u2(0,i-1).map(function(){return 1/0}))):[].concat(c2(u2(0,i-1).map(function(){return-1/0})),[c]);return n>r?l2(f):f}if(l===c)return nMe(l,i,o);var h=P9(l,c,a,o),d=h.step,p=h.tickMin,v=h.tickMax,m=yx.rangeStep(p,v.add(new St(.1).mul(d)),d);return n>r?l2(m):m}function iMe(t,e){var n=xv(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=A9([r,i]),s=xv(a,2),u=s[0],l=s[1];if(u===-1/0||l===1/0)return[r,i];if(u===l)return[u];var c=Math.max(e,2),f=T9(new St(l).sub(u).div(c-1),o,0),h=[].concat(c2(yx.rangeStep(new St(u),new St(l).sub(new St(.99).mul(f)),f)),[l]);return r>i?l2(h):h}var oMe=E9(rMe),aMe=E9(iMe),sMe="Invariant failed";function Xl(t,e){throw new Error(sMe)}var uMe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}function ab(){return ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ab.apply(this,arguments)}function lMe(t,e){return dMe(t)||hMe(t,e)||fMe(t,e)||cMe()}function cMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fMe(t,e){if(t){if(typeof t=="string")return kL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kL(t,e)}}function kL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hMe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function dMe(t){if(Array.isArray(t))return t}function pMe(t,e){if(t==null)return{};var n=vMe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vMe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mMe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gMe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R9(r.key),r)}}function yMe(t,e,n){return e&&gMe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bMe(t,e,n){return e=sb(e),wMe(t,O9()?Reflect.construct(e,n||[],sb(t).constructor):e.apply(t,n))}function wMe(t,e){if(e&&(uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xMe(t)}function xMe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O9=function(){return!!t})()}function sb(t){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sb(t)}function _Me(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h2(t,e)}function h2(t,e){return h2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h2(t,e)}function k9(t,e,n){return e=R9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R9(t){var e=SMe(t,"string");return uh(e)=="symbol"?e:e+""}function SMe(t,e){if(uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bx=function(t){function e(){return mMe(this,e),bMe(this,e,arguments)}return _Me(e,t),yMe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,u=r.data,l=r.dataPointFormatter,c=r.xAxis,f=r.yAxis,h=pMe(r,uMe),d=Fe(h,!1);this.props.direction==="x"&&c.type!=="number"&&Xl();var p=u.map(function(v){var m=l(v,s),g=m.x,y=m.y,b=m.value,_=m.errorVal;if(!_)return null;var x=[],S,E;if(Array.isArray(_)){var C=lMe(_,2);S=C[0],E=C[1]}else S=E=_;if(o==="vertical"){var A=c.scale,T=y+i,P=T+a,R=T-a,I=A(b-S),M=A(b+E);x.push({x1:M,y1:P,x2:M,y2:R}),x.push({x1:I,y1:T,x2:M,y2:T}),x.push({x1:I,y1:P,x2:I,y2:R})}else if(o==="horizontal"){var B=f.scale,z=g+i,U=z-a,$=z+a,L=B(b-S),H=B(b+E);x.push({x1:U,y1:H,x2:$,y2:H}),x.push({x1:z,y1:L,x2:z,y2:H}),x.push({x1:U,y1:L,x2:$,y2:L})}return V.createElement(yt,ab({className:"recharts-errorBar",key:"bar-".concat(x.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},d),x.map(function(X){return V.createElement("line",ab({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return V.createElement(yt,{className:"recharts-errorBars"},p)}}])}(V.Component);k9(bx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});k9(bx,"displayName","ErrorBar");function _v(t){"@babel/helpers - typeof";return _v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_v(t)}function RL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RL(Object(n),!0).forEach(function(r){EMe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EMe(t,e,n){return e=CMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CMe(t){var e=AMe(t,"string");return _v(e)=="symbol"?e:e+""}function AMe(t,e){if(_v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_v(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var I9=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=di(n,Tf);if(!a)return null;var s=Tf.defaultProps,u=s!==void 0?Gu(Gu({},s),a.props):{},l;return a.props&&a.props.payload?l=a.props&&a.props.payload:o==="children"?l=(r||[]).reduce(function(c,f){var h=f.item,d=f.props,p=d.sectors||d.data||[];return c.concat(p.map(function(v){return{type:a.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):l=(r||[]).map(function(c){var f=c.item,h=f.type.defaultProps,d=h!==void 0?Gu(Gu({},h),f.props):{},p=d.dataKey,v=d.name,m=d.legendType,g=d.hide;return{inactive:g,dataKey:p,type:u.iconType||m||"square",color:lk(f),value:v||p,payload:d}}),Gu(Gu(Gu({},u),Tf.getWithHeight(a,i)),{},{payload:l,item:a})};function Sv(t){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sv(t)}function IL(t){return kMe(t)||OMe(t)||PMe(t)||TMe()}function TMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PMe(t,e){if(t){if(typeof t=="string")return d2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d2(t,e)}}function OMe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kMe(t){if(Array.isArray(t))return d2(t)}function d2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(n),!0).forEach(function(r){Of(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Of(t,e,n){return e=RMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RMe(t){var e=IMe(t,"string");return Sv(e)=="symbol"?e:e+""}function IMe(t,e){if(Sv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Er(t,e,n){return Qe(t)||Qe(e)?n:jn(e)?Ai(t,e,n):ze(e)?e(t):n}function pp(t,e,n,r){var i=ONe(t,function(s){return Er(s,e)});if(n==="number"){var o=i.filter(function(s){return ve(s)||parseFloat(s)});return o.length?[vx(o),px(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!Qe(s)}):i;return a.map(function(s){return jn(s)||s instanceof Date?s:""})}var DMe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var u=o.range,l=0;l<s;l++){var c=l>0?i[l-1].coordinate:i[s-1].coordinate,f=i[l].coordinate,h=l>=s-1?i[0].coordinate:i[l+1].coordinate,d=void 0;if(jr(f-c)!==jr(h-f)){var p=[];if(jr(h-f)===jr(u[1]-u[0])){d=h;var v=f+u[1]-u[0];p[0]=Math.min(v,(v+c)/2),p[1]=Math.max(v,(v+c)/2)}else{d=c;var m=h+u[1]-u[0];p[0]=Math.min(f,(m+f)/2),p[1]=Math.max(f,(m+f)/2)}var g=[Math.min(f,(d+f)/2),Math.max(f,(d+f)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){a=i[l].index;break}}else{var y=Math.min(c,h),b=Math.max(c,h);if(e>(y+f)/2&&e<=(b+f)/2){a=i[l].index;break}}}else for(var _=0;_<s;_++)if(_===0&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<s-1&&e>(r[_].coordinate+r[_-1].coordinate)/2&&e<=(r[_].coordinate+r[_+1].coordinate)/2||_===s-1&&e>(r[_].coordinate+r[_-1].coordinate)/2){a=r[_].index;break}return a},lk=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?cn(cn({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,u;switch(i){case"Line":u=a;break;case"Area":case"Radar":u=a&&a!=="none"?a:s;break;default:u=s;break}return u},NMe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),u=0,l=s.length;u<l;u++)for(var c=o[s[u]].stackGroups,f=Object.keys(c),h=0,d=f.length;h<d;h++){var p=c[f[h]],v=p.items,m=p.cateAxisId,g=v.filter(function(E){return Ha(E.type).indexOf("Bar")>=0});if(g&&g.length){var y=g[0].type.defaultProps,b=y!==void 0?cn(cn({},y),g[0].props):g[0].props,_=b.barSize,x=b[m];a[x]||(a[x]=[]);var S=Qe(_)?n:_;a[x].push({item:g[0],stackList:g.slice(1),barSize:Qe(S)?void 0:Lr(S,r,0)})}}return a},MMe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,u=a.length;if(u<1)return null;var l=Lr(n,i,0,!0),c,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,d=i/u,p=a.reduce(function(_,x){return _+x.barSize||0},0);p+=(u-1)*l,p>=i&&(p-=(u-1)*l,l=0),p>=i&&d>0&&(h=!0,d*=.9,p=u*d);var v=(i-p)/2>>0,m={offset:v-l,size:0};c=a.reduce(function(_,x){var S={item:x.item,position:{offset:m.offset+m.size+l,size:h?d:x.barSize}},E=[].concat(IL(_),[S]);return m=E[E.length-1].position,x.stackList&&x.stackList.length&&x.stackList.forEach(function(C){E.push({item:C,position:m})}),E},f)}else{var g=Lr(r,i,0,!0);i-2*g-(u-1)*l<=0&&(l=0);var y=(i-2*g-(u-1)*l)/u;y>1&&(y>>=0);var b=s===+s?Math.min(y,s):y;c=a.reduce(function(_,x,S){var E=[].concat(IL(_),[{item:x.item,position:{offset:g+(y+l)*S+(y-b)/2,size:b}}]);return x.stackList&&x.stackList.length&&x.stackList.forEach(function(C){E.push({item:C,position:E[E.length-1].position})}),E},f)}return c},$Me=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,u=a-(s.left||0)-(s.right||0),l=I9({children:o,legendWidth:u});if(l){var c=i||{},f=c.width,h=c.height,d=l.align,p=l.verticalAlign,v=l.layout;if((v==="vertical"||v==="horizontal"&&p==="middle")&&d!=="center"&&ve(e[d]))return cn(cn({},e),{},Of({},d,e[d]+(f||0)));if((v==="horizontal"||v==="vertical"&&d==="center")&&p!=="middle"&&ve(e[p]))return cn(cn({},e),{},Of({},p,e[p]+(h||0)))}return e},jMe=function(e,n,r){return Qe(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},D9=function(e,n,r,i,o){var a=n.props.children,s=Xi(a,bx).filter(function(l){return jMe(i,o,l.props.direction)});if(s&&s.length){var u=s.map(function(l){return l.props.dataKey});return e.reduce(function(l,c){var f=Er(c,r);if(Qe(f))return l;var h=Array.isArray(f)?[vx(f),px(f)]:[f,f],d=u.reduce(function(p,v){var m=Er(c,v,0),g=h[0]-Math.abs(Array.isArray(m)?m[0]:m),y=h[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(g,p[0]),Math.max(y,p[1])]},[1/0,-1/0]);return[Math.min(d[0],l[0]),Math.max(d[1],l[1])]},[1/0,-1/0])}return null},LMe=function(e,n,r,i,o){var a=n.map(function(s){return D9(e,s,r,o,i)}).filter(function(s){return!Qe(s)});return a&&a.length?a.reduce(function(s,u){return[Math.min(s[0],u[0]),Math.max(s[1],u[1])]},[1/0,-1/0]):null},N9=function(e,n,r,i,o){var a=n.map(function(u){var l=u.props.dataKey;return r==="number"&&l&&D9(e,u,l,i)||pp(e,l,r,o)});if(r==="number")return a.reduce(function(u,l){return[Math.min(u[0],l[0]),Math.max(u[1],l[1])]},[1/0,-1/0]);var s={};return a.reduce(function(u,l){for(var c=0,f=l.length;c<f;c++)s[l[c]]||(s[l[c]]=!0,u.push(l[c]));return u},[])},M9=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},xl=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,u=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,l=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/u:0;if(l=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?jr(s[0]-s[1])*2*l:l,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(f){var h=o?o.indexOf(f):f;return{coordinate:i(h)+l,value:f,offset:l}});return c.filter(function(f){return!bm(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+l,value:f,index:h,offset:l}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+l,value:f,offset:l}}):i.domain().map(function(f,h){return{coordinate:i(f)+l,value:o?o[f]:f,index:h,offset:l}})},eS=new WeakMap,Fg=function(e,n){if(typeof n!="function")return e;eS.has(e)||eS.set(e,new WeakMap);var r=eS.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},$9=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:vv(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:tb(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:dp(),realScaleType:"point"}:o==="category"?{scale:vv(),realScaleType:"band"}:{scale:tb(),realScaleType:"linear"};if(Hl(i)){var u="scale".concat(Zw(i));return{scale:(AL[u]||dp)(),realScaleType:AL[u]?u:"point"}}return ze(i)?{scale:i}:{scale:dp(),realScaleType:"point"}},NL=1e-4,j9=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-NL,a=Math.max(i[0],i[1])+NL,s=e(n[0]),u=e(n[r-1]);(s<o||s>a||u<o||u>a)&&e.domain([n[0],n[r-1]])}},FMe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},BMe=function(e,n){if(!n||n.length!==2||!ve(n[0])||!ve(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!ve(e[0])||e[0]<r)&&(o[0]=r),(!ve(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},UMe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var u=bm(e[s][r][1])?e[s][r][0]:e[s][r][1];u>=0?(e[s][r][0]=o,e[s][r][1]=o+u,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+u,a=e[s][r][1])}},VMe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=bm(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},WMe={sign:UMe,expand:sSe,none:eh,silhouette:uSe,wiggle:lSe,positive:VMe},zMe=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=WMe[r],a=aSe().keys(i).value(function(s,u){return+Er(s,u,0)}).order(LC).offset(o);return a(e)},HMe=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,u={},l=s.reduce(function(f,h){var d,p=(d=h.type)!==null&&d!==void 0&&d.defaultProps?cn(cn({},h.type.defaultProps),h.props):h.props,v=p.stackId,m=p.hide;if(m)return f;var g=p[r],y=f[g]||{hasStack:!1,stackGroups:{}};if(jn(v)){var b=y.stackGroups[v]||{numericAxisId:r,cateAxisId:i,items:[]};b.items.push(h),y.hasStack=!0,y.stackGroups[v]=b}else y.stackGroups[wm("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return cn(cn({},f),{},Of({},g,y))},u),c={};return Object.keys(l).reduce(function(f,h){var d=l[h];if(d.hasStack){var p={};d.stackGroups=Object.keys(d.stackGroups).reduce(function(v,m){var g=d.stackGroups[m];return cn(cn({},v),{},Of({},m,{numericAxisId:r,cateAxisId:i,items:g.items,stackedData:zMe(e,g.items,o)}))},p)}return cn(cn({},f),{},Of({},h,d))},c)},L9=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,u=r||n.scale;if(u!=="auto"&&u!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var l=e.domain();if(!l.length)return null;var c=oMe(l,o,s);return e.domain([vx(c),px(c)]),{niceTicks:c}}if(o&&i==="number"){var f=e.domain(),h=aMe(f,o,s);return{niceTicks:h}}return null},ML=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var u=Er(a,n.dataKey,n.domain[s]);return Qe(u)?null:n.scale(u)-o/2+i},GMe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},qMe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?cn(cn({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(jn(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},KMe=function(e){return e.reduce(function(n,r){return[vx(r.concat([n[0]]).filter(ve)),px(r.concat([n[1]]).filter(ve))]},[1/0,-1/0])},F9=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,u=s.reduce(function(l,c){var f=KMe(c.slice(n,r+1));return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(u[0],i[0]),Math.max(u[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},$L=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p2=function(e,n,r){if(ze(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ve(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if($L.test(e[0])){var o=+$L.exec(e[0])[1];i[0]=n[0]-o}else ze(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ve(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(jL.test(e[1])){var a=+jL.exec(e[1])[1];i[1]=n[1]+a}else ze(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},ub=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=jO(n,function(f){return f.coordinate}),a=1/0,s=1,u=o.length;s<u;s++){var l=o[s],c=o[s-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},LL=function(e,n,r){return!e||!e.length||mx(e,Ai(r,"type.defaultProps.domain"))?n:e},B9=function(e,n){var r=e.type.defaultProps?cn(cn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,u=r.tooltipType,l=r.chartType,c=r.hide;return cn(cn({},Fe(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:lk(e),value:Er(n,i),type:u,payload:n,chartType:l,hide:c})};function Ev(t){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ev(t)}function FL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ma(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FL(Object(n),!0).forEach(function(r){U9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U9(t,e,n){return e=XMe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XMe(t){var e=YMe(t,"string");return Ev(e)=="symbol"?e:e+""}function YMe(t,e){if(Ev(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ev(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JMe(t,e){return t$e(t)||e$e(t,e)||ZMe(t,e)||QMe()}function QMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZMe(t,e){if(t){if(typeof t=="string")return BL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BL(t,e)}}function BL(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e$e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function t$e(t){if(Array.isArray(t))return t}var lb=Math.PI/180,n$e=function(e){return e*180/Math.PI},Dt=function(e,n,r,i){return{x:e+Math.cos(-lb*i)*r,y:n+Math.sin(-lb*i)*r}},V9=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},r$e=function(e,n,r,i,o){var a=e.width,s=e.height,u=e.startAngle,l=e.endAngle,c=Lr(e.cx,a,a/2),f=Lr(e.cy,s,s/2),h=V9(a,s,r),d=Lr(e.innerRadius,h,0),p=Lr(e.outerRadius,h,h*.8),v=Object.keys(n);return v.reduce(function(m,g){var y=n[g],b=y.domain,_=y.reversed,x;if(Qe(y.range))i==="angleAxis"?x=[u,l]:i==="radiusAxis"&&(x=[d,p]),_&&(x=[x[1],x[0]]);else{x=y.range;var S=x,E=JMe(S,2);u=E[0],l=E[1]}var C=$9(y,o),A=C.realScaleType,T=C.scale;T.domain(b).range(x),j9(T);var P=L9(T,Ma(Ma({},y),{},{realScaleType:A})),R=Ma(Ma(Ma({},y),P),{},{range:x,radius:p,realScaleType:A,scale:T,cx:c,cy:f,innerRadius:d,outerRadius:p,startAngle:u,endAngle:l});return Ma(Ma({},m),{},U9({},g,R))},{})},i$e=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},o$e=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=i$e({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var u=(r-o)/s,l=Math.acos(u);return i>a&&(l=2*Math.PI-l),{radius:s,angle:n$e(l),angleInRadian:l}},a$e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},s$e=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},UL=function(e,n){var r=e.x,i=e.y,o=o$e({x:r,y:i},n),a=o.radius,s=o.angle,u=n.innerRadius,l=n.outerRadius;if(a<u||a>l)return!1;if(a===0)return!0;var c=a$e(n),f=c.startAngle,h=c.endAngle,d=s,p;if(f<=h){for(;d>h;)d-=360;for(;d<f;)d+=360;p=d>=f&&d<=h}else{for(;d>f;)d-=360;for(;d<h;)d+=360;p=d>=h&&d<=f}return p?Ma(Ma({},n),{},{radius:a,angle:s$e(d,n)}):null},W9=function(e){return!k.isValidElement(e)&&!ze(e)&&typeof e!="boolean"?e.className:""};function Cv(t){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(t)}var u$e=["offset"];function l$e(t){return d$e(t)||h$e(t)||f$e(t)||c$e()}function c$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f$e(t,e){if(t){if(typeof t=="string")return v2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v2(t,e)}}function h$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function d$e(t){if(Array.isArray(t))return v2(t)}function v2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p$e(t,e){if(t==null)return{};var n=v$e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function v$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(n),!0).forEach(function(r){m$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m$e(t,e,n){return e=g$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g$e(t){var e=y$e(t,"string");return Cv(e)=="symbol"?e:e+""}function y$e(t,e){if(Cv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Cv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Av(){return Av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Av.apply(this,arguments)}var b$e=function(e){var n=e.value,r=e.formatter,i=Qe(e.children)?n:e.children;return ze(r)?r(i):i},w$e=function(e,n){var r=jr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},x$e=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,u=o,l=u.cx,c=u.cy,f=u.innerRadius,h=u.outerRadius,d=u.startAngle,p=u.endAngle,v=u.clockWise,m=(f+h)/2,g=w$e(d,p),y=g>=0?1:-1,b,_;i==="insideStart"?(b=d+y*a,_=v):i==="insideEnd"?(b=p-y*a,_=!v):i==="end"&&(b=p+y*a,_=v),_=g<=0?_:!_;var x=Dt(l,c,m,b),S=Dt(l,c,m,b+(_?1:-1)*359),E="M".concat(x.x,",").concat(x.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),C=Qe(e.id)?wm("recharts-radial-line-"):e.id;return V.createElement("text",Av({},r,{dominantBaseline:"central",className:qe("recharts-radial-bar-label",s)}),V.createElement("defs",null,V.createElement("path",{id:C,d:E})),V.createElement("textPath",{xlinkHref:"#".concat(C)},n))},_$e=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,u=o.innerRadius,l=o.outerRadius,c=o.startAngle,f=o.endAngle,h=(c+f)/2;if(i==="outside"){var d=Dt(a,s,l+r,h),p=d.x,v=d.y;return{x:p,y:v,textAnchor:p>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var m=(u+l)/2,g=Dt(a,s,m,h),y=g.x,b=g.y;return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},S$e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,u=a.y,l=a.width,c=a.height,f=c>=0?1:-1,h=f*i,d=f>0?"end":"start",p=f>0?"start":"end",v=l>=0?1:-1,m=v*i,g=v>0?"end":"start",y=v>0?"start":"end";if(o==="top"){var b={x:s+l/2,y:u-f*i,textAnchor:"middle",verticalAnchor:d};return Pn(Pn({},b),r?{height:Math.max(u-r.y,0),width:l}:{})}if(o==="bottom"){var _={x:s+l/2,y:u+c+h,textAnchor:"middle",verticalAnchor:p};return Pn(Pn({},_),r?{height:Math.max(r.y+r.height-(u+c),0),width:l}:{})}if(o==="left"){var x={x:s-m,y:u+c/2,textAnchor:g,verticalAnchor:"middle"};return Pn(Pn({},x),r?{width:Math.max(x.x-r.x,0),height:c}:{})}if(o==="right"){var S={x:s+l+m,y:u+c/2,textAnchor:y,verticalAnchor:"middle"};return Pn(Pn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var E=r?{width:l,height:c}:{};return o==="insideLeft"?Pn({x:s+m,y:u+c/2,textAnchor:y,verticalAnchor:"middle"},E):o==="insideRight"?Pn({x:s+l-m,y:u+c/2,textAnchor:g,verticalAnchor:"middle"},E):o==="insideTop"?Pn({x:s+l/2,y:u+h,textAnchor:"middle",verticalAnchor:p},E):o==="insideBottom"?Pn({x:s+l/2,y:u+c-h,textAnchor:"middle",verticalAnchor:d},E):o==="insideTopLeft"?Pn({x:s+m,y:u+h,textAnchor:y,verticalAnchor:p},E):o==="insideTopRight"?Pn({x:s+l-m,y:u+h,textAnchor:g,verticalAnchor:p},E):o==="insideBottomLeft"?Pn({x:s+m,y:u+c-h,textAnchor:y,verticalAnchor:d},E):o==="insideBottomRight"?Pn({x:s+l-m,y:u+c-h,textAnchor:g,verticalAnchor:d},E):Uh(o)&&(ve(o.x)||yl(o.x))&&(ve(o.y)||yl(o.y))?Pn({x:s+Lr(o.x,l),y:u+Lr(o.y,c),textAnchor:"end",verticalAnchor:"end"},E):Pn({x:s+l/2,y:u+c/2,textAnchor:"middle",verticalAnchor:"middle"},E)},E$e=function(e){return"cx"in e&&ve(e.cx)};function Xn(t){var e=t.offset,n=e===void 0?5:e,r=p$e(t,u$e),i=Pn({offset:n},r),o=i.viewBox,a=i.position,s=i.value,u=i.children,l=i.content,c=i.className,f=c===void 0?"":c,h=i.textBreakAll;if(!o||Qe(s)&&Qe(u)&&!k.isValidElement(l)&&!ze(l))return null;if(k.isValidElement(l))return k.cloneElement(l,i);var d;if(ze(l)){if(d=k.createElement(l,i),k.isValidElement(d))return d}else d=b$e(i);var p=E$e(o),v=Fe(i,!0);if(p&&(a==="insideStart"||a==="insideEnd"||a==="end"))return x$e(i,d,v);var m=p?_$e(i):S$e(i);return V.createElement(ql,Av({className:qe("recharts-label",f)},v,m,{breakAll:h}),d)}Xn.displayName="Label";var z9=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,u=e.radius,l=e.innerRadius,c=e.outerRadius,f=e.x,h=e.y,d=e.top,p=e.left,v=e.width,m=e.height,g=e.clockWise,y=e.labelViewBox;if(y)return y;if(ve(v)&&ve(m)){if(ve(f)&&ve(h))return{x:f,y:h,width:v,height:m};if(ve(d)&&ve(p))return{x:d,y:p,width:v,height:m}}return ve(f)&&ve(h)?{x:f,y:h,width:0,height:0}:ve(n)&&ve(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:l||0,outerRadius:c||u||s||0,clockWise:g}:e.viewBox?e.viewBox:{}},C$e=function(e,n){return e?e===!0?V.createElement(Xn,{key:"label-implicit",viewBox:n}):jn(e)?V.createElement(Xn,{key:"label-implicit",viewBox:n,value:e}):k.isValidElement(e)?e.type===Xn?k.cloneElement(e,{key:"label-implicit",viewBox:n}):V.createElement(Xn,{key:"label-implicit",content:e,viewBox:n}):ze(e)?V.createElement(Xn,{key:"label-implicit",content:e,viewBox:n}):Uh(e)?V.createElement(Xn,Av({viewBox:n},e,{key:"label-implicit"})):null:null},A$e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=z9(e),a=Xi(i,Xn).map(function(u,l){return k.cloneElement(u,{viewBox:n||o,key:"label-".concat(l)})});if(!r)return a;var s=C$e(e.label,n||o);return[s].concat(l$e(a))};Xn.parseViewBox=z9;Xn.renderCallByParent=A$e;function T$e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var P$e=T$e;const O$e=wt(P$e);function Tv(t){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(t)}var k$e=["valueAccessor"],R$e=["data","dataKey","clockWise","id","textBreakAll"];function I$e(t){return $$e(t)||M$e(t)||N$e(t)||D$e()}function D$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N$e(t,e){if(t){if(typeof t=="string")return m2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m2(t,e)}}function M$e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $$e(t){if(Array.isArray(t))return m2(t)}function m2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cb(){return cb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cb.apply(this,arguments)}function WL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WL(Object(n),!0).forEach(function(r){j$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j$e(t,e,n){return e=L$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L$e(t){var e=F$e(t,"string");return Tv(e)=="symbol"?e:e+""}function F$e(t,e){if(Tv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Tv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HL(t,e){if(t==null)return{};var n=B$e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function B$e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var U$e=function(e){return Array.isArray(e.value)?O$e(e.value):e.value};function hu(t){var e=t.valueAccessor,n=e===void 0?U$e:e,r=HL(t,k$e),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,u=r.textBreakAll,l=HL(r,R$e);return!i||!i.length?null:V.createElement(yt,{className:"recharts-label-list"},i.map(function(c,f){var h=Qe(o)?n(c,f):Er(c&&c.payload,o),d=Qe(s)?{}:{id:"".concat(s,"-").concat(f)};return V.createElement(Xn,cb({},Fe(c,!0),l,d,{parentViewBox:c.parentViewBox,value:h,textBreakAll:u,viewBox:Xn.parseViewBox(Qe(a)?c:zL(zL({},c),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}hu.displayName="LabelList";function V$e(t,e){return t?t===!0?V.createElement(hu,{key:"labelList-implicit",data:e}):V.isValidElement(t)||ze(t)?V.createElement(hu,{key:"labelList-implicit",data:e,content:t}):Uh(t)?V.createElement(hu,cb({data:e},t,{key:"labelList-implicit"})):null:null}function W$e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Xi(r,hu).map(function(a,s){return k.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=V$e(t.label,e);return[o].concat(I$e(i))}hu.renderCallByParent=W$e;function Pv(t){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(t)}function g2(){return g2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g2.apply(this,arguments)}function GL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GL(Object(n),!0).forEach(function(r){z$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z$e(t,e,n){return e=H$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H$e(t){var e=G$e(t,"string");return Pv(e)=="symbol"?e:e+""}function G$e(t,e){if(Pv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Pv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q$e=function(e,n){var r=jr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Bg=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,u=e.cornerRadius,l=e.cornerIsExternal,c=u*(s?1:-1)+i,f=Math.asin(u/c)/lb,h=l?o:o+a*f,d=Dt(n,r,c,h),p=Dt(n,r,i,h),v=l?o-a*f:o,m=Dt(n,r,c*Math.cos(f*lb),v);return{center:d,circleTangency:p,lineTangency:m,theta:f}},H9=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,u=q$e(a,s),l=a+u,c=Dt(n,r,o,a),f=Dt(n,r,o,l),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>l),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var d=Dt(n,r,i,a),p=Dt(n,r,i,l);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=l),`,
            `).concat(d.x,",").concat(d.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},K$e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,u=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,f=jr(c-l),h=Bg({cx:n,cy:r,radius:o,angle:l,sign:f,cornerRadius:a,cornerIsExternal:u}),d=h.circleTangency,p=h.lineTangency,v=h.theta,m=Bg({cx:n,cy:r,radius:o,angle:c,sign:-f,cornerRadius:a,cornerIsExternal:u}),g=m.circleTangency,y=m.lineTangency,b=m.theta,_=u?Math.abs(l-c):Math.abs(l-c)-v-b;if(_<0)return s?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):H9({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c});var x="M ".concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(d.x,",").concat(d.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var S=Bg({cx:n,cy:r,radius:i,angle:l,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),E=S.circleTangency,C=S.lineTangency,A=S.theta,T=Bg({cx:n,cy:r,radius:i,angle:c,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),P=T.circleTangency,R=T.lineTangency,I=T.theta,M=u?Math.abs(l-c):Math.abs(l-c)-A-I;if(M<0&&a===0)return"".concat(x,"L").concat(n,",").concat(r,"Z");x+="L".concat(R.x,",").concat(R.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else x+="L".concat(n,",").concat(r,"Z");return x},X$e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},G9=function(e){var n=qL(qL({},X$e),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,u=n.forceCornerRadius,l=n.cornerIsExternal,c=n.startAngle,f=n.endAngle,h=n.className;if(a<o||c===f)return null;var d=qe("recharts-sector",h),p=a-o,v=Lr(s,p,0,!0),m;return v>0&&Math.abs(c-f)<360?m=K$e({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(v,p/2),forceCornerRadius:u,cornerIsExternal:l,startAngle:c,endAngle:f}):m=H9({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:f}),V.createElement("path",g2({},Fe(n,!0),{className:d,d:m,role:"img"}))};function Ov(t){"@babel/helpers - typeof";return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(t)}function y2(){return y2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y2.apply(this,arguments)}function KL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(n),!0).forEach(function(r){Y$e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y$e(t,e,n){return e=J$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J$e(t){var e=Q$e(t,"string");return Ov(e)=="symbol"?e:e+""}function Q$e(t,e){if(Ov(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ov(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YL={curveBasisClosed:X_e,curveBasisOpen:Y_e,curveBasis:K_e,curveBumpX:N_e,curveBumpY:M_e,curveLinearClosed:J_e,curveLinear:tx,curveMonotoneX:Q_e,curveMonotoneY:Z_e,curveNatural:eSe,curveStep:tSe,curveStepAfter:rSe,curveStepBefore:nSe},Ug=function(e){return e.x===+e.x&&e.y===+e.y},Od=function(e){return e.x},kd=function(e){return e.y},Z$e=function(e,n){if(ze(e))return e;var r="curve".concat(Zw(e));return(r==="curveMonotone"||r==="curveBump")&&n?YL["".concat(r).concat(n==="vertical"?"Y":"X")]:YL[r]||tx},eje=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,u=e.connectNulls,l=u===void 0?!1:u,c=Z$e(r,s),f=l?o.filter(function(v){return Ug(v)}):o,h;if(Array.isArray(a)){var d=l?a.filter(function(v){return Ug(v)}):a,p=f.map(function(v,m){return XL(XL({},v),{},{base:d[m]})});return s==="vertical"?h=Rg().y(kd).x1(Od).x0(function(v){return v.base.x}):h=Rg().x(Od).y1(kd).y0(function(v){return v.base.y}),h.defined(Ug).curve(c),h(p)}return s==="vertical"&&ve(a)?h=Rg().y(kd).x1(Od).x0(a):ve(a)?h=Rg().x(Od).y1(kd).y0(a):h=UH().x(Od).y(kd),h.defined(Ug).curve(c),h(f)},b2=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?eje(e):i;return k.createElement("path",y2({},Fe(e,!1),M0(e),{className:qe("recharts-curve",n),d:a,ref:o}))},q9={exports:{}},tje="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nje=tje,rje=nje;function K9(){}function X9(){}X9.resetWarningCache=K9;var ije=function(){function t(r,i,o,a,s,u){if(u!==rje){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:X9,resetWarningCache:K9};return n.PropTypes=n,n};q9.exports=ije();var oje=q9.exports;const vt=wt(oje);var aje=Object.getOwnPropertyNames,sje=Object.getOwnPropertySymbols,uje=Object.prototype.hasOwnProperty;function JL(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function Vg(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var o=i.cache,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);var u=t(n,r,i);return o.delete(n),o.delete(r),u}}function QL(t){return aje(t).concat(sje(t))}var lje=Object.hasOwn||function(t,e){return uje.call(t,e)};function ac(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var cje="__v",fje="__o",hje="_owner",ZL=Object.getOwnPropertyDescriptor,e4=Object.keys;function dje(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function pje(t,e){return ac(t.getTime(),e.getTime())}function vje(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function mje(t,e){return t===e}function t4(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),o=t.entries(),a,s,u=0;(a=o.next())&&!a.done;){for(var l=e.entries(),c=!1,f=0;(s=l.next())&&!s.done;){if(i[f]){f++;continue}var h=a.value,d=s.value;if(n.equals(h[0],d[0],u,f,t,e,n)&&n.equals(h[1],d[1],h[0],d[0],t,e,n)){c=i[f]=!0;break}f++}if(!c)return!1;u++}return!0}var gje=ac;function yje(t,e,n){var r=e4(t),i=r.length;if(e4(e).length!==i)return!1;for(;i-- >0;)if(!Y9(t,e,n,r[i]))return!1;return!0}function Rd(t,e,n){var r=QL(t),i=r.length;if(QL(e).length!==i)return!1;for(var o,a,s;i-- >0;)if(o=r[i],!Y9(t,e,n,o)||(a=ZL(t,o),s=ZL(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function bje(t,e){return ac(t.valueOf(),e.valueOf())}function wje(t,e){return t.source===e.source&&t.flags===e.flags}function n4(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),o=t.values(),a,s;(a=o.next())&&!a.done;){for(var u=e.values(),l=!1,c=0;(s=u.next())&&!s.done;){if(!i[c]&&n.equals(a.value,s.value,a.value,s.value,t,e,n)){l=i[c]=!0;break}c++}if(!l)return!1}return!0}function xje(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function _je(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Y9(t,e,n,r){return(r===hje||r===fje||r===cje)&&(t.$$typeof||e.$$typeof)?!0:lje(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Sje="[object Arguments]",Eje="[object Boolean]",Cje="[object Date]",Aje="[object Error]",Tje="[object Map]",Pje="[object Number]",Oje="[object Object]",kje="[object RegExp]",Rje="[object Set]",Ije="[object String]",Dje="[object URL]",Nje=Array.isArray,r4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,i4=Object.assign,Mje=Object.prototype.toString.call.bind(Object.prototype.toString);function $je(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,o=t.areMapsEqual,a=t.areNumbersEqual,s=t.areObjectsEqual,u=t.arePrimitiveWrappersEqual,l=t.areRegExpsEqual,c=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(p,v,m){if(p===v)return!0;if(p==null||v==null)return!1;var g=typeof p;if(g!==typeof v)return!1;if(g!=="object")return g==="number"?a(p,v,m):g==="function"?i(p,v,m):!1;var y=p.constructor;if(y!==v.constructor)return!1;if(y===Object)return s(p,v,m);if(Nje(p))return e(p,v,m);if(r4!=null&&r4(p))return f(p,v,m);if(y===Date)return n(p,v,m);if(y===RegExp)return l(p,v,m);if(y===Map)return o(p,v,m);if(y===Set)return c(p,v,m);var b=Mje(p);return b===Cje?n(p,v,m):b===kje?l(p,v,m):b===Tje?o(p,v,m):b===Rje?c(p,v,m):b===Oje?typeof p.then!="function"&&typeof v.then!="function"&&s(p,v,m):b===Dje?h(p,v,m):b===Aje?r(p,v,m):b===Sje?s(p,v,m):b===Eje||b===Pje||b===Ije?u(p,v,m):!1}}function jje(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Rd:dje,areDatesEqual:pje,areErrorsEqual:vje,areFunctionsEqual:mje,areMapsEqual:r?JL(t4,Rd):t4,areNumbersEqual:gje,areObjectsEqual:r?Rd:yje,arePrimitiveWrappersEqual:bje,areRegExpsEqual:wje,areSetsEqual:r?JL(n4,Rd):n4,areTypedArraysEqual:r?Rd:xje,areUrlsEqual:_je};if(n&&(i=i4({},i,n(i))),e){var o=Vg(i.areArraysEqual),a=Vg(i.areMapsEqual),s=Vg(i.areObjectsEqual),u=Vg(i.areSetsEqual);i=i4({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:u})}return i}function Lje(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function Fje(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,o=t.strict;if(r)return function(u,l){var c=r(),f=c.cache,h=f===void 0?e?new WeakMap:void 0:f,d=c.meta;return n(u,l,{cache:h,equals:i,meta:d,strict:o})};if(e)return function(u,l){return n(u,l,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(u,l){return n(u,l,a)}}var Bje=$u();$u({strict:!0});$u({circular:!0});$u({circular:!0,strict:!0});$u({createInternalComparator:function(){return ac}});$u({strict:!0,createInternalComparator:function(){return ac}});$u({circular:!0,createInternalComparator:function(){return ac}});$u({circular:!0,createInternalComparator:function(){return ac},strict:!0});function $u(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,o=t.strict,a=o===void 0?!1:o,s=jje(t),u=$je(s),l=r?r(u):Lje(u);return Fje({circular:n,comparator:u,createState:i,equals:l,strict:a})}function Uje(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function o4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):Uje(i)};requestAnimationFrame(r)}function w2(t){"@babel/helpers - typeof";return w2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w2(t)}function Vje(t){return Gje(t)||Hje(t)||zje(t)||Wje()}function Wje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zje(t,e){if(t){if(typeof t=="string")return a4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a4(t,e)}}function a4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gje(t){if(Array.isArray(t))return t}function qje(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=Vje(a),u=s[0],l=s.slice(1);if(typeof u=="number"){o4(i.bind(null,l),u);return}i(u),o4(i.bind(null,l));return}w2(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function kv(t){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(t)}function s4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s4(Object(n),!0).forEach(function(r){J9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J9(t,e,n){return e=Kje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kje(t){var e=Xje(t,"string");return kv(e)==="symbol"?e:String(e)}function Xje(t,e){if(kv(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(kv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yje=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},Jje=function(e){return e},Qje=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},vp=function(e,n){return Object.keys(n).reduce(function(r,i){return u4(u4({},r),{},J9({},i,e(i,n[i])))},{})},l4=function(e,n,r){return e.map(function(i){return"".concat(Qje(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Zje(t,e){return nLe(t)||tLe(t,e)||Q9(t,e)||eLe()}function eLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function nLe(t){if(Array.isArray(t))return t}function rLe(t){return aLe(t)||oLe(t)||Q9(t)||iLe()}function iLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q9(t,e){if(t){if(typeof t=="string")return x2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x2(t,e)}}function oLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aLe(t){if(Array.isArray(t))return x2(t)}function x2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fb=1e-4,Z9=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},eG=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},c4=function(e,n){return function(r){var i=Z9(e,n);return eG(i,r)}},sLe=function(e,n){return function(r){var i=Z9(e,n),o=[].concat(rLe(i.map(function(a,s){return a*s}).slice(1)),[0]);return eG(o,r)}},f4=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var u=n[0].split("(");if(u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4){var l=u[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),c=Zje(l,4);i=c[0],o=c[1],a=c[2],s=c[3]}}}var f=c4(i,a),h=c4(o,s),d=sLe(i,a),p=function(g){return g>1?1:g<0?0:g},v=function(g){for(var y=g>1?1:g,b=y,_=0;_<8;++_){var x=f(b)-y,S=d(b);if(Math.abs(x-y)<fb||S<fb)return h(b);b=p(b-x/S)}return h(b)};return v.isStepper=!1,v},uLe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,u=function(c,f,h){var d=-(c-f)*r,p=h*o,v=h+(d-p)*s/1e3,m=h*s/1e3+c;return Math.abs(m-f)<fb&&Math.abs(v)<fb?[f,0]:[m,v]};return u.isStepper=!0,u.dt=s,u},lLe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return f4(i);case"spring":return uLe();default:if(i.split("(")[0]==="cubic-bezier")return f4(i)}return typeof i=="function"?i:null};function Rv(t){"@babel/helpers - typeof";return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rv(t)}function h4(t){return hLe(t)||fLe(t)||tG(t)||cLe()}function cLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hLe(t){if(Array.isArray(t))return S2(t)}function d4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d4(Object(n),!0).forEach(function(r){_2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _2(t,e,n){return e=dLe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dLe(t){var e=pLe(t,"string");return Rv(e)==="symbol"?e:String(e)}function pLe(t,e){if(Rv(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Rv(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vLe(t,e){return yLe(t)||gLe(t,e)||tG(t,e)||mLe()}function mLe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tG(t,e){if(t){if(typeof t=="string")return S2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S2(t,e)}}function S2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function yLe(t){if(Array.isArray(t))return t}var hb=function(e,n,r){return e+(n-e)*r},E2=function(e){var n=e.from,r=e.to;return n!==r},bLe=function t(e,n,r){var i=vp(function(o,a){if(E2(a)){var s=e(a.from,a.to,a.velocity),u=vLe(s,2),l=u[0],c=u[1];return nr(nr({},a),{},{from:l,velocity:c})}return a},n);return r<1?vp(function(o,a){return E2(a)?nr(nr({},a),{},{velocity:hb(a.velocity,i[o].velocity,r),from:hb(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const wLe=function(t,e,n,r,i){var o=Yje(t,e),a=o.reduce(function(m,g){return nr(nr({},m),{},_2({},g,[t[g],e[g]]))},{}),s=o.reduce(function(m,g){return nr(nr({},m),{},_2({},g,{from:t[g],velocity:0,to:e[g]}))},{}),u=-1,l,c,f=function(){return null},h=function(){return vp(function(g,y){return y.from},s)},d=function(){return!Object.values(s).filter(E2).length},p=function(g){l||(l=g);var y=g-l,b=y/n.dt;s=bLe(n,s,b),i(nr(nr(nr({},t),e),h())),l=g,d()||(u=requestAnimationFrame(f))},v=function(g){c||(c=g);var y=(g-c)/r,b=vp(function(x,S){return hb.apply(void 0,h4(S).concat([n(y)]))},a);if(i(nr(nr(nr({},t),e),b)),y<1)u=requestAnimationFrame(f);else{var _=vp(function(x,S){return hb.apply(void 0,h4(S).concat([n(1)]))},a);i(nr(nr(nr({},t),e),_))}};return f=n.isStepper?p:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(u)}}};function lh(t){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(t)}var xLe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _Le(t,e){if(t==null)return{};var n=SLe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SLe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function tS(t){return TLe(t)||ALe(t)||CLe(t)||ELe()}function ELe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CLe(t,e){if(t){if(typeof t=="string")return C2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C2(t,e)}}function ALe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function TLe(t){if(Array.isArray(t))return C2(t)}function C2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function so(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p4(Object(n),!0).forEach(function(r){Bd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bd(t,e,n){return e=nG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OLe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nG(r.key),r)}}function kLe(t,e,n){return e&&OLe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nG(t){var e=RLe(t,"string");return lh(e)==="symbol"?e:String(e)}function RLe(t,e){if(lh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(lh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ILe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A2(t,e)}function A2(t,e){return A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A2(t,e)}function DLe(t){var e=NLe();return function(){var r=db(t),i;if(e){var o=db(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return T2(this,i)}}function T2(t,e){if(e&&(lh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P2(t)}function P2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NLe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function db(t){return db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},db(t)}var as=function(t){ILe(n,t);var e=DLe(n);function n(r,i){var o;PLe(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,u=a.attributeName,l=a.from,c=a.to,f=a.steps,h=a.children,d=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(P2(o)),o.changeStyle=o.changeStyle.bind(P2(o)),!s||d<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:c}),T2(o);if(f&&f.length)o.state={style:f[0].style};else if(l){if(typeof h=="function")return o.state={style:l},T2(o);o.state={style:u?Bd({},u,l):l}}else o.state={style:{}};return o}return kLe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,u=o.attributeName,l=o.shouldReAnimate,c=o.to,f=o.from,h=this.state.style;if(s){if(!a){var d={style:u?Bd({},u,c):c};this.state&&h&&(u&&h[u]!==c||!u&&h!==c)&&this.setState(d);return}if(!(Bje(i.to,c)&&i.canBegin&&i.isActive)){var p=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=p||l?f:i.to;if(this.state&&h){var m={style:u?Bd({},u,v):v};(u&&h[u]!==v||!u&&h!==v)&&this.setState(m)}this.runAnimation(so(so({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,u=i.duration,l=i.easing,c=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,d=wLe(a,s,lLe(l),u,this.changeStyle),p=function(){o.stopJSAnimation=d()};this.manager.start([h,c,p,u,f])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,u=i.onAnimationStart,l=a[0],c=l.style,f=l.duration,h=f===void 0?0:f,d=function(v,m,g){if(g===0)return v;var y=m.duration,b=m.easing,_=b===void 0?"ease":b,x=m.style,S=m.properties,E=m.onAnimationEnd,C=g>0?a[g-1]:m,A=S||Object.keys(x);if(typeof _=="function"||_==="spring")return[].concat(tS(v),[o.runJSAnimation.bind(o,{from:C.style,to:x,duration:y,easing:_}),y]);var T=l4(A,y,_),P=so(so(so({},C.style),x),{},{transition:T});return[].concat(tS(v),[P,y,E]).filter(Jje)};return this.manager.start([u].concat(tS(a.reduce(d,[c,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=qje());var o=i.begin,a=i.duration,s=i.attributeName,u=i.to,l=i.easing,c=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,d=i.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof l=="function"||typeof d=="function"||l==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=s?Bd({},s,u):u,m=l4(Object.keys(v),a,l);p.start([c,o,so(so({},v),{},{transition:m}),a,f])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var u=_Le(i,xLe),l=k.Children.count(o),c=this.state.style;if(typeof o=="function")return o(c);if(!s||l===0||a<=0)return o;var f=function(d){var p=d.props,v=p.style,m=v===void 0?{}:v,g=p.className,y=k.cloneElement(d,so(so({},u),{},{style:so(so({},m),c),className:g}));return y};return l===1?f(k.Children.only(o)):V.createElement("div",null,k.Children.map(o,function(h){return f(h)}))}}]),n}(k.PureComponent);as.displayName="Animate";as.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};as.propTypes={from:vt.oneOfType([vt.object,vt.string]),to:vt.oneOfType([vt.object,vt.string]),attributeName:vt.string,duration:vt.number,begin:vt.number,easing:vt.oneOfType([vt.string,vt.func]),steps:vt.arrayOf(vt.shape({duration:vt.number.isRequired,style:vt.object.isRequired,easing:vt.oneOfType([vt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),vt.func]),properties:vt.arrayOf("string"),onAnimationEnd:vt.func})),children:vt.oneOfType([vt.node,vt.func]),isActive:vt.bool,canBegin:vt.bool,onAnimationEnd:vt.func,shouldReAnimate:vt.bool,onAnimationStart:vt.func,onAnimationReStart:vt.func};function Iv(t){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iv(t)}function pb(){return pb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pb.apply(this,arguments)}function MLe(t,e){return FLe(t)||LLe(t,e)||jLe(t,e)||$Le()}function $Le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jLe(t,e){if(t){if(typeof t=="string")return v4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v4(t,e)}}function v4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function LLe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function FLe(t){if(Array.isArray(t))return t}function m4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function g4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m4(Object(n),!0).forEach(function(r){BLe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BLe(t,e,n){return e=ULe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ULe(t){var e=VLe(t,"string");return Iv(e)=="symbol"?e:e+""}function VLe(t,e){if(Iv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Iv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y4=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,u=r>=0?1:-1,l=i>=0&&r>=0||i<0&&r<0?1:0,c;if(a>0&&o instanceof Array){for(var f=[0,0,0,0],h=0,d=4;h<d;h++)f[h]=o[h]>a?a:o[h];c="M".concat(e,",").concat(n+s*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(l,",").concat(e+u*f[0],",").concat(n)),c+="L ".concat(e+r-u*f[1],",").concat(n),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(n+s*f[1])),c+="L ".concat(e+r,",").concat(n+i-s*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(l,`,
        `).concat(e+r-u*f[2],",").concat(n+i)),c+="L ".concat(e+u*f[3],",").concat(n+i),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(n+i-s*f[3])),c+="Z"}else if(a>0&&o===+o&&o>0){var p=Math.min(a,o);c="M ".concat(e,",").concat(n+s*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+u*p,",").concat(n,`
            L `).concat(e+r-u*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r,",").concat(n+s*p,`
            L `).concat(e+r,",").concat(n+i-s*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e+r-u*p,",").concat(n+i,`
            L `).concat(e+u*p,",").concat(n+i,`
            A `).concat(p,",").concat(p,",0,0,").concat(l,",").concat(e,",").concat(n+i-s*p," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},WLe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,u=n.height;if(Math.abs(s)>0&&Math.abs(u)>0){var l=Math.min(o,o+s),c=Math.max(o,o+s),f=Math.min(a,a+u),h=Math.max(a,a+u);return r>=l&&r<=c&&i>=f&&i<=h}return!1},zLe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ck=function(e){var n=g4(g4({},zLe),e),r=k.useRef(),i=k.useState(-1),o=MLe(i,2),a=o[0],s=o[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&s(_)}catch{}},[]);var u=n.x,l=n.y,c=n.width,f=n.height,h=n.radius,d=n.className,p=n.animationEasing,v=n.animationDuration,m=n.animationBegin,g=n.isAnimationActive,y=n.isUpdateAnimationActive;if(u!==+u||l!==+l||c!==+c||f!==+f||c===0||f===0)return null;var b=qe("recharts-rectangle",d);return y?V.createElement(as,{canBegin:a>0,from:{width:c,height:f,x:u,y:l},to:{width:c,height:f,x:u,y:l},duration:v,animationEasing:p,isActive:y},function(_){var x=_.width,S=_.height,E=_.x,C=_.y;return V.createElement(as,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:v,isActive:g,easing:p},V.createElement("path",pb({},Fe(n,!0),{className:b,d:y4(E,C,x,S,h),ref:r})))}):V.createElement("path",pb({},Fe(n,!0),{className:b,d:y4(u,l,c,f,h)}))},HLe=["points","className","baseLinePoints","connectNulls"];function Jc(){return Jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jc.apply(this,arguments)}function GLe(t,e){if(t==null)return{};var n=qLe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qLe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function b4(t){return JLe(t)||YLe(t)||XLe(t)||KLe()}function KLe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XLe(t,e){if(t){if(typeof t=="string")return O2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O2(t,e)}}function YLe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JLe(t){if(Array.isArray(t))return O2(t)}function O2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var w4=function(e){return e&&e.x===+e.x&&e.y===+e.y},QLe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){w4(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),w4(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},mp=function(e,n){var r=QLe(e);n&&(r=[r.reduce(function(o,a){return[].concat(b4(o),b4(a))},[])]);var i=r.map(function(o){return o.reduce(function(a,s,u){return"".concat(a).concat(u===0?"M":"L").concat(s.x,",").concat(s.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},ZLe=function(e,n,r){var i=mp(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(mp(n.reverse(),r).slice(1))},e4e=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,a=GLe(e,HLe);if(!n||!n.length)return null;var s=qe("recharts-polygon",r);if(i&&i.length){var u=a.stroke&&a.stroke!=="none",l=ZLe(n,i,o);return V.createElement("g",{className:s},V.createElement("path",Jc({},Fe(a,!0),{fill:l.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:l})),u?V.createElement("path",Jc({},Fe(a,!0),{fill:"none",d:mp(n,o)})):null,u?V.createElement("path",Jc({},Fe(a,!0),{fill:"none",d:mp(i,o)})):null)}var c=mp(n,o);return V.createElement("path",Jc({},Fe(a,!0),{fill:c.slice(-1)==="Z"?a.fill:"none",className:s,d:c}))};function k2(){return k2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k2.apply(this,arguments)}var fk=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=qe("recharts-dot",o);return n===+n&&r===+r&&i===+i?k.createElement("circle",k2({},Fe(e,!1),M0(e),{className:a,cx:n,cy:r,r:i})):null};function Dv(t){"@babel/helpers - typeof";return Dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dv(t)}var t4e=["x","y","top","left","width","height","className"];function R2(){return R2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},R2.apply(this,arguments)}function x4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function n4e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(n),!0).forEach(function(r){r4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r4e(t,e,n){return e=i4e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i4e(t){var e=o4e(t,"string");return Dv(e)=="symbol"?e:e+""}function o4e(t,e){if(Dv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Dv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a4e(t,e){if(t==null)return{};var n=s4e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function s4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var u4e=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},l4e=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,u=e.left,l=u===void 0?0:u,c=e.width,f=c===void 0?0:c,h=e.height,d=h===void 0?0:h,p=e.className,v=a4e(e,t4e),m=n4e({x:r,y:o,top:s,left:l,width:f,height:d},v);return!ve(r)||!ve(o)||!ve(f)||!ve(d)||!ve(s)||!ve(l)?null:V.createElement("path",R2({},Fe(m,!0),{className:qe("recharts-cross",p),d:u4e(r,o,f,d,s,l)}))},c4e=dx,f4e=v9,h4e=Du;function d4e(t,e){return t&&t.length?c4e(t,h4e(e),f4e):void 0}var p4e=d4e;const v4e=wt(p4e);var m4e=dx,g4e=Du,y4e=m9;function b4e(t,e){return t&&t.length?m4e(t,g4e(e),y4e):void 0}var w4e=b4e;const x4e=wt(w4e);var _4e=["cx","cy","angle","ticks","axisLine"],S4e=["ticks","tick","angle","tickFormatter","stroke"];function ch(t){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(t)}function gp(){return gp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gp.apply(this,arguments)}function _4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_4(Object(n),!0).forEach(function(r){wx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S4(t,e){if(t==null)return{};var n=E4e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function E4e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function C4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iG(r.key),r)}}function A4e(t,e,n){return e&&E4(t.prototype,e),n&&E4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function T4e(t,e,n){return e=vb(e),P4e(t,rG()?Reflect.construct(e,n||[],vb(t).constructor):e.apply(t,n))}function P4e(t,e){if(e&&(ch(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O4e(t)}function O4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rG=function(){return!!t})()}function vb(t){return vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vb(t)}function k4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I2(t,e)}function I2(t,e){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},I2(t,e)}function wx(t,e,n){return e=iG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iG(t){var e=R4e(t,"string");return ch(e)=="symbol"?e:e+""}function R4e(t,e){if(ch(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xx=function(t){function e(){return C4e(this,e),T4e(this,e,arguments)}return k4e(e,t),A4e(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,a=o.angle,s=o.cx,u=o.cy;return Dt(s,u,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,u=v4e(s,function(c){return c.coordinate||0}),l=x4e(s,function(c){return c.coordinate||0});return{cx:i,cy:o,startAngle:a,endAngle:a,innerRadius:l.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.angle,s=r.ticks,u=r.axisLine,l=S4(r,_4e),c=s.reduce(function(p,v){return[Math.min(p[0],v.coordinate),Math.max(p[1],v.coordinate)]},[1/0,-1/0]),f=Dt(i,o,c[0],a),h=Dt(i,o,c[1],a),d=qu(qu(qu({},Fe(l,!1)),{},{fill:"none"},Fe(u,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return V.createElement("line",gp({className:"recharts-polar-radius-axis-line"},d))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.angle,u=i.tickFormatter,l=i.stroke,c=S4(i,S4e),f=this.getTickTextAnchor(),h=Fe(c,!1),d=Fe(a,!1),p=o.map(function(v,m){var g=r.getTickValueCoord(v),y=qu(qu(qu(qu({textAnchor:f,transform:"rotate(".concat(90-s,", ").concat(g.x,", ").concat(g.y,")")},h),{},{stroke:"none",fill:l},d),{},{index:m},g),{},{payload:v});return V.createElement(yt,gp({className:qe("recharts-polar-radius-axis-tick",W9(a)),key:"tick-".concat(v.coordinate)},Gl(r.props,v,m)),e.renderTickItem(a,y,u?u(v.value,m):v.value))});return V.createElement(yt,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,a=r.tick;return!i||!i.length?null:V.createElement(yt,{className:qe("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),a&&this.renderTicks(),Xn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var a;return V.isValidElement(r)?a=V.cloneElement(r,i):ze(r)?a=r(i):a=V.createElement(ql,gp({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),a}}])}(k.PureComponent);wx(xx,"displayName","PolarRadiusAxis");wx(xx,"axisType","radiusAxis");wx(xx,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function ul(){return ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ul.apply(this,arguments)}function C4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ku(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C4(Object(n),!0).forEach(function(r){_x(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aG(r.key),r)}}function D4e(t,e,n){return e&&A4(t.prototype,e),n&&A4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function N4e(t,e,n){return e=mb(e),M4e(t,oG()?Reflect.construct(e,n||[],mb(t).constructor):e.apply(t,n))}function M4e(t,e){if(e&&(fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $4e(t)}function $4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oG=function(){return!!t})()}function mb(t){return mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mb(t)}function j4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D2(t,e)}function D2(t,e){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},D2(t,e)}function _x(t,e,n){return e=aG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aG(t){var e=L4e(t,"string");return fh(e)=="symbol"?e:e+""}function L4e(t,e){if(fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var F4e=Math.PI/180,T4=1e-5,Sx=function(t){function e(){return I4e(this,e),N4e(this,e,arguments)}return j4e(e,t),D4e(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,a=i.cy,s=i.radius,u=i.orientation,l=i.tickSize,c=l||8,f=Dt(o,a,s,r.coordinate),h=Dt(o,a,s+(u==="inner"?-1:1)*c,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*F4e),a;return o>T4?a=i==="outer"?"start":"end":o<-T4?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,a=r.radius,s=r.axisLine,u=r.axisLineType,l=Ku(Ku({},Fe(this.props,!1)),{},{fill:"none"},Fe(s,!1));if(u==="circle")return V.createElement(fk,ul({className:"recharts-polar-angle-axis-line"},l,{cx:i,cy:o,r:a}));var c=this.props.ticks,f=c.map(function(h){return Dt(i,o,a,h.coordinate)});return V.createElement(e4e,ul({className:"recharts-polar-angle-axis-line"},l,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,a=i.tick,s=i.tickLine,u=i.tickFormatter,l=i.stroke,c=Fe(this.props,!1),f=Fe(a,!1),h=Ku(Ku({},c),{},{fill:"none"},Fe(s,!1)),d=o.map(function(p,v){var m=r.getTickLineCoord(p),g=r.getTickTextAnchor(p),y=Ku(Ku(Ku({textAnchor:g},c),{},{stroke:"none",fill:l},f),{},{index:v,payload:p,x:m.x2,y:m.y2});return V.createElement(yt,ul({className:qe("recharts-polar-angle-axis-tick",W9(a)),key:"tick-".concat(p.coordinate)},Gl(r.props,p,v)),s&&V.createElement("line",ul({className:"recharts-polar-angle-axis-tick-line"},h,m)),a&&e.renderTickItem(a,y,u?u(p.value,v):p.value))});return V.createElement(yt,{className:"recharts-polar-angle-axis-ticks"},d)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,a=r.axisLine;return o<=0||!i||!i.length?null:V.createElement(yt,{className:qe("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var a;return V.isValidElement(r)?a=V.cloneElement(r,i):ze(r)?a=r(i):a=V.createElement(ql,ul({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),a}}])}(k.PureComponent);_x(Sx,"displayName","PolarAngleAxis");_x(Sx,"axisType","angleAxis");_x(Sx,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var B4e=f8,U4e=B4e(Object.getPrototypeOf,Object),V4e=U4e,W4e=vs,z4e=V4e,H4e=ms,G4e="[object Object]",q4e=Function.prototype,K4e=Object.prototype,sG=q4e.toString,X4e=K4e.hasOwnProperty,Y4e=sG.call(Object);function J4e(t){if(!H4e(t)||W4e(t)!=G4e)return!1;var e=z4e(t);if(e===null)return!0;var n=X4e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&sG.call(n)==Y4e}var Q4e=J4e;const Z4e=wt(Q4e);var eFe=vs,tFe=ms,nFe="[object Boolean]";function rFe(t){return t===!0||t===!1||tFe(t)&&eFe(t)==nFe}var iFe=rFe;const oFe=wt(iFe);function Nv(t){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nv(t)}function gb(){return gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gb.apply(this,arguments)}function aFe(t,e){return cFe(t)||lFe(t,e)||uFe(t,e)||sFe()}function sFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uFe(t,e){if(t){if(typeof t=="string")return P4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P4(t,e)}}function P4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lFe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function cFe(t){if(Array.isArray(t))return t}function O4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O4(Object(n),!0).forEach(function(r){fFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fFe(t,e,n){return e=hFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hFe(t){var e=dFe(t,"string");return Nv(e)=="symbol"?e:e+""}function dFe(t,e){if(Nv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Nv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R4=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},pFe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},vFe=function(e){var n=k4(k4({},pFe),e),r=k.useRef(),i=k.useState(-1),o=aFe(i,2),a=o[0],s=o[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&s(b)}catch{}},[]);var u=n.x,l=n.y,c=n.upperWidth,f=n.lowerWidth,h=n.height,d=n.className,p=n.animationEasing,v=n.animationDuration,m=n.animationBegin,g=n.isUpdateAnimationActive;if(u!==+u||l!==+l||c!==+c||f!==+f||h!==+h||c===0&&f===0||h===0)return null;var y=qe("recharts-trapezoid",d);return g?V.createElement(as,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:u,y:l},to:{upperWidth:c,lowerWidth:f,height:h,x:u,y:l},duration:v,animationEasing:p,isActive:g},function(b){var _=b.upperWidth,x=b.lowerWidth,S=b.height,E=b.x,C=b.y;return V.createElement(as,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:v,easing:p},V.createElement("path",gb({},Fe(n,!0),{className:y,d:R4(E,C,_,x,S),ref:r})))}):V.createElement("g",null,V.createElement("path",gb({},Fe(n,!0),{className:y,d:R4(u,l,c,f,h)})))},mFe=["option","shapeType","propTransformer","activeClassName","isActive"];function Mv(t){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(t)}function gFe(t,e){if(t==null)return{};var n=yFe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yFe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function I4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I4(Object(n),!0).forEach(function(r){bFe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bFe(t,e,n){return e=wFe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wFe(t){var e=xFe(t,"string");return Mv(e)=="symbol"?e:e+""}function xFe(t,e){if(Mv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Mv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Fe(t,e){return yb(yb({},e),t)}function SFe(t,e){return t==="symbols"}function D4(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return V.createElement(ck,n);case"trapezoid":return V.createElement(vFe,n);case"sector":return V.createElement(G9,n);case"symbols":if(SFe(e))return V.createElement(PO,n);break;default:return null}}function EFe(t){return k.isValidElement(t)?t.props:t}function uG(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?_Fe:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,u=gFe(t,mFe),l;if(k.isValidElement(e))l=k.cloneElement(e,yb(yb({},u),EFe(e)));else if(ze(e))l=e(u);else if(Z4e(e)&&!oFe(e)){var c=i(e,u);l=V.createElement(D4,{shapeType:n,elementProps:c})}else{var f=u;l=V.createElement(D4,{shapeType:n,elementProps:f})}return s?V.createElement(yt,{className:a},l):l}function Ex(t,e){return e!=null&&"trapezoids"in t.props}function Cx(t,e){return e!=null&&"sectors"in t.props}function $v(t,e){return e!=null&&"points"in t.props}function CFe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function AFe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function TFe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function PFe(t,e){var n;return Ex(t,e)?n=CFe:Cx(t,e)?n=AFe:$v(t,e)&&(n=TFe),n}function OFe(t,e){var n;return Ex(t,e)?n="trapezoids":Cx(t,e)?n="sectors":$v(t,e)&&(n="points"),n}function kFe(t,e){if(Ex(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Cx(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return $v(t,e)?e.payload:{}}function RFe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=OFe(n,e),o=kFe(n,e),a=r.filter(function(u,l){var c=mx(o,u),f=n.props[i].filter(function(p){var v=PFe(n,e);return v(p,e)}),h=n.props[i].indexOf(f[f.length-1]),d=l===h;return c&&d}),s=r.indexOf(a[a.length-1]);return s}var py;function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function Qc(){return Qc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qc.apply(this,arguments)}function N4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N4(Object(n),!0).forEach(function(r){Vi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IFe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cG(r.key),r)}}function DFe(t,e,n){return e&&M4(t.prototype,e),n&&M4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function NFe(t,e,n){return e=bb(e),MFe(t,lG()?Reflect.construct(e,n||[],bb(t).constructor):e.apply(t,n))}function MFe(t,e){if(e&&(hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Fe(t)}function $Fe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lG=function(){return!!t})()}function bb(t){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bb(t)}function jFe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N2(t,e)}function N2(t,e){return N2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N2(t,e)}function Vi(t,e,n){return e=cG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cG(t){var e=LFe(t,"string");return hh(e)=="symbol"?e:e+""}function LFe(t,e){if(hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ys=function(t){function e(n){var r;return IFe(this,e),r=NFe(this,e,[n]),Vi(r,"pieRef",null),Vi(r,"sectorRefs",[]),Vi(r,"id",wm("recharts-pie-")),Vi(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ze(i)&&i()}),Vi(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ze(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return jFe(e,t),DFe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.label,s=o.labelLine,u=o.dataKey,l=o.valueKey,c=Fe(this.props,!1),f=Fe(a,!1),h=Fe(s,!1),d=a&&a.offsetRadius||20,p=r.map(function(v,m){var g=(v.startAngle+v.endAngle)/2,y=Dt(v.cx,v.cy,v.outerRadius+d,g),b=kt(kt(kt(kt({},c),v),{},{stroke:"none"},f),{},{index:m,textAnchor:e.getTextAnchor(y.x,v.cx)},y),_=kt(kt(kt(kt({},c),v),{},{fill:"none",stroke:v.fill},h),{},{index:m,points:[Dt(v.cx,v.cy,v.outerRadius,g),y]}),x=u;return Qe(u)&&Qe(l)?x="value":Qe(u)&&(x=l),V.createElement(yt,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(m)},s&&e.renderLabelLineItem(s,_,"line"),e.renderLabelItem(a,b,Er(v,x)))});return V.createElement(yt,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,a=o.activeShape,s=o.blendStroke,u=o.inactiveShape;return r.map(function(l,c){if((l==null?void 0:l.startAngle)===0&&(l==null?void 0:l.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(c),h=u&&i.hasActiveIndex()?u:null,d=f?a:h,p=kt(kt({},l),{},{stroke:s?l.fill:l.stroke,tabIndex:-1});return V.createElement(yt,Qc({ref:function(m){m&&!i.sectorRefs.includes(m)&&i.sectorRefs.push(m)},tabIndex:-1,className:"recharts-pie-sector"},Gl(i.props,l,c),{key:"sector-".concat(l==null?void 0:l.startAngle,"-").concat(l==null?void 0:l.endAngle,"-").concat(l.midAngle,"-").concat(c)}),V.createElement(uG,Qc({option:d,isActive:f,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,a=i.isAnimationActive,s=i.animationBegin,u=i.animationDuration,l=i.animationEasing,c=i.animationId,f=this.state,h=f.prevSectors,d=f.prevIsAnimationActive;return V.createElement(as,{begin:s,duration:u,isActive:a,easing:l,from:{t:0},to:{t:1},key:"pie-".concat(c,"-").concat(d),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var v=p.t,m=[],g=o&&o[0],y=g.startAngle;return o.forEach(function(b,_){var x=h&&h[_],S=_>0?Ai(b,"paddingAngle",0):0;if(x){var E=$s(x.endAngle-x.startAngle,b.endAngle-b.startAngle),C=kt(kt({},b),{},{startAngle:y+S,endAngle:y+E(v)+S});m.push(C),y=C.endAngle}else{var A=b.endAngle,T=b.startAngle,P=$s(0,A-T),R=P(v),I=kt(kt({},b),{},{startAngle:y+S,endAngle:y+R+S});m.push(I),y=I.endAngle}}),V.createElement(yt,null,r.renderSectorsStatically(m))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var s=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,a=this.state.prevSectors;return o&&i&&i.length&&(!a||!mx(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,a=i.sectors,s=i.className,u=i.label,l=i.cx,c=i.cy,f=i.innerRadius,h=i.outerRadius,d=i.isAnimationActive,p=this.state.isAnimationFinished;if(o||!a||!a.length||!ve(l)||!ve(c)||!ve(f)||!ve(h))return null;var v=qe("recharts-pie",s);return V.createElement(yt,{tabIndex:this.props.rootTabIndex,className:v,ref:function(g){r.pieRef=g}},this.renderSectors(),u&&this.renderLabels(a),Xn.renderCallByParent(this.props,null,!1),(!d||p)&&hu.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(V.isValidElement(r))return V.cloneElement(r,i);if(ze(r))return r(i);var a=qe("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return V.createElement(b2,Qc({},i,{key:o,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,o){if(V.isValidElement(r))return V.cloneElement(r,i);var a=o;if(ze(r)&&(a=r(i),V.isValidElement(a)))return a;var s=qe("recharts-pie-label-text",typeof r!="boolean"&&!ze(r)?r.className:"");return V.createElement(ql,Qc({},i,{alignmentBaseline:"middle",className:s}),a)}}])}(k.PureComponent);py=ys;Vi(ys,"displayName","Pie");Vi(ys,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!qa.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Vi(ys,"parseDeltaAngle",function(t,e){var n=jr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Vi(ys,"getRealPieData",function(t){var e=t.data,n=t.children,r=Fe(t,!1),i=Xi(n,ax);return e&&e.length?e.map(function(o,a){return kt(kt(kt({payload:o},r),o),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(o){return kt(kt({},r),o.props)}):[]});Vi(ys,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,o=e.height,a=V9(i,o),s=r+Lr(t.cx,i,i/2),u=n+Lr(t.cy,o,o/2),l=Lr(t.innerRadius,a,0),c=Lr(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:s,cy:u,innerRadius:l,outerRadius:c,maxRadius:f}});Vi(ys,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?kt(kt({},e.type.defaultProps),e.props):e.props,i=py.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,a=r.startAngle,s=r.endAngle,u=r.paddingAngle,l=r.dataKey,c=r.nameKey,f=r.valueKey,h=r.tooltipType,d=Math.abs(r.minAngle),p=py.parseCoordinateOfPie(r,n),v=py.parseDeltaAngle(a,s),m=Math.abs(v),g=l;Qe(l)&&Qe(f)?(Ga(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g="value"):Qe(l)&&(Ga(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),g=f);var y=i.filter(function(C){return Er(C,g,0)!==0}).length,b=(m>=360?y:y-1)*u,_=m-y*d-b,x=i.reduce(function(C,A){var T=Er(A,g,0);return C+(ve(T)?T:0)},0),S;if(x>0){var E;S=i.map(function(C,A){var T=Er(C,g,0),P=Er(C,c,A),R=(ve(T)?T:0)/x,I;A?I=E.endAngle+jr(v)*u*(T!==0?1:0):I=a;var M=I+jr(v)*((T!==0?d:0)+R*_),B=(I+M)/2,z=(p.innerRadius+p.outerRadius)/2,U=[{name:P,value:T,payload:C,dataKey:g,type:h}],$=Dt(p.cx,p.cy,z,B);return E=kt(kt(kt({percent:R,cornerRadius:o,name:P,tooltipPayload:U,midAngle:B,middleRadius:z,tooltipPosition:$},C),p),{},{value:Er(C,g),startAngle:I,endAngle:M,payload:C,paddingAngle:jr(v)*u}),E})}return kt(kt({},p),{},{sectors:S,data:i})});var FFe=Math.ceil,BFe=Math.max;function UFe(t,e,n,r){for(var i=-1,o=BFe(FFe((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var VFe=UFe,WFe=O8,$4=1/0,zFe=17976931348623157e292;function HFe(t){if(!t)return t===0?t:0;if(t=WFe(t),t===$4||t===-$4){var e=t<0?-1:1;return e*zFe}return t===t?t:0}var GFe=HFe,qFe=VFe,KFe=ox,nS=GFe;function XFe(t){return function(e,n,r){return r&&typeof r!="number"&&KFe(e,n,r)&&(n=r=void 0),e=nS(e),n===void 0?(n=e,e=0):n=nS(n),r=r===void 0?e<n?1:-1:nS(r),qFe(e,n,r,t)}}var YFe=XFe,JFe=YFe,QFe=JFe(),ZFe=QFe;const wb=wt(ZFe);function jv(t){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jv(t)}function j4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j4(Object(n),!0).forEach(function(r){fG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fG(t,e,n){return e=e3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e3e(t){var e=t3e(t,"string");return jv(e)=="symbol"?e:e+""}function t3e(t,e){if(jv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n3e=["Webkit","Moz","O","ms"],r3e=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=n3e.reduce(function(o,a){return L4(L4({},o),{},fG({},a+r,n))},{});return i[e]=n,i};function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function xb(){return xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xb.apply(this,arguments)}function F4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F4(Object(n),!0).forEach(function(r){ci(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dG(r.key),r)}}function o3e(t,e,n){return e&&B4(t.prototype,e),n&&B4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a3e(t,e,n){return e=_b(e),s3e(t,hG()?Reflect.construct(e,n||[],_b(t).constructor):e.apply(t,n))}function s3e(t,e){if(e&&(dh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u3e(t)}function u3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hG=function(){return!!t})()}function _b(t){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_b(t)}function l3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M2(t,e)}function M2(t,e){return M2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},M2(t,e)}function ci(t,e,n){return e=dG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dG(t){var e=c3e(t,"string");return dh(e)=="symbol"?e:e+""}function c3e(t,e){if(dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var f3e=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var u=n.length,l=dp().domain(wb(0,u)).range([o,o+a-s]),c=l.domain().map(function(f){return l(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(i),scale:l,scaleValues:c}},U4=function(e){return e.changedTouches&&!!e.changedTouches.length},ph=function(t){function e(n){var r;return i3e(this,e),r=a3e(this,e,[n]),ci(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ci(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ci(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),ci(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ci(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ci(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ci(r,"handleSlideDragStart",function(i){var o=U4(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return l3e(e,t),o3e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,u=s.gap,l=s.data,c=l.length-1,f=Math.min(i,o),h=Math.max(i,o),d=e.getIndexInRange(a,f),p=e.getIndexInRange(a,h);return{startIndex:d-d%u,endIndex:p===c?c:p-p%u}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,u=Er(o[r],s,r);return ze(a)?a(u,r):u}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,u=this.props,l=u.x,c=u.width,f=u.travellerWidth,h=u.startIndex,d=u.endIndex,p=u.onChange,v=r.pageX-o;v>0?v=Math.min(v,l+c-f-s,l+c-f-a):v<0&&(v=Math.max(v,l-a,l-s));var m=this.getIndex({startX:a+v,endX:s+v});(m.startIndex!==h||m.endIndex!==d)&&p&&p(m),this.setState({startX:a+v,endX:s+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=U4(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,u=i.startX,l=this.state[a],c=this.props,f=c.x,h=c.width,d=c.travellerWidth,p=c.onChange,v=c.gap,m=c.data,g={startX:this.state.startX,endX:this.state.endX},y=r.pageX-o;y>0?y=Math.min(y,f+h-d-l):y<0&&(y=Math.max(y,f-l)),g[a]=l+y;var b=this.getIndex(g),_=b.startIndex,x=b.endIndex,S=function(){var C=m.length-1;return a==="startX"&&(s>u?_%v===0:x%v===0)||s<u&&x===C||a==="endX"&&(s>u?x%v===0:_%v===0)||s>u&&x===C};this.setState(ci(ci({},a,l+y),"brushMoveStartX",r.pageX),function(){p&&S()&&p(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,u=a.startX,l=a.endX,c=this.state[i],f=s.indexOf(c);if(f!==-1){var h=f+r;if(!(h===-1||h>=s.length)){var d=s[h];i==="startX"&&d>=l||i==="endX"&&d<=u||this.setState(ci({},i,d),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.fill,l=r.stroke;return V.createElement("rect",{stroke:l,fill:u,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.data,l=r.children,c=r.padding,f=k.Children.only(l);return f?V.cloneElement(f,{x:i,y:o,width:a,height:s,margin:c,compact:!0,data:u}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,u=this.props,l=u.y,c=u.travellerWidth,f=u.height,h=u.traveller,d=u.ariaLabel,p=u.data,v=u.startIndex,m=u.endIndex,g=Math.max(r,this.props.x),y=rS(rS({},Fe(this.props,!1)),{},{x:g,y:l,width:c,height:f}),b=d||"Min value: ".concat((o=p[v])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=p[m])===null||a===void 0?void 0:a.name);return V.createElement(yt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(x){["ArrowLeft","ArrowRight"].includes(x.key)&&(x.preventDefault(),x.stopPropagation(),s.handleTravellerMoveKeyboard(x.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,y))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,u=o.stroke,l=o.travellerWidth,c=Math.min(r,i)+l,f=Math.max(Math.abs(i-r)-l,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:u,fillOpacity:.2,x:c,y:a,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,u=r.travellerWidth,l=r.stroke,c=this.state,f=c.startX,h=c.endX,d=5,p={pointerEvents:"none",fill:l};return V.createElement(yt,{className:"recharts-brush-texts"},V.createElement(ql,xb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-d,y:a+s/2},p),this.getTextOfTick(i)),V.createElement(ql,xb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+u+d,y:a+s/2},p),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,u=r.y,l=r.width,c=r.height,f=r.alwaysShowText,h=this.state,d=h.startX,p=h.endX,v=h.isTextActive,m=h.isSlideMoving,g=h.isTravellerMoving,y=h.isTravellerFocused;if(!i||!i.length||!ve(s)||!ve(u)||!ve(l)||!ve(c)||l<=0||c<=0)return null;var b=qe("recharts-brush",o),_=V.Children.count(a)===1,x=r3e("userSelect","none");return V.createElement(yt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:x},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(d,p),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(p,"endX"),(v||m||g||y||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,u=r.stroke,l=Math.floor(o+s/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:i,y:o,width:a,height:s,fill:u,stroke:"none"}),V.createElement("line",{x1:i+1,y1:l,x2:i+a-1,y2:l,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:i+1,y1:l+2,x2:i+a-1,y2:l+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return V.isValidElement(r)?o=V.cloneElement(r,i):ze(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,u=r.travellerWidth,l=r.updateId,c=r.startIndex,f=r.endIndex;if(o!==i.prevData||l!==i.prevUpdateId)return rS({prevData:o,prevTravellerWidth:u,prevUpdateId:l,prevX:s,prevWidth:a},o&&o.length?f3e({data:o,width:a,x:s,travellerWidth:u,startIndex:c,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||u!==i.prevTravellerWidth)){i.scale.range([s,s+a-u]);var h=i.scale.domain().map(function(d){return i.scale(d)});return{prevData:o,prevTravellerWidth:u,prevUpdateId:l,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var u=Math.floor((a+s)/2);r[u]>i?s=u:a=u}return i>=r[s]?s:a}}])}(k.PureComponent);ci(ph,"displayName","Brush");ci(ph,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var h3e=$O;function d3e(t,e){var n;return h3e(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var p3e=d3e,v3e=r8,m3e=Du,g3e=p3e,y3e=si,b3e=ox;function w3e(t,e,n){var r=y3e(t)?v3e:g3e;return n&&b3e(t,e,n)&&(e=void 0),r(t,m3e(e))}var x3e=w3e;const _3e=wt(x3e);var pa=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},V4=E8;function S3e(t,e,n){e=="__proto__"&&V4?V4(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var E3e=S3e,C3e=E3e,A3e=_8,T3e=Du;function P3e(t,e){var n={};return e=T3e(e),A3e(t,function(r,i,o){C3e(n,i,e(r,i,o))}),n}var O3e=P3e;const k3e=wt(O3e);function R3e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var I3e=R3e,D3e=$O;function N3e(t,e){var n=!0;return D3e(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var M3e=N3e,$3e=I3e,j3e=M3e,L3e=Du,F3e=si,B3e=ox;function U3e(t,e,n){var r=F3e(t)?$3e:j3e;return n&&B3e(t,e,n)&&(e=void 0),r(t,L3e(e))}var V3e=U3e;const W3e=wt(V3e);var z3e=["x","y"];function Lv(t){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lv(t)}function $2(){return $2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$2.apply(this,arguments)}function W4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Id(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W4(Object(n),!0).forEach(function(r){H3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H3e(t,e,n){return e=G3e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G3e(t){var e=q3e(t,"string");return Lv(e)=="symbol"?e:e+""}function q3e(t,e){if(Lv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Lv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K3e(t,e){if(t==null)return{};var n=X3e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function X3e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Y3e(t,e){var n=t.x,r=t.y,i=K3e(t,z3e),o="".concat(n),a=parseInt(o,10),s="".concat(r),u=parseInt(s,10),l="".concat(e.height||i.height),c=parseInt(l,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Id(Id(Id(Id(Id({},e),i),a?{x:a}:{}),u?{y:u}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function z4(t){return V.createElement(uG,$2({shapeType:"rectangle",propTransformer:Y3e,activeClassName:"recharts-active-bar"},t))}var J3e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=ve(r)||w1e(r);return o?e(r,i):(o||Xl(),n)}},Q3e=["value","background"],pG;function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}function Z3e(t,e){if(t==null)return{};var n=eBe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eBe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Sb(){return Sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sb.apply(this,arguments)}function H4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H4(Object(n),!0).forEach(function(r){Qs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mG(r.key),r)}}function nBe(t,e,n){return e&&G4(t.prototype,e),n&&G4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function rBe(t,e,n){return e=Eb(e),iBe(t,vG()?Reflect.construct(e,n||[],Eb(t).constructor):e.apply(t,n))}function iBe(t,e){if(e&&(vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oBe(t)}function oBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vG=function(){return!!t})()}function Eb(t){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Eb(t)}function aBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j2(t,e)}function j2(t,e){return j2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j2(t,e)}function Qs(t,e,n){return e=mG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mG(t){var e=sBe(t,"string");return vh(e)=="symbol"?e:e+""}function sBe(t,e){if(vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Eu=function(t){function e(){var n;tBe(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=rBe(this,e,[].concat(i)),Qs(n,"state",{isAnimationFinished:!1}),Qs(n,"id",wm("recharts-bar-")),Qs(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Qs(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return aBe(e,t),nBe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,u=o.activeIndex,l=o.activeBar,c=Fe(this.props,!1);return r&&r.map(function(f,h){var d=h===u,p=d?l:a,v=bn(bn(bn({},c),f),{},{isActive:d,option:p,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return V.createElement(yt,Sb({className:"recharts-bar-rectangle"},Gl(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),V.createElement(z4,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,u=i.animationBegin,l=i.animationDuration,c=i.animationEasing,f=i.animationId,h=this.state.prevData;return V.createElement(as,{begin:u,duration:l,isActive:s,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var p=d.t,v=o.map(function(m,g){var y=h&&h[g];if(y){var b=$s(y.x,m.x),_=$s(y.y,m.y),x=$s(y.width,m.width),S=$s(y.height,m.height);return bn(bn({},m),{},{x:b(p),y:_(p),width:x(p),height:S(p)})}if(a==="horizontal"){var E=$s(0,m.height),C=E(p);return bn(bn({},m),{},{y:m.y+m.height-C,height:C})}var A=$s(0,m.width),T=A(p);return bn(bn({},m),{},{width:T})});return V.createElement(yt,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!mx(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,u=Fe(this.props.background,!1);return o.map(function(l,c){l.value;var f=l.background,h=Z3e(l,Q3e);if(!f)return null;var d=bn(bn(bn(bn(bn({},h),{},{fill:"#eee"},f),u),Gl(r.props,l,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:c,className:"recharts-bar-background-rectangle"});return V.createElement(z4,Sb({key:"background-bar-".concat(c),option:r.props.background,isActive:c===s},d))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,u=o.yAxis,l=o.layout,c=o.children,f=Xi(c,bx);if(!f)return null;var h=l==="vertical"?a[0].height/2:a[0].width/2,d=function(m,g){var y=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:y,errorVal:Er(m,g)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return V.createElement(yt,p,f.map(function(v){return V.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:a,xAxis:s,yAxis:u,layout:l,offset:h,dataPointFormatter:d})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,u=r.yAxis,l=r.left,c=r.top,f=r.width,h=r.height,d=r.isAnimationActive,p=r.background,v=r.id;if(i||!o||!o.length)return null;var m=this.state.isAnimationFinished,g=qe("recharts-bar",a),y=s&&s.allowDataOverflow,b=u&&u.allowDataOverflow,_=y||b,x=Qe(v)?this.id:v;return V.createElement(yt,{className:g},y||b?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(x)},V.createElement("rect",{x:y?l:l-f/2,y:b?c:c-h/2,width:y?f:f*2,height:b?h:h*2}))):null,V.createElement(yt,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(x,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,x),(!d||m)&&hu.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(k.PureComponent);pG=Eu;Qs(Eu,"displayName","Bar");Qs(Eu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!qa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Qs(Eu,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,u=t.yAxisTicks,l=t.stackedData,c=t.dataStartIndex,f=t.displayedData,h=t.offset,d=FMe(r,n);if(!d)return null;var p=e.layout,v=n.type.defaultProps,m=v!==void 0?bn(bn({},v),n.props):n.props,g=m.dataKey,y=m.children,b=m.minPointSize,_=p==="horizontal"?a:o,x=l?_.scale.domain():null,S=GMe({numericAxis:_}),E=Xi(y,ax),C=f.map(function(A,T){var P,R,I,M,B,z;l?P=BMe(l[c+T],x):(P=Er(A,g),Array.isArray(P)||(P=[S,P]));var U=J3e(b,pG.defaultProps.minPointSize)(P[1],T);if(p==="horizontal"){var $,L=[a.scale(P[0]),a.scale(P[1])],H=L[0],X=L[1];R=ML({axis:o,ticks:s,bandSize:i,offset:d.offset,entry:A,index:T}),I=($=X??H)!==null&&$!==void 0?$:void 0,M=d.size;var q=H-X;if(B=Number.isNaN(q)?0:q,z={x:R,y:a.y,width:M,height:a.height},Math.abs(U)>0&&Math.abs(B)<Math.abs(U)){var J=jr(B||U)*(Math.abs(U)-Math.abs(B));I-=J,B+=J}}else{var ae=[o.scale(P[0]),o.scale(P[1])],fe=ae[0],he=ae[1];if(R=fe,I=ML({axis:a,ticks:u,bandSize:i,offset:d.offset,entry:A,index:T}),M=he-fe,B=d.size,z={x:o.x,y:I,width:o.width,height:B},Math.abs(U)>0&&Math.abs(M)<Math.abs(U)){var de=jr(M||U)*(Math.abs(U)-Math.abs(M));M+=de}}return bn(bn(bn({},A),{},{x:R,y:I,width:M,height:B,value:l?P:P[1],payload:A,background:z},E&&E[T]&&E[T].props),{},{tooltipPayload:[B9(n,A)],tooltipPosition:{x:R+M/2,y:I+B/2}})});return bn({data:C,layout:p},h)});function Fv(t){"@babel/helpers - typeof";return Fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(t)}function uBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gG(r.key),r)}}function lBe(t,e,n){return e&&q4(t.prototype,e),n&&q4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K4(Object(n),!0).forEach(function(r){Ax(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ax(t,e,n){return e=gG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gG(t){var e=cBe(t,"string");return Fv(e)=="symbol"?e:e+""}function cBe(t,e){if(Fv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Fv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fBe=function(e,n,r,i,o){var a=e.width,s=e.height,u=e.layout,l=e.children,c=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!di(l,Eu);return c.reduce(function(d,p){var v=n[p],m=v.orientation,g=v.domain,y=v.padding,b=y===void 0?{}:y,_=v.mirror,x=v.reversed,S="".concat(m).concat(_?"Mirror":""),E,C,A,T,P;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var R=g[1]-g[0],I=1/0,M=v.categoricalDomain.sort(S1e);if(M.forEach(function(ae,fe){fe>0&&(I=Math.min((ae||0)-(M[fe-1]||0),I))}),Number.isFinite(I)){var B=I/R,z=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(E=B*z/2),v.padding==="no-gap"){var U=Lr(e.barCategoryGap,B*z),$=B*z/2;E=$-U-($-U)/z*U}}}i==="xAxis"?C=[r.left+(b.left||0)+(E||0),r.left+r.width-(b.right||0)-(E||0)]:i==="yAxis"?C=u==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(E||0),r.top+r.height-(b.bottom||0)-(E||0)]:C=v.range,x&&(C=[C[1],C[0]]);var L=$9(v,o,h),H=L.scale,X=L.realScaleType;H.domain(g).range(C),j9(H);var q=L9(H,yo(yo({},v),{},{realScaleType:X}));i==="xAxis"?(P=m==="top"&&!_||m==="bottom"&&_,A=r.left,T=f[S]-P*v.height):i==="yAxis"&&(P=m==="left"&&!_||m==="right"&&_,A=f[S]-P*v.width,T=r.top);var J=yo(yo(yo({},v),q),{},{realScaleType:X,x:A,y:T,scale:H,width:i==="xAxis"?r.width:v.width,height:i==="yAxis"?r.height:v.height});return J.bandSize=ub(J,q),!v.hide&&i==="xAxis"?f[S]+=(P?-1:1)*J.height:v.hide||(f[S]+=(P?-1:1)*J.width),yo(yo({},d),{},Ax({},p,J))},{})},yG=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},hBe=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return yG({x:n,y:r},{x:i,y:o})},bG=function(){function t(e){uBe(this,t),this.scale=e}return lBe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+u}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Ax(bG,"EPS",1e-4);var hk=function(e){var n=Object.keys(e).reduce(function(r,i){return yo(yo({},r),{},Ax({},i,bG.create(e[i])))},{});return yo(yo({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return k3e(i,function(u,l){return n[l].apply(u,{bandAware:a,position:s})})},isInRange:function(i){return W3e(i,function(o,a){return n[a].isInRange(o)})}})};function dBe(t){return(t%180+180)%180}var pBe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=dBe(i),a=o*Math.PI/180,s=Math.atan(r/n),u=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(u)},vBe=Exe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),wG=k.createContext(void 0),xG=k.createContext(void 0),_G=k.createContext(void 0),mBe=k.createContext({}),SG=k.createContext(void 0),EG=k.createContext(0),CG=k.createContext(0),X4=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,u=e.width,l=e.height,c=vBe(o);return V.createElement(wG.Provider,{value:r},V.createElement(xG.Provider,{value:i},V.createElement(mBe.Provider,{value:o},V.createElement(_G.Provider,{value:c},V.createElement(SG.Provider,{value:a},V.createElement(EG.Provider,{value:l},V.createElement(CG.Provider,{value:u},s)))))))},gBe=function(){return k.useContext(SG)},AG=function(e){var n=k.useContext(wG);n==null&&Xl();var r=n[e];return r==null&&Xl(),r},TG=function(e){var n=k.useContext(xG);n==null&&Xl();var r=n[e];return r==null&&Xl(),r},yBe=function(){var e=k.useContext(_G);return e},PG=function(){return k.useContext(CG)},OG=function(){return k.useContext(EG)};function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function bBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RG(r.key),r)}}function xBe(t,e,n){return e&&wBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _Be(t,e,n){return e=Cb(e),SBe(t,kG()?Reflect.construct(e,n||[],Cb(t).constructor):e.apply(t,n))}function SBe(t,e){if(e&&(mh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EBe(t)}function EBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kG=function(){return!!t})()}function Cb(t){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cb(t)}function CBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L2(t,e)}function L2(t,e){return L2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L2(t,e)}function Y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y4(Object(n),!0).forEach(function(r){dk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dk(t,e,n){return e=RG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RG(t){var e=ABe(t,"string");return mh(e)=="symbol"?e:e+""}function ABe(t,e){if(mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TBe(t,e){return RBe(t)||kBe(t,e)||OBe(t,e)||PBe()}function PBe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OBe(t,e){if(t){if(typeof t=="string")return Q4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q4(t,e)}}function Q4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kBe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function RBe(t){if(Array.isArray(t))return t}function F2(){return F2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F2.apply(this,arguments)}var IBe=function(e,n){var r;return V.isValidElement(e)?r=V.cloneElement(e,n):ze(e)?r=e(n):r=V.createElement("line",F2({},n,{className:"recharts-reference-line-line"})),r},DBe=function(e,n,r,i,o,a,s,u,l){var c=o.x,f=o.y,h=o.width,d=o.height;if(r){var p=l.y,v=e.y.apply(p,{position:a});if(pa(l,"discard")&&!e.y.isInRange(v))return null;var m=[{x:c+h,y:v},{x:c,y:v}];return u==="left"?m.reverse():m}if(n){var g=l.x,y=e.x.apply(g,{position:a});if(pa(l,"discard")&&!e.x.isInRange(y))return null;var b=[{x:y,y:f+d},{x:y,y:f}];return s==="top"?b.reverse():b}if(i){var _=l.segment,x=_.map(function(S){return e.apply(S,{position:a})});return pa(l,"discard")&&_3e(x,function(S){return!e.isInRange(S)})?null:x}return null};function NBe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,u=t.alwaysShow,l=gBe(),c=AG(i),f=TG(o),h=yBe();if(!l||!h)return null;Ga(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=hk({x:c.scale,y:f.scale}),p=jn(e),v=jn(n),m=r&&r.length===2,g=DBe(d,p,v,m,h,t.position,c.orientation,f.orientation,t);if(!g)return null;var y=TBe(g,2),b=y[0],_=b.x,x=b.y,S=y[1],E=S.x,C=S.y,A=pa(t,"hidden")?"url(#".concat(l,")"):void 0,T=J4(J4({clipPath:A},Fe(t,!0)),{},{x1:_,y1:x,x2:E,y2:C});return V.createElement(yt,{className:qe("recharts-reference-line",s)},IBe(a,T),Xn.renderCallByParent(t,hBe({x1:_,y1:x,x2:E,y2:C})))}var pk=function(t){function e(){return bBe(this,e),_Be(this,e,arguments)}return CBe(e,t),xBe(e,[{key:"render",value:function(){return V.createElement(NBe,this.props)}}])}(V.Component);dk(pk,"displayName","ReferenceLine");dk(pk,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function B2(){return B2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B2.apply(this,arguments)}function gh(t){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(t)}function Z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z4(Object(n),!0).forEach(function(r){Tx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DG(r.key),r)}}function jBe(t,e,n){return e&&$Be(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function LBe(t,e,n){return e=Ab(e),FBe(t,IG()?Reflect.construct(e,n||[],Ab(t).constructor):e.apply(t,n))}function FBe(t,e){if(e&&(gh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BBe(t)}function BBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IG=function(){return!!t})()}function Ab(t){return Ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ab(t)}function UBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U2(t,e)}function U2(t,e){return U2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},U2(t,e)}function Tx(t,e,n){return e=DG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DG(t){var e=VBe(t,"string");return gh(e)=="symbol"?e:e+""}function VBe(t,e){if(gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WBe=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=hk({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return pa(e,"discard")&&!a.isInRange(s)?null:s},Px=function(t){function e(){return MBe(this,e),LBe(this,e,arguments)}return UBe(e,t),jBe(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,u=r.clipPathId,l=jn(i),c=jn(o);if(Ga(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var f=WBe(this.props);if(!f)return null;var h=f.x,d=f.y,p=this.props,v=p.shape,m=p.className,g=pa(this.props,"hidden")?"url(#".concat(u,")"):void 0,y=eF(eF({clipPath:g},Fe(this.props,!0)),{},{cx:h,cy:d});return V.createElement(yt,{className:qe("recharts-reference-dot",m)},e.renderDot(v,y),Xn.renderCallByParent(this.props,{x:h-a,y:d-a,width:2*a,height:2*a}))}}])}(V.Component);Tx(Px,"displayName","ReferenceDot");Tx(Px,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Tx(Px,"renderDot",function(t,e){var n;return V.isValidElement(t)?n=V.cloneElement(t,e):ze(t)?n=t(e):n=V.createElement(fk,B2({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function V2(){return V2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},V2.apply(this,arguments)}function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function tF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tF(Object(n),!0).forEach(function(r){Ox(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zBe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HBe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MG(r.key),r)}}function GBe(t,e,n){return e&&HBe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qBe(t,e,n){return e=Tb(e),KBe(t,NG()?Reflect.construct(e,n||[],Tb(t).constructor):e.apply(t,n))}function KBe(t,e){if(e&&(yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XBe(t)}function XBe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NG=function(){return!!t})()}function Tb(t){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tb(t)}function YBe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W2(t,e)}function W2(t,e){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},W2(t,e)}function Ox(t,e,n){return e=MG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MG(t){var e=JBe(t,"string");return yh(e)=="symbol"?e:e+""}function JBe(t,e){if(yh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(yh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QBe=function(e,n,r,i,o){var a=o.x1,s=o.x2,u=o.y1,l=o.y2,c=o.xAxis,f=o.yAxis;if(!c||!f)return null;var h=hk({x:c.scale,y:f.scale}),d={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(u,{position:"start"}):h.y.rangeMin},p={x:n?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(l,{position:"end"}):h.y.rangeMax};return pa(o,"discard")&&(!h.isInRange(d)||!h.isInRange(p))?null:yG(d,p)},kx=function(t){function e(){return zBe(this,e),qBe(this,e,arguments)}return YBe(e,t),GBe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,u=r.className,l=r.alwaysShow,c=r.clipPathId;Ga(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=jn(i),h=jn(o),d=jn(a),p=jn(s),v=this.props.shape;if(!f&&!h&&!d&&!p&&!v)return null;var m=QBe(f,h,d,p,this.props);if(!m&&!v)return null;var g=pa(this.props,"hidden")?"url(#".concat(c,")"):void 0;return V.createElement(yt,{className:qe("recharts-reference-area",u)},e.renderRect(v,nF(nF({clipPath:g},Fe(this.props,!0)),m)),Xn.renderCallByParent(this.props,m))}}])}(V.Component);Ox(kx,"displayName","ReferenceArea");Ox(kx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ox(kx,"renderRect",function(t,e){var n;return V.isValidElement(t)?n=V.cloneElement(t,e):ze(t)?n=t(e):n=V.createElement(ck,V2({},e,{className:"recharts-reference-area-rect"})),n});function $G(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function ZBe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return pBe(r,n)}function eUe(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function Pb(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function tUe(t,e){return $G(t,e+1)}function nUe(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,u=0,l=1,c=a,f=function(){var p=r==null?void 0:r[u];if(p===void 0)return{v:$G(r,l)};var v=u,m,g=function(){return m===void 0&&(m=n(p,v)),m},y=p.coordinate,b=u===0||Pb(t,y,g,c,s);b||(u=0,c=a,l+=1),b&&(c=y+t*(g()/2+i),u+=l)},h;l<=o.length;)if(h=f(),h)return h.v;return[]}function Bv(t){"@babel/helpers - typeof";return Bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(t)}function rF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rF(Object(n),!0).forEach(function(r){rUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rUe(t,e,n){return e=iUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iUe(t){var e=oUe(t,"string");return Bv(e)=="symbol"?e:e+""}function oUe(t,e){if(Bv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aUe(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,u=e.end,l=function(h){var d=o[h],p,v=function(){return p===void 0&&(p=n(d,h)),p};if(h===a-1){var m=t*(d.coordinate+t*v()/2-u);o[h]=d=yr(yr({},d),{},{tickCoord:m>0?d.coordinate-m*t:d.coordinate})}else o[h]=d=yr(yr({},d),{},{tickCoord:d.coordinate});var g=Pb(t,d.tickCoord,v,s,u);g&&(u=d.tickCoord-t*(v()/2+i),o[h]=yr(yr({},d),{},{isShow:!0}))},c=a-1;c>=0;c--)l(c);return o}function sUe(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,u=e.start,l=e.end;if(o){var c=r[s-1],f=n(c,s-1),h=t*(c.coordinate+t*f/2-l);a[s-1]=c=yr(yr({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate});var d=Pb(t,c.tickCoord,function(){return f},u,l);d&&(l=c.tickCoord-t*(f/2+i),a[s-1]=yr(yr({},c),{},{isShow:!0}))}for(var p=o?s-1:s,v=function(y){var b=a[y],_,x=function(){return _===void 0&&(_=n(b,y)),_};if(y===0){var S=t*(b.coordinate-t*x()/2-u);a[y]=b=yr(yr({},b),{},{tickCoord:S<0?b.coordinate-S*t:b.coordinate})}else a[y]=b=yr(yr({},b),{},{tickCoord:b.coordinate});var E=Pb(t,b.tickCoord,x,u,l);E&&(u=b.tickCoord+t*(x()/2+i),a[y]=yr(yr({},b),{},{isShow:!0}))},m=0;m<p;m++)v(m);return a}function uUe(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,u=t.interval,l=t.tickFormatter,c=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(ve(u)||qa.isSsr)return tUe(i,typeof u=="number"&&ve(u)?u:0);var h=[],d=s==="top"||s==="bottom"?"width":"height",p=c&&d==="width"?hp(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=function(b,_){var x=ze(l)?l(b.value,_):b.value;return d==="width"?ZBe(hp(x,{fontSize:e,letterSpacing:n}),p,f):hp(x,{fontSize:e,letterSpacing:n})[d]},m=i.length>=2?jr(i[1].coordinate-i[0].coordinate):1,g=eUe(o,m,d);return u==="equidistantPreserveStart"?nUe(m,g,v,i,a):(u==="preserveStart"||u==="preserveStartEnd"?h=sUe(m,g,v,i,a,u==="preserveStartEnd"):h=aUe(m,g,v,i,a),h.filter(function(y){return y.isShow}))}var lUe=["viewBox"],cUe=["viewBox"],fUe=["ticks"];function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function Zc(){return Zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zc.apply(this,arguments)}function iF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iF(Object(n),!0).forEach(function(r){vk(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iS(t,e){if(t==null)return{};var n=hUe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hUe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oF(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LG(r.key),r)}}function pUe(t,e,n){return e&&oF(t.prototype,e),n&&oF(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vUe(t,e,n){return e=Ob(e),mUe(t,jG()?Reflect.construct(e,n||[],Ob(t).constructor):e.apply(t,n))}function mUe(t,e){if(e&&(bh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gUe(t)}function gUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jG=function(){return!!t})()}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ob(t)}function yUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z2(t,e)}function z2(t,e){return z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z2(t,e)}function vk(t,e,n){return e=LG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LG(t){var e=bUe(t,"string");return bh(e)=="symbol"?e:e+""}function bUe(t,e){if(bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rx=function(t){function e(n){var r;return dUe(this,e),r=vUe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return yUe(e,t),pUe(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=iS(r,lUe),s=this.props,u=s.viewBox,l=iS(s,cUe);return!Af(o,u)||!Af(a,l)||!Af(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,u=i.height,l=i.orientation,c=i.tickSize,f=i.mirror,h=i.tickMargin,d,p,v,m,g,y,b=f?-1:1,_=r.tickSize||c,x=ve(r.tickCoord)?r.tickCoord:r.coordinate;switch(l){case"top":d=p=r.coordinate,m=a+ +!f*u,v=m-b*_,y=v-b*h,g=x;break;case"left":v=m=r.coordinate,p=o+ +!f*s,d=p-b*_,g=d-b*h,y=x;break;case"right":v=m=r.coordinate,p=o+ +f*s,d=p+b*_,g=d+b*h,y=x;break;default:d=p=r.coordinate,m=a+ +f*u,v=m+b*_,y=v+b*h,g=x;break}return{line:{x1:d,y1:v,x2:p,y2:m},tick:{x:g,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,u=r.orientation,l=r.mirror,c=r.axisLine,f=Tn(Tn(Tn({},Fe(this.props,!1)),Fe(c,!1)),{},{fill:"none"});if(u==="top"||u==="bottom"){var h=+(u==="top"&&!l||u==="bottom"&&l);f=Tn(Tn({},f),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var d=+(u==="left"&&!l||u==="right"&&l);f=Tn(Tn({},f),{},{x1:i+d*a,y1:o,x2:i+d*a,y2:o+s})}return V.createElement("line",Zc({},f,{className:qe("recharts-cartesian-axis-line",Ai(c,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,u=s.tickLine,l=s.stroke,c=s.tick,f=s.tickFormatter,h=s.unit,d=uUe(Tn(Tn({},this.props),{},{ticks:r}),i,o),p=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),m=Fe(this.props,!1),g=Fe(c,!1),y=Tn(Tn({},m),{},{fill:"none"},Fe(u,!1)),b=d.map(function(_,x){var S=a.getTickLineCoord(_),E=S.line,C=S.tick,A=Tn(Tn(Tn(Tn({textAnchor:p,verticalAnchor:v},m),{},{stroke:"none",fill:l},g),C),{},{index:x,payload:_,visibleTicksCount:d.length,tickFormatter:f});return V.createElement(yt,Zc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Gl(a.props,_,x)),u&&V.createElement("line",Zc({},y,E,{className:qe("recharts-cartesian-axis-tick-line",Ai(u,"className"))})),c&&e.renderTickItem(c,A,"".concat(ze(f)?f(_.value,x):_.value).concat(h||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,u=i.ticksGenerator,l=i.className,c=i.hide;if(c)return null;var f=this.props,h=f.ticks,d=iS(f,fUe),p=h;return ze(u)&&(p=h&&h.length>0?u(this.props):u(d)),a<=0||s<=0||!p||!p.length?null:V.createElement(yt,{className:qe("recharts-cartesian-axis",l),ref:function(m){r.layerReference=m}},o&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),Xn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a,s=qe(i.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(r)?a=V.cloneElement(r,Tn(Tn({},i),{},{className:s})):ze(r)?a=r(Tn(Tn({},i),{},{className:s})):a=V.createElement(ql,Zc({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(k.Component);vk(Rx,"displayName","CartesianAxis");vk(Rx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function wUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xUe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UG(r.key),r)}}function _Ue(t,e,n){return e&&xUe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SUe(t,e,n){return e=kb(e),EUe(t,FG()?Reflect.construct(e,n||[],kb(t).constructor):e.apply(t,n))}function EUe(t,e){if(e&&(wh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CUe(t)}function CUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FG=function(){return!!t})()}function kb(t){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kb(t)}function AUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H2(t,e)}function H2(t,e){return H2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},H2(t,e)}function BG(t,e,n){return e=UG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UG(t){var e=TUe(t,"string");return wh(e)=="symbol"?e:e+""}function TUe(t,e){if(wh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function G2(){return G2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G2.apply(this,arguments)}function PUe(t){var e=t.xAxisId,n=PG(),r=OG(),i=AG(e);return i==null?null:k.createElement(Rx,G2({},i,{className:qe("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return xl(a,!0)}}))}var Ix=function(t){function e(){return wUe(this,e),SUe(this,e,arguments)}return AUe(e,t),_Ue(e,[{key:"render",value:function(){return k.createElement(PUe,this.props)}}])}(k.Component);BG(Ix,"displayName","XAxis");BG(Ix,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function xh(t){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function OUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kUe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zG(r.key),r)}}function RUe(t,e,n){return e&&kUe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IUe(t,e,n){return e=Rb(e),DUe(t,VG()?Reflect.construct(e,n||[],Rb(t).constructor):e.apply(t,n))}function DUe(t,e){if(e&&(xh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NUe(t)}function NUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VG=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rb(t)}function MUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q2(t,e)}function q2(t,e){return q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},q2(t,e)}function WG(t,e,n){return e=zG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zG(t){var e=$Ue(t,"string");return xh(e)=="symbol"?e:e+""}function $Ue(t,e){if(xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K2(){return K2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K2.apply(this,arguments)}var jUe=function(e){var n=e.yAxisId,r=PG(),i=OG(),o=TG(n);return o==null?null:k.createElement(Rx,K2({},o,{className:qe("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return xl(s,!0)}}))},Dx=function(t){function e(){return OUe(this,e),IUe(this,e,arguments)}return MUe(e,t),RUe(e,[{key:"render",value:function(){return k.createElement(jUe,this.props)}}])}(k.Component);WG(Dx,"displayName","YAxis");WG(Dx,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function aF(t){return UUe(t)||BUe(t)||FUe(t)||LUe()}function LUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FUe(t,e){if(t){if(typeof t=="string")return X2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X2(t,e)}}function BUe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UUe(t){if(Array.isArray(t))return X2(t)}function X2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Y2=function(e,n,r,i,o){var a=Xi(e,pk),s=Xi(e,Px),u=[].concat(aF(a),aF(s)),l=Xi(e,kx),c="".concat(i,"Id"),f=i[0],h=n;if(u.length&&(h=u.reduce(function(v,m){if(m.props[c]===r&&pa(m.props,"extendDomain")&&ve(m.props[f])){var g=m.props[f];return[Math.min(v[0],g),Math.max(v[1],g)]}return v},h)),l.length){var d="".concat(f,"1"),p="".concat(f,"2");h=l.reduce(function(v,m){if(m.props[c]===r&&pa(m.props,"extendDomain")&&ve(m.props[d])&&ve(m.props[p])){var g=m.props[d],y=m.props[p];return[Math.min(v[0],g,y),Math.max(v[1],g,y)]}return v},h)}return o&&o.length&&(h=o.reduce(function(v,m){return ve(m)?[Math.min(v[0],m),Math.max(v[1],m)]:v},h)),h},HG={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function o(u,l,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,f||u,h),p=n?n+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],d]:u._events[p].push(d):(u._events[p]=d,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],c,f;if(this._eventsCount===0)return l;for(f in c=this._events)e.call(c,f)&&l.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},s.prototype.listeners=function(l){var c=n?n+l:l,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},s.prototype.listenerCount=function(l){var c=n?n+l:l,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,c,f,h,d,p){var v=n?n+l:l;if(!this._events[v])return!1;var m=this._events[v],g=arguments.length,y,b;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,f),!0;case 4:return m.fn.call(m.context,c,f,h),!0;case 5:return m.fn.call(m.context,c,f,h,d),!0;case 6:return m.fn.call(m.context,c,f,h,d,p),!0}for(b=1,y=new Array(g-1);b<g;b++)y[b-1]=arguments[b];m.fn.apply(m.context,y)}else{var _=m.length,x;for(b=0;b<_;b++)switch(m[b].once&&this.removeListener(l,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,c);break;case 3:m[b].fn.call(m[b].context,c,f);break;case 4:m[b].fn.call(m[b].context,c,f,h);break;default:if(!y)for(x=1,y=new Array(g-1);x<g;x++)y[x-1]=arguments[x];m[b].fn.apply(m[b].context,y)}}return!0},s.prototype.on=function(l,c,f){return o(this,l,c,f,!1)},s.prototype.once=function(l,c,f){return o(this,l,c,f,!0)},s.prototype.removeListener=function(l,c,f,h){var d=n?n+l:l;if(!this._events[d])return this;if(!c)return a(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!h||p.once)&&(!f||p.context===f)&&a(this,d);else{for(var v=0,m=[],g=p.length;v<g;v++)(p[v].fn!==c||h&&!p[v].once||f&&p[v].context!==f)&&m.push(p[v]);m.length?this._events[d]=m.length===1?m[0]:m:a(this,d)}return this},s.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(HG);var VUe=HG.exports;const WUe=wt(VUe);var oS=new WUe,aS="recharts.syncMouseEvents";function Uv(t){"@babel/helpers - typeof";return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uv(t)}function zUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HUe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GG(r.key),r)}}function GUe(t,e,n){return e&&HUe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sS(t,e,n){return e=GG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GG(t){var e=qUe(t,"string");return Uv(e)=="symbol"?e:e+""}function qUe(t,e){if(Uv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var KUe=function(){function t(){zUe(this,t),sS(this,"activeIndex",0),sS(this,"coordinateList",[]),sS(this,"layout","horizontal")}return GUe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,u=n.layout,l=u===void 0?null:u,c=n.offset,f=c===void 0?null:c,h=n.mouseHandlerCallback,d=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=l??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=d??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,u=this.coordinateList[this.activeIndex].coordinate,l=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=o+u+l,h=a+this.offset.top+s/2+c;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function XUe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ve(r)&&ve(i))return!0}return!1}function YUe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function qG(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Dt(e,n,r,i),s=Dt(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function JUe(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,u=e.cy,l=e.innerRadius,c=e.outerRadius,f=e.angle,h=Dt(s,u,l,f),d=Dt(s,u,c,f);r=h.x,i=h.y,o=d.x,a=d.y}else return qG(e);return[{x:r,y:i},{x:o,y:a}]}function Vv(t){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vv(t)}function sF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sF(Object(n),!0).forEach(function(r){QUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QUe(t,e,n){return e=ZUe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZUe(t){var e=e5e(t,"string");return Vv(e)=="symbol"?e:e+""}function e5e(t,e){if(Vv(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vv(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t5e(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,u=t.offset,l=t.activeTooltipIndex,c=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,d=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!d||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var p,v=b2;if(h==="ScatterChart")p=a,v=l4e;else if(h==="BarChart")p=YUe(f,a,u,c),v=ck;else if(f==="radial"){var m=qG(a),g=m.cx,y=m.cy,b=m.radius,_=m.startAngle,x=m.endAngle;p={cx:g,cy:y,startAngle:_,endAngle:x,innerRadius:b,outerRadius:b},v=G9}else p={points:JUe(f,a,u)},v=b2;var S=Wg(Wg(Wg(Wg({stroke:"#ccc",pointerEvents:"none"},u),p),Fe(d,!1)),{},{payload:s,payloadIndex:l,className:qe("recharts-tooltip-cursor",d.className)});return k.isValidElement(d)?k.cloneElement(d,S):k.createElement(v,S)}var n5e=["item"],r5e=["children","className","width","height","style","compact","title","desc"];function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ef.apply(this,arguments)}function uF(t,e){return a5e(t)||o5e(t,e)||XG(t,e)||i5e()}function i5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o5e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}function a5e(t){if(Array.isArray(t))return t}function lF(t,e){if(t==null)return{};var n=s5e(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function s5e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function u5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l5e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YG(r.key),r)}}function c5e(t,e,n){return e&&l5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function f5e(t,e,n){return e=Ib(e),h5e(t,KG()?Reflect.construct(e,n||[],Ib(t).constructor):e.apply(t,n))}function h5e(t,e){if(e&&(_h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d5e(t)}function d5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KG=function(){return!!t})()}function Ib(t){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ib(t)}function p5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J2(t,e)}function J2(t,e){return J2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},J2(t,e)}function Sh(t){return g5e(t)||m5e(t)||XG(t)||v5e()}function v5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XG(t,e){if(t){if(typeof t=="string")return Q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q2(t,e)}}function m5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function g5e(t){if(Array.isArray(t))return Q2(t)}function Q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cF(Object(n),!0).forEach(function(r){Ne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ne(t,e,n){return e=YG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YG(t){var e=y5e(t,"string");return _h(e)=="symbol"?e:e+""}function y5e(t,e){if(_h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b5e={xAxis:["bottom","top"],yAxis:["left","right"]},w5e={width:"100%",height:"100%"},JG={x:0,y:0};function zg(t){return t}var x5e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},_5e=function(e,n,r,i){var o=n.find(function(c){return c&&c.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return ie(ie(ie({},i),Dt(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var u=o.coordinate,l=i.angle;return ie(ie(ie({},i),Dt(i.cx,i.cy,u,l)),{},{angle:l,radius:u})}return JG},Nx=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,u){var l=u.props.data;return l&&l.length?[].concat(Sh(s),Sh(l)):s},[]);return a.length>0?a:e&&e.length&&ve(i)&&ve(o)?e.slice(i,o+1):[]};function QG(t){return t==="number"?[0,"auto"]:void 0}var Z2=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=Nx(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(u,l){var c,f=(c=l.props.data)!==null&&c!==void 0?c:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var d=f===void 0?s:f;h=TC(d,a.dataKey,i)}else h=f&&f[r]||s[r];return h?[].concat(Sh(u),[B9(l,h)]):u},[])},fF=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=x5e(o,r),s=e.orderedTooltipTicks,u=e.tooltipAxis,l=e.tooltipTicks,c=DMe(a,s,l,u);if(c>=0&&l){var f=l[c]&&l[c].value,h=Z2(e,n,c,f),d=_5e(r,s,c,o);return{activeTooltipIndex:c,activeLabel:f,activePayload:h,activeCoordinate:d}}return null},S5e=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.layout,f=e.children,h=e.stackOffset,d=M9(c,o);return r.reduce(function(p,v){var m,g=v.type.defaultProps!==void 0?ie(ie({},v.type.defaultProps),v.props):v.props,y=g.type,b=g.dataKey,_=g.allowDataOverflow,x=g.allowDuplicatedCategory,S=g.scale,E=g.ticks,C=g.includeHidden,A=g[a];if(p[A])return p;var T=Nx(e.data,{graphicalItems:i.filter(function(q){var J,ae=a in q.props?q.props[a]:(J=q.type.defaultProps)===null||J===void 0?void 0:J[a];return ae===A}),dataStartIndex:u,dataEndIndex:l}),P=T.length,R,I,M;XUe(g.domain,_,y)&&(R=p2(g.domain,null,_),d&&(y==="number"||S!=="auto")&&(M=pp(T,b,"category")));var B=QG(y);if(!R||R.length===0){var z,U=(z=g.domain)!==null&&z!==void 0?z:B;if(b){if(R=pp(T,b,y),y==="category"&&d){var $=_1e(R);x&&$?(I=R,R=wb(0,P)):x||(R=LL(U,R,v).reduce(function(q,J){return q.indexOf(J)>=0?q:[].concat(Sh(q),[J])},[]))}else if(y==="category")x?R=R.filter(function(q){return q!==""&&!Qe(q)}):R=LL(U,R,v).reduce(function(q,J){return q.indexOf(J)>=0||J===""||Qe(J)?q:[].concat(Sh(q),[J])},[]);else if(y==="number"){var L=LMe(T,i.filter(function(q){var J,ae,fe=a in q.props?q.props[a]:(J=q.type.defaultProps)===null||J===void 0?void 0:J[a],he="hide"in q.props?q.props.hide:(ae=q.type.defaultProps)===null||ae===void 0?void 0:ae.hide;return fe===A&&(C||!he)}),b,o,c);L&&(R=L)}d&&(y==="number"||S!=="auto")&&(M=pp(T,b,"category"))}else d?R=wb(0,P):s&&s[A]&&s[A].hasStack&&y==="number"?R=h==="expand"?[0,1]:F9(s[A].stackGroups,u,l):R=N9(T,i.filter(function(q){var J=a in q.props?q.props[a]:q.type.defaultProps[a],ae="hide"in q.props?q.props.hide:q.type.defaultProps.hide;return J===A&&(C||!ae)}),y,c,!0);if(y==="number")R=Y2(f,R,A,o,E),U&&(R=p2(U,R,_));else if(y==="category"&&U){var H=U,X=R.every(function(q){return H.indexOf(q)>=0});X&&(R=H)}}return ie(ie({},p),{},Ne({},A,ie(ie({},g),{},{axisType:o,domain:R,categoricalDomain:M,duplicateDomain:I,originalDomain:(m=g.domain)!==null&&m!==void 0?m:B,isCategorical:d,layout:c})))},{})},E5e=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.layout,f=e.children,h=Nx(e.data,{graphicalItems:r,dataStartIndex:u,dataEndIndex:l}),d=h.length,p=M9(c,o),v=-1;return r.reduce(function(m,g){var y=g.type.defaultProps!==void 0?ie(ie({},g.type.defaultProps),g.props):g.props,b=y[a],_=QG("number");if(!m[b]){v++;var x;return p?x=wb(0,d):s&&s[b]&&s[b].hasStack?(x=F9(s[b].stackGroups,u,l),x=Y2(f,x,b,o)):(x=p2(_,N9(h,r.filter(function(S){var E,C,A=a in S.props?S.props[a]:(E=S.type.defaultProps)===null||E===void 0?void 0:E[a],T="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return A===b&&!T}),"number",c),i.defaultProps.allowDataOverflow),x=Y2(f,x,b,o)),ie(ie({},m),{},Ne({},b,ie(ie({axisType:o},i.defaultProps),{},{hide:!0,orientation:Ai(b5e,"".concat(o,".").concat(v%2),null),domain:x,originalDomain:_,isCategorical:p,layout:c})))}return m},{})},C5e=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,u=n.dataStartIndex,l=n.dataEndIndex,c=e.children,f="".concat(i,"Id"),h=Xi(c,o),d={};return h&&h.length?d=S5e(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:u,dataEndIndex:l}):a&&a.length&&(d=E5e(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:u,dataEndIndex:l})),d},A5e=function(e){var n=Ic(e),r=xl(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:jO(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:ub(n,r)}},hF=function(e){var n=e.children,r=e.defaultShowTooltip,i=di(n,ph),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},T5e=function(e){return!e||!e.length?!1:e.some(function(n){var r=Ha(n&&n.type);return r&&r.indexOf("Bar")>=0})},dF=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},P5e=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,u=s===void 0?{}:s,l=r.width,c=r.height,f=r.children,h=r.margin||{},d=di(f,ph),p=di(f,Tf),v=Object.keys(u).reduce(function(x,S){var E=u[S],C=E.orientation;return!E.mirror&&!E.hide?ie(ie({},x),{},Ne({},C,x[C]+E.width)):x},{left:h.left||0,right:h.right||0}),m=Object.keys(a).reduce(function(x,S){var E=a[S],C=E.orientation;return!E.mirror&&!E.hide?ie(ie({},x),{},Ne({},C,Ai(x,"".concat(C))+E.height)):x},{top:h.top||0,bottom:h.bottom||0}),g=ie(ie({},m),v),y=g.bottom;d&&(g.bottom+=d.props.height||ph.defaultProps.height),p&&n&&(g=$Me(g,i,r,n));var b=l-g.left-g.right,_=c-g.top-g.bottom;return ie(ie({brushBottom:y},g),{},{width:Math.max(b,0),height:Math.max(_,0)})},O5e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},ZG=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,u=e.axisComponents,l=e.legendContent,c=e.formatAxisMap,f=e.defaultProps,h=function(g,y){var b=y.graphicalItems,_=y.stackGroups,x=y.offset,S=y.updateId,E=y.dataStartIndex,C=y.dataEndIndex,A=g.barSize,T=g.layout,P=g.barGap,R=g.barCategoryGap,I=g.maxBarSize,M=dF(T),B=M.numericAxisName,z=M.cateAxisName,U=T5e(b),$=[];return b.forEach(function(L,H){var X=Nx(g.data,{graphicalItems:[L],dataStartIndex:E,dataEndIndex:C}),q=L.type.defaultProps!==void 0?ie(ie({},L.type.defaultProps),L.props):L.props,J=q.dataKey,ae=q.maxBarSize,fe=q["".concat(B,"Id")],he=q["".concat(z,"Id")],de={},be=u.reduce(function(st,Pt){var Et=y["".concat(Pt.axisType,"Map")],fr=q["".concat(Pt.axisType,"Id")];Et&&Et[fr]||Pt.axisType==="zAxis"||Xl();var on=Et[fr];return ie(ie({},st),{},Ne(Ne({},Pt.axisType,on),"".concat(Pt.axisType,"Ticks"),xl(on)))},de),ne=be[z],ue=be["".concat(z,"Ticks")],ce=_&&_[fe]&&_[fe].hasStack&&qMe(L,_[fe].stackGroups),Z=Ha(L.type).indexOf("Bar")>=0,ge=ub(ne,ue),ye=[],De=U&&NMe({barSize:A,stackGroups:_,totalSize:O5e(be,z)});if(Z){var ke,tt,ft=Qe(ae)?I:ae,je=(ke=(tt=ub(ne,ue,!0))!==null&&tt!==void 0?tt:ft)!==null&&ke!==void 0?ke:0;ye=MMe({barGap:P,barCategoryGap:R,bandSize:je!==ge?je:ge,sizeList:De[he],maxBarSize:ft}),je!==ge&&(ye=ye.map(function(st){return ie(ie({},st),{},{position:ie(ie({},st.position),{},{offset:st.position.offset-je/2})})}))}var Ye=L&&L.type&&L.type.getComposedData;Ye&&$.push({props:ie(ie({},Ye(ie(ie({},be),{},{displayedData:X,props:g,dataKey:J,item:L,bandSize:ge,barPosition:ye,offset:x,stackedData:ce,layout:T,dataStartIndex:E,dataEndIndex:C}))),{},Ne(Ne(Ne({key:L.key||"item-".concat(H)},B,be[B]),z,be[z]),"animationId",S)),childIndex:N1e(L,g.children),item:L})}),$},d=function(g,y){var b=g.props,_=g.dataStartIndex,x=g.dataEndIndex,S=g.updateId;if(!I$({props:b}))return null;var E=b.children,C=b.layout,A=b.stackOffset,T=b.data,P=b.reverseStackOrder,R=dF(C),I=R.numericAxisName,M=R.cateAxisName,B=Xi(E,r),z=HMe(T,B,"".concat(I,"Id"),"".concat(M,"Id"),A,P),U=u.reduce(function(q,J){var ae="".concat(J.axisType,"Map");return ie(ie({},q),{},Ne({},ae,C5e(b,ie(ie({},J),{},{graphicalItems:B,stackGroups:J.axisType===I&&z,dataStartIndex:_,dataEndIndex:x}))))},{}),$=P5e(ie(ie({},U),{},{props:b,graphicalItems:B}),y==null?void 0:y.legendBBox);Object.keys(U).forEach(function(q){U[q]=c(b,U[q],$,q.replace("Map",""),n)});var L=U["".concat(M,"Map")],H=A5e(L),X=h(b,ie(ie({},U),{},{dataStartIndex:_,dataEndIndex:x,updateId:S,graphicalItems:B,stackGroups:z,offset:$}));return ie(ie({formattedGraphicalItems:X,graphicalItems:B,offset:$,stackGroups:z},H),U)},p=function(m){function g(y){var b,_,x;return u5e(this,g),x=f5e(this,g,[y]),Ne(x,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ne(x,"accessibilityManager",new KUe),Ne(x,"handleLegendBBoxUpdate",function(S){if(S){var E=x.state,C=E.dataStartIndex,A=E.dataEndIndex,T=E.updateId;x.setState(ie({legendBBox:S},d({props:x.props,dataStartIndex:C,dataEndIndex:A,updateId:T},ie(ie({},x.state),{},{legendBBox:S}))))}}),Ne(x,"handleReceiveSyncEvent",function(S,E,C){if(x.props.syncId===S){if(C===x.eventEmitterSymbol&&typeof x.props.syncMethod!="function")return;x.applySyncEvent(E)}}),Ne(x,"handleBrushChange",function(S){var E=S.startIndex,C=S.endIndex;if(E!==x.state.dataStartIndex||C!==x.state.dataEndIndex){var A=x.state.updateId;x.setState(function(){return ie({dataStartIndex:E,dataEndIndex:C},d({props:x.props,dataStartIndex:E,dataEndIndex:C,updateId:A},x.state))}),x.triggerSyncEvent({dataStartIndex:E,dataEndIndex:C})}}),Ne(x,"handleMouseEnter",function(S){var E=x.getMouseInfo(S);if(E){var C=ie(ie({},E),{},{isTooltipActive:!0});x.setState(C),x.triggerSyncEvent(C);var A=x.props.onMouseEnter;ze(A)&&A(C,S)}}),Ne(x,"triggeredAfterMouseMove",function(S){var E=x.getMouseInfo(S),C=E?ie(ie({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};x.setState(C),x.triggerSyncEvent(C);var A=x.props.onMouseMove;ze(A)&&A(C,S)}),Ne(x,"handleItemMouseEnter",function(S){x.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Ne(x,"handleItemMouseLeave",function(){x.setState(function(){return{isTooltipActive:!1}})}),Ne(x,"handleMouseMove",function(S){S.persist(),x.throttleTriggeredAfterMouseMove(S)}),Ne(x,"handleMouseLeave",function(S){x.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};x.setState(E),x.triggerSyncEvent(E);var C=x.props.onMouseLeave;ze(C)&&C(E,S)}),Ne(x,"handleOuterEvent",function(S){var E=D1e(S),C=Ai(x.props,"".concat(E));if(E&&ze(C)){var A,T;/.*touch.*/i.test(E)?T=x.getMouseInfo(S.changedTouches[0]):T=x.getMouseInfo(S),C((A=T)!==null&&A!==void 0?A:{},S)}}),Ne(x,"handleClick",function(S){var E=x.getMouseInfo(S);if(E){var C=ie(ie({},E),{},{isTooltipActive:!0});x.setState(C),x.triggerSyncEvent(C);var A=x.props.onClick;ze(A)&&A(C,S)}}),Ne(x,"handleMouseDown",function(S){var E=x.props.onMouseDown;if(ze(E)){var C=x.getMouseInfo(S);E(C,S)}}),Ne(x,"handleMouseUp",function(S){var E=x.props.onMouseUp;if(ze(E)){var C=x.getMouseInfo(S);E(C,S)}}),Ne(x,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Ne(x,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.handleMouseDown(S.changedTouches[0])}),Ne(x,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&x.handleMouseUp(S.changedTouches[0])}),Ne(x,"handleDoubleClick",function(S){var E=x.props.onDoubleClick;if(ze(E)){var C=x.getMouseInfo(S);E(C,S)}}),Ne(x,"handleContextMenu",function(S){var E=x.props.onContextMenu;if(ze(E)){var C=x.getMouseInfo(S);E(C,S)}}),Ne(x,"triggerSyncEvent",function(S){x.props.syncId!==void 0&&oS.emit(aS,x.props.syncId,S,x.eventEmitterSymbol)}),Ne(x,"applySyncEvent",function(S){var E=x.props,C=E.layout,A=E.syncMethod,T=x.state.updateId,P=S.dataStartIndex,R=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)x.setState(ie({dataStartIndex:P,dataEndIndex:R},d({props:x.props,dataStartIndex:P,dataEndIndex:R,updateId:T},x.state)));else if(S.activeTooltipIndex!==void 0){var I=S.chartX,M=S.chartY,B=S.activeTooltipIndex,z=x.state,U=z.offset,$=z.tooltipTicks;if(!U)return;if(typeof A=="function")B=A($,S);else if(A==="value"){B=-1;for(var L=0;L<$.length;L++)if($[L].value===S.activeLabel){B=L;break}}var H=ie(ie({},U),{},{x:U.left,y:U.top}),X=Math.min(I,H.x+H.width),q=Math.min(M,H.y+H.height),J=$[B]&&$[B].value,ae=Z2(x.state,x.props.data,B),fe=$[B]?{x:C==="horizontal"?$[B].coordinate:X,y:C==="horizontal"?q:$[B].coordinate}:JG;x.setState(ie(ie({},S),{},{activeLabel:J,activeCoordinate:fe,activePayload:ae,activeTooltipIndex:B}))}else x.setState(S)}),Ne(x,"renderCursor",function(S){var E,C=x.state,A=C.isTooltipActive,T=C.activeCoordinate,P=C.activePayload,R=C.offset,I=C.activeTooltipIndex,M=C.tooltipAxisBandSize,B=x.getTooltipEventType(),z=(E=S.props.active)!==null&&E!==void 0?E:A,U=x.props.layout,$=S.key||"_recharts-cursor";return V.createElement(t5e,{key:$,activeCoordinate:T,activePayload:P,activeTooltipIndex:I,chartName:n,element:S,isActive:z,layout:U,offset:R,tooltipAxisBandSize:M,tooltipEventType:B})}),Ne(x,"renderPolarAxis",function(S,E,C){var A=Ai(S,"type.axisType"),T=Ai(x.state,"".concat(A,"Map")),P=S.type.defaultProps,R=P!==void 0?ie(ie({},P),S.props):S.props,I=T&&T[R["".concat(A,"Id")]];return k.cloneElement(S,ie(ie({},I),{},{className:qe(A,I.className),key:S.key||"".concat(E,"-").concat(C),ticks:xl(I,!0)}))}),Ne(x,"renderPolarGrid",function(S){var E=S.props,C=E.radialLines,A=E.polarAngles,T=E.polarRadius,P=x.state,R=P.radiusAxisMap,I=P.angleAxisMap,M=Ic(R),B=Ic(I),z=B.cx,U=B.cy,$=B.innerRadius,L=B.outerRadius;return k.cloneElement(S,{polarAngles:Array.isArray(A)?A:xl(B,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(T)?T:xl(M,!0).map(function(H){return H.coordinate}),cx:z,cy:U,innerRadius:$,outerRadius:L,key:S.key||"polar-grid",radialLines:C})}),Ne(x,"renderLegend",function(){var S=x.state.formattedGraphicalItems,E=x.props,C=E.children,A=E.width,T=E.height,P=x.props.margin||{},R=A-(P.left||0)-(P.right||0),I=I9({children:C,formattedGraphicalItems:S,legendWidth:R,legendContent:l});if(!I)return null;var M=I.item,B=lF(I,n5e);return k.cloneElement(M,ie(ie({},B),{},{chartWidth:A,chartHeight:T,margin:P,onBBoxUpdate:x.handleLegendBBoxUpdate}))}),Ne(x,"renderTooltip",function(){var S,E=x.props,C=E.children,A=E.accessibilityLayer,T=di(C,Ho);if(!T)return null;var P=x.state,R=P.isTooltipActive,I=P.activeCoordinate,M=P.activePayload,B=P.activeLabel,z=P.offset,U=(S=T.props.active)!==null&&S!==void 0?S:R;return k.cloneElement(T,{viewBox:ie(ie({},z),{},{x:z.left,y:z.top}),active:U,label:B,payload:U?M:[],coordinate:I,accessibilityLayer:A})}),Ne(x,"renderBrush",function(S){var E=x.props,C=E.margin,A=E.data,T=x.state,P=T.offset,R=T.dataStartIndex,I=T.dataEndIndex,M=T.updateId;return k.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Fg(x.handleBrushChange,S.props.onChange),data:A,x:ve(S.props.x)?S.props.x:P.left,y:ve(S.props.y)?S.props.y:P.top+P.height+P.brushBottom-(C.bottom||0),width:ve(S.props.width)?S.props.width:P.width,startIndex:R,endIndex:I,updateId:"brush-".concat(M)})}),Ne(x,"renderReferenceElement",function(S,E,C){if(!S)return null;var A=x,T=A.clipPathId,P=x.state,R=P.xAxisMap,I=P.yAxisMap,M=P.offset,B=S.type.defaultProps||{},z=S.props,U=z.xAxisId,$=U===void 0?B.xAxisId:U,L=z.yAxisId,H=L===void 0?B.yAxisId:L;return k.cloneElement(S,{key:S.key||"".concat(E,"-").concat(C),xAxis:R[$],yAxis:I[H],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:T})}),Ne(x,"renderActivePoints",function(S){var E=S.item,C=S.activePoint,A=S.basePoint,T=S.childIndex,P=S.isRange,R=[],I=E.props.key,M=E.item.type.defaultProps!==void 0?ie(ie({},E.item.type.defaultProps),E.item.props):E.item.props,B=M.activeDot,z=M.dataKey,U=ie(ie({index:T,dataKey:z,cx:C.x,cy:C.y,r:4,fill:lk(E.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Fe(B,!1)),M0(B));return R.push(g.renderActiveDot(B,U,"".concat(I,"-activePoint-").concat(T))),A?R.push(g.renderActiveDot(B,ie(ie({},U),{},{cx:A.x,cy:A.y}),"".concat(I,"-basePoint-").concat(T))):P&&R.push(null),R}),Ne(x,"renderGraphicChild",function(S,E,C){var A=x.filterFormatItem(S,E,C);if(!A)return null;var T=x.getTooltipEventType(),P=x.state,R=P.isTooltipActive,I=P.tooltipAxis,M=P.activeTooltipIndex,B=P.activeLabel,z=x.props.children,U=di(z,Ho),$=A.props,L=$.points,H=$.isRange,X=$.baseLine,q=A.item.type.defaultProps!==void 0?ie(ie({},A.item.type.defaultProps),A.item.props):A.item.props,J=q.activeDot,ae=q.hide,fe=q.activeBar,he=q.activeShape,de=!!(!ae&&R&&U&&(J||fe||he)),be={};T!=="axis"&&U&&U.props.trigger==="click"?be={onClick:Fg(x.handleItemMouseEnter,S.props.onClick)}:T!=="axis"&&(be={onMouseLeave:Fg(x.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Fg(x.handleItemMouseEnter,S.props.onMouseEnter)});var ne=k.cloneElement(S,ie(ie({},A.props),be));function ue(Pt){return typeof I.dataKey=="function"?I.dataKey(Pt.payload):null}if(de)if(M>=0){var ce,Z;if(I.dataKey&&!I.allowDuplicatedCategory){var ge=typeof I.dataKey=="function"?ue:"payload.".concat(I.dataKey.toString());ce=TC(L,ge,B),Z=H&&X&&TC(X,ge,B)}else ce=L==null?void 0:L[M],Z=H&&X&&X[M];if(he||fe){var ye=S.props.activeIndex!==void 0?S.props.activeIndex:M;return[k.cloneElement(S,ie(ie(ie({},A.props),be),{},{activeIndex:ye})),null,null]}if(!Qe(ce))return[ne].concat(Sh(x.renderActivePoints({item:A,activePoint:ce,basePoint:Z,childIndex:M,isRange:H})))}else{var De,ke=(De=x.getItemByXY(x.state.activeCoordinate))!==null&&De!==void 0?De:{graphicalItem:ne},tt=ke.graphicalItem,ft=tt.item,je=ft===void 0?S:ft,Ye=tt.childIndex,st=ie(ie(ie({},A.props),be),{},{activeIndex:Ye});return[k.cloneElement(je,st),null,null]}return H?[ne,null,null]:[ne,null]}),Ne(x,"renderCustomized",function(S,E,C){return k.cloneElement(S,ie(ie({key:"recharts-customized-".concat(C)},x.props),x.state))}),Ne(x,"renderMap",{CartesianGrid:{handler:zg,once:!0},ReferenceArea:{handler:x.renderReferenceElement},ReferenceLine:{handler:zg},ReferenceDot:{handler:x.renderReferenceElement},XAxis:{handler:zg},YAxis:{handler:zg},Brush:{handler:x.renderBrush,once:!0},Bar:{handler:x.renderGraphicChild},Line:{handler:x.renderGraphicChild},Area:{handler:x.renderGraphicChild},Radar:{handler:x.renderGraphicChild},RadialBar:{handler:x.renderGraphicChild},Scatter:{handler:x.renderGraphicChild},Pie:{handler:x.renderGraphicChild},Funnel:{handler:x.renderGraphicChild},Tooltip:{handler:x.renderCursor,once:!0},PolarGrid:{handler:x.renderPolarGrid,once:!0},PolarAngleAxis:{handler:x.renderPolarAxis},PolarRadiusAxis:{handler:x.renderPolarAxis},Customized:{handler:x.renderCustomized}}),x.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:wm("recharts"),"-clip"),x.throttleTriggeredAfterMouseMove=k8(x.triggeredAfterMouseMove,(_=y.throttleDelay)!==null&&_!==void 0?_:1e3/60),x.state={},x}return p5e(g,m),c5e(g,[{key:"componentDidMount",value:function(){var b,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,_=b.children,x=b.data,S=b.height,E=b.layout,C=di(_,Ho);if(C){var A=C.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,P=Z2(this.state,x,A,T),R=this.state.tooltipTicks[A].coordinate,I=(this.state.offset.top+S)/2,M=E==="horizontal",B=M?{x:R,y:I}:{y:R,x:I},z=this.state.formattedGraphicalItems.find(function($){var L=$.item;return L.type.name==="Scatter"});z&&(B=ie(ie({},B),z.props.points[A].tooltipPosition),P=z.props.points[A].tooltipPayload);var U={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:T,activePayload:P,activeCoordinate:B};this.setState(U),this.renderCursor(C),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var x,S;this.accessibilityManager.setDetails({offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){OC([di(b.children,Ho)],[di(this.props.children,Ho)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=di(this.props.children,Ho);if(b&&typeof b.props.shared=="boolean"){var _=b.props.shared?"axis":"item";return s.indexOf(_)>=0?_:o}return o}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var _=this.container,x=_.getBoundingClientRect(),S=sRe(x),E={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},C=x.width/_.offsetWidth||1,A=this.inRange(E.chartX,E.chartY,C);if(!A)return null;var T=this.state,P=T.xAxisMap,R=T.yAxisMap,I=this.getTooltipEventType(),M=fF(this.state,this.props.data,this.props.layout,A);if(I!=="axis"&&P&&R){var B=Ic(P).scale,z=Ic(R).scale,U=B&&B.invert?B.invert(E.chartX):null,$=z&&z.invert?z.invert(E.chartY):null;return ie(ie({},E),{},{xValue:U,yValue:$},M)}return M?ie(ie({},E),M):null}},{key:"inRange",value:function(b,_){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,E=b/x,C=_/x;if(S==="horizontal"||S==="vertical"){var A=this.state.offset,T=E>=A.left&&E<=A.left+A.width&&C>=A.top&&C<=A.top+A.height;return T?{x:E,y:C}:null}var P=this.state,R=P.angleAxisMap,I=P.radiusAxisMap;if(R&&I){var M=Ic(R);return UL({x:E,y:C},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,_=this.getTooltipEventType(),x=di(b,Ho),S={};x&&_==="axis"&&(x.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=M0(this.props,this.handleOuterEvent);return ie(ie({},E),S)}},{key:"addListener",value:function(){oS.on(aS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){oS.removeListener(aS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,_,x){for(var S=this.state.formattedGraphicalItems,E=0,C=S.length;E<C;E++){var A=S[E];if(A.item===b||A.props.key===b.key||_===Ha(A.item.type)&&x===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,_=this.state.offset,x=_.left,S=_.top,E=_.height,C=_.width;return V.createElement("defs",null,V.createElement("clipPath",{id:b},V.createElement("rect",{x,y:S,height:E,width:C})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(_,x){var S=uF(x,2),E=S[0],C=S[1];return ie(ie({},_),{},Ne({},E,C.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(_,x){var S=uF(x,2),E=S[0],C=S[1];return ie(ie({},_),{},Ne({},E,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(b){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(b){var _=this.state,x=_.formattedGraphicalItems,S=_.activeItem;if(x&&x.length)for(var E=0,C=x.length;E<C;E++){var A=x[E],T=A.props,P=A.item,R=P.type.defaultProps!==void 0?ie(ie({},P.type.defaultProps),P.props):P.props,I=Ha(P.type);if(I==="Bar"){var M=(T.data||[]).find(function($){return WLe(b,$)});if(M)return{graphicalItem:A,payload:M}}else if(I==="RadialBar"){var B=(T.data||[]).find(function($){return UL(b,$)});if(B)return{graphicalItem:A,payload:B}}else if(Ex(A,S)||Cx(A,S)||$v(A,S)){var z=RFe({graphicalItem:A,activeTooltipItem:S,itemData:R.data}),U=R.activeIndex===void 0?z:R.activeIndex;return{graphicalItem:ie(ie({},A),{},{childIndex:U}),payload:$v(A,S)?R.data[z]:A.props.data[z]}}}return null}},{key:"render",value:function(){var b=this;if(!I$(this))return null;var _=this.props,x=_.children,S=_.className,E=_.width,C=_.height,A=_.style,T=_.compact,P=_.title,R=_.desc,I=lF(_,r5e),M=Fe(I,!1);if(T)return V.createElement(X4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(RC,ef({},M,{width:E,height:C,title:P,desc:R}),this.renderClipPath(),N$(x,this.renderMap)));if(this.props.accessibilityLayer){var B,z;M.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,M.role=(z=this.props.role)!==null&&z!==void 0?z:"application",M.onKeyDown=function($){b.accessibilityManager.keyboardEvent($)},M.onFocus=function(){b.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return V.createElement(X4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",ef({className:qe("recharts-wrapper",S),style:ie({position:"relative",cursor:"default",width:E,height:C},A)},U,{ref:function(L){b.container=L}}),V.createElement(RC,ef({},M,{width:E,height:C,title:P,desc:R,style:w5e}),this.renderClipPath(),N$(x,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);Ne(p,"displayName",n),Ne(p,"defaultProps",ie({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ne(p,"getDerivedStateFromProps",function(m,g){var y=m.dataKey,b=m.data,_=m.children,x=m.width,S=m.height,E=m.layout,C=m.stackOffset,A=m.margin,T=g.dataStartIndex,P=g.dataEndIndex;if(g.updateId===void 0){var R=hF(m);return ie(ie(ie({},R),{},{updateId:0},d(ie(ie({props:m},R),{},{updateId:0}),g)),{},{prevDataKey:y,prevData:b,prevWidth:x,prevHeight:S,prevLayout:E,prevStackOffset:C,prevMargin:A,prevChildren:_})}if(y!==g.prevDataKey||b!==g.prevData||x!==g.prevWidth||S!==g.prevHeight||E!==g.prevLayout||C!==g.prevStackOffset||!Af(A,g.prevMargin)){var I=hF(m),M={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},B=ie(ie({},fF(g,b,E)),{},{updateId:g.updateId+1}),z=ie(ie(ie({},I),M),B);return ie(ie(ie({},z),d(ie({props:m},z),g)),{},{prevDataKey:y,prevData:b,prevWidth:x,prevHeight:S,prevLayout:E,prevStackOffset:C,prevMargin:A,prevChildren:_})}if(!OC(_,g.prevChildren)){var U,$,L,H,X=di(_,ph),q=X&&(U=($=X.props)===null||$===void 0?void 0:$.startIndex)!==null&&U!==void 0?U:T,J=X&&(L=(H=X.props)===null||H===void 0?void 0:H.endIndex)!==null&&L!==void 0?L:P,ae=q!==T||J!==P,fe=!Qe(b),he=fe&&!ae?g.updateId:g.updateId+1;return ie(ie({updateId:he},d(ie(ie({props:m},g),{},{updateId:he,dataStartIndex:q,dataEndIndex:J}),g)),{},{prevChildren:_,dataStartIndex:q,dataEndIndex:J})}return null}),Ne(p,"renderActiveDot",function(m,g,y){var b;return k.isValidElement(m)?b=k.cloneElement(m,g):ze(m)?b=m(g):b=V.createElement(fk,g),V.createElement(yt,{className:"recharts-active-dot",key:y},b)});var v=k.forwardRef(function(g,y){return V.createElement(p,ef({},g,{ref:y}))});return v.displayName=p.displayName,v},k5e=ZG({chartName:"BarChart",GraphicalChild:Eu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ix},{axisType:"yAxis",AxisComp:Dx}],formatAxisMap:fBe}),R5e=ZG({chartName:"PieChart",GraphicalChild:ys,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Sx},{axisType:"radiusAxis",AxisComp:xx}],formatAxisMap:r$e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const I5e={light:"",dark:".dark"},eq=k.createContext(null);function tq(){const t=k.useContext(eq);if(!t)throw new Error("useChart must be used within a <ChartContainer />");return t}const nq=k.forwardRef(({id:t,className:e,children:n,config:r,...i},o)=>{const a=k.useId(),s=`chart-${t||a.replace(/:/g,"")}`;return N.jsx(eq.Provider,{value:{config:r},children:N.jsxs("div",{"data-chart":s,ref:o,className:Gt("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",e),...i,children:[N.jsx(D5e,{id:s,config:r}),N.jsx(R8,{children:n})]})})});nq.displayName="Chart";const D5e=({id:t,config:e})=>{const n=Object.entries(e).filter(([r,i])=>i.theme||i.color);return n.length?N.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(I5e).map(([r,i])=>`
${i} [data-chart=${t}] {
${n.map(([o,a])=>{var u;const s=((u=a.theme)==null?void 0:u[r])||a.color;return s?`  --color-${o}: ${s};`:null}).join(`
`)}
}
`).join(`
`)}}):null},pF=Ho,rq=k.forwardRef(({active:t,payload:e,className:n,indicator:r="dot",hideLabel:i=!1,hideIndicator:o=!1,label:a,labelFormatter:s,labelClassName:u,formatter:l,color:c,nameKey:f,labelKey:h},d)=>{const{config:p}=tq(),v=k.useMemo(()=>{var x;if(i||!(e!=null&&e.length))return null;const[g]=e,y=`${h||g.dataKey||g.name||"value"}`,b=eA(p,g,y),_=!h&&typeof a=="string"?((x=p[a])==null?void 0:x.label)||a:b==null?void 0:b.label;return s?N.jsx("div",{className:Gt("font-medium",u),children:s(_,e)}):_?N.jsx("div",{className:Gt("font-medium",u),children:_}):null},[a,s,e,i,u,p,h]);if(!t||!(e!=null&&e.length))return null;const m=e.length===1&&r!=="dot";return N.jsxs("div",{ref:d,className:Gt("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[m?null:v,N.jsx("div",{className:"grid gap-1.5",children:e.map((g,y)=>{const b=`${f||g.name||g.dataKey||"value"}`,_=eA(p,g,b),x=c||g.payload.fill||g.color;return N.jsx("div",{className:Gt("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",r==="dot"&&"items-center"),children:l&&(g==null?void 0:g.value)!==void 0&&g.name?l(g.value,g.name,g,y,g.payload):N.jsxs(N.Fragment,{children:[_!=null&&_.icon?N.jsx(_.icon,{}):!o&&N.jsx("div",{className:Gt("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":r==="dot","w-1":r==="line","w-0 border-[1.5px] border-dashed bg-transparent":r==="dashed","my-0.5":m&&r==="dashed"}),style:{"--color-bg":x,"--color-border":x}}),N.jsxs("div",{className:Gt("flex flex-1 justify-between leading-none",m?"items-end":"items-center"),children:[N.jsxs("div",{className:"grid gap-1.5",children:[m?v:null,N.jsx("span",{className:"text-muted-foreground",children:(_==null?void 0:_.label)||g.name})]}),g.value&&N.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:g.value.toLocaleString()})]})]})},g.dataKey)})})]})});rq.displayName="ChartTooltip";const N5e=k.forwardRef(({className:t,hideIcon:e=!1,payload:n,verticalAlign:r="bottom",nameKey:i},o)=>{const{config:a}=tq();return n!=null&&n.length?N.jsx("div",{ref:o,className:Gt("flex items-center justify-center gap-4",r==="top"?"pb-3":"pt-3",t),children:n.map(s=>{const u=`${i||s.dataKey||"value"}`,l=eA(a,s,u);return N.jsxs("div",{className:Gt("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[l!=null&&l.icon&&!e?N.jsx(l.icon,{}):N.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:s.color}}),l==null?void 0:l.label]},s.value)})}):null});N5e.displayName="ChartLegend";function eA(t,e,n){if(typeof e!="object"||e===null)return;const r="payload"in e&&typeof e.payload=="object"&&e.payload!==null?e.payload:void 0;let i=n;return n in e&&typeof e[n]=="string"?i=e[n]:r&&n in r&&typeof r[n]=="string"&&(i=r[n]),i in t?t[i]:t[n]}const M5e={happy:"hsl(142 71% 45%)",neutral:"hsl(220 9% 46%)",sad:"hsl(220 70% 50%)",angry:"hsl(0 84% 60%)",surprised:"hsl(38 92% 50%)",fearful:"hsl(262 83% 58%)",disgusted:"hsl(172 66% 50%)"},$5e={happy:" ",neutral:" ",sad:" ",angry:" ",surprised:" ",fearful:" ",disgusted:" "},j5e=({onBack:t})=>{const{getProgress:e,getEmotionLogs:n,getProfile:r}=eP(),[i,o]=k.useState([]),[a,s]=k.useState([]),[u,l]=k.useState(null),[c,f]=k.useState(!0);k.useEffect(()=>{(async()=>{f(!0);const[b,_,x]=await Promise.all([e(),n(),r()]);b.data&&o(b.data),_.data&&s(_.data),x.data&&l(x.data),f(!1)})()},[e,n,r]);const h=Xf.map(y=>{const b=i.filter(x=>x.level_number===y.id),_=b.length>0?Math.max(...b.map(x=>x.score)):0;return{name:`${y.id}`,fullName:y.title,score:_,required:y.requiredScore}}),d=a.reduce((y,b)=>(y[b.emotion]=(y[b.emotion]||0)+1,y),{}),p=Object.entries(d).map(([y,b])=>({name:$5e[y]||y,value:b,color:M5e[y]||"hsl(220 9% 46%)"}));i.filter(y=>y.is_completed).length;const v=[...new Set(i.filter(y=>y.is_completed).map(y=>y.level_number))].length,m=i.reduce((y,b)=>y+(b.time_spent_seconds||0),0),g={score:{label:"",color:"hsl(var(--primary))"},required:{label:"",color:"hsl(var(--muted))"}};return c?N.jsx("div",{className:"min-h-screen flex items-center justify-center",children:N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"text-6xl animate-bounce mb-4",children:""}),N.jsx("p",{className:"text-xl",children:"  ..."})]})}):N.jsx("div",{className:"min-h-screen p-4",children:N.jsxs("div",{className:"max-w-6xl mx-auto",children:[N.jsxs("div",{className:"flex items-center justify-between mb-8",children:[N.jsx(Ar,{variant:"ghost",onClick:t,className:"text-lg",children:"  "}),N.jsx("h1",{className:"text-3xl font-bold text-gradient",children:" "})]}),u&&N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:N.jsx(Dn,{className:"mb-8 border-2 gradient-primary text-primary-foreground",children:N.jsx(ar,{className:"p-6",children:N.jsxs("div",{className:"flex items-center gap-6",children:[N.jsx("div",{className:"text-6xl",children:""}),N.jsxs("div",{children:[N.jsx("h2",{className:"text-2xl font-bold",children:u.username}),N.jsxs("p",{className:"text-lg opacity-90",children:[" : ",u.current_level,"  10"]})]})]})})})}),N.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:N.jsx(Dn,{className:"text-center card-hover",children:N.jsxs(ar,{className:"p-6",children:[N.jsx("div",{className:"text-4xl mb-2",children:""}),N.jsx("p",{className:"text-3xl font-bold text-primary",children:v}),N.jsx("p",{className:"text-muted-foreground",children:" "})]})})}),N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:N.jsx(Dn,{className:"text-center card-hover",children:N.jsxs(ar,{className:"p-6",children:[N.jsx("div",{className:"text-4xl mb-2",children:""}),N.jsx("p",{className:"text-3xl font-bold text-secondary",children:i.length}),N.jsx("p",{className:"text-muted-foreground",children:""})]})})}),N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:N.jsx(Dn,{className:"text-center card-hover",children:N.jsxs(ar,{className:"p-6",children:[N.jsx("div",{className:"text-4xl mb-2",children:""}),N.jsx("p",{className:"text-3xl font-bold text-accent",children:Math.round(m/60)}),N.jsx("p",{className:"text-muted-foreground",children:" "})]})})}),N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:N.jsx(Dn,{className:"text-center card-hover",children:N.jsxs(ar,{className:"p-6",children:[N.jsx("div",{className:"text-4xl mb-2",children:""}),N.jsx("p",{className:"text-3xl font-bold text-success",children:a.length}),N.jsx("p",{className:"text-muted-foreground",children:" "})]})})})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:N.jsxs(Dn,{children:[N.jsx(vf,{children:N.jsxs(mf,{className:"flex items-center gap-2",children:[N.jsx("span",{children:""})," "]})}),N.jsx(ar,{children:N.jsx(nq,{config:g,className:"h-[300px]",children:N.jsxs(k5e,{data:h,children:[N.jsx(Ix,{dataKey:"name"}),N.jsx(Dx,{}),N.jsx(pF,{content:N.jsx(rq,{})}),N.jsx(Eu,{dataKey:"score",fill:"hsl(var(--primary))",radius:4}),N.jsx(Eu,{dataKey:"required",fill:"hsl(var(--muted))",radius:4})]})})})]})}),N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:N.jsxs(Dn,{children:[N.jsx(vf,{children:N.jsxs(mf,{className:"flex items-center gap-2",children:[N.jsx("span",{children:""})," "]})}),N.jsx(ar,{children:p.length>0?N.jsx("div",{className:"h-[300px]",children:N.jsx(R8,{width:"100%",height:"100%",children:N.jsxs(R5e,{children:[N.jsx(ys,{data:p,cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:({name:y,percent:b})=>`${y} ${(b*100).toFixed(0)}%`,children:p.map((y,b)=>N.jsx(ax,{fill:y.color},b))}),N.jsx(pF,{})]})})}):N.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:N.jsx("p",{children:"    "})})})]})})]}),N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"mt-6",children:N.jsxs(Dn,{children:[N.jsx(vf,{children:N.jsxs(mf,{className:"flex items-center gap-2",children:[N.jsx("span",{children:""})," "]})}),N.jsx(ar,{children:i.length>0?N.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:i.slice(0,20).map((y,b)=>{const _=Xf.find(x=>x.id===y.level_number);return N.jsxs(it.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:b*.05},className:`flex items-center gap-4 p-4 rounded-xl ${y.is_completed?"bg-success/10":"bg-muted/50"}`,children:[N.jsx("span",{className:"text-3xl",children:(_==null?void 0:_.icon)||""}),N.jsxs("div",{className:"flex-1",children:[N.jsx("p",{className:"font-bold",children:(_==null?void 0:_.title)||` ${y.level_number}`}),N.jsxs("p",{className:"text-sm text-muted-foreground",children:[kW(y.game_type),"  : ",y.score]})]}),N.jsx("span",{className:"text-2xl",children:y.is_completed?"":""})]},y.id)})}):N.jsx("div",{className:"text-center py-8 text-muted-foreground",children:N.jsx("p",{children:"   "})})})]})})]})})},L5e=()=>{const{user:t,loading:e,signOut:n}=qT(),{getProfile:r,updateCurrentLevel:i}=eP(),[o,a]=k.useState(1),[s,u]=k.useState([]),[l,c]=k.useState(null),[f,h]=k.useState("stages");k.useEffect(()=>{vle()},[]),k.useEffect(()=>{(async()=>{if(t){const{data:g}=await r();g&&a(g.current_level||1)}})()},[t,r]);const d=k.useCallback(m=>{c(m),h("game")},[]),p=k.useCallback(async m=>{if(l){const g=Xf.find(y=>y.id===l);if(g&&m>=g.requiredScore&&(u(y=>[...new Set([...y,l])]),l>=o&&l<Xf.length)){const y=l+1;a(y),await i(y)}}setTimeout(()=>{h("stages"),c(null)},2e3)},[l,o,i]),v=k.useCallback(()=>{h("stages"),c(null)},[]);return e?N.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:N.jsxs(it.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[N.jsx("div",{className:"text-7xl mb-4 animate-float",children:""}),N.jsx("h1",{className:"text-3xl font-bold text-gradient mb-2",children:" "}),N.jsx("p",{className:"text-xl text-muted-foreground",children:" ..."})]})}):t?N.jsxs("div",{className:"min-h-screen bg-background",children:[N.jsx("header",{className:"sticky top-0 z-30 bg-background/95 backdrop-blur-sm border-b",children:N.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[N.jsxs("div",{className:"flex items-center gap-3",children:[N.jsx("span",{className:"text-3xl",children:""}),N.jsx("h1",{className:"text-xl font-bold",children:" "})]}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx(Ar,{variant:f==="dashboard"?"default":"ghost",size:"sm",onClick:()=>h(f==="dashboard"?"stages":"dashboard"),children:" "}),N.jsx(Ar,{variant:"ghost",size:"sm",onClick:n,children:" "})]})]})}),N.jsx("main",{className:"py-6",children:N.jsxs(tm,{mode:"wait",children:[f==="stages"&&N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"px-4",children:N.jsx(_le,{currentLevel:o,completedLevels:s,onSelectStage:d})},"stages"),f==="game"&&l&&N.jsx(it.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:N.jsx(U0e,{stageId:l,onBack:v,onComplete:p})},"game"),f==="dashboard"&&N.jsx(it.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:N.jsx(j5e,{onBack:()=>h("stages")})},"dashboard")]})})]}):N.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:N.jsx(wle,{})})},F5e=()=>N.jsx(yse,{children:N.jsx(L5e,{})}),B5e=()=>{const t=v5();return k.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),N.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:N.jsxs("div",{className:"text-center",children:[N.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),N.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),N.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},U5e=new wZ,V5e=()=>N.jsx(_Z,{client:U5e,children:N.jsxs(YQ,{children:[N.jsx(DY,{}),N.jsx(fJ,{}),N.jsx(see,{children:N.jsxs(iee,{children:[N.jsx(pE,{path:"/",element:N.jsx(F5e,{})}),N.jsx(pE,{path:"*",element:N.jsx(B5e,{})})]})})]})});jB(document.getElementById("root")).render(N.jsx(V5e,{}))});export default W5e();
